function n(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("production"!==process.env.NODE_ENV){var o=Y[e],i=o?"function"==typeof o?o.apply(null,n):o:"unknown error nr: "+e;throw Error("[Immer] "+i)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function t(e){return!!e&&!!e[Q]}function r(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return!t||t===Object.prototype}(e)||Array.isArray(e)||!!e[L]||!!e.constructor[L]||s(e)||v(e))}function e(e){return t(e)||n(23,e),e[Q].t}function i(e,t,n){void 0===n&&(n=!1),0===o(e)?(n?Object.keys:Z)(e).forEach(function(r){n&&"symbol"==typeof r||t(r,e[r],e)}):e.forEach(function(n,r){return t(r,n,e)})}function o(e){var t=e[Q];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:s(e)?2:v(e)?3:0}function u(e,t){return 2===o(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function a(e,t){return 2===o(e)?e.get(t):e[t]}function f(e,t,n){var r=o(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function c(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function s(e){return X&&e instanceof Map}function v(e){return q&&e instanceof Set}function p(e){return e.o||e.t}function l(e){if(Array.isArray(e))return e.slice();var t=nn(e);delete t[Q];for(var n=Z(t),r=0;r<n.length;r++){var o=n[r],i=t[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[o]})}return Object.create(Object.getPrototypeOf(e),t)}function d(e,n){b(e)||t(e)||!r(e)||(o(e)>1&&(e.set=e.add=e.clear=e.delete=h),Object.freeze(e),n&&i(e,function(e,t){return d(t,!0)},!0))}function h(){n(2)}function b(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function y(e){var t=tn[e];return t||n("production"!==process.env.NODE_ENV?18:19,e),t}function m(e,t){tn[e]=t}function _(){return"production"===process.env.NODE_ENV||U||n(0),U}function j(e,t){t&&(y("Patches"),e.u=[],e.s=[],e.v=t)}function g(e){O(e),e.p.forEach(S),e.p=null}function O(e){e===U&&(U=e.l)}function w(e){return U={p:[],l:U,h:e,m:!0,_:0}}function S(e){var t=e[Q];0===t.i||1===t.i?t.j():t.g=!0}function P(e,t){t._=t.p.length;var o=t.p[0],i=void 0!==e&&e!==o;return t.h.O||y("ES5").S(t,e,i),i?(o[Q].P&&(g(t),n(4)),r(e)&&(e=M(t,e),t.l||x(t,e)),t.u&&y("Patches").M(o[Q],e,t.u,t.s)):e=M(t,o,[]),g(t),t.u&&t.v(t.u,t.s),e!==H?e:void 0}function M(e,t,n){if(b(t))return t;var r=t[Q];if(!r)return i(t,function(o,i){return A(e,r,t,o,i,n)},!0),t;if(r.A!==e)return t;if(!r.P)return x(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var o=4===r.i||5===r.i?r.o=l(r.k):r.o;i(3===r.i?new Set(o):o,function(t,i){return A(e,r,o,t,i,n)}),x(e,o,!1),n&&e.u&&y("Patches").R(r,n,e.u,e.s)}return r.o}function A(e,o,i,a,c,s){if("production"!==process.env.NODE_ENV&&c===i&&n(5),t(c)){var p=M(e,c,s&&o&&3!==o.i&&!u(o.D,a)?s.concat(a):void 0);if(f(i,a,p),!t(p))return;e.m=!1}if(r(c)&&!b(c)){if(!e.h.N&&e._<1)return;M(e,c),o&&o.A.l||x(e,c)}}function x(e,t,n){void 0===n&&(n=!1),e.h.N&&e.m&&d(t,n)}function z(e,t){var n=e[Q];return(n?p(n):e)[t]}function I(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function E(e){e.P||(e.P=!0,e.l&&E(e.l))}function k(e){e.o||(e.o=l(e.t))}function R(e,t,n){var r=s(t)?y("MapSet").T(t,n):v(t)?y("MapSet").F(t,n):e.O?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:_(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},o=r,i=rn;n&&(o=[r],i=en);var a=Proxy.revocable(o,i),u=a.revoke,c=a.proxy;return r.k=c,r.j=u,c}(t,n):y("ES5").J(t,n);return(n?n.A:_()).p.push(r),r}function D(e){return t(e)||n(22,e),function e(t){if(!r(t))return t;var n,u=t[Q],c=o(t);if(u){if(!u.P&&(u.i<4||!y("ES5").K(u)))return u.t;u.I=!0,n=N(t,c),u.I=!1}else n=N(t,c);return i(n,function(t,r){u&&a(u.t,t)===r||f(n,t,e(r))}),3===c?new Set(n):n}(e)}function N(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return l(e)}function T(){function e(e,t){var n=s[e];return n?n.enumerable=t:s[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[Q];return"production"!==process.env.NODE_ENV&&f(t),rn.get(t,e)},set:function(t){var n=this[Q];"production"!==process.env.NODE_ENV&&f(n),rn.set(n,e,t)}},n}function r(e){for(var t=e.length-1;t>=0;t--){var n=e[t][Q];if(!n.P)switch(n.i){case 5:a(n)&&E(n);break;case 4:o(n)&&E(n)}}}function o(e){for(var t=e.t,n=e.k,r=Z(n),o=r.length-1;o>=0;o--){var i=r[o];if(i!==Q){var a=t[i];if(void 0===a&&!u(t,i))return!0;var f=n[i],s=f&&f[Q];if(s?s.t!==a:!c(f,a))return!0}}var p=!!t[Q];return r.length!==Z(t).length+(p?0:1)}function a(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);return!(!n||n.get)}function f(e){e.g&&n(3,JSON.stringify(p(e)))}var s={};m("ES5",{J:function(t,n){var r=Array.isArray(t),o=function(t,n){if(t){for(var r=Array(n.length),o=0;o<n.length;o++)Object.defineProperty(r,""+o,e(o,!0));return r}var i=nn(n);delete i[Q];for(var a=Z(i),u=0;u<a.length;u++){var c=a[u];i[c]=e(c,t||!!i[c].enumerable)}return Object.create(Object.getPrototypeOf(n),i)}(r,t),i={i:r?5:4,A:n?n.A:_(),P:!1,I:!1,D:{},l:n,t:t,k:o,o:null,g:!1,C:!1};return Object.defineProperty(o,Q,{value:i,writable:!0}),o},S:function(e,n,o){o?t(n)&&n[Q].A===e&&r(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[Q];if(n){var r=n.t,o=n.k,c=n.D,f=n.i;if(4===f)i(o,function(t){t!==Q&&(void 0!==r[t]||u(r,t)?c[t]||e(o[t]):(c[t]=!0,E(n)))}),i(r,function(e){void 0!==o[e]||u(o,e)||(c[e]=!1,E(n))});else if(5===f){if(a(n)&&(E(n),c.length=!0),o.length<r.length)for(var s=o.length;s<r.length;s++)c[s]=!1;else for(var p=r.length;p<o.length;p++)c[p]=!0;for(var l=Math.min(o.length,r.length),h=0;h<l;h++)void 0===c[h]&&e(o[h])}}}}(e.p[0]),r(e.p))},K:function(e){return 4===e.i?o(e):a(e)}})}function F(){function e(t){if(!t||"object"!=typeof t)return t;if(Array.isArray(t))return t.map(e);if(s(t))return new Map(Array.from(t.entries()).map(function(t){return[t[0],e(t[1])]}));if(v(t))return new Set(Array.from(t).map(e));var n=Object.create(Object.getPrototypeOf(t));for(var r in t)n[r]=e(t[r]);return n}function r(n){return t(n)?e(n):n}var c="add";m("Patches",{$:function(t,r){return r.forEach(function(r){for(var i=r.path,u=r.op,f=t,s=0;s<i.length-1;s++)"object"!=typeof(f=a(f,i[s]))&&n(15,i.join("/"));var p=o(f),l=e(r.value),h=i[i.length-1];switch(u){case"replace":switch(p){case 2:return f.set(h,l);case 3:n(16);default:return f[h]=l}case c:switch(p){case 1:return f.splice(h,0,l);case 2:return f.set(h,l);case 3:return f.add(l);default:return f[h]=l}case"remove":switch(p){case 1:return f.splice(h,1);case 2:return f.delete(h);case 3:return f.delete(r.value);default:return delete f[h]}default:n(17,u)}}),t},R:function(e,t,n,o){switch(e.i){case 0:case 4:case 2:return function(e,t,n,o){var f=e.t,s=e.o;i(e.D,function(e,i){var p=a(f,e),l=a(s,e),h=i?u(f,e)?"replace":c:"remove";if(p!==l||"replace"!==h){var v=t.concat(e);n.push("remove"===h?{op:h,path:v}:{op:h,path:v,value:l}),o.push(h===c?{op:"remove",path:v}:"remove"===h?{op:c,path:v,value:r(p)}:{op:"replace",path:v,value:r(p)})}})}(e,t,n,o);case 5:case 1:return function(e,t,n,o){var i=e.t,a=e.D,u=e.o;if(u.length<i.length){var f=[u,i];i=f[0],u=f[1];var s=[o,n];n=s[0],o=s[1]}for(var p=0;p<i.length;p++)if(a[p]&&u[p]!==i[p]){var l=t.concat([p]);n.push({op:"replace",path:l,value:r(u[p])}),o.push({op:"replace",path:l,value:r(i[p])})}for(var h=i.length;h<u.length;h++){var v=t.concat([h]);n.push({op:c,path:v,value:r(u[h])})}i.length<u.length&&o.push({op:"replace",path:t.concat(["length"]),value:i.length})}(e,t,n,o);case 3:return function(e,t,n,r){var o=e.t,i=e.o,a=0;o.forEach(function(e){if(!i.has(e)){var o=t.concat([a]);n.push({op:"remove",path:o,value:e}),r.unshift({op:c,path:o,value:e})}a++}),a=0,i.forEach(function(e){if(!o.has(e)){var i=t.concat([a]);n.push({op:c,path:i,value:e}),r.unshift({op:"remove",path:i,value:e})}a++})}(e,t,n,o)}},M:function(e,t,n,r){n.push({op:"replace",path:[],value:t}),r.push({op:"replace",path:[],value:e.t})}})}function C(){function e(e,t){function n(){this.constructor=e}a(e,t),e.prototype=(n.prototype=t.prototype,new n)}function t(e){e.o||(e.D=new Map,e.o=new Map(e.t))}function o(e){e.o||(e.o=new Set,e.t.forEach(function(t){if(r(t)){var n=R(e.A.h,t,e);e.p.set(t,n),e.o.add(n)}else e.o.add(t)}))}function i(e){e.g&&n(3,JSON.stringify(p(e)))}var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},u=function(){function n(e,t){return this[Q]={i:2,l:t,A:t?t.A:_(),P:!1,I:!1,o:void 0,D:void 0,t:e,k:this,C:!1,g:!1},this}e(n,Map);var o=n.prototype;return Object.defineProperty(o,"size",{get:function(){return p(this[Q]).size}}),o.has=function(e){return p(this[Q]).has(e)},o.set=function(e,n){var r=this[Q];return i(r),p(r).has(e)&&p(r).get(e)===n||(t(r),E(r),r.D.set(e,!0),r.o.set(e,n),r.D.set(e,!0)),this},o.delete=function(e){if(!this.has(e))return!1;var n=this[Q];return i(n),t(n),E(n),n.D.set(e,!1),n.o.delete(e),!0},o.clear=function(){var e=this[Q];return i(e),t(e),E(e),e.D=new Map,e.o.clear()},o.forEach=function(e,t){var n=this;p(this[Q]).forEach(function(r,o){e.call(t,n.get(o),o,n)})},o.get=function(e){var n=this[Q];i(n);var o=p(n).get(e);if(n.I||!r(o))return o;if(o!==n.t.get(e))return o;var a=R(n.A.h,o,n);return t(n),n.o.set(e,a),a},o.keys=function(){return p(this[Q]).keys()},o.values=function(){var e,t=this,n=this.keys();return(e={})[V]=function(){return t.values()},e.next=function(){var e=n.next();return e.done?e:{done:!1,value:t.get(e.value)}},e},o.entries=function(){var e,t=this,n=this.keys();return(e={})[V]=function(){return t.entries()},e.next=function(){var e=n.next();if(e.done)return e;var r=t.get(e.value);return{done:!1,value:[e.value,r]}},e},o[V]=function(){return this.entries()},n}(),c=function(){function t(e,t){return this[Q]={i:3,l:t,A:t?t.A:_(),P:!1,I:!1,o:void 0,t:e,k:this,p:new Map,g:!1,C:!1},this}e(t,Set);var n=t.prototype;return Object.defineProperty(n,"size",{get:function(){return p(this[Q]).size}}),n.has=function(e){var t=this[Q];return i(t),t.o?!!t.o.has(e)||!(!t.p.has(e)||!t.o.has(t.p.get(e))):t.t.has(e)},n.add=function(e){var t=this[Q];return i(t),this.has(e)||(o(t),E(t),t.o.add(e)),this},n.delete=function(e){if(!this.has(e))return!1;var t=this[Q];return i(t),o(t),E(t),t.o.delete(e)||!!t.p.has(e)&&t.o.delete(t.p.get(e))},n.clear=function(){var e=this[Q];return i(e),o(e),E(e),e.o.clear()},n.values=function(){var e=this[Q];return i(e),o(e),e.o.values()},n.entries=function(){var e=this[Q];return i(e),o(e),e.o.entries()},n.keys=function(){return this.values()},n[V]=function(){return this.values()},n.forEach=function(e,t){for(var n=this.values(),r=n.next();!r.done;)e.call(t,r.value,r.value,this),r=n.next()},t}();m("MapSet",{T:function(e,t){return new u(e,t)},F:function(e,t){return new c(e,t)}})}function J(){T(),C(),F()}function K(e){return e}function $(e){return e}var G,U,W="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),X="undefined"!=typeof Map,q="undefined"!=typeof Set,B="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,H=W?Symbol.for("immer-nothing"):((G={})["immer-nothing"]=!0,G),L=W?Symbol.for("immer-draftable"):"__$immer_draftable",Q=W?Symbol.for("immer-state"):"__$immer_state",V="undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator",Y={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},19:"plugin not loaded",20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e}},Z="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,nn=Object.getOwnPropertyDescriptors||function(e){var t={};return Z(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},tn={},rn={get:function(e,t){if(t===Q)return e;var n=p(e);if(!u(n,t))return function(e,t,n){var r,o=I(t,n);return o?"value"in o?o.value:null===(r=o.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var o=n[t];return e.I||!r(o)?o:o===z(e.t,t)?(k(e),e.o[t]=R(e.A.h,o,e)):o},has:function(e,t){return t in p(e)},ownKeys:function(e){return Reflect.ownKeys(p(e))},set:function(e,t,n){var r=I(p(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(e.D[t]=!0,!e.P){if(c(n,z(p(e),t))&&(void 0!==n||u(e.t,t)))return!0;k(e),E(e)}return e.o[t]=n,!0},deleteProperty:function(e,t){return void 0!==z(e.t,t)||t in e.t?(e.D[t]=!1,k(e),E(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=p(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){n(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){n(12)}},en={};i(rn,function(e,t){en[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),en.deleteProperty=function(e,t){return"production"!==process.env.NODE_ENV&&isNaN(parseInt(t))&&n(13),rn.deleteProperty.call(this,e[0],t)},en.set=function(e,t,r){return"production"!==process.env.NODE_ENV&&"length"!==t&&isNaN(parseInt(t))&&n(14),rn.set.call(this,e[0],t,r,e[0])};var on=function(){function e(e){this.O=B,this.N="production"!==process.env.NODE_ENV,"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var o=e.prototype;return o.produce=function(e,t,o){if("function"==typeof e&&"function"!=typeof t){var i=t;t=e;var a=this;return function(e){var n=this;void 0===e&&(e=i);for(var r=arguments.length,o=Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=arguments[u];return a.produce(e,function(e){var r;return(r=t).call.apply(r,[n,e].concat(o))})}}var u;if("function"!=typeof t&&n(6),void 0!==o&&"function"!=typeof o&&n(7),r(e)){var c=w(this),f=R(this,e,void 0),s=!0;try{u=t(f),s=!1}finally{s?g(c):O(c)}return"undefined"!=typeof Promise&&u instanceof Promise?u.then(function(e){return j(c,o),P(e,c)},function(e){throw g(c),e}):(j(c,o),P(u,c))}if(!e||"object"!=typeof e){if((u=t(e))===H)return;return void 0===u&&(u=e),this.N&&d(u,!0),u}n(21,e)},o.produceWithPatches=function(e,t){var n,r,o=this;return"function"==typeof e?function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return o.produceWithPatches(t,function(t){return e.apply(void 0,[t].concat(r))})}:[this.produce(e,t,function(e,t){n=e,r=t}),n,r]},o.createDraft=function(e){r(e)||n(8),t(e)&&(e=D(e));var o=w(this),i=R(this,e,void 0);return i[Q].C=!0,O(o),i},o.finishDraft=function(e,t){var r=e&&e[Q];"production"!==process.env.NODE_ENV&&(r&&r.C||n(9),r.I&&n(10));var o=r.A;return j(o,t),P(void 0,o)},o.setAutoFreeze=function(e){this.N=e},o.setUseProxies=function(e){e&&!B&&n(20),this.O=e},o.applyPatches=function(e,n){var r;for(r=n.length-1;r>=0;r--){var o=n[r];if(0===o.path.length&&"replace"===o.op){e=o.value;break}}var i=y("Patches").$;return t(e)?i(e,n):this.produce(e,function(e){return i(e,n.slice(r+1))})},e}(),un=new on,an=un.produce,fn=un.produceWithPatches.bind(un),cn=un.setAutoFreeze.bind(un),sn=un.setUseProxies.bind(un),vn=un.applyPatches.bind(un),pn=un.createDraft.bind(un),ln=un.finishDraft.bind(un);export default an;export{on as Immer,vn as applyPatches,K as castDraft,$ as castImmutable,pn as createDraft,D as current,J as enableAllPlugins,T as enableES5,C as enableMapSet,F as enablePatches,ln as finishDraft,L as immerable,t as isDraft,r as isDraftable,H as nothing,e as original,an as produce,fn as produceWithPatches,cn as setAutoFreeze,sn as setUseProxies};