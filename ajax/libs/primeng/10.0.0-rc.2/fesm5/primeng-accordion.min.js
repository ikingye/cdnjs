import{EventEmitter,Inject,forwardRef,ChangeDetectorRef,Component,ChangeDetectionStrategy,ViewEncapsulation,Input,Output,ContentChildren,ElementRef,NgModule}from"@angular/core";import{trigger,state,style,transition,animate}from"@angular/animations";import{CommonModule}from"@angular/common";import{Header,PrimeTemplate,SharedModule}from"primeng/api";var idx=0,AccordionTab=function(){function e(e,t){this.changeDetector=t,this.cache=!0,this.selectedChange=new EventEmitter,this.transitionOptions="400ms cubic-bezier(0.86, 0, 0.07, 1)",this.id="p-accordiontab-"+idx++,this.accordion=e}return Object.defineProperty(e.prototype,"selected",{get:function(){return this._selected},set:function(e){this._selected=e,this.loaded||this.changeDetector.markForCheck()},enumerable:!1,configurable:!0}),e.prototype.ngAfterContentInit=function(){var e=this;this.templates.forEach(function(t){switch(t.getType()){case"content":e.contentTemplate=t.template;break;case"header":e.header=t.template;break;default:e.contentTemplate=t.template}})},e.prototype.toggle=function(e){if(this.disabled)return!1;var t=this.findTabIndex();if(this.selected)this.selected=!1,this.accordion.onClose.emit({originalEvent:e,index:t});else{if(!this.accordion.multiple)for(var n=0;n<this.accordion.tabs.length;n++)this.accordion.tabs[n].selected=!1,this.accordion.tabs[n].selectedChange.emit(!1),this.accordion.tabs[n].changeDetector.markForCheck();this.selected=!0,this.loaded=!0,this.accordion.onOpen.emit({originalEvent:e,index:t})}this.selectedChange.emit(this.selected),this.accordion.updateActiveIndex(),this.changeDetector.markForCheck(),e.preventDefault()},e.prototype.findTabIndex=function(){for(var e=-1,t=0;t<this.accordion.tabs.length;t++)if(this.accordion.tabs[t]==this){e=t;break}return e},Object.defineProperty(e.prototype,"hasHeaderFacet",{get:function(){return this.headerFacet&&this.headerFacet.length>0},enumerable:!1,configurable:!0}),e.prototype.onKeydown=function(e){32!==e.which&&13!==e.which||(this.toggle(e),e.preventDefault())},e.prototype.ngOnDestroy=function(){this.accordion.tabs.splice(this.findTabIndex(),1)},e.ctorParameters=function(){return[{type:void 0,decorators:[{type:Inject,args:[forwardRef(function(){return Accordion})]}]},{type:ChangeDetectorRef}]},e.decorators=[{type:Component,args:[{selector:"p-accordionTab",template:'\n        <div class="p-accordion-tab" [ngClass]="{\'p-accordion-tab-active\': selected}">\n            <div class="p-accordion-header" [ngClass]="{\'p-highlight\': selected, \'p-disabled\': disabled}">\n                <a role="tab" class="p-accordion-header-link" (click)="toggle($event)" (keydown)="onKeydown($event)" [attr.tabindex]="disabled ? null : 0"\n                    [attr.id]="id" [attr.aria-controls]="id + \'-content\'" [attr.aria-expanded]="selected">\n                    <span class="p-accordion-toggle-icon" [ngClass]="selected ? accordion.collapseIcon : accordion.expandIcon"></span>\n                    <span class="p-accordion-header-text" *ngIf="!hasHeaderFacet">\n                        {{header}}\n                    </span>\n                    <ng-container *ngTemplateOutlet="headerTemplate"></ng-container>\n                    <ng-content select="p-header" *ngIf="hasHeaderFacet"></ng-content>\n                </a>\n            </div>\n            <div [attr.id]="id + \'-content\'" class="p-toggleable-content" [@tabContent]="selected ? {value: \'visible\', params: {transitionParams: transitionOptions}} : {value: \'hidden\', params: {transitionParams: transitionOptions}}"\n                role="region" [attr.aria-hidden]="!selected" [attr.aria-labelledby]="id">\n                <div class="p-accordion-content">\n                    <ng-content></ng-content>\n                    <ng-container *ngIf="contentTemplate && (cache ? loaded : selected)">\n                        <ng-container *ngTemplateOutlet="contentTemplate"></ng-container>\n                    </ng-container>\n                </div>\n            </div>\n        </div>\n    ',animations:[trigger("tabContent",[state("hidden",style({height:"0",overflow:"hidden"})),state("visible",style({height:"*"})),transition("visible <=> hidden",[style({overflow:"hidden"}),animate("{{transitionParams}}")]),transition("void => *",animate(0))])],changeDetection:ChangeDetectionStrategy.OnPush,encapsulation:ViewEncapsulation.None,styles:[".p-accordion-header-link{cursor:pointer;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;text-decoration:none}.p-accordion-header-link:focus{z-index:1}.p-accordion-header-text{line-height:1}"]}]}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:Inject,args:[forwardRef(function(){return Accordion})]}]},{type:ChangeDetectorRef}]},e.propDecorators={header:[{type:Input}],disabled:[{type:Input}],cache:[{type:Input}],selectedChange:[{type:Output}],transitionOptions:[{type:Input}],headerFacet:[{type:ContentChildren,args:[Header]}],templates:[{type:ContentChildren,args:[PrimeTemplate]}],selected:[{type:Input}]},e}(),Accordion=function(){function e(e,t){this.el=e,this.changeDetector=t,this.onClose=new EventEmitter,this.onOpen=new EventEmitter,this.expandIcon="pi pi-fw pi-chevron-right",this.collapseIcon="pi pi-fw pi-chevron-down",this.activeIndexChange=new EventEmitter,this.tabs=[]}return e.prototype.ngAfterContentInit=function(){var e=this;this.initTabs(),this.tabListSubscription=this.tabList.changes.subscribe(function(t){e.initTabs(),e.changeDetector.markForCheck()})},e.prototype.initTabs=function(){this.tabs=this.tabList.toArray(),this.updateSelectionState()},e.prototype.getBlockableElement=function(){return this.el.nativeElement.children[0]},Object.defineProperty(e.prototype,"activeIndex",{get:function(){return this._activeIndex},set:function(e){this._activeIndex=e,this.preventActiveIndexPropagation?this.preventActiveIndexPropagation=!1:this.updateSelectionState()},enumerable:!1,configurable:!0}),e.prototype.updateSelectionState=function(){if(this.tabs&&this.tabs.length&&null!=this._activeIndex)for(var e=0;e<this.tabs.length;e++){var t=this.multiple?this._activeIndex.includes(e):e===this._activeIndex;t!==this.tabs[e].selected&&(this.tabs[e].selected=t,this.tabs[e].selectedChange.emit(t))}},e.prototype.updateActiveIndex=function(){var e=this,t=this.multiple?[]:null;this.tabs.forEach(function(n,i){if(n.selected){if(!e.multiple)return void(t=i);t.push(i)}}),this.preventActiveIndexPropagation=!0,this.activeIndexChange.emit(t)},e.prototype.ngOnDestroy=function(){this.tabListSubscription&&this.tabListSubscription.unsubscribe()},e.ctorParameters=function(){return[{type:ElementRef},{type:ChangeDetectorRef}]},e.decorators=[{type:Component,args:[{selector:"p-accordion",template:'\n        <div [ngClass]="\'p-accordion p-component\'" [ngStyle]="style" [class]="styleClass" role="tablist">\n            <ng-content></ng-content>\n        </div>\n    ',changeDetection:ChangeDetectionStrategy.OnPush}]}],e.ctorParameters=function(){return[{type:ElementRef},{type:ChangeDetectorRef}]},e.propDecorators={multiple:[{type:Input}],onClose:[{type:Output}],onOpen:[{type:Output}],style:[{type:Input}],styleClass:[{type:Input}],expandIcon:[{type:Input}],collapseIcon:[{type:Input}],activeIndexChange:[{type:Output}],tabList:[{type:ContentChildren,args:[AccordionTab]}],activeIndex:[{type:Input}]},e}(),AccordionModule=function(){function e(){}return e.decorators=[{type:NgModule,args:[{imports:[CommonModule],exports:[Accordion,AccordionTab,SharedModule],declarations:[Accordion,AccordionTab]}]}],e}();export{Accordion,AccordionModule,AccordionTab};