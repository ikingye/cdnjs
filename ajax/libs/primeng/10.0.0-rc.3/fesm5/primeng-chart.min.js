import{EventEmitter,ElementRef,Component,ChangeDetectionStrategy,ViewEncapsulation,Input,Output,NgModule}from"@angular/core";import{CommonModule}from"@angular/common";import*as Chart from"chart.js";var UIChart=function(){function t(t){this.el=t,this.plugins=[],this.responsive=!0,this.onDataSelect=new EventEmitter,this._options={}}return Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t,this.reinit()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this._options},set:function(t){this._options=t,this.reinit()},enumerable:!1,configurable:!0}),t.prototype.ngAfterViewInit=function(){this.initChart(),this.initialized=!0},t.prototype.onCanvasClick=function(t){if(this.chart){var e=this.chart.getElementAtEvent(t),n=this.chart.getDatasetAtEvent(t);e&&e[0]&&n&&this.onDataSelect.emit({originalEvent:t,element:e[0],dataset:n})}},t.prototype.initChart=function(){var t=this.options||{};t.responsive=this.responsive,t.responsive&&(this.height||this.width)&&(t.maintainAspectRatio=!1),this.chart=new Chart(this.el.nativeElement.children[0].children[0],{type:this.type,data:this.data,options:this.options,plugins:this.plugins})},t.prototype.getCanvas=function(){return this.el.nativeElement.children[0].children[0]},t.prototype.getBase64Image=function(){return this.chart.toBase64Image()},t.prototype.generateLegend=function(){if(this.chart)return this.chart.generateLegend()},t.prototype.refresh=function(){this.chart&&this.chart.update()},t.prototype.reinit=function(){this.chart&&(this.chart.destroy(),this.initChart())},t.prototype.ngOnDestroy=function(){this.chart&&(this.chart.destroy(),this.initialized=!1,this.chart=null)},t.ctorParameters=function(){return[{type:ElementRef}]},t.decorators=[{type:Component,args:[{selector:"p-chart",template:'\n        <div style="position:relative" [style.width]="responsive && !width ? null : width" [style.height]="responsive && !height ? null : height">\n            <canvas [attr.width]="responsive && !width ? null : width" [attr.height]="responsive && !height ? null : height" (click)="onCanvasClick($event)"></canvas>\n        </div>\n    ',changeDetection:ChangeDetectionStrategy.OnPush,encapsulation:ViewEncapsulation.None}]}],t.ctorParameters=function(){return[{type:ElementRef}]},t.propDecorators={type:[{type:Input}],plugins:[{type:Input}],width:[{type:Input}],height:[{type:Input}],responsive:[{type:Input}],onDataSelect:[{type:Output}],data:[{type:Input}],options:[{type:Input}]},t}(),ChartModule=function(){function t(){}return t.decorators=[{type:NgModule,args:[{imports:[CommonModule],exports:[UIChart],declarations:[UIChart]}]}],t}();export{ChartModule,UIChart};