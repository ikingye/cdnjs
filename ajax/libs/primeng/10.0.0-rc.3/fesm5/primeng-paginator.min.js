import{EventEmitter,ChangeDetectorRef,Component,ChangeDetectionStrategy,ViewEncapsulation,Input,Output,NgModule}from"@angular/core";import{CommonModule}from"@angular/common";import{FormsModule}from"@angular/forms";import{DropdownModule}from"primeng/dropdown";import{RippleModule}from"primeng/ripple";import{SharedModule}from"primeng/api";var __values=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],a=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&a>=t.length&&(t=void 0),{value:t&&t[a++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Paginator=function(){function t(t){this.cd=t,this.pageLinkSize=5,this.onPageChange=new EventEmitter,this.alwaysShow=!0,this.dropdownScrollHeight="200px",this.currentPageReportTemplate="{currentPage} of {totalPages}",this.totalRecords=0,this.rows=0,this._first=0}return t.prototype.ngOnInit=function(){this.updatePaginatorState()},t.prototype.ngOnChanges=function(t){t.totalRecords&&(this.updatePageLinks(),this.updatePaginatorState(),this.updateFirst(),this.updateRowsPerPageOptions()),t.first&&(this._first=t.first.currentValue,this.updatePageLinks(),this.updatePaginatorState()),t.rows&&(this.updatePageLinks(),this.updatePaginatorState()),t.rowsPerPageOptions&&this.updateRowsPerPageOptions()},Object.defineProperty(t.prototype,"first",{get:function(){return this._first},set:function(t){this._first=t},enumerable:!1,configurable:!0}),t.prototype.updateRowsPerPageOptions=function(){var t,e;if(this.rowsPerPageOptions){this.rowsPerPageItems=[];try{for(var n=__values(this.rowsPerPageOptions),a=n.next();!a.done;a=n.next()){var o=a.value;"object"==typeof o&&o.showAll?this.rowsPerPageItems.unshift({label:o.showAll,value:this.totalRecords}):this.rowsPerPageItems.push({label:String(o),value:o})}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}}},t.prototype.isFirstPage=function(){return 0===this.getPage()},t.prototype.isLastPage=function(){return this.getPage()===this.getPageCount()-1},t.prototype.getPageCount=function(){return Math.ceil(this.totalRecords/this.rows)||1},t.prototype.calculatePageLinkBoundaries=function(){var t=this.getPageCount(),e=Math.min(this.pageLinkSize,t),n=Math.max(0,Math.ceil(this.getPage()-e/2)),a=Math.min(t-1,n+e-1),o=this.pageLinkSize-(a-n+1);return[n=Math.max(0,n-o),a]},t.prototype.updatePageLinks=function(){this.pageLinks=[];for(var t=this.calculatePageLinkBoundaries(),e=t[0],n=t[1],a=e;a<=n;a++)this.pageLinks.push(a+1)},t.prototype.changePage=function(t){var e=this.getPageCount();if(t>=0&&t<e){this._first=this.rows*t;var n={page:t,first:this.first,rows:this.rows,pageCount:e};this.updatePageLinks(),this.onPageChange.emit(n),this.updatePaginatorState()}},t.prototype.updateFirst=function(){var t=this,e=this.getPage();e>0&&this.totalRecords&&this.first>=this.totalRecords&&Promise.resolve(null).then(function(){return t.changePage(e-1)})},t.prototype.getPage=function(){return Math.floor(this.first/this.rows)},t.prototype.changePageToFirst=function(t){this.isFirstPage()||this.changePage(0),t.preventDefault()},t.prototype.changePageToPrev=function(t){this.changePage(this.getPage()-1),t.preventDefault()},t.prototype.changePageToNext=function(t){this.changePage(this.getPage()+1),t.preventDefault()},t.prototype.changePageToLast=function(t){this.isLastPage()||this.changePage(this.getPageCount()-1),t.preventDefault()},t.prototype.onPageLinkClick=function(t,e){this.changePage(e),t.preventDefault()},t.prototype.onRppChange=function(t){this.changePage(this.getPage())},t.prototype.updatePaginatorState=function(){this.paginatorState={page:this.getPage(),pageCount:this.getPageCount(),rows:this.rows,first:this.first,totalRecords:this.totalRecords}},Object.defineProperty(t.prototype,"currentPageReport",{get:function(){return this.currentPageReportTemplate.replace("{currentPage}",String(this.getPage()+1)).replace("{totalPages}",String(this.getPageCount())).replace("{first}",String(this._first+1)).replace("{last}",String(Math.min(this._first+this.rows,this.totalRecords))).replace("{rows}",String(this.rows)).replace("{totalRecords}",String(this.totalRecords))},enumerable:!1,configurable:!0}),t.ctorParameters=function(){return[{type:ChangeDetectorRef}]},t.decorators=[{type:Component,args:[{selector:"p-paginator",template:'\n        <div [class]="styleClass" [ngStyle]="style" [ngClass]="\'p-paginator p-component\'" *ngIf="alwaysShow ? true : (pageLinks && pageLinks.length > 1)">\n            <div class="p-paginator-left-content" *ngIf="templateLeft">\n                <ng-container *ngTemplateOutlet="templateLeft; context: {$implicit: paginatorState}"></ng-container>\n            </div>\n            <span class="p-paginator-current" *ngIf="showCurrentPageReport">{{currentPageReport}}</span>\n            <button type="button" [disabled]="isFirstPage()" (click)="changePageToFirst($event)" pRipple\n                    class="p-paginator-first p-paginator-element p-link" [ngClass]="{\'p-disabled\':isFirstPage()}">\n                <span class="p-paginator-icon pi pi-angle-double-left"></span>\n            </button>\n            <button type="button" [disabled]="isFirstPage()" (click)="changePageToPrev($event)" pRipple\n                    class="p-paginator-prev p-paginator-element p-link" [ngClass]="{\'p-disabled\':isFirstPage()}">\n                <span class="p-paginator-icon pi pi-angle-left"></span>\n            </button>\n            <span class="p-paginator-pages">\n                <button type="button" *ngFor="let pageLink of pageLinks" class="p-paginator-page p-paginator-element p-link" [ngClass]="{\'p-highlight\': (pageLink-1 == getPage())}"\n                    (click)="onPageLinkClick($event, pageLink - 1)" pRipple>{{pageLink}}</button>\n            </span>\n            <button type="button" [disabled]="isLastPage()" (click)="changePageToNext($event)" pRipple\n                    class="p-paginator-next p-paginator-element p-link" [ngClass]="{\'p-disabled\':isLastPage()}">\n                <span class="p-paginator-icon pi pi-angle-right"></span>\n            </button>\n            <button type="button" [disabled]="isLastPage()" (click)="changePageToLast($event)" pRipple\n                    class="p-paginator-last p-paginator-element p-link" [ngClass]="{\'p-disabled\':isLastPage()}">\n                <span class="p-paginator-icon pi pi-angle-double-right"></span>\n            </button>\n            <p-dropdown [options]="rowsPerPageItems" [(ngModel)]="rows" *ngIf="rowsPerPageOptions"\n                (onChange)="onRppChange($event)" [appendTo]="dropdownAppendTo" [scrollHeight]="dropdownScrollHeight"></p-dropdown>\n            <div class="p-paginator-right-content" *ngIf="templateRight">\n                <ng-container *ngTemplateOutlet="templateRight; context: {$implicit: paginatorState}"></ng-container>\n            </div>\n        </div>\n    ',changeDetection:ChangeDetectionStrategy.OnPush,encapsulation:ViewEncapsulation.None,styles:[".p-paginator{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;-ms-flex-wrap:wrap;flex-wrap:wrap}.p-paginator-left-content{margin-right:auto}.p-paginator-right-content{margin-left:auto}.p-paginator-current,.p-paginator-first,.p-paginator-last,.p-paginator-next,.p-paginator-page,.p-paginator-prev{cursor:pointer;display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;line-height:1;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;overflow:hidden;position:relative}.p-paginator-element:focus{z-index:1;position:relative}"]}]}],t.ctorParameters=function(){return[{type:ChangeDetectorRef}]},t.propDecorators={pageLinkSize:[{type:Input}],onPageChange:[{type:Output}],style:[{type:Input}],styleClass:[{type:Input}],alwaysShow:[{type:Input}],templateLeft:[{type:Input}],templateRight:[{type:Input}],dropdownAppendTo:[{type:Input}],dropdownScrollHeight:[{type:Input}],currentPageReportTemplate:[{type:Input}],showCurrentPageReport:[{type:Input}],totalRecords:[{type:Input}],rows:[{type:Input}],rowsPerPageOptions:[{type:Input}],first:[{type:Input}]},t}(),PaginatorModule=function(){function t(){}return t.decorators=[{type:NgModule,args:[{imports:[CommonModule,DropdownModule,FormsModule,SharedModule,RippleModule],exports:[Paginator,DropdownModule,FormsModule,SharedModule],declarations:[Paginator]}]}],t}();export{Paginator,PaginatorModule};