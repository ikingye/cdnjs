!function(t,n){"function"==typeof define&&define.amd?define(n):n(t)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:this,function(t){"use strict";if(!t.AbortController){class n{constructor(){const t="undefined"!=typeof document?document.createDocumentFragment():{};["addEventListener","dispatchEvent","removeEventListener"].forEach(n=>this[n]=((...e)=>t[n]&&t[n](...e)))}}class e extends n{constructor(){super(),this.aborted=!1}toString(){return"[object AbortSignal]"}}class o{constructor(){this.signal=new e}abort(){this.signal.aborted=!0;try{this.signal.dispatchEvent(new Event("abort"))}catch(t){if("undefined"!=typeof document){const t=document.createEvent("Event");t.initEvent("abort",!1,!0),this.signal.dispatchEvent(t)}}}toString(){return"[object AbortController]"}}"undefined"!=typeof Symbol&&Symbol.toStringTag&&(o.prototype[Symbol.toStringTag]="AbortController",e.prototype[Symbol.toStringTag]="AbortSignal"),t.AbortController=o,t.AbortSignal=e}}),function(t,n,e){"function"==typeof define&&define.amd?define(e):"undefined"!=typeof module&&module.exports?module.exports=e(t,n):n[t]=e(t,n)}("CAF",this,function(t,n){"use strict";class e{constructor(){this.controller=new AbortController,this.signal=this.controller.signal,this.signal.pr=new Promise((t,n)=>this.rej=n),this.signal.pr.catch(Function.prototype)}abort(t){this.rej(t),this.controller.abort()}}const o=Symbol("Timeout Token");return r.cancelToken=e,r.delay=i,r.timeout=function(t,n="Timeout"){t=Number(t)||0;var r=new e;return i(r.signal,t).then(l,l),Object.defineProperty(r,o,{value:!0,writable:!1,enumerable:!1,configurable:!1}),r;function l(){r.abort(n),r=null}},r;function r(t){return function(n,...r){var i=n instanceof e?n.signal:n;if(i.aborted)return i.pr;var l=i.pr.catch(function(t){try{var n=u.return();throw void 0!==n.value?n.value:t}finally{u=c=l=a=null}}),{it:u,result:c}=function(t,...n){var e=t.apply(this,n);return t=n=null,{it:e,result:function t(n){try{var o=e.next(n);n=null}catch(n){return Promise.reject(n)}return function n(o){var r=Promise.resolve(o.value);return o.done?e=null:(r=r.then(t,function(t){return Promise.resolve(e.throw(t)).then(n)})).catch(function(){e=null}),o=null,r}(o)}()}}.call(this,t,i,...r),a=Promise.race([c,l]);return n!==i&&n[o]?a.then(function(){n.abort()},function(){n.abort()}):a.catch(Function.prototype),i=r=null,a}}function i(t,n){"number"==typeof t&&"number"!=typeof n&&([n,t]=[t,n]);var o=t&&t instanceof e?t.signal:t;return o&&o.aborted?o.pr:new Promise(function(t,e){o&&o.pr.catch(function(){r&&(clearTimeout(r),e(`delay (${n}) interrupted`)),t=e=r=o=null});var r=setTimeout(function(){t(`delayed: ${n}`),t=e=r=o=null},n)})}});