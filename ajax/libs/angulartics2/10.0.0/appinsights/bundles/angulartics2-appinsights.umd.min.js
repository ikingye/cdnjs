!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/platform-browser"),require("@angular/router"),require("rxjs/operators"),require("angulartics2")):"function"==typeof define&&define.amd?define("angulartics2/appinsights",["exports","@angular/core","@angular/platform-browser","@angular/router","rxjs/operators","angulartics2"],e):e(((t=t||self).angulartics2=t.angulartics2||{},t.angulartics2.appinsights={}),t.ng.core,t.ng.platformBrowser,t.ng.router,t.rxjs.operators,t.angulartics2)}(this,(function(t,e,r,i,s,n){"use strict";var a=function(){this.userId=null},o=function(){function t(t,e,r){var i=this;this.angulartics2=t,this.title=e,this.router=r,this.loadStartTime=null,this.loadTime=null,this.metrics=null,this.dimensions=null,this.measurements=null,"undefined"==typeof appInsights&&console.warn("appInsights not found");var s=new a;this.angulartics2.settings.appInsights=Object.assign(Object.assign({},s),this.angulartics2.settings.appInsights),this.angulartics2.setUsername.subscribe((function(t){return i.setUsername(t)})),this.angulartics2.setUserProperties.subscribe((function(t){return i.setUserProperties(t)}))}return t.prototype.startTracking=function(){var t=this;this.angulartics2.pageTrack.pipe(this.angulartics2.filterDeveloperMode()).subscribe((function(e){return t.pageTrack(e.path)})),this.angulartics2.eventTrack.pipe(this.angulartics2.filterDeveloperMode()).subscribe((function(e){return t.eventTrack(e.action,e.properties)})),this.angulartics2.exceptionTrack.pipe(this.angulartics2.filterDeveloperMode()).subscribe((function(e){return t.exceptionTrack(e)})),this.router.events.pipe(this.angulartics2.filterDeveloperMode(),s.filter((function(t){return t instanceof i.NavigationStart}))).subscribe((function(e){return t.startTimer()})),this.router.events.pipe(s.filter((function(t){return t instanceof i.NavigationError||t instanceof i.NavigationEnd}))).subscribe((function(e){return t.stopTimer()}))},t.prototype.startTimer=function(){this.loadStartTime=Date.now(),this.loadTime=null},t.prototype.stopTimer=function(){this.loadTime=Date.now()-this.loadStartTime,this.loadStartTime=null},t.prototype.pageTrack=function(t){appInsights.trackPageView(this.title.getTitle(),t,this.dimensions,this.metrics,this.loadTime)},t.prototype.eventTrack=function(t,e){appInsights.trackEvent(t,e,this.measurements)},t.prototype.exceptionTrack=function(t){var e=t.event||t.description||t;appInsights.trackException(e)},t.prototype.setUsername=function(t){this.angulartics2.settings.appInsights.userId=t,appInsights.setAuthenticatedUserContext(t)},t.prototype.setUserProperties=function(t){t.userId&&(this.angulartics2.settings.appInsights.userId=t.userId),t.accountId?appInsights.setAuthenticatedUserContext(this.angulartics2.settings.appInsights.userId,t.accountId):appInsights.setAuthenticatedUserContext(this.angulartics2.settings.appInsights.userId)},t}();o.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new o(e.ɵɵinject(n.Angulartics2),e.ɵɵinject(r.Title),e.ɵɵinject(i.Router))},token:o,providedIn:"root"}),o.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],o.ctorParameters=function(){return[{type:n.Angulartics2},{type:r.Title},{type:i.Router}]},t.Angulartics2AppInsights=o,t.AppInsightsDefaults=a,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=angulartics2-appinsights.umd.min.js.map