!function(e,t){var n;"function"==typeof define&&define.amd?define(["exports","./navigation-menu-panel","../../globals/js/misc/on","../../globals/js/misc/event-matches","../../globals/js/settings"],t):"undefined"!=typeof exports?t(exports,require("./navigation-menu-panel"),require("../../globals/js/misc/on"),require("../../globals/js/misc/event-matches"),require("../../globals/js/settings")):(t(n={},e.navigationMenuPanel,e.on,e.eventMatches,e.settings),e.navigationMenu=n)}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,function(e,r,i,l,c){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function f(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,o,a=d(r);return t=i?(e=d(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(o=t)||"object"!==s(o)&&"function"!=typeof o?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):o}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,r=t(r),i=t(i),l=t(l),c=t(c);var n=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(a,r.default);var e,t,n,o=g(a);function a(e,t){var s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(s=o.call(this,e,t)).getCurrentNavigation=function(){return s.element.ownerDocument.activeElement},s.navigate=function(e){var t,n,o,a,r,i,l=u(s.element.querySelectorAll(s.options.selectorFocusableNavItems)),c=s.getCurrentNavigation();t=c,i=Math.max(l.indexOf(t)+e,-1),l[a=i,r=l.length,n=a-(a<r?0:r),o=l.length,n+(0<=n?0:o)].focus()},s._handleKeyDown=function(e){var t=!s.element.hasAttribute("hidden");if(27===e.which&&t)return s.changeState("collapsed"),void(s.triggerButton&&s.triggerButton.focus());var n,o=(0,l.default)(e,s.options.selectorShellNavSubmenu),a=(0,l.default)(e,s.options.selectorShellNavLink);!o&&!a||(n={38:s.constructor.NAVIGATE.BACKWARD,40:s.constructor.NAVIGATE.FORWARD}[e.which])&&(e.preventDefault(),s.navigate(n))},s._handleFocusOut=function(e){var t=s.element.contains(e.relatedTarget)||e.relatedTarget===s.triggerButton||!e.relatedTarget;s.element.contains(e.target)&&!t&&(s.changeState("collapsed"),s.triggerButton.focus())},s.changeNavSubmenuState=function(e){var t=e.matchesNavSubmenu,n=e.shouldBeCollapsed,o=t.closest(s.options.selectorShellNavCategory);o&&(t.setAttribute("aria-expanded",!n),o.classList.toggle(s.options.classShellNavCategoryExpanded),Array.prototype.forEach.call(o.querySelectorAll(s.options.selectorShellNavLink),function(e){e.tabIndex=n?-1:0}))},s._handleClick=function(e){var t,n=(0,l.default)(e,s.options.selectorShellNavSubmenu),o=(0,l.default)(e,s.options.selectorShellNavLink),a=(0,l.default)(e,s.options.selectorShellNestedNavLink);if(n||o){if(a)return u(s.element.querySelectorAll(s.options.selectorShellNavLinkCurrent)).forEach(function(e){e.classList.remove(s.options.classShellNavItemActive,s.options.classShellNavLinkCurrent)}),void a.closest(s.options.selectorShellNavNestedCategory).classList.add(s.options.classShellNavItemActive);n?(t="true"===n.getAttribute("aria-expanded"),s.changeNavSubmenuState({matchesNavSubmenu:n,isExpanded:t})):o&&(u(s.element.querySelectorAll(s.options.selectorShellNavLinkCurrent)).forEach(function(e){e.classList.remove(s.options.classShellNavItemActive,s.options.classShellNavLinkCurrent)}),o.closest(s.options.selectorShellNavItem).classList.add(s.options.classShellNavItemActive))}},s.manage((0,i.default)(e,"click",s._handleClick)),s.manage((0,i.default)(e,"keydown",s._handleKeyDown)),s.manage((0,i.default)(s.element.ownerDocument,"click",function(e){s.element.hasAttribute("hidden")||s.triggerButton.contains(e.target)||s.element.contains(e.target)||s.changeState("collapsed")}));var n="onfocusout"in window;return s.manage((0,i.default)(s.element,n?"focusout":"blur",s._handleFocusOut,!n)),s}return e=a,n=[{key:"options",get:function(){var e=c.default.prefix;return Object.assign(Object.create(r.default.options),{selectorInit:"[data-navigation-menu]",attribInitTarget:"data-navigation-menu-target",selectorShellNavSubmenu:".".concat(e,"--navigation__category-toggle"),selectorShellNavLink:".".concat(e,"--navigation-link"),selectorShellNestedNavLink:".".concat(e,"--navigation__category-item > a.").concat(e,"--navigation-link"),selectorShellNavLinkCurrent:".".concat(e,"--navigation-item--active,.").concat(e,"--navigation__category-item--active"),selectorFocusableNavItems:"\n        .".concat(e,"--navigation__category-toggle,\n        .").concat(e,"--navigation-item > .").concat(e,"--navigation-link,\n        .").concat(e,'--navigation-link[tabindex="0"]\n      '),selectorShellNavItem:".".concat(e,"--navigation-item"),selectorShellNavCategory:".".concat(e,"--navigation__category"),selectorShellNavNestedCategory:".".concat(e,"--navigation__category-item"),classShellNavItemActive:"".concat(e,"--navigation-item--active"),classShellNavLinkCurrent:"".concat(e,"--navigation__category-item--active"),classShellNavCategoryExpanded:"".concat(e,"--navigation__category--expanded")})}}],(t=null)&&f(e.prototype,t),n&&f(e,n),a.components=new WeakMap,a.NAVIGATE={BACKWARD:-1,FORWARD:1},a}();e.default=n});