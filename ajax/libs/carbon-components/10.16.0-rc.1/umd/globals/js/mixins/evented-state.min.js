!function(t,e){var n;"function"==typeof define&&define.amd?define(["exports"],e):"undefined"!=typeof exports?e(exports):(e(n={}),t.eventedState=n)}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,function(t){"use strict";function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(n){return function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}(e,n);var i,c,t=(i=e,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}(),function(){var t,e,n,o,r=a(i);return e=c?(t=a(this).constructor,Reflect.construct(r,arguments,t)):r.apply(this,arguments),n=this,!(o=e)||"object"!==u(o)&&"function"!=typeof o?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):o});function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t.apply(this,arguments)}return function(t,e,n){e&&o(t.prototype,e);n&&o(t,n)}(e,[{key:"_changeState",value:function(){throw new Error("_changeState() should be overriden to perform actual change in state.")}},{key:"changeState",value:function(){for(var t=this,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];var r,i,c,u,a,f,l,s="string"==typeof n[0]?n.shift():void 0,p=Object(n[0])===n[0]&&"function"!=typeof n[0]?n.shift():void 0,y="function"==typeof n[0]?n.shift():void 0;"function"!=typeof this.shouldStateBeChanged||this.shouldStateBeChanged(s,p)?(r={group:p&&p.group,state:s},i=[r.group,s].filter(Boolean).join("-").split("-").map(function(t){return t[0].toUpperCase()+t.substr(1)}).join(""),c=new CustomEvent(this.options["eventBefore".concat(i)],{bubbles:!0,cancelable:!0,detail:p}),!(u=p&&p.delegatorNode||this.element).dispatchEvent(c)?y&&((a=new Error("Changing state (".concat(JSON.stringify(r),") has been canceled."))).canceled=!0,y(a)):(f=[s,p].filter(Boolean),this._changeState.apply(this,(function(t){if(Array.isArray(t))return h(t)}(l=f)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(l)||function(t,e){if(t){if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}(l)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([function(){u.dispatchEvent(new CustomEvent(t.options["eventAfter".concat(i)],{bubbles:!0,cancelable:!0,detail:p})),y&&y()}])))):y&&y(null,!0)}}]),e}()}});