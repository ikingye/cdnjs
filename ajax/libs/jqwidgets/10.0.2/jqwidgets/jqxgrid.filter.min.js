!function(M){M.extend(M.jqx._jqxGrid.prototype,{_updatefilterrowui:function(e){var t=this.columns.records.length,i=0,r=this;if(this.filterrow){for(var l=0;l<t;l++){var s=this.columns.records[l],a=parseInt(s.width);a<s.minwidth&&(a=s.minwidth),a>s.maxwidth&&(a=s.maxwidth);var n=M(this.filterrow[0].cells[l]);n.css("left",i);var o=!0;if(n.width()==a&&(o=!1),e&&(o=!0),n.width(a),n[0].left=i,s.element&&(n[0].style.width=s.element.style.width,n[0].style.left=s.element.style.left),s.hidden&&s.hideable?n.css("display","none"):i+=a,o)if(s.createfilterwidget&&"custom"==s.filtertype)s.createfilterwidget(s,n);else if(s.filterable){function d(e,t){var i=M(t.children()[0]);i[0]&&(i[0].style.width=a-8+"px",M.jqx.browser.msie&&(i[0].style.width=a-16+"px")),i.attr("disabled",e.disabled)}switch(s.filtertype){case"number":case"input":M(n.children()[0]).width(a),n.find("input")[0].style.width=a-30+"px",M.jqx.browser.msie&&(n.find("input")[0].style.width=a-36+"px"),n.find("input").attr("disabled",r.disabled),M(n.find(".jqx-dropdownlist-state-normal")).jqxDropDownList({theme:r.theme,disabled:r.disabled});break;case"date":case"range":this.host.jqxDateTimeInput?M(n.children()[0]).jqxDateTimeInput({theme:r.theme,disabled:r.disabled,width:a-10}):d(this,n);break;case"textbox":case"default":d(this,n);break;case"list":case"checkedlist":this.host.jqxDropDownList?M(n.children()[0]).jqxDropDownList({theme:r.theme,disabled:r.disabled,width:a-10}):d(this,n);break;case"bool":case"boolean":this.host.jqxCheckBox?M(n.children()[0]).jqxCheckBox({theme:r.theme,disabled:r.disabled}):d(this,n)}}}var f=M(this.filterrow.children()[0]);f.width(parseInt(i)+2),f.height(this.filterrowheight)}},clearfilterrow:function(e){if(this._disablefilterrow=!0,this.columns.records){for(var t=this.columns.records.length,i=0;i<t;i++){var r=this.columns.records[i],l=M(this.filterrow[0].cells[i]);if(("string"!=typeof e||r.displayfield==e)&&r.filterable){function s(e,t){var i=M(t.children()[0]);i.val(""),i[0]&&(e["_oldWriteText"+i[0].id]="")}var a,n,o;switch(r.filtertype){case"number":case"input":l.find("input").val(""),this.host.jqxDropDownList&&((a=M(M(M(l).children()[0]).children()[1])).jqxDropDownList("clearSelection"),(n=0)==n&&(this._getfiltersbytype("number"==r.filtertype?"number":"string"),o=(new M.jqx.filter).getoperatorsbyfiltertype("number"==r.filtertype?"numberfilter":"stringfilter"),null!=r.filtercondition&&-1!=(n=o.indexOf(r.filtercondition.toUpperCase()))||(n="number"==r.filtertype?0:2)),a.jqxDropDownList({selectedIndex:n}),a.jqxDropDownList("ensureVisible",n));break;case"date":case"range":this.host.jqxDateTimeInput?M(l.children()[0]).jqxDateTimeInput("setDate",null):s(this,l);break;case"textbox":case"default":s(this,l);break;case"list":this.host.jqxDropDownList?M(l.children()[0]).jqxDropDownList("clearSelection"):s(this,l);break;case"checkedlist":this.host.jqxDropDownList?M(l.children()[0]).jqxDropDownList("checkAll",!1):s(this,l);break;case"bool":case"boolean":this.host.jqxCheckBox?M(l.children()[0]).jqxCheckBox({checked:null}):s(this,l)}}}this._disablefilterrow=!1}},_applyfilterfromfilterrow:function(){if(1!=this._disablefilterrow&&!this.disabled){for(var e=this.columns.records.length,o=this.that,t=0;t<e;t++){var i=new M.jqx.filter,r=this.columns.records[t];if(r.filterable&&null!==r.datafield){function l(e,t,i){var r=!0;if(e._filterwidget){var l=e._filterwidget.val();if(""!=l){var s,a="stringfilter"==t?"contains":"equal";if("numericfilter"==t&&","==o.gridlocalization.decimalseparator&&0<=l.indexOf(o.gridlocalization.decimalseparator)&&(l=l.replace(o.gridlocalization.decimalseparator,".")),"stringfilter"!=t){var n=0;if(-1!=l.indexOf(">")&&(a="greater_than",n=1),-1!=l.indexOf("<")&&(a="less_than",n=1),-1!=l.indexOf("=")&&(n="greater_than"==a?(a="greater_than_or_equal",2):"less_than"==a?(a="less_than_or_equal",2):(a="equal",1)),0!=n&&(l=l.substring(n)).length<1)return!1}null!=e.filtercondition&&(a=e.filtercondition),s="datefilter"==t?i.createfilter(t,l,a,null,e.cellsformat,o.gridlocalization):i.createfilter(t,l,a),i.addfilter(1,s)}else r=!1}return r}var s,a,n,d,f,c,h,p,u,g,m=o._getcolumntypebydatafield(r),x=o._getfiltertype(m),w=!0;r.filtertype;switch(r.filtertype){case"range":case"date":r._filterwidget.jqxDateTimeInput?"range"==r.filtertype?null!=(D=r._filterwidget.jqxDateTimeInput("getRange"))&&null!=D.from&&null!=D.to?(_="GREATER_THAN_OR_EQUAL",(n=new Date(0)).setHours(0),n.setMinutes(0),n.setFullYear(D.from.getFullYear(),D.from.getMonth(),D.from.getDate()),(s=new Date(0)).setHours(0),s.setMinutes(0),s.setFullYear(D.to.getFullYear(),D.to.getMonth(),D.to.getDate()),s.setHours(D.to.getHours()),s.setMinutes(D.to.getMinutes()),s.setSeconds(D.to.getSeconds()),d=i.createfilter(x,n,_),i.addfilter(0,d),a=i.createfilter(x,s,"LESS_THAN_OR_EQUAL"),i.addfilter(0,a)):w=!1:null!=(D=r._filterwidget.jqxDateTimeInput("getDate"))?((n=new Date(0)).setHours(0),n.setMinutes(0),n.setFullYear(D.getFullYear(),D.getMonth(),D.getDate()),r._filterwidget.jqxDateTimeInput("showTimeButton")&&(n.setHours(D.getHours()),n.setMinutes(D.getMinutes())),_="EQUAL",null!=r.filtercondition&&(_=r.filtercondition),d=i.createfilter(x,n,_),r._filterwidget.jqxDateTimeInput("showTimeButton")&&(d=i.createfilter(x,n,_,null,r.cellsformat)),i.addfilter(0,d)):w=!1:w=l(r,x,i);break;case"input":r._filterwidget?(D=r._filterwidget.find("input").val(),f=r._filterwidget.find(".filter").jqxDropDownList("selectedIndex"),h=i.getoperatorsbyfiltertype(x)[f],o.updatefilterconditions&&(null!=(c=o.updatefilterconditions(x,i.getoperatorsbyfiltertype(x)))&&i.setoperatorsbyfiltertype(x,c),h=i.getoperatorsbyfiltertype(x)[f]),p="NULL"==h||"NOT_NULL"==h,u="EMPTY"==h||"NOT_EMPTY"==h,null!=D&&0<D.length||p||u?(d=i.createfilter(x,D,h,null,r.cellsformat,o.gridlocalization),i.addfilter(0,d)):w=!1):w=!1;break;case"number":r._filterwidget?(D=r._filterwidget.find("input").val(),","==o.gridlocalization.decimalseparator&&0<=D.indexOf(o.gridlocalization.decimalseparator)&&(D=D.replace(o.gridlocalization.decimalseparator,".")),f=r._filterwidget.find(".filter").jqxDropDownList("selectedIndex"),h=i.getoperatorsbyfiltertype(x)[f],o.updatefilterconditions&&(null!=(c=o.updatefilterconditions(x,i.getoperatorsbyfiltertype(x)))&&i.setoperatorsbyfiltertype(x,c),h=i.getoperatorsbyfiltertype(x)[f]),p="NULL"==h||"NOT_NULL"==h,u="EMPTY"==h||"NOT_EMPTY"==h,null!=D&&0<D.length||p||u?(d=i.createfilter(x,new Number(D),h,null,r.cellsformat,o.gridlocalization),i.addfilter(0,d)):w=!1):w=!1;break;case"textbox":case"default":w=l(r,x,i);break;case"bool":case"boolean":r._filterwidget.jqxCheckBox?null!=(D=r._filterwidget.jqxCheckBox("checked"))?(_="equal",j=i.createfilter(x,D,_),i.addfilter(1,j)):w=!1:w=l(r,x,i);break;case"list":0<(y=r._filterwidget.jqxDropDownList("listBox")).selectedIndex?(D=(g=y.getItem(y.selectedIndex)).label,q=g.value,_=""===D?"NULL":"equal",j=i.createfilter(x,D,_),i.addfilter(1,j),q!==D&&(j.data=q)):w=!1;break;case"checkedlist":if(r._filterwidget.jqxDropDownList){var y,v=(y=r._filterwidget.jqxDropDownList("listBox")).getCheckedItems();if(0==v.length){for(var b=1;b<y.items.length;b++){var D=y.items[b].label,q=y.items[b].value,_="not_equal";""===D&&(_="NOT_NULL");var j=i.createfilter(x,D,_);q!==D&&(j.data=q),i.addfilter(0,j)}w=!0}else if(v.length!=y.items.length)for(b=0;b<v.length;b++){D=v[b].label,q=v[b].value,_="equal";""===D&&(_="NULL");j=i.createfilter(x,D,_);q!==D&&(j.data=q),i.addfilter(1,j)}else w=!1}else w=l(r,x,i)}this._loading||(w?this.addfilter(r.displayfield,i,!1):this.removefilter(r.displayfield,!1))}}this._loading||this.applyfilters("filterrow")}},_updatefilterrow:function(){var e=M('<div style="position: relative;" id="row00'+this.element.id+'"></div>'),t=0,i=this.columns.records.length,r=this.toThemeProperty("jqx-grid-cell");r+=" "+this.toThemeProperty("jqx-grid-cell-pinned"),r+=" "+this.toThemeProperty("jqx-grid-cell-filter-row");var l=i+10,s=new Array,a=this.that;this.filterrow[0].cells=s,e.height(this.filterrowheight),this.filterrow.children().detach(),this.filterrow.append(e),this._filterrowcache||(this._filterrowcache=new Array),this._initcolumntypes();for(var n=!1,o=new Array,d=document.createDocumentFragment(),f=0;f<i;f++){var c=this.columns.records[f],h=c.width;h<c.minwidth&&(h=c.minwidth),h>c.maxwidth&&(h=c.maxwidth);var p=document.createElement("div");p.style.overflow="hidden",p.style.position="absolute",p.style.height="100%",p.className=r,p=M(p),d.appendChild(p[0]),p[0].style.left=t+"px",this.rtl?(p.css("z-index",l++),p.css("border-left-width","1px")):p.css("z-index",l--),"auto"==h&&(h=0),p[0].style.width=parseFloat(h)+"px",p[0].left=t,c.hidden&&c.hideable?p.css("display","none"):t+=h,s[s.length]=p[0];var u,g=!0;this.rtl?(this.groupable&&(u=this.showrowdetailscolumn&&this.rowdetails?1:0,this.groups.length+u+f>i-1&&(g=!1)),this.showrowdetailscolumn&&this.rowdetails&&f==i-1&&(g=!1)):(this.groupable&&(u=this.showrowdetailscolumn&&this.rowdetails?1:0,this.groups.length+u>f&&(g=!1)),this.showrowdetailscolumn&&this.rowdetails&&0==f&&(g=!1)),g&&("custom"==c.filtertype&&c.createfilterwidget?c.createfilterwidget(c,p,function(){a._applyfilterfromfilterrow()}):c.filterable&&(this._filterrowcache[c.datafield]?(n=!0,p.append(this._filterrowcache[c.datafield]),c._filterwidget=this._filterrowcache[c.datafield]):(this._addfilterwidget(c,p,h),o[c.datafield]=c._filterwidget)))}e[0].appendChild(d),this._filterrowcache=o,M.jqx.browser.msie&&M.jqx.browser.version<8&&e.css("z-index",l--),e.width(parseFloat(t)+2),this.filterrow.addClass(r),this.filterrow.css("border-top-width","1px"),this.filterrow.css("border-right-width","0px"),n&&this._updatefilterrowui(!0)},_getfilterdataadapter:function(s){var a,e=!!this.source._source;if(n=e?(t={localdata:M.extend(!0,{},this.source.records),datatype:this.source.datatype,async:!1},a=this,new M.jqx.dataAdapter(t,{autoBind:!1,autoSort:!0,autoSortField:s.displayfield,async:!1,uniqueDataFields:[s.displayfield],beforeLoadComplete:function(e){var t=new Array;if(s.cellsformat){for(var i=a._getcolumntypebydatafield(s),r=0;r<e.length;r++){t.push(e[r]);var l=e[r][s.displayfield];e[r][s.displayfield+"JQValue"]=l,"date"===i?e[r][s.displayfield]=null!=l?n.formatDate(l,s.cellsformat,a.gridlocalization):"":"number"!==i&&"float"!==i&&"int"!==i||(e[r][s.displayfield]=null!=l?n.formatNumber(l,s.cellsformat,a.gridlocalization):"")}return t}return e}})):new M.jqx.dataAdapter(this.source,{autoBind:!1,uniqueDataFields:[s.displayfield],autoSort:!0,autoSortField:s.displayfield,async:!1}),s.filteritems&&0<s.filteritems.length)var t={localdata:s.filteritems,datatype:this.source.datatype,async:!1},n=new M.jqx.dataAdapter(t,{autoBind:!1,async:!1});else if(s.filteritems){if(s.filteritems._source)return s.filteritems._options.autoBind=!1,s.filteritems._options.async=!1,s.filteritems;if(M.isFunction(s.filteritems))return s.filteritems()}return n},refreshfilterrow:function(){if(this.showfilterrow){this.refreshingfilter=!0,this._updatefilterrowui(),this._updatelistfilters(!0,!0);for(var e=this.that,t=this.columns.records.length,i=0;i<t;i++){var r=this.columns.records[i];if(r.filterable&&r.filter){var l=r.filter.getfilters();if(0<l.length){var s,a,n=l[0].value,o=r._filterwidget,d=r._filterwidget.parent();if(null!=o)switch(r.filtertype){case"number":d.find("input").val(n),this.host.jqxDropDownList&&(s=r.filter.getoperatorsbyfiltertype("numericfilter"),o.find(".filter").jqxDropDownList("selectIndex",s.indexOf(l[0].condition)));break;case"input":d.find("input").val(n),this.host.jqxDropDownList&&(s=r.filter.getoperatorsbyfiltertype("stringfilter"),o.find(".filter").jqxDropDownList("selectIndex",s.indexOf(l[0].condition)));break;case"date":case"range":this.host.jqxDateTimeInput?null!=(n=r.filter.getfilterat(0).filtervalue)&&(a=r.filter.getfilterat(1)?r.filter.getfilterat(1).filtervalue:n,"range"==r.filtertype?M(d.children()[0]).jqxDateTimeInput("setRange",new Date(n),new Date(a)):M(d.children()[0]).jqxDateTimeInput("setDate",new Date(n))):o.val(n);break;case"textbox":case"default":o.val(n),e["_oldWriteText"+o[0].id]=n;break;case"bool":case"boolean":this.host.jqxCheckBox?M(d.children()[0]).jqxCheckBox({checked:n}):o.val(n)}}}}this.refreshingfilter=!1}},_destroyedfilters:function(){this.that;for(var e=this.columns.records.length,t=0;t<e;t++){var i,r,l=this.columns.records[t];l.filterable&&(i=l._filterwidget,"list"==l.filtertype||"checkedlist"==l.filtertype?(this.removeHandler(i,"select"),this.removeHandler(i,"close"),i.jqxDropDownList("destroy")):"date"==l.filtertype||"range"==l.filtertype?(this.removeHandler(i,"valueChanged"),i.jqxDateTimeInput("destroy")):"bool"==l.filtertype?(this.removeHandler(i,"change"),i.jqxCheckBox("destroy")):"number"==l.filtertype||"input"===l.filtertype?(r=i.find(".jqx-input"),this.removeHandler(r,"keydown"),M(i.children()[1]).jqxDropDownList("destroy")):this.removeHandler(i,"keydown"),i.remove())}},_updatelistfilters:function(e,t){for(var i=this.that,r=this.columns.records.length,l=0;l<r;l++){var s=this.columns.records[l];if(s.filterable&&("list"==s.filtertype||"checkedlist"==s.filtertype)){var a=s._filterwidget;if(e){var n=this._getfilterdataadapter(s);a.jqxDropDownList({source:n});var o=!0;if((c=a.jqxDropDownList("getItems")).length!=n.records.length+1&&(o=!1),o)for(var d=1;d<c.length;d++)if(c[d].label!=n.records[d-1][s.displayfield]){o=!1;break}if(o&&!t)continue}else if(null==s.filter){a.jqxDropDownList("renderSelection");continue}var f="checkedlist"==s.filtertype,c=a.jqxDropDownList("getItems"),h=a.jqxDropDownList("listBox");if(a.jqxDropDownList("dataBind"),f){a.jqxDropDownList({selectionRenderer:function(){return i.gridlocalization.filterselectstring}}),null==h.getItem(this.gridlocalization.filterselectallstring)&&h.insertAt({label:this.gridlocalization.filterselectallstring},0);var p=M('<span style="top: 2px; position: relative; color: inherit; border: none; background-color: transparent;">'+this.gridlocalization.filterselectstring+"</span>");if(p.addClass(this.toThemeProperty("jqx-item")),a.jqxDropDownList("setContent",p),h.checkAll(!1),s.filter){for(var u=s.filter.getfilters(),d=0;d<h.items.length;d++){var g=h.items[d].label,m=void 0;M.each(u,function(){var e;"NOT_EQUAL"==this.condition?e=g!=this.value:"EQUAL"==this.condition&&(e=g==this.value),m=null==m&&void 0!==e?e:"EQUAL"==this.condition?m||e:m&&e}),m?h.checkIndex(d,!1,!1):h.uncheckIndex(d,!1,!1)}h._updateCheckedItems();var x=h.getCheckedItems().length;h.items.length!=x&&0<x&&h.host.jqxListBox("indeterminateIndex",0,!0,!1)}}else if(null==h.getItem(this.gridlocalization.filterchoosestring)&&h.insertAt({label:this.gridlocalization.filterchoosestring,value:""},0),a.jqxDropDownList({selectedIndex:0}),s.filter){for(var u=s.filter.getfilters(),w=-1,d=0;d<h.items.length;d++){g=h.items[d].label;M.each(u,function(){return"NOT_EQUAL"==this.condition||(g==this.value?(w=d,!1):void 0)})}-1!=w&&h.selectIndex(w)}c.length<8?a.jqxDropDownList("autoDropDownHeight",!0):a.jqxDropDownList("autoDropDownHeight",!1)}}},_renderfilter:function(){var n=this,e=M("<div style='display: flex; height: calc(100% - 10px); margin-top: 5px; align-items: center; position: relative; margin-left: 4px;'><input style='width: 200px; height: 100%; direction: ltr;' role='textbox' type='text'/><div style='cursor: pointer; height: 100%;'><div></div></div></div>"),o=e.find("input"),d=e.find("div:first");e.addClass(this.toThemeProperty("jqx-rc-all")),e.addClass(this.toThemeProperty("jqx-widget")),e.addClass(this.toThemeProperty("jqx-input-group")),o.addClass(this.toThemeProperty("jqx-input")),o.addClass(this.toThemeProperty("jqx-rc-l")),o.addClass(this.toThemeProperty("jqx-input-group-addon")),o.addClass(this.toThemeProperty("jqx-widget")),o.addClass(this.toThemeProperty("jqx-widget-content")),d.addClass(this.toThemeProperty("jqx-fill-state-normal")),d.addClass(this.toThemeProperty("jqx-rc-r")),d.addClass(this.toThemeProperty("jqx-input-group-addon")),d.find("div").addClass(this.toThemeProperty("jqx-icon-search")),this.rtl&&(o.addClass(this.toThemeProperty("jqx-rtl")),o.css("direction","rtl")),this.filterbar.children().remove(),this.filterbutton=d;for(var t=new Array,i=0;i<n.columns.records.length;i++)n.columns.records[i].datafield&&n.columns.records[i].filterable&&t.push({label:n.columns.records[i].text,value:n.columns.records[i].displayfield});var r=t.length<10,l=M("<div style='position: relative;  display: none; margin-right: 4px; margin-left: 4px; float: left;'>"+this.gridlocalization.filtersearchstring+"</div>");this.filterbar.append(l);var f=M("<div class='filtercolumns' style='position: relative; margin-top:5px; margin-left:4px; margin-right: 4px; float: left;'></div>");this.filterbar.append(f),f.jqxDropDownList&&f.jqxDropDownList({theme:this.theme,enableBrowserBoundsDetection:!0,autoDropDownHeight:r,rtl:n.rtl,dropDownWidth:220,selectedIndex:0,width:"auto",height:25,source:t,displayMember:"label",valueMember:"value"}),this.filtercolumnsList=f,o[0].parentElement.insertBefore(l[0],o[0]);function s(e){n.filterinput.val("");for(var t=0;t<n.dataview.filters.length;t++){var i=n.dataview.filters[t];i.datafield===e&&n.filterinput.val(i.filter.getfilterat(0).filtervalue)}}n.filterHeight,n._updateSimpleFilter=s,this.addHandler(f,"select",function(e){var t=e.args.item.value;s(t)}),"simple"===this.filterbarmode?(this.filtercolumnsList.hide(),l.show()):(this.filtercolumnsList.show(),l.hide());function a(){if(!d.hasClass("jqx-fill-state-disabled")){var e,t=o.val();f.jqxDropDownList&&(e=f.jqxDropDownList("getSelectedItem"));function i(e,t,i){var r,l=new M.jqx.filter,s=n._getcolumnbydatafield(e),a=n._getfiltertype(s);return r="datefilter"==a?l.createfilter(a,t,"EQUAL",null,e.cellsFormat,n.gridlocalization):"numericfilter"==a||"booleanfilter"==a?("numericfilter"==a&&(","==n.gridlocalization.decimalseparator&&0<=t.indexOf(n.gridlocalization.decimalseparator)&&(t=t.replace(n.gridlocalization.decimalseparator,".")),0<=t.indexOf(n.gridlocalization.currencysymbol)&&(t=t.replace(n.gridlocalization.currencysymbol,"")),0<=t.indexOf(n.gridlocalization.percentagesymbol)&&(t=t.replace(n.gridlocalization.percentagesymbol,""))),l.createfilter(a,t,"EQUAL",null,e.cellsFormat,n.gridlocalization)):l.createfilter(a,t,"CONTAINS"),l.operator=i,l.addfilter(0,r),l}var r;if("simple"!==n.filterbarmode){e&&(a=i(r=e.value,t,"and"),0<t.length?(n.removefilter(r),n.addfilter(r,a)):n.removefilter(r),n.applyfilters())}else{if(n.clearfilters(!1,!1),0<t.length)for(var l=0;l<n.columns.records.length;l++){var s=n.columns.records[l],a=i(s,t,"or");n.addfilter(s.datafield,a)}n.applyfilters()}0==n.dataview.filters.length?n.filtericon.fadeOut(200):n.filtericon.fadeIn(200)}}o.keydown(function(e){if(13===e.keyCode)return a(),e.preventDefault&&e.preventDefault(),!1}),d.click(function(){a()}),this.filterinput=o,this.filterbar.append(e);var c=M("<div style='float: left; width: 16px; height: 16px; position: relative; margin: 3px;'></div>");c.attr("title",n.gridlocalization.filterclearstring),c.addClass(n.toThemeProperty("jqx-icon-close")),e.append(c),c.hide(),(n.filtericon=c).click(function(){n.clearfilters(),n.filtericon.fadeOut(200)}),0<n.dataview.filters.length&&s(n.dataview.filters[0].datafield)},_renderfiltercolumn:function(){var r=this.that;if(this.filterable){if(!this.columns.records)return;M.each(this.columns.records,function(e,t){var i=!1;r.autoshowfiltericon?this.filter?(M(this.filtericon).show(),i=!0):M(this.filtericon).hide():this.filterable&&(M(this.filtericon).show(),i=!0),this.element.removeAttribute("filter"),i&&this.element.setAttribute("filter",!0),"right"!=this.align||this.renderer||this.element&&(this.element.firstChild.firstChild.style.marginRight=i?"18px":"2px")})}},_initcolumntypes:function(){if(this.columns&&this.columns.records){var e=this.source._source.datafields;if(e)for(var t=0;t<this.columns.records.length;t++){var i,r=this.columns.records[t];r.datatype||(i="",M.each(e,function(){if(this.name==r.displayfield)return this.type&&(i=this.type),!1}),r.datatype=""!=i?i:"")}}},_getcolumntypebydatafield:function(e){var t=this.that,i="string",r=t.source.datafields||(t.source._source?t.source._source.datafields:null);if(r){var l="";if(M.each(r,function(){if(this.name==e.displayfield)return this.type&&(l=this.type),!1}),l)return l}if(null!=e){if(null==this.dataview.cachedrecords)return i;var s=null;if(this.virtualmode)M.each(this.dataview.cachedrecords,function(){return s=this[e.displayfield],!1});else{if(0==this.dataview.cachedrecords.length)return i;if(null!=(s=this.dataview.cachedrecords[0][e.displayfield])&&""==s.toString())return"string"}if(null!=s)if("boolean"==typeof s)i="boolean";else if(M.jqx.dataFormat.isNumber(s))i="number";else{var a=new Date(s);if("NaN"==a.toString()||"Invalid Date"==a.toString())if(M.jqx.dataFormat){if(null!=(a=M.jqx.dataFormat.tryparsedate(s))){if(a&&a.getFullYear()&&1970==a.getFullYear()&&0==a.getMonth()&&1==a.getDate()){var n=new Number(s);return isNaN(n)?"string":"number"}return"date"}i="string"}else i="string";else i="date"}}return i},_getfiltersbytype:function(e){var t=this.that,i="";switch(e){case"number":case"float":case"int":i=t.gridlocalization.filternumericcomparisonoperators;break;case"date":i=t.gridlocalization.filterdatecomparisonoperators;break;case"boolean":case"bool":i=t.gridlocalization.filterbooleancomparisonoperators;break;case"string":default:i=t.gridlocalization.filterstringcomparisonoperators}return i},_getfiltertype:function(e){var t="stringfilter";switch(e){case"number":case"int":case"float":case"decimal":t="numericfilter";break;case"boolean":case"bool":t="booleanfilter";break;case"date":case"time":case"range":t="datefilter";break;case"string":case"input":t="stringfilter"}return t},_buildfilter:function(e,t,i){var r=M(t).find(".filter1"),l=M(t).find(".filter2"),s=M(t).find(".filter3"),a=M(t).find(".filtertext1"+e.element.id),n=M(t).find(".filtertext2"+e.element.id),o=a.val(),d=n.val(),f=e._getcolumntypebydatafield(i),c=(e._getfiltersbytype(f),new M.jqx.filter),h=e._getfiltertype(f);if("default"===e.filtermode&&"list"!==i.filtertype&&"checkedlist"!==i.filtertype){var p,u=r.jqxDropDownList("selectedIndex"),g=l.jqxDropDownList("selectedIndex"),m=s.jqxDropDownList("selectedIndex"),x=null,w=null;!e.updatefilterconditions||null!=(p=e.updatefilterconditions(h,c.getoperatorsbyfiltertype(h)))&&c.setoperatorsbyfiltertype(h,p);var y=!1,v=c.getoperatorsbyfiltertype(h)[u],s=c.getoperatorsbyfiltertype(h)[m],b="NULL"==v||"NOT_NULL"==v,D="EMPTY"==v||"NOT_EMPTY"==v;null==v&&(v=c.getoperatorsbyfiltertype(h)[0]),null==s&&(s=c.getoperatorsbyfiltertype(h)[0]),(0<o.length||b||D)&&(x=c.createfilter(h,o,v,null,i.cellsformat,e.gridlocalization),c.addfilter(g,x),y=!0);var q="NULL"==s||"NOT_NULL"==s,_="EMPTY"==s||"NOT_EMPTY"==s;(0<d.length||q||_)&&(w=c.createfilter(h,d,s,null,i.cellsformat,e.gridlocalization),c.addfilter(g,w),y=!0),y?(j=i.displayfield,this.addfilter(j,c,!0)):this._clearfilter(e,t,i)}else if("excel"===e.filtermode||"list"===i.filtertype||"checkedlist"===i.filtertype){var j,k=!1,L=r.data().jqxListBox.instance,I="excel"===this.filtermode||"checkedlist"===i.filtertype,T=L.getCheckedItems();if(I||(T=L.getSelectedItems()),0==T.length){for(var C=1;C<L.items.length;C++){void 0===(B=L.items[C].value)&&(B="");var z="not_equal";B&&B.indexOf&&(0<=B.indexOf("|")||0<=B.indexOf(" AND ")||0<=B.indexOf(" OR ")||0<=B.indexOf(" and ")||0<=B.indexOf(" or "))&&(B=(B=(B=(B=(B=B.replace("|","")).replace("AND","")).replace("OR","")).replace("and","")).replace("or",""),z="equal"),H="datefilter"==h?c.createfilter(h,B,z,null,i.cellsformat,e.gridlocalization):c.createfilter(h,B,z,null),c.addfilter(0,H)}k=!0}else if(T.length!=L.items.length){k=!0;for(var B,H,C=0;C<T.length;C++){e.gridlocalization.filterselectallstring!==T[C].value&&(void 0===(B=T[C].value)&&(B=""),z="equal",H="datefilter"==h?c.createfilter(h,B,z,null,i.cellsformat,e.gridlocalization):c.createfilter(h,B,z,null),c.addfilter(1,H))}}else k=!1;k?(j=i.displayfield,this.addfilter(j,c,!0)):(j=i.displayfield,this.removefilter(j,!0))}},_clearfilter:function(e,t,i){var r=i.displayfield;this.removefilter(r,!0)},addfilter:function(e,t,i){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);var r=this.getcolumn(e),l=this._getcolumn(e);null!=r&&null!=r&&(r.filter=t,l.filter=t,this.dataview.addfilter(e,t),1==i&&null!=i&&this.applyfilters("add"))},removefilter:function(e,t){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);var i=this.getcolumn(e),r=this._getcolumn(e);null!=i&&null!=i&&null!=i.filter&&(this.dataview.removefilter(e,i.filter),i.filter=null,r.filter=null,this.showfilterrow&&this.clearfilterrow(e),1!=t&&!1===t||this.applyfilters("remove"))},applyfilters:function(e){var t;if(0<=this.dataview.filters.length&&(this.virtualmode||!this.source.localdata)&&null!=this.source&&this.source.filter&&(t=-1,this.pageable?(t=this.dataview.pagenum,this.dataview.pagenum=0):(this.vScrollInstance.setPosition(0),this.loadondemand=!0,this._renderrows(this.virtualsizeinfo)),this.pageable&&this.virtualmode&&(this.dataview.pagenum=0),this.source.filter(this.dataview.filters,this.dataview.records,this.dataview.records.length),this.pageable&&!this.virtualmode&&(this.dataview.pagenum=t)),this._cellscache=new Array,this.dataview.clearsortdata&&this.dataview.clearsortdata(),this.virtualmode)return this.pageable&&(this.dataview.updateview(),this.gotopage&&this.gotopage(0)),this.rendergridcontent(!1,!1),this.showfilterrow&&"string"!=typeof e&&M.isEmptyObject(e)&&this.refreshfilterrow(),this._postrender("filter"),void this._raiseEvent(13,{filters:this.dataview.filters});var i;this.selectedrowindexes,this.that;this.dataview.refresh(),this.dataview.clearsortdata&&this.sortcolumn&&this.sortdirection&&(i=this.sortdirection.ascending?"asc":"desc",this._loading?this.sortby(this.sortcolumn,i,null,!1,!1):this.sortby(this.sortcolumn,i,null,!1)),this.pageable&&(this.dataview.updateview(),this.gotopage&&(this.gotopage(0),this.updatepagerdetails())),this._updaterowsproperties(),!this.groupable||this.groupable&&0==this.groups.length?(this._rowdetailscache=new Array,this.virtualsizeinfo=null,this._pagescache=new Array,this.columns&&this.columns.records&&0<this.columns.records.length&&!this.columns.records[0].filtericon&&(this.prerenderrequired=!0),this.rendergridcontent(!0,!1),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo),this.showaggregates&&this._updatecolumnsaggregates&&this._updatecolumnsaggregates()):(this.collapseallgroups(),this._rowdetailscache=new Array,this._render(!0,!0,!1,!1,!1),this.showfilterrow&&this._updatefocusedfilter(),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo)),this._postrender("filter"),this.showfilterrow&&"string"!=typeof e&&M.isEmptyObject(e)&&this.refreshfilterrow(),this._raiseEvent(13,{filters:this.dataview.filters})},getfilterinformation:function(){for(var e=new Array,t=0;t<this.dataview.filters.length;t++){var i=this.getcolumn(this.dataview.filters[t].datafield);e[t]={filter:this.dataview.filters[t].filter,datafield:i.datafield,displayfield:i.displayfield,filtercolumn:i.datafield,filtercolumntext:i.text}}return e},clearfilters:function(e){var t,i=this.that;this.showfilterrow&&this.clearfilterrow(),this.columns.records&&(t=1==e||!1!==e,M.each(this.columns.records,function(){i.removefilter(this.displayfield,!t)})),!1!==e&&(1!=e&&!1===e||this.applyfilters("clear"))},_destroyfilterpanel:function(){var e=M(M.find("#filterclearbutton"+this.element.id)),t=M(M.find("#filterbutton"+this.element.id)),i=M(M.find("#filter1"+this.element.id)),r=M(M.find("#filter2"+this.element.id)),l=M(M.find("#filter3"+this.element.id)),s=M(M.find(".filtertext1"+this.element.id)),a=M(M.find(".filtertext2"+this.element.id));0<s.length&&0<a.length&&(s.removeClass(),a.removeClass(),s.remove(),a.remove()),0<e.length&&(e.jqxButton("destroy"),t.jqxButton("destroy"),this.removeHandler(e,"click"),this.removeHandler(t,"click")),0<i.length&&i.jqxDropDownList("destroy"),0<r.length&&r.jqxDropDownList("destroy"),0<l.length&&l.jqxDropDownList("destroy");i=M(M.find("#filter1"+this.element.id+"ex")),r=M(M.find("#filter2"+this.element.id+"ex")),l=M(M.find("#filter3"+this.element.id+"ex"));0<i.length&&i.jqxDropDownList("destroy"),0<r.length&&r.jqxDropDownList("destroy"),0<l.length&&l.jqxDropDownList("destroy")},_updatefilterpanel:function(i,t,r){null!=i&&null!=i||(i=this);var e=i._getcolumntypebydatafield(r),l=i._getfiltersbytype(e);if(!i.host.jqxDropDownList)throw new Error("jqxGrid: Missing reference to jqxdropdownlist.js.");i.filterpanel.detach(),i.excelfilterpanel.detach(),r.filterpanel&&r.filterpanel.detach(),M(t).children().detach();var s,a=M(i.menuitemsarray[6]);M(a).css("height","190px"),r.createfilterpanel&&!r.filterpanel&&(s=M("<div class='filter' style='margin-left: 7px;'></div>"),M(t).append(s),r.createfilterpanel(r.displayfield,s),r.filterpanel=s),"list"===r.filtertype||"checkedlist"===r.filtertype?M(t).append(i.excelfilterpanel):"custom"!==r.filtertype?M(t).append(i.filterpanel):r.filterpanel&&M(t).append(r.filterpanel);var n,o,d,f=M(t),c=f.find("#filterclearbutton"+i.element.id),h=f.find("#filterbutton"+i.element.id),p=f.find(".filter1"),u=f.find(".filter2"),g=f.find(".filter3"),m=f.find(".filtertext1"+i.element.id),x=f.find(".filtertext2"+i.element.id);if(this._hasdatefilter&&"list"!==r.filtertype&&"checkedlist"!==r.filtertype&&"custom"!==r.filtertype&&(b=m.parent(),D=x.parent(),b.children().remove(),D.children().remove(),o="date"==r.filtertype?(i._showwhere.text(i.gridlocalization.filtershowrowdatestring),o=M("<div class='filtertext1"+i.element.id+"' style=''></div>"),b.append(o),(n=function(e){var t={calendar:i.gridlocalization,todayString:i.gridlocalization.todaystring,clearString:i.gridlocalization.clearstring};e.jqxDateTimeInput({disabled:i.disabled,firstDayOfWeek:i.gridlocalization.firstDay,localization:t,rtl:i.rtl,width:i._filterpanelwidth-10,height:this.filterMenuItemsHeight,value:null,formatString:r.cellsformat,theme:i.theme})})(o),M("<div class='filtertext2"+i.element.id+"' style=''></div>")):(i._showwhere.text(i.gridlocalization.filtershowrowstring),o=M("<input autocomplete='off' class='filtertext1"+i.element.id+"' style='box-sizing: content-box; height: 16px; padding: 3px;' type='text'></input>"),b.append(o),(n=function(e){e.addClass(i.toThemeProperty("jqx-input")),e.addClass(i.toThemeProperty("jqx-filter-input jqx-widget-content")),e.addClass(i.toThemeProperty("jqx-rc-all")),e.width(i._filterpanelwidth-18),e[0].style.height=this.filterMenuItemsHeight+"px"})(o),M("<input autocomplete='off' class='filtertext2"+i.element.id+"' style='box-sizing: content-box; height: 16px; padding: 3px;' type='text'></input>")),D.append(o),n(o),m=f.find(".filtertext1"+i.element.id),x=f.find(".filtertext2"+i.element.id)),"date"!=r.filtertype?(m.val(""),x.val("")):(m.val(null),x.val(null)),this.removeHandler(h,"click"),this.addHandler(h,"click",function(){i._buildfilter(i,t,r),i._closemenu()}),this.removeHandler(c,"click"),this.addHandler(c,"click",function(){i._clearfilter(i,t,r),i._closemenu()}),this.removeHandler(h,"keydown"),this.addHandler(h,"keydown",function(e){13===e.keyCode&&(i._buildfilter(i,t,r),i._closemenu())}),this.removeHandler(c,"keydown"),this.addHandler(c,"keydown",function(e){13===e.keyCode&&(i._clearfilter(i,t,r),i._closemenu())}),this.removeHandler(m,"keydown"),this.addHandler(m,"keydown",function(e){13===e.keyCode&&h.trigger("click"),27===e.keyCode&&i._closemenu()}),this.removeHandler(x,"keydown"),this.addHandler(x,"keydown",function(e){13===e.keyCode&&h.trigger("click"),27===e.keyCode&&i._closemenu()}),"default"===this.filtermode&&"list"!==r.filtertype&&"checkedlist"!==r.filtertype&&"custom"!==r.filtertype){p.jqxDropDownList("source")!=l&&(p.jqxDropDownList({enableBrowserBoundsDetection:!1,source:l}),g.jqxDropDownList({enableBrowserBoundsDetection:!1,source:l})),"boolean"==e||"bool"==e?(p.jqxDropDownList({autoDropDownHeight:!0,selectedIndex:0}),g.jqxDropDownList({autoDropDownHeight:!0,selectedIndex:0})):(d=!1,l&&l.length&&l.length<5&&(d=!0),p.jqxDropDownList({autoDropDownHeight:d,selectedIndex:2}),g.jqxDropDownList({autoDropDownHeight:d,selectedIndex:2})),u.jqxDropDownList({selectedIndex:0});var w=r.filter,y=new M.jqx.filter,v="";switch(e){case"number":case"int":case"float":case"decimal":v="numericfilter",q=y.getoperatorsbyfiltertype("numericfilter");break;case"boolean":case"bool":v="booleanfilter",q=y.getoperatorsbyfiltertype("booleanfilter");break;case"date":case"time":v="datefilter",q=y.getoperatorsbyfiltertype("datefilter");break;case"string":v="stringfilter",q=y.getoperatorsbyfiltertype("stringfilter")}if(null!=w){var b=w.getfilterat(0),D=w.getfilterat(1);w.getoperatorat(0);if(i.updatefilterconditions){var q=[],_=i.updatefilterconditions(v,q);if(null!=_){for(var j=0;j<_.length;j++)_[j]=_[j].toUpperCase();w.setoperatorsbyfiltertype(v,_),q=_}}var k,L,I,T,C="default";null!=b&&(k=q.indexOf(b.comparisonoperator),L=b.filtervalue,m.val(L),p.jqxDropDownList({selectedIndex:k,animationType:C})),null!=D&&(I=q.indexOf(D.comparisonoperator),T=D.filtervalue,x.val(T),g.jqxDropDownList({selectedIndex:I,animationType:C})),null==w.getoperatorat(0)?u.jqxDropDownList({selectedIndex:0,animationType:C}):"and"==w.getoperatorat(0)||0==w.getoperatorat(0)?u.jqxDropDownList({selectedIndex:0}):u.jqxDropDownList({selectedIndex:1})}i.updatefilterpanel&&i.updatefilterpanel(p,g,u,m,x,h,c,w,v,q),(!this._hasdatefilter||this._hasdatefilter&&"date"!=r.filtertype)&&(this.touchdevice||(m.focus(),setTimeout(function(){m.focus()},10)))}else if("excel"===this.filtermode||"list"===r.filtertype||"checkedlist"===r.filtertype){var z,B=i._getfilterdataadapter(r),v=i._getfiltertype(e),H="excel"===this.filtermode||"checkedlist"===r.filtertype;if("date"==r.filtertype&&i._showwhere.text(i.gridlocalization.filtershowrowstring),p.jqxListBox("focus"),this.removeHandler(p,"keyup"),this.addHandler(p,"keyup",function(e){13===e.keyCode&&h.trigger("click"),27===e.keyCode&&i._closemenu()}),r.cellsformat?p.jqxListBox({checkboxes:H,displayMember:r.displayfield,valueMember:r.displayfield+"JQValue",source:B}):p.jqxListBox({checkboxes:H,displayMember:r.displayfield,valueMember:r.displayfield,source:B}),H){p.jqxListBox("insertAt",{label:i.gridlocalization.filterselectallstring},0),(z=p.data().jqxListBox.instance).checkAll(!1);if(r.filter){z.uncheckAll(!1);for(var A=r.filter.getfilters(),O=0;O<z.items.length;O++){var P=z.items[O].value;M.each(A,function(){if("NOT_EQUAL"==this.condition){if(P!=this.value)return z.uncheckIndex(O,!1,!1),!1;if(null!=P&&null!=this.value&&P.toString()!=this.value.toString())return z.uncheckIndex(O,!1,!1),!1}else if("EQUAL"==this.condition){if(P==this.value)return z.checkIndex(O,!1,!1),!1;if(null!=P&&null!=this.value&&P.toString()==this.value.toString())return z.checkIndex(O,!1,!1),!1}})}z._updateCheckedItems();var N=z.getCheckedItems().length;z.items.length!=N&&0<N&&z.host.jqxListBox("indeterminateIndex",0,!0,!1),N===z.items.length-1&&z.host.jqxListBox("checkIndex",0,!0,!1)}}else if(r.filter){(z=p.data().jqxListBox.instance).clearSelection();for(A=r.filter.getfilters(),O=0;O<z.items.length;O++){P=z.items[O].value;M.each(A,function(){if("NOT_EQUAL"==this.condition){if(P!=this.value)return z.unselectIndex(O,!1,!1),!1}else if("EQUAL"==this.condition&&P==this.value)return z.selectIndex(O,!0,!1),!1})}z._renderItems()}}},_initfilterpanel:function(r,e,t,i,l){null!=r&&null!=r||(r=this),e[0].innerHTML="";var s=M("<div class='filter' style='position: absolute; bottom: 3px; margin-left: 3px;'></div>");e.append(s);var a=M("<div class='filter showwhere' style='height: 18px; margin-top: 3px; margin-bottom: 3px;'></div>");a.text(r.gridlocalization.filtershowrowstring),this._showwhere=a;var n=l?"ex":"",o=M("<div class='filter filter1' id='filter1"+r.element.id+n+"'></div>"),d=M("<div class='filter filter2' id='filter2"+r.element.id+n+"' style='margin-top: 3px; margin-bottom: 3px;'></div>"),f=M("<div class='filter filter3' id='filter3"+r.element.id+n+"'></div>"),c=r._getcolumntypebydatafield(t);if(!o.jqxDropDownList)throw new Error("jqxGrid: jqxdropdownlist.js is not loaded.");var h=r._getfiltersbytype(c);if(this._hasdatefilter=!1,this._filterpanelwidth=i,this.columns&&this.columns.records){for(var p=0;p<this.columns.records.length;p++)if("date"==this.columns.records[p].filtertype){this._hasdatefilter=!0;break}}else if(this.columns&&!this.columns.records)for(p=0;p<this.columns.length;p++)if("date"==this.columns[p].filtertype){this._hasdatefilter=!0;break}var u=M("<div style='margin-top:3px;' class='filter'><input autocomplete='off' class='filtertext1"+r.element.id+"' style='padding: 3px; height: 17px; margin-top: 3px; margin-bottom: 3px;' type='text'></input></div>"),g=u.find("input");g.addClass(this.toThemeProperty("jqx-input")),g.addClass(this.toThemeProperty("jqx-filter-input jqx-widget-content")),g.addClass(this.toThemeProperty("jqx-rc-all")),g.width(i-18);var m=M("<div style='margin-top:3px;' class='filter'><input autocomplete='off' class='filtertext2"+r.element.id+"' style='padding: 3px; height: 17px; margin-top: 3px;' type='text'></input></div>"),x=m.find("input");x.addClass(this.toThemeProperty("jqx-input")),x.addClass(this.toThemeProperty("jqx-filter-input jqx-widget-content")),x.addClass(this.toThemeProperty("jqx-rc-all")),x.width(i-18),r.rtl&&(g.css("direction","rtl"),x.css("direction","rtl"));var w=M("<div class='filter' style='height: 35px; text-align:center; margin-top: 15px; margin-left:-2px;'></div>"),y=M('<span tabIndex=0 id="filterbutton'+r.element.id+'" class="primary filterbutton" style="padding: 6px 15px;">'+r.gridlocalization.filterstring+"</span>");w.append(y);var v=M('<span tabIndex=0 id="filterclearbutton'+r.element.id+'" class="secondary filterclearbutton" style="position: relative; left: 1px; padding: 6px 15px; margin-left: 7px;">'+r.gridlocalization.filterclearstring+"</span>");w.append(v),y.jqxButton({height:this.filterMenuItemsHeight,theme:r.theme}),v.jqxButton({height:this.filterMenuItemsHeight,theme:r.theme});function b(e){var t;return e?(-1!=e.text().indexOf("case sensitive")&&(t=(t=e.text()).replace("case sensitive","match case"),e.text(t)),e.css("font-family",r.host.css("font-family")),e.css("font-size",r.host.css("font-size")),e.css("top","2px"),e.css("position","relative"),e):""}var D,q;"default"!==this.filtermode||l?"excel"!==this.filtermode&&!l||(s.append(a),s.append(o),o.attr("tabindex",0),o.jqxListBox({rtl:r.rtl,_checkForHiddenParent:!1,checkboxes:!0,selectedIndex:2,width:i-10,height:130,theme:r.theme}),D=!0,r.addHandler(o,"checkChange",function(e){var t,i;D=D&&(e.args.label!=r.gridlocalization.filterselectallstring?(D=!1,o.jqxListBox("checkIndex",0,!0,!1),t=o.jqxListBox("getCheckedItems"),i=o.jqxListBox("getItems"),1==t.length?o.jqxListBox("uncheckIndex",0,!0,!1):i.length!=t.length&&o.jqxListBox("indeterminateIndex",0,!0,!1)):(D=!1,e.args.checked?o.jqxListBox("checkAll",!1):o.jqxListBox("uncheckAll",!1)),!0)})):(s.append(a),s.append(o),o.jqxDropDownList({_checkForHiddenParent:!1,autoItemsHeight:!0,rtl:r.rtl,enableBrowserBoundsDetection:!1,selectedIndex:2,width:i-10,height:24,dropDownHeight:150,dropDownWidth:i-10,selectionRenderer:b,source:h,theme:r.theme}),s.append(u),(q=new Array)[0]=r.gridlocalization.filterandconditionstring,q[1]=r.gridlocalization.filterorconditionstring,d.jqxDropDownList({_checkForHiddenParent:!1,rtl:r.rtl,enableBrowserBoundsDetection:!1,autoDropDownHeight:!0,selectedIndex:0,width:60,height:24,source:q,selectionRenderer:b,theme:r.theme}),s.append(d),f.jqxDropDownList({_checkForHiddenParent:!1,autoItemsHeight:!0,rtl:r.rtl,enableBrowserBoundsDetection:!1,selectedIndex:2,width:i-10,height:24,dropDownHeight:150,dropDownWidth:i-10,selectionRenderer:b,source:h,theme:r.theme}),s.append(f),s.append(m)),s.append(w),r.updatefilterpanel&&r.updatefilterpanel(o,f,d,u,m,y,v,null,null,h)}})}(jqxBaseFramework),function(M){M.extend(M.jqx._jqxGrid.prototype,{_updatefilterrowui:function(e){var t=this.columns.records.length,i=0,r=this;if(this.filterrow){for(var l=0;l<t;l++){var s=this.columns.records[l],a=parseInt(s.width);a<s.minwidth&&(a=s.minwidth),a>s.maxwidth&&(a=s.maxwidth);var n=M(this.filterrow[0].cells[l]);n.css("left",i);var o=!0;if(n.width()==a&&(o=!1),e&&(o=!0),n.width(a),n[0].left=i,s.element&&(n[0].style.width=s.element.style.width,n[0].style.left=s.element.style.left),s.hidden&&s.hideable?n.css("display","none"):i+=a,o)if(s.createfilterwidget&&"custom"==s.filtertype)s.createfilterwidget(s,n);else if(s.filterable){function d(e,t){var i=M(t.children()[0]);i[0]&&(i[0].style.width=a-8+"px",M.jqx.browser.msie&&(i[0].style.width=a-16+"px")),i.attr("disabled",e.disabled)}switch(s.filtertype){case"number":case"input":M(n.children()[0]).width(a),n.find("input")[0].style.width=a-30+"px",M.jqx.browser.msie&&(n.find("input")[0].style.width=a-36+"px"),n.find("input").attr("disabled",r.disabled),M(n.find(".jqx-dropdownlist-state-normal")).jqxDropDownList({theme:r.theme,disabled:r.disabled});break;case"date":case"range":this.host.jqxDateTimeInput?M(n.children()[0]).jqxDateTimeInput({theme:r.theme,disabled:r.disabled,width:a-10}):d(this,n);break;case"textbox":case"default":d(this,n);break;case"list":case"checkedlist":this.host.jqxDropDownList?M(n.children()[0]).jqxDropDownList({theme:r.theme,disabled:r.disabled,width:a-10}):d(this,n);break;case"bool":case"boolean":this.host.jqxCheckBox?M(n.children()[0]).jqxCheckBox({theme:r.theme,disabled:r.disabled}):d(this,n)}}}var f=M(this.filterrow.children()[0]);f.width(parseInt(i)+2),f.height(this.filterrowheight)}},clearfilterrow:function(e){if(this._disablefilterrow=!0,this.columns.records){for(var t=this.columns.records.length,i=0;i<t;i++){var r=this.columns.records[i],l=M(this.filterrow[0].cells[i]);if(("string"!=typeof e||r.displayfield==e)&&r.filterable){function s(e,t){var i=M(t.children()[0]);i.val(""),i[0]&&(e["_oldWriteText"+i[0].id]="")}var a,n,o;switch(r.filtertype){case"number":case"input":l.find("input").val(""),this.host.jqxDropDownList&&((a=M(M(M(l).children()[0]).children()[1])).jqxDropDownList("clearSelection"),(n=0)==n&&(this._getfiltersbytype("number"==r.filtertype?"number":"string"),o=(new M.jqx.filter).getoperatorsbyfiltertype("number"==r.filtertype?"numberfilter":"stringfilter"),null!=r.filtercondition&&-1!=(n=o.indexOf(r.filtercondition.toUpperCase()))||(n="number"==r.filtertype?0:2)),a.jqxDropDownList({selectedIndex:n}),a.jqxDropDownList("ensureVisible",n));break;case"date":case"range":this.host.jqxDateTimeInput?M(l.children()[0]).jqxDateTimeInput("setDate",null):s(this,l);break;case"textbox":case"default":s(this,l);break;case"list":this.host.jqxDropDownList?M(l.children()[0]).jqxDropDownList("clearSelection"):s(this,l);break;case"checkedlist":this.host.jqxDropDownList?M(l.children()[0]).jqxDropDownList("checkAll",!1):s(this,l);break;case"bool":case"boolean":this.host.jqxCheckBox?M(l.children()[0]).jqxCheckBox({checked:null}):s(this,l)}}}this._disablefilterrow=!1}},_applyfilterfromfilterrow:function(){if(1!=this._disablefilterrow&&!this.disabled){for(var e=this.columns.records.length,o=this.that,t=0;t<e;t++){var i=new M.jqx.filter,r=this.columns.records[t];if(r.filterable&&null!==r.datafield){function l(e,t,i){var r=!0;if(e._filterwidget){var l=e._filterwidget.val();if(""!=l){var s,a="stringfilter"==t?"contains":"equal";if("numericfilter"==t&&","==o.gridlocalization.decimalseparator&&0<=l.indexOf(o.gridlocalization.decimalseparator)&&(l=l.replace(o.gridlocalization.decimalseparator,".")),"stringfilter"!=t){var n=0;if(-1!=l.indexOf(">")&&(a="greater_than",n=1),-1!=l.indexOf("<")&&(a="less_than",n=1),-1!=l.indexOf("=")&&(n="greater_than"==a?(a="greater_than_or_equal",2):"less_than"==a?(a="less_than_or_equal",2):(a="equal",1)),0!=n&&(l=l.substring(n)).length<1)return!1}null!=e.filtercondition&&(a=e.filtercondition),s="datefilter"==t?i.createfilter(t,l,a,null,e.cellsformat,o.gridlocalization):i.createfilter(t,l,a),i.addfilter(1,s)}else r=!1}return r}var s,a,n,d,f,c,h,p,u,g,m,x=o._getcolumntypebydatafield(r),w=o._getfiltertype(x),y=!0;r.filtertype;switch(r.filtertype){case"range":case"date":r._filterwidget.jqxDateTimeInput?"range"==r.filtertype?null!=(q=r._filterwidget.jqxDateTimeInput("getRange"))&&null!=q.from&&null!=q.to?(j="GREATER_THAN_OR_EQUAL",(n=new Date(0)).setHours(0),n.setMinutes(0),n.setFullYear(q.from.getFullYear(),q.from.getMonth(),q.from.getDate()),(s=new Date(0)).setHours(0),s.setMinutes(0),s.setFullYear(q.to.getFullYear(),q.to.getMonth(),q.to.getDate()),s.setHours(q.to.getHours()),s.setMinutes(q.to.getMinutes()),s.setSeconds(q.to.getSeconds()),f=i.createfilter(w,n,j),i.addfilter(0,f),a=i.createfilter(w,s,"LESS_THAN_OR_EQUAL"),i.addfilter(0,a)):y=!1:null!=(q=r._filterwidget.jqxDateTimeInput("getDate"))?((n=new Date(0)).setHours(0),n.setMinutes(0),n.setFullYear(q.getFullYear(),q.getMonth(),q.getDate()),(d=r._filterwidget.jqxDateTimeInput("showTimeButton"))&&(n.setHours(q.getHours()),n.setMinutes(q.getMinutes())),j="EQUAL",null!=r.filtercondition&&(j=r.filtercondition),f=i.createfilter(w,n,j),d&&(f=i.createfilter(w,n,j,null,r.cellsformat)),i.addfilter(0,f)):y=!1:y=l(r,w,i);break;case"input":r._filterwidget?(q=r._filterwidget.find("input").val(),c=r._filterwidget.find(".filter").jqxDropDownList("selectedIndex"),p=i.getoperatorsbyfiltertype(w)[c],o.updatefilterconditions&&(null!=(h=o.updatefilterconditions(w,i.getoperatorsbyfiltertype(w)))&&i.setoperatorsbyfiltertype(w,h),p=i.getoperatorsbyfiltertype(w)[c]),u="NULL"==p||"NOT_NULL"==p,g="EMPTY"==p||"NOT_EMPTY"==p,null!=q&&0<q.length||u||g?(f=i.createfilter(w,q,p,null,r.cellsformat,o.gridlocalization),i.addfilter(0,f)):y=!1):y=!1;break;case"number":r._filterwidget?(q=r._filterwidget.find("input").val(),","==o.gridlocalization.decimalseparator&&0<=q.indexOf(o.gridlocalization.decimalseparator)&&(q=q.replace(o.gridlocalization.decimalseparator,".")),c=r._filterwidget.find(".filter").jqxDropDownList("selectedIndex"),p=i.getoperatorsbyfiltertype(w)[c],o.updatefilterconditions&&(null!=(h=o.updatefilterconditions(w,i.getoperatorsbyfiltertype(w)))&&i.setoperatorsbyfiltertype(w,h),p=i.getoperatorsbyfiltertype(w)[c]),u="NULL"==p||"NOT_NULL"==p,g="EMPTY"==p||"NOT_EMPTY"==p,null!=q&&0<q.length||u||g?(f=i.createfilter(w,new Number(q),p,null,r.cellsformat,o.gridlocalization),i.addfilter(0,f)):y=!1):y=!1;break;case"textbox":case"default":y=l(r,w,i);break;case"bool":case"boolean":r._filterwidget.jqxCheckBox?null!=(q=r._filterwidget.jqxCheckBox("checked"))?(j="equal",k=i.createfilter(w,q,j),i.addfilter(1,k)):y=!1:y=l(r,w,i);break;case"list":0<(v=r._filterwidget.jqxDropDownList("listBox")).selectedIndex?(q=(m=v.getItem(v.selectedIndex)).label,_=m.value,j=""===q?"NULL":"equal",k=i.createfilter(w,q,j),i.addfilter(1,k),_!==q&&(k.data=_)):y=!1;break;case"checkedlist":if(r._filterwidget.jqxDropDownList){var v,b=(v=r._filterwidget.jqxDropDownList("listBox")).getCheckedItems();if(0==b.length){for(var D=1;D<v.items.length;D++){var q=v.items[D].label,_=v.items[D].value,j="not_equal";""===q&&(j="NOT_NULL");var k=i.createfilter(w,q,j);_!==q&&(k.data=_),i.addfilter(0,k)}y=!0}else if(b.length!=v.items.length)for(D=0;D<b.length;D++){q=b[D].label,_=b[D].value,j="equal";""===q&&(j="NULL");k=i.createfilter(w,q,j);_!==q&&(k.data=_),i.addfilter(1,k)}else y=!1}else y=l(r,w,i)}this._loading||(y?this.addfilter(r.displayfield,i,!1):this.removefilter(r.displayfield,!1))}}this._loading||this.applyfilters("filterrow")}},_updatefilterrow:function(){var e=M('<div style="position: relative;" id="row00'+this.element.id+'"></div>'),t=0,i=this.columns.records.length,r=this.toThemeProperty("jqx-grid-cell");r+=" "+this.toThemeProperty("jqx-grid-cell-pinned"),r+=" "+this.toThemeProperty("jqx-grid-cell-filter-row");var l=i+10,s=new Array,a=this.that;this.filterrow[0].cells=s,e.height(this.filterrowheight),this.filterrow.children().detach(),this.filterrow.append(e),this._filterrowcache||(this._filterrowcache=new Array),this._initcolumntypes();for(var n=!1,o=new Array,d=document.createDocumentFragment(),f=0;f<i;f++){var c=this.columns.records[f],h=c.width;h<c.minwidth&&(h=c.minwidth),h>c.maxwidth&&(h=c.maxwidth);var p=document.createElement("div");p.style.overflow="hidden",p.style.position="absolute",p.style.height="100%",p.className=r,p=M(p),d.appendChild(p[0]),p[0].style.left=t+"px",this.rtl?(p.css("z-index",l++),p.css("border-left-width","1px")):p.css("z-index",l--),"auto"==h&&(h=0),p[0].style.width=parseFloat(h)+"px",p[0].left=t,c.hidden&&c.hideable?p.css("display","none"):t+=h,s[s.length]=p[0];var u,g=!0;this.rtl?(this.groupable&&(u=this.showrowdetailscolumn&&this.rowdetails?1:0,this.groups.length+u+f>i-1&&(g=!1)),this.showrowdetailscolumn&&this.rowdetails&&f==i-1&&(g=!1)):(this.groupable&&(u=this.showrowdetailscolumn&&this.rowdetails?1:0,this.groups.length+u>f&&(g=!1)),this.showrowdetailscolumn&&this.rowdetails&&0==f&&(g=!1)),g&&("custom"==c.filtertype&&c.createfilterwidget?c.createfilterwidget(c,p,function(){a._applyfilterfromfilterrow()}):c.filterable&&(this._filterrowcache[c.datafield]?(n=!0,p.append(this._filterrowcache[c.datafield]),c._filterwidget=this._filterrowcache[c.datafield]):(this._addfilterwidget(c,p,h),o[c.datafield]=c._filterwidget)))}e[0].appendChild(d),this._filterrowcache=o,M.jqx.browser.msie&&M.jqx.browser.version<8&&e.css("z-index",l--),e.width(parseFloat(t)+2),this.filterrow.addClass(r),this.filterrow.css("border-top-width","1px"),this.filterrow.css("border-right-width","0px"),n&&this._updatefilterrowui(!0)},_addfilterwidget:function(r,e,l){for(var s=this.that,t=this,a="",i="",n=0;n<s.dataview.filters.length;n++){var o=s.dataview.filters[n];if(o.datafield&&o.datafield==r.datafield){a=(n=o.filter.getfilters()[0]).value;"range"===r.filtertype&&(a={from:a,to:o.filter.getfilters()[1].value}),i=n.condition,r.filtercondition=i;break}}function d(t,e){var i=M('<input autocomplete="off" type="textarea"/>');i.attr("tabindex",5+r.visibleindex),i[0].id=M.jqx.utilities.createId(),i.addClass(t.toThemeProperty("jqx-widget")),i.addClass(t.toThemeProperty("jqx-filter-input jqx-input jqx-input-widget")),i.addClass(t.toThemeProperty("jqx-rc-all")),i.addClass(t.toThemeProperty("jqx-widget-content")),t.rtl&&i.css("direction","rtl"),t.disabled&&i.attr("disabled",!0),i.attr("disabled",!1),i.appendTo(e),i.css("margin","4px"),i.width(l-8),i.height(t.filterrowheight-9),r.createfilterwidget&&r.createfilterwidget(r,e,i),(r._filterwidget=i).focus(function(){return t.content[0].scrollLeft=0,setTimeout(function(){t.content[0].scrollLeft=0},10),(t.focusedfilter=i).addClass(t.toThemeProperty("jqx-fill-state-focus")),!1}),i.blur(function(){i.removeClass(t.toThemeProperty("jqx-fill-state-focus"))}),i.keydown(function(e){"13"==e.keyCode&&t._applyfilterfromfilterrow(),i[0]._writeTimer&&clearTimeout(i[0]._writeTimer),i[0]._writeTimer=setTimeout(function(){t._loading||(t["_oldWriteText"+i[0].id]||(t["_oldWriteText"+i[0].id]=""),(0<t["_oldWriteText"+i[0].id].length&&t["_oldWriteText"+i[0].id]!=i.val()||0==t["_oldWriteText"+i[0].id].length)&&(t._applyfilterfromfilterrow(),t["_oldWriteText"+i[0].id]=i.val()))},r.filterdelay),t.focusedfilter=i}),t.host.removeClass("jqx-disableselect"),t.content.removeClass("jqx-disableselect"),i.val(a)}var f,c,h,p,u,g,m,x,w,y,v,b,D,q;switch(null!=r.datatype&&("number"==r.filtertype&&("string"!=r.datatype&&"date"!=r.datatype&&"bool"!=r.datatype||(r.filtertype="textbox")),"date"==r.filtertype&&("string"!=r.datatype&&"number"!=r.datatype&&"bool"!=r.datatype||(r.filtertype="textbox")),"bool"==r.filtertype&&("string"!=r.datatype&&"number"!=r.datatype&&"date"!=r.datatype||(r.filtertype="textbox"))),r.filtertype){case"number":case"input":var _=M("<div></div>");_.width(e.width()),_.height(this.filterrowheight),e.append(_);l=e.width()-21;b=_,D=l,q=M('<input style="float: left;" autocomplete="off" type="textarea"/>'),s.rtl&&(q.css("float","right"),q.css("direction","rtl")),q.attr("tabindex",5+r.visibleindex),q[0].id=M.jqx.utilities.createId(),q.addClass(s.toThemeProperty("jqx-widget jqx-input jqx-rc-all jqx-input-widget jqx-filter-input jqx-widget-content")),q.appendTo(b),q.width(D-10),s.disabled&&q.attr("disabled",!0),q.attr("disabled",!1),q[0].style.height=s.filterrowheight-9+"px",q.css("margin","4px"),q.css("margin-right","3px"),q.focus(function(){(s.focusedfilter=q).addClass(s.toThemeProperty("jqx-fill-state-focus"))}),q.blur(function(){q.removeClass(s.toThemeProperty("jqx-fill-state-focus"))}),q.keydown(function(e){"13"==e.keyCode&&s._applyfilterfromfilterrow(),"9"!=e.keyCode&&(q[0]._writeTimer&&clearTimeout(q[0]._writeTimer),q[0]._writeTimer=setTimeout(function(){s._loading||s["_oldWriteText"+q[0].id]!=q.val()&&(s._applyfilterfromfilterrow(),s["_oldWriteText"+q[0].id]=q.val())},r.filterdelay),s.focusedfilter=q)}),q.val(a);var j,k=s._getfiltersbytype("number"==r.filtertype?"number":"string");(j=M("<div class='filter' style='float: left;'></div>")).css("margin-top","4px"),j.appendTo(_),s.rtl&&j.css("float","right");var L=0;null!=r.filtercondition&&-1!=(I=(n=new M.jqx.filter).getoperatorsbyfiltertype("number"==r.filtertype?"numericfilter":"stringfilter").indexOf(r.filtercondition.toUpperCase()))&&(L=I);var I,T=180;"input"==r.filtertype&&(T=240,0==L&&-1!=(I=k.indexOf("contains")||2)&&null==r.filtercondition&&(L=I)),j.jqxDropDownList({disabled:s.disabled,touchMode:s.touchmode,rtl:s.rtl,dropDownHorizontalAlignment:"right",enableBrowserBoundsDetection:!0,selectedIndex:L,width:20,height:27,dropDownHeight:150,dropDownWidth:T,source:k,theme:s.theme}),j.jqxDropDownList({selectionRenderer:function(e){return""}}),j.attr("tabindex",5+r.visibleindex),j.jqxDropDownList("setContent",""),j.find(".jqx-dropdownlist-content").hide(),r.createfilterwidget&&r.createfilterwidget(r,e,_),r._filterwidget=_;var C=null;this.addHandler(j,"open",function(){t._activeFilterElement=j}),this.addHandler(j,"select",function(){var e=j.jqxDropDownList("getSelectedItem").label;0<r._filterwidget.find("input").val().length&&!s.refreshingfilter&&s._applyfilterfromfilterrow(),("input"!=r.filtertype||s.refreshingfilter)&&(0!=r._filterwidget.find("input").val().length||s.refreshingfilter||"null"!=C&&"not null"!=C&&"null"!=e&&"not null"!=e)||s._applyfilterfromfilterrow(),C=e});break;case"textbox":case"default":default:d(this,e);break;case"none":break;case"date":case"range":this.host.jqxDateTimeInput?((f=M("<div></div>")).css("margin","4px"),f.css("margin-left","5px"),f.appendTo(e),c={calendar:this.gridlocalization,todayString:this.gridlocalization.todaystring,clearString:this.gridlocalization.clearstring},f.jqxDateTimeInput({firstDayOfWeek:this.gridlocalization.firstDay,readonly:!0,disabled:s.disabled,localization:c,rtl:s.rtl,showFooter:!0,formatString:r.cellsformat,selectionMode:r.filtertype,value:null,theme:this.theme,width:l-9,height:this.filterrowheight-9}),r.createfilterwidget&&r.createfilterwidget(r,e,f),a&&a.from?f.jqxDateTimeInput("setRange",a.from,a.to):a&&1<a.toString().length&&f.val(a),f.find("input").attr("tabindex",5+r.visibleindex),r._filterwidget=f,this.addHandler(f,"valueChanged",function(e){s.refreshingfilter||(s._applyfilterfromfilterrow(),s.focusedfilter=null)})):d(this,e);break;case"list":case"checkedlist":this.host.jqxDropDownList?(h=this._getfilterdataadapter(r),m=!1,(j=M("<div></div>")).css("margin","4px"),j.css("margin-left","5px"),p=r.datafield,u="checkedlist"==r.filtertype,T=l<150?220:"auto",h.dataBind(),m=g=h.records.length<8,j.appendTo(e),j.jqxDropDownList({hint:!1,placeHolder:s.gridlocalization.filterchoosestring,disabled:s.disabled,touchMode:s.touchmode,rtl:s.rtl,checkboxes:u,dropDownWidth:T,source:h.records,autoDropDownHeight:g,theme:this.theme,width:l-9,height:this.filterrowheight-9,displayMember:r.displayfield,valueMember:p}),j.attr("tabindex",5+r.visibleindex),j.attr("default-placeholder",!0),r.createfilterwidget&&r.createfilterwidget(r,e,j),this.addHandler(j,"open",function(){t._activeFilterElement=j}),x=j.jqxDropDownList("listBox"),u?(j.jqxDropDownList({selectionRenderer:function(){return'<span class="'+s.toThemeProperty("jqx-item")+'" style="top: 4px; position: relative; color: inherit; border: none; background-color: transparent;">'+s.gridlocalization.filterselectstring+"</span>"}}),(w=M('<span style="top: 2px; position: relative; color: inherit; border: none; background-color: transparent;">'+s.gridlocalization.filterselectstring+"</span>")).addClass(this.toThemeProperty("jqx-item")),null!=x&&(m||x.host.height(200),x.insertAt({label:s.gridlocalization.filterselectallstring},0),j.jqxDropDownList("setContent",w),y=!0,new Array,x.checkAll(!1),s.addHandler(x.host,"checkChange",function(e){var t,i;j[0]._selectionChanged=!0,y=y&&(e.args.label!=s.gridlocalization.filterselectallstring?(y=!1,x.host.jqxListBox("checkIndex",0,!0,!1),t=x.host.jqxListBox("getCheckedItems"),i=x.host.jqxListBox("getItems"),1==t.length?x.host.jqxListBox("uncheckIndex",0,!0,!1):i.length!=t.length&&x.host.jqxListBox("indeterminateIndex",0,!0,!1)):(y=!1,e.args.checked?x.host.jqxListBox("checkAll",!1):x.host.jqxListBox("uncheckAll",!1)),!0)}))):(x.insertAt({label:this.gridlocalization.filterchoosestring,value:""},0),j.jqxDropDownList({selectedIndex:0})),(r._filterwidget=j).jqxDropDownList("dropdownlistWrapper"),"list"==r.filtertype?this.addHandler(j,"select",function(e){s.refreshingfilter||e.args&&"none"!=e.args.type&&(s._applyfilterfromfilterrow(),s.focusedfilter=null)}):this.addHandler(j,"close",function(e){j[0]._selectionChanged&&(s._applyfilterfromfilterrow(),s.focusedfilter=null,j[0]._selectionChanged=!1)})):d(this,e);break;case"bool":case"boolean":this.host.jqxCheckBox?((v=M('<div tabIndex=0 style="opacity: 0.99; position: absolute; top: 50%; left: 50%; margin-top: -9px; margin-left: -12px;"></div>')).appendTo(e),v.jqxCheckBox({disabled:s.disabled,enableContainerClick:!1,animationShowDelay:0,animationHideDelay:0,hasThreeStates:!0,theme:this.theme,checked:null}),v.attr("tabindex",5+r.visibleindex),r.createfilterwidget&&r.createfilterwidget(r,e,v),!0===a||"true"==a?v.jqxCheckBox({checked:!0}):!1!==a&&"false"!=a||v.jqxCheckBox({checked:!1}),r._filterwidget=v,this.addHandler(v,"change",function(e){s.refreshingfilter||e.args&&(s.focusedfilter=null,s._applyfilterfromfilterrow())})):d(this,e)}},_getfilterdataadapter:function(s){var a,e=!!this.source._source;if(n=e?(t={localdata:M.extend(!0,{},this.source.records),datatype:this.source.datatype,async:!1},a=this,new M.jqx.dataAdapter(t,{autoBind:!1,autoSort:!0,autoSortField:s.displayfield,async:!1,uniqueDataFields:[s.displayfield],beforeLoadComplete:function(e){var t=new Array;if(s.cellsformat){for(var i=a._getcolumntypebydatafield(s),r=0;r<e.length;r++){t.push(e[r]);var l=e[r][s.displayfield];e[r][s.displayfield+"JQValue"]=l,"date"===i?e[r][s.displayfield]=null!=l?n.formatDate(l,s.cellsformat,a.gridlocalization):"":"number"!==i&&"float"!==i&&"int"!==i||(e[r][s.displayfield]=null!=l?n.formatNumber(l,s.cellsformat,a.gridlocalization):"")}return t}return e}})):new M.jqx.dataAdapter(this.source,{autoBind:!1,uniqueDataFields:[s.displayfield],autoSort:!0,autoSortField:s.displayfield,async:!1}),s.filteritems&&0<s.filteritems.length)var t={localdata:s.filteritems,datatype:this.source.datatype,async:!1},n=new M.jqx.dataAdapter(t,{autoBind:!1,async:!1});else if(s.filteritems){if(s.filteritems._source)return s.filteritems._options.autoBind=!1,s.filteritems._options.async=!1,s.filteritems;if(M.isFunction(s.filteritems))return s.filteritems()}return n},refreshfilterrow:function(){if(this.showfilterrow){this.refreshingfilter=!0,this._updatefilterrowui(),this._updatelistfilters(!0,!0);for(var e=this.that,t=this.columns.records.length,i=0;i<t;i++){var r=this.columns.records[i];if(r.filterable&&r.filter){var l=r.filter.getfilters();if(0<l.length){var s,a,n=l[0].value,o=r._filterwidget,d=r._filterwidget.parent();if(null!=o)switch(r.filtertype){case"number":d.find("input").val(n),this.host.jqxDropDownList&&(s=r.filter.getoperatorsbyfiltertype("numericfilter"),o.find(".filter").jqxDropDownList("selectIndex",s.indexOf(l[0].condition)));break;case"input":d.find("input").val(n),this.host.jqxDropDownList&&(s=r.filter.getoperatorsbyfiltertype("stringfilter"),o.find(".filter").jqxDropDownList("selectIndex",s.indexOf(l[0].condition)));break;case"date":case"range":this.host.jqxDateTimeInput?null!=(n=r.filter.getfilterat(0).filtervalue)&&(a=r.filter.getfilterat(1)?r.filter.getfilterat(1).filtervalue:n,"range"==r.filtertype?M(d.children()[0]).jqxDateTimeInput("setRange",new Date(n),new Date(a)):M(d.children()[0]).jqxDateTimeInput("setDate",new Date(n))):o.val(n);break;case"textbox":case"default":o.val(n),e["_oldWriteText"+o[0].id]=n;break;case"bool":case"boolean":this.host.jqxCheckBox?M(d.children()[0]).jqxCheckBox({checked:n}):o.val(n)}}}}this.refreshingfilter=!1}},_destroyedfilters:function(){this.that;for(var e=this.columns.records.length,t=0;t<e;t++){var i,r,l=this.columns.records[t];l.filterable&&(i=l._filterwidget,"list"==l.filtertype||"checkedlist"==l.filtertype?(this.removeHandler(i,"select"),this.removeHandler(i,"close"),i.jqxDropDownList("destroy")):"date"==l.filtertype||"range"==l.filtertype?(this.removeHandler(i,"valueChanged"),i.jqxDateTimeInput("destroy")):"bool"==l.filtertype?(this.removeHandler(i,"change"),i.jqxCheckBox("destroy")):"number"==l.filtertype||"input"===l.filtertype?(r=i.find(".jqx-input"),this.removeHandler(r,"keydown"),M(i.children()[1]).jqxDropDownList("destroy")):this.removeHandler(i,"keydown"),i.remove())}},_updatelistfilters:function(e,t){for(var i=this.that,r=this.columns.records.length,l=0;l<r;l++){var s=this.columns.records[l];if(s.filterable&&("list"==s.filtertype||"checkedlist"==s.filtertype)){var a=s._filterwidget;if(e){var n=this._getfilterdataadapter(s);a.jqxDropDownList({source:n});var o=!0;if((c=a.jqxDropDownList("getItems")).length!=n.records.length+1&&(o=!1),o)for(var d=1;d<c.length;d++)if(c[d].label!=n.records[d-1][s.displayfield]){o=!1;break}if(o&&!t)continue}else if(null==s.filter){a.jqxDropDownList("renderSelection");continue}var f="checkedlist"==s.filtertype,c=a.jqxDropDownList("getItems"),h=a.jqxDropDownList("listBox");if(a.jqxDropDownList("dataBind"),f){a.jqxDropDownList({selectionRenderer:function(){return i.gridlocalization.filterselectstring}}),null==h.getItem(this.gridlocalization.filterselectallstring)&&h.insertAt({label:this.gridlocalization.filterselectallstring},0);var p=M('<span style="top: 2px; position: relative; color: inherit; border: none; background-color: transparent;">'+this.gridlocalization.filterselectstring+"</span>");if(p.addClass(this.toThemeProperty("jqx-item")),a.jqxDropDownList("setContent",p),h.checkAll(!1),s.filter){for(var u=s.filter.getfilters(),d=0;d<h.items.length;d++){var g=h.items[d].label,m=void 0;M.each(u,function(){var e;"NOT_EQUAL"==this.condition?e=g!=this.value:"EQUAL"==this.condition&&(e=g==this.value),m=null==m&&void 0!==e?e:"EQUAL"==this.condition?m||e:m&&e}),m?h.checkIndex(d,!1,!1):h.uncheckIndex(d,!1,!1)}h._updateCheckedItems();var x=h.getCheckedItems().length;h.items.length!=x&&0<x&&h.host.jqxListBox("indeterminateIndex",0,!0,!1)}}else if(null==h.getItem(this.gridlocalization.filterchoosestring)&&h.items[0].label!==this.gridlocalization.filterchoosestring&&h.insertAt({label:this.gridlocalization.filterchoosestring,value:""},0),a.jqxDropDownList({selectedIndex:0}),s.filter){for(var u=s.filter.getfilters(),w=-1,d=0;d<h.items.length;d++){g=h.items[d].label;M.each(u,function(){return"NOT_EQUAL"==this.condition||(g==this.value?(w=d,!1):void 0)})}-1!=w&&h.selectIndex(w)}c.length<8?a.jqxDropDownList("autoDropDownHeight",!0):a.jqxDropDownList("autoDropDownHeight",!1)}}},_renderfiltercolumn:function(){var r=this.that;if(this.filterable){if(!this.columns.records)return;M.each(this.columns.records,function(e,t){var i=!1;r.autoshowfiltericon?this.filter?(M(this.filtericon).show(),i=!0):M(this.filtericon).hide():this.filterable&&(M(this.filtericon).show(),i=!0),this.element.removeAttribute("filter"),i&&this.element.setAttribute("filter",!0),"right"!=this.align||this.renderer||this.element&&(this.element.firstChild.firstChild.style.marginRight=i?"18px":"2px")})}},_initcolumntypes:function(){if(this.columns&&this.columns.records){var e=this.source._source.datafields;if(e)for(var t=0;t<this.columns.records.length;t++){var i,r=this.columns.records[t];r.datatype||(i="",M.each(e,function(){if(this.name==r.displayfield)return this.type&&(i=this.type),!1}),r.datatype=""!=i?i:"")}}},_getcolumntypebydatafield:function(e){var t=this.that,i="string",r=t.source.datafields||(t.source._source?t.source._source.datafields:null);if(r){var l="";if(M.each(r,function(){if(this.name==e.displayfield)return this.type&&(l=this.type),!1}),l)return l}if(null!=e){if(null==this.dataview.cachedrecords)return i;var s=null;if(this.virtualmode)M.each(this.dataview.cachedrecords,function(){return s=this[e.displayfield],!1});else{if(0==this.dataview.cachedrecords.length)return i;if(null!=(s=this.dataview.cachedrecords[0][e.displayfield])&&""==s.toString())return"string"}if(null!=s)if("boolean"==typeof s)i="boolean";else if(M.jqx.dataFormat.isNumber(s))i="number";else{var a=new Date(s);if("NaN"==a.toString()||"Invalid Date"==a.toString())if(M.jqx.dataFormat){if(null!=(a=M.jqx.dataFormat.tryparsedate(s))){if(a&&a.getFullYear()&&1970==a.getFullYear()&&0==a.getMonth()&&1==a.getDate()){var n=new Number(s);return isNaN(n)?"string":"number"}return"date"}i="string"}else i="string";else i="date"}}return i},_getfiltersbytype:function(e){var t=this.that,i="";switch(e){case"number":case"float":case"int":i=t.gridlocalization.filternumericcomparisonoperators;break;case"date":i=t.gridlocalization.filterdatecomparisonoperators;break;case"boolean":case"bool":i=t.gridlocalization.filterbooleancomparisonoperators;break;case"string":default:i=t.gridlocalization.filterstringcomparisonoperators}return i},_getfiltertype:function(e){var t="stringfilter";switch(e){case"number":case"int":case"float":case"decimal":t="numericfilter";break;case"boolean":case"bool":t="booleanfilter";break;case"date":case"time":case"range":t="datefilter";break;case"string":case"input":t="stringfilter"}return t},_buildfilter:function(e,t,i){var r=M(t).find(".filter1"),l=M(t).find(".filter2"),s=M(t).find(".filter3"),a=M(t).find(".filtertext1"+e.element.id),n=M(t).find(".filtertext2"+e.element.id),o=a.val(),d=n.val(),f=e._getcolumntypebydatafield(i),c=(e._getfiltersbytype(f),new M.jqx.filter),h=e._getfiltertype(f);if("default"===e.filtermode&&"list"!==i.filtertype&&"checkedlist"!==i.filtertype){var p,u=r.jqxDropDownList("selectedIndex"),g=l.jqxDropDownList("selectedIndex"),m=s.jqxDropDownList("selectedIndex"),x=null,w=null;!e.updatefilterconditions||null!=(p=e.updatefilterconditions(h,c.getoperatorsbyfiltertype(h)))&&c.setoperatorsbyfiltertype(h,p);var y=!1,v=c.getoperatorsbyfiltertype(h)[u],s=c.getoperatorsbyfiltertype(h)[m],b="NULL"==v||"NOT_NULL"==v,D="EMPTY"==v||"NOT_EMPTY"==v;null==v&&(v=c.getoperatorsbyfiltertype(h)[0]),null==s&&(s=c.getoperatorsbyfiltertype(h)[0]),(0<o.length||b||D)&&(x=c.createfilter(h,o,v,null,i.cellsformat,e.gridlocalization),c.addfilter(g,x),y=!0);var q="NULL"==s||"NOT_NULL"==s,_="EMPTY"==s||"NOT_EMPTY"==s;(0<d.length||q||_)&&(w=c.createfilter(h,d,s,null,i.cellsformat,e.gridlocalization),c.addfilter(g,w),y=!0),y?(j=i.displayfield,this.addfilter(j,c,!0)):this._clearfilter(e,t,i)}else if("excel"===e.filtermode||"list"===i.filtertype||"checkedlist"===i.filtertype){var j,k=!1,L=r.data().jqxListBox.instance,I="excel"===this.filtermode||"checkedlist"===i.filtertype,T=L.getCheckedItems();if(I||(T=L.getSelectedItems()),0==T.length){for(var C=1;C<L.items.length;C++){void 0===(B=L.items[C].value)&&(B="");var z="not_equal";B&&B.indexOf&&(0<=B.indexOf("|")||0<=B.indexOf(" AND ")||0<=B.indexOf(" OR ")||0<=B.indexOf(" and ")||0<=B.indexOf(" or "))&&(B=(B=(B=(B=(B=B.replace("|","")).replace("AND","")).replace("OR","")).replace("and","")).replace("or",""),z="equal"),H="datefilter"==h?c.createfilter(h,B,z,null,i.cellsformat,e.gridlocalization):c.createfilter(h,B,z,null),c.addfilter(0,H)}k=!0}else if(T.length!=L.items.length){k=!0;for(var B,H,C=0;C<T.length;C++){e.gridlocalization.filterselectallstring!==T[C].value&&(void 0===(B=T[C].value)&&(B=""),z="equal",H="datefilter"==h?c.createfilter(h,B,z,null,i.cellsformat,e.gridlocalization):c.createfilter(h,B,z,null),c.addfilter(1,H))}}else k=!1;k?(j=i.displayfield,this.addfilter(j,c,!0)):(j=i.displayfield,this.removefilter(j,!0))}},_clearfilter:function(e,t,i){var r=i.displayfield;this.removefilter(r,!0)},addfilter:function(e,t,i){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);var r=this.getcolumn(e),l=this._getcolumn(e);null!=r&&null!=r&&(r.filter=t,l.filter=t,this.dataview.addfilter(e,t),1==i&&null!=i&&this.applyfilters("add"))},removefilter:function(e,t){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);var i=this.getcolumn(e),r=this._getcolumn(e);null!=i&&null!=i&&null!=i.filter&&(this.dataview.removefilter(e,i.filter),i.filter=null,r.filter=null,this.showfilterrow&&this.clearfilterrow(e),1!=t&&!1===t||this.applyfilters("remove"))},applyfilters:function(e){var t;if(0<=this.dataview.filters.length&&(this.virtualmode||!this.source.localdata)&&null!=this.source&&this.source.filter&&(t=-1,this.pageable?(t=this.dataview.pagenum,this.dataview.pagenum=0):(this.vScrollInstance.setPosition(0),this.loadondemand=!0,this._renderrows(this.virtualsizeinfo)),this.pageable&&this.virtualmode&&(this.dataview.pagenum=0),this.source.filter(this.dataview.filters,this.dataview.records,this.dataview.records.length),this.pageable&&!this.virtualmode&&(this.dataview.pagenum=t)),this._cellscache=new Array,this.dataview.clearsortdata&&this.dataview.clearsortdata(),this.virtualmode)return this.pageable&&(this.dataview.updateview(),this.gotopage&&this.gotopage(0)),this.rendergridcontent(!1,!1),this.showfilterrow&&"string"!=typeof e&&M.isEmptyObject(e)&&this.refreshfilterrow(),this._postrender("filter"),void this._raiseEvent(13,{filters:this.dataview.filters});var i;this.selectedrowindexes,this.that;this.dataview.refresh(),this.dataview.clearsortdata&&this.sortcolumn&&this.sortdirection&&(i=this.sortdirection.ascending?"asc":"desc",this._loading?this.sortby(this.sortcolumn,i,null,!1,!1):this.sortby(this.sortcolumn,i,null,!1)),this.pageable&&(this.dataview.updateview(),this.gotopage&&(this.gotopage(0),this.updatepagerdetails())),this._updaterowsproperties(),!this.groupable||this.groupable&&0==this.groups.length?(this._rowdetailscache=new Array,this.virtualsizeinfo=null,this._pagescache=new Array,this.columns&&this.columns.records&&0<this.columns.records.length&&!this.columns.records[0].filtericon&&(this.prerenderrequired=!0),this.rendergridcontent(!0,!1),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo),this.showaggregates&&this._updatecolumnsaggregates&&this._updatecolumnsaggregates(),this._postrender("filter")):(this.collapseallgroups(),this._rowdetailscache=new Array,this._render(!0,!0,!1,!1,!1),this.showfilterrow&&this._updatefocusedfilter(),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo),this._postrender("group")),this.showfilterrow&&"string"!=typeof e&&M.isEmptyObject(e)&&this.refreshfilterrow(),this._raiseEvent(13,{filters:this.dataview.filters})},getfilterinformation:function(){for(var e=new Array,t=0;t<this.dataview.filters.length;t++){var i=this.getcolumn(this.dataview.filters[t].datafield);e[t]={filter:this.dataview.filters[t].filter,datafield:i.datafield,displayfield:i.displayfield,filtercolumn:i.datafield,filtercolumntext:i.text}}return e},clearfilters:function(e){var t,i=this.that;this.showfilterrow&&this.clearfilterrow(),this.columns.records&&(t=1==e||!1!==e,M.each(this.columns.records,function(){i.removefilter(this.displayfield,!t)})),!1!==e&&(1!=e&&!1===e||this.applyfilters("clear"))},_destroyfilterpanel:function(){var e=M(M.find("#filterclearbutton"+this.element.id)),t=M(M.find("#filterbutton"+this.element.id)),i=M(M.find("#filter1"+this.element.id)),r=M(M.find("#filter2"+this.element.id)),l=M(M.find("#filter3"+this.element.id)),s=M(M.find(".filtertext1"+this.element.id)),a=M(M.find(".filtertext2"+this.element.id));0<s.length&&0<a.length&&(s.removeClass(),a.removeClass(),s.remove(),a.remove()),0<e.length&&(e.jqxButton("destroy"),t.jqxButton("destroy"),this.removeHandler(e,"click"),this.removeHandler(t,"click")),0<i.length&&i.jqxDropDownList("destroy"),0<r.length&&r.jqxDropDownList("destroy"),0<l.length&&l.jqxDropDownList("destroy");i=M(M.find("#filter1"+this.element.id+"ex")),r=M(M.find("#filter2"+this.element.id+"ex")),l=M(M.find("#filter3"+this.element.id+"ex"));0<i.length&&i.jqxDropDownList("destroy"),0<r.length&&r.jqxDropDownList("destroy"),0<l.length&&l.jqxDropDownList("destroy")},_updatefilterpanel:function(i,t,r){null!=i&&null!=i||(i=this);var e=i._getcolumntypebydatafield(r),l=i._getfiltersbytype(e);if(!i.host.jqxDropDownList)throw new Error("jqxGrid: Missing reference to jqxdropdownlist.js.");i.filterpanel.detach(),i.excelfilterpanel.detach(),r.filterpanel&&r.filterpanel.detach(),M(t).children().detach();var s,a=M(i.menuitemsarray[6]);M(a).css("height","220px"),r.createfilterpanel&&!r.filterpanel&&(s=M("<div class='filter' style='margin-left: 7px;'></div>"),M(t).append(s),r.createfilterpanel(r.displayfield,s),r.filterpanel=s),"list"===r.filtertype||"checkedlist"===r.filtertype?M(t).append(i.excelfilterpanel):"custom"!==r.filtertype?M(t).append(i.filterpanel):r.filterpanel&&M(t).append(r.filterpanel),this._showwhere=M(t).find(".filter.showwhere");var n,o,d,f=M(t),c=f.find("#filterclearbutton"+i.element.id),h=f.find("#filterbutton"+i.element.id),p=f.find(".filter1"),u=f.find(".filter2"),g=f.find(".filter3"),m=f.find(".filtertext1"+i.element.id),x=f.find(".filtertext2"+i.element.id);if(this._hasdatefilter&&"list"!==r.filtertype&&"checkedlist"!==r.filtertype&&"custom"!==r.filtertype&&(b=m.parent(),D=x.parent(),o="date"==r.filtertype?(m.jqxDateTimeInput("destroy"),x.jqxDateTimeInput("destroy"),b.children().remove(),D.children().remove(),i._showwhere.text(i.gridlocalization.filtershowrowdatestring),o=M("<div class='filtertext1"+i.element.id+"' style=''></div>"),b.append(o),(n=function(e){var t={calendar:i.gridlocalization,todayString:i.gridlocalization.todaystring,clearString:i.gridlocalization.clearstring};e.jqxDateTimeInput({disabled:i.disabled,firstDayOfWeek:i.gridlocalization.firstDay,localization:t,rtl:i.rtl,width:i._filterpanelwidth-10,height:24,value:null,formatString:r.cellsformat,theme:i.theme})})(o),M("<div class='filtertext2"+i.element.id+"' style=''></div>")):(b.children().remove(),D.children().remove(),i._showwhere.text(i.gridlocalization.filtershowrowstring),o=M("<input autocomplete='off' class='filtertext1"+i.element.id+"' style='box-sizing: content-box; height: 16px; padding: 3px;' type='text'></input>"),b.append(o),(n=function(e){e.addClass(i.toThemeProperty("jqx-input")),e.addClass(i.toThemeProperty("jqx-filter-input jqx-widget-content")),e.addClass(i.toThemeProperty("jqx-rc-all")),e.width(i._filterpanelwidth-18)})(o),M("<input autocomplete='off' class='filtertext2"+i.element.id+"' style='box-sizing: content-box; height: 16px; padding: 3px;' type='text'></input>")),D.append(o),n(o),m=f.find(".filtertext1"+i.element.id),x=f.find(".filtertext2"+i.element.id)),"date"!=r.filtertype?(m.val(""),x.val("")):(m.val(null),x.val(null)),h.jqxButton({height:this.filterMenuItemsHeight}),c.jqxButton({height:this.filterMenuItemsHeight}),this.removeHandler(h,"click"),this.addHandler(h,"click",function(){i._buildfilter(i,t,r),i._closemenu()}),this.removeHandler(c,"click"),this.addHandler(c,"click",function(){i._clearfilter(i,t,r),i._closemenu()}),this.removeHandler(h,"keydown"),this.addHandler(h,"keydown",function(e){13===e.keyCode&&(i._buildfilter(i,t,r),i._closemenu())}),this.removeHandler(c,"keydown"),this.addHandler(c,"keydown",function(e){13===e.keyCode&&(i._clearfilter(i,t,r),i._closemenu())}),this.removeHandler(m,"keydown"),this.addHandler(m,"keydown",function(e){13===e.keyCode&&h.trigger("click"),27===e.keyCode&&i._closemenu()}),this.removeHandler(x,"keydown"),this.addHandler(x,"keydown",function(e){13===e.keyCode&&h.trigger("click"),27===e.keyCode&&i._closemenu()}),"default"===this.filtermode&&"list"!==r.filtertype&&"checkedlist"!==r.filtertype&&"custom"!==r.filtertype){p.jqxDropDownList("source")!=l&&(p.jqxDropDownList({enableBrowserBoundsDetection:!1,source:l}),g.jqxDropDownList({enableBrowserBoundsDetection:!1,source:l})),"boolean"==e||"bool"==e?(p.jqxDropDownList({autoDropDownHeight:!0,selectedIndex:0}),g.jqxDropDownList({autoDropDownHeight:!0,selectedIndex:0})):(d=!1,l&&l.length&&l.length<5&&(d=!0),p.jqxDropDownList({autoDropDownHeight:d,selectedIndex:2}),g.jqxDropDownList({autoDropDownHeight:d,selectedIndex:2})),u.jqxDropDownList({selectedIndex:0});var w=r.filter,y=new M.jqx.filter,v="";switch(e){case"number":case"int":case"float":case"decimal":v="numericfilter",q=y.getoperatorsbyfiltertype("numericfilter");break;case"boolean":case"bool":v="booleanfilter",q=y.getoperatorsbyfiltertype("booleanfilter");break;case"date":case"time":v="datefilter",q=y.getoperatorsbyfiltertype("datefilter");break;case"string":v="stringfilter",q=y.getoperatorsbyfiltertype("stringfilter")}if(null!=w){var b=w.getfilterat(0),D=w.getfilterat(1);w.getoperatorat(0);if(i.updatefilterconditions){var q=[],_=i.updatefilterconditions(v,q);if(null!=_){for(var j=0;j<_.length;j++)_[j]=_[j].toUpperCase();w.setoperatorsbyfiltertype(v,_),q=_}}var k,L,I,T,C="default";null!=b&&(k=q.indexOf(b.comparisonoperator),L=b.filtervalue,m.val(L),p.jqxDropDownList({selectedIndex:k,animationType:C})),null!=D&&(I=q.indexOf(D.comparisonoperator),T=D.filtervalue,x.val(T),g.jqxDropDownList({selectedIndex:I,animationType:C})),null==w.getoperatorat(0)?u.jqxDropDownList({selectedIndex:0,animationType:C}):"and"==w.getoperatorat(0)||0==w.getoperatorat(0)?u.jqxDropDownList({selectedIndex:0}):u.jqxDropDownList({selectedIndex:1})}i.updatefilterpanel&&i.updatefilterpanel(p,g,u,m,x,h,c,w,v,q),(!this._hasdatefilter||this._hasdatefilter&&"date"!=r.filtertype)&&(this.touchdevice||(m.focus(),setTimeout(function(){m.focus()},10)))}else if("excel"===this.filtermode||"list"===r.filtertype||"checkedlist"===r.filtertype){var z,B=i._getfilterdataadapter(r),v=i._getfiltertype(e),H="excel"===this.filtermode||"checkedlist"===r.filtertype;if(p.jqxListBox("focus"),this.removeHandler(p,"keyup"),this.addHandler(p,"keyup",function(e){13===e.keyCode&&h.trigger("click"),27===e.keyCode&&i._closemenu()}),r.cellsformat?p.jqxListBox({checkboxes:H,displayMember:r.displayfield,valueMember:r.displayfield+"JQValue",source:B}):p.jqxListBox({checkboxes:H,displayMember:r.displayfield,valueMember:r.displayfield,source:B}),H){p.jqxListBox("insertAt",{label:i.gridlocalization.filterselectallstring},0),(z=p.data().jqxListBox.instance).checkAll(!1);if(r.filter){z.uncheckAll(!1);for(var A=r.filter.getfilters(),O=0;O<z.items.length;O++){var P=z.items[O].value;M.each(A,function(){if("NOT_EQUAL"==this.condition){if(P!=this.value)return z.uncheckIndex(O,!1,!1),!1;if(null!=P&&null!=this.value&&P.toString()!=this.value.toString())return z.uncheckIndex(O,!1,!1),!1}else if("EQUAL"==this.condition){if(P==this.value)return z.checkIndex(O,!1,!1),!1;if(null!=P&&null!=this.value&&P.toString()==this.value.toString())return z.checkIndex(O,!1,!1),!1}})}z._updateCheckedItems();var N=z.getCheckedItems().length;z.items.length!=N&&0<N&&z.host.jqxListBox("indeterminateIndex",0,!0,!1),N===z.items.length-1&&z.host.jqxListBox("checkIndex",0,!0,!1)}}else if(r.filter){(z=p.data().jqxListBox.instance).clearSelection();for(A=r.filter.getfilters(),O=0;O<z.items.length;O++){P=z.items[O].value;M.each(A,function(){if("NOT_EQUAL"==this.condition){if(P!=this.value)return z.unselectIndex(O,!1,!1),!1}else if("EQUAL"==this.condition&&P==this.value)return z.selectIndex(O,!0,!1),!1})}z._renderItems()}}},_initfilterpanel:function(r,e,t,i,l){null!=r&&null!=r||(r=this),e[0].innerHTML="";var s=M("<div class='filter' style='position: absolute; bottom: 3px; margin-left: 3px;'></div>");e.append(s);var a=M("<div class='filter showwhere' style='height: 18px; margin-top: 3px; margin-bottom: 3px;'></div>");a.text(r.gridlocalization.filtershowrowstring),this._showwhere=a;var n=l?"ex":"",o=M("<div class='filter filter1' id='filter1"+r.element.id+n+"'></div>"),d=M("<div class='filter filter2' id='filter2"+r.element.id+n+"' style='margin-top: 3px; margin-bottom: 3px;'></div>"),f=M("<div class='filter filter3' id='filter3"+r.element.id+n+"'></div>"),c=r._getcolumntypebydatafield(t);if(!o.jqxDropDownList)throw new Error("jqxGrid: jqxdropdownlist.js is not loaded.");var h=r._getfiltersbytype(c);if(this._hasdatefilter=!1,this._filterpanelwidth=i,this.columns&&this.columns.records){for(var p=0;p<this.columns.records.length;p++)if("date"==this.columns.records[p].filtertype){this._hasdatefilter=!0;break}}else if(this.columns&&!this.columns.records)for(p=0;p<this.columns.length;p++)if("date"==this.columns[p].filtertype){this._hasdatefilter=!0;break}this._hasdatefilter=!0;var u=M("<div style='margin-top:3px;' class='filter'><input autocomplete='off' class='filtertext1"+r.element.id+"' style='padding: 3px; height: 16px; margin-top: 3px; margin-bottom: 3px;' type='text'></input></div>"),g=u.find("input");g.addClass(this.toThemeProperty("jqx-input")),g.addClass(this.toThemeProperty("jqx-filter-input jqx-widget-content")),g.addClass(this.toThemeProperty("jqx-rc-all")),g.width(i-18);var m=M("<div style='margin-top:3px;' class='filter'><input autocomplete='off' class='filtertext2"+r.element.id+"' style='padding: 3px; height: 16px; margin-top: 3px;' type='text'></input></div>"),x=m.find("input");x.addClass(this.toThemeProperty("jqx-input")),x.addClass(this.toThemeProperty("jqx-filter-input jqx-widget-content")),x.addClass(this.toThemeProperty("jqx-rc-all")),x.width(i-18),r.rtl&&(g.css("direction","rtl"),x.css("direction","rtl"));var w=M("<div class='filter' style='height: 35px; text-align:center; margin-top: 15px; margin-left:-2px;'></div>"),y=M('<span tabIndex=0 id="filterbutton'+r.element.id+'" class="primary filterbutton" style="padding: 6px 15px;">'+r.gridlocalization.filterstring+"</span>");w.append(y);var v=M('<span tabIndex=0 id="filterclearbutton'+r.element.id+'" class="filterclearbutton secondary" style="position: relative; left: 2px; padding: 6px 15px; margin-left: 7px;">'+r.gridlocalization.filterclearstring+"</span>");w.append(v),y.jqxButton({height:this.filterMenuItemsHeight,theme:r.theme}),v.jqxButton({height:this.filterMenuItemsHeight,theme:r.theme});function b(e){var t;return e?(-1!=e.text().indexOf("case sensitive")&&(t=(t=e.text()).replace("case sensitive","match case"),e.text(t)),e.css("font-family",r.host.css("font-family")),e.css("font-size",r.host.css("font-size")),e.css("top","2px"),e.css("position","relative"),e):""}var D,q;"default"!==this.filtermode||l?"excel"!==this.filtermode&&!l||(s.append(a),s.append(o),o.attr("tabindex",0),o.jqxListBox({rtl:r.rtl,_checkForHiddenParent:!1,checkboxes:!0,selectedIndex:2,width:i-10,height:200,theme:r.theme}),D=!0,r.addHandler(o,"checkChange",function(e){var t,i;D=D&&(e.args.label!=r.gridlocalization.filterselectallstring?(D=!1,o.jqxListBox("checkIndex",0,!0,!1),t=o.jqxListBox("getCheckedItems"),i=o.jqxListBox("getItems"),1==t.length?o.jqxListBox("uncheckIndex",0,!0,!1):i.length!=t.length&&o.jqxListBox("indeterminateIndex",0,!0,!1)):(D=!1,e.args.checked?o.jqxListBox("checkAll",!1):o.jqxListBox("uncheckAll",!1)),!0)})):(s.append(a),s.append(o),o.jqxDropDownList({_checkForHiddenParent:!1,autoItemsHeight:!0,rtl:r.rtl,enableBrowserBoundsDetection:!1,selectedIndex:2,width:i-10,height:this.filterMenuItemsHeight,dropDownHeight:200,dropDownWidth:i-10,selectionRenderer:b,source:h,theme:r.theme}),s.append(u),(q=new Array)[0]=r.gridlocalization.filterandconditionstring,q[1]=r.gridlocalization.filterorconditionstring,d.jqxDropDownList({_checkForHiddenParent:!1,rtl:r.rtl,enableBrowserBoundsDetection:!1,autoDropDownHeight:!0,selectedIndex:0,width:60,height:this.filterMenuItemsHeight,source:q,selectionRenderer:b,theme:r.theme}),s.append(d),f.jqxDropDownList({_checkForHiddenParent:!1,autoItemsHeight:!0,rtl:r.rtl,enableBrowserBoundsDetection:!1,selectedIndex:2,width:i-10,height:this.filterMenuItemsHeight,dropDownHeight:200,dropDownWidth:i-10,selectionRenderer:b,source:h,theme:r.theme}),s.append(f),s.append(m)),s.append(w),r.updatefilterpanel&&r.updatefilterpanel(o,f,d,u,m,y,v,null,null,h)}})}(jqxBaseFramework);