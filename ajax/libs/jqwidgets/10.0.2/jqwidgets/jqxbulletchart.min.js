!function(m){m.jqx.jqxWidget("jqxBulletChart","",{}),m.extend(m.jqx._jqxBulletChart.prototype,{defineInstance:function(){var t={width:500,height:100,barSize:"50%",ranges:[{startValue:0,endValue:50,color:"#000000",opacity:.7},{startValue:50,endValue:80,color:"#000000",opacity:.5},{startValue:80,endValue:100,color:"#000000",opacity:.3}],pointer:{value:65,label:"Value",size:"25%",color:""},target:{value:85,label:"Target",size:4,color:""},ticks:{position:"far",interval:20,size:10},title:"Title",description:"Description",orientation:"horizontal",labelsFormat:null,labelsFormatFunction:null,animationDuration:400,showTooltip:!0,tooltipFormatFunction:null,disabled:!1,rtl:!1,events:["change"]};return this===m.jqx._jqxBulletChart.prototype||m.extend(!0,this,t),t},createInstance:function(t){if(!m.jqx.dataAdapter)throw new Error("jqxBulletChart: Missing reference to the following module: 'jqxdata.js'.");this._setDefaultValues(),this.render();var i=this;m.jqx.utilities.resize(this.host,function(){i._timer&&clearTimeout(i._timer),i._timer=setTimeout(function(){var t=i.animationDuration;i.animationDuration=0,i.render(),setTimeout(function(){i.animationDuration=t},0)},10)},!1,!0)},render:function(){0<this.host.children().length&&(this._removeHandlers(),1==this.showTooltip&&this.host.jqxTooltip("destroy"),this.host.empty()),this.host.addClass(this.toThemeProperty("jqx-widget")),this.host.addClass(this.toThemeProperty("jqx-bulletchart")),this.host.width(this.width),this.host.height(this.height);var t,i=this.host.width(),e=this.host.height(),s=this.rtl?"rtl":"ltr";"horizontal"==this.orientation?t=m("<div style='position: absolute; visibility: hidden; padding: 5px;'><div class='"+this.toThemeProperty("jqx-bulletchart-title")+"' style='direction: "+s+";'>"+this.title+"</div><div class='"+this.toThemeProperty("jqx-bulletchart-description")+"' style='direction: "+s+";'>"+this.description+"</div></div>"):"vertical"==this.orientation&&(t=m("<div style='position: absolute; visibility: hidden; padding-bottom: 15px;'><div class='"+this.toThemeProperty("jqx-bulletchart-title")+"' style='width: "+i+"px; direction: "+s+";'>"+this.title+"</div><div class='"+this.toThemeProperty("jqx-bulletchart-description")+"' style='direction: "+s+";'>"+this.description+"</div></div>")),this.host.append(t);var o,r,a,l,h,n,c,d,p=t.outerWidth(),u=t.outerHeight();if(t.remove(),"horizontal"==this.orientation?(h="jqx-bulletchart-title-container-horizontal",n="jqx-bulletchart-chart-container-horizontal",c=this._checkPercentage(this.barSize,this.host),d=0,a=i-(l=p),r=o=this.barSize,this.width&&0<=this.width.toString().indexOf("%")&&(a=parseFloat(parseFloat(100*a)/i).toString()+"%",l=parseFloat(parseFloat(100*l)/i).toString()+"%",this._percentageWidth=!0)):"vertical"==this.orientation&&(h="jqx-bulletchart-title-container-vertical",n="jqx-bulletchart-chart-container-vertical",c=0,l="100%",o=u,d=this._checkPercentage(this.barSize,this.host),a=this.barSize,r=e-o),(0==this.rtl||1==this.rtl&&"vertical"==this.orientation)&&this.host.append("<div id='"+this.element.id+"titleContainer' class='"+h+"' style='top: "+c+";'></div>"),this.host.append("<div id='"+this.element.id+"ChartContainer' class='"+n+"' style='top: "+c+"; left: "+d+";'></div>"),1==this.rtl&&"horizontal"==this.orientation&&this.host.append("<div id='"+this.element.id+"titleContainer' class='"+h+"' style='top: "+c+";'></div>"),this._titleContainer=m("#"+this.element.id+"titleContainer"),this._chartContainer=m("#"+this.element.id+"ChartContainer"),this._titleContainer.css({width:l,height:o}),this._chartContainer.css({width:a,height:r}),this._min=this.ranges[0].startValue,this._max=this.ranges[this.ranges.length-1].endValue,this._interval=this._max-this._min,this._valueToPixelsHorizontal=this._chartContainer.width()/this._interval,this._valueToPixelsVertical=this._chartContainer.height()/this._interval,this._checkValues(),this._appendRanges(),this._appendPointerAndTarget(),this._appendTitleAndDescription(),"none"!=this.ticks.position&&this._appendTicksAndLabels(),1==this.disabled&&this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")),1==this.showTooltip){if(null==this.host.jqxTooltip)throw new Error("jqxBulletChart: Missing reference to the following module: 'jqxtooltip.js'.");this._initializeTooltip(),this.host.data().jqxWidget=this}this._updateValue(this.pointer.value,0,!0)},refresh:function(t){t||this.render()},val:function(t){if(0==arguments.length||null!=t&&"object"==typeof t)return this.pointer.value;t>this._max?t=this._max:t<this._min&&(t=this._min),t!=this.pointer.value&&(this._updateValue(t,this.pointer.value),this.pointer.value=t,1==this.showTooltip&&this._updateTooltip())},destroy:function(){m.jqx.utilities.resize(this.host,null,!0),this._removeHandlers(),1==this.showTooltip&&this.host.jqxTooltip("destroy"),this.host.remove()},propertyChangedHandler:function(s,o,e,r){if(e!=r||r instanceof Object){function t(){m.each(e,function(t,i){null==r[t]&&(s[o][t]=i)})}var a=!0;switch(o){case"barSize":break;case"ranges":m.each(e,function(e,t){m.each(t,function(t,i){void 0!==r[e]&&null==r[e][t]&&(s[o][e][t]=i)})}),this._setDefaultValues();break;case"pointer":return t(),void this._updatePointer(r,e);case"target":return t(),void this._updateTarget(r,e);case"ticks":a=!1,t(),m.each(e,function(t,i){e[t]!=s[o][t]&&(a=!0)});break;case"showTooltip":if(1==r){if(null==this.host.jqxTooltip)throw new Error("jqxBulletChart: Missing reference to the following module: 'jqxtooltip.js'.");this._initializeTooltip()}else this._removeHandlers(),this.host.jqxTooltip("destroy");break;case"animationDuration":return;case"tooltipFormatFunction":return void this._updateTooltip();case"disabled":return void(1==r?this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")):this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled")))}1==a&&this.render()}},_raiseEvent:function(t,i){var e=this.events[t],s=new m.Event(e);s.owner=this,s.args=i;try{var o=this.host.trigger(s)}catch(t){}return o},_removeHandlers:function(){var t=m("#"+this.element.id+"Pointer, #"+this.element.id+"Target");this.removeHandler(t,"mouseenter.bulletchart"+this.element.id),this.removeHandler(t,"mouseleave.bulletchart"+this.element.id)},_setDefaultValues:function(){for(var t=this.ranges,i=this.ranges.length,e=0;e<i;e++){if(null==t[e].startValue||null==t[e].endValue)throw new Error("jqxBulletChart: Each range must have its startValue and endValue set.");null==t[e].color&&(this.ranges[e].color="#000000"),null==t[e].opacity&&(this.ranges[e].opacity=1-1/i*e)}var s=this.pointer;null==s.value&&(this.pointer.value=65),null==s.label&&(this.pointer.label="Value"),null==s.size&&(this.pointer.size="25%"),null==s.color&&(this.pointer.color="");var o=this.target;null==o.value&&(this.target.value=85),null==o.label&&(this.target.label="Target"),null==o.size&&(this.target.size=5),null==o.color&&(this.target.color="");var r=this.ticks;null==r.position&&(this.ticks.position="near"),null==r.interval&&(this.ticks.interval=20),null==r.size&&(this.ticks.size=10)},_checkValues:function(){this.pointer.value>this._max?this.pointer.value=this._max:this.pointer.value<this._min&&(this.pointer.value=this._min),this.target.value>this._max?this.target.value=this._max:this.target.value<this._min&&(this.target.value=this._min)},_appendRanges:function(){for(var t="",i=this.ranges.length,e=0;e<i;e++){var s,o,r,a,l,h,n=this.ranges[e];"horizontal"==this.orientation?(s=this.rtl?"right":"left",o=(n.startValue-this._min)*this._valueToPixelsHorizontal,r=(n.endValue-n.startValue)*this._valueToPixelsHorizontal,a="<div class='"+this.toThemeProperty("jqx-bulletchart-range")+" "+this.toThemeProperty("jqx-bulletchart-range-horizontal")+"' style='"+s+": "+o+"px; width: "+r+"px; background-color: "+n.color+"; opacity: "+n.opacity+"'></div>"):"vertical"==this.orientation&&(l=(n.startValue-this._min)*this._valueToPixelsVertical,h=(n.endValue-n.startValue)*this._valueToPixelsVertical,a="<div class='"+this.toThemeProperty("jqx-bulletchart-range")+" "+this.toThemeProperty("jqx-bulletchart-range-vertical")+"' style='bottom: "+l+"px; height: "+h+"px; background-color: "+n.color+"; opacity: "+n.opacity+"'></div>"),t+=a}this._chartContainer.append(t)},_appendPointerAndTarget:function(){var t,i,e,s,o,r,a,l,h,n,c="",d=this.element.id+"Pointer",p=this.element.id+"Target",u=this.pointer.size,v=this.target.value,m=this.target.size,x=0<v?0:parseInt(m),g=0<this.pointer.color.length?"":this.toThemeProperty("jqx-fill-state-pressed"),_=0<this.target.color.length?"":this.toThemeProperty("jqx-fill-state-pressed");"horizontal"==this.orientation?(t=this._normaliseValue(u),i=this._checkPercentage(u,this._chartContainer),e=this.rtl?"right":"left",h=(s=(v-this._min)*this._valueToPixelsHorizontal-x)+parseInt(m)-this._chartContainer.width(),s<0?s=0:0<h&&(s-=h),o=this._normaliseValue(m),c+="<div class='"+_+" "+this.toThemeProperty("jqx-bulletchart-target")+" "+this.toThemeProperty("jqx-bulletchart-target-horizontal")+"' id='"+p+"' style='"+e+": "+s+"px; width: "+o+"; background-color: "+this.target.color+"'></div>",c+="<div class='"+g+" "+this.toThemeProperty("jqx-bulletchart-pointer")+"' id='"+d+"' style='top: "+i+"; height: "+t+"; background-color: "+this.pointer.color+"'></div>"):"vertical"==this.orientation&&(this._chartContainer.width(),r=this._normaliseValue(u),a=this._checkPercentage(u,this._chartContainer),h=(l=(v-this._min)*this._valueToPixelsVertical-x)+parseInt(m)-this._chartContainer.height(),l<0?l=0:0<h&&(l-=h),n=this._normaliseValue(m),c+="<div class='"+_+" "+this.toThemeProperty("jqx-bulletchart-target")+" "+this.toThemeProperty("jqx-bulletchart-target-vertical")+"' id='"+p+"' style='bottom: "+l+"px; height: "+n+"; background-color: "+this.target.color+"'></div>",c+="<div class='"+g+" "+this.toThemeProperty("jqx-bulletchart-pointer")+"' id='"+d+"' style='left: "+a+"; width: "+r+"; background-color: "+this.pointer.color+"'></div>"),this._chartContainer.append(c)},_updatePointer:function(t,i){var e,s,o,r,a,l=m("#"+this.element.id+"Pointer");t.value>this._max?this.pointer.value=this._max:t.value<this._min&&(this.pointer.value=this._min),t.value!=i.value&&(this._updateValue(t.value,i.value),1==this.showTooltip&&this._updateTooltip()),t.label!=i.label&&1==this.showTooltip&&this._updateTooltip(),t.size!=i.size&&(e=t.size,"horizontal"==this.orientation?(s=this._checkPercentage(e,this._chartContainer),o=this._normaliseValue(e),l.css({top:s,height:o})):"vertical"==this.orientation&&(r=this._checkPercentage(e,this._chartContainer),a=this._normaliseValue(e),l.css({left:r,width:a}))),t.color!=i.color&&(""==t.color?(l.css("background-color",""),l.addClass(this.toThemeProperty("jqx-fill-state-pressed"))):(l.removeClass(this.toThemeProperty("jqx-fill-state-pressed")),l.css("background-color",t.color)))},_updateTarget:function(t,i){var e,s,o,r,a,l,h=m("#"+this.element.id+"Target");t.value>this._max?this.target.value=this._max:t.value<this._min&&(this.target.value=this._min),t.value==i.value&&t.size==i.size||(e=t.value,s=parseInt(t.size),o=0<e?0:s,"horizontal"==this.orientation?(this.rtl,l=(r=(e-this._min)*this._valueToPixelsHorizontal-o)+s-this._chartContainer.width(),r<0?r=0:0<l&&(r-=l),0==this.rtl?h.css("left",r):h.css("right",r),h.width(s)):"vertical"==this.orientation&&(l=(a=(e-this._min)*this._valueToPixelsVertical-o)+s-this._chartContainer.height(),a<0?a=0:0<l&&(a-=l),h.css({bottom:a,height:s})),1==this.showTooltip&&this._updateTooltip()),t.label!=i.label&&1==this.showTooltip&&this._updateTooltip(),t.color!=i.color&&(""==t.color?(h.css("background-color",""),h.addClass(this.toThemeProperty("jqx-fill-state-pressed"))):(h.removeClass(this.toThemeProperty("jqx-fill-state-pressed")),h.css("background-color",t.color)))},_appendTitleAndDescription:function(){var t="horizontal"==this.orientation?1==this.rtl?this.toThemeProperty("jqx-bulletchart-title-description-rtl"):this.toThemeProperty("jqx-bulletchart-title-description-ltr"):this.toThemeProperty("jqx-bulletchart-title-description-vertical"),i=this.rtl?"rtl":"ltr",e="<div id='"+this.element.id+"Title' class='"+this.toThemeProperty("jqx-bulletchart-title")+" "+t+"' style='direction: "+i+";'>"+this.title+"</div><div id='"+this.element.id+"Description' class='"+this.toThemeProperty("jqx-bulletchart-description")+" "+t+"' style='direction: "+i+";'>"+this.description+"</div>",s=m("<div style='position: absolute; visibility: hidden;'>"+e+"</div>");this._titleContainer.append(s);var o,r=s.children(),a=m(r[0]).height()+m(r[1]).height();s.remove(),o="horizontal"==this.orientation?0==this.rtl?this.toThemeProperty("jqx-bulletchart-title-inner-container")+" "+this.toThemeProperty("jqx-bulletchart-title-inner-container-ltr"):this.toThemeProperty("jqx-bulletchart-title-inner-container")+" "+this.toThemeProperty("jqx-bulletchart-title-inner-container-rtl"):"",this._titleContainer.append("<div class='"+o+"' style='height: "+a+"px;'>"+e+"</div>")},_appendTicksAndLabels:function(){var t=m("<div style='position: absolute; visibility: hidden;'></div>");this._chartContainer.append(t);var i="",e=this._min<0,s=this.ticks.size;if("horizontal"==this.orientation){var o,r=this._titleContainer.width(),a=this._chartContainer.offset().top-this.host.offset().top;"both"!=this.ticks.position&&"far"!=this.ticks.position||(o=this._chartContainer.height()+a);for(var l=0;l<=this._interval;l+=this.ticks.interval){var h=l*this._valueToPixelsHorizontal+r;l+this.ticks.interval>this._interval&&--h,e&&l+this._min==0&&(i+="<div class='"+this.toThemeProperty("jqx-bulletchart-ticks")+" "+this.toThemeProperty("jqx-bulletchart-ticks-horizontal")+" "+this.toThemeProperty("jqx-bulletchart-zero-tick")+"' style='top: "+a+"px; "+d+": "+h+"px; height: "+this._chartContainer.height()+"px;'></div>",e=!1);var n=this._labelValue(l);t.html(n);var c=h-t.width()/2,d=this.rtl?"right":"left";"both"!=this.ticks.position&&"far"!=this.ticks.position||(i+="<div class='"+this.toThemeProperty("jqx-bulletchart-ticks")+" "+this.toThemeProperty("jqx-bulletchart-ticks-horizontal")+"' style='top: "+o+"px; "+d+": "+h+"px; height: "+s+"px;'></div>",i+="<div class='"+this.toThemeProperty("jqx-bulletchart-labels")+"' style='top: "+(o+s+2)+"px; "+d+": "+c+"px;'>"+n+"</div>"),"both"!=this.ticks.position&&"near"!=this.ticks.position||(i+="<div class='"+this.toThemeProperty("jqx-bulletchart-ticks")+" "+this.toThemeProperty("jqx-bulletchart-ticks-horizontal")+"' style='top: "+(a-s)+"px; "+d+": "+h+"px; height: "+s+"px;'></div>",i+="<div class='"+this.toThemeProperty("jqx-bulletchart-labels")+"' style='top: "+(a-(s+t.height()+2))+"px; "+d+": "+c+"px;'>"+n+"</div>")}}else if("vertical"==this.orientation){var p,u=this._chartContainer.offset().left-this.host.offset().left;"both"!=this.ticks.position&&"far"!=this.ticks.position||(p=this._chartContainer.width());for(l=0;l<=this._interval;l+=this.ticks.interval){var v=l*this._valueToPixelsVertical;l+this.ticks.interval>this._interval&&--v,e&&l+this._min==0&&(i+="<div class='"+this.toThemeProperty("jqx-bulletchart-ticks")+" "+this.toThemeProperty("jqx-bulletchart-ticks-vertical")+" "+this.toThemeProperty("jqx-bulletchart-zero-tick")+"' style='left: "+u+"px; bottom: "+v+"px; width: "+p+"px;'></div>",e=!1),"both"!=this.ticks.position&&"near"!=this.ticks.position||(i+="<div class='"+this.toThemeProperty("jqx-bulletchart-ticks")+" "+this.toThemeProperty("jqx-bulletchart-ticks-vertical")+"' style='left: "+(u-s)+"px; bottom: "+v+"px; width: "+s+"px;'></div>",n=this._labelValue(l,"near"),t.html(n),c=t.height()/2-1,i+="<div class='"+this.toThemeProperty("jqx-bulletchart-labels")+"' style='left: "+(u-(s+t.width()+2))+"px; bottom: "+(v-c)+"px;'>"+n+"</div>"),"both"!=this.ticks.position&&"far"!=this.ticks.position||(i+="<div class='"+this.toThemeProperty("jqx-bulletchart-ticks")+" "+this.toThemeProperty("jqx-bulletchart-ticks-vertical")+"' style='left: "+(p+u)+"px; bottom: "+v+"px; width: "+s+"px;'></div>",n=this._labelValue(l,"far"),t.html(n),c=t.height()/2-1,i+="<div class='"+this.toThemeProperty("jqx-bulletchart-labels")+"' style='left: "+(p+u+s+2)+"px; bottom: "+(v-c)+"px;'>"+n+"</div>")}}this.host.append(i),t.remove()},_labelValue:function(t,i){var e=t+this._min,s=this.labelsFormatFunction?this.labelsFormatFunction(e,i):m.jqx.dataFormat.formatnumber(e,this.labelsFormat);return s},_initializeTooltip:function(){var i=this,t=this._tooltipContent();this.host.jqxTooltip({theme:this.theme,position:"mouse",content:t,trigger:"none",autoHide:!1,rtl:this.rtl}),this.host.jqxTooltip("getInstance").val=m.proxy(this.val,this);var e=m("#"+this.element.id+"Pointer, #"+this.element.id+"Target");this.addHandler(e,"mouseenter.bulletchart"+this.element.id,function(t){0==i.disabled&&(i.host.jqxTooltip("open",t.pageX,t.pageY),(t.target.id==i.element.id+"Pointer"&&""==i.pointer.color||t.target.id==i.element.id+"Target"&&""==i.target.color)&&(m(t.target).removeClass(i.toThemeProperty("jqx-fill-state-pressed")),m(t.target).addClass(i.toThemeProperty("jqx-fill-state-hover"))))}),this.addHandler(e,"mouseleave.bulletchart"+this.element.id,function(t){0==i.disabled&&(i.host.jqxTooltip("close"),(t.target.id==i.element.id+"Pointer"&&""==i.pointer.color||t.target.id==i.element.id+"Target"&&""==i.target.color)&&(m(t.target).removeClass(i.toThemeProperty("jqx-fill-state-hover")),m(t.target).addClass(i.toThemeProperty("jqx-fill-state-pressed"))))})},_updateTooltip:function(){this.host.jqxTooltip({content:this._tooltipContent()})},_tooltipContent:function(){var t,i;return this.tooltipFormatFunction?this.tooltipFormatFunction(this.pointer.value,this.target.value):(t=m.jqx.dataFormat.formatnumber(this.pointer.value,this.labelsFormat),i=m.jqx.dataFormat.formatnumber(this.target.value,this.labelsFormat),"<div>"+this.pointer.label+": "+t+"</div><div>"+this.target.label+": "+i+"</div>")},_updateValue:function(o,r,t){function i(t,i,e){var s;return 0<=n._min?("vertical"==t?c.css("bottom",0):1==n.rtl&&"horizontal"==t&&c.css("right",0),(o-n._min)*i):(s=0<=o?("horizontal"==t?1==n.rtl?(a="right",l="left"):a="left":"vertical"==t&&(a="bottom",l="top"),-n._min*i):("horizontal"==t?1==n.rtl?a="left":(a="right",l="left"):"vertical"==t&&(a="top"),e+n._min*i),c.css(a,s),l&&c.css(l,""),o*r<0&&("horizontal"==t?c.width(0):"vertical"==t&&c.height(0)),Math.abs(o*i))}function e(){t||n._raiseEvent("0")}var a,l,s,h,n=this,c=m("#"+this.element.id+"Pointer");"horizontal"==this.orientation?(s=i("horizontal",this._valueToPixelsHorizontal,this._chartContainer.width()),setTimeout(function(){c.animate({width:s},n.animationDuration,e)},0)):"vertical"==this.orientation&&(h=i("vertical",this._valueToPixelsVertical,this._chartContainer.height()),setTimeout(function(){c.animate({height:h},n.animationDuration,e)},0))},_checkPercentage:function(t,i){var e=-1;t.indexOf&&(e=t.indexOf("%"));var s,o;return-1!=e?(100-parseFloat(t.slice(0,e)))/2+"%":("horizontal"==this.orientation?s=i.height():"vertical"==this.orientation&&(s=i.width()),(s-((o=t).indexOf&&-1!=t.indexOf("px")?parseFloat(o.slice(0,t.indexOf("px"))):o))/2+"px")},_normaliseValue:function(t){return!t.indexOf||-1==t.indexOf("px")&&-1==t.indexOf("%")?t+"px":t}})}(jqxBaseFramework);