!function(_){_.jqx.jqxWidget("jqxToolBar","",{}),_.extend(_.jqx._jqxToolBar.prototype,{defineInstance:function(){var e={width:"100%",minWidth:null,maxWidth:null,height:35,tools:"",initTools:null,minimizeWidth:200,disabled:!1,rtl:!1,events:["open","close"]};return this===_.jqx._jqxToolBar.prototype||_.extend(!0,this,e),e},createInstance:function(){var e=this;"none"!==e.host.css("display")&&!1!==document.body.contains(e.element)||(e._initiallyHidden=!0),e._toolToWidgetMapping={button:"jqxButton",toggleButton:"jqxToggleButton",dropdownlist:"jqxDropDownList",combobox:"jqxComboBox",input:"jqxInput"},e._toolChanges=[],e.render()},render:function(){var e=this,t=!0;e.element.innerHTML="",0<e.element.className.length&&e._removeClass(e.element,e.toThemeProperty("jqx-widget jqx-fill-state-normal jqx-rc-all jqx-toolbar jqx-fill-state-disabled")),e._setSize(),e._destroyTools(!1),e._toolWidgets&&(t=!1,_(e._minimizeButton).remove(),_(e._minimizePopup).remove()),e._appendMinimizeButton(),e._addClasses(),e._initiallyHidden||e._createTools(),!0===e.disabled&&(e.element.className+=" "+e.toThemeProperty("jqx-fill-state-disabled"),e._disableTools(!0)),e._initiallyHidden||e._minimize(),e._removeHandlers(),e._addHandlers(),!1===t&&0<e._toolChanges.length&&e._restoreChanges()},refresh:function(e){!0!==e&&this.render()},getTools:function(){return this._toolWidgets},destroy:function(){var e=this;e._removeHandlers(),e._destroyTools(),e.host.remove()},_destroyTools:function(e){var t=this;if(!1!==e&&(e=!0),t._toolWidgets)for(var o=t._toolWidgets.length-1;0<=o;o--)t._destroyTool(o,e,!0)},_destroyTool:function(e,t,o){var i=this;e=parseInt(e,10);var l,n,r,a=i._toolWidgets[e];a&&(l=a.type,n=a.tool,r=a.menuTool,"custom"!==l?(n[i._toolToWidgetMapping[l]]("destroy"),r&&r[i._toolToWidgetMapping[l]]("destroy")):(n.remove(),r&&r.remove()),a.menuSeparator&&_(a.menuSeparator).remove(),i._toolWidgets.splice(e,1),i._checkType(l)&&i._refreshButtonGroups(),!0!==o&&i._minimize(),!1!==t&&i._toolChanges.push({action:"destroyTool",index:e}))},destroyTool:function(e){this._destroyTool(e,!0)},addTool:function(e,t,o,i){var l,n,r,a=this,s="first"===t?0:a._toolWidgets.length;a._toolWidgets[s-1]&&(l=a._toolWidgets[s-1].tool,n=a._toolWidgets[s-1].separatorAfterWidget?"|":a._toolWidgets[s-1].type),!0===o?r="|":a._toolWidgets[s+1]&&(r=a._toolWidgets[s+1].type);var d=a._initializeTool(s,e,l,n,r,i,!1);"first"===t?a._toolWidgets.splice(0,0,d):a._toolWidgets.push(d),a._removeHandlers(),a._addHandlers(),a._checkType(e)&&a._refreshButtonGroups(),"first"!==t&&0<a._minimizedTools?a._minimizeTool(!0):a._minimize(),a._toolChanges.push({action:"addTool",type:e,position:t,separator:o,initCallback:i})},_disableTools:function(e){for(var t=0;t<this._toolWidgets.length;t++)this.disableTool(t,e)},disableTool:function(e,t){var o=this;e=parseInt(e,10);var i,l=o._toolWidgets[e];l&&("custom"!==(i=l.type)&&(l.tool[o._toolToWidgetMapping[i]]({disabled:t}),l.menuTool[o._toolToWidgetMapping[i]]({disabled:t})),o._toolChanges.push({action:"disableTool",index:e,disable:t}))},propertyChangedHandler:function(e,t,o,i){if("initTools"!==t&&i!==o)switch(t){case"theme":""!==o&&(e._removeClass(e.element,e.toThemeProperty("jqx-widget-"+o+" jqx-fill-state-normal-"+o+" jqx-rc-all-"+o+" jqx-toolbar-"+o)),e._removeClass(e._minimizePopup,"jqx-popup-"+o+" jqx-fill-state-normal-"+o+" jqx-rc-b-"+o+" jqx-toolbar-minimized-popup-"+o)),e._addClasses(),e._minimizePopup.className+=" "+e.toThemeProperty("jqx-popup jqx-fill-state-normal jqx-rc-b jqx-toolbar-minimized-popup");for(var l=0;l<e._toolWidgets.length;l++){var n=e._toolWidgets[l];"custom"!==n.type&&(n.menuTool&&(n.menuSeparator&&(""!==o&&e._removeClass(n.menuSeparator,"jqx-fill-state-pressed-"+o+" jqx-toolbar-minimized-popup-separator-"+o),n.menuSeparator.className+=" jqx-fill-state-pressed-"+i+" jqx-toolbar-minimized-popup-separator-"+i),n.menuTool[e._toolToWidgetMapping[e._toolWidgets[l].type]]({theme:i})),n.tool[e._toolToWidgetMapping[e._toolWidgets[l].type]]({theme:i}))}_.jqx.utilities.setTheme(o,i,e.host);break;case"width":e.element.style.width=e._toPx(i),e._minimize();break;case"minWidth":e.element.style.minWidth=e._toPx(i),e._minimize();break;case"maxWidth":e.element.style.maxWidth=e._toPx(i),e._minimize();break;case"height":var r,a=!1;if(e.element.style.height=e._toPx(i),"string"==typeof i&&-1!==i.indexOf("%")){if("string"==typeof o&&-1!==o.indexOf("%"))return void e.host.trigger("resize");a=!0}else r=parseInt(i,10),r-=e._getComputedStyle(e.element,"paddingTop")+e._getComputedStyle(e.element,"paddingBottom")+e._getComputedStyle(e.element,"borderTopWidth")+e._getComputedStyle(e.element,"borderBottomWidth");for(var s=0;s<e._toolWidgets.length;s++){var d=e._toolWidgets[s],m=d.type;"button"===m||"toggleButton"===m||"repeatButton"===m||"linkButton"===m?(d.tool[0].style.height=a?"100%":e._toPx(r),d.menuTool&&(d.menuTool[0].style.height=a?"100%":e._toPx(r))):"dropdownlist"!==m&&"combobox"!==m&&"input"!==m||(d.tool[e._toolToWidgetMapping[m]]({height:a?"100%":r-2}),d.menuTool&&d.menuTool[e._toolToWidgetMapping[m]]({height:a?"100%":r-2}))}break;case"tools":e._removeHandlers(),e._destroyTools(),e._createTools(),e._addHandlers(),e._minimize();break;case"minimizeWidth":var p;!0===e._isOpen?(p=e._getComputedStyle(e._minimizePopup,"left")-(i-o),e._minimizePopup.style.width=e._toPx(i),e._minimizePopup.style.left=e._toPx(p)):e._minimizePopup.style.width=e._toPx(i);break;case"rtl":e.render();break;case"disabled":!0===i?(e.element.className+=" "+e.toThemeProperty("jqx-fill-state-disabled"),e._disableTools(!0)):(e._removeClass(e.element,e.toThemeProperty("jqx-fill-state-disabled")),e._disableTools(!1))}},_raiseEvent:function(e,t){void 0===t&&(t={owner:null});var o=this.events[e];t.owner=this;var i=new _.Event(o);return i.owner=this,i.args=t,i.preventDefault&&i.preventDefault(),this.host.trigger(i)},_addClasses:function(){var e="jqx-widget jqx-fill-state-normal jqx-rc-all jqx-toolbar";!0===this.rtl&&(e+=" jqx-toolbar-rtl"),this.element.className+=" "+this.toThemeProperty(e)},_checkType:function(e){return"button"===e||"toggleButton"===e||"repeatButton"===e||"linkButton"===e},_refreshButtonGroups:function(){var d=this;function e(e,t,o,i,l,n){var r=e.tool[0],a=e.menuTool[0],s={add:"",remove:""};s[t]+=" jqx-toolbar-tool-inner-button",s[o]+=" jqx-rc-all",s[i]+=" jqx-rc-l",s[l]+=" jqx-rc-r",""!==s.add&&(r.className+=" "+d.toThemeProperty(_.trim(s.add)),a&&(a.className+=" "+d.toThemeProperty(_.trim(s.add)))),""!==s.remove&&(d._removeClass(r,d.toThemeProperty(_.trim(s.remove))),a&&d._removeClass(a,d.toThemeProperty(_.trim(s.remove)))),r.style.borderLeftWidth=n+"px",a&&(a.style.borderLeftWidth=n+"px")}for(var t=0;t<d._toolWidgets.length;t++){var o,i,l,n,r,a,s,m=d._toolWidgets[t];d._checkType(m.type)&&(l=m.tool,n=m.menuTool,0<t&&(o=d._toolWidgets[t-1].separatorAfterWidget?"|":d._toolWidgets[t-1]),m.separatorAfterWidget?i="|":t<d._toolWidgets.length-1&&(i=d._toolWidgets[t+1]),r=o&&d._checkType(o.type),a=!1===m.separatorAfterWidget&&i&&d._checkType(i.type),r||a?!r&&a?e(m,"remove","remove","add","remove",1):r&&a?e(m,"add","remove","remove","remove",0):r&&!a&&e(m,"remove","remove","remove","add",0):e(m,"remove","add","remove","remove",1),s=d.rtl?"rtl":"ltr",a?(d._removeClass(l[0],d.toThemeProperty("jqx-toolbar-tool-separator-"+s)),d._removeClass(l[0],d.toThemeProperty("jqx-toolbar-tool-no-separator-"+s)),n&&(d._removeClass(n[0],d.toThemeProperty("jqx-toolbar-tool-separator-"+s)),d._removeClass(n[0],d.toThemeProperty("jqx-toolbar-tool-no-separator-"+s)))):m.separatorAfterWidget?(d._removeClass(l[0],d.toThemeProperty("jqx-toolbar-tool-no-separator-"+s)),l[0].className+=" "+d.toThemeProperty("jqx-toolbar-tool-separator-"+s),n&&(d._removeClass(n[0],d.toThemeProperty("jqx-toolbar-tool-no-separator-"+s)),n[0].className+=" "+d.toThemeProperty("jqx-toolbar-tool-separator-"+s))):(d._removeClass(l[0],d.toThemeProperty("jqx-toolbar-tool-separator-"+s)),l[0].className+=" "+d.toThemeProperty("jqx-toolbar-tool-no-separator-"+s),n&&(d._removeClass(n[0],d.toThemeProperty("jqx-toolbar-tool-separator-"+s)),n[0].className+=" "+d.toThemeProperty("jqx-toolbar-tool-no-separator-"+s))))}},_addHandlers:function(){var t=this,e=t.element.id;_.jqx.utilities.resize(t.host,function(){if(t._initiallyHidden)return t._createTools(),t._minimize(),void(t._initiallyHidden=!1);!0===t._isOpen&&(t._minimizePopup.style.display="none",t._isOpen=!1,t._raiseEvent("1")),t._minimize()}),t.addHandler(document,"click.jqxToolbar"+e,function(){!0===t._isOpen&&t._openMinimizePopup()}),t.addHandler(t._minimizeButton,"click.jqxToolbar"+e,function(e){e.stopPropagation(),t._openMinimizePopup()}),t.addHandler(_(".jqx-popup"),"click.jqxToolbar"+e,function(e){-1===e.target.className.indexOf("jqx-window-content")&&e.stopPropagation()})},_removeHandlers:function(){var e=this,t=e.element.id;e.removeHandler(document,"click.jqxToolbar"+t),e.removeHandler(e._minimizeButton,"click.jqxToolbar"+t),e.removeHandler(_(".jqx-popup"),"click.jqxToolbar"+t)},_setSize:function(){var e=this,t=e.element.style;t.width=e._toPx(e.width),t.height=e._toPx(e.height),e.minWidth&&(t.minWidth=e._toPx(e.minWidth)),e.maxWidth&&(t.maxWidth=e._toPx(e.maxWidth))},_createTools:function(){var e=this,t=e.tools.split(" "),o=_.trim(e.tools.replace(/\|/g,""));o=(o=o.replace(/\s+/g," ")).split(" "),e._toolWidgets=[];for(var i=0,l=0;l<o.length;l++){o[l]!==t[l+i]&&i++;var n,r=l+i;e._toolWidgets[l-1]&&(n=e._toolWidgets[l-1].tool);var a=t[r],s=t[r-1],d=t[r+1],m=e.initTools;if(""===a)return!0;var p=e._initializeTool(l,a,n,s,d,m,!0);e._toolWidgets.push(p)}e._minimizePopup.style.display="none",e._minimizePopup.style.visibility="visible"},_initializeTool:function(e,t,o,i,l,n,r){var a,s,d=this,m=d._initializeWidget(t,p,u,o),p=m.tool,u=m.menuTool,_=p[0],h="jqx-toolbar-tool",g=u[0],c=!0;!0===d.rtl&&(h+=" jqx-toolbar-tool-rtl"),d.initTools&&(!(s=!0===r?d.initTools(t,e,p,!1):n(t,p,!1))||!1!==s.minimizable&&!1!==s.menuTool?(!0===r?d.initTools(t,e,u,!0):n(t,u,!0),u&&(a="jqx-toolbar-tool-minimized")):("custom"!==t?u[d._toolToWidgetMapping[t]]("destroy"):u.remove(),!1===s.minimizable&&(c=!1),u=!1));var x,f=!1;u&&(g.style.display="none");var y=d.rtl?"rtl":"ltr",b=["button","toggleButton","repeatButton","linkButton"],T={button:"jqxButton",toggleButton:"jqxToggleButton",repeatButton:"jqxRepeatButton",linkButton:"jqxRepeatButton"};return"|"===l?(f=!0,h+=" jqx-toolbar-tool-separator-"+y,u&&(a+=" jqx-toolbar-tool-separator-"+y),u&&((x=document.createElement("div")).className=d.toThemeProperty("jqx-fill-state-pressed jqx-toolbar-minimized-popup-separator"),d._minimizePopup.appendChild(x))):(-1===b.indexOf(t)||-1!==b.indexOf(t)&&-1===b.indexOf(l))&&(h+=" jqx-toolbar-tool-no-separator-"+y,u&&(a+=" jqx-toolbar-tool-no-separator-"+y)),-1===b.indexOf(i)&&-1!==b.indexOf(t)&&-1!==b.indexOf(l)?!1===d.rtl?(p[T[t]]({roundedCorners:"left"}),u&&u[T[t]]({roundedCorners:"left"})):(p[T[t]]({roundedCorners:"left"}),_.style.borderLeftWidth="0px",u&&(u[T[t]]({roundedCorners:"left"}),g.style.borderLeftWidth="0px")):-1!==b.indexOf(i)&&-1!==b.indexOf(t)&&-1!==b.indexOf(l)?(h+=" jqx-toolbar-tool-inner-button",_.style.borderLeftWidth="0px",u&&(a+=" jqx-toolbar-tool-inner-button",g.style.borderLeftWidth="0px")):-1!==b.indexOf(i)&&-1!==b.indexOf(t)&&-1===b.indexOf(l)&&(!1===d.rtl?(p[T[t]]({roundedCorners:"right"}),_.style.borderLeftWidth="0px",u&&(u[T[t]]({roundedCorners:"right"}),g.style.borderLeftWidth="0px")):(p[T[t]]({roundedCorners:"left"}),u&&u[T[t]]({roundedCorners:"left"}))),_.className+=" "+d.toThemeProperty(h),u&&(g.className+=" "+d.toThemeProperty(a)),{type:t,tool:p,separatorAfterWidget:f,minimizable:c,minimized:!1,menuTool:u,menuSeparator:x}},_initializeWidget:function(e,t,o,i){var l,n,r,a,s,d=this,m=d._toolToWidgetMapping[e],p=!1;if("string"==typeof d.height&&-1!==d.height.indexOf("%")?p=!0:(n=window.getComputedStyle?window.getComputedStyle(d.element):d.element.currentStyle,r=d.element.offsetHeight-(parseInt(n.paddingTop,10)+parseInt(n.paddingBottom,10)+parseInt(n.borderTopWidth,10)+parseInt(n.borderBottomWidth,10))),"custom"!==e&&void 0===d.host[m]){var u=d._toolToWidgetMapping[e].toLowerCase();throw new Error("jqxToolBar: Missing reference to "+u+".js")}switch(e){case"button":case"toggleButton":t=document.createElement("button"),o=document.createElement("button"),l={theme:d.theme,height:p?"100%":r,disabled:d.disabled,rtl:d.rtl};break;case"dropdownlist":case"combobox":t=document.createElement("div"),o=document.createElement("div"),l={theme:d.theme,autoDropDownHeight:!0,height:p?"100%":r-2,disabled:d.disabled,rtl:d.rtl};break;case"input":(t=document.createElement("input")).setAttribute("type","text"),(o=document.createElement("input")).setAttribute("type","text"),l={theme:d.theme,height:p?"100%":r-2,disabled:d.disabled,rtl:d.rtl};break;case"custom":t=document.createElement("div"),o=document.createElement("div")}return a=d.host.children(),s=_(d._minimizePopup).children(),i||1===a.length&&0===s.length?(d.element.appendChild(t),d._minimizePopup.appendChild(o)):(d.element.insertBefore(t,a[1]),d._minimizePopup.insertBefore(o,s[0])),t=_(t),o=_(o),"custom"!==e&&(t[m](l),o[m](l)),{tool:t,menuTool:o}},_appendMinimizeButton:function(){var e=this;e._minimizedTools=0;var t=document.createElement("div"),o="jqx-menu-minimized-button jqx-toolbar-minimized-button",i=document.createElement("div"),l="jqx-popup jqx-fill-state-normal jqx-rc-b jqx-toolbar-minimized-popup";i.setAttribute("id",e.element.id+"Popup"),!0===e.rtl&&(o+=" jqx-toolbar-minimized-button-rtl",l+=" jqx-toolbar-minimized-popup-rtl"),t.className=e.toThemeProperty(o),i.className=e.toThemeProperty(l),e.element.appendChild(t),document.body.appendChild(i),e._isOpen=!1,i.style.width=e._toPx(e.minimizeWidth),e._minimizeButton=t,e._minimizePopup=i},_openMinimizePopup:function(){var e,t,o,i=this;!1===i._isOpen?(t=(e=i.host.offset()).left,!1===i.rtl&&(t+=i.element.offsetWidth-parseInt(i.minimizeWidth,10)-(i._getComputedStyle(i._minimizePopup,"paddingLeft")+i._getComputedStyle(i._minimizePopup,"paddingRight")+i._getComputedStyle(i._minimizePopup,"borderLeftWidth")+i._getComputedStyle(i._minimizePopup,"borderRightWidth"))),o=e.top+i.element.offsetHeight-1,i._minimizePopup.style.left=t+"px",i._minimizePopup.style.top=o+"px",_(i._minimizePopup).slideDown("fast",function(){i._isOpen=!0,i._raiseEvent("0")})):(_(i._minimizePopup).slideUp("fast"),i._isOpen=!1,i._raiseEvent("1"))},_minimize:function(){var e=this,t=0;0<e._minimizedTools&&(t=e._minimizeButton.offsetWidth+e._getComputedStyle(e._minimizeButton,"marginLeft"));var o=e.element.offsetWidth-e._getComputedStyle(e.element,"paddingLeft")-e._getComputedStyle(e.element,"paddingRight")-t-10;if(!(o<0)){for(var i,l,n,r,a=0,s=0;s<e._toolWidgets.length;s++){var d=e._toolWidgets[s].tool;!1===e._toolWidgets[s].minimized?a+=d[0].offsetWidth+e._getComputedStyle(d[0],"marginLeft")+e._getComputedStyle(d[0],"marginRight"):void 0===i&&(l=d[0],r=n=void 0,(r=l.cloneNode(!0)).style.visibility="hidden",r.style.display="block",r.style.position="absolute",document.body.appendChild(r),n=r.offsetWidth+e._getComputedStyle(r,"marginLeft")+e._getComputedStyle(r,"marginRight"),_(r).remove(),i=n)}o<a?(e._minimizeTool(!0),e._minimize()):void 0!==i&&a+i<o&&(e._minimizeTool(!1),e._minimize())}},_minimizeTool:function(e){var t,o,i=this;if(!0===e){for(var l=i._toolWidgets.length-1;0<=l;l--)if(!1!==(t=i._toolWidgets[l]).minimizable&&!1===t.minimized){o=i._getToolValue(t.tool,t.type),t.tool[0].style.display="none",t.menuTool&&(t.menuTool[0].style.display="block",i._setToolValue(o,t.menuTool,t.type)),t.menuSeparator&&(t.menuSeparator.style.display="block"),i._toolWidgets[l].minimized=!0,i._minimizedTools++,1===i._minimizedTools&&(i._minimizeButton.style.display="block");break}}else for(var n=0;n<i._toolWidgets.length;n++)if(!0===(t=i._toolWidgets[n]).minimized){t.menuTool&&(o=i._getToolValue(t.menuTool,t.type),t.menuTool[0].style.display="none"),t.menuSeparator&&(t.menuSeparator.style.display="none"),t.tool.show(),t.menuTool&&i._setToolValue(o,t.tool,t.type),i._toolWidgets[n].minimized=!1,i._minimizedTools--,0===i._minimizedTools&&(i._minimizeButton.style.display="none");break}},_getToolValue:function(e,t){switch(t){case"button":case"custom":i=void 0;break;case"toggleButton":var o=-1!==e[0].className.indexOf("jqx-fill-state-pressed"),i={text:e[0].innerHTML,toggled:o};break;case"dropdownlist":case"combobox":var l=this._toolToWidgetMapping[t];i=e[l]("checkboxes")?e[l]("val"):e[l]("getSelectedIndex");break;case"input":i=e.val()}return i},_setToolValue:function(e,t,o){if(void 0!==e)switch(o){case"button":case"custom":break;case"toggleButton":t[0].innerHTML=e.text,-1!==t[0].className.indexOf("jqx-fill-state-pressed")!==e.toggled&&t.jqxToggleButton("toggle");break;case"dropdownlist":case"combobox":var i=this._toolToWidgetMapping[o];if(t[i]("checkboxes")){if(t[i]("uncheckAll"),""===e)return;for(var l=e.split(","),n=0;n<l.length;n++)t[i]("checkItem",l[n])}else e=t[i]("selectIndex",e);break;case"input":t.val(e)}},_restoreChanges:function(){var o=this;_.each(o._toolChanges,function(e,t){"addTool"===t.action?o.addTool(t.type,t.position,t.separator,t.initCallback):"destroyTool"===t.action?o._destroyTool(t.index):"disableTool"===t.action&&o.disableTool(t.index,t.disable)})},_removeClass:function(e,t){_(e).removeClass(t)},_toPx:function(e){return"number"==typeof e?e+"px":e},_getComputedStyle:function(e,t){var o;return window.getComputedStyle?o=window.getComputedStyle(e):e.currentStyle&&(o=e.currentStyle),"string"==typeof o[t]&&-1===o[t].indexOf("px")?0:parseInt(o[t],10)}})}(jqxBaseFramework);