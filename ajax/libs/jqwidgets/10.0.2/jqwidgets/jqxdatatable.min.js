!function(oe){function V(i,e){return this.owner=i,this.datafield=null,this.displayfield=null,this.text="",this.sortable=!0,this.editable=!0,this.hidden=!1,this.hideable=!0,this.groupable=!0,this.renderer=null,this.cellsRenderer=null,this.columntype=null,this.cellsFormat="",this.align="left",this.cellsalign="left",this.width="auto",this.minwidth=25,this.maxwidth="auto",this.pinned=!1,this.visibleindex=-1,this.filterable=!0,this.filter=null,this.resizable=!0,this.draggable=!0,this.initeditor=null,this.createeditor=null,this.destroyeditor=null,this.geteditorvalue=null,this.autoCellHeight=!0,this.validation=null,this.classname="",this.cellclassname="",this.aggregates=null,this.aggregatesRenderer=null,this.rendered=null,this.exportable=!0,this.nullable=!0,this.columngroup=null,this.columntype="textbox",this.getcolumnproperties=function(){return{nullable:this.nullable,sortable:this.sortable,hidden:this.hidden,groupable:this.groupable,width:this.width,align:this.align,editable:this.editable,minwidth:this.minwidth,maxwidth:this.maxwidth,resizable:this.resizable,datafield:this.datafield,text:this.text,exportable:this.exportable,cellsalign:this.cellsalign,pinned:this.pinned,cellsFormat:this.cellsFormat,columntype:this.columntype,classname:this.classname,cellclassname:this.cellclassname,menu:this.menu}},this.setproperty=function(e,t){var i;this[e]?(i=this[e],this[e]=t,this.owner._columnPropertyChanged(this,e,t,i)):this[e.toLowerCase()]&&(i=this[e.toLowerCase()],this[e.toLowerCase()]=t,this.owner._columnPropertyChanged(this,e.toLowerCase(),t,i))},this._initfields=function(e){if(null!=e){if(oe.jqx.hasProperty(e,"dataField")&&(this.datafield=oe.jqx.get(e,"dataField")),oe.jqx.hasProperty(e,"displayField")?this.displayfield=oe.jqx.get(e,"displayField"):this.displayfield=this.datafield,oe.jqx.hasProperty(e,"columnType")&&(this.columntype=oe.jqx.get(e,"columnType")),oe.jqx.hasProperty(e,"validation")&&(this.validation=oe.jqx.get(e,"validation")),oe.jqx.hasProperty(e,"autoCellHeight")&&(this.autoCellHeight=oe.jqx.get(e,"autoCellHeight")),oe.jqx.hasProperty(e,"text")?this.text=oe.jqx.get(e,"text"):this.text=this.displayfield,oe.jqx.hasProperty(e,"sortable")&&(this.sortable=oe.jqx.get(e,"sortable")),oe.jqx.hasProperty(e,"hidden")&&(this.hidden=oe.jqx.get(e,"hidden")),oe.jqx.hasProperty(e,"groupable")&&(this.groupable=oe.jqx.get(e,"groupable")),oe.jqx.hasProperty(e,"renderer")&&(this.renderer=oe.jqx.get(e,"renderer")),oe.jqx.hasProperty(e,"align")&&(this.align=oe.jqx.get(e,"align")),oe.jqx.hasProperty(e,"cellsAlign")&&(this.cellsalign=oe.jqx.get(e,"cellsAlign")),oe.jqx.hasProperty(e,"cellsFormat")&&(this.cellsFormat=oe.jqx.get(e,"cellsFormat")),oe.jqx.hasProperty(e,"width")&&(this.width=oe.jqx.get(e,"width")),oe.jqx.hasProperty(e,"minWidth")&&(this.minwidth=oe.jqx.get(e,"minWidth")),oe.jqx.hasProperty(e,"maxWidth")&&(this.maxwidth=oe.jqx.get(e,"maxWidth")),oe.jqx.hasProperty(e,"cellsRenderer")&&(this.cellsRenderer=oe.jqx.get(e,"cellsRenderer")),oe.jqx.hasProperty(e,"columnType")&&(this.columntype=oe.jqx.get(e,"columnType")),oe.jqx.hasProperty(e,"pinned")&&(this.pinned=oe.jqx.get(e,"pinned")),oe.jqx.hasProperty(e,"filterable")&&(this.filterable=oe.jqx.get(e,"filterable")),oe.jqx.hasProperty(e,"filter")&&(this.filter=oe.jqx.get(e,"filter")),oe.jqx.hasProperty(e,"resizable")&&(this.resizable=oe.jqx.get(e,"resizable")),oe.jqx.hasProperty(e,"draggable")&&(this.draggable=oe.jqx.get(e,"draggable")),oe.jqx.hasProperty(e,"editable")&&(this.editable=oe.jqx.get(e,"editable")),oe.jqx.hasProperty(e,"initEditor")&&(this.initeditor=oe.jqx.get(e,"initEditor")),oe.jqx.hasProperty(e,"createEditor")&&(this.createeditor=oe.jqx.get(e,"createEditor")),oe.jqx.hasProperty(e,"destroyEditor")&&(this.destroyeditor=oe.jqx.get(e,"destroyEditor")),oe.jqx.hasProperty(e,"getEditorValue")&&(this.geteditorvalue=oe.jqx.get(e,"getEditorValue")),oe.jqx.hasProperty(e,"className")&&(this.classname=oe.jqx.get(e,"className")),oe.jqx.hasProperty(e,"cellClassName")&&(this.cellclassname=oe.jqx.get(e,"cellClassName")),oe.jqx.hasProperty(e,"aggregates")&&(this.aggregates=oe.jqx.get(e,"aggregates")),oe.jqx.hasProperty(e,"aggregatesRenderer")&&(this.aggregatesRenderer=oe.jqx.get(e,"aggregatesRenderer")),oe.jqx.hasProperty(e,"rendered")&&(this.rendered=oe.jqx.get(e,"rendered")),oe.jqx.hasProperty(e,"exportable")&&(this.exportable=oe.jqx.get(e,"exportable")),oe.jqx.hasProperty(e,"nullable")&&(this.nullable=oe.jqx.get(e,"nullable")),oe.jqx.hasProperty(e,"columnGroup")&&(this.columngroup=oe.jqx.get(e,"columnGroup")),!e instanceof String&&"string"!=typeof e)for(var t in e)if(!this.hasOwnProperty(t)&&!this.hasOwnProperty(t.toLowerCase()))throw i.host.remove(),new Error("jqxDataTable: Invalid property name - "+t+".")}},this._initfields(e),this}oe.jqx.jqxWidget("jqxDataTable","",{}),oe.extend(oe.jqx._jqxDataTable.prototype,{defineInstance:function(){var e={altRows:!1,aggregatesHeight:34,autoShowLoadElement:!0,autoRowHeight:!0,columnsHeight:36,columns:[],columnGroups:null,columnsResize:!1,columnsReorder:!1,dataview:null,disabled:!1,editable:!1,editSettings:{saveOnPageChange:!0,saveOnBlur:!0,saveOnSelectionChange:!0,cancelOnEsc:!0,saveOnEnter:!0,editSingleCell:!1,editOnDoubleClick:!0,editOnF2:!0},enableHover:!0,enableBrowserSelection:!1,filterHeight:35,filterable:!1,filterMode:"default",groupsRenderer:null,groups:new Array,headerZIndex:359,height:null,handleKeyboardNavigation:null,indentWidth:25,initRowDetails:!1,loadingErrorMessage:"The data is still loading and you cannot set a property or call a method. You can do that once the data binding is completed. jqxDataTable raises the 'bindingComplete' event when the binding is completed.",localization:null,pagerHeight:40,pageSize:10,pageSizeOptions:["5","10","20"],pageable:!1,pagerPosition:"bottom",pagerMode:"default",pageSizeMode:"default",pagerButtonsCount:5,pagerRenderer:null,ready:null,rendertoolbar:null,rowDetails:!1,renderStatusBar:null,rendered:null,rendering:null,rtl:!1,sortable:!1,showtoolbar:!1,showstatusbar:!1,statusBarHeight:34,serverProcessing:!1,selectionMode:"multiplerows",scrollBarSize:oe.jqx.utilities.scrollBarSize,touchScrollBarSize:oe.jqx.utilities.touchScrollBarSize,showAggregates:!1,showHeader:!0,maxHeight:999999,maxWidth:999999,autoBind:!0,beginEdit:null,endEdit:null,autokoupdates:!0,columnsVirtualization:!1,exportSettings:{columnsHeader:!0,hiddenColumns:!1,serverURL:null,characterSet:null,collapsedRecords:!1,recordsInView:!0,fileName:"jqxDataTable"},source:{beforeprocessing:null,beforesend:null,loaderror:null,localdata:null,data:null,datatype:"array",datafields:[],url:"",root:"",record:"",id:"",totalrecords:0,recordstartindex:0,recordendindex:0,loadallrecords:!0,sortcolumn:null,sortdirection:null,sort:null,filter:null,sortcomparer:null},toolbarHeight:34,tableZIndex:369,_updating:!1,touchmode:"auto",width:null,that:this,incrementalSearch:!0,events:["bindingComplete","sort","filter","pageChanged","pageSizeChanged","rowClick","rowDoubleClick","cellValueChanged","rowBeginEdit","rowEndEdit","rowSelect","rowUnselect","rowCheck","rowUncheck","columnResized","columnReordered","rowExpand","rowCollapse","cellBeginEdit","cellEndEdit"]};return this===oe.jqx._jqxDataTable.prototype||(oe.extend(!0,this,e),this.that=this),e},createInstance:function(e){var t,i,r,s=this;if(13!=oe.jqx.utilities.scrollBarSize&&(s.scrollBarSize=oe.jqx.utilities.scrollBarSize),s.isMaterialized()&&(i=(t=window.getComputedStyle(s.element)).getPropertyValue("--jqx-grid-column-height"),r=t.getPropertyValue("--jqx-scrollbar-size"),i&&36===this.columnsHeight&&(s.columnsHeight=parseInt(i))),r&&(s.scrollbarsize=r,oe.jqx.utilities.scrollBarSize=r),"table"==s.element.nodeName.toLowerCase()||0<oe(s.element).children("table").length){var o=s.host.find("tbody tr"),l=s.host.find("th"),a=new Array;0===l.length&&(l=o[0],o.splice(0,1)),s.localizestrings&&(s.localizestrings(),null!=s.localization&&s.localizestrings(s.localization,!1));for(var n=[],d=0;d<o.length;d++){for(var h=o[d],c={},u=0;u<l.length;u++){var g,p,f=oe.trim(oe(l[u]).text());0===d&&(g={name:f},s.columns[u]&&s.columns[u].cellsFormat&&(-1==(p=s.columns[u].cellsFormat.toLowerCase()).indexOf("p")&&-1==p.indexOf("c")&&-1==p.indexOf("n")&&-1==p.indexOf("f")||(g.type="number"),-1==p.indexOf("d")&&-1==p.indexOf("m")&&-1==p.indexOf("y")&&-1==p.indexOf("h")&&-1==p.indexOf("m")&&-1==p.indexOf("s")&&-1==p.indexOf("t")||(g.type="date")),a.push(g));var m,v=oe(h).find("td:eq("+u+")");a[u].type?(m=s.getvaluebytype(oe.trim(v.text()),a[u]),c[f]=m):c[f]=oe.trim(v.text())}n[n.length]=c}s.host.wrap("<div></div>");var w=s.host.parent(),y=s.host.data();y.jqxDataTable.host=w,y.jqxDataTable.element=w[0],s.host.parent()[0].id=s.element.id;try{s.host.parent()[0].style=s.element.style}catch(e){}s.element=w[0],s.host=w,s.host.data(y);var x={dataFields:a,localdata:n,datatype:"array"},b=new oe.jqx.dataAdapter(x);s.source=b}s.source&&!s.source.dataBind&&(s.source=new oe.jqx.dataAdapter(s.source));var _=s.source._source.datafields;_&&0<_.length&&(s._camelCase=void 0!==s.source._source.dataFields,s.selectionMode=s.selectionMode.toLowerCase()),null==s.host.attr("tabindex")&&s.host.attr("tabindex","0"),s.host.attr("role","grid"),s.host.attr("align","left"),s.host.addClass(s.toTP("jqx-datatable")),s.host.addClass(s.toTP("jqx-grid")),s.host.addClass(s.toTP("jqx-reset")),s.host.addClass(s.toTP("jqx-rc-all")),s.host.addClass(s.toTP("jqx-widget")),s.host.addClass(s.toTP("jqx-widget-content")),s._testmodules()||(s.render(!0),oe.jqx.utilities.resize(s.host,function(){var e=oe(window).width(),t=oe(window).height(),i=s.host.width(),r=s.host.height();s._lastHostWidth==i&&s._lastHostHeight==r||s._updatesize(s._lastHostWidth!=i,s._lastHostHeight!=r),s._lastWidth=e,s._lastHeight=t,s._lastHostWidth=i,s._lastHostHeight=r}))},getvaluebytype:function(e,t){var i,r,s=e;if(null==e)return e;if(","==this.gridlocalization.decimalseparator&&0<=e.indexOf(this.gridlocalization.decimalseparator)&&(e=e.replace(this.gridlocalization.decimalseparator,".")),0<=e.indexOf(this.gridlocalization.currencysymbol)&&(e=e.replace(this.gridlocalization.currencysymbol,"")),0<=e.indexOf(this.gridlocalization.percentagesymbol)&&(e=e.replace(this.gridlocalization.percentagesymbol,"")),oe.isArray(e)&&"array"!=t.type){for(var o=0;o<e.length;o++)e[o]=this.getvaluebytype(e[o],t);return e}return"date"==t.type?"NaN"==e?e="":(i=new Date(e),"string"==typeof e&&(!t.format||null!=(r=oe.jqx.dataFormat.parsedate(e,t.format))&&(i=r)),null==(e=("NaN"==i.toString()||"Invalid Date"==i.toString())&&oe.jqx.dataFormat?oe.jqx.dataFormat.tryparsedate(e):i)&&(e=s)):"float"==t.type||"number"==t.type||"decimal"==t.type?"NaN"==e?e="":(e=parseFloat(e),isNaN(e)&&(e=s)):"int"==t.type||"integer"==t.type?(e=parseInt(e),isNaN(e)&&(e=s)):"bool"!=t.type&&"boolean"!=t.type||(null!=e&&null!=e.toLowerCase&&("false"==e.toLowerCase()?e=!1:"true"==e.toLowerCase()&&(e=!0)),e=1==e||(0!=e||""===e)&&""),e},_builddataloadelement:function(){this.dataloadelement&&this.dataloadelement.remove(),this.dataloadelement=oe('<div class="jqx-datatable-load" style="z-index: 99998; background-color:rgba(50,50,50,0.1); overflow: hidden; position: absolute;"></div>');var e,t,i=oe('<div style="z-index: 99999; margin-left: -66px; left: 50%; top: 50%; margin-top: -24px; position: relative; width: 100px; height: 33px; padding: 5px; font-family: verdana; font-size: 12px; color: #767676; border-color: #898989; border-width: 1px; border-style: solid; background: #f6f6f6; border-collapse: collapse;"><div style="float: left;"><div style="float: left; overflow: hidden; width: 32px; height: 32px;" class="jqx-grid-load"/><span style="margin-top: 10px; float: left; display: block; margin-left: 5px;" >'+this.gridlocalization.loadtext+"</span></div></div>");i.addClass(this.toTP("jqx-rc-all")),this.dataloadelement.addClass(this.toTP("jqx-rc-all")),i.addClass(this.toTP("jqx-fill-state-normal")),this.dataloadelement.append(i),this.dataloadelement.width(this.width),this.dataloadelement.height(this.height),this.host.prepend(this.dataloadelement),""!=this.source._source.url&&(e=!1,"auto"!==this.height&&null!==this.height&&!this.autoheight||999999!=this.maxHeight||(e=!0),e?(this.host.height(100),this.dataloadelement.height(100)):(this.host.height(this.height),this.dataloadelement.height(this.height)),t=!1,"auto"!==this.width&&null!==this.width&&!this.autoWidth||(t=!0),t?(this.host.width(300),this.dataloadelement.width(300)):(this.host.width(this.width),this.dataloadelement.width(this.width)))},_measureElement:function(e){var t=oe("<span style='visibility: hidden; white-space: nowrap;'>measure Text</span>");t.addClass(this.toTP("jqx-widget")),oe(document.body).append(t),"cell"==e?this._cellheight=t.height():this._columnheight=t.height(),t.remove()},_testmodules:function(){function t(){""!=i.length&&(i+=",")}var i="",r=this;if(this.host.jqxScrollBar||(t(),i+=" jqxscrollbar.js"),this.host.jqxButton||(t(),i+=" jqxbuttons.js"),oe.jqx.dataAdapter||(t(),i+=" jqxdata.js"),""!=i||this.editable||this.filterable||this.pageable){var s=[];if((this.filterable&&"simple"!=this.filterMode||"advanced"==this.pagerMode&&this.pageable)&&function(e){switch(e){case"checkbox":r.host.jqxCheckBox||s.checkbox||(s.checkbox=!0,t(),i+=" jqxcheckbox.js");break;case"dropdownlist":r.host.jqxDropDownList||s.dropdownlist?r.host.jqxListBox||s.listbox||(t(),s.listbox=!0,i+=" jqxlistbox.js"):(t(),s.dropdownlist=!0,i+=" jqxdropdownlist.js(requires: jqxlistbox.js)")}}("dropdownlist"),""!=i)throw new Error("jqxDataTable: Missing references to the following module(s): "+i)}return!1},focus:function(){try{this.wrapper.focus(),this.host.focus();var e=this;setTimeout(function(){e.wrapper.focus(),e.host.focus()},25),this.focused=!0}catch(e){}},hiddenParent:function(){return oe.jqx.isHidden(this.host)},isBindingCompleted:function(){return!this._loading},_updatesize:function(e,t){var i,r,s,o;this._loading||(r=(i=this).host.width(),s=i.host.height(),i._oldWidth||(i._oldWidth=r),i._oldHeight||(i._oldHeight=s),null!=i._resizeTimer&&(clearTimeout(i._resizeTimer),i._resizeTimer=null),(o=function(){i._resizeTimer&&clearTimeout(i._resizeTimer),i.resizingGrid=!0,oe.jqx.isHidden(i.host)||(i._updatecolumnwidths(),i.refresh(),i._oldWidth=r,i._oldHeight=s,i.resizingGrid=!1)})(),i._resizeTimer=setTimeout(function(){var e=i.host.width(),t=i.host.height();i._oldWidth==e&&i._oldHeight==t||o()},300))},resize:function(e,t){null!=e&&(this.width=e),null!=t&&(this.height=t),this._updatecolumnwidths(),this.refresh()},isTouchDevice:function(){if(null!=this.touchDevice)return this.touchDevice;var e=oe.jqx.mobile.isTouchDevice();return this.touchDevice=e,1==this.touchmode?(e=!0,oe.jqx.mobile.setMobileSimulator(this.table[0]),this.touchDevice=e):0==this.touchmode&&(e=!1),e&&(this.touchDevice=!0,this.host.addClass(this.toThemeProperty("jqx-touch")),this.host.find("jqx-widget-content").addClass(this.toThemeProperty("jqx-touch")),this.host.find("jqx-widget-header").addClass(this.toThemeProperty("jqx-touch")),this.scrollBarSize=this.touchScrollBarSize),e},toTP:function(e){return this.toThemeProperty(e)},localizestrings:function(e,t){if(this._cellscache=new Array,oe.jqx.dataFormat&&oe.jqx.dataFormat.cleardatescache(),this._loading)throw new Error("jqxDataTable: "+this.loadingErrorMessage);if(null!=e){for(var i in e)i.toLowerCase()!==i&&(e[i.toLowerCase()]=e[i]);for(var r=["pagergotopagestring","pagershowrowsstring","pagerrangestring","pagernextbuttonstring","pagerpreviousbuttonstring","pagerfirstbuttonstring","pagerlastbuttonstring","toppagerstring","firstDay","days","months","AM","PM","patterns","percentsymbol","currencysymbol","currencysymbolposition","decimalseparator","thousandsseparator","filterapplystring","filteraddnew","filtercancelstring","filterclearstring","filterstring","filterstringcomparisonoperators","filternumericcomparisonoperators","filterdatecomparisonoperators","filterbooleancomparisonoperators","emptydatastring","filterselectstring","todaystring","clearstring","validationstring","loadtext","filtersearchstring","loadingErrorMessage"],s=0;s<r.length;s++){var o=r[s];void 0!==e[o]&&(this.gridlocalization[o]=e[o])}e.loadingErrorMessage&&(this.loadingErrorMessage=e.loadingErrorMessage),!1!==t&&(this._builddataloadelement(),oe(this.dataloadelement).css("visibility","hidden"),oe(this.dataloadelement).css("display","none"))}else this.gridlocalization={"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",d3:"dd-MMMM-yyyy",d4:"dd-MM-yy",d5:"H:mm",d6:"HH:mm",d7:"HH:mm tt",d8:"dd/MMMM/yyyy",d9:"MMMM-dd",d10:"MM-dd",d11:"MM-dd-yyyy"},percentsymbol:"%",currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:",",pagergotopagestring:"Go to page:",pagershowrowsstring:"Show rows:",pagerrangestring:" of ",pagerpreviousbuttonstring:"previous",pagernextbuttonstring:"next",pagerfirstbuttonstring:"first",pagerlastbuttonstring:"last",filterapplystring:"Apply",filtercancelstring:"Cancel",filterclearstring:"Clear Filter",filterstring:"advanced",filtersearchstring:"Search:",filterstringcomparisonoperators:["empty","not empty","contains","contains(match case)","does not contain","does not contain(match case)","starts with","starts with(match case)","ends with","ends with(match case)","equal","equal(match case)","null","not null"],filternumericcomparisonoperators:["equal","not equal","less than","less than or equal","greater than","greater than or equal","null","not null"],filterdatecomparisonoperators:["equal","not equal","less than","less than or equal","greater than","greater than or equal","null","not null"],filterbooleancomparisonoperators:["equal","not equal"],validationstring:"Entered value is not valid",emptydatastring:"No data to display",filterselectstring:"Select Filter",loadtext:"Loading...",clearstring:"Clear",todaystring:"Today",loadingErrorMessage:"The data is still loading and you cannot set a property or call a method. You can do that once the data binding is completed. jqxDataTable raises the 'bindingComplete' event when the binding is completed."}},_updateScrollbars:function(e){var t=!1;"auto"!==this.width&&null!==this.width&&!this.autowidth||999999!=this.maxWidth||(t=!0);var i,r=parseInt(this.scrollBarSize),s=this.table?this.table.height():0,o=0,l="inherit",a=this.vScrollBar[0].style.visibility;this.hScrollBar[0].style.visibility;i=e||this.host.height(),this.columnGroups?i-=this.showHeader?this.columnsheader.height():0:i-=this.showHeader?this.columnsHeight:0,this.filterable&&(i-=this.filter.height()),this.pageable&&(i-=this.pagerHeight,"both"===this.pagerPosition&&(i-=this.pagerHeight)),this.showtoolbar&&(i-=this.toolbarHeight),this.showstatusbar&&(i-=this.statusBarHeight),this.showAggregates&&(i-=this.aggregatesHeight);var n,d=!1;"auto"!==this.height&&null!==this.height&&!this.autoheight||999999!=this.maxHeight||(d=!0),!d&&i<s&&(0<this.source.records.length||this.source.hierarchy&&0<this.source.hierarchy.length)?(this.vScrollBar[0].style.visibility=l,o=4+parseInt(r),this.vScrollBar.jqxScrollBar({max:s-i})):this.vScrollBar[0].style.visibility="hidden",a!=this.vScrollBar[0].style.visibility&&(this._updatecolumnwidths(),s!=(n=this.table.height())&&(s=n,!d&&i<s&&(0<this.source.records.length||this.source.hierarchy&&0<this.source.hierarchy.length)&&(this.vScrollBar[0].style.visibility=l,o=4+parseInt(r),this.vScrollBar.jqxScrollBar({max:s-i})))),0==this.scrollBarSize&&(o=0);var h=this.table?this.table.width():0;3<h&&(h-=3);var c,u,g=parseInt(this.host.css("border-left-width"))+parseInt(this.host.css("border-right-width")),p=g+this.host.width()-o;p<h&&!t?(this.hScrollBar[0].style.visibility=l,this.hScrollBar.jqxScrollBar({max:h-p}),o=4+parseInt(r),0==r&&(o=0),d||(i-o+4<s&&(0<this.source.records.length||this.source.hierarchy&&0<this.source.hierarchy.length)&&(this.hScrollBar.jqxScrollBar({max:g+h-p}),c="hidden"===this.vScrollBar[0].style.visibility,this.vScrollBar[0].style.visibility=l,this._updatecolumnwidths(),c&&this.hScrollBar.jqxScrollBar({max:h-p+o+g}),3<(u=this.table?this.table.width():0)&&(u-=3),u!=h&&u<p&&(this.hScrollBar.jqxScrollBar({max:g+u-p}),this.hScrollBar[0].style.visibility="hidden",o=0)),this.vScrollBar.jqxScrollBar({max:s-i+o}))):this.hScrollBar[0].style.visibility="hidden",0===this.source.records.length&&this.source.hierarchy&&0===this.source.hierarchy.length&&(this.vScrollBar[0].style.visibility="hidden",this.bottomRight[0].style.visibility="hidden"),"hidden"==this.vScrollBar[0].style.visibility&&0!=this.vScrollInstance.value&&this.vScrollInstance.setPosition(0)},_measureElementWidth:function(e){var t=oe("<span style='visibility: hidden; white-space: nowrap;'>"+e+"</span>");t.addClass(this.toTP("jqx-widget")),t.addClass(this.toTP("jqx-grid")),t.addClass(this.toTP("jqx-grid-column-header")),t.addClass(this.toTP("jqx-widget-header")),oe(document.body).append(t);var i=t.outerWidth()+20;return t.remove(),i},_arrangeAutoHeight:function(e){if(e=e||0,"auto"===this.height||null===this.height||this.autoheight){var t,i,r=this.table.height(),s=0;return this.columnGroups?s+=this.showHeader?this.columnsheader.height():-1:s+=this.showHeader?this.columnsHeight:-1,s+=this.showstatusbar?this.statusBarHeight:0,s+=this.showAggregates?this.aggregatesHeight:0,s+=this.showtoolbar?this.toolbarHeight:0,s+=this.pageable?this.pagerHeight:0,"both"===this.pagerPosition&&(s+=this.pageable?this.pagerHeight:0),s+=r,this.filterable&&(t=this.filter.find(".filterrow"),i=1,0<this.filter.find(".filterrow-hidden").length&&(i=0),s+=this.filterHeight-1+this.filterHeight*t.length*i),s+e>this.maxHeight?this.host.height(this.maxHeight):this.host.height(s+e),!0}return!1},_arrangeAutoWidth:function(e){if(e=e||0,"auto"===this.width||null===this.width||this.autowidth){for(var t=0,i=0;i<this.columns.records.length;i++){var r=this.columns.records[i].width;this.columns.records[i].hidden||(t+="auto"==r?r=this._measureElementWidth(this.columns.records[i].text):r)}var s=t;return s+e>this.maxWidth?this.host.width(this.maxWidth):this.host.width(s+e),!0}return!1},_measureTopAndHeight:function(){var e,t,i,r=this.host.height(),s=0;return this.showtoolbar&&(s+=this.toolbarHeight,r-=parseInt(this.toolbarHeight)),this.filterable&&(e=this.filter.find(".filterrow"),t=1,0<this.filter.find(".filterrow-hidden").length&&(t=0),s+=this.filterHeight,r-=parseInt(this.filterHeight),i=1==t?e.length:0,s+=this.filterHeight*i,r-=this.filterHeight*i),this.pageable&&"bottom"!=this.pagerPosition&&(s+=parseInt(this.pagerHeight)+1,r>this.pagerHeight&&"both"===this.pagerPosition&&(r-=parseInt(this.pagerHeight))),{top:s,height:r}},_arrange:function(){var e,t,i,r,s,o,l,a,n,d,h,c,u,g,p,f,m,v,w,y,x,b;this.table&&(this._arrangeAutoHeight(),this._arrangeAutoWidth(),h=this.host.width(),e=g=this.host.height(),this.pageable?"bottom"===this.pagerPosition?(this.toppager[0].style.visibility="hidden",this.pager[0].style.visibility="inherit"):"both"===this.pagerPosition?(this.toppager[0].style.visibility="inherit",this.pager[0].style.visibility="inherit"):"top"===this.pagerPosition&&(this.toppager[0].style.visibility="inherit",this.pager[0].style.visibility="hidden"):(this.toppager[0].style.visibility="hidden",this.pager[0].style.visibility="hidden"),u=0,this.showtoolbar?(this.toolbar.width(h),this.toolbar.height(this.toolbarHeight-1),this.toolbar.css("top",0),u+=this.toolbarHeight,g-=parseInt(this.toolbarHeight)):this.toolbar[0].style.height="0px",this.filterable&&(this.filter.width(h),this.filter.css("top",u),t=this.filter.find(".filterrow"),i=1,0<this.filter.find(".filterrow-hidden").length&&(i=0),this.filter.height(this.filterHeight-1+this.filterHeight*t.length*i),u+=this.filterHeight,g-=parseInt(this.filterHeight),r=1==i?t.length:0,u+=this.filterHeight*r,g-=this.filterHeight*r),this.showstatusbar?(this.statusbar.width(this.table?Math.max(h,this.table.width()):h),this.statusbar.height(this.statusBarHeight-1)):this.statusbar[0].style.height="0px",this.showAggregates?this.aggregates.height(this.aggregatesHeight-1):this.aggregates[0].style.height="0px",this.pageable&&"bottom"!=this.pagerPosition?(this.toppager[0].style.width=h+"px",this.toppager[0].style.height=parseInt(this.pagerHeight)+"px",this.toppager[0].style.top=parseInt(u)+"px",u+=parseInt(this.pagerHeight)+1,g>this.pagerHeight&&(g-=parseInt(this.pagerHeight))):(this.toppager[0].style.width!=h+"px"&&(this.toppager[0].style.width=parseInt(h)+"px"),this.toppager[0].style.height!=this.pagerHeight+"px"&&(this.toppager[0].style.height=parseInt(this.pagerHeight)+"px"),this.toppager[0].style.top!=u+"px"&&(this.toppager[0].style.top=u+"px"),s=u+("bottom"!=this.pagerPosition?this.pagerHeight:0)+"px",this.content[0].style.top!=s&&(this.content[0].style.top=u+this.pagerHeight+"px")),this._updateScrollbars(e),o=parseInt(this.scrollBarSize),l=2,a=0,"hidden"!=this.vScrollBar[0].style.visibility&&(a=o+4),"hidden"!=this.hScrollBar[0].style.visibility&&(l=o+4+2),0==o&&(l=a=0),this.showAggregates&&("hidden"===this.hScrollBar[0].style.visibility?this.aggregates.width(this.table?Math.max(h,this.table.width())+4:h):this.aggregates.width("auto")),"hidden"==this.vScrollBar[0].style.visibility&&"hidden"==this.hScrollBar[0].style.visibility||(n=this._arrangeAutoHeight(l-2),d=this._arrangeAutoWidth(a+1),(n||d)&&(h=this.host.width(),this.toppager[0].style.width=parseInt(h)+"px",this.toolbar[0].style.width=parseInt(h)+"px",this.statusbar[0].style.width=parseInt(h)+"px",this.filter[0].style.width=parseInt(h)+"px"),n&&(u=(c=this._measureTopAndHeight()).top,g=c.height)),p=0,this.pageable&&(p=this.pagerHeight,"top"!=this.pagerPosition&&(l+=this.pagerHeight)),this.showAggregates&&(l+=this.aggregatesHeight,p+=this.aggregatesHeight),this.showstatusbar&&(l+=this.statusBarHeight,p+=this.statusBarHeight),this.hScrollBar[0].style.height!=o+"px"&&(this.hScrollBar[0].style.height=parseInt(o)+"px"),this.hScrollBar[0].style.top==u+g-4-o-p+"px"&&"0px"==this.hScrollBar[0].style.left||(this.hScrollBar[0].style.top=u+g-4-o-p-1+"px",this.hScrollBar[0].style.left="0px"),f=this.hScrollBar[0].style.width,v=m=!1,0==a?f!=h-2+"px"&&(this.hScrollBar[0].style.width=h-2+"px",m=!0):f!=h-o-4+"px"&&(this.hScrollBar[0].style.width=h-o-4+"px",m=!0),this.vScrollBar[0].style.width!=o+"px"&&(this.vScrollBar[0].style.width=o+"px",v=!0),this.vScrollBar[0].style.height!=parseInt(g)-l+"px"&&(this.vScrollBar[0].style.height=parseInt(g)-l+"px",v=!0),this.vScrollBar[0].style.left==parseInt(h)-parseInt(o)-4+"px"&&this.vScrollBar[0].style.top==u+"px"||(this.vScrollBar[0].style.top=u+"px",this.vScrollBar[0].style.left=parseInt(h)-parseInt(o)-4+"px"),this.rtl&&(this.vScrollBar.css({left:"0px",top:u}),"hidden"!=this.vScrollBar.css("visibility")&&this.hScrollBar.css({left:o+2})),(w=this.vScrollInstance).disabled=this.disabled,(y=this.hScrollInstance).disabled=this.disabled,m&&y.refresh(),v&&w.refresh(),(x=function(e){"hidden"!=e.vScrollBar[0].style.visibility&&"hidden"!=e.hScrollBar[0].style.visibility?(e.bottomRight[0].style.visibility="inherit",e.bottomRight[0].style.left=1+parseInt(e.vScrollBar.css("left"))+"px",e.bottomRight[0].style.top=parseInt(e.hScrollBar.css("top"))+"px",e.rtl&&e.bottomRight.css("left","0px"),e.bottomRight[0].style.width=parseInt(o)+3+"px",e.bottomRight[0].style.height=parseInt(o)+4+"px",e.showAggregates&&(e.bottomRight.css("z-index",99),e.bottomRight.height(parseInt(o)+4+e.aggregatesHeight),e.bottomRight.css({top:parseInt(e.hScrollBar.css("top"))-e.aggregatesHeight}))):e.bottomRight[0].style.visibility="hidden"})(this),this.content[0].style.width!=h-a+"px"&&(this.content[0].style.width=h-a+"px"),this.content[0].style.height!=g-l+3+"px"&&(this.content[0].style.height=g-l+3+"px"),this.content[0].style.top!=u+"px"&&(this.content[0].style.top=parseInt(u)+"px"),this.rtl&&(this.content.css("left",a),this.filter&&0<this.filter.children().length&&oe(this.filter.children()).css("left",a),!this.table||(b=this.table.width())<h-a&&(this.content.css("left",h-b+2),this.filter&&0<this.filter.children().length&&oe(this.filter.children()).css("left",h-b+2))),this.showAggregates&&(this.aggregates.css("top",u+g-this.aggregatesHeight-(this.pageable?this.pagerHeight:0)-(this.showstatusbar?this.statusBarHeight+1:0)),this.rtl&&this.aggregates.css("left","0px"),"hidden"!=this.hScrollBar.css("visibility")&&(this.hScrollBar.css({top:u+g-4-o-p+this.aggregatesHeight+"px"}),this.aggregates.css("top",1+u+g-o-5-this.aggregatesHeight-(this.pageable?this.pagerHeight:0)-(this.showstatusbar?this.statusBarHeight+1:0))),x(this)),this.showstatusbar&&(this.statusbar.css("top",u+g-this.statusBarHeight-(this.pageable?this.pagerHeight:0)),this.rtl&&("hidden"==this.hScrollBar.css("visibility")?this.statusbar.css("left",this.content.css("left")):this.statusbar.css("left","0px"))),this.pageable?(this.pager[0].style.width=h+"px",this.pager[0].style.height=this.pagerHeight+"px",this.pager[0].style.top=parseInt(u)+parseInt(g)-parseInt(this.pagerHeight)-1+"px"):this.pager[0].style.height="0px",this.vScrollBar[0].style.zIndex=this.tableZIndex+this.headerZIndex+10+this.columns.records.length,this.hScrollBar[0].style.zIndex=this.tableZIndex+this.headerZIndex+10+this.columns.records.length,h!=parseInt(this.dataloadelement[0].style.width)&&(this.dataloadelement[0].style.width=this.element.style.width),g!=parseInt(this.dataloadelement[0].style.height)&&(this.dataloadelement[0].style.height=this.element.style.height),this._hostwidth=h)},scrollOffset:function(e,t){if(0==arguments.length||null!=e&&"object"==typeof e&&!e.top)return{left:this.hScrollBar.jqxScrollBar("value"),top:this.vScrollBar.jqxScrollBar("value")};null!=e&&"object"==typeof e&&(t=e.left,e=e.top),null!=e&&null!=t&&null!=e&&null!=t&&(this.vScrollBar.jqxScrollBar("setPosition",e),this.hScrollBar.jqxScrollBar("setPosition",t))},scrollleft:function(e){null!=e&&null!=e&&"hidden"!=this.hScrollBar.css("visibility")&&this.hScrollBar.jqxScrollBar("setPosition",e)},scrolltop:function(e){null!=e&&null!=e&&"hidden"!=this.vScrollBar.css("visibility")&&this.vScrollBar.jqxScrollBar("setPosition",e)},beginUpdate:function(){this._updating=!0,this._datachanged=!1},endUpdate:function(e){(this._updating=!1)!==e&&(this._rendercolumnheaders(),this.refresh())},updating:function(){return this._updating},databind:function(e,y,x){var b,_,t,i;!0!==this.loadingstate&&(b=window,"block"==this.host.css("display")&&(this.autoShowLoadElement?(oe(this.dataloadelement).css("visibility","visible"),oe(this.dataloadelement).css("display","block"),this.dataloadelement.width(this.host.width()),this.dataloadelement.height(this.host.height())):(oe(this.dataloadelement).css("visibility","hidden"),oe(this.dataloadelement).css("display","none"))),_=this,null==e&&(e={}),null!=e.sortcomparer&&null!=e.sortcomparer||(e.sortcomparer=null),null!=e.filter&&null!=e.filter||(e.filter=null),null!=e.sort&&null!=e.sort||(e.sort=null),null!=e.data&&null!=e.data||(e.data=null),null!=e&&(null!=e._source?e._source.url:e.url),this.dataview=this.dataview||new oe.jqx.dataView,this.dataview.pageable=this.pageable,this.dataview.grid=this,_.initializedcall||(e._source&&this.sortable&&(null!=e._source.sortcolumn&&(this.sortcolumn=e._source.sortcolumn,this.source.sortcolumn=this.sortcolumn,this.dataview.sortfield=e._source.sortcolumn,e._source.sortcolumn=null),null!=e._source.sortdirection&&(this.dataview.sortfielddirection=e._source.sortdirection,i="a"==(t=e._source.sortdirection)||"asc"==t||"ascending"==t||1==t,this.sortdirection=null!=t?{ascending:i,descending:!i}:{ascending:!1,descending:!1})),this.pageable&&e._source&&(null!=e._source.pagenum&&(this.dataview.pagenum=e._source.pagenum),null!=e._source.pagesize?(this.pageSize=e._source.pagesize,this.dataview.pagesize=e._source.pagesize):(this.dataview.pagesize=e._source.pagesize,null==this.dataview.pagesize&&(this.dataview.pagesize=this.pageSize))),this.sortable&&(e.sortcolumn&&(this.dataview.sortfield=e.sortcolumn),e.sortdirection&&(this.dataview.sortfielddirection=e.sortdirection))),this._loading=!0,this.dataview.update=function(e){_._loading=!1,_.rowsByKey=new Array;var t,i,r,s,o,l=_.source._source.datafields;_.groups&&0<_.groups.length&&(t=Object.prototype.toString,i=_.groups[0],Object.prototype.toString="function"==typeof i?i:function(){return this[i]},_.source.records.sort||(r=new Array,s=0,o={},oe.each(o,function(){r[0+s++]=this}),o=r),_.source.records.sort(function(e,t){if(void 0===e&&(e=null),void 0===t&&(t=null),null===e&&null===t)return 0;if(null===e&&null!==t)return-1;if(null!==e&&null===t)return 1;var i=0,r=0;if(e&&e.uid&&(i=e.uid),t&&t.uid&&(r=t.uid),e=e.toString(),t=t.toString(),oe.jqx.dataFormat.isNumber(e)&&oe.jqx.dataFormat.isNumber(t))return e<t?-1:t<e?1:0;if(oe.jqx.dataFormat.isDate(e)&&oe.jqx.dataFormat.isDate(t))return e<t?-1:t<e?1:0;oe.jqx.dataFormat.isNumber(e)||oe.jqx.dataFormat.isNumber(t)||(e=String(e).toLowerCase(),t=String(t).toLowerCase());try{if(e<t)return-1;if(t<e)return 1}catch(e){}if("number"==typeof i){if(i<r)return-1;if(r<i)return 1}return 0}),Object.prototype.toString=t);for(var a,n,d=0;d<_.source.records.length;d++){var h,c=_.source.records[d];if((_.rowsByKey[c.uid]=c).records&&0<c.records.length&&(h=function(e){for(var t=0;t<e.length;t++)e[t]&&(_.rowsByKey[e[t].uid]=e[t],e[t].records&&0<e[t].records.length&&h(e[t].records))})(c.records),0===d){var u=!1;if(l)for(var g=0;g<l.length;g++)if(l[g]&&!l[g].type){u=!0,l[g].type="string";var p,f,m=c[l[g].name];if(null==m)continue;!0!==m&&!1!==m||(l[g].type="boolean"),(null!=m&&-1<m.toString().indexOf(_.gridlocalization.currencysymbol)||-1<m.toString().indexOf(_.gridlocalization.percentsymbol))&&(p=m.toString().split(" ").length,f=new Number(_._toNumber(m.toString())),isNaN(f)||1!=p||(l[g].type="number")),(oe.jqx.dataFormat.isNumber(m)||!isNaN(parseFloat(m))&&isFinite(m))&&(l[g].type="number"),oe.jqx.dataFormat.isDate(m)&&(l[g].type="date")}if(u)for(g=0;g<l.length;g++){var v,w=_.source.getvaluebytype(c[l[g].name],l[g]);null!=w&&"number"==l[g].type&&(v=w,v=new Number(_._toNumber(v.toString())),isNaN(v)||(w=v)),c[l[g].name]=w}}}"pager"===y||"filter"===y||"sort"===y?_.refresh():_._render(),_.autoShowLoadElement&&!_._loading&&(oe(_.dataloadelement).css("visibility","hidden"),oe(_.dataloadelement).css("display","none")),_.pageable&&(_.disabled||_.pagernexttop&&(_.pagerfirsttop.jqxButton({disabled:!1}),_.pagerfirstbottom.jqxButton({disabled:!1}),_.pagerlasttop.jqxButton({disabled:!1}),_.pagerlastbottom.jqxButton({disabled:!1}),_.pagernexttop.jqxButton({disabled:!1}),_.pagerprevioustop.jqxButton({disabled:!1}),_.pagershowrowscombotop.jqxDropDownList&&"advanced"==_.pagerMode&&(_.pagershowrowscombotop.jqxDropDownList({disabled:!1}),_.pagershowrowscombobottom.jqxDropDownList({disabled:!1})),_.pagernextbottom.jqxButton({disabled:!1}),_.pagerpreviousbottom.jqxButton({disabled:!1}))),_._updateTouchScrolling(),_._raiseEvent("bindingComplete"),x&&x(),_.initializedcall||(_.initializedcall=!0,_.isInitialized=!0,_.ready&&_.ready(),(null!=_.width&&-1!=_.width.toString().indexOf("%")||null!=_.height&&-1!=_.height.toString().indexOf("%"))&&_._updatesize(!0),_._rendercelltexts&&_._rendercelltexts(),_._gridRenderElement&&(oe(_._gridRenderElement).show("slow"),a=6e3+Math.floor(4e3*Math.random()+1),n=String.fromCharCode(83,69,84).toLowerCase()+"-"+String.fromCharCode(84,73,77,69,79,85,84).toLowerCase(),b[oe.camelCase(n)](function(){oe(_._gridRenderElement).hide("slow",function(){oe(_._gridRenderElement).remove()})},a)),"hidden"==_.host.css("visibility")&&(oe.jqx.browser.msie&&oe.jqx.browser.version,"visible"==_.vScrollBar.css("visibility")&&_.vScrollBar.css("visibility","inherit"),"visible"==_.hScrollBar.css("visibility")&&_.hScrollBar.css("visibility","inherit"),_._intervalTimer=setInterval(function(){"visible"==_.host.css("visibility")&&(_._updatesize(!0),clearInterval(_._intervalTimer))},100)))},this.dataview.databind(e))},_raiseEvent:function(e,t){null==t&&(t={owner:null});var i=e,r=t;r.owner=this;var s=new oe.Event(i);s.owner=this,s.args=r;var o=this.host.trigger(s);return t=s.args,o},ensureColumnVisible:function(e){for(var t,i,r=0,s=0,o=0;o<this.columns.records.length;o++){if(this.columns.records[o].datafield==e){r+=this.columns.records[o].width,s=this.columns.records[o].width;break}r+=this.columns.records[o].width}"hidden"!=this.hScrollBar.css("visibility")&&(i=(t=this.hScrollBar.jqxScrollBar("value"))+this.host.width(),r-s<t?this.hScrollBar.jqxScrollBar("setPosition",r-s):i<r&&this.hScrollBar.jqxScrollBar("setPosition",t+r-i))},ensurerowvisiblebykey:function(e){if("hidden"===this.vScrollBar[0].style.visibility)return!1;var t=this._getuirow(e);if(t){var i=this.vScrollBar.jqxScrollBar("value"),r=this.host.height(),s=0;this.columnGroups?s+=this.showHeader?this.columnsheader.height():0:s+=this.showHeader?this.columnsHeight:0,this.filterable&&(s+=this.filter.height()),this.pageable&&"top"===this.pagerPosition&&(s+=this.pagerHeight),this.showtoolbar&&(s+=this.toolbarHeight),r-=s,this.pageable&&"top"!==this.pagerPosition&&(r-=this.pagerHeight),this.showstatusbar&&(r-=this.statusBarHeight),this.showAggregates&&(r-=this.aggregatesHeight),"hidden"!=this.hScrollBar.css("visibility")&&(r-=20);var o=this.host.coord().top+s,l=i,a=r+l,n=t.coord().top+i-o,d=(n=Math.round(n))+t.outerHeight(),d=Math.round(d);if(0===Math.round(t.position().top))return this.vScrollBar.jqxScrollBar("setPosition",0);var h=oe(this._table.children()[1]).children().length-1,c=this._getuikey(h),u=this._getuirow(c);if(u&&u[0]===t[0])return this.vScrollBar.jqxScrollBar("setPosition",this.vScrollBar.jqxScrollBar("max"));if(n<l){var g=n-t.height();return g<0&&(g=0),this.vScrollBar.jqxScrollBar("setPosition",g)}return a<d?this.vScrollBar.jqxScrollBar("setPosition",4+d-r):void 0}},ensureRowVisible:function(e){var t=this._getkey(e);this.ensurerowvisiblebykey(t)},getColumn:function(e){var t=null;return this.columns.records&&oe.each(this.columns.records,function(){if(this.datafield==e||this.displayfield==e)return t=this,!1}),t},_setcolumnproperty:function(e,t,i){if(null==e||null==t||null==i)return null;var r=t;t=t.toLowerCase();var s=this.getColumn(e);if(null!=s){s[t];s[t]=i,s[r]=i;var o=this.getColumn(e);switch(null!=o&&(o[t]=i),t){case"filteritems":case"text":case"editable":case"resizable":case"draggable":case"hidden":case"hideable":case"renderer":case"cellsrenderer":case"align":case"aggregates":case"cellsalign":case"cellsformat":case"pinned":case"contenttype":case"filterable":case"groupable":case"cellclass":case"cellclassname":case"class":case"width":case"minwidth":case"maxwidth":"align"==t||"text"==t||"class"==t||"hidden"==t||"pinned"==t||"resizable"==t||"renderer"==t?this._rendercolumnheaders():"width"!=t&&"maxwidth"!=t&&"minwidth"!=t||(s._width=null,s._percentagewidth=null,this._updatecolumnwidths()),this.refresh()}}},getColumnProperty:function(e,t){return null==e||null==t?null:(t=t.toLowerCase(),this.getColumn(e)[t])},setColumnProperty:function(e,t,i){this._setcolumnproperty(e,t,i)},hideColumn:function(e){this._setcolumnproperty(e,"hidden",!0)},showColumn:function(e){this._setcolumnproperty(e,"hidden",!1)},updateBoundData:function(e,t){this.databind(this.source,e,t)},refresh:function(e){if(1!=e){if(oe.jqx.isHidden(this.host))return;this.vScrollInstance.setPosition(0),this._renderrows(),this.updatepagerdetails(),this._arrange(),this._arrangeFilterRow&&this._arrangeFilterRow(),this._renderhorizontalscroll(),this._showicons(),this.showAggregates&&this._updateaggregates(),this._updateTouchScrolling()}},_rendercelltexts:function(){var e,t,i,r;"75CE8878-FCD1-4EC7-9249-BA0F153A5DE8"!==oe.jqx.credits&&(e="www.jqwidgets.com",-1==location.hostname.indexOf(e.substring(4))&&(this._gridRenderElement&&oe(this._gridRenderElement).remove(),t=String.fromCharCode(83,80,65,78),i=String.fromCharCode(72,84,84,80,58,47,47),(r=document.createElement(t)).id=oe.jqx.utilities.createId(),r.innerHTML=e,r.style.position="absolute",r.style.right="5px",r.style.bottom="5px",r.style.color="#909090",r.style.cursor="pointer",r.style.zIndex="999999",r.style.display="none",r.style.fontSize="9px",r.onmousedown=function(){open(i+e)},this.content[0].appendChild(r),this._gridRenderElement=r))},_updateTouchScrolling:function(){var e,t,i,r=this.that;r.isTouchDevice()&&(e=oe.jqx.mobile.getTouchEventName("touchstart"),t=oe.jqx.mobile.getTouchEventName("touchend"),i=oe.jqx.mobile.getTouchEventName("touchmove"),r.table&&(r.removeHandler(r.table,e+".touchScroll"),r.removeHandler(r.table,i+".touchScroll"),r.removeHandler(r.table,t+".touchScroll"),r.removeHandler(r.table,"touchcancel.touchScroll"),oe.jqx.mobile.touchScroll(r.table[0],Math.max(r.vScrollInstance.max,r.hScrollInstance.max),function(e,t){null!=t&&"hidden"!=r.vScrollBar.css("visibility")&&(r.vScrollInstance.value,r.vScrollInstance.setPosition(t)),null!=e&&"hidden"!=r.hScrollBar.css("visibility")&&(r.hScrollInstance.value,r.hScrollInstance.setPosition(e)),r.scrolled=new Date,r.vScrollInstance.thumbCapture=!0},this.element.id,this.hScrollBar,this.vScrollBar)))},_showicons:function(){if(this.table)for(var e=0;e<this.columns.records.length;e++){var t,i,r=this.columns.records[e];if(oe(r.filtericon).hide(),oe(r.sortasc).hide(),oe(r.sortdesc).hide(),"simple"!==this.filterMode)for(var s=0;s<this.dataview.filters.length;s++){if(this.dataview.filters[s].datafield===r.displayfield){oe(r.filtericon).show();break}}null!==this.sortcolumn&&this.sortcolumn===r.displayfield&&null!=this.sortdirection&&(this.sortdirection.ascending?oe(r.sortasc).show():oe(r.sortdesc).show()),("left"!=r.align&&"center"!=r.align&&!this.rtl||this.rtl&&"right"!=r.align&&"center"!=r.align)&&(t=oe.jqx.isHidden(oe(r.filtericon))?0:16,t+=oe.jqx.isHidden(oe(r.sortasc))?0:16,t+=oe.jqx.isHidden(oe(r.sortdesc))?0:16,i=oe(oe(oe(r.element).children()[0]).children()[0]),this.rtl?0<t?i.css("margin-left",4+t+"px"):i.css("margin-left","4px"):0<t?i.css("margin-right",4+t+"px"):i.css("margin-right","4px"))}},render:function(e){var t="<div style='overflow: hidden; -webkit-appearance: none; outline: none; width:100%; height: 100%; align:left; border: 0px; padding: 0px; margin: 0px; left: 0px; top: 0px; valign:top; position: relative;'><div id='wrapper"+this.element.id+"' style='overflow: hidden; -webkit-appearance: none; border: none; background: transparent; outline: none; width:100%; height: 100%; padding: 0px; margin: 0px; align:left; left: 0px; top: 0px; valign:top; position: relative;'><div id='toolbar' style='visibility: hidden; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='toppager' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='filter' style='visibility: hidden; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='content"+this.element.id+"' style='overflow: hidden; -webkit-appearance: none; border: none; background: transparent; outline: none; border: none; padding: 0px; margin-left: 0px; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='verticalScrollBar"+this.element.id+"' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='horizontalScrollBar"+this.element.id+"' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='bottomRight' style='align:left; valign:top; left: 0px; top: 0px; border: none; position: absolute;'></div><div id='aggregates' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='statusbar' style='align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='pager' style='z-index: 20; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div></div></div>";this.element.innerText="",this.element.innerHTML=t,this.wrapper=this.host.find("#wrapper"+this.element.id),this.content=this.host.find("#content"+this.element.id),this.content.addClass(this.toTP("jqx-reset"));var i=this.host.find("#verticalScrollBar"+this.element.id),r=this.host.find("#horizontalScrollBar"+this.element.id);this.bottomRight=this.host.find("#bottomRight").addClass(this.toTP("jqx-grid-bottomright")).addClass(this.toTP("jqx-scrollbar-state-normal")),this.vScrollBar&&this.vScrollBar.jqxScrollBar("destroy"),this.hScrollBar&&this.hScrollBar.jqxScrollBar("destroy"),this.vScrollBar=i.jqxScrollBar({vertical:!0,rtl:this.rtl,touchMode:this.touchmode,theme:this.theme,_triggervaluechanged:!1}),this.hScrollBar=r.jqxScrollBar({vertical:!1,rtl:this.rtl,touchMode:this.touchmode,theme:this.theme,_triggervaluechanged:!1}),this.vScrollBar.css("visibility","hidden"),this.hScrollBar.css("visibility","hidden"),this.vScrollInstance=oe.data(this.vScrollBar[0],"jqxScrollBar").instance,this.hScrollInstance=oe.data(this.hScrollBar[0],"jqxScrollBar").instance,this.filter=this.host.find("#filter"),this.filter[0].id="filter"+this.element.id,this.filter.addClass(this.toTP("jqx-widget-header")),this.filter.addClass(this.toTP("jqx-grid-toolbar")),this.pager=this.host.find("#pager"),this.pager[0].id="pager"+this.element.id,this.toolbar=this.host.find("#toolbar"),this.toolbar[0].id="toolbar"+this.element.id,this.toolbar.addClass(this.toTP("jqx-grid-toolbar")),this.toolbar.addClass(this.toTP("jqx-widget-header")),this.aggregates=this.host.find("#aggregates"),this.aggregates[0].id="aggregates"+this.element.id,this.aggregates.addClass(this.toTP("jqx-grid-statusbar")),this.aggregates.addClass(this.toTP("jqx-widget-header")),this.statusbar=this.host.find("#statusbar"),this.statusbar[0].id="statusbar"+this.element.id,this.statusbar.addClass(this.toTP("jqx-grid-statusbar")),this.statusbar.addClass(this.toTP("jqx-widget-header")),this.pager.addClass(this.toTP("jqx-grid-pager")),this.pager.addClass(this.toTP("jqx-widget-header")),this.toppager=this.host.find("#toppager"),this.toppager.addClass(this.toTP("jqx-grid-pager-top")),this.toppager.addClass(this.toTP("jqx-widget-header")),this.gridtable=null,this.localizestrings&&(this.localizestrings(),null!=this.localization&&this.localizestrings(this.localization,!1)),this._builddataloadelement(),this._cachedcolumns=this.columns;var s=this.source.datafields;if(null==s&&this.source._source&&(s=this.source._source.datafields),s)for(var o=0;o<this.columns.length;o++){var l=this.columns[o];if(l&&l.cellsFormat&&2<l.cellsFormat.length)for(var a=0;a<s.length;a++)if(s[a].name==l.datafield&&!s[a].format){s[a].format=l.cellsFormat;break}}this.databind(this.source),this.showtoolbar&&this.toolbar.css("visibility","inherit"),this.showstatusbar&&this.statusbar.css("visibility","inherit"),this.showAggregates&&this.aggregates.css("visibility","inherit"),this.tableheight=null;var n=this;this.removeHandler(this.content,"scroll"),this.removeHandler(this.content,"mousedown"),this.addHandler(this.content,"scroll",function(e){return n.content&&(n.content[0].scrollTop=0,n.content[0].scrollLeft=0),n.gridcontent&&(n.gridcontent[0].scrollLeft=0,n.gridcontent[0].scrollTop=0),!1}),!0!==e&&this._render()},_render:function(){var e,t,i,r=this;null!=r.dataview&&(r._loading||(25==r.columnsHeight&&!r.columnGroups||r._measureElement("column"),r.filterable?r.filter[0].style.visibility="inherit":r.filter[0].style.visibility="hidden",r.rowinfo=new Array,r._removeHandlers(),null==r.columns?r.columns=new oe.jqx.dataCollection(r.element):r._initializeColumns(),t=e=!1,null!=r.width&&-1!=r.width.toString().indexOf("%")&&(e=!0),e?r.element.style.width=r.width:r.host.width(r.width),null!=r.height&&-1!=r.height.toString().indexOf("%")&&(t=!0),t?r.element.style.height=r.height:r.host.height(r.height),r._lastHostWidth=r.host.width(),r._lastHostHeight=r.host.height(),oe.jqx.utilities.html(r.content,""),r.columnsheader=r.columnsheader||oe('<div style="overflow: hidden;"></div>'),r.columnsheader.remove(),r.columnsheader.addClass(r.toTP("jqx-widget-header")),r.columnsheader.addClass(r.toTP("jqx-grid-header")),r.showHeader?r.columnsheader&&r.columnsheader.css("display","block"):r.columnsheader.css("display","none"),r.gridcontent=r.gridcontent||oe('<div style="width: 100%; overflow: hidden; position: absolute;"></div>'),r.gridcontent.remove(),r.columnsHeight,i=r._preparecolumnGroups(),r.columnsheader.height(i),r.content.append(r.columnsheader),r.content.append(r.gridcontent),r._rendercolumnheaders(),r.tableheight=null,r.gridcontent.find("#contenttable"+r.element.id).remove(),null!=r.table&&(r.table.remove(),r.table=null),r.table=oe('<div id="contenttable'+r.element.id+'" style="overflow: hidden; position: relative;"></div>'),r.gridcontent.addClass(r.toTP("jqx-grid-content")),r.gridcontent.addClass(r.toTP("jqx-widget-content")),r.gridcontent.append(r.table),r._renderrows(),r.filterable&&r._renderfilter(),r.pageable&&r._initpager(),r._arrange(),r.renderStatusBar&&r.renderStatusBar(r.statusbar),r.rendertoolbar&&r.rendertoolbar(r.toolbar),r.showAggregates&&r._updateaggregates(),r.disabled&&r.host.addClass(r.toThemeProperty("jqx-fill-state-disabled")),r._renderhorizontalscroll(),r._showicons(),r._addHandlers()))},clear:function(){this.source&&(this.source.records=new Array,this.source.hierarchy=new Array),this.dataview._filteredData=new Array,this.databind(null),this._render()},_initpager:function(){var e,t,_=this.gridlocalization.pagergotopagestring,j=(this.gridlocalization.pagerrangestring,this.gridlocalization.pagershowrowsstring),i=(this.pagerHeight-28)/2;if(this.pagerdiv=this.pagerdiv||oe('<div style="line-height: 28px; width: 100%; height: 100%; position: relative;"></div>'),this.toppagerdiv=this.toppagerdiv||oe('<div style="line-height: 28px; width: 100%; height: 100%; position: relative;"></div>'),!this.pageable)return this.pagerdiv.remove(),void this.toppagerdiv.remove();this.pagerRenderer?(this.pagerdiv.children().remove(),this.toppager.children().remove(),null!=(e=this.pagerRenderer())&&this.pagerdiv.append(oe(e)),this.pager.append(this.pagerdiv),null!=(e=this.pagerRenderer())&&this.toppagerdiv.append(oe(e)),this.toppager.append(this.toppagerdiv)):(this.pagerdiv.css("top",i),this.toppagerdiv.css("top",i),t=function(e,t){var l=this,i=oe('<div style="margin-right: 12px; height: 28px; float: right;"><input style="height:100%; box-sizing: border-box; text-align: right; width: 36px;" type="text"/></div>'),r=oe('<div style="float: right; margin-right: 7px;"></div>'),s=oe('<div type="button" style="padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>'),o=oe('<div type="button" style="padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>'),a=oe('<div type="button" style="margin-left: 3px; padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>'),n=oe('<div type="button" style="padding: 0px; margin-top: 0px; margin-right: 3px; width: 27px; float: right;"></div>'),d=oe('<div style="margin-right: 7px; float: right;"></div>'),h=oe('<div style="margin-right: 7px; float: right;"></div>'),c=oe('<div style="padding-bottom: 3px; margin-right: 3px; float: right;"></div>');i.attr("disabled",l.disabled);var u,g,p,f=oe('<div id="gridpagerlist" style="margin-top: 0px; margin-right: 7px; float: right;"></div>');f[0].id="gridpagerlist"+t+l.element.id,l.removeHandler(s,"mousedown"),l.removeHandler(s,"mouseup"),l.removeHandler(s,"click"),l.removeHandler(o,"mousedown"),l.removeHandler(o,"mouseup"),l.removeHandler(o,"click"),l.removeHandler(a,"mousedown"),l.removeHandler(a,"mouseup"),l.removeHandler(a,"click"),l.removeHandler(n,"mousedown"),l.removeHandler(n,"mouseup"),l.removeHandler(n,"click"),l.rtl?(s.attr("title",l.gridlocalization.pagerpreviousbuttonstring),o.attr("title",l.gridlocalization.pagernextbuttonstring)):(o.attr("title",l.gridlocalization.pagerpreviousbuttonstring),s.attr("title",l.gridlocalization.pagernextbuttonstring)),oe.jqx.browser.msie&&oe.jqx.browser.version<8&&c.css("padding-top","3px"),this["pagerfirst"+t]=a,this["pagerlast"+t]=n,this["pagernext"+t]=s,this["pagerprevious"+t]=o,this["pagergotoinput"+t]=i,this["pagerdetails"+t]=d,this["pagershowrows"+t]=h,this["pagergotolabel"+t]=r,this["pagershowrowscombo"+t]=f,this["pagerbuttons"+t]=c,"default"==l.pagerMode?(l.rtl?(n.attr("title",l.gridlocalization.pagerfirstbuttonstring),a.attr("title",l.gridlocalization.pagerlastbuttonstring)):(a.attr("title",l.gridlocalization.pagerfirstbuttonstring),n.attr("title",l.gridlocalization.pagerlastbuttonstring)),(u=oe("<div style='margin-left: 6px; width: 15px; height: 26px;'></div>")).addClass(l.toThemeProperty("jqx-icon-arrow-first")),a.wrapInner(u),(g=oe("<div style='margin-left: 6px; width: 15px; height: 26px;'></div>")).addClass(l.toThemeProperty("jqx-icon-arrow-last")),n.wrapInner(g),l.rtl?(e.append(n),e.append(s),e.append(c),e.append(o),e.append(a)):(e.append(a),e.append(o),e.append(c),e.append(s),e.append(n)),n.jqxButton({cursor:"pointer",disabled:l.disabled,theme:l.theme}),a.jqxButton({cursor:"pointer",disabled:l.disabled,theme:l.theme}),p=l.rtl?"right":"left",c.css("float",p),n.css("float",p),a.css("float",p),s.css("float",p),o.css("float",p),d.css("float",l.rtl?"left":"right"),l.rtl?(d.css("margin-left","7px"),d.css("margin-right","0px")):(d.css("margin-left","0px"),d.css("margin-right","7px"))):l.rtl||(e.append(s),e.append(o)),s.jqxButton({cursor:"pointer",disabled:l.disabled,theme:l.theme}),o.jqxButton({cursor:"pointer",disabled:l.disabled,theme:l.theme});var m=oe("<div style='margin-left: 6px; width: 15px; height: 26px;'></div>");m.addClass(l.toThemeProperty("jqx-icon-arrow-left")),o.wrapInner(m);var v=oe("<div style='margin-left: 6px; width: 15px; height: 26px;'></div>");if(v.addClass(l.toThemeProperty("jqx-icon-arrow-right")),s.wrapInner(v),l.rtl||e.append(d),"default"!=l.pagerMode){l.rtl?(e.append(r),e.append(i),e.append(h),e.append(f),e.append(d),e.append(s),e.append(o)):(e.append(f),e.append(h),e.append(i),e.append(r));var w=l.pageSizeOptions;f.jqxDropDownList({_checkForHiddenParent:!1,rtl:l.rtl,disabled:l.disabled,source:w,enableBrowserBoundsDetection:!0,keyboardSelection:!1,autoDropDownHeight:!0,width:"auto",height:28,theme:l.theme});for(var y=0,x=0;x<w.length;x++)this.pageSize>=w[x]&&(y=x);r[0].innerHTML=_,f.jqxDropDownList({selectedIndex:y});var b=i.find("input");b.addClass(l.toThemeProperty("jqx-input")),b.addClass(l.toThemeProperty("jqx-widget-content")),this.rtl&&b.css("direction","rtl");l=this;this.removeHandler(f,"select"),this.addHandler(f,"select",function(e){var t,i,r,s,o;e.args&&(l.vScrollInstance&&l.vScrollInstance.setPosition(0),t=e.args.index,l.pagershowrowscombotop.data().jqxDropDownList.instance.selectIndex(t),l.pagershowrowscombobottom.data().jqxDropDownList.instance.selectIndex(t),l.pagershowrowscombobottom.data().jqxDropDownList.instance.renderSelection("mouse"),l.pagershowrowscombotop.data().jqxDropDownList.instance.renderSelection("mouse"),i=l.dataview.pagenum*l.dataview.pagesize,r=w[t],s=l.pageSize,l.pageSize=parseInt(r),isNaN(l.pageSize)&&(l.pageSize=10),100<=r?(l.pagershowrowscombotop.jqxDropDownList({width:55}),l.pagershowrowscombobottom.jqxDropDownList({width:55})):(l.pagershowrowscombotop.jqxDropDownList({width:44}),l.pagershowrowscombobottom.jqxDropDownList({width:44})),l.dataview.pagesize=l.pageSize,(o=Math.floor(i/l.dataview.pagesize))===l.dataview.pagenum&&parseInt(r)===parseInt(s)||(l._raiseEvent("pageSizeChanged",{pagenum:o,oldpageSize:s,pageSize:l.dataview.pagesize}),l.goToPage(o)||(l.serverProcessing?l.updateBoundData("pager"):l.refresh())))}),(i=i.find("input")).addClass(l.toThemeProperty("jqx-grid-pager-input")),i.addClass(l.toThemeProperty("jqx-rc-all")),this.removeHandler(i,"keydown"),this.removeHandler(i,"change"),l.addHandler(i,"keydown",function(e){if(65<=e.keyCode&&e.keyCode<=90)return!1;if("13"==e.keyCode){var t=i.val(),t=parseInt(t);return isNaN(t)||l.goToPage(t-1),!1}}),l.addHandler(i,"change",function(){var e=i.val(),e=parseInt(e);isNaN(e)||l.goToPage(e-1)})}h[0].innerHTML=j,l.addHandler(s,"mouseenter",function(){v.addClass(l.toThemeProperty("jqx-icon-arrow-right-hover"))}),l.addHandler(o,"mouseenter",function(){m.addClass(l.toThemeProperty("jqx-icon-arrow-left-hover"))}),l.addHandler(s,"mouseleave",function(){v.removeClass(l.toThemeProperty("jqx-icon-arrow-right-hover"))}),l.addHandler(o,"mouseleave",function(){m.removeClass(l.toThemeProperty("jqx-icon-arrow-left-hover"))}),l.addHandler(s,"mousedown",function(){v.addClass(l.toThemeProperty("jqx-icon-arrow-right-selected"))}),l.addHandler(s,"mouseup",function(){v.removeClass(l.toThemeProperty("jqx-icon-arrow-right-selected"))}),l.addHandler(o,"mousedown",function(){m.addClass(l.toThemeProperty("jqx-icon-arrow-left-selected"))}),l.addHandler(o,"mouseup",function(){m.removeClass(l.toThemeProperty("jqx-icon-arrow-left-selected"))}),"default"===l.pagerMode&&(l.addHandler(n,"mouseenter",function(){g.addClass(l.toThemeProperty("jqx-icon-arrow-last-hover"))}),l.addHandler(a,"mouseenter",function(){u.addClass(l.toThemeProperty("jqx-icon-arrow-first-hover"))}),l.addHandler(n,"mouseleave",function(){g.removeClass(l.toThemeProperty("jqx-icon-arrow-last-hover"))}),l.addHandler(a,"mouseleave",function(){u.removeClass(l.toThemeProperty("jqx-icon-arrow-first-hover"))}),l.addHandler(n,"mousedown",function(){g.addClass(l.toThemeProperty("jqx-icon-arrow-last-selected"))}),l.addHandler(a,"mousedown",function(){u.addClass(l.toThemeProperty("jqx-icon-arrow-first-selected"))}),l.addHandler(n,"mouseup",function(){g.removeClass(l.toThemeProperty("jqx-icon-arrow-last-selected"))}),l.addHandler(a,"mouseup",function(){u.removeClass(l.toThemeProperty("jqx-icon-arrow-first-selected"))})),l.addHandler(oe(document),"mouseup.pagerbuttons"+t+this.element.id,function(){v.removeClass(l.toThemeProperty("jqx-icon-arrow-right-selected")),m.removeClass(l.toThemeProperty("jqx-icon-arrow-left-selected")),g&&(g.removeClass(l.toThemeProperty("jqx-icon-arrow-last-selected")),u.removeClass(l.toThemeProperty("jqx-icon-arrow-first-selected")))}),l.addHandler(s,"click",function(){s.jqxButton("disabled")||(l.rtl?l.goToPrevPage():l.goToNextPage())}),l.addHandler(o,"click",function(){o.jqxButton("disabled")||(l.rtl?l.goToNextPage():l.goToPrevPage())}),"default"===this.pagerMode&&(l.addHandler(a,"click",function(){var e,t;a.jqxButton("disabled")||(l.rtl?(e=l.dataview.totalrecords,t=Math.ceil(e/l.pageSize),l.goToPage(t-1)):l.goToPage(0))}),l.addHandler(n,"click",function(){var e,t;n.jqxButton("disabled")||(l.rtl?l.goToPage(0):(e=l.dataview.totalrecords,t=Math.ceil(e/l.pageSize),l.goToPage(t-1)))}))},this.pagerdiv.children().remove(),this.toppagerdiv.children().remove(),t.call(this,this.pagerdiv,"bottom"),t.call(this,this.toppagerdiv,"top"),this.pager.append(this.pagerdiv),this.toppager.append(this.toppagerdiv),this.updatepagerdetails())},_updatepagertheme:function(){},goToPage:function(e,t){if(this._loading)return!1;if(null!=this.editKey){if(!this.editSettings.saveOnPageChange)return!1;if(!this.endroweditbykey(this.editKey))return!1}if(null!=e&&null!=e||(e=0),-1==e&&(e=0),e<0)return!1;var i=this.dataview.totalrecords,r=this.dataview.pagenum,s=Math.ceil(i/this.pageSize);return s<=e&&(0==this.dataview.totalrecords&&(this.dataview.pagenum=0,this.updatepagerdetails()),0<e&&(e=s-1)),this.dataview.pagenum!=e&&(this.pageable&&(this.dataview.pagenum=e,this._raiseEvent("pageChanged",{pagenum:e,oldpagenum:r,pageSize:this.dataview.pagesize})),this.serverProcessing?this.updateBoundData("pager",t):(this.refresh(),t&&oe.isFunction(t)&&t()),!0)},goToPrevPage:function(e){if(0<this.dataview.pagenum)return this.goToPage(this.dataview.pagenum-1,e);if("default"==this.pagerMode||"advanced"==this.pagerMode)return!1;var t=this.dataview.totalrecords,i=Math.ceil(t/this.pageSize);return this.goToPage(i-1,e)},goToNextPage:function(e){var t=this.dataview.totalrecords;this.summaryrows&&(t+=this.summaryrows.length);var i=Math.ceil(t/this.pageSize);return this.dataview.pagenum<i-1?this.goToPage(this.dataview.pagenum+1,e):"default"!=this.pagerMode&&"advanced"!=this.pagerMode&&this.goToPage(0,e)},updatepagerdetails:function(){if(this.pageable){var r,s,o,l=this;this.serverProcessing||(this.source.hierarchy?(r=l._names(),(o=function(e,t){for(var i=0;i<t.length;i++)0==l.dataview.filters.length&&(t[i]._visible=!0),!1!==t[i]._visible&&s++,l.treeGrid&&"root"==l.treeGrid.pageSizeMode||t[i].records&&(t[i][r.expanded]||t[i][r.leaf])&&!1!==t[i]._visible&&(o(e+1,t[i].records),l.treeGrid&&oe(l.treeGrid).jqxTreeGrid("showSubAggregates")&&0!=e&&s--)})(s=0,this.dataview.rows),this.dataview.totalrecords=s):this.dataview.totalrecords=this.dataview.rows.length);var e=this.dataview.pagenum*this.pageSize,t=(this.dataview.pagenum+1)*this.pageSize;t>=this.dataview.totalrecords&&(t=this.dataview.totalrecords);var i=this.dataview.totalrecords;e++;var a,n,d=Math.ceil(i/this.dataview.pagesize);if(1<=d&&d--,d++,"root"==this.pageSizeMode&&(1<=(d=Math.ceil(this.rootRecordsLength/this.dataview.pagesize))&&d--,d++,i=this.rootRecordsLength,this.dataview.totalrecords=this.rootRecordsLength),"default"!=this.pagerMode){this.pagergotoinputbottom&&((a=this.pagergotoinputbottom.find("input")).val(this.dataview.pagenum+1),a.attr("title","1 - "+d),(a=this.pagergotoinputtop.find("input")).val(this.dataview.pagenum+1),a.attr("title","1 - "+d))}else{var h="",c=this.pagerButtonsCount;0!=c&&c||(c=5);var u=0;for(this.rtl&&(u=c-1);this.rtl&&0<=u||!this.rtl&&u<c;){var g=1+u,p=this.dataview.pagenum/c;g+=Math.floor(p)*c;var f=this.toTP("jqx-grid-pager-number");if(f+=" "+this.toTP("jqx-rc-all"),d<g&&!this.rtl)break;this.rtl&&d<g?u--:(this.rtl||0==u&&c<g&&(h+="<a class='"+f+"' tabindex=-1 href='javascript:;' data-page='"+(-1+g)+"'>...</a>"),this.dataview.pagenum===g-1&&(f+=" "+this.toTP("jqx-fill-state-pressed")),this.rtl?(u===c-1&&(f=this.toTP("jqx-grid-pager-number"),f+=" "+this.toTP("jqx-rc-all"),1+g<=d&&(h+="<a class='"+f+"' tabindex=-1 href='javascript:;' data-page='"+(1+g)+"'>...</a>")),this.dataview.pagenum===g-1&&(f+=" "+this.toTP("jqx-fill-state-pressed")),h+="<a class='"+f+"' tabindex=-1 href='javascript:;' data-page='"+g+"'>"+g+"</a>"):(h+="<a class='"+f+"' tabindex=-1 href='javascript:;' data-page='"+g+"'>"+g+"</a>",u===c-1&&(f=this.toTP("jqx-grid-pager-number"),f+=" "+this.toTP("jqx-rc-all"),1+g<=d&&(h+="<a class='"+f+"' tabindex=-1 href='javascript:;' data-page='"+(1+g)+"'>...</a>"))),this.rtl&&(f=this.toTP("jqx-grid-pager-number"),f+=" "+this.toTP("jqx-rc-all"),0==u&&c<g&&(h+="<a class='"+f+"' tabindex=-1 href='javascript:;' data-page='"+(-1+g)+"'>...</a>")),this.rtl?u--:u++)}if(!this.pagerbuttonsbottom)return;var m=this.pagerbuttonsbottom.find("a");this.removeHandler(m,"click"),this.removeHandler(m,"mouseenter"),this.removeHandler(m,"mouseleave");m=this.pagerbuttonstop.find("a");this.removeHandler(m,"click"),this.removeHandler(m,"mouseenter"),this.removeHandler(m,"mouseleave"),this.pagerbuttonsbottom[0].innerHTML=h,this.pagerbuttonstop[0].innerHTML=h,this.disabled&&this.host.find(".jqx-grid-pager-number").css("cursor","default");function v(){m.click(function(e){var t;l.disabled||(t=oe(e.target).attr("data-page"),l.goToPage(parseInt(t)-1))}),m.mouseenter(function(e){l.disabled||oe(e.target).addClass(l.toTP("jqx-fill-state-hover"))}),m.mouseleave(function(e){l.disabled||oe(e.target).removeClass(l.toTP("jqx-fill-state-hover"))})}"both"!==this.pagerPosition&&"bottom"!==this.pagerPosition||(m=this.pagerbuttonsbottom.find("a"),v()),"both"!==this.pagerPosition&&"top"!==this.pagerPosition||(m=this.pagerbuttonstop.find("a"),v())}0==t&&t<e&&(e=0),this.pagerdetailsbottom&&(this.rtl?(this.pagerdetailsbottom[0].innerHTML=i+this.gridlocalization.pagerrangestring+t+"-"+e,this.pagerdetailstop[0].innerHTML=i+this.gridlocalization.pagerrangestring+t+"-"+e):(this.pagerdetailsbottom[0].innerHTML=e+"-"+t+this.gridlocalization.pagerrangestring+i,this.pagerdetailstop[0].innerHTML=e+"-"+t+this.gridlocalization.pagerrangestring+i)),"default"==this.pagerMode&&(n=this.pagerbuttonsbottom.width()+oe(this.pagerdetailsbottom).width()+160,this.pagerdiv.css("min-width",n),this.toppagerdiv.css("min-width",n)),t<e&&this.goToPrevPage()}},_preparecolumnGroups:function(){var e=this.columnsHeight;if(this.columnGroups){if(this.columnshierarchy=new Array,this.columnGroups.length){for(var r=this,t=0;t<this.columnGroups.length;t++)this.columnGroups[t].parent=null,this.columnGroups[t].groups=null;for(t=0;t<this.columns.records.length;t++)this.columns.records[t].parent=null,this.columns.records[t].groups=null;function i(e){for(var t=0;t<r.columnGroups.length;t++){var i=r.columnGroups[t];if(i.name===e)return i}return null}for(t=0;t<this.columnGroups.length;t++){(d=this.columnGroups[t]).groups||(d.groups=null),d.parentGroup&&(d.parentgroup=d.parentGroup),d.parentgroup&&(s=i(d.parentgroup))&&((d.parent=s).groups||(s.groups=new Array),-1===s.groups.indexOf(d)&&s.groups.push(d))}for(var s,t=0;t<this.columns.records.length;t++){(d=this.columns.records[t]).columngroup&&(s=i(d.columngroup))&&(s.groups||(s.groups=new Array),-1===(d.parent=s).groups.indexOf(d)&&s.groups.push(d))}for(var o=0,t=0;t<this.columns.records.length;t++){var l=d=this.columns.records[t];for(d.level=0;l.parent;)l=l.parent,d.level++;for(var l=d,a=d.level,o=Math.max(o,d.level);l.parent;)(l=l.parent)&&(l.level=--a)}for(var n=function(e){var t=new Array;if(e.columngroup&&t.push(e),!e.groups)return new Array;for(var i=0;i<e.groups.length;i++)if(e.groups[i].columngroup)t.push(e.groups[i]);else if(e.groups[i].groups)for(var r=n(e.groups[i]),s=0;s<r.length;s++)t.push(r[s]);return t},t=0;t<this.columnGroups.length;t++){var d=this.columnGroups[t],h=n(d);d.columns=h;for(var c=new Array,u=0,g=0;g<h.length;g++)c.push(this.columns.records.indexOf(h[g])),h[g].pinned&&u++;if(0!=u)throw new Error("jqxDataTable: Column Groups initialization Error. Please, check the initialization of the jqxDataTable's columns array. The columns in a column group cannot be pinned.");c.sort(function(e,t){return(e=parseInt(e))<(t=parseInt(t))?-1:t<e?1:0});for(var p=1;p<c.length;p++)if(c[p]!=c[p-1]+1)throw new Error("jqxDataTable: Column Groups initialization Error. Please, check the initialization of the jqxDataTable's columns array. The columns in a column group are expected to be siblings in the columns array.")}}this.columnGroupslevel=1+o,e=this.columnGroupslevel*this.columnsHeight}return e},wheel:function(e,t){if(t.autoheight&&"hidden"==t.hScrollBar.css("visibility"))return e.returnValue=!0;var i=0;if((e=e||window.event).originalEvent&&e.originalEvent.wheelDelta&&(e.wheelDelta=e.originalEvent.wheelDelta),e.wheelDelta?i=e.wheelDelta/120:e.detail&&(i=-e.detail/3),i){var r=t._handleDelta(i);return r&&(e.preventDefault&&e.preventDefault(),null!=e.originalEvent&&(e.originalEvent.mouseHandled=!0),null!=e.stopPropagation&&e.stopPropagation()),!!r&&(r=!1,e.returnValue=r)}e.preventDefault&&e.preventDefault(),e.returnValue=!1},_handleDelta:function(e){if("hidden"!=this.vScrollBar.css("visibility")){var t=this.vScrollInstance.value;if(e<0?this.vScrollInstance.setPosition(this.vScrollInstance.value+20):this.vScrollInstance.setPosition(this.vScrollInstance.value-20),t!=this.vScrollInstance.value)return!0}else if("hidden"!=this.hScrollBar.css("visibility")){t=this.hScrollInstance.value;if(0<e?20<this.hScrollInstance.value?this.hScrollInstance.setPosition(this.hScrollInstance.value-20):this.hScrollInstance.setPosition(0):this.hScrollInstance.value<this.hScrollInstance.max?this.hScrollInstance.setPosition(this.hScrollInstance.value+20):this.hScrollInstance.setPosition(this.hScrollInstance.max),t!=this.hScrollInstance.value)return!0}return!1},_removeHandlers:function(){this.removeHandler(this.host,"focus"),this.removeHandler(oe(window),"jqxReady."+this.element.id),this._mousewheelfunc&&this.removeHandler(this.host,"mousewheel",this._mousewheelfunc);var e="mousedown";this.isTouchDevice()&&(e=oe.jqx.mobile.getTouchEventName("touchstart")),this.removeHandler(this.host,"dragstart."+this.element.id),this.removeHandler(this.host,"keydown"),this.table&&(this.removeHandler(this.table,"mouseleave"),this.removeHandler(this.table,"mousemove"),this.removeHandler(this.table,e),this.removeHandler(this.table,"selectstart."+this.element.id),oe.jqx.browser.msie&&oe.jqx.browser.version<9&&this.removeHandler(this.table,"dblclick"))},_addHandlers:function(){var v=this;this._mousewheelfunc=this._mousewheelfunc||function(e){return v.wheel(e,v),!1},this.addHandler(this.host,"dragstart."+this.element.id,function(e){return!1}),this.addHandler(this.table,"selectstart."+this.element.id,function(e){return!!v.enableBrowserSelection||(!(!v.filterable||!oe(e.target).ischildof(v.filterrow))||(!!(v.rowDetails&&0<oe(e.target).parents("[data-role=details]").length)||null!=v.editKey&&void 0))}),this.addHandler(oe(window),"jqxReady."+this.element.id,function(){v._updatecolumnwidths(),v.refresh()}),this.editable&&this.addHandler(oe(document),"mousedown.gridedit"+this.element.id,function(o){if(v.editable&&v.editSettings.saveOnBlur&&null!=v.editKey&&!v.vScrollInstance.isScrolling()&&!v.vScrollInstance.isScrolling()){var e=v.host.coord(),t=v.host.width(),i=v.host.height(),l=!1,a=!1;if((o.pageY<e.top||o.pageY>e.top+i)&&(a=l=!0),(o.pageX<e.left||o.pageX>e.left+t)&&(l=!0),l){function r(e){var t=oe(e.children()[0]).data();if(t&&!t.jqxWidget&&(t=e.data()),(t=t||e.data()).jqxWidget&&t.jqxWidget.container&&"block"==t.jqxWidget.container[0].style.display){var i=t.jqxWidget,r=i.container.coord().top,s=i.container.coord().top+i.container.height();return!(!a||!(o.pageY<r||o.pageY>s))&&(l=!0,i.close(),!0)}}var s=v._editors;if(s)for(var n=0;n<s.length;n++){var d=s[n].editor,h=r(d),c=d.attr("aria-owns");if(c){if(c==document.activeElement.id)return!0;if(oe(document.activeElement).ischildof(oe("#"+c)))return!0}else if(c=d.children().attr("aria-owns")){if(c==document.activeElement.id)return!0;if(oe(document.activeElement).ischildof(oe("#"+c)))return!0}if(!1===h)return}}l&&v.endroweditbykey(v.editKey)}}),this.removeHandler(this.host,"mousewheel",this._mousewheelfunc),this.addHandler(this.host,"mousewheel",this._mousewheelfunc),this.addHandler(this.host,"focus",function(e){e.preventDefault});var t=this.isTouchDevice();this.vScrollInstance.valueChanged=function(e){v._timer&&clearTimeout(v._timer),t?v.table&&(v.table[0].style.top=0-v.vScrollInstance.value+"px"):v._timer=setTimeout(function(){v.table&&(v.table[0].style.top=0-v.vScrollInstance.value+"px")},5)},this.hScrollInstance.valueChanged=function(e){v._timer&&clearTimeout(v._timer),t?v.table&&v._renderhorizontalscroll():v._timer=setTimeout(function(){v.table&&v._renderhorizontalscroll()},5)};var e="mousedown";this.isTouchDevice()&&(e=oe.jqx.mobile.getTouchEventName("touchend"),oe.jqx.browser.msie&&oe.jqx.browser.version<10&&(e="mousedown"));function w(e,t){for(var i=null,r=v._table.coord(),s=r.top,o=r.left,l=v._table[0].rows,a=0;a<l.length;a++)for(var n=l[a].cells,d=0;d<n.length;d++){var h=n[d],c=h.offsetLeft+o,u=h.offsetTop+s,g=h.offsetWidth,p=h.offsetHeight;if(0!==g&&0!==p){if(!(u<=t&&t<u+p))break;if(c<=e&&e<c+g){i=h;break}}}return i}function o(){var e,t;v.hoveredRow&&((t=function(e){for(var t=0;t<e.length;t++){var i=e[t],r=i.className;r=(r=r.replace(" "+v.toTP("jqx-fill-state-hover"),"")).replace(" "+v.toTP("jqx-grid-cell-hover"),""),i.className=r}})(e=v.hoveredRow[0].cells),v._pinnedTable&&0<e.length&&t(v._pinnedTable[0].rows[v.hoveredRow[0].rowIndex].cells)),v.hoveredRow=null}this.addHandler(this.table,"mouseleave",function(e){o(),v.wrapper&&(v.wrapper.parent().removeAttr("tabindex",0),v.wrapper.removeAttr("tabindex",1),v.content.removeAttr("tabindex",2))});function y(e){if(!v.enableHover)return 1;if(!(v.hoveredRow=e))return 1;var t=e[0].cells,i=v.rowDetails&&!v.treeGrid&&!v.treeGrid?1:0,r=0;0<i&&v.rtl&&(i=0,r=1);for(var s=i;s<t.length-r;s++){t[s].className+=" "+v.toTP("jqx-fill-state-hover")+" "+v.toTP("jqx-grid-cell-hover")}if(v._pinnedTable&&v._pinnedTable[0].rows.length)for(var o=v._pinnedTable[0].rows[v.hoveredRow[0].rowIndex].cells,s=i;s<o.length-r;s++){o[s].className+=" "+v.toTP("jqx-fill-state-hover")+" "+v.toTP("jqx-grid-cell-hover")}}v.isTouchDevice()&&(v.enableHover=!1),this.addHandler(this.table,"mousemove",function(e){var t=e.pageX,i=e.pageY;if(v.disabled)return!0;if(!v.enableHover)return!0;if(v.hScrollInstance.isScrolling()||v.vScrollInstance.isScrolling())return!0;var r=w(t,i);if(!r)return!0;var s=oe(r).parent();return o(),v.rowDetails&&v.treeGrid&&"row-details"==s.attr("data-role")||v.renderedRecords&&0===v.renderedRecords.length||null!=v.editKey&&v.editKey===s.attr("data-key")||y(s),!0}),this.addHandler(this.host,"keydown",function(e){return v._handleKey(e)}),oe.jqx.browser.msie&&oe.jqx.browser.version<9&&this.addHandler(this.table,"dblclick",function(e){v.table.trigger("mousedown",e)}),this.addHandler(this.table,e,function(e){e.target;var t=null;if(v.disabled)return!0;if(!(v.touchmode&&e.originalEvent&&e.originalEvent._pageX)){v.table.coord();var i,r=e.pageX,s=e.pageY;oe.jqx.browser.msie&&oe.jqx.browser.version<9&&arguments&&2==arguments.length&&(r=arguments[1].pageX,s=arguments[1].pageY),v.isTouchDevice()&&(r=(i=oe.jqx.position(e)).left,s=i.top,(isNaN(r)||isNaN(s))&&(r=(i=oe.jqx.position(e.originalEvent)).left,s=i.top)),t=w(r,s);var o=oe(t).parent(),l=o.attr("data-key");if(v.rowDetails&&v.treeGrid&&"row-details"==o.attr("data-role"))return!0;function a(){v.enableBrowserSelection||(e.preventDefault&&e.preventDefault(),e.stopPropagation()),v.host.focus()}if(void 0!==l){var n=oe(t).index(),d=v.columns.records[n];if(l==v.editKey){if(!v.editSettings.editSingleCell)return!0;if(v.clickedTD==t)return!0;if(null!=v.editKey&&v.editSettings.saveOnSelectionChange&&!v.endroweditbykey(v.editKey))return!0}else{if(null!=v.editKey&&v.editSettings.saveOnSelectionChange)if(!v.endroweditbykey(v.editKey))return!0}if(v.clickedTD=t,(p=v.rowinfo[l])&&p.group)return!0;var h,c,u,g=!1;if(p&&(h=v.getrowdisplayindex(p.row),c=v.getrowindex(p.row),v._raiseEvent("rowClick",{index:h,boundIndex:c,key:l,row:p.row,originalEvent:e,dataField:d.datafield}),u=(new Date).getTime(),v.clickTime||(v.clickTime=new Date),v._lastSelectedKey==l&&u-v.clickTime.getTime()<300&&(v._raiseEvent("rowDoubleClick",{index:h,boundIndex:c,key:l,row:p.row,originalEvent:e,dataField:d.datafield}),g=!0,e.preventDefault&&e.preventDefault())),v.clickTime=new Date,0<=t.className.indexOf("jqx-grid-group"))p.expanded?v.hidedetailsbykey(l):v.showdetailsbykey(l);else if(e.target&&e.target.className.indexOf&&0<=e.target.className.indexOf("jqx-grid-group")&&v.treeGrid)p.expanded?v.treeGrid.collapseRow(l):v.treeGrid.expandRow(l),y(v._getuirow(l)),e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault();else{if(!(e.target&&e.target.className.indexOf&&0<=e.target.className.indexOf("checkbox")&&v.treeGrid)){n=oe(t).index(),d=v.columns.records[n];if(e.stopPropagation&&e.stopPropagation(),v.editable&&null==v.editKey&&v._lastSelectedKey==l&&v.editSettings.editOnDoubleClick&&g){v.beginroweditbykey(l,d);return!0}if(v.isTouchDevice()&&v.scrolled&&new Date-v.scrolled<500)return v.enableBrowserSelection||e.preventDefault&&e.preventDefault(),!1;if("singlerow"===v.selectionMode&&"custom"!==v.selectionMode)return v.selectrowbykey(l,"mouse",!1),v._lastSelectedKey=l,v._updateSelection(),e.preventDefault&&e.preventDefault(),a(),!0;if("custom"!==v.selectionMode&&(e.ctrlKey||e.metaKey||v.clearSelection(!1),e.shiftKey&&v._lastSelectedKey)){var p=v.rowinfo[v._lastSelectedKey];v._doSelection(v._lastSelectedKey,!0,!1);var f=oe(v._table.children()[1]).children("[data-key="+v._lastSelectedKey+"]").index(),m=o.index();return v._selectRange(m,f),v.selectrowbykey(l,"mouse",!1),v._updateSelection(),e.preventDefault&&e.preventDefault(),a(),!0}return v._lastSelectedKey=l,v.clickTime=new Date,"custom"===v.selectionMode||(p&&(p.selected?v.unselectrowbykey(l,"mouse",!1):v.selectrowbykey(l,"mouse",!1),a()),v._updateSelection(),v.enableBrowserSelection||e.preventDefault&&e.preventDefault()),!0}p.checked?v.treeGrid.uncheckRow(l):v.treeGrid.checkRow(l),y(v._getuirow(l)),e.stopPropagation&&e.stopPropagation()}}}})},_updateSelection:function(){var e=this,t=oe(e._table.children()[1]).children(),i=e._pinnedTable?oe(e._pinnedTable.children()[1]).children():null,r=e.rowDetails&&!e.treeGrid?1:0,s=0;0<r&&e.rtl&&(r=0,s=1);for(var o=0;o<t.length;o++){var l,a=t[o].cells;i&&(l=i[o].cells);var n=null;if(t[o].getAttribute&&(n=t[o].getAttribute("data-key")),e.rowinfo[n]&&"none"!==e.selectionMode)if(e.rowinfo[n].selected)for(var d=r;d<a.length-s;d++){var h=a[d];oe(h).addClass(e.toTP("jqx-grid-cell-selected")+" "+e.toTP("jqx-fill-state-pressed")),l&&oe(l[d]).addClass(e.toTP("jqx-grid-cell-selected")+" "+e.toTP("jqx-fill-state-pressed"))}else for(d=r;d<a.length-s;d++){var c,h=a[d];l&&(c=l[d]);var u=h.className;u=(u=(u=(u=u.replace(" jqx-fill-state-pressed","")).replace(" jqx-fill-state-pressed-"+e.theme,"")).replace(" jqx-grid-cell-selected","")).replace(" jqx-grid-cell-selected-"+e.theme,""),h.className=u,c&&(c.className=u)}}},_selectRange:function(e,t){var i=oe(oe(this._table.children()[1]).children()[t]);if(t<e)for(var r=t,s=i;r<e;){var o=(s=s.next()).attr("data-key");this._doSelection(o,!0,!1),r++}else if(e<t)for(r=t,s=i;e<r;){o=(s=s.prev()).attr("data-key");this._doSelection(o,!0,!1),r--}},_getuikey:function(e,t){var i=null,r=oe(this._table.children()[1]).children(),i=oe(r[e]).attr("data-key");if(oe(r[e]).attr("data-role")){var s=oe(r[e]);if("next"==t)for(;s;){if(s=s.next())if(!s.attr("data-role"))return i=s.attr("data-key")}else if("prev"==t)for(;s;){if(s=s.prev())if(!s.attr("data-role"))return i=s.attr("data-key")}return null}return i},getRows:function(){return this.source.records},getView:function(){var s=this,o=this._names(),e=new Array,l=function(e,t){if(t)for(var i,r=0;r<t.length;r++){t[r]&&!1!==t[r]._visible&&(i=oe.extend({},t[r]),e.push(i),(t[r][o.expanded]||0<s.dataview.filters.length)&&(i.records=new Array,l(i.records,t[r].records)))}};return l(e,this.dataViewRecords),e},getKeys:function(){for(var e=new Array,t=this.source.records,i=0;i<t.length;i++)e.push(t[i].uid);return e},getKey:function(e){var t=this.getRows();return t?t[e].uid:-1},_getkey:function(l){if(this._loading)throw new Error("jqxDataTable: "+this.loadingErrorMessage);function e(){var e=oe(this._table.children()[1]).children(),t=null,i=0;if(this.pageable&&(i-=this.dataview.pagenum*this.dataview.pagesize),0<this.groups.length){for(var r=0,s=0;s<e.length;s++){var o=oe(e[s]);if(!(0<o.children()[0].getAttribute("colspan"))){if(r===i+l)return t=o.attr("data-key");r++}}return t}if(this.rowDetails)for(s=r=0;s<e.length;s++){if(r===l+i)return t=oe(e[s]).attr("data-key");s%2==1&&r++}else t=oe(e[i+l]).attr("data-key");return t}var t=null;if(null==(t=e.call(this))&&this.pageable){var i=Math.floor(l/this.dataview.pagesize);if(this.dataview.pagenum!=i){var r=this.getRows()[l];if(r&&null!=r.uid)return r.uid;if(isNaN(i))return null;this.goToPage(i),t=e.call(this)}}return t},_getuirow:function(t){try{var e=oe(this._table.children()[1]).children("[data-key="+t+"]");if(0<e.length)return e}catch(e){for(var i=oe(this._table.children()[1]).children(),r=0;r<i.length;r++){var s=i[r];if(t==s.getAttribute("data-key"))return oe(s)}return null}return null},_getpinneduirow:function(t){if(!this._pinnedTable)return null;try{var e=oe(this._pinnedTable.children()[1]).children("[data-key="+t+"]");if(0<e.length)return e}catch(e){for(var i=oe(this._pinnedTable.children()[1]).children(),r=0;r<i.length;r++){var s=i[r];if(t==s.getAttribute("data-key"))return oe(s)}return null}return null},_names:function(){var e={leaf:"leaf",parent:"parent",expanded:"expanded",checked:"checked",selected:"selected",level:"level",icon:"icon",data:"data"};if(!this.source||this.source&&!this.source._source.hierarchy)return e;var t=this.source._source.hierarchy.reservedNames;return t||e},_getMatches:function(i,e){if(null==i||0==i.length)return-1;var t=this.renderedRecords;null!=e&&(t=t.slice(e));var r,s=0;this.rowDetails&&!this.treeGrid&&s++,s<this.columns.records.length?r=this.columns.records[s].datafield:new Array;var o=new Array;return oe.each(t,function(e){var t=(t=this[r])||"";oe.jqx.string.startsWithIgnoreCase(t.toString(),i)&&o.push(this.uid)}),o},_handleKey:function(e){if(this._loading)return!0;if(oe(e.target).ischildof(this.filter))return!0;if(oe(e.target).ischildof(this.toolbar))return!0;if(oe(e.target).ischildof(this.statusbar))return!0;var t=this._names(),o=this,r=e.charCode?e.charCode:e.keyCode?e.keyCode:0,i=this._lastSelectedKey,s=(this.rowinfo[i],this._getuirow(i)),l=e.shiftKey&&"singlerow"!=this.selectionMode,a=e.ctrlKey||e.metaKey;if(s){if(this.handleKeyboardNavigation)if(this.handleKeyboardNavigation(r))return!0;if(this.editable&&null==this.editKey&&113===r&&this.editSettings.editOnF2&&this.beginroweditbykey(s.attr("data-key")),null==this.editKey&&!a&&!l&&this.incrementalSearch&&!(33<=r&&r<=40)){this._searchString||(this._searchString=""),(8==r||46==r)&&1<=this._searchString.length&&(this._searchString=this._searchString.substr(0,this._searchString.length-1));var n,d,h=String.fromCharCode(r),c=!isNaN(parseInt(h));if(65<=r&&r<=97||c||8==r||32==r||46==r){if(e.shiftKey||(h=h.toLocaleLowerCase()),8!=r&&32!=r&&46!=r&&(0<this._searchString.length&&this._searchString.substr(0,1)==h||(this._searchString+=h)),32==r&&(this._searchString+=" "),this._searchTime=new Date,1<=(i=this.getSelection()).length){for(var u=i[0].uid,g=-1,p=0;p<this.renderedRecords.length;p++)if(this.renderedRecords[p].uid==u){g=p;break}(0==(f=this._getMatches(this._searchString,g)).length||0<f.length&&f[0]==u)&&(f=this._getMatches(this._searchString))}else var f=this._getMatches(this._searchString);0<f.length&&(!(1<=(i=this.getSelection()).length)||-1==(n=f.indexOf(i[0].uid))?(this.clearSelection(!1),this.selectrowbykey(f[0])):((d=n+1)>=f.length&&(d=0),this.clearSelection(!1),this.selectrowbykey(f[d])),this._lastSearchString=this._searchString)}null!=this._searchTimer&&clearTimeout(this._searchTimer),27!=r&&13!=r||(this._searchString="",this._lastSearchString=""),this._searchTimer=setTimeout(function(){o._searchString="",o._lastSearchString=""},500)}if(null!=this.editKey){if(27===r&&this.editSettings.cancelOnEsc)this.endroweditbykey(this.editKey,!0);else if(13===r&&this.editSettings.saveOnEnter){if(e.target&&"div"!=e.target.nodeName.toLowerCase()&&"input"!=e.target.nodeName.toLowerCase())return!0;this.endroweditbykey(this.editKey,!1)}else if(this.editSettings.editSingleCell&&this.editColumn){var m=this.columns.records.indexOf(this.editColumn);if(9==r&&m<this.columns.records.length-1&&!e.shiftKey){for(var v=this.editKey,w=null,p=m+1;p<this.columns.records.length;p++)if(this.columns.records[p].editable&&!this.columns.records[p].hidden){w=this.columns.records[p];break}w&&(this.endroweditbykey(this.editKey,!1),this.beginroweditbykey(v,w))}else if(9==r&&e.shiftKey&&0<m){for(var v=this.editKey,y=null,p=m-1;0<=p;p--)if(this.columns.records[p].editable&&!this.columns.records[p].hidden){y=this.columns.records[p];break}y&&(this.endroweditbykey(this.editKey,!1),this.beginroweditbykey(v,y))}if(9==r){var x=this.rowinfo[this.editKey],g=this.getrowindex(x),s=this._getuirow(this.editKey);if(e.shiftKey||w){if(!y&&e.shiftKey){for(b=null,p=this.columns.records.length-1;0<=p;p--)if(this.columns.records[p].editable&&!this.columns.records[p].hidden){b=this.columns.records[p];break}if(b){for(;s;){if(s=s.prev())if(!s.attr("data-role")){_=s.attr("data-key");break}}_&&(this.clearSelection(!1),this._lastSelectedKey=_,x=this.rowsByKey[_],g=this.getrowindex(x),F=this.getrowdisplayindex(x),this._raiseEvent("rowSelect",{key:_,index:F,boundIndex:g,row:this.rowsByKey[_]}),this.endroweditbykey(this.editKey,!1),this._doSelection(_,!0,!0),this.beginroweditbykey(_,b))}}}else{for(var b=null,p=0;p<this.columns.records.length;p++)if(this.columns.records[p].editable&&!this.columns.records[p].hidden){b=this.columns.records[p];break}if(b){for(;s;){if(s=s.next())if(!s.attr("data-role")){var _=s.attr("data-key");break}}_&&(this.clearSelection(!1),this._lastSelectedKey=_,x=this.rowsByKey[_],g=this.getrowindex(x),F=this.getrowdisplayindex(x),this._raiseEvent("rowSelect",{key:_,index:F,boundIndex:g,row:this.rowsByKey[_]}),this.endroweditbykey(this.editKey,!1)?(this._doSelection(_,!0,!0),this.beginroweditbykey(_,b)):this.beginroweditbykey(this.editKey,b))}}return!1}}return!0}if(e.ctrlKey||e.metaKey){var j=String.fromCharCode(r).toLowerCase();if("c"==j||"x"==j)if(1<=(i=this.getSelection()).length){for(var q,S="",T=0;T<this.renderedRecords.length;T++)for(var C=this.renderedRecords[T],p=0;p<i.length;p++){if((x=i[p]).uid===C.uid){for(var P=0;P<this.columns.records.length;P++){S+=this.getCellTextByKey(x.uid,this.columns.records[P].displayfield),P<this.columns.records.length-1&&(S+="\t")}S+="\r\n";break}}""!=S&&(S=S.substring(0,S.length-1)),window.clipboardData?window.clipboardData.setData("Text",S):((q=oe('<textarea style="position: absolute; left: -1000px; top: -1000px;"/>')).val(S),oe("body").append(q),q.select(),setTimeout(function(){document.designMode="off",q.select(),q.remove()},100))}}if(32===r&&this.treeGrid&&this.treeGrid.checkboxes){if(1<(i=this.getSelection()).length){for(p=0;p<i.length;p++){var z=i[p].uid;this.rowinfo[z].checked?this.treeGrid.uncheckRow(z,!1):this.treeGrid.checkRow(z,!1)}return this._renderrows(),!1}if(u=s.attr("data-key"))return this.rowinfo[u].checked?this.treeGrid.uncheckRow(u):this.treeGrid.checkRow(u),!1}function B(e){var t=null,i=oe(o._table.children()[1]).children().length-1,r=oe(oe(o._table.children()[1]).children()[i]),s=r.attr("data-role");if(s)for(;r;){if(r=r.prev())if(!(s=r.attr("data-role"))){t=r.attr("data-key");break}}else t=r.attr("data-key");return"all"==e?{row:r,key:t}:t}function H(e){var t=null,i=oe(oe(o._table.children()[1]).children()[0]),r=i.attr("data-role");if(r)for(;i;){if(i=i.next())if(!(r=i.attr("data-role"))){t=i.attr("data-key");break}}else t=i.attr("data-key");return"all"==e?{row:i,key:t}:t}function k(){a||l||o.clearSelection(!1),33==r||37==r?(t=D,u=(u=o._getuikey(t,"prev"))||H()):34==r||39==r?(t=D,u=(u=o._getuikey(t,"next"))||B()):38==r?u=B():40==r&&(u=H()),o._lastSelectedKey=u;var e=o.rowsByKey[u],t=o.getrowindex(e),i=o.getrowdisplayindex(e);o._raiseEvent("rowSelect",{key:u,index:i,boundIndex:t,row:o.rowsByKey[u]}),o._doSelection(u,!0,!0),o.host.focus()}var D=s.index(),u=null;if(this.treeGrid&&this.rtl&&(37==r?r=39:39==r&&(r=37)),36==r||a&&38==r)return function(){o.clearSelection(!1);var e=H();l||a?o._selectRange(s.index(),0):o._lastSelectedKey=e,o.selectrowbykey(e,"keyboard")}(),!1;if(35==r||a&&40==r)return function(){o.clearSelection(!1);var e=B("all"),t=e.key;l||a?o._selectRange(s.index(),e.row.index()):o._lastSelectedKey=t,o.selectrowbykey(t,"keyboard")}(),!1;if(33==r||37==r){u=s.attr("data-key");if(this.rowDetails&&37==r&&!this.treeGrid)return this.hidedetailsbykey(u),!1;if(this.treeGrid&&37==r){if(this.rowinfo[u].row&&!this.rowinfo[u].row[t.parent]&&!this.rowinfo[u][t.leaf]&&!this.rowinfo[u].expanded)return!1;if(this.rowinfo[u].expanded&&!this.rowinfo[u][t.leaf])return this.treeGrid.collapseRow(u),!1;if(this.rowinfo[u].row&&this.rowinfo[u].row[t.parent]&&(u=this.rowinfo[u].row[t.parent].uid),this.rowinfo[u][t.leaf])return!1}if(this.pageable&&!this.treeGrid)return this.rtl?this.goToNextPage(k):this.goToPrevPage(k),!1;if(this.treeGrid&&this.pageable&&33==r)return this.goToPrevPage(k),!1}else if(34==r||39==r){u=s.attr("data-key");if(this.rowDetails&&39==r&&!this.treeGrid)return this.showdetailsbykey(u),!1;if(this.treeGrid&&39==r){if(this.rowinfo[u][t.leaf])return!1;if(!this.rowinfo[u].expanded)return this.treeGrid.expandRow(u),!1;if(this.rowinfo[u].row&&this.rowinfo[u].row.records&&0<this.rowinfo[u].row.records.length)if(0<this.dataview.filters.length){for(var I=this.rowinfo[u].row.records,p=0;p<I.length;p++)if(I[p]._visible){u=I[p].uid;break}}else u=this.rowinfo[u].row.records[0].uid}if(this.pageable&&!this.treeGrid)return this.rtl?this.goToPrevPage(k):this.goToNextPage(k),!1;if(this.treeGrid&&this.pageable&&34==r)return this.goToNextPage(k),!1}else if(38==r){for(;s;){if(s=s.prev())if(!s.attr("data-role")){u=s.attr("data-key");break}}if(this.pageable&&null==u)return this.goToPrevPage(k),!1}else if(40==r){for(;s;){if(s=s.next())if(!s.attr("data-role")){u=s.attr("data-key");break}}if(this.pageable&&null==u)return this.goToNextPage(k),!1}if(null!=u){if(a||l||this.clearSelection(!1),this.rowinfo[u]&&this.rowinfo[u].selected&&(a||l)){this._doSelection(this._lastSelectedKey,!1,!1),this._lastSelectedKey=u;x=this.rowsByKey[u],g=this.getrowindex(x);o._updateSelection();var F=this.getrowdisplayindex(x);return this._raiseEvent("rowUnselect",{key:u,index:F,boundIndex:g,row:x}),!1}this._lastSelectedKey=u;x=this.rowsByKey[u],g=this.getrowindex(x);this._doSelection(u,!0,!1),o._updateSelection();F=this.getrowdisplayindex(x);if(this._raiseEvent("rowSelect",{key:u,index:F,boundIndex:g,row:x}),this.treeGrid)if(37==r){var M=null;if((s=this._getuirow(u))&&(s.attr("data-role")||(M=s.attr("data-key"))),this.pageable&&null==M&&0<this.dataview.pagenum)for(;null==this._getuirow(u)&&0<this.dataview.pagenum;)this.goToPrevPage()}else{39==r&&(M=null,(s=this._getuirow(u))&&(s.attr("data-role")||(M=s.attr("data-key"))),this.pageable&&null==M&&this.goToNextPage())}return!1}}},_selection:function(e){if("selectionStart"in e[0]){var t=e[0],i=t.selectionEnd-t.selectionStart;return{start:t.selectionStart,end:t.selectionEnd,length:i,text:t.value}}var r=document.selection.createRange();if(null==r)return{start:0,end:t.value.length,length:0};var s=e[0].createTextRange(),o=s.duplicate();s.moveToBookmark(r.getBookmark()),o.setEndPoint("EndToStart",s);i=r.text.length;return{start:o.text.length,end:o.text.length+r.text.length,length:i,text:r.text}},_doSelection:function(e,t,i){var r;null!=e?("singlerow"===this.selectionMode&&this.clearSelection(!1),(r=this.rowinfo[e])?(r.selected=t,this.ensurerowvisiblebykey(e)):(this.ensurerowvisiblebykey(e),(r=this.rowinfo[e])?r.selected=t:this.rowinfo[e]={selected:t}),"none"!=this.selectionMode&&!1!==i&&this._renderrows()):this.clearSelection()},clearSelection:function(e){if(this.rowinfo){var t=this.getRows();for(var i in this.rowinfo){var r,s,o=this.rowinfo[i];o.selected&&(o.selected=!1,r=t.indexOf(o.row),s=this.getrowdisplayindex(o.row),this._raiseEvent("rowUnselect",{key:i,index:s,boundIndex:r,row:o.row}))}}!1!==e&&this._renderrows()},exportData:function(h){if(!oe.jqx.dataAdapter.ArrayExporter){if(!this.treeGrid)throw"jqxDataTable: Missing reference to jqxdata.export.js!";throw"jqxTreeGrid: Missing reference to jqxdata.export.js!"}var c=this.exportSettings.columnsHeader;null==c&&(c=!0);var e=this.exportSettings.hiddenColumns;null==e&&(e=!1);var t=this.exportSettings.serverURL,i=this.exportSettings.characterSet,a=this.exportSettings.collapsedRecords;null==a&&(a=!1);var r=this.exportSettings.fileName;void 0===r&&(r=this.treeGrid?"jqxTreeGrid_Data":"jqxDataTable_Data");var s,l,o,u=this,g=this.getRows();if(1==this.exportSettings.recordsInView&&(g=this.getView()),this.treeGrid&&this.treeGrid.virtualModeCreateRecords&&(g=this.treeGrid.getRows()),this.groups&&0<this.groups.length&&(s=this.source.getGroupedRecords(this.groups,"records","label",null,"data",null,"parent",g),o=(l=function(e,t){for(var i=0;i<e.length;i++){var r=oe.extend({},e[i]);if(t.push(r),r.records&&0<r.records.length)for(var s=l(r.records,new Array),o=0;o<s.length;o++)s[o].leaf,t.push(s[o])}return t}).call(this,s,new Array),g=o),0==g.length)throw"No data to export.";this.exporting=!0,this.altRows&&this._renderrows();for(var p=new Array,n=0;n<this.columns.records.length;n++)!e&&this.columns.records[n].hidden||p.push(oe.extend({},this.columns.records[n]));if(this.groups&&0<this.groups.length&&0<p.length)for(var d=this._names(),n=0;n<g.length;n++)g[n][d.leaf]||(u.rtl?g[n][p[p.length-1].displayfield]=g[n].label:g[n][p[0].displayfield]=g[n].label);var f=0;if(this.treeGrid){var m=this.treeGrid.getRows();1==this.exportSettings.recordsInView&&(m=this.getView());var d=this._names(),v=function(e){for(var t=0;t<e.length;t++){var i=e[t],r=i[d.expanded]||!i[d.expanded]&&a;f=Math.max(f,1+i[d.level]),i.records&&0<i.records.length&&r&&v(e[t].records)}};if(v(m),"xml"!=h&&"json"!=h){for(var w=p.length,n=0;n<f;n++){(O=new V(this,this)).width=this.indentWidth,O.datafield="Level"+n,O.displayfield="Level"+n,O.align="center",O.cellsalign="center",O.text="",this.rtl?p.splice(w,0,O):p.splice(n,0,O)}var y=new Array,x=!(!this.source._source.hierarchy||!this.source._source.hierarchy.groupingDataFields),b=function(e){for(var t=0;t<e.length;t++){for(var i=oe.extend({},e[t]),r=0;r<i[d.level];r++)i["Level"+r]="";var s=i[d.expanded]||!i[d.expanded]&&a;("xls"==h||"html"==h||"pdf"==h)&&i.records&&0<i.records.length?i["Level"+i[d.level]]=s?"-":"+":i["Level"+i[d.level]]="",i[d.leaf]&&(i["Level"+i[d.level]]="");for(r=i[d.level]+1;r<f;r++)i["Level"+r]="";if(x&&!i[d.leaf]&&(u.rtl?i[p[p.length-f-1].displayfield]=i.label:i[p[f].displayfield]=i.label),i.aggregate)for(var o="xls"==h?"_AG":"",r=f;r<p.length;r++){var l=r;u.rtl&&(l=p.length-r-1),null!=i[p[l].displayfield]&&(i[p[l].displayfield]=o+i[p[l].displayfield])}y.push(i),s&&!i[d.leaf]&&b(i.records)}};b(m),g=y}else g=m}var _=null!=e&&e,j={},q={},S=this.host.find(".jqx-grid-cell:first"),T=this.host.find(".jqx-grid-cell-alt:first"),C=this;S.removeClass(C.toThemeProperty("jqx-grid-cell-selected")),S.removeClass(C.toThemeProperty("jqx-fill-state-pressed")),T.removeClass(C.toThemeProperty("jqx-grid-cell-selected")),T.removeClass(C.toThemeProperty("jqx-fill-state-pressed")),S.removeClass(C.toThemeProperty("jqx-grid-cell-hover")),S.removeClass(C.toThemeProperty("jqx-fill-state-hover")),T.removeClass(C.toThemeProperty("jqx-grid-cell-hover")),T.removeClass(C.toThemeProperty("jqx-fill-state-hover"));for(var P,z,B,H="cell",k=1,D=1,I=[],F=0;F<p.length;F++){if(""!=(O=p[F]).cellclassname)if(O.customCellStyles=new Array,"string"==typeof O.cellclassname)O.customCellStyles.push(O.cellclassname);else for(n=0;n<g.length;n++){var M=O.cellclassname(n,O.displayfield,g[n][O.displayfield],g[n]);M&&(O.customCellStyles[n]=M)}}if(oe.each(p,function(e){var t=e;u.treeGrid&&(f<=e?t=p.length-f-1:0<f&&e<f&&(t=0));var i,r=oe(u._table[0].rows[0].cells[t]);1<u._table[0].rows.length&&(0==(i=oe(u._table[0].rows[1].cells[t])).length&&(i=oe(u._table[0].rows[1].cells[0]))),0==r.length&&(r=oe(u._table[0].rows[0].cells[0]));function s(e){if(e.removeClass(C.toThemeProperty("jqx-cell")),e.removeClass(C.toThemeProperty("jqx-grid-cell-selected")),e.removeClass(C.toThemeProperty("jqx-fill-state-pressed")),e.removeClass(C.toThemeProperty("jqx-grid-cell-hover")),e.removeClass(C.toThemeProperty("jqx-fill-state-hover")),o.customCellStyles)for(var t in o.customCellStyles)e.removeClass(o.customCellStyles[t])}var o=this;if(s(r),i&&s(i),null==this.displayfield)return!0;u.showAggregates&&u.getcolumnaggregateddata&&(u.treeGrid?I.push(u.getcolumnaggregateddata(this.displayfield,this.aggregates,!0,function(e,t){for(var i=0;i<e.length;i++){var r=e[i];0===r.level&&t.push(r)}return t}(g,[]))):I.push(u.getcolumnaggregateddata(this.displayfield,this.aggregates,!0,g)));var d=u._getexportcolumntype(this);!this.exportable||this.hidden&&!_||(j[this.displayfield]={},j[this.displayfield].text=this.text,j[this.displayfield].width=parseInt(this.width),isNaN(j[this.displayfield].width)&&(j[this.displayfield].width=60),500<j[this.displayfield].width&&(j[this.displayfield].width=500),j[this.displayfield].formatString=this.cellsFormat,j[this.displayfield].localization=u.gridlocalization,j[this.displayfield].type=d,j[this.displayfield].cellsAlign=this.cellsalign,j[this.displayfield].hidden=!c,j[this.displayfield].index=t,j[this.displayfield].maxIndex=p.length),H="cell"+k;var l=this.element;if("json"!=h&&"xml"!=h){function a(e,t,i,r,s,o,l,a,n){q[e]={index:1+l,maxIndex:p.length},o.rtl&&(q[e].index=p.length-l),"html"!=h&&"xls"!=h&&"pdf"!=h||(t&&(q[e]["font-size"]=t.css("font-size"),q[e]["font-weight"]=t.css("font-weight"),q[e]["font-style"]=t.css("font-style"),q[e]["background-color"]=o._getexportcolor(t.css("background-color")),q[e].color=o._getexportcolor(t.css("color")),q[e]["border-color"]=o._getexportcolor(t.css("border-top-color"))),i?q[e]["text-align"]=s.align:(q[e]["text-align"]=s.cellsalign,q[e].formatString=s.cellsFormat,q[e].dataType=d),"html"!=h&&"pdf"!=h||(q[e]["border-top-width"]="0px",o.rtl?(q[e]["border-left-width"]="1px",q[e]["border-right-width"]="0px",l==p.length-f-1&&i&&(q[e]["border-right-width"]="1px")):(q[e]["border-left-width"]="0px",q[e]["border-right-width"]="1px"),q[e]["border-bottom-width"]="1px",t&&(q[e]["border-top-style"]=t.css("border-top-style"),q[e]["border-left-style"]=t.css("border-left-style"),q[e]["border-right-style"]=t.css("border-right-style"),q[e]["border-bottom-style"]=t.css("border-bottom-style")),i?(0!=l||o.rtl?l==p.length-1&&o.rtl&&(q[e]["border-right-width"]="1px"):q[e]["border-left-width"]="1px",t&&(q[e]["border-top-width"]="1px",q[e]["border-bottom-width"]=t.css("border-bottom-width"))):0!=l||o.rtl?l==p.length-1&&o.rtl&&(q[e]["border-right-width"]="1px"):q[e]["border-left-width"]="1px",t&&(q[e].height=t.css("height")),o.treeGrid&&!i&&(q[e].index-1<f?o.rtl?q[e]["border-left-width"]="0px":q[e]["border-right-width"]="0px":q[e].index-1==f&&(o.rtl?q[e]["border-right-width"]="0px":q[e]["border-left-width"]="0px")))),!s.exportable||s.hidden&&!_||(1==a?(j[s.displayfield].customCellStyles||(j[s.displayfield].customCellStyles=new Array),j[s.displayfield].customCellStyles[n]=e):i?j[s.displayfield].style=e:r?j[s.displayfield].cellAltStyle=e:j[s.displayfield].cellStyle=e)}if(a("column"+D,l,!0,!1,this,u,e),D++,a(H,r,!1,!1,this,u,e),u.altRows&&a(H="cellalt"+k,i,!1,!0,this,u,e),this.customCellStyles){for(var n in o.customCellStyles)r.removeClass(o.customCellStyles[n]);for(var n in o.customCellStyles)r.addClass(o.customCellStyles[n]),a(H+o.customCellStyles[n],r,!1,!1,this,u,e,!0,n),r.removeClass(o.customCellStyles[n])}k++}}),"json"!=h&&"xml"!=h&&0<f&&this.treeGrid){var R=f+1;if(this.rtl&&(R=p.length-f),q["column"+R]){var L=q["column"+R];L.merge=f,L["border-left-width"]="1px";q["cell"+R];for(n=0;n<p.length;n++){R=n+1;if(this.rtl&&(R=p.length-n),q["column"+R].level=n,q["column"+R].maxLevel=f,q["cell"+R].maxLevel=f,(O=p[n]).customCellStyles)for(var A in O.customCellStyles)q["cell"+R+O.customCellStyles[A]]&&(q["cell"+R+O.customCellStyles[A]].maxLevel=f);q["cellalt"+R]&&(q["cellalt"+R].maxLevel=f)}for(n=0;n<f;n++){var R=n+1,K=n;this.rtl&&(R=p.length-n);var O,N=q["column"+R];if(N.disabled=!0,q["cell"+R].level=K,q["cell"+R].maxLevel=f,q["column"+R].level=K,q["cellalt"+R]&&(q["cellalt"+R].level=K,q["cellalt"+R].maxLevel=f),(O=p[n]).customCellStyles)for(var A in O.customCellStyles)q["cell"+R+O.customCellStyles[A]]&&(q["cell"+R+O.customCellStyles[A]].maxLevel=f,q["cell"+R+O.customCellStyles[A]].level=K);"html"!=h&&"pdf"!=h&&"xls"!=h||(N["font-size"]=L["font-size"],N["font-weight"]=L["font-weight"],N["font-style"]=L["font-style"],N["background-color"]=L["background-color"],N.color=L.color,N["border-color"]=L["border-color"],"html"!=h&&"pdf"!=h||(N["border-top-width"]=L["border-top-width"],N["border-left-width"]=L["border-left-width"],this.rtl&&(N["border-right-width"]=L["border-right-width"],0==n&&(N["border-right-width"]="1px")),(0==n&&!this.rtl||0==n&&this.rtl)&&(N["border-left-width"]="0px"),this.rtl?this.rtl&&(N["border-left-width"]="0px"):N["border-right-width"]="0px",N["border-bottom-width"]="0px",N=q["cell"+R],this.rtl?this.rtl&&(N["border-left-width"]="0px"):N["border-right-width"]="0px"))}}}this.showAggregates&&(P=[],z="xls"==h?"_AG":"",B=0,this.rowDetails&&!this.treeGrid&&B++,0<I.length&&(oe.each(p,function(e){if(this.aggregates)for(var t,i,r,s=0;s<this.aggregates.length;s++){P[s]||(P[s]={}),P[s]&&(t=u._getaggregatename(this.aggregates[s]),i=u._getaggregatetype(this.aggregates[s]),(r=I[e-B])&&(P[s][this.displayfield]=z+t+": "+r[i]))}}),oe.each(p,function(e){for(var t=0;t<P.length;t++)null==P[t][this.displayfield]&&(P[t][this.displayfield]=z)})),oe.each(P,function(){g.push(this)}));var C=this,E=oe.jqx.dataAdapter.ArrayExporter(g,j,q,t,this.treeGrid&&("xml"==h||"json"==h));if(null==r){this._renderrows();var G=this.treeGrid&&("xml"==h||"json"==h),W=E.exportTo(h,this.treeGrid&&("xml"==h||"json"==h));return this.showAggregates&&oe.each(P,function(){g.pop(this)}),setTimeout(function(){C.exporting=!1},50),W}G=this.treeGrid&&("xml"==h||"json"==h);E.exportToFile(h,r,t,i,G),this.showAggregates&&oe.each(P,function(){g.pop(this)}),this._renderrows(),setTimeout(function(){C.exporting=!1},50)},_getexportcolor:function(e){var t,i="transparent"==e?"#FFFFFF":e;if(i&&i.toString()||(i="#FFFFFF"),-1==i.toString().indexOf("rgb"))return-1!=i.toString().indexOf("#")&&4==i.toString().length&&(t=i.toString().substring(1,4),i+=t),i;var r=i.split(",");if(-1!=i.toString().indexOf("rgba")){var s=parseInt(r[0].substring(5)),o=parseInt(r[1]),l=parseInt(r[2]),a=parseFloat(r[3].substring(1,4)),n={r:s,g:o,b:l},d=this._rgbToHex(n);return 0==s&&0==o&&0==l&&0==a?"#ffffff":"#"+d}n={r:s=parseInt(r[0].substring(4)),g:o=parseInt(r[1]),b:l=parseInt(r[2].substring(1,4))};return"#"+(d=this._rgbToHex(n))},_rgbToHex:function(e){return this._intToHex(e.r)+this._intToHex(e.g)+this._intToHex(e.b)},_intToHex:function(e){var t=parseInt(e).toString(16);return 1==t.length&&(t="0"+t),t.toUpperCase()},_getexportcolumntype:function(e){var t="string",i=this.source.datafields||(this.source._source?this.source._source.datafields:null);if(i){var r="";if(oe.each(i,function(){if(this.name==e.displayfield)return this.type&&(r=this.type),!1}),r)return r}if(null!=e){if(null==this.dataview.cachedrecords)return t;var s=null;if(this.virtualmode)oe.each(this.dataview.cachedrecords,function(){return s=this[e.displayfield],!1});else{if(0==this.dataview.cachedrecords.length)return t;if(null!=(s=this.dataview.cachedrecords[0][e.displayfield])&&""==s.toString())return"string"}if(null!=s){if(-1!=e.cellsFormat.indexOf("c"))return"number";if(-1!=e.cellsFormat.indexOf("n"))return"number";if(-1!=e.cellsFormat.indexOf("p"))return"number";if(-1!=e.cellsFormat.indexOf("d"))return"date";if(-1!=e.cellsFormat.indexOf("y"))return"date";if(-1!=e.cellsFormat.indexOf("M"))return"date";if(-1!=e.cellsFormat.indexOf("m"))return"date";if(-1!=e.cellsFormat.indexOf("t"))return"date";if("boolean"==typeof s)t="boolean";else if(oe.jqx.dataFormat.isNumber(s))t="number";else{var o=new Date(s);if("NaN"==o.toString()||"Invalid Date"==o.toString())if(oe.jqx.dataFormat){if(null!=(o=oe.jqx.dataFormat.tryparsedate(s))){if(o&&o.getFullYear()&&1970==o.getFullYear()&&0==o.getMonth()&&1==o.getDate()){var l=new Number(s);return isNaN(l)?"string":"number"}return"date"}t="string"}else t="string";else t="date"}}}return t},showDetails:function(e){var t=this._getkey(e);this.showdetailsbykey(t)},hideDetails:function(e){var t=this._getkey(e);this.hidedetailsbykey(t)},setCellValueByKey:function(e,t,i){var r=this.rowsByKey[e],s=this.getrowindex(r),o=r;if(null!=o&&o[t]==i)return!1;if(null==o||null!==o[t]||""!==i){var l="";if(null!=o&&o[t]!==i){var a,n,d,h=this.getColumn(t),c="string";if((f=this.source.datafields||(this.source._source?this.source._source.datafields:null))&&(a="",oe.each(f,function(){if(this.name==h.displayfield)return this.type&&(a=this.type),!1}),a&&(c=a)),l=o[t],!h.nullable||null!=i&&""!==i&&h.nullable&&void 0===i.label)if(oe.jqx.dataFormat.isNumber(l)||"number"==c||"float"==c||"int"==c||"decimal"==c&&"date"!=c?(i=new Number(i),i=parseFloat(i),isNaN(i)&&(i=0)):!oe.jqx.dataFormat.isDate(l)&&"date"!=c||""==i||(n=i,"Invalid Date"!=(n=new Date(n))&&null!=n?i=n:"Invalid Date"==n&&(i=n=new Date)),o[t]===i)return;this.dataview._filteredData=null,this.dataview._sortData=null,this.dataview._sortHierarchyData=null,o[t]=i,this.treeGrid&&(d=this.treeGrid.getRow(e))&&(d[t]=i),null!=i&&null!=i.label&&(o[(h=this.getColumn(t)).displayfield]=i.label,o[t]=i.value,this.treeGrid&&(d=this.treeGrid.getRow(e))&&(d[h.displayfield]=i.label,d[t]=i.value))}if(this.source&&this.source._knockoutdatasource&&!this._updateFromAdapter&&this.autokoupdates&&this.source._source._localdata){var u=s,g=this.source._source._localdata()[u];this.source.suspendKO=!0;var p=g;if(p[t]&&p[t].subscribe)null!=i&&null!=i.label?(p[h.displayfield](i.label),p[t](i.value)):p[t](i);else{var f=this.source._source.datafields,m=null;if(f&&oe.each(f,function(){if(this.name==t)return m=this.map,!1}),null==m)null!=i&&null!=i.label?(p[t]=i.value,p[h.displayfield]=i.label):p[t]=i;else{var v=m.split(this.source.mapChar);if(0<v.length){for(var w=p,y=0;y<v.length-1;y++)w=w[v[y]];w[v[v.length-1]]=i}}this.source._source._localdata.replace(g,oe.extend({},p))}this.source.suspendKO=!1}if(this.source.updaterow){try{null==this.source.updaterow(e,o,function(e){0==e&&this.setCellValue(r,t,l,!0,!1)})&&0}catch(e){return void this.setCellValue(r,t,l)}}var x=this.getrowdisplayindex(r),h=this.getColumn(t);this._raiseEvent("cellValueChanged",{value:i,oldValue:l,dataField:t,displayField:h.displayfield,key:e,boundIndex:s,index:x,row:this.rowsByKey[e]}),this.editable&&null!=this.editKey||this._renderrows()}},setCellValue:function(e,t,i){if(null==e||null==t)return!1;var r=parseInt(e),s=this._getkey(r);this.setCellValueByKey(s,t,i)},getCellText:function(e,t){if(null==e||null==t)return!1;var i=parseInt(e),r=this._getkey(i);return this.getCellTextByKey(r,t)},getCellTextByKey:function(e,t){if(null==e||null==t)return null;var i=this.getCellValueByKey(e,t),r=this.getColumn(t);return r&&""!=r.cellsFormat&&oe.jqx.dataFormat&&(oe.jqx.dataFormat.isDate(i)?i=oe.jqx.dataFormat.formatdate(i,r.cellsFormat,this.gridlocalization):(oe.jqx.dataFormat.isNumber(i)||!isNaN(parseFloat(i))&&isFinite(i))&&(i=oe.jqx.dataFormat.formatnumber(i,r.cellsFormat,this.gridlocalization))),i},getCellValue:function(e,t){if(null==e||null==t)return!1;var i=parseInt(e),r=this._getkey(i);return this.getCellValueByKey(r,t)},getCellValueByKey:function(e,t){var i=this.rowsByKey[e];!i&&this.treeGrid&&(i=this.treeGrid.getRow(e));this.getrowindex(i);return null!=i?i[t]:null},beginRowEdit:function(e){var t=this._getkey(e);this.beginroweditbykey(t)},beginCellEdit:function(e,t){var i=this._getkey(e),r=this.getColumn(t);this.beginroweditbykey(i,r)},endCellEdit:function(e,t,i){this.endRowEdit(e,i)},endRowEdit:function(e,t){var i=this._getkey(e);this.endroweditbykey(i,t)},getrowindex:function(e){var t=this.getRows().indexOf(e);if(-1!=t)return t;if(this.groups&&0<this.groups.length)for(var i=this.getRows(),r=0;r<i.length;r++)if(e.originalRecord){if(i[r].uid==e.originalRecord.uid){t=r;break}}else if(i[r].uid==e.uid){t=r;break}return t},getrowdisplayindex:function(e){if(this.treeGrid)return-1;var t=this.getView(),i=t.indexOf(e);if(-1!=i)return i;if(null==e)return i;for(var r=t,s=0;s<r.length;s++)if(r[s].uid==e.uid||e.originalRecord&&r[s].uid==e.originalRecord.uid){i=s;break}return i},beginroweditbykey:function(e,t){if(this.beginEdit&&!1===this.beginEdit(e,t))return!1;var i=this.treeGrid?this.source._source.hierarchy&&this.source._source.hierarchy.groupingDataFields?this.source._source.hierarchy.groupingDataFields.length:0:this.groups.length;if(0<i){var r=this.rowsByKey[e];if(this.treeGrid&&(r=this.treeGrid.getRow(e)),r.level<i)return!1}if(null==this._lastSelectedKey&&this.selectrowbykey(e),this.editKey===e&&null!=this.editKey)return!1;if(this.rowinfo[e]&&this.rowinfo[e].locked)return!1;if(null!=this.editKey)return this.endroweditbykey(e,!0),!1;var s=this.editSettings.editSingleCell;if(!t&&s&&this.columns.records&&0<this.columns.records.length){for(var o=0;o<this.columns.records.length&&(!(t=this.columns.records[o]).editable||t.hidden);o++);if(!t)return!1}if(s&&t&&!t.editable)return this.editKey=null,!1;s&&(this.editColumn=t);var d=this,r=this.rowsByKey[e];this.treeGrid&&(r=this.treeGrid.getRow(e));var l=this.getrowindex(r),a=this._getuirow(e),n=this._getpinneduirow(e);this._editors=new Array;var h=!1;if(a)for(var c=a[0].cells,u=0,o=0;o<c.length;o++){var g=this.columns.records[o],p=c[o];if(!g.rowDetailscolumn&&!(g.checkboxcolumn||(g.pinned&&(p=n[0].cells[o]),s&&t&&g.datafield!=t.datafield||(oe(p).removeClass(this.toTP("jqx-grid-cell-selected")),oe(p).removeClass(this.toTP("jqx-fill-state-pressed")),oe(p).removeClass(this.toTP("jqx-grid-cell-hover")),oe(p).removeClass(this.toTP("jqx-fill-state-hover")),"none"==g.columntype)))){var f=oe(p).outerWidth(),m=oe(p).width();0===u&&(u=oe(p).outerHeight()-1),oe(p).css("padding","0px");var v="<div style='height:"+u+"px; width: 100%; overflow: hidden; border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px; z-index: 9999;'></div>",w=this.getCellTextByKey(e,g.displayfield);p.innerHTML=v;var y=oe(p.firstChild);switch(g.columntype){case"textbox":case"default":var x,b,_=oe("<input style='border: none;' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' type='textbox'/>").appendTo(y);this.rtl&&_.css("direction","rtl"),_.addClass(this.toThemeProperty("jqx-input")),_.addClass(this.toThemeProperty("jqx-widget-content")),_.addClass(this.toThemeProperty("jqx-cell-editor")),_[0].onfocus=function(t){setTimeout(function(){var e;t?0<=(e=oe(t.target).parent().parent().index())&&d.ensureColumnVisible(d.columns.records[e].datafield):0<=(e=oe(document.activeElement).parent().parent().index())&&d.ensureColumnVisible(d.columns.records[e].datafield),d.content&&(d.content[0].scrollTop=0,d.content[0].scrollLeft=0),d.gridcontent&&(d.gridcontent[0].scrollLeft=0,d.gridcontent[0].scrollTop=0)},10)},g.editable?h||(h=!0,(x=oe.jqx.browser.msie&&10<oe.jqx.browser.version)||_.focus(),b=_,setTimeout(function(){var e,t=b.val().length;x||b.focus();try{"selectionStart"in b[0]?b[0].setSelectionRange(0,t):((e=b[0].createTextRange()).collapse(!0),e.moveEnd("character",t),e.moveStart("character",0),e.select())}catch(e){}},10)):(_.attr("disabled",!0),_.attr("readOnly",!0),_.addClass(this.toThemeProperty("jqx-fill-state-disabled"))),_.width(m),_.height(u),oe.jqx.browser.msie&&oe.jqx.browser.version<9&&_.css("line-height",parseInt(u)+"px"),_.css("text-align",g.cellsalign),null===w&&(w=""),null==w&&(w=""),_.val(w),g.createeditor&&(T=w,w=this.getCellValueByKey(e,g.displayfield),g.createeditor(this.treeGrid?e:l,w,_,T,m,u)),this._editors.push({column:g,editor:_}),""!=g.cellsFormat&&(-1==g.cellsFormat.indexOf("p")&&-1==g.cellsFormat.indexOf("c")&&-1==g.cellsFormat.indexOf("n")&&-1==g.cellsFormat.indexOf("f")||_.keydown(function(e){var t=e.charCode?e.charCode:e.keyCode?e.keyCode:0,i=String.fromCharCode(t),r=parseInt(i);if(isNaN(r))return!0;if(0<d._selection(_).length)return!0;var s,o="",l=_.val();if(1<g.cellsFormat.length?(s=parseInt(g.cellsFormat.substring(1)),isNaN(s)&&(s=0)):s=0,0<s&&-1!=l.indexOf(d.gridlocalization.decimalseparator)&&d._selection(_).start>l.indexOf(d.gridlocalization.decimalseparator))return!0;for(var a=0;a<l.length-s;a++){var n=l.substring(a,a+1);null!=n.match(/^[0-9]+$/)&&(o+=n)}return!(11<=o.length)&&void 0})),g.initeditor&&(T=w,w=this.getCellValueByKey(e,g.displayfield),g.initeditor(this.treeGrid?e:l,w,_,T,m,u));break;case"custom":case"template":this.editorsCache||(this.editorsCache=new Array);var j=oe("<div style='width: 100%; height: 100%; border: none;'></div>").appendTo(y),q=oe.trim(g.datafield).split(" ").join("");-1!=q.indexOf(".")&&(q=q.replace(".",""));var S=this.editorsCache["templateeditor_"+q];"custom"==g.columntype&&(S=this.editorsCache["customeditor_"+q+"_"+e]);var T=w,w=this.getCellValueByKey(e,g.displayfield);S?((_=S).width(f),_.height(u),_.appendTo(j)):((_=oe("<div style='border: none;'></div>")).width(f),_.height(u),S=_,null===w&&(w=""),"custom"!=g.columntype?this.editorsCache["templateeditor_"+q]=_:this.editorsCache["customeditor_"+q+"_"+e]=_,_.appendTo(j),g.createeditor&&g.createeditor(this.treeGrid?e:l,w,_,T,f,u)),g.initeditor&&g.initeditor(this.treeGrid?e:l,w,_,T,f,u),this._editors.push({column:g,editor:_})}}}this.editKey=e,this.beginUpdate();var C,P,z=this.getrowdisplayindex(r);this._raiseEvent("rowBeginEdit",{key:e,index:z,boundIndex:l,row:this.rowsByKey[e]}),s&&(P=C=null,(r=this.rowsByKey[e])&&(C=r[t.datafield],P=r[t.displayfield]),this._raiseEvent("cellBeginEdit",{value:C,displayValue:P,key:e,index:z,dataField:t.datafield,displayField:t.displayfield,boundIndex:l,row:this.rowsByKey[e]})),this.endUpdate(!1)},_toNumber:function(e){e.indexOf||null==e||(e=e.toString()),-1<e.indexOf(this.gridlocalization.currencysymbol)&&(e=e.replace(this.gridlocalization.currencysymbol,""));-1<(e=(e=function(e,t,i){var r=e;if(t==i)return e;for(var s=r.indexOf(t);-1!=s;)s=(r=r.replace(t,i)).indexOf(t);return r}(e,this.gridlocalization.thousandsseparator,"")).replace(this.gridlocalization.decimalseparator,".")).indexOf(this.gridlocalization.percentsymbol)&&(e=e.replace(this.gridlocalization.percentsymbol,""));for(var t="",i=0;i<e.length;i++){var r=e.substring(i,i+1);"-"===r&&(t+="-"),"."===r&&(t+="."),null!=r.match(/^[0-9]+$/)&&(t+=r)}return e=(e=t).replace(/ /g,"")},_geteditorvalue:function(e,t,i,r){var s,o=new String;if(t){if(!e.geteditorvalue)switch(e.columntype){case"textbox":default:if(o=t.val(),""!=e.cellsFormat){var l,a="string",n=this.source.datafields||(this.source._source?this.source._source.datafields:null);n&&(l="",oe.each(n,function(){if(this.name==e.displayfield)return this.type&&(l=this.type),!1}),l&&(a=l));var d="date"===a||"time"===a;if("number"===a||"float"===a||"int"===a||"integer"===a||"string"===a&&(-1!=e.cellsFormat.indexOf("p")||-1!=e.cellsFormat.indexOf("c")||-1!=e.cellsFormat.indexOf("n")||-1!=e.cellsFormat.indexOf("f"))){if(""===o&&e.nullable)return"";o=this._toNumber(o),o=new Number(o),isNaN(o)&&(o="")}if(d||"string"===a&&(-1!=e.cellsFormat.indexOf("H")||-1!=e.cellsFormat.indexOf("m")||-1!=e.cellsFormat.indexOf("M")||-1!=e.cellsFormat.indexOf("y")||-1!=e.cellsFormat.indexOf("h")||-1!=e.cellsFormat.indexOf("d"))){if(""===o&&e.nullable)return"";var h=o;("Invalid Date"==(o=new Date(o))||null==o||1<e.cellsFormat.length)&&(oe.jqx.dataFormat&&(o=oe.jqx.dataFormat.parsedate(h,e.cellsFormat,this.gridlocalization)),"Invalid Date"!=o&&null!=o||(o=""))}}e.displayfield!=e.datafield&&(o={label:o,value:o})}e.geteditorvalue&&(s=this.getCellValueByKey(r,e.displayfield),o=e.geteditorvalue(this.treeGrid?r:i,s,t))}return o},_validateEditors:function(e){for(var t=this,i=!0,r=t.rowsByKey[e],s=t.getrowindex(r),o=t._editors,e=t.editKey,l=t._getuirow(e),a=0;a<o.length;a++){var n=o[a].editor,d=o[a].column,h=t._geteditorvalue(d,n,s,e);if(d.validation){n.removeClass(t.toThemeProperty("jqx-grid-validation-label"));var c=d.datafield;try{var u=d.validation({value:h,row:e,datafield:d.datafield,displayfield:d.displayfield,column:d},h),g=t.gridlocalization.validationstring;null!=u.message&&(g=u.message),("boolean"==typeof u?u:u.result)||(null!=u.showmessage&&1!=u.showmessage||t._showvalidationpopup(l,c,g,n),i=!1)}catch(e){t._showvalidationpopup(l,c,t.gridlocalization.validationstring,n),i=!1}}}return i},endroweditbykey:function(c,e){var u=this;if(null!==u.editKey){if(this.endEdit)if(!1===this.endEdit(c))return;var g=u.rowsByKey[c],p=u.getrowindex(g),f=u._editors,m=u.editKey;u._getuirow(m);if(!0!==e){var t=!0;if(f&&(t=u._validateEditors(m))){for(var i=oe.extend({},g),v=oe.extend({},g),r=0;r<f.length;r++){var s=f[r].editor,o=f[r].column,l=u._geteditorvalue(o,s,p,m);l&&null!=l.label?(i[o.displayfield]=l.label,i[o.datafield]=l.value):i[o.displayfield]=l}u.updaterowbykey(u.editKey,i,!1,function(){u.dataview._sortHierarchyData=null,u.dataview._sortData=null;for(var e=0;e<f.length;e++){var t,i,r,s,o,l,a=f[e].editor,n=f[e].column,d=u._geteditorvalue(n,a,p,m),h=v[n.displayfield];d&&null!=d.label?(g[n.displayfield]=d.label,g[n.datafield]=d.value):g[n.displayfield]=d,!u.treeGrid||(t=u.treeGrid.getRow(m))&&(t[n.displayfield]=d),u.editorsCache&&(i=function(e){var t;e&&e.jqxWidget&&((0<=(t=e.jqxWidget.element.className).indexOf("dropdownlist")||0<=t.indexOf("datetimeinput")||0<=t.indexOf("combobox")||0<=t.indexOf("menu"))&&e.jqxWidget.isOpened&&e.jqxWidget.isOpened()&&e.jqxWidget.close())},r="customeditor_"+n.displayfield+"_"+c,s="templateeditor_"+n.displayfield,u.editorsCache[r]&&(o=oe(u.editorsCache[r]).data(),l=u.editorsCache[r],!o.jqxWidget&&oe(l).children()[0]&&oe(oe(l).children()[0]).data().jqxWidget&&(o=oe(oe(l).children()[0]).data()),i(o),u.editorsCache[r].detach()),u.editorsCache[s]&&(u.editorsCache[s].detach(),o=oe(u.editorsCache[s]).data(),l=u.editorsCache[s],!o.jqxWidget&&oe(l).children()[0]&&oe(oe(l).children()[0]).data().jqxWidget&&(o=oe(oe(l).children()[0]).data()),i(o))),d!=h&&(u.beginUpdate(),u._raiseEvent("cellValueChanged",{value:d,oldValue:h,dataField:n.datafield,displayField:n.displayfield,key:c,index:p,row:g}),u.endUpdate(!1))}})}if(!t)return!1}return u._detachEditors(m),!0}},_detachEditors:function(e){var t=this,i=t.rowsByKey[e],r=t.getrowindex(i);if(t.editorsCache)for(var s in t.editorsCache){var o,l=oe(t.editorsCache[s]).data();l&&l.jqxWidget&&((0<=(o=l.jqxWidget.element.className).indexOf("dropdownlist")||0<=o.indexOf("datetimeinput")||0<=o.indexOf("combobox")||0<=o.indexOf("menu"))&&l.jqxWidget.isOpened&&l.jqxWidget.isOpened()&&l.jqxWidget.close()),oe(t.editorsCache[s]).detach()}t.beginUpdate();var a,n,d=t.getrowdisplayindex(i);t.editSettings.editSingleCell&&(n=a=null,(i=t.rowsByKey[e])&&(a=i[t.editColumn.datafield],n=i[t.editColumn.displayfield]),t._raiseEvent("cellEndEdit",{value:a,displayValue:n,key:e,index:d,dataField:t.editColumn.datafield,displayField:t.editColumn.displayfield,boundIndex:r,row:t.rowsByKey[e]})),t._raiseEvent("rowEndEdit",{key:e,index:d,boundIndex:r,row:t.rowsByKey[e]}),t.endUpdate(!1),t.editColumn=null,t.editKey=null,t._renderrows(),t._renderhorizontalscroll(),t.host.focus(),setTimeout(function(){t.host.focus()},10)},_showvalidationpopup:function(e,t,i,r){null==i&&(i=this.gridlocalization.validationstring),r.addClass(this.toThemeProperty("jqx-grid-validation-label"));var s=oe("<div style='z-index: 99999; top: 0px; left: 0px; position: absolute;'></div>"),o=oe("<div style='width: 20px; height: 20px; z-index: 999999; top: 0px; left: 0px; position: absolute;'></div>");s.html(i),o.addClass(this.toThemeProperty("jqx-grid-validation-arrow-up")),s.addClass(this.toThemeProperty("jqx-grid-validation")),s.addClass(this.toThemeProperty("jqx-rc-all")),s.hide(),o.hide(),s.prependTo(this.table),o.prependTo(this.table);var l,a,n,d,h,c,u=this.hScrollInstance.value,g=parseInt(u),p=this.getColumn(t).uielement;e&&(l=e,s.css("top",parseInt(l.position().top)+30+"px"),a=parseInt(s.css("top")),o.css("top",a-11),o.removeClass(),o.addClass(this.toThemeProperty("jqx-grid-validation-arrow-up")),n=!1,a>=this._table.height()&&(o.removeClass(this.toThemeProperty("jqx-grid-validation-arrow-up")),o.addClass(this.toThemeProperty("jqx-grid-validation-arrow-down")),(a=parseInt(l.position().top)-l.outerHeight()-5)<0&&(a=0,o.removeClass(this.toThemeProperty("jqx-grid-validation-arrow-down")),n=!0),s.css("top",a+"px"),o.css("top",a+s.outerHeight()-9)),d=-g+parseInt(oe(p).position().left),h=parseInt(this._table.css("left")),isNaN(h)&&(h=0),0!=h&&(g=0),o.css("left",g+d+30),(c=s.width())+d>this.host.width()-20&&(d-=c+d-this.host.width()+40),n?s.css("left",g+parseInt(oe(p).position().left)-s.outerWidth()):s.css("left",g+d),r.mouseenter(function(){r.hasClass("jqx-grid-validation-label")&&(s.show(),o.show())}),r.mouseleave(function(){s.hide(),o.hide()}),this.popups||(this.popups=new Array),this.popups[this.popups.length]={validation:s,validationrow:o})},addRow:function(r,s,i,c){if(null==s)return!1;this._datachanged=!0,null==i&&(i="last");var e,o,l,t=!1,a=this.that;null==r?(e=this.dataview.filters&&0<this.dataview.filters.length,o=e?this.source.records.length:this.dataview.totalrecords,this.pageable||(this.source._source.totalrecords?this.dataview.totalrecords=this.source._source.totalrecords:this.source._source.totalRecords?this.dataview.totalrecords=this.source._source.totalRecords:0!==this.source.hierarchy.length?this.dataview.totalrecords=this.source.hierarchy.length:this.dataview.totalrecords=this.source.records.length,o=e?this.source.records.length:this.dataview.totalrecords),oe.isArray(s)?(l=new Array,oe.each(s,function(e,t){var i=a.dataview.getid(a.dataview.source.id,s[e],o+e);l.push(i),a.getColumn(a.dataview.source.id)&&(s[e][a.dataview.source.id]=i)}),r=l):(r=this.dataview.getid(this.dataview.source.id,s,o),this.getColumn(this.dataview.source.id)&&(s[this.dataview.source.id]=r))):oe.isArray(s)?oe.each(s,function(e,t){var i=r[e];a.getColumn(a.dataview.source.id)&&(s[e][a.dataview.source.id]=i)}):this.getColumn(this.dataview.source.id)&&(s[this.dataview.source.id]=r);function n(r,s,e,o){if(r._loading)throw new Error("jqxDataTable: "+r.loadingErrorMessage);var t,i,l,a,n,d=r.vScrollInstance.value,h=!1;return oe.isArray(e)?oe.each(e,function(e,t){var i=null;null!=s&&null!=s[e]&&(i=s[e]),this.uid=i,r.rowsByKey[i]=this,s==c&&(c=null),h=r.source.addRecord(this,o,c,u)}):(e.uid=s,r.rowsByKey[s]=e,s==c&&(c=null),h=r.source.addRecord(e,o,c,u)),r.groups&&0<r.groups.length&&(t=Object.prototype.toString,i=r.groups[0],Object.prototype.toString="function"==typeof i?i:function(){return this[i]},r.source.records.sort||(l=new Array,a=0,n=[],oe.each(n,function(){l[0+a++]=this}),n=l),r.source.records.sort(function(e,t){if(void 0===e&&(e=null),void 0===t&&(t=null),null===e&&null===t)return 0;if(null===e&&null!==t)return-1;if(null!==e&&null===t)return 1;var i=0,r=0;if(e&&e.uid&&(i=e.uid),t&&t.uid&&(r=t.uid),e=e.toString(),t=t.toString(),oe.jqx.dataFormat.isNumber(e)&&oe.jqx.dataFormat.isNumber(t))return e<t?-1:t<e?1:0;if(oe.jqx.dataFormat.isDate(e)&&oe.jqx.dataFormat.isDate(t))return e<t?-1:t<e?1:0;oe.jqx.dataFormat.isNumber(e)||oe.jqx.dataFormat.isNumber(t)||(e=String(e).toLowerCase(),t=String(t).toLowerCase());try{if(e<t)return-1;if(t<e)return 1}catch(e){}if("number"==typeof i){if(i<r)return-1;if(r<i)return 1}return 0}),Object.prototype.toString=t),r.dataview._filteredData=null,r.dataview._sortData=null,(r.dataview._sortHierarchyData=null)!=r._updating&&0!=r._updating||r.refresh(),r.source&&r.source._knockoutdatasource&&!r._updateFromAdapter&&r.autokoupdates&&r.source._source._localdata&&(r.source.suspendKO=!0,r.source._source._localdata.push(e),r.source.suspendKO=!1),r.vScrollInstance.setPosition(d),h}var u=!!this.treeGrid&&!!this.treeGrid.virtualModeCreateRecords;if(this.source.addrow){function d(e,t){1!=e&&null!=e||(null!=t&&(r=t),n(a,r,s,i))}try{null==(t=a.treeGrid?this.source.addrow(r,s,i,c,d):this.source.addrow(r,s,i,d))&&(t=!0)}catch(e){t=!1}if(0==t)return!1}else n(this,r,s,i);return t},deleteRow:function(e){var t=this._getkey(e);this.deleterowbykey(t)},deleterowbykey:function(t){if(null==t)return!1;function i(o,e){if(o._loading)throw new Error("jqxDataTable: "+o.loadingErrorMessage);o.dataview._filteredData=null,o.dataview._sortData=null,o.dataview._sortHierarchyData=null;var t,i,r,s,l=!1,a=o.vScrollInstance.value;return oe.isArray(e)?oe.each(e,function(){var e,t,i,r,s=this;o.rowsByKey[s]&&(l=!0,o.rowinfo[s].selected&&o.unselectrowbykey(s,!1),o.treeGrid&&(e=o._names(),t=o.rowsByKey[s][e.parent]),delete o.rowsByKey[s],o.treeGrid&&o.rowinfo[s]&&(i=o.rowinfo[s].row.records,r=function(e){for(var t=0;t<e.length;t++){var i=e[t].uid;delete o.rowsByKey[i],delete o.rowinfo[i],e[t].records&&r(e[t].records)}},i&&(r(i),delete o.rowinfo[s])),o.source.deleteRecord(s),t&&e&&t.records&&0==t.records.length&&(t[e.leaf]=!0,o.rowinfo[t.uid][e.leaf]=!0))}):(l=!1,o.rowsByKey[e]&&(l=!0,o.rowinfo[e]&&o.rowinfo[e].selected&&o.unselectrowbykey(e,!1),o.treeGrid&&(t=o._names(),i=o.rowsByKey[e][t.parent]),delete o.rowsByKey[e],o.treeGrid&&o.rowinfo[e]&&(r=o.rowinfo[e].row.records,s=function(e){for(var t=0;t<e.length;t++){var i=e[t].uid;delete o.rowsByKey[i],delete o.rowinfo[i],e[t].records&&s(e[t].records)}},r&&s(r)),delete o.rowinfo[e],o.source.deleteRecord(e),i&&t&&i.records&&0==i.records.length&&(i[t.leaf]=!0,o.rowinfo[i.uid][t.leaf]=!0))),o.refresh(),o.source&&o.source._knockoutdatasource&&!o._updateFromAdapter&&o.autokoupdates&&o.source._source._localdata&&(o.source.suspendKO=!0,o.source._source._localdata.pop(),o.source.suspendKO=!1),o.vScrollInstance.setPosition(a),l}var r=!(this._datachanged=!0),s=this.that;if(this.source.deleterow){try{this.source.deleterow(t,function(e){1!=e&&null!=e||i(s,t)}),null==r&&(r=!0)}catch(e){r=!1}}else r=i(s,t);return r},updateRow:function(e,t){var i=this._getkey(e);this.updaterowbykey(i,t)},updaterowbykey:function(t,i,d,r){if(null==t||null==i)return!1;function s(s,e,o){if(s._loading)throw new Error("jqxDataTable: "+s.loadingErrorMessage);s.dataview._filteredData=null,s.dataview._sortData=null,s.dataview._sortHierarchyData=null;var t,l=!1;oe.isArray(e)?oe.each(e,function(i,e){function t(e,t){r?r[this]=o[i]:l=!1,l=!0}var r=s.rowsByKey[this];t(),s.treeGrid&&(r=s.treeGrid.getRow(this),t())}):((t=function(e){if(e){for(var t=0;t<s.columns.records.length;t++)e[s.columns.records[t].datafield]=o[s.columns.records[t].datafield],0<s.groups.length&&e.originalRecord&&(e.originalRecord[s.columns.records[t].datafield]=o[s.columns.records[t].datafield]);l=!0}else l=!1})(i=s.rowsByKey[e]),s.treeGrid&&t(i=s.treeGrid.getRow(e)));var i,r,a,n=s.vScrollInstance.value;return null!=d&&1!=d||null!=s._updating&&0!=s._updating||s._renderrows(),s.showAggregates&&s._updatecolumnsaggregates&&s._updatecolumnsaggregates(),s.source&&s.source._knockoutdatasource&&!s._updateFromAdapter&&s.autokoupdates&&s.source._source._localdata&&(i=s.rowsByKey[e],r=s.getrowindex(i),a=s.source._source._localdata()[r],s.source.suspendKO=!0,s.source._source._localdata.replace(a,oe.extend({},i)),s.source.suspendKO=!1),s.vScrollInstance.setPosition(n),l}var o=this.that,l=!1;if(this.source.updaterow){try{null==(l=this.source.updaterow(t,i,function(e){1!=e&&null!=e||(s(o,t,i),r&&r(),o._renderrows(!1),o.autoRowHeight&&(o._updateScrollbars(),o._arrange()))}))&&(l=!0)}catch(e){l=!1}}else(l=s(o,t,i))&&r&&r(),o._renderrows(!1),o.autoRowHeight&&(o._updateScrollbars(),o._arrange());return l},lockRow:function(e){var t=this._getkey(e);this.lockrowbykey(t)},unlockRow:function(e){var t=this._getkey(e);this.unlockrowbykey(t)},lockrowbykey:function(e){this.rowinfo[e]?this.rowinfo[e].locked=!0:this.rowinfo[e]={locked:!0},this._renderrows()},unlockrowbykey:function(e){this.rowinfo[e]?this.rowinfo[e].locked=!1:this.rowinfo[e]={locked:!1},this._renderrows()},selectRow:function(e){var t=this._getkey(e);this.selectrowbykey(t)},unselectRow:function(e){var t=this._getkey(e);this.unselectrowbykey(t)},selectrowbykey:function(e,t,i){"keyboard"!=t&&"mouse"!=t&&(this._lastSelectedKey=e);var r=!1!==i;this._doSelection(e,!0,r);var s=this.rowsByKey[e],o=this.getrowindex(s),l=this.getrowdisplayindex(s);this._raiseEvent("rowSelect",{key:e,index:l,boundIndex:o,row:this.rowsByKey[e]})},unselectrowbykey:function(e,t){var i=!1!==t;this._doSelection(e,!1,i);var r=this.rowsByKey[e],s=this.getrowindex(r),o=this.getrowdisplayindex(r);this._raiseEvent("rowUnselect",{key:e,index:o,boundIndex:s,row:this.rowsByKey[e]})},getSelection:function(){var e=new Array;if(this.rowinfo)for(var t in this.rowinfo){var i=this.rowinfo[t];i.selected&&e.push(i.row)}return e},showdetailsbykey:function(e){var t,i,r,s,o,l,a,n,d,h;!this.rowDetails||(t=this.rowinfo[e])&&(t.expanded=!0,i=oe(this._table.children()[1]).children("[data-key="+e+"]"),r=oe(this._pinnedTable.children()[1]).children("[data-key="+e+"]"),i&&(s=r.children(),o=oe(s[0]),this.rtl&&(o=oe(s[s.length-1])),this.rtl?(o.removeClass(this.toThemeProperty("jqx-grid-group-collapse-rtl")),o.addClass(this.toThemeProperty("jqx-grid-group-expand-rtl")),o.removeClass(this.toThemeProperty("jqx-icon-arrow-left"))):(o.removeClass(this.toThemeProperty("jqx-grid-group-collapse")),o.addClass(this.toThemeProperty("jqx-grid-group-expand")),o.removeClass(this.toThemeProperty("jqx-icon-arrow-right"))),o.addClass(this.toThemeProperty("jqx-icon-arrow-down")),i.next().show(),(l=r.next()).show(),oe.jqx.browser.msie&&oe.jqx.browser.version<8&&(i.next().children().show(),r.next().children().show()),t.initialized||(a=t.detailsHeight,n=this.initRowDetails(e,t.row,oe(oe(l).children().children().children()[0]),t),t.details=oe(l).children().children().children()[0],!(t.initialized=!0)!==n&&t.detailsHeight==a||(!1===n&&(t.expanded=!1,t.nodetails=!0,l.hide()),this._renderrows())),this._updateScrollbars(),"auto"!==this.height&&null!==this.height&&!this.autoheight||this._arrange(),d=this.getrowindex(t.row),h=this.getrowdisplayindex(t.row),this._raiseEvent("rowExpand",{row:t.row,index:h,boundIndex:d,rowKey:e})))},hidedetailsbykey:function(e){var t,i,r,s,o,l,a;!this.rowDetails||(t=this.rowinfo[e])&&(t.expanded=!1,i=oe(this._table.children()[1]).children("[data-key="+e+"]"),r=oe(this._pinnedTable.children()[1]).children("[data-key="+e+"]"),i&&(s=r.children(),o=oe(s[0]),this.rtl&&(o=oe(s[s.length-1])),this.rtl?(o.addClass(this.toThemeProperty("jqx-grid-group-collapse-rtl")),o.removeClass(this.toThemeProperty("jqx-grid-group-expand-rtl")),o.addClass(this.toThemeProperty("jqx-icon-arrow-left"))):(o.addClass(this.toThemeProperty("jqx-grid-group-collapse")),o.removeClass(this.toThemeProperty("jqx-grid-group-expand")),o.addClass(this.toThemeProperty("jqx-icon-arrow-right"))),o.removeClass(this.toThemeProperty("jqx-icon-arrow-down")),i.next().hide(),r.next().hide(),oe.jqx.browser.msie&&oe.jqx.browser.version<8&&(i.next().children().hide(),r.next().children().hide()),this._updateScrollbars(),"auto"!==this.height&&null!==this.height&&!this.autoheight||this._arrange(),l=this.getrowindex(t.row),a=this.getrowdisplayindex(t.row),this._raiseEvent("rowCollapse",{row:t.row,index:a,boundIndex:l,rowKey:e})))},_getvirtualcolumnsindexes:function(e,t,i,r,s){if(this.rowDetails||this.rtl||this.editcell||this.width&&0<=this.width.toString().indexOf("%")||this.exporting)return{start:0,end:i+r};var o=0,l=-1,a=i+r;if(this.autorowheight)return{start:0,end:i+r};if(!s)for(var n=0;n<i+r;n++){if(this.columns.records[n].hidden||(o+=this.columns.records[n].width),e<=o&&-1==l&&(l=n),t+e<o){a=n;break}}return i+r<++a&&(a=i+r),-1==l&&(l=0),{start:l,end:a}},_renderhorizontalscroll:function(){var e=this.hScrollInstance,t=e.value;"hidden"===this.hScrollBar.css("visibility")&&(t=e.value=0);var i=parseInt(t);if(null!=this.table){var r,s=this.columnsrow,o=+this.columns.records.length,l=this.columns.records,a=0==this.source.records.length;if(this.rtl&&"hidden"!=this.hScrollBar.css("visibility")&&(i=e.max-i),a&&!this._haspinned)this.table[0].style.left=-i+"px",s[0].style.marginLeft=-i+"px";else{if(this._haspinned||null==this._haspinned){for(var n,d,h=0;h<0+o;h++){l[h].pinned&&(n=null,this.showAggregates&&this.statusbar[0].cells&&(n=this.statusbar[0].cells[h]),this.filterrow&&this.filterrow[0].cells&&(d=this.filterrow[0].cells[h]),this.rtl?(s[0].cells[h].style.marginLeft=-parseInt(t)+"px",n&&(n.style.marginLeft=-parseInt(t)+"px"),this.filterrow&&d&&(d.style.marginLeft=-parseInt(t)+"px")):(s[0].cells[h].style.marginLeft=i+"px",n&&(n.style.marginLeft=i+"px"),this.filterrow&&d&&(d.style.marginLeft=i+"px")))}if(this.columnsVirtualization){for(var c=(m=this._getvirtualcolumnsindexes(i,this.host.width(),0,this.columns.records.length,!1)).start,u=m.end,g=0;g<c;g++){var p=g,f=this.columns.records[p].element[0];this.columns.records[p].pinned||(f.parentNode&&f.parentNode.removeChild(f),this.filterrow&&this.filterrow[0]&&(v=this.filterrow[0].cells[p]).parentNode&&v.parentNode.removeChild(v))}for(g=u;g<this.columns.records.length;g++){p=g,f=this.columns.records[p].element[0];this.columns.records[p].pinned||(f.parentNode&&f.parentNode.removeChild(f),this.filterrow&&this.filterrow[0]&&(v=this.filterrow[0].cells[p]).parentNode&&v.parentNode.removeChild(v))}for(g=c;g<u;g++){p=g;f=this.columns.records[p].element[0],this.columns.records[p].pinned||(f.parentNode||this.columnsrow[0].appendChild(f),this.filterrow&&this.filterrow[0]&&((v=this.filterrow[0].cells[p]).parentNode||this.filterrow[0].appendChild(v)))}}this._table[0].style.left=-i+"px",s[0].style.marginLeft=-i+"px"}else if(0==this._haspinned){if(this.columnsVirtualization){for(var m,c=(m=this._getvirtualcolumnsindexes(i,this.host.width(),0,this.columns.records.length,!1)).start,u=m.end,g=0;g<c;g++){p=g;(f=this.columns.records[p].element[0]).parentNode&&f.parentNode.removeChild(f),this.filterrow&&this.filterrow[0]&&(v=this.filterrow[0].cells[p]).parentNode&&v.parentNode.removeChild(v)}for(g=u;g<this.columns.records.length;g++){p=g;(f=this.columns.records[p].element[0]).parentNode&&f.parentNode.removeChild(f),this.filterrow&&this.filterrow[0]&&(v=this.filterrow[0].cells[p]).parentNode&&v.parentNode.removeChild(v)}for(g=c;g<u;g++){var v,p=g;(f=this.columns.records[p].element[0]).parentNode||this.columnsrow[0].appendChild(f),this.filterrow&&this.filterrow[0]&&((v=this.filterrow[0].cells[p]).parentNode||this.filterrow[0].appendChild(v))}}this.table[0].style.left=-i+"px",s[0].style.marginLeft=-i+"px"}this.filterrow&&(this.filterrow[0].style.left=-i+"px",this.rtl&&(this.filterrow[0].style.left=-i+parseInt(this.content.css("left"))+"px"))}this.showAggregates&&this.aggregates[0].cells&&(r=0,this.rtl&&"hidden"!=this.vScrollBar.css("visibility")&&(r="hidden"!=this.hScrollBar.css("visibility")?2+parseInt(this.hScrollBar.css("left")):3+parseInt(this.vScrollBar.width())),this.aggregates[0].style.marginLeft=-i+r+"px")}},_initializeColumns:function(){var e=this.source.datafields;null==e&&this.source._source&&(e=this.source._source.datafields);var i=!!e&&0<e.length;if(this.columns&&this.columns.records)for(var t=0;t<this.columns.records.length;t++)this._removecolumnhandlers(this.columns.records[t]);var r,s=this,o=new oe.jqx.dataCollection(this.element),l=0;this._haspinned=!1,this._columns?this.columns=this._columns:this._columns=this.columns,"checkbox"==this.selectionMode&&((r=new V(s,this)).visibleindex=l++,r.width=s.indentWidth,r.checkboxcolumn=!0,r.editable=!1,r.columntype="checkbox",r.groupable=!1,r.draggable=!1,r.filterable=!1,r.resizable=!1,r.datafield="_checkboxcolumn",o.add(r)),this.rowDetails&&!this.treeGrid&&((r=new V(s,this)).visibleindex=l++,r.width=s.indentWidth,r.editable=!1,r.rowDetailscolumn=!0,r.groupable=!1,r.draggable=!1,r.pinned=!0,r.filterable=!1,r.resizable=!1,r.text="",o.add(r));var a=new Array;oe.each(this.columns,function(e){if(null!=s.columns[e]){var t=new V(s,this);if(t.visibleindex=l++,null!=this.dataField&&(this.datafield=this.dataField),this.pinned&&(s._haspinned=!0),null==this.datafield)s.source&&s.source._source&&"array"==s.source._source.datatype&&(i||(s.source._source.datafields||(s.source._source.datafields=new Array),s.source._source.datafields.push({name:e.toString()})),this.datafield=e.toString(),this.displayfield=e.toString(),t.datafield=this.datafield,t.displayfield=this.displayfield);else{if(a[this.datafield])throw new Error("jqxDataTable: Invalid column 'dataField' setting. jqxDataTable's columns should be initialized with unique data fields.");a[this.datafield]=!0}o.add(t)}}),this.rtl&&o.records.reverse(),this.columns=o},addFilter:function(e,t){this.getColumn(e)&&this.dataview.addFilter(e,t)},removeFilter:function(e){this.getColumn(e)&&this.dataview.removeFilter(e)},clearFilters:function(e,t){this.dataview.filters=new Array,this.dataview._filteredData=null,this.dataview._sortData=null,this.dataview._sortHierarchyData=null,!1!==t&&this.resetfilter(),!1!==e&&this.applyFilters()},resetfilter:function(){if(this.filterinput&&this.filterinput.val(""),this.filterrow)for(var e=0;e<this.filterrow[0].cells.length;e++){var t=this.filterrow[0].cells[e],i=oe(t).find("input:first"),r=oe(t).find(".filterconditions"),s=this.columns.records[e];if(s.filterable){i.val("");var o,l=this.getcolumntypebydatafield(s),a=new oe.jqx.filter;switch(l){case"number":case"int":case"float":case"decimal":o="numericfilter",a.getoperatorsbyfiltertype("numericfilter");break;case"boolean":case"bool":o="booleanfilter",a.getoperatorsbyfiltertype("booleanfilter");break;case"date":case"time":o="datefilter",a.getoperatorsbyfiltertype("datefilter");break;case"string":o="stringfilter",a.getoperatorsbyfiltertype("stringfilter")}0<r.length&&("stringfilter"===o?r.jqxDropDownList({selectedIndex:2}):r.jqxDropDownList({selectedIndex:0}))}}},applyFilters:function(){var e;this.editable&&null!=this.editKey&&this.endroweditbykey(this.editKey),this.dataview._filteredData=null,this.dataview._sortData=null,this.dataview._sortHierarchyData=null,this.serverProcessing?(this.dataview.pagenum=0,this.updateBoundData("filter")):(this.goToPage(0),this.refresh()),arguments&&0<arguments.length&&(this._updateSimpleFilter&&this.filtercolumnsList&&(e=this.filtercolumnsList.jqxDropDownList("getSelectedItem").value,this._updateSimpleFilter(e)),this._updateFilterRow&&this._updateFilterRow()),this._raiseEvent("filter",{filters:this.dataview.filters})},sortBy:function(e,t){if(this.dataview._filteredData=null,this.dataview._sortData=null,this.dataview._sortHierarchyData=null,this._loading)throw new Error("jqxDataTable: "+this.loadingErrorMessage);var i,r;this.editable&&null!=this.editKey&&this.endroweditbykey(this.editKey),null==e&&(t=null,e=this.sortcolumn),e&&(r="a"==t||"asc"==t||"ascending"==t||1==t,(i=this).sortdirection=null!=t?{ascending:r,descending:!r}:{ascending:!1,descending:!1},i.sortcolumn=null!=t?e:null,i.source.sort&&(i.dataview.sortfield=e,i.dataview.sortfielddirection=null==t?"":r?"asc":"desc",i.source.sort&&!this._loading&&i.source.sort(e,t)),i.dataview.sortBy(e,t),i._raiseEvent("sort",{sortcolumn:this.sortcolumn,sortdirection:this.sortdirection})),this.serverProcessing?this.updateBoundData("sort"):this.refresh()},_togglesort:function(e){var t,i;this.disabled||e.sortable&&this.sortable&&(i=(i=null)==(t={sortcolumn:this.sortcolumn,sortdirection:this.sortdirection}).sortcolumn||t.sortcolumn!=e.displayfield||1!=(i=t.sortdirection.ascending)&&null,this.sortBy(e.displayfield,i))},_renderfilter:function(){var a=this,e=oe("<div style='position: relative; margin: 4px;'><input style='width: 200px; height: 22px; direction: ltr;' role='textbox' type='text'/><div style='cursor: pointer; height: 100%;'><div></div></div></div>");e.height(22);var n=e.find("input"),d=e.find("div:first");e.addClass(this.toThemeProperty("jqx-rc-all")),e.addClass(this.toThemeProperty("jqx-widget")),e.addClass(this.toThemeProperty("jqx-input-group")),n.addClass(this.toThemeProperty("jqx-input")),n.addClass(this.toThemeProperty("jqx-rc-l")),n.addClass(this.toThemeProperty("jqx-input-group-addon")),n.addClass(this.toThemeProperty("jqx-widget")),n.addClass(this.toThemeProperty("jqx-widget-content")),d.addClass(this.toThemeProperty("jqx-fill-state-normal")),d.addClass(this.toThemeProperty("jqx-rc-r")),d.addClass(this.toThemeProperty("jqx-input-group-addon")),d.find("div").addClass(this.toThemeProperty("jqx-icon-search")),this.rtl&&(n.addClass(this.toThemeProperty("jqx-rtl")),n.css("direction","rtl")),this.filter.children().remove(),this.filterbutton=d;for(var t=new Array,i=0;i<a.columns.records.length;i++)a.columns.records[i].datafield&&a.columns.records[i].filterable&&t.push({label:a.columns.records[i].text,value:a.columns.records[i].displayfield});var r=t.length<10,s=oe("<div style='position: relative; top: 50%; display: none; margin-right: 4px; margin-left: 4px; float: left;'>"+this.gridlocalization.filtersearchstring+"</div>");this.filter.append(s);var h=oe("<div class='filtercolumns' style='position: relative; margin: 4px; float: left;'></div>");this.filter.append(h),h.jqxDropDownList&&h.jqxDropDownList({theme:this.theme,enableBrowserBoundsDetection:!0,autoDropDownHeight:r,rtl:a.rtl,dropDownWidth:220,selectedIndex:0,width:"auto",height:20,source:t,displayMember:"label",valueMember:"value"}),this.filtercolumnsList=h;function o(e){a.filterinput.val("");for(var t=0;t<a.dataview.filters.length;t++){var i=a.dataview.filters[t];i.datafield===e&&a.filterinput.val(i.filter.getfilterat(0).filtervalue)}}35!==a.filterHeight&&(a.filtercolumnsList.css("margin-top",a.filterHeight/2-10),e.css("margin-top",a.filterHeight/2-10)),a._updateSimpleFilter=o,this.addHandler(h,"select",function(e){var t=e.args.item.value;o(t)}),"simple"===this.filterMode?(this.filtercolumnsList.hide(),s.show(),s.css("margin-top",-this.filter.height()/2),e.css("float","left")):(this.filtercolumnsList.show(),s.hide());function l(){if(!d.hasClass("jqx-fill-state-disabled")){var e,t=n.val();h.jqxDropDownList&&(e=h.jqxDropDownList("getSelectedItem"));function i(e,t,i){var r,s=new oe.jqx.filter,o=a.getcolumntypebydatafield(e),l=a._getfiltertype(o);return r="datefilter"==l?s.createfilter(l,t,"EQUAL",null,e.cellsFormat,a.gridlocalization):"numericfilter"==l||"booleanfilter"==l?("numericfilter"==l&&(","==a.gridlocalization.decimalseparator&&0<=t.indexOf(a.gridlocalization.decimalseparator)&&(t=t.replace(a.gridlocalization.decimalseparator,".")),0<=t.indexOf(a.gridlocalization.currencysymbol)&&(t=t.replace(a.gridlocalization.currencysymbol,"")),0<=t.indexOf(a.gridlocalization.percentagesymbol)&&(t=t.replace(a.gridlocalization.percentagesymbol,""))),s.createfilter(l,t,"EQUAL",null,e.cellsFormat,a.gridlocalization)):s.createfilter(l,t,"CONTAINS"),s.operator=i,s.addfilter(0,r),s}var r;if("simple"!==a.filterMode){e&&(r=e.value,l=i(o=a.getColumn(r),t,"and"),0<t.length?(a.removeFilter(r),a.addFilter(r,l)):a.removeFilter(r),a.applyFilters(),"advanced"===a.filterMode&&a._updateFilterRow&&a._updateFilterRow(!0))}else{if(a.clearFilters(!1,!1),0<t.length)for(var s=0;s<a.columns.records.length;s++){var o,l=i(o=a.columns.records[s],t,"or");a.addFilter(o.datafield,l)}a.applyFilters()}0==a.dataview.filters.length?a.filtericon.fadeOut(200):a.filtericon.fadeIn(200)}}var c;n.keydown(function(e){if(13===e.keyCode)return l(),e.preventDefault&&e.preventDefault(),!1}),d.click(function(){l()}),this.filterinput=n,this.filter.append(e),"advanced"==this.filterMode&&(c=oe("<a style='float: left; position: relative; margin: 2px; margin-left: 10px;' href='#'>"+this.gridlocalization.filterstring+"</a>"),e.append(c),this.addHandler(c,"click",function(e){function t(e){if(a.filterrow)for(var t=0;t<a.filterrow[0].cells.length;t++){var i=a.filterrow[0].cells[t],r=oe(i).find("input:first"),s=a.columns.records[t];if(s.filterable){!0===e&&r.val("");for(var o=0;o<a.dataview.filters.length;o++){var l=a.dataview.filters[o];if(l.datafield===s.displayfield){r.val(l.filter.getfilterat(0).filtervalue);break}}}}}function i(e){if(a.filterrow)for(var t=0;t<a.filterrow[0].cells.length;t++){var i=a.filterrow[0].cells[t],r=oe(i).find("input:first"),s=a.columns.records[t];s.hidden?i.style.visibility="hidden":i.style.visibility="inherit",s.filterable&&(i.style.left=parseInt(0)+parseInt(s.uielement[0].style.left)+"px",i.style.width=6+s.width+"px",r[0]&&(r[0].style.width=s.width-6-22+"px"))}}a._updateFilterRow=t,a._arrangeFilterRow=i;function r(){a.filtercolumnsList.jqxDropDownList({disabled:!0}),a.filterinput.addClass(a.toThemeProperty("jqx-fill-state-disabled")),a.filterinput.attr("disabled",!0),a.filterbutton.addClass(a.toThemeProperty("jqx-fill-state-disabled"))}return 0===a.filter.find(".filterrow").length?(a._renderadvancedfilter(),r(),t(),a._arrange(),i()):("none"===a.filter.find(".filterrow").css("display")?(r(),a.filter.find(".filterrow").removeClass("filterrow-hidden"),t(),a.filter.find(".filterrow").show(),i()):(a.filtercolumnsList.jqxDropDownList({disabled:!1}),a.filterinput.removeClass(a.toThemeProperty("jqx-fill-state-disabled")),a.filterinput.attr("disabled",!1),a.filterbutton.removeClass(a.toThemeProperty("jqx-fill-state-disabled")),o(a.filtercolumnsList.jqxDropDownList("getSelectedItem").value),a.filter.find(".filterrow").addClass("filterrow-hidden"),a.filter.find(".filterrow").hide()),a._arrange()),!1}));var u=oe("<div style='float: left; width: 16px; height: 16px; position: relative; margin: 3px;'></div>");u.attr("title",a.gridlocalization.filterclearstring),u.addClass(a.toThemeProperty("jqx-icon-close")),e.append(u),u.hide(),(a.filtericon=u).click(function(){a.clearFilters(),a.filtericon.fadeOut(200)}),0<a.dataview.filters.length&&("advanced"!=a.filterMode?o(a.dataview.filters[0].datafield):a._updateFilterRow&&a._updateFilterRow())},_renderadvancedfilter:function(){function a(){f.clearFilters(!1,!1);for(var e=f.filtercolumnsList.jqxDropDownList("getSelectedItem").value,t=(f.filterinput.val(),0);t<f.filterrow[0].cells.length;t++){var i,r,s=f.filterrow[0].cells[t],o=oe(s).find("input:first"),l=oe(s).find(".filterconditions"),a=f.columns.records[t],n="";if(a.filterable){a.displayfield===e&&f.filterinput.val(o.val());var d,h=f.getcolumntypebydatafield(a),c=new oe.jqx.filter;switch(h){case"number":case"int":case"float":case"decimal":i="numericfilter",r=c.getoperatorsbyfiltertype("numericfilter");break;case"boolean":case"bool":i="booleanfilter",r=c.getoperatorsbyfiltertype("booleanfilter");break;case"date":case"time":i="datefilter",r=c.getoperatorsbyfiltertype("datefilter");break;case"string":i="stringfilter",r=c.getoperatorsbyfiltertype("stringfilter")}n=0!=l.length&&(d=l.jqxDropDownList("getSelectedItem"))?r[d.index]:"stringfilter"===i?r[2]:r[0];var u,g,p=o.val();(0<p.length||0==p.length&&"NOT_NULL"==n||0==p.length&&"NOT_EMPTY"==n||0==p.length&&"EMPTY"==n||0==p.length&&"NULL"==n)&&(u=a.displayfield,g=new oe.jqx.filter,"numericfilter"==i&&(","==f.gridlocalization.decimalseparator&&0<=p.indexOf(f.gridlocalization.decimalseparator)&&(p=p.replace(f.gridlocalization.decimalseparator,".")),0<=p.indexOf(f.gridlocalization.currencysymbol)&&(p=p.replace(f.gridlocalization.currencysymbol,"")),0<=p.indexOf(f.gridlocalization.percentagesymbol)&&(p=p.replace(f.gridlocalization.percentagesymbol,""))),c=g.createfilter(i,p,n,null,a.cellsFormat,f.gridlocalization),g.addfilter(0,c),f.addFilter(u,g))}}0<f.dataview.filters.length?f.applyFilters():f.clearFilters(),0==f.dataview.filters.length?f.filtericon.fadeOut(200):f.filtericon.fadeIn(200)}var f=this;!function(){var t=oe("<div style='position: relative;' class='filterrow'></div>").appendTo(f.filter);(f.filterrow=t)[0].cells=new Array,t.height(24),t.width(f.table.width());var i=f.filtercolumnsList.jqxDropDownList("getSelectedItem").value,r=f.filterinput.val();oe.each(f.columns.records,function(){var s=this,e=oe("<div></div>").appendTo(t);if(e.css("position","absolute"),e.css("left",0+parseInt(s.uielement[0].style.left)),s.pinned&&(e.css("z-index",f.tableZIndex+f.columns.records.length),e.addClass(f.toThemeProperty("jqx-widget-header"))),t[0].cells.push(e[0]),!this.filterable)return!0;var o=oe("<input style='margin-left: 4px; height: 20px; float: left;' role='textbox' type='text'/>").appendTo(e);o.keydown(function(e){13===e.keyCode&&a()}),s.displayfield===i&&o.val(r),o.addClass(f.toThemeProperty("jqx-input")),o.addClass(f.toThemeProperty("jqx-rc-all")),o.addClass(f.toThemeProperty("jqx-widget")),o.addClass(f.toThemeProperty("jqx-widget-content"));var l=oe("<div style='cursor: pointer; margin-left: 4px; margin-bottom: 4px; margin-top: 6px; width: 18px; position: relative; margin-top: 4px; float: left;'></div>").appendTo(e);l.append(oe("<div style='width: 16px; height: 16px;' class='"+f.toThemeProperty("jqx-grid-column-filterbutton")+"'></div>")),o.focus(function(){f.ensureColumnVisible(s.displayfield),f.filter[0].scrollLeft=0,f.ensureColumnVisible(s.displayfield),setTimeout(function(){f.filter[0].scrollLeft=0,f.ensureColumnVisible(s.displayfield)},10)}),l.click(function(){var e=oe("<div class='filterconditions' style='position: relative; margin-top: 1px; float: left;'></div>");e.insertAfter(l),l.remove();var t=f.getcolumntypebydatafield(s),i=f._getfiltersbytype(t),r="string"===t?2:0;e.jqxDropDownList({theme:f.theme,enableBrowserBoundsDetection:!0,renderMode:"simple",arrowSize:0,selectedIndex:r,rtl:f.rtl,dropDownWidth:230,dropDownHeight:180,width:20,height:20,source:i,selectionRenderer:function(){return"<div style='width: 16px; height: 16px;' class='"+f.toThemeProperty("jqx-grid-column-filterbutton")+"'></div>"}}),f.addHandler(e,"close",function(e){o.focus(),setTimeout(function(){o.focus()},10)}),e.removeAttr("tabindex"),e.find("div").removeAttr("tabindex"),e.jqxDropDownList("open")}),o[0].style.width=s.width-6-22+"px"}),oe("<div style='clear: both;'></div>").appendTo(t)}();var e=oe("<div style='position:relative;' class='filterrow'></div>").appendTo(f.filter),t=oe("<input type='button' style='position: relative; float: left; margin-top: 4px; margin-left: 4px;' value='"+f.gridlocalization.filterapplystring+"'/>").appendTo(e),i=oe("<input type='button' style='position: relative; float: left; margin-top: 4px;  margin-left: 4px;' value='"+f.gridlocalization.filtercancelstring+"'/>").appendTo(e);t.css("left",0),i.css("left",0),t.css("top","4px"),i.css("top","4px"),t.jqxButton({theme:f.theme}),i.jqxButton({theme:f.theme}),i.click(function(){f.filtercolumnsList.jqxDropDownList({disabled:!1}),f.filterinput.removeClass(f.toThemeProperty("jqx-fill-state-disabled")),f.filterinput.attr("disabled",!1),f.filterbutton.removeClass(f.toThemeProperty("jqx-fill-state-disabled")),f.filter.find(".filterrow").addClass("filterrow-hidden"),f.filter.find(".filterrow").hide(),f._arrange()}),t.click(function(){a()}),f._renderhorizontalscroll()},_getfiltertype:function(e){var t="stringfilter";switch(e){case"number":case"int":case"float":case"decimal":t="numericfilter";break;case"boolean":case"bool":t="booleanfilter";break;case"date":case"time":t="datefilter";break;case"string":t="stringfilter"}return t},getcolumntypebydatafield:function(e){var t=this.source.datafields||(this.source._source?this.source._source.datafields:null);if(t){var i="";if(oe.each(t,function(){if(this.name==e.displayfield)return this.type&&(i=this.type),!1}),i)return i}return"string"},_getfiltersbytype:function(e){var t="";switch(e){case"number":case"float":case"int":t=this.gridlocalization.filternumericcomparisonoperators;break;case"date":t=this.gridlocalization.filterdatecomparisonoperators;break;case"boolean":case"bool":t=this.gridlocalization.filterbooleancomparisonoperators;break;case"string":default:t=this.gridlocalization.filterstringcomparisonoperators}return t},_getcellvalue:function(e,t){var i=null,i=t[e.datafield];return null!=e.displayfield&&(i=t[e.displayfield]),null==i&&(i=""),i},_renderrows:function(e){if(this.editable&&null!=this.editKey&&!1!==e&&this.endroweditbykey(this.editKey),this.treeGrid)this.treeGrid._renderrows();else if(!this._loading&&!this._updating){this.rendering&&this.rendering();var o=this,t=0;this.table[0].rows=new Array;var i=this.toTP("jqx-cell")+" "+this.toTP("jqx-widget-content");this.rtl&&(i+=" "+this.toTP("jqx-cell-rtl"));var r=this.columns.records.length,s=oe.jqx.browser.msie&&oe.jqx.browser.version<8;s&&this.host.attr("hideFocus","true");var l,a=o.groups.length,n=new Array,d=this.source.records,d=this.dataview.evaluate(d);if(this.dataViewRecords=d,"all"==this.dataview.pagesize||!this.pageable||this.serverProcessing?(l=d,this.pageable&&this.serverProcessing&&d.length>this.dataview.pagesize&&(l=d.slice(this.dataview.pagesize*this.dataview.pagenum,this.dataview.pagesize*this.dataview.pagenum+this.dataview.pagesize))):l=d.slice(this.dataview.pagesize*this.dataview.pagenum,this.dataview.pagesize*this.dataview.pagenum+this.dataview.pagesize),o.groups&&0<o.groups.length){var h,c=this.pageable?this.dataview.pagesize*this.dataview.pagenum:0;h="root"===this.pageSizeMode?(h=o.source.getGroupedRecords(o.groups,"records","label",null,"data",null,"parent",d,0),o.rootRecordsLength=h.length,function(e){for(var t=0,i=new Array,r=0;r<e.length;r++){var s=e[r];if(0==s.level&&t++,t>o.dataview.pagesize*o.dataview.pagenum&&t<=o.dataview.pagesize*o.dataview.pagenum+o.dataview.pagesize&&i.push(s),t>o.dataview.pagesize*o.dataview.pagenum+o.dataview.pagesize)break}return i}(h)):o.source.getGroupedRecords(o.groups,"records","label",null,"data",null,"parent",l,c);var u=function(e,t){for(var i=0;i<e.length;i++){var r=e[i];if(t.push(r),r.records&&0<r.records.length)for(var s=u(r.records,new Array),o=0;o<s.length;o++)s[o].leaf,t.push(s[o])}return t};l=n=u.call(o,h,new Array),this.rowsByKey=new Array;for(var g=0;g<l.length;g++){var p=l[g];this.rowsByKey[p.uid]=p}}var n=l,f=(this.renderedRecords=n).length,m=this.tableZIndex,v=0,w=0;if(s)for(var y=0;y<r;y++){(K=(_=this.columns.records[y]).width)<_.minwidth&&(K=_.minwidth),K>_.maxwidth&&(K=_.maxwidth);var x=oe('<table><tr><td role="gridcell" style="max-width: '+K+"px; width:"+K+'px;" class="'+i+'"></td></tr></table>');oe(document.body).append(x);var b=x.find("td"),v=1+parseInt(b.css("padding-left"))+parseInt(b.css("padding-right"));x.remove();break}for(var _,j=this.rtl?" "+this.toTP("jqx-grid-table-rtl"):"",q="<table cellspacing='0' cellpadding='0' class='"+this.toTP("jqx-grid-table")+j+"' id='table"+this.element.id+"'><colgroup>",S="<table cellspacing='0' cellpadding='0' class='"+this.toTP("jqx-grid-table")+j+"' id='pinnedtable"+this.element.id+"'><colgroup>",T=0,y=0;y<r;y++){(_=this.columns.records[y]).hidden?(T++,0):((K=_.width)<_.minwidth&&(K=_.minwidth),K>_.maxwidth&&(K=_.maxwidth),(K-=v)<0&&(K=0),s?(E=K,y==T&&E++,_.rowDetailscolumn?S+="<col style='max-width: "+(E=E+4)+"px; width: "+E+"px;'>":S+="<col style='max-width: "+E+"px; width: "+E+"px;'>",q+="<col style='max-width: "+E+"px; width: "+E+"px;'>"):(S+="<col style='max-width: "+K+"px; width: "+K+"px;'>",q+="<col style='max-width: "+K+"px; width: "+K+"px;'>"),w+=K)}q+="</colgroup>",S+="</colgroup>";var C,P,z,B=this._hiddencolumns=!1;this.rowDetails&&this._pinnedTable&&(this._pinnedTable.find("[data-role=details]").detach(),this._table.find("[data-role=details]").detach()),0===f&&(I='<tr role="row">',C=this.host.height(),this.pageable&&(C-=this.pagerHeight,"both"===this.pagerPosition&&(C-=this.pagerHeight)),C-=this.columnsHeight,this.filterable&&(P=this.filter.find(".filterrow"),z=1,0<this.filter.find(".filterrow-hidden").length&&(z=0),C-=this.filterHeight+this.filterHeight*P.length*z),this.showstatusbar&&(C-=this.statusBarHeight),this.showAggregates&&(C-=this.aggregatesHeight),C<25&&(C=25),"hidden"!=this.hScrollBar[0].style.visibility&&(C-=this.hScrollBar.outerHeight()),"auto"!==this.height&&null!==this.height&&!this.autoheight||(C=300),x='<td colspan="'+this.columns.records.length+'" role="gridcell" style="border: none; min-height: '+C+"px; height: "+C+"px; max-width:"+w+"px; width:"+w+"px;",i=this.toTP("jqx-cell")+" "+this.toTP("jqx-grid-cell")+" "+this.toTP("jqx-item"),x+='" class="'+(i+=" "+this.toTP("jqx-center-align"))+'">',x+=this.gridlocalization.emptydatastring,q+=I+=x+="</td>",S+=I,this.table[0].style.width=w+2+"px",t=w);for(var H=this.getRows(),k=new Array,g=0;g<n.length;g++){var D=(p=n[g]).uid;void 0===p.uid&&(p.uid=this.dataview.generatekey());var I='<tr data-key="'+D+'" role="row" id="row'+g+this.element.id+'">',F='<tr data-key="'+D+'" role="row" id="row'+g+this.element.id+'">';0<a&&p.level<a&&(I='<tr data-role="row-group" data-key="'+D+'" role="row" id="row'+g+this.element.id+'">',F='<tr data-role="row-group" data-key="'+D+'" role="row" id="row'+g+this.element.id+'">');for(var M,R,L=0,A=0,y=0;y<r;y++){var K,O=this.columns.records[y];(O.pinned||this.rtl&&this.columns.records[r-1].pinned)&&(B=!0),(K=O.width)<O.minwidth&&(K=O.minwidth),K>O.maxwidth&&(K=O.maxwidth),(K-=v)<0&&(K=0);var i=this.toTP("jqx-cell")+" "+this.toTP("jqx-grid-cell")+" "+this.toTP("jqx-item");O.pinned&&(i+=" "+this.toTP("jqx-grid-cell-pinned")),this.sortcolumn===O.displayfield&&(i+=" "+this.toTP("jqx-grid-cell-sort")),this.altRows&&g%2!=0&&(i+=" "+this.toTP("jqx-grid-cell-alt")),this.rtl&&(i+=" "+this.toTP("jqx-cell-rtl"));var N="";if(0<a&&p.level<a)if(s)i+=" "+this.toTP("jqx-grid-cell-pinned");else{i+=" "+this.toTP("jqx-grid-cell-pinned"),N+=' colspan="'+r+'"';for(var E=0,G=0;G<r;G++){var W=o.columns.records[G],V=W.width;V<W.minwidth&&(K=W.minwidth),V>W.maxwidth&&(K=W.maxwidth),(V-=v)<0&&(V=0),W.hidden||(E+=V)}K=E}var x='<td role="gridcell" '+N+' style="max-width:'+K+"px; width:"+K+"px;",U='<td role="gridcell" '+N+' style="pointer-events: none; visibility: hidden; border-color: transparent; max-width:'+K+"px; width:"+K+"px;";y==r-1&&1==r&&(x+="border-right-color: transparent;",U+="border-right-color: transparent;");var Y=!1;0<a&&p.level<a&&(Y=!0),Y?this.rtl&&(i+=" "+this.toTP("jqx-right-align")):"left"!=O.cellsalign&&("right"===O.cellsalign?i+=" "+this.toTP("jqx-right-align"):i+=" "+this.toTP("jqx-center-align")),this.rowinfo[p.uid]&&(this.rowinfo[p.uid].selected&&!O.rowDetailscolumn&&this.editKey!==p.uid&&"none"!==this.selectionMode&&(i+=" "+this.toTP("jqx-grid-cell-selected"),i+=" "+this.toTP("jqx-fill-state-pressed")),this.rowinfo[p.uid].locked&&(i+=" "+this.toTP("jqx-grid-cell-locked"))),O.hidden?Y||(x+="display: none;",U+="display: none;",this._hiddencolumns=!0):(L+=v+K,0==A&&(x+="border-left-width: 0px;",U+="border-left-width: 0px;"),A++),0<a&&s&&Y&&a<=y&&(x+="font-size: 1px; border-color: transparent;  color: transparent;",U+="font-size: 1px; border-color: transparent; color: transparent;"),O.pinned&&(x+="pointer-events: auto;",U+="pointer-events: auto;"),!Y&&O.rowDetailscolumn&&(this.rowinfo[p.uid]?this.rowinfo[p.uid].nodetails||(this.rowinfo[p.uid].expanded?(this.rtl?i+=" "+this.toTP("jqx-grid-group-expand-rtl"):i+=" "+this.toTP("jqx-grid-group-expand"),i+=" "+this.toTP("jqx-icon-arrow-down")):this.rtl?(i+=" "+this.toTP("jqx-grid-group-collapse-rtl"),i+=" "+this.toTP("jqx-icon-arrow-left")):(i+=" "+this.toTP("jqx-grid-group-collapse"),i+=" "+this.toTP("jqx-icon-arrow-right"))):this.rtl?(i+=" "+this.toTP("jqx-grid-group-collapse-rtl"),i+=" "+this.toTP("jqx-icon-arrow-left")):(i+=" "+this.toTP("jqx-grid-group-collapse"),i+=" "+this.toTP("jqx-icon-arrow-right"))),this.autoRowHeight&&(!this.autoRowHeight||O.autoCellHeight)||(i+=" "+this.toTP("jqx-grid-cell-nowrap "));var X,Z,J=o._getcellvalue(O,p),$=O.cellsFormat;if(0<a&&p.level<a&&(J=p.label,$=o.getColumn(o.groups[p.level]).cellsFormat),""!=$&&oe.jqx.dataFormat&&(oe.jqx.dataFormat.isDate(J)?J=oe.jqx.dataFormat.formatdate(J,$,o.gridlocalization):(oe.jqx.dataFormat.isNumber(J)||!isNaN(parseFloat(J))&&isFinite(J))&&(J=oe.jqx.dataFormat.formatnumber(J,$,o.gridlocalization))),Y?this.groupsRenderer&&(J=this.groupsRenderer(J,p,p.level)):(""!=O.cellclassname&&O.cellclassname&&("string"==typeof O.cellclassname?i+=" "+O.cellclassname:(X=O.cellclassname(g,O.datafield,J,p))&&(i+=" "+X)),""!=O.cellsRenderer&&O.cellsRenderer&&(-1===(Z=H.indexOf(p))&&p.originalRecord&&(Z=H.indexOf(p.originalRecord)),(J=O.cellsRenderer(Z,O.datafield,J,p))&&(0<=J.indexOf("<jqx-")||0<=J.indexOf(" ng-"))&&k.push({rowKey:p.uid,row:Z,column:O.datafield,value:J,columnIndex:y}))),x+='" class="'+i+'">',x+=J,x+="</td>",U+='" class="'+i+'">',U+=J,U+="</td>",O.pinned?(F+=x,I+=x):(I+=x,B&&(F+=U)),0<a&&!s&&p.level<a)break}0==t&&(this.table[0].style.width=L+2+"px",t=L),q+=I+="</tr>",S+=F+="</tr>",this.rowinfo[p.uid]?("group"in this.rowinfo[p.uid]||(this.rowinfo[p.uid].group=Y),"row"in this.rowinfo[p.uid]||(this.rowinfo[p.uid].row=p),"details"in this.rowinfo[p.uid]||(this.rowinfo[p.uid].details=null),"detailsHeight"in this.rowinfo[p.uid]||(this.rowinfo[p.uid].detailsHeight=200),"initialized"in this.rowinfo[p.uid]||(this.rowinfo[p.uid].initialized=!1),"expanded"in this.rowinfo[p.uid]||(this.rowinfo[p.uid].expanded=!1)):this.rowinfo[p.uid]={group:Y,row:p,details:null,detailsHeight:200,initialized:!1,expanded:!1},this.serverProcessing&&(this.rowinfo[p.uid].row=p),this.rowDetails&&(M=this.rowinfo[p.uid].detailsHeight,R=this.rowinfo[p.uid]&&this.rowinfo[p.uid].expanded?'<tr data-role="row-details"><td valign="top" style="pointer-events: auto; overflow: hidden; min-height: '+M+"px; max-height: "+M+"px; height: "+M+'px; overflow: hidden; border-left: none; border-right: none;" colspan="'+this.columns.records.length+'" role="gridcell"':'<tr data-role="row-details" style="display: none;"><td valign="top" style="pointer-events: auto; overflow: hidden; min-height: '+M+"px; max-height: "+M+"px; height: "+M+'px; overflow: hidden; border-left: none; border-right: none;" colspan="'+this.columns.records.length+'" role="gridcell"',i=this.toTP("jqx-cell")+" "+this.toTP("jqx-grid-cell")+" "+this.toTP("jqx-item"),i+=" "+this.toTP("jqx-details"),i+=" "+this.toTP("jqx-reset"),q+=R+='" class="'+i+'"><div style="pointer-events: auto; overflow: hidden; min-height: '+M+"px; max-height: "+M+"px; height: "+M+'px;"><div data-role="details"></div></div></td></tr>',S+=R)}if(q+="</table>",S+="</table>",B){o.WinJS?MSApp.execUnsafeLocalFunction(function(){o.table.html(S+q)}):o.table[0].innerHTML=S+q;var Q=this.table.find("#table"+this.element.id),ee=this.table.find("#pinnedtable"+this.element.id);if(ee.css("float","left"),ee.css("pointer-events","none"),Q.css("float","left"),ee[0].style.position="absolute",Q[0].style.position="relative",Q[0].style.zIndex=m-10,ee[0].style.zIndex=m+10,this._table=Q,this._table[0].style.left="0px",this._pinnedTable=ee,this._pinnedTable[0].style.left="0px",this._pinnedTable[0].style.width=t+"px",this._table[0].style.width=t+"px",this.rtl&&t>parseInt(this.element.style.width)&&this._haspinned&&(this._pinnedTable[0].style.left=3-t+parseInt(this.element.style.width)+"px"),this.rowDetails)for(g=0;g<f;g++){var te,ie,re,se,D=(p=n[g]).uid;this.rowinfo[D].details&&(te=oe(this._table.children()[1]).children("[data-key="+D+"]"),ie=oe(this._pinnedTable.children()[1]).children("[data-key="+D+"]"),te&&(re=ie.next(),(se=oe(oe(re).children().children())).children().detach(),se.append(this.rowinfo[p.uid].details)))}}else{o.WinJS?MSApp.execUnsafeLocalFunction(function(){o.table.html(q)}):o.table[0].innerHTML=q;G=this.table.find("#table"+this.element.id);this._table=G,oe.jqx.browser.msie&&oe.jqx.browser.version<10&&(this._table[0].style.width=t+"px"),0===f&&(this._table[0].style.width=2+t+"px")}0===f&&(this._table[0].style.tableLayout="auto",this._pinnedTable&&(this._pinnedTable[0].style.tableLayout="auto")),k&&0<k.length&&(this._table[0].rows,oe.each(k,function(){this.row;var e,t=this.rowKey,i=(this.column,this.columnIndex),r=o._getuirow(t);r&&(e=r[0].cells[i],oe.jqx.angularCompile&&oe.jqx.angularCompile(e,"<div>"+e.innerHTML+"</div>"))})),this.rendered&&this.rendered()}},getcolumnindex:function(e){var t=this.getColumn(e);return this.columns.records.indexOf(t)},setcolumnindex:function(e,t,i){var r,o,l,a,s,n=this.getColumn(e);n.pinned||n.hidden||n.checkboxcolumn||n.grouped||(r=this.columns.records.indexOf(n),this.columns.records.splice(r,1),this.columns.records.splice(t,0,n),o=0,l=this.headerZIndex,this.columnsrow.children().detach(),this.toThemeProperty("jqx-grid-cell"),this.toThemeProperty("jqx-grid-cell-pinned"),this.toThemeProperty("jqx-item"),null!=(a=this).filterrow&&oe(a.filterrow.children()[0]),this.columnsrow[0].cells=[],oe.each(this.columns.records,function(e,t){var i=this.uielement;a.columnsrow.append(i),a.rtl?i.css("z-index",l++):i.css("z-index",l--);var r=a.rtl?250+l+1:250+l-1;this.pinned&&i.css("z-index",r);var s=this.width;i.css("left",o),a.columnsrow[0].cells[a.columnsrow[0].cells.length]=i[0],this.hidden&&0,this.hidden&&this.hideable||(o+=s)}),!this.groupable||0<(s=this.groups.length)&&0<=r-s&&(r-=s,t-=s),this.rowDetails&&0<=r-1&&(r--,t--),"checkbox"==this.selectionMode&&0<=r-1&&(r--,t--),n=this._columns[r],this._columns.splice(r,1),this._columns.splice(t,0,n),this.resize(),this._rendercolumnGroups(),this._raiseEvent("columnReordered",{dataField:n.datafield,oldIndex:r,newIndex:t}))},_pinnedColumnsLength:function(){var e=0;return oe.each(this.columns.records,function(){this.pinned&&e++,this.grouped&&e++}),this.rowDetails&&e++,"checkbox"==this.selectionMode&&e++,e},_handlecolumnsReorder:function(){var e,t,i,v,w=this,y=-1,x=!1;w.columnsReorder&&(e="mousemove.reorder"+this.element.id,t="mousedown.reorder"+this.element.id,i="mouseup.reorder"+this.element.id,v=!1,this.isTouchDevice()&&!0!==this.touchmode&&(v=!0,e=oe.jqx.mobile.getTouchEventName("touchmove")+".reorder"+this.element.id,t=oe.jqx.mobile.getTouchEventName("touchstart")+".reorder"+this.element.id,i=oe.jqx.mobile.getTouchEventName("touchend")+".reorder"+this.element.id),this.removeHandler(oe(document),e),this.addHandler(oe(document),e,function(e){if(w.resizing)return!0;if(null!=w.reordercolumn){var t,i=parseInt(e.pageX),r=parseInt(e.pageY);!v||null!=(t=w.getTouches(e)[0])&&(i=parseInt(t.pageX),r=parseInt(t.pageY));var s=w.host.coord(),o=parseInt(s.left),l=parseInt(s.top);null!=w.dragmousedownoffset&&null!=w.dragmousedownoffset||(w.dragmousedownoffset={left:0,top:0});var a=parseInt(i)-parseInt(w.dragmousedownoffset.left),n=parseInt(r)-parseInt(w.dragmousedownoffset.top);if(w.reordercolumn.css({left:a+"px",top:n+"px"}),x=!1,o<=i&&i<=o+w.host.width()&&l<=r&&r<=l+w.host.height()&&(x=!0),y=-1,x){w.reordercolumnicon.removeClass(w.toThemeProperty("jqx-grid-dragcancel-icon")),w.reordercolumnicon.addClass(w.toThemeProperty("jqx-grid-drag-icon"));var d=w.columnsheader.coord(),h=d.top+w.columnsheader.height();if(null!=w.columnsdropline)if(r>=d.top&&r<=h){if(y=w._handlereordercolumnsdroplines(i),w.columnGroups&&-1!=y){var c=0;c+=w._pinnedColumnsLength();var u=y.index;if(c<=u){var g=w.columns.records[u];if(null!=g){var p=w.columns.records.indexOf(w.getColumn(g.datafield));null==g.datafield&&(p=w.columns.records.indexOf(w.getcolumnbytext(g.text)));var f=oe.data(w.reordercolumn[0],"reorderrecord"),m=g;if(w.columns.records.indexOf(w.getColumn(f))<p&&"before"==y.position&&(m=w.columns.records[p-1]),m.columngroup!=w.getColumn(f).columngroup)return void w.columnsdropline.hide()}}}}else w.columnsdropline.fadeOut("slow")}else null!=w.columnsdropline&&w.columnsdropline.fadeOut("slow"),w.reordercolumnicon.removeClass(w.toThemeProperty("jqx-grid-drag-icon")),w.reordercolumnicon.addClass(w.toThemeProperty("jqx-grid-dragcancel-icon"));if(e.preventDefault&&(e.preventDefault(),e.stopPropagation()),v)return e.preventDefault(),e.stopPropagation(),!1}}),this.columnsbounds=new Array,this.removeHandler(oe(document),t),this.addHandler(oe(document),t,function(e){if(w.resizing)return!0;w.columnsbounds=new Array;var r=w.host.coord().left,s=w.host.coord().top;w.showtoolbar&&(s+=w.toolbarHeight),w.filter&&(s+=w.filter.height());var o=0;oe.each(w.columns.records,function(e){var t=this;if(t.hidden)return w.columnsbounds[w.columnsbounds.length]={top:s,column:t,left:r,width:0,height:2},!0;0==o&&(r=w.rtl?parseInt(w.host.coord().left)-w.hScrollInstance.max+w.hScrollInstance.value:parseInt(w.host.coord().left)-w.hScrollInstance.value),o++;var i=2+w.columnsHeight;w.columnshierarchy&&(s=oe(t.uielement).coord().top,i=oe(t.uielement).height()),w.columnsbounds[w.columnsbounds.length]={top:s,column:t,left:r,width:t.width,height:i},r+=t.width})}),this.removeHandler(oe(document),i),this.addHandler(oe(document),i,function(e){if(w.resizing)return!0;w.__drag=!1,oe(document.body).removeClass("jqx-disableselect");var t;parseInt(e.pageX),parseInt(e.pageY);v&&(t=w.getTouches(e)[0],parseInt(t.pageX),parseInt(t.pageY));var i=w.host.coord();parseInt(i.left),parseInt(i.top);if(w.showtoolbar&&w.toolbarHeight,w.columndragstarted=!1,(w.dragmousedown=null)!=w.reordercolumn){var r=oe.data(w.reordercolumn[0],"reorderrecord"),s=w.columns.records.indexOf(w.getColumn(r));w.reordercolumn.remove(),w.reordercolumn=null;var o=0;if(o+=w._pinnedColumnsLength(),null!=r){if(x&&-1!=y){var l=y.index;if(o<=l){var a=w.columns.records[l];if(null!=a){var n=w.columns.records.indexOf(w.getColumn(a.datafield));if(null==a.datafield&&(n=w.columns.records.indexOf(w.getcolumnbytext(a.text))),w.columnGroups){var d=a;if(s<n&&"before"==y.position&&(d=w.columns.records[n-1]),d.columngroup!=w.getColumn(r).columngroup)return void(null!=w.columnsdropline&&(w.columnsdropline.remove(),w.columnsdropline=null))}s<n?"before"==y.position?w.setcolumnindex(r,n-1):w.setcolumnindex(r,n):n<s&&w.setcolumnindex(r,n)}}}null!=w.columnsdropline&&(w.columnsdropline.remove(),w.columnsdropline=null)}}}))},getcolumnbytext:function(e){var t=null;return this.columns.records&&oe.each(this.columns.records,function(){if(this.text==e)return t=this,!1}),t},_handlereordercolumnsdroplines:function(t){var i=this,r=-1,s=i._pinnedColumnsLength(),o=parseInt(i.host.coord().left)+i.host.width(),l="hidden"!=i.vScrollBar.css("visibility")?19:0;return i.rtl||(l=0),oe.each(i.columnsbounds,function(e){if(s<=e){if(0==this.width)return!0;if(t<=this.left+this.width/2)return o<t?(i.columnsdropline.fadeOut(),!1):(i.columnsdropline.css("left",l+parseInt(this.left)+"px"),i.columnsdropline.css("top",parseInt(this.top)+"px"),i.columnsdropline.height(this.height),i.columnsdropline.fadeIn("slow"),!(r={index:e,position:"before"}));if(t>=this.left+this.width/2){if(this.left+this.width>o)return i.columnsdropline.fadeOut(),!1;i.columnsdropline.css("left",l+1+this.left+this.width),i.columnsdropline.css("top",this.top),i.columnsdropline.height(this.height),i.columnsdropline.fadeIn("slow"),r={index:e,position:"after"}}}}),r},_createreordercolumn:function(e,t,i){var r=this,s=t;r.reordercolumn&&r.reordercolumn.remove(),r.columnsdropline&&r.columnsdropline.remove(),r.reordercolumn=oe("<div></div>");var o=e.clone();r.reordercolumn.css("z-index",999999),o.css("border-width","1px"),o.css("opacity","0.4");var l=oe(o.find("."+r.toThemeProperty("jqx-grid-column-menubutton")));0<l.length&&l.css("display","none");var a=oe(o.find(".jqx-icon-close"));0<a.length&&a.css("display","none"),r.reordercolumnicon=oe('<div style="z-index: 9999; position: absolute; left: 100%; top: 50%; margin-left: -18px; margin-top: -7px;"></div>'),r.reordercolumnicon.addClass(r.toThemeProperty("jqx-grid-drag-icon")),r.reordercolumn.css("float","left"),r.reordercolumn.css("position","absolute");r.host.coord();o.width(e.width()+16),r.reordercolumn.append(o),r.reordercolumn.height(e.height()),r.reordercolumn.width(o.width()),r.reordercolumn.append(r.reordercolumnicon),oe(document.body).append(r.reordercolumn),o.css("margin-left",0),o.css("left",0),o.css("top",0),r.reordercolumn.css("left",s.left+r.dragmousedown.left),r.reordercolumn.css("top",s.top+r.dragmousedown.top),null!=i&&i&&(r.columnsdropline=oe('<div style="z-index: 9999; display: none; position: absolute;"></div>'),r.columnsdropline.width(2),r.columnsdropline.addClass(r.toThemeProperty("jqx-grid-group-drag-line")),oe(document.body).append(r.columnsdropline))},_handlecolumnsdragreorder:function(l,a){this.reordercolumn&&this.reordercolumn.remove(),this.columnsdropline&&this.columnsdropline.remove(),this.dragmousedown=null,this.dragmousedownoffset=null,this.columndragstarted=!1,this.reordercolumn=null;var n=this,d=!1;this.isTouchDevice()&&!0!==this.touchmode&&(d=!0);var e="mousedown.drag",h="mousemove.drag";d?(e=oe.jqx.mobile.getTouchEventName("touchstart")+".drag",h=oe.jqx.mobile.getTouchEventName("touchmove")+".drag"):this.addHandler(a,"dragstart",function(e){return!1}),this.addHandler(a,e,function(e){if(0==l.draggable)return!0;if(n.resizing)return!0;n.__drag=!0;var t,i=e.pageX,r=e.pageY;d&&(i=(t=n.getTouches(e)[0]).pageX,r=t.pageY),n.dragmousedown={left:i,top:r};var s=oe(e.target).coord();return n.dragmousedownoffset={left:parseInt(i)-parseInt(s.left),top:parseInt(r-s.top)},e.preventDefault&&e.preventDefault(),!0}),this.addHandler(a,h,function(e){return!l.draggable||(null==l.datafield||(!!l.pinned||(!!n.resizing||void(n.dragmousedown&&(t=e.pageX,i=e.pageY,!d||null!=(r=n.getTouches(e)[0])&&(t=r.pageX,i=r.pageY),h={left:t,top:i},n.columndragstarted||null!=n.reordercolumn||(s=Math.abs(h.left-n.dragmousedown.left),o=Math.abs(h.top-n.dragmousedown.top),(3<s||3<o)&&(n._createreordercolumn(a,h,!0),oe(document.body).addClass("jqx-disableselect"),oe.data(n.reordercolumn[0],"reorderrecord",l.datafield))))))));var t,i,r,s,o})},getTouches:function(e){return oe.jqx.mobile.getTouches(e)},_handlecolumnsResize:function(){var d=this;if(this.columnsResize){var h=!1;d.isTouchDevice()&&(h=!0);var e="mousemove.resize"+this.element.id,t="mousedown.resize"+this.element.id,i="mouseup.resize"+this.element.id;h&&(e=oe.jqx.mobile.getTouchEventName("touchmove")+".resize"+this.element.id,t=oe.jqx.mobile.getTouchEventName("touchstart")+".resize"+this.element.id,i=oe.jqx.mobile.getTouchEventName("touchend")+".resize"+this.element.id),this.removeHandler(oe(document),e),this.addHandler(oe(document),e,function(e){if(null!=d.resizablecolumn&&!d.disabled&&d.resizing&&null!=d.resizeline){d.resizablecolumn.columnelement;var t=d.host.coord(),i=parseInt(d.resizestartline.coord().left),r=i-d._startcolumnwidth,s="auto"==(s=d.resizablecolumn.column.minwidth)?0:parseInt(s),o="auto"==(o=d.resizablecolumn.column.maxwidth)?0:parseInt(o),l=e.pageX;h&&(l=oe.jqx.mobile.getTouches(e)[0].pageX),r+=s;var a=0<o?i+o:0,n=0==o||d._startcolumnwidth+l-i<o;if(d.rtl&&(n=!0),n)if(d.rtl){if(l>=t.left&&l<=t.left+d.host.width()&&(d.resizeline.css("left",l),h))return!1}else if(l>=t.left&&r<=l&&((0!=a&&e.pageX<a||0==a)&&d.resizeline.css("left",l),h))return!1}if(!h&&null!=d.resizablecolumn)return!1}),this.removeHandler(oe(document),t),this.addHandler(oe(document),t,function(e){if(null!=d.resizablecolumn&&!d.disabled){var t=d.resizablecolumn.columnelement;if(t.coord().top+t.height()+5<e.pageY)return void(d.resizablecolumn=null);if(t.coord().top-5>e.pageY)return void(d.resizablecolumn=null);d._startcolumnwidth=d.resizablecolumn.column.width,d.resizablecolumn.column._width=null,oe(document.body).addClass("jqx-disableselect"),oe(document.body).addClass("jqx-position-reset"),d._mouseDownResize=new Date,d.resizing=!0,d._resizecolumn=d.resizablecolumn.column,d.resizeline=d.resizeline||oe('<div style="position: absolute;"></div>'),d.resizestartline=d.resizestartline||oe('<div style="position: absolute;"></div>'),d.resizebackground=d.resizebackground||oe('<div style="position: absolute; left: 0; top: 0; background: #000;"></div>'),d.resizebackground.css("opacity",.01),d.resizebackground.css("cursor","col-resize"),d.resizeline.css("cursor","col-resize"),d.resizestartline.css("cursor","col-resize"),d.resizeline.addClass(d.toThemeProperty("jqx-grid-column-resizeline")),d.resizestartline.addClass(d.toThemeProperty("jqx-grid-column-resizestartline")),oe(document.body).append(d.resizeline),oe(document.body).append(d.resizestartline),oe(document.body).append(d.resizebackground);var s=d.resizablecolumn.columnelement.coord();d.resizebackground.css("left",d.host.coord().left),d.resizebackground.css("top",d.host.coord().top),d.resizebackground.width(d.host.width()),d.resizebackground.height(d.host.height()),d.resizebackground.css("z-index",999999999);function i(e){d.rtl?e.css("left",parseInt(s.left)):e.css("left",parseInt(s.left)+d._startcolumnwidth);var t=0;t+=d.showtoolbar?d.toolbarHeight:0,t+=d.showstatusbar?d.statusBarHeight:0,t+=d.showAggregates?d.aggregatesHeight:0,d.pageable&&"bottom"!=d.pagerPosition&&(t+=d.pagerHeight),d.filterable&&(t+=d.filter.height());var i=0;d.pageable&&"top"!=d.pagerPosition&&(i=d.pagerHeight);var r="hidden"!=d.hScrollBar.css("visibility")?d.scrollBarSize:0;e.css("top",parseInt(s.top)),e.css("z-index",9999999999),d.columnGroups?e.height(d.host.height()+d.resizablecolumn.columnelement.height()-i-t-r-d.columnGroupslevel*d.columnsHeight):e.height(d.host.height()-i-t-r),e.show("fast")}i(d.resizeline),i(d.resizestartline),d.dragmousedown=null}});function r(){if(oe(document.body).removeClass("jqx-disableselect"),oe(document.body).removeClass("jqx-position-reset"),d.resizing){if(d._mouseUpResize=new Date,d._mouseUpResize-d._mouseDownResize<200)return d.resizing=!1,void(null!=d._resizecolumn&&null!=d.resizeline&&"block"==d.resizeline.css("display")&&(d._resizecolumn=null,d.resizeline.hide(),d.resizestartline.hide(),d.resizebackground.remove()));if(d.resizing=!1,!d.disabled){var e=d.host.width();if("hidden"!=d.vScrollBar[0].style.visibility&&(e-=20),e<0&&(e=0),null!=d._resizecolumn&&null!=d.resizeline&&"block"==d.resizeline.css("display")){var t=parseInt(d.resizeline.css("left")),i=parseInt(d.resizestartline.css("left")),r=d._startcolumnwidth+t-i;d.rtl&&(r=d._startcolumnwidth-t+i);var s=d._resizecolumn.width;d._resizecolumn.width=r,null!=d._resizecolumn._percentagewidth&&(d._resizecolumn._percentagewidth=r/e*100);for(var o=0;o<d._columns.length;o++)if(d._columns[o].datafield===d._resizecolumn.datafield){d._columns[o].width=d._resizecolumn.width;break}d.hScrollBar[0].style.visibility;var l=d._resizecolumn.displayfield;d._updatecolumnwidths(),d.refresh(),d._resizecolumn=null,d.resizeline.hide(),d.resizestartline.hide(),d.resizebackground.remove(),d.resizablecolumn=null,d._raiseEvent("columnResized",{dataField:l,oldWidth:s,newWidth:r})}else d.resizablecolumn=null}}}var s,o;try{""==document.referrer&&!window.frameElement||((s=null)!=window.top&&window.top!=window.self&&window.parent&&document.referrer&&(s=document.referrer),s&&-1!=s.indexOf(document.location.host)&&(o=function(e){r()},window.top.document.addEventListener?window.top.document.addEventListener("mouseup",o,!1):window.top.document.attachEvent&&window.top.document.attachEvent("onmouseup",o)))}catch(e){}this.removeHandler(oe(document),i),this.addHandler(oe(document),i,function(e){if(null!=oe.data(document.body,"contextmenu"+d.element.id)&&d.autoshowcolumnsmenubutton)return!0;r()})}},_updatecolumnwidths:function(){var d=this.host.width(),h=d;"hidden"!==this.vScrollBar.css("visibility")&&0<this.scrollBarSize&&(d-=parseInt(this.scrollBarSize)+6,h=d);var c,u,e,g,p,f,m="";null!=this.columns&&null!=this.columns.records&&(c=this,u=!1,oe.each(this.columns.records,function(e,t){this.hidden||(-1!=this.width.toString().indexOf("%")||null!=this._percentagewidth?(t=0,"hidden"==c.vScrollBar[0].style.visibility||c.scrollBarSize,c.scrollBarSize,t=parseFloat(this.width)*h/100,null!=this._percentagewidth&&(t=parseFloat(this._percentagewidth)*h/100),t<this.minwidth&&"auto"!=this.minwidth&&(t=this.minwidth),t>this.maxwidth&&"auto"!=this.maxwidth&&(t=this.maxwidth),d-=Math.round(t)):"auto"==this.width||this._width?m+=this.text:d-=this.width)}),0!=(e=this.columnsheader.find("#columntable"+this.element.id)).length&&(g=0,p=e.find(".jqx-grid-column-header"),f=0,oe.each(this.columns.records,function(e,t){var i,r,s,o=oe(p[e]),l=!1,a=this.width,n=this.width;-1==this.width.toString().indexOf("%")&&null==this._percentagewidth||(a=null!=this._percentagewidth?parseFloat(this._percentagewidth)*h/100:parseFloat(this.width)*h/100,a=Math.round(a),l=!0),"auto"==this.width||this._width||l?l?(a<this.minwidth&&"auto"!=this.minwidth&&(a=this.minwidth,this.width=a),a>this.maxwidth&&"auto"!=this.maxwidth&&(a=this.maxwidth,this.width=a),parseInt(o[0].style.width)!=a&&(o.width(a),this.width=a)):(i=Math.floor(d*(this.text.length/m.length)),isNaN(i)&&(i=this.minwidth),r=d*(this.text.length/m.length)-i,1<=(g+=r)&&(--g,i++),.5<=g&&e==c.columns.records.length-1&&i++,i<0&&(s=oe("<span>"+this.text+"</span>"),oe(document.body).append(s),i=10+s.width(),s.remove()),i<this.minwidth&&(i=this.minwidth),i>this.maxwidth&&(i=this.maxwidth),this._width="auto",this.width=i,o.width(this.width)):parseInt(o[0].style.width)!=this.width&&o.width(this.width),parseInt(o[0].style.left)!=f&&o.css("left",f),this.hidden||(f+=this.width),this._requirewidthupdate=!0,n!==this.width&&(u=!0)}),this.columnsheader.width(2+f),e.width(this.columnsheader.width()),this._resizecolumnGroups(),u&&this._renderrows(),this.showAggregates&&this._refreshcolumnsaggregates()))},_rendercolumnheaders:function(){var x=this;if(!this._updating){x.columns.records.length>x.headerZIndex&&(x.headerZIndex=x.columns.records.length+10),this._columnsbydatafield=new Array,this.columnsheader.find("#columntable"+this.element.id).remove();var b=oe('<div id="columntable'+this.element.id+'" style="height: 100%; position: relative;"></div>');b[0].cells=new Array;var _=0,j="",q=this.host.width(),S=q,i=new Array,r=new Array;if(oe.each(this.columns.records,function(e,t){this.hidden||("auto"==this.width||this._width?j+=this.text:this.width<this.minwidth&&"auto"!=this.minwidth?q-=this.minwidth:this.width>this.maxwidth&&"auto"!=this.maxwidth?q-=this.maxwidth:-1!=this.width.toString().indexOf("%")?(t=0,(t=parseFloat(this.width)*S/100)<this.minwidth&&"auto"!=this.minwidth&&(t=this.minwidth),t>this.maxwidth&&"auto"!=this.maxwidth&&(t=this.maxwidth),q-=t):("string"==typeof this.width&&(this.width=parseInt(this.width)),q-=this.width)),this.pinned||this.grouped||this.checkboxcolumn?(x._haspinned&&(this.pinned=!0),i[i.length]=this):r[r.length]=this}),this.rtl){var e=0;i.reverse();for(t=this.columns.records.length-1;t>=this.columns.records.length-i.length;t--)this.columns.replace(t,i[e++]);for(s=0;s<r.length;s++)this.columns.replace(s,r[s])}else{for(var t=0;t<i.length;t++)this.columns.replace(t,i[t]);for(var s=0;s<r.length;s++)this.columns.replace(i.length+s,r[s])}var T=this.headerZIndex,C=x.columnsHeight,P=0;oe.each(this.columns.records,function(e,t){var i,r;this.height=x.columnsHeight,x.columnGroups&&x.columnGroups.length&&(this.height=(this.datafield,i=this,r=x.columnGroupslevel*x.columnsHeight,r-=i.level*x.columnsHeight),C=this.height);var s=x.toTP("jqx-grid-column-header")+" "+x.toTP("jqx-widget-header");x.rtl&&(s+=" "+x.toTP("jqx-grid-column-header-rtl")),x.enableBrowserSelection||(s+=" "+x.toTP("jqx-disableselect"));var o=x.rtl?250+T+1:250+T-1,l=x.rtl?T++:T--,a=oe('<div role="columnheader" style="z-index: '+l+';position: absolute; height: 100%;" class="'+s+'"><div style="height: 100%; width: 100%;"></div></div>');x.rtl&&0===e&&(a[0].style.borderLeftColor="transparent"),x.columnGroups&&(a[0].style.height=C+"px",a[0].style.bottom="0px",this.pinned&&(a[0].style.zIndex=o)),this.uielement=a,this.element=a,""!=this.classname&&this.classname&&a.addClass(this.classname);var n,d,h,c=this.width,u=!1;null===this.width&&(this.width="auto"),-1==this.width.toString().indexOf("%")&&null==this._percentagewidth||(c=null!=this._percentagewidth?parseFloat(this._percentagewidth)*S/100:parseFloat(this.width)*S/100,c=Math.round(c),u=!0),"auto"==this.width||this._width||u?u?(c<this.minwidth&&"auto"!=this.minwidth&&(c=this.minwidth),c>this.maxwidth&&"auto"!=this.maxwidth&&(c=this.maxwidth),null!=this._percentagewidth&&-1==this.width.toString().indexOf("%")||(this._percentagewidth=this.width),a.width(c),this.width=c):(n=Math.floor(q*(this.text.length/j.length)),d=q*(this.text.length/j.length)-n,1<=(P+=d)&&(--P,n++),.5<=P&&e==x.columns.records.length-1&&n++,isNaN(n)&&(n=this.minwidth),n<0&&(h=oe("<span>"+this.text+"</span>"),oe(document.body).append(h),n=10+h.width(),h.remove()),n<this.minwidth&&(n=this.minwidth),n>this.maxwidth&&(n=this.maxwidth),this._width="auto",this.width=parseInt(n),c=this.width,a.width(this.width)):(c<this.minwidth&&"auto"!=this.minwidth&&(c=this.minwidth),c>this.maxwidth&&"auto"!=this.maxwidth&&(c=this.maxwidth),a[0].style.width=parseInt(c)+"px"),this.hidden&&a.css("display","none");var g=oe(a.children()[0]);b[0].cells[e]=a[0];var p,f,m=null!=this.renderer?this.renderer(this.text,this.align,C):x._rendercolumnheader(this.text,this.align,C,x);null==m&&(m=x._rendercolumnheader(this.text,this.align,C,x)),null!=this.renderer&&(m=oe(m)),x.WinJS?MSApp.execUnsafeLocalFunction(function(){g.append(oe(m))}):this.renderer?g.append(oe(m)):m&&(g[0].innerHTML=m),null!=m&&(p=oe('<div class="iconscontainer" style="height: '+C+'px; margin-left: -32px; display: block; position: absolute; left: 100%; top: 0%; width: 32px;"><div class="filtericon '+x.toTP("jqx-widget-header")+'" style="height: '+C+'px; float: right; display: none; width: 16px;"><div class="'+x.toTP("jqx-grid-column-filterbutton")+'" style="width: 100%; height:100%;"></div></div><div class="sortasc '+x.toTP("jqx-widget-header")+'" style="height: '+C+'px; float: right; display: none; width: 16px;"><div class="'+x.toTP("jqx-grid-column-sortascbutton")+'" style="width: 100%; height:100%;"></div></div><div class="sortdesc '+x.toTP("jqx-widget-header")+'" style="height: '+C+'px; float: right; display: none; width: 16px;"><div class="'+x.toTP("jqx-grid-column-sortdescbutton")+'" style="width: 100%; height:100%;"></div></div></div>'),g.append(p),f=p.children(),this.sortasc=f[1],this.sortdesc=f[2],this.filtericon=f[0],this.iconscontainer=p,x.rtl&&(p.css("margin-left","0px"),p.css("left","0px"),oe(this.sortasc).css("float","left"),oe(this.filtericon).css("float","left"),oe(this.sortdesc).css("float","left"))),b.append(a),x.columnsReorder&&this.draggable&&x._handlecolumnsdragreorder&&x._handlecolumnsdragreorder(this,a);var v,w,y=this;x.addHandler(a,"click",function(e){if(y.checkboxcolumn)return!0;x._togglesort&&(x._loading||x._togglesort(y)),e.preventDefault()}),x.columnsResize&&(v=!1,w="mousemove",x.isTouchDevice()&&(v=!0,w=oe.jqx.mobile.getTouchEventName("touchstart")),x.addHandler(a,w,function(e){if(!y.resizable)return!(x.resizablecolumn=null);var t=parseInt(e.pageX),i=5,r=parseInt(a.coord().left);if(x.hasTransform&&(r=oe.jqx.utilities.getOffset(a).left),x._handlecolumnsResize){if(v){i=40;return(t=oe.jqx.mobile.getTouches(e)[0].pageX)>=r+y.width-i?(x.resizablecolumn={columnelement:a,column:y},a.css("cursor","col-resize")):(a.css("cursor",""),x.resizablecolumn=null),!0}var s=y.width;if(x.rtl&&(s=0),r+s-i<=t){if(t<=r+s+i)return x.resizablecolumn={columnelement:a,column:y},a.css("cursor","col-resize"),!1;a.css("cursor",""),x.resizablecolumn=null}else a.css("cursor",""),t<r+s-i&&(y._animating||y._menuvisible||a.mouseenter()),x.resizablecolumn=null}})),a.css("left",_),this.hidden||(_+=c),y.rendered&&y.rendered(oe(g[0].firstChild),y.align,C)&&null!=p&&p.hide()}),0<_?this.columnsheader.width(2+_):this.columnsheader.width(_),this.columnsrow=b,x.columnsheader.append(b),b.width(_),this._handlecolumnsdragdrop&&this._handlecolumnsdragdrop(),this._handlecolumnsReorder&&this._handlecolumnsReorder(),this._handlecolumnsResize&&this._handlecolumnsResize(),this.columnGroups&&this._rendercolumnGroups()}},_rendercolumnGroups:function(){if(this.columnGroups){for(var e=0,t=0;t<this.columns.records.length;t++)this.columns.records[t].pinned&&e++;var i=this.headerZIndex-e+this.columns.records.length,r=this,s=r.toTP("jqx-grid-column-header")+" "+r.toTP("jqx-grid-columngroup-header")+" "+r.toTP("jqx-widget-header");r.rtl&&(s+=" "+r.toTP("jqx-grid-columngroup-header-rtl"));var o=this.columnsheader.find("#columntable"+this.element.id);o.find("jqx-grid-columngroup-header").remove();for(var l=0;l<this.columnGroupslevel-1;l++)for(t=0;t<this.columnGroups.length;t++){var a,n,d,h,c,u,g,p=this.columnGroups[t],f=p.level;f===l&&(a=f*this.columnsHeight,n=99999,p.groups&&(d=function(e){for(var t=0,i=0;i<e.groups.length;i++){var r=e.groups[i];r.groups?t+=d(r):r.hidden||(t+=r.width,n=Math.min(parseInt(r.element[0].style.left),n))}return t},p.width=d(p),p.left=n,h=this.columnsHeight,c=i--,u=oe('<div role="columnheader" style="z-index: '+c+';position: absolute;" class="'+s+'"></div>'),g=oe(this._rendercolumnheader(p.text,p.align,this.columnsHeight,this)),u.append(g),u[0].style.left=n+"px",0===n&&(u[0].style.borderLeftColor="transparent"),u[0].style.top=a+"px",u[0].style.height=h+"px",u[0].style.width=-1+p.width+"px",o.append(u),p.element=u))}}},_resizecolumnGroups:function(){if(this.columnGroups)for(var e=0;e<this.columnGroups.length;e++){var s,t,i,r=this.columnGroups[e],o=r.level*this.columnsHeight,l=99999;r.groups&&(s=function(e){for(var t=0,i=0;i<e.groups.length;i++){var r=e.groups[i];r.groups?t+=s(r):r.hidden||(t+=r.width,l=Math.min(parseInt(r.element[0].style.left),l))}return t},r.width=s(r),r.left=l,t=this.columnsHeight,(i=r.element)[0].style.left=l+"px",i[0].style.top=o+"px",i[0].style.height=t+"px",i[0].style.width=-1+r.width+"px")}},_removecolumnhandlers:function(e){var t,i=this,r=oe(e.element);0<r.length&&(i.removeHandler(r,"mouseenter"),i.removeHandler(r,"mouseleave"),t=oe(e.filtericon),i.removeHandler(t,"mousedown"),i.removeHandler(t,"click"),i.removeHandler(r,"click"))},_calculateaggregate:function(e,t,i,r){if(!e.datafield)return null;var s=e.aggregates;if(s=s||t){for(var o=new Array,l=0;l<s.length;l++)"count"!=s[l]&&(o[o.length]=e.cellsFormat);if(this.source&&this.source.getAggregatedData){null==r&&(r=this.getRows(),this.dataViewRecords&&(r=this.dataViewRecords));var a,n,d=r,h=-1;if(this.treeGrid&&(a=new Array,(n=function(e){for(var t=0;t<e.length;t++)null!=e[t]&&(-1==h&&(h=e[t].level),e[t].aggregate||a.push(e[t]),!e[t].leaf&&e[t].records&&0<e[t].records.length&&n(e[t].records))})(r),r=a),this.treeGrid&&this.filterable&&0<this.dataview.filters.length){for(var c=new Array,l=0;l<r.length;l++)r[l]&&!1!==r[l]._visible&&c.push(r[l]);r=c;for(var u=new Array,l=0;l<d.length;l++)d[l]&&!1!==d[l]._visible&&u.push(d[l]);d=u}if(null==i||1==i){var g=this.source.getAggregatedData([{name:e.datafield,aggregates:s,formatStrings:o}],this.gridlocalization,r,h);return this.treeGrid&&(0==(p=this.source._source.hierarchy&&this.source._source.hierarchy.groupingDataFields?this.source._source.hierarchy.groupingDataFields.length:0)||p<=h)&&g&&(null==g[e.datafield].sum&&null==g[e.datafield].avg||(f=this.source.getAggregatedData([{name:e.datafield,aggregates:s,formatStrings:o}],this.gridlocalization,d,h),null!=g[e.datafield].sum&&(g[e.datafield].sum=f[e.datafield].sum),null!=g[e.datafield].avg&&(g[e.datafield].avg=f[e.datafield].avg))),g}var p,f,g=this.source.getAggregatedData([{name:e.datafield,aggregates:s}],this.gridlocalization,r,h);return this.treeGrid&&g&&(null==g[e.datafield].sum&&null==g[e.datafield].avg||(0==(p=this.source._source.hierarchy&&this.source._source.hierarchy.groupingDataFields?this.source._source.hierarchy.groupingDataFields.length:0)||p<=h)&&(f=this.source.getAggregatedData([{name:e.datafield,aggregates:s}],this.gridlocalization,d,h),null!=g[e.datafield].sum&&(g[e.datafield].sum=f[e.datafield].sum),null!=g[e.datafield].avg&&(g[e.datafield].avg=f[e.datafield].avg))),g}}return null},getcolumnaggregateddata:function(e,t,i,r){var s=this.getColumn(e);if(!s)return"";var o=null!=i&&0!=i&&i;if(null==t)return"";var l=s.aggregates;s.aggregates=null;var a=this._calculateaggregate(s,t,o,r),n={};return a&&(n=a[e],s.aggregates=l),n},_updatecolumnaggregates:function(e,t,i){var r,s,o=this;if(!t)return i.children().remove(),i.html(""),void(e.aggregatesRenderer&&(r={},e.aggregates&&(r=this.getcolumnaggregateddata(e.datafield,e.aggregates)),s=e.aggregatesRenderer({},e,i,null),i.html(s)));i.children().remove(),i.html(""),e.aggregatesRenderer?t&&(s=e.aggregatesRenderer(t[e.datafield],e,i,this.getcolumnaggregateddata(e.datafield,e.aggregates),"aggregates"),i.html(s)):oe.each(t,function(){for(r in this){var e=oe('<div style="position: relative; margin: 4px; overflow: hidden;"></div>'),t=r,t=o._getaggregatename(t);e.html(t+":"+this[r]),o.rtl&&e.addClass(o.toThemeProperty("jqx-rtl")),i.append(e)}})},_getaggregatetype:function(e){switch(e){case"min":case"max":case"count":case"avg":case"product":case"var":case"varp":case"stdev":case"stdevp":case"sum":return e}var t=e;for(var i in e){t=i;break}return t},_getaggregatename:function(e){var t=e;switch(e){case"min":t="Min";break;case"max":t="Max";break;case"count":t="Count";break;case"avg":t="Avg";break;case"product":t="Product";break;case"var":t="Var";break;case"stdevp":t="StDevP";break;case"stdev":t="StDev";break;case"varp":t="VarP";case"sum":t="Sum"}if(e===t&&"string"!=typeof t)for(var i in e){t=i;break}return t},_updatecolumnsaggregates:function(){var e=this.getRows();this.dataViewRecords&&(e=this.dataViewRecords);var t=this.columns.records.length;if(null!=this.aggregates[0].cells)for(var i=0;i<t;i++){var r=oe(this.aggregates[0].cells[i]),s=this.columns.records[i],o=this._calculateaggregate(s,null,!0,e);this._updatecolumnaggregates(s,o,r)}},_refreshcolumnsaggregates:function(){var e=this.columns.records.length;if(null!=this.aggregates[0].cells)for(var t=0,i=0;i<e;i++){var r=oe(this.aggregates[0].cells[i]),s=this.columns.records[i];r&&(r.width(s.width),r[0].style.left=t+"px",s.hidden&&s.hideable?r.css("display","none"):t+=s.width)}},_updateaggregates:function(){var e=oe('<div style="position: relative;" id="statusrow'+this.element.id+'"></div>'),t=0,i=this.columns.records.length,r=this.toThemeProperty("jqx-grid-cell");this.rtl&&(r+=" "+this.toThemeProperty("jqx-grid-cell-rtl"),t=0,e.css("border-left-width","0px"),this.aggregates.css("border-left-color","transparent")),r+=" "+this.toThemeProperty("jqx-grid-cell-pinned");var s=i+10,o=new Array;this.aggregates[0].cells=o;for(var l=0;l<i;l++){var a=this.columns.records[l],n=this._calculateaggregate(a),d=a.width;d<a.minwidth&&(d=a.minwidth),d>a.maxwidth&&(d=a.maxwidth);var h=r;a.cellsalign&&(h+=" "+this.toThemeProperty("jqx-"+a.cellsalign+"-align"));var c=oe('<div style="overflow: hidden; position: absolute; height: 100%;" class="'+h+'"></div>');e.append(c),c.css("left",t),this.rtl?(c.css("z-index",s++),0==l&&c.css("border-left-width","0px")):c.css("z-index",s--),c.width(d),c[0].style.left=t+"px",a.hidden&&a.hideable?c.css("display","none"):t+=d,o[o.length]=c[0],this._updatecolumnaggregates(a,n,c)}oe.jqx.browser.msie&&oe.jqx.browser.version<8&&e.css("z-index",s--),e.width(parseInt(t)+2),e.height(this.aggregatesHeight),this.aggregates.children().remove(),this.aggregates.append(e),this.aggregates.removeClass(this.toThemeProperty("jqx-widget-header")),this.aggregates.addClass(r),this.aggregates.css("border-bottom-color","transparent"),this.aggregates.css("border-top-width","1px"),this.rtl&&"hidden"!=this.hScrollBar.css("visibility")&&this._renderhorizontalscroll()},destroy:function(){var e=this;if(e.columns&&e.columns.records)for(var t=0;t<e.columns.records.length;t++)e._removecolumnhandlers(e.columns.records[t]);e.removeHandler(oe(document),"mouseup.pagerbuttonstop"),e.removeHandler(oe(document),"mouseup.pagerbuttonsbottom"),e.removeHandler(e.content,"scroll"),e.removeHandler(e.content,"mousedown"),e.removeHandler(oe(document),"mousedown.gridedit"+e.element.id);var i="mousemove.resize"+e.element.id,r="mousedown.resize"+e.element.id,s="mouseup.resize"+e.element.id;e.removeHandler(oe(document),i),e.removeHandler(oe(document),r),e.removeHandler(oe(document),s);var o,i="mousemove.reorder"+e.element.id,r="mousedown.reorder"+e.element.id,s="mouseup.reorder"+e.element.id;if(e.removeHandler(oe(document),i),e.removeHandler(oe(document),r),e.removeHandler(oe(document),s),e.filterable){if(e.filterrow)for(t=0;t<e.filterrow[0].cells.length;t++){var l=e.filterrow[0].cells[t],a=oe(l).find(".filterconditions");e.columns.records[t];0<a.length&&a.jqxDropDownList("destroy")}e.filtercolumnsList&&e.filtercolumnsList.jqxDropDownList("destroy")}e.pageable&&(e.pagershowrowscombotop&&e.pagershowrowscombotop.jqxDropDownList&&e.pagershowrowscombotop.jqxDropDownList("destroy"),e.pagershowrowscombobottom&&e.pagershowrowscombobottom.jqxDropDownList&&e.pagershowrowscombobottom.jqxDropDownList("destroy"),o=e.pagerbuttonsbottom.find("a"),e.removeHandler(o,"click"),e.removeHandler(o,"mouseenter"),e.removeHandler(o,"mouseleave"),o.remove(),o=e.pagerbuttonstop.find("a"),e.removeHandler(o,"click"),e.removeHandler(o,"mouseenter"),e.removeHandler(o,"mouseleave"),o.remove(),e.pagernexttop&&(e.pagernexttop.jqxButton("destroy"),e.pagerprevioustop.jqxButton("destroy"),e.pagernextbottom.jqxButton("destroy"),e.pagerpreviousbottom.jqxButton("destroy"),e.pagerfirsttop.jqxButton("destroy"),e.pagerfirstbottom.jqxButton("destroy"),e.pagerlasttop.jqxButton("destroy"),e.pagerlastbottom.jqxButton("destroy"))),e._removeHandlers(),e.vScrollBar.jqxScrollBar("destroy"),e.hScrollBar.jqxScrollBar("destroy"),delete e.vScrollBar,delete e.hScrollBar,delete e._mousewheelfunc,oe.jqx.utilities.resize(e.host,null,!0),e.host.remove()},propertiesChangedHandler:function(e,t,i){i.width&&i.height&&2==Object.keys(i).length&&e.refresh()},propertyChangedHandler:function(e,t,i,r){if(null!=this.isInitialized&&0!=this.isInitialized&&!(e.batchUpdate&&e.batchUpdate.width&&e.batchUpdate.height&&2==Object.keys(e.batchUpdate).length)&&r!==i)if("filterable"==t)e._render();else if("height"===t)e.host.height(e.height),e.host.width(e.width),e._updatesize(!1,!0);else if("width"===t)e.host.height(e.height),e.host.width(e.width),e._updatesize(!0,!1);else if("source"===t)e.updateBoundData();else if("columnGroups"===t)e._render();else if("columns"===t)e._columns=null,e._render();else if("rtl"===t)e.content.css("left",""),e.columns=e._columns,e.vScrollBar.jqxScrollBar({rtl:r}),e.hScrollBar.jqxScrollBar({rtl:r}),e._render();else if("pagerMode"===t)e.pagerMode=r,e._initpager();else if("pageSizeOptions"==t){e._initpager();for(var s=!1,o=0;o<r.length;o++)if(parseInt(r[o])==e.pageSize){s=!0;break}s||oe.jqx.set(e,[{pageSize:r[0]}])}else if("pageSize"==t){var l=e.dataview.pagenum*e.dataview.pagesize;e.dataview.pagesize=e.pageSize;var a=Math.floor(l/e.dataview.pagesize);a===e.dataview.pagenum&&parseInt(r)===parseInt(i)||(e._raiseEvent("pageSizeChanged",{pagenum:r,oldpageSize:i,pageSize:e.dataview.pagesize}),e.goToPage(a)||(e.serverProcessing?e.updateBoundData("pager"):e.refresh()))}else if("pagerPosition"===t)e.refresh();else if("selectionMode"===t)e.selectionMode=r.toLowerCase();else if("touchmode"==t)e.touchDevice=null,e._removeHandlers(),e.touchDevice=null,e.vScrollBar.jqxScrollBar({touchMode:r}),e.hScrollBar.jqxScrollBar({touchMode:r}),e._updateTouchScrolling(),e._arrange(),e._updatecolumnwidths(),e._renderrows(),e._addHandlers();else{if("enableHover"==t)return;var n;"disabled"==t?(r?e.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")):e.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled")),e.pageable&&(e.pagernexttop&&(e.pagernexttop.jqxButton({disabled:r}),e.pagerprevioustop.jqxButton({disabled:r}),e.pagernextbottom.jqxButton({disabled:r}),e.pagerpreviousbottom.jqxButton({disabled:r}),e.pagerfirsttop.jqxButton({disabled:r}),e.pagerfirstbottom.jqxButton({disabled:r}),e.pagerlasttop.jqxButton({disabled:r}),e.pagerlastbottom.jqxButton({disabled:r}),e.pagershowrowscombotop.jqxDropDownList&&"advanced"==e.pagerMode&&(e.pagershowrowscombotop.jqxDropDownList({disabled:!1}),e.pagershowrowscombobottom.jqxDropDownList({disabled:!1}))),e.host.find(".jqx-grid-pager-number").css("cursor",r?"default":"pointer")),e.host.find(".jqx-grid-group-collapse").css("cursor",r?"default":"pointer"),e.host.find(".jqx-grid-group-expand").css("cursor",r?"default":"pointer")):"columnsHeight"==t?e._render():("theme"==t&&(oe.jqx.utilities.setTheme(i,r,e.host),e.vScrollBar.jqxScrollBar({theme:e.theme}),e.hScrollBar.jqxScrollBar({theme:e.theme}),e.pageable&&e.pagernexttop&&(e.pagernexttop.jqxButton({theme:e.theme}),e.pagerprevioustop.jqxButton({theme:e.theme}),e.pagernextbottom.jqxButton({theme:e.theme}),e.pagerpreviousbottom.jqxButton({theme:e.theme}),e.pagerfirsttop.jqxButton({theme:e.theme}),e.pagerfirstbottom.jqxButton({theme:e.theme}),e.pagerlasttop.jqxButton({theme:e.theme}),e.pagerlastbottom.jqxButton({theme:e.theme}),e.pagershowrowscombotop.jqxDropDownList&&"advanced"==e.pagerMode&&(e.pagershowrowscombotop.jqxDropDownList({theme:e.theme}),e.pagershowrowscombobottom.jqxDropDownList({theme:e.theme}))),e.filterable&&(0<(n=oe(".filterconditions")).length&&n.jqxDropDownList({theme:e.theme}),e.filtercolumnsList&&e.filtercolumnsList.jqxDropDownList({theme:e.theme}))),e.refresh())}},_rendercolumnheader:function(e,t,i,r){var s="4px";return r.columnGroups?((s=i/2-this._columnheight/2)<0&&(s=4),s+="px"):25!=this.columnsHeight&&((s=this.columnsHeight/2-this._columnheight/2)<0&&(s=4),s+="px"),'<div style="overflow: hidden; text-overflow: ellipsis; text-align: '+t+"; margin-left: 4px; margin-right: 4px; margin-bottom: "+s+"; margin-top: "+s+';"><span style="text-overflow: ellipsis; cursor: default;">'+e+"</span></div>"}}),oe.jqx.dataCollection=function(e){return this.records=new Array,this.owner=e,this.updating=!1,this.beginUpdate=function(){this.updating=!0},this.resumeupdate=function(){this.updating=!1},this.clear=function(){this.records=new Array},this.replace=function(e,t){this.records[e]=t},this.isempty=function(e){return null==this.records[e]},this.initialize=function(e){e<1&&(e=1),this.records[e-1]=-1},this.length=function(){return this.records.length},this.indexOf=function(e){return this.records.indexOf(e)},this.add=function(e){return null!=e&&(this.records[this.records.length]=e,!0)},this.insertAt=function(e,t){return null!=e&&null!=e&&(null!=t&&(0<=e&&(e<this.records.length?(this.records.splice(e,0,t),!0):this.add(t))))},this.remove=function(e){if(null==e||null==e)return!1;var t=this.records.indexOf(e);return-1!=t&&(this.records.splice(t,1),!0)},this.removeAt=function(e){if(null==e||null==e)return!1;if(e<0)return!1;if(e<this.records.length){this.records[e];return this.records.splice(e,1),!0}return!1},this},oe.jqx.dataView=function(){return(this.that=this).grid=null,this.records=[],this.rows=[],this.columns=[],this.filters=new Array,this.pagesize=0,this.pagenum=0,this.source=null,this.databind=function(e,t){var i=!!e._source,r=null;this._sortData=null,this._sortHierarchyData=null,i?e=(r=e)._source:r=new oe.jqx.dataAdapter(e,{autoBind:!1});function s(e){e.originaldata=r.originaldata,e.records=r.records,e.hierarchy=r.hierarchy,e.grid.serverProcessing||(e._sortData=null,e._sortfield=null,e._filteredData=null,e._sortHierarchyData=null),e.hierarchy||(e.hierarchy=new Array,r.hierarchy=new Array),r._source.totalrecords?e.totalrecords=r._source.totalrecords:r._source.totalRecords?e.totalrecords=r._source.totalRecords:0!==e.hierarchy.length?e.totalrecords=e.hierarchy.length:e.totalrecords=e.records.length,e.cachedrecords=r.cachedrecords}var o;o=this,r.recordids=[],r.records=new Array,r.cachedrecords=new Array,r.originaldata=new Array,r._options.totalrecords=o.totalrecords,r._options.originaldata=o.originaldata,r._options.recordids=o.recordids,r._options.cachedrecords=new Array,r._options.pagenum=o.pagenum,r._options.pageable=o.pageable,null!=e.type&&(r._options.type=e.type),null!=e.formatdata&&(r._options.formatData=e.formatdata),null!=e.contenttype&&(r._options.contentType=e.contenttype),null!=e.async&&(r._options.async=e.async),null!=e.updaterow&&(r._options.updaterow=e.updaterow),null!=e.addrow&&(r._options.addrow=e.addrow),null!=e.deleterow&&(r._options.deleterow=e.deleterow),0==o.pagesize&&(o.pagesize=10),r._options.pagesize=o.pagesize,this.source=e;var l=this;switch(e.datatype){case"local":case"array":default:null==e.localdata&&(e.localdata=[]),null!=e.localdata&&(r.unbindBindingUpdate(l.grid.element.id),(!l.grid.autoBind&&l.grid.isInitialized||l.grid.autoBind)&&r.dataBind(),(j=function(){s(l),l.update()})(),r.bindBindingUpdate(l.grid.element.id,j));break;case"json":case"jsonp":case"xml":case"xhtml":case"script":case"text":case"csv":case"tab":if(null!=e.localdata)return r.unbindBindingUpdate(l.grid.element.id),(!l.grid.autoBind&&l.grid.isInitialized||l.grid.autoBind)&&r.dataBind(),(j=function(e){s(l),l.update()})(),void r.bindBindingUpdate(l.grid.element.id,j);for(var a=[],n=0,d={},h=0;h<this.filters.length;h++){var c=this.filters[h].datafield,u=this.filters[h].filter;if(u.getfilters){var g=u.getfilters();d[c+"operator"]=u.operator;for(var p=0;p<g.length;p++){g[p].datafield=c;var f,m,v=g[p].value;"datefilter"==g[p].type?g[p].value&&g[p].value.toLocaleString&&(f=this.grid.getColumn(g[p].datafield))&&f.cellsformat?(m=this.grid.source.formatDate(g[p].value,f.cellsformat,this.grid.gridlocalization),d["filtervalue"+n]=m||g[p].value.toLocaleString()):d["filtervalue"+n]=v.toString():(d["filtervalue"+n]=v.toString(),g[p].data&&(d["filterid"+n]=g[p].data.toString()),g[p].id&&(d["filterid"+n]=g[p].id.toString())),d["filtercondition"+n]=g[p].condition,d["filteroperator"+n]=g[p].operator,d["filterdatafield"+n]=c;var w={label:v.toString()};g[p].data&&(w.value=g[p].data.toString()),g[p].id?w.value=g[p].id.toString():w.value=v.toString(),w.condition=g[p].condition,w.operator=0==g[p].operator?"and":"or",w.field=c,w.type=g[p].type;var y=!1;if(0<a.length)for(var x=0;x<a.length;x++){var b=a[x];if(b.field==c){b.filters.push(w),y=!0;break}}y||(a.push({field:c,filters:[]}),a[a.length-1].filters.push(w)),n++}}}d.filterGroups=a,d.filterslength=n,oe.extend(d,{sortdatafield:l.sortfield,sortorder:l.sortfielddirection,pagenum:l.pagenum,pagesize:l.grid.pageSize});var _=r._options.data;r._options.data?oe.extend(r._options.data,d):(e.data&&oe.extend(d,e.data),r._options.data=d);var j=function(){function e(){s(l),l.update()}if(oe.jqx.browser.msie&&oe.jqx.browser.version<9)try{e()}catch(e){}else e()};r.unbindDownloadComplete(l.grid.element.id),r.bindDownloadComplete(l.grid.element.id,j),r._source.loaderror=function(e,t,i){j()},(!l.grid.autoBind&&l.grid.isInitialized||l.grid.autoBind)&&r.dataBind(),r._options.data=_}},this.addFilter=function(e,t){this._sortData=null,this._sortHierarchyData=null;for(var i=-1,r=0;r<this.filters.length;r++)if(this.filters[r].datafield==e){i=r;break}-1==i?this.filters[this.filters.length]={filter:t,datafield:e}:this.filters[i]={filter:t,datafield:e}},this.removeFilter=function(e){this._sortData=null,this._sortHierarchyData=null;for(var t=0;t<this.filters.length;t++)if(this.filters[t].datafield==e){this.filters.splice(t,1);break}},this.sortBy=function(e,t){if(null==t)return this.sortfield="",void(this.sortfielddirection="");null==t&&(t=!0),t="a"==t||"asc"==t||"ascending"==t||1==t,"constructor"==e&&(e=""),this.sortfield=e,this.sortfielddirection=t?"asc":"desc"},this._sort=function(e){if(!this.sortfield||!this.sortfielddirection)return e;if(this._sortfield==this.sortfield&&this._sortfielddirection==this.sortfielddirection&&this._sortData)return this._sortData;var i=this,t=Object.prototype.toString;Object.prototype.toString="function"==typeof i.sortfield?i.sortfield:function(){return this[i.sortfield]};var r="";this.source.datafields&&oe.each(this.source.datafields,function(){if(this.name==i.sortfield)return this.type&&(r=this.type),!1});for(var s,o=new Array,l=0;l<e.length;l++)o.push(oe.extend({originalRecord:e[l]},e[l]));return this._sortfield=this.sortfield,this._sortfielddirection=this.sortfielddirection,s="desc"===this.sortfielddirection?o.sort(function(e,t){return i._compare(e,t,r)}).reverse():o.sort(function(e,t){return i._compare(e,t,r)}),this._sortData=s,Object.prototype.toString=t,s},this._compare=function(e,t,i){if(void 0===(e=e)&&(e=null),void 0===(t=t)&&(t=null),null===e&&null===t)return 0;if(null===e&&null!==t)return 1;if(null!==e&&null===t)return 1;if(e=e.toString(),t=t.toString(),oe.jqx.dataFormat)if(i&&""!=i)switch(i){case"number":case"int":case"float":return e<t?-1:t<e?1:0;case"date":case"time":return e<t?-1:t<e?1:0;case"string":case"text":e=String(e).toLowerCase(),t=String(t).toLowerCase()}else{if(oe.jqx.dataFormat.isNumber(e)&&oe.jqx.dataFormat.isNumber(t))return e<t?-1:t<e?1:0;if(oe.jqx.dataFormat.isDate(e)&&oe.jqx.dataFormat.isDate(t))return e<t?-1:t<e?1:0;oe.jqx.dataFormat.isNumber(e)||oe.jqx.dataFormat.isNumber(t)||(e=String(e).toLowerCase(),t=String(t).toLowerCase())}try{if(e<t)return-1;if(t<e)return 1}catch(e){}return 0},this._equals=function(e,t){return 0===this._compare(e,t)},this.evaluate=function(e){var t;if(this.grid.serverProcessing)return e&&(""!=this.grid.source._source.id&&null!=this.grid.source._source.id||this.grid.pageable&&(t=this.grid.pageSize*this.pagenum,this.grid.rowsByKey=new Array,s=this,oe.each(e,function(e){this.uid=t,s.grid.rowsByKey[this.uid]=this,t++}))),e;var s,i,o,r=new Array;if(this.filters.length){function l(e,t){for(var i=0;i<e.length;i++){var r=e[i];r._visible=!0;for(var s=void 0,o=0;o<this.filters.length;o++)var l=this.filters[o].filter,a=r[this.filters[o].datafield],n=l.evaluate(a),s=null==s?n:"or"==l.operator?s||n:s&&n;r._visible=!1,(s||r.aggregate)&&(r._visible=!0,t.push(r),d[r.uid]=r)}}var d=new Array;if(this._filteredData)this.rows=this._filteredData;else{if(this.source.hierarchy||this.grid.source.hierarchy&&0<this.grid.source.hierarchy.length){var a=new Array,n=function(e,t){for(var i=0;i<t.length;i++){var r=t[i];a.push(r),r.records&&0<r.records.length&&n(r,r.records)}};n(null,e),l.call(this,a,r);for(var h=0;h<r.length;h++)for(var c=r[h];c.parent;){var u=c.parent;d[u.uid]||(u._visible=!0,d[u.uid]=u),c=u}r=e}else l.call(this,e,r);this._filteredData=r,this.rows=r}}else this.rows=e;return this.source.hierarchy||this.grid.source.hierarchy&&0<this.grid.source.hierarchy.length?(s=this,i=new Array,this._sortData=null,o=function(e,t){var i=s._sortData=null;if(s.source.hierarchy.groupingDataFields)if(t&&0<t.length&&t[0].level<s.source.hierarchy.groupingDataFields.length){i=new Array;for(var r=0;r<t.length;r++)i.push(oe.extend({originalRecord:t[r]},t[r]))}else i=s._sort(t);else i=s._sort(t);e.records?e.records=i:e=e.concat(i);for(r=0;r<i.length;r++)i[r].records&&i[r].records.length&&o(i[r],i[r].records);return e},(this.sortfield||this.sortfielddirection)&&(i=this._sortHierarchyData?this._sortHierarchyData:o(i,e),this.rows=i,this._sortHierarchyData=i)):this.rows=this._sort(this.rows),this.rows},this.getid=function(e,t,i){if(0<oe(e,t).length)return oe(e,t).text();if(this.rows&&""!=e&&null!=e&&0<this.rows.length){null==(o=this.rows[this.rows.length-1][e])&&(o=null);for(var r=1;r<=100;r++){if(!this.grid.rowsByKey[r+o]){if(this.grid&&this.grid.treeGrid&&this.grid.treeGrid.virtualModeCreateRecords){if(this.grid.rowsByKey["jqx"+o+r])continue;return"jqx"+o+r}return o+r}}}if(null!=e&&0<e.toString().length){var s=oe(t).attr(e);if(null!=s&&0<s.toString().length)return this.grid&&this.grid.treeGrid&&this.grid.treeGrid.virtualModeCreateRecords?"jqx"+s:s}var o;if(this.rows&&0<this.rows.length&&this.grid.rowsByKey[i]){null==(o=this.rows[this.rows.length-1][e])&&(o="");for(r=1;r<=1e3;r++){if(!this.grid.rowsByKey[r+o]){if(this.grid&&this.grid.treeGrid&&this.grid.treeGrid.virtualModeCreateRecords){if(this.grid.rowsByKey["jqx"+o+r])continue;return"jqx"+o+r}return o+r}}}if(this.grid&&this.grid.treeGrid&&this.grid.treeGrid.virtualModeCreateRecords){if(!this.grid.rowsByKey["jqx"+i])return"jqx"+i;for(r=i+1;r<=100;r++){if(!this.grid.rowsByKey["jqx"+r]){if(this.grid.rowsByKey["jqx"+r])continue;return"jqx"+r}}}return i},this.generatekey=function(){function e(){return 16*(1+Math.random())|0}return""+e()+e()+"-"+e()+"-"+e()},this}}(jqxBaseFramework);