!function(M){M.jqx.scheduler||(M.jqx.scheduler={}),M.jqx.scheduler.utilities={weekDays:{Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},guid:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()},areWeekDaysIncluded:function(e,i){var n=!1;return M.each(e,function(e,t){if(t===i)return!(n=!0)}),n},getStartOfDay:function(e){var t=new M.jqx.date(e.year(),e.month(),e.day(),0,0,0);return t.timeZone=e.timeZone,t},getEndOfDay:function(e){var t=new M.jqx.date(e.year(),e.month(),e.day(),23,59,59);return t.timeZone=e.timeZone,t},getDaysCount:function(e,t){for(var i=1;e<t;)e.day()!=t.day()&&i++,e=e.addDays(1);return i},getStartOfWeek:function(e,t){var i=e.dayOfWeek(),n=t.firstDay;i<n&&(i+=7);var r=i-n;return e.addDays(-r).date()},getEndOfWeek:function(e,t,i){return this.getStartOfWeek(e,t,i).addDays(7)},getEndOfMonth:function(e,t){var i=e.daysInMonth(),n=new M.jqx.date(e.year(),e.month(),i,23,59,59);return n.timeZone=e.timeZone,n},rangeIntersection:function(e,t,i,n){var r=e.dateData,a=i.dateData,o=t.dateData,l=n.dateData;if(r<=a&&a<o)return!0;if(a<r&&r<l)return!0;if(r==a||o==l)return!0;if(r<a){if(a<o&&o<l)return!0;if(l<o)return!0}else{if(r<l&&l<o)return!0;if(o<l)return!0}return!1},rangeContains:function(e,t,i,n){return e<=i&&n<=t},monthDays:[31,28,31,30,31,30,31,31,30,31,30,31],msPerDay:864e5,maxYear:9999,ORDINAL_BASE:new Date(1970,0,1),getYearDay:function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());return Math.ceil((t-new Date(e.getFullYear(),0,1))/M.jqx.scheduler.utilities.msPerDay)+1},isLeapYear:function(e){return e instanceof Date&&(e=e.getFullYear()),e%4==0&&e%100!=0||e%400==0},tzOffset:function(e){return 60*e.getTimezoneOffset()*1e3},monthRange:function(e,t){var i=new Date(e,t,1);return[M.jqx.scheduler.utilities.getWeekday(i),M.jqx.scheduler.utilities.getMonthDays(i)]},getMonthDays:function(e){var t=e.getMonth();return 1==t&&M.jqx.scheduler.utilities.isLeapYear(e)?29:M.jqx.scheduler.utilities.monthDays[t]},getWeekday:function(e){return[6,0,1,2,3,4,5][e.getDay()]},combine:function(e,t){return t=t||e,new Date(e.getFullYear(),e.getMonth(),e.getDate(),t.getHours(),t.getMinutes(),t.getSeconds())},sort:function(e){e.sort(function(e,t){return e.getTime()-t.getTime()})},timeToUntilString:function(e){for(var t,i=new Date(e),n=[i.getUTCFullYear(),i.getUTCMonth()+1,i.getUTCDate(),"T",i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),"Z"],r=0;r<n.length;r++)t=n[r],!/[TZ]/.test(t)&&t<10&&(n[r]="0"+String(t));return n.join("")},untilStringToDate:function(e){var t=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z)?$/.exec(e);if(!t)throw new Error("Invalid UNTIL value: "+e);return new Date(Date.UTC(t[1],t[2]-1,t[3],t[5]||0,t[6]||0,t[7]||0))},Time:function(e,t,i){this.hour=e,this.minute=t,this.second=i;var n=this.that=this;this.getHours=function(){return n.hour},this.getMinutes=function(){return n.minute},this.getSeconds=function(){return n.second},this.getTime=function(){return 1e3*(60*n.hour*60+60*n.minute+n.second)}}},M.jqx.scheduler.appointment=function(){var a=this;if(a.from=new M.jqx.date,a.to=(new M.jqx.date).addHours(1),a.subject="",a.description="",a.location="",a.tooltip="",a.hidden=!1,a.resourceId=null,a.id="",a.background=null,a.color=null,a.borderColor=null,a.status="busy",a.style=null,a.exceptions=new Array,a.exceptionDates=new Array,a.recurrencePattern=null,a.recurrenceException=new Array,a.occurrenceEnumerator=null,a.rootAppointment=null,a.hiddenByResourceId=!1,a.draggable=!0,a.resizable=!0,a.recurrentAppointment=!1,a.allDay=!1,a.readOnly=!1,a.showStatus=!0,a.timeZone=null,a.scheduler=null,a.elements=new Array,a.appointmentObject=!0,a.duration=function(){var e=1e4*(a.to-a.from);return new M.jqx.timeSpan(e)},a.toJSON=function(e){function i(e){return(e<10?"0":"")+e}function t(e,t){return e?t?e.getUTCFullYear()+"-"+i(e.getUTCMonth()+1)+"-"+i(e.getUTCDate())+"T"+i(e.getUTCHours())+":"+i(e.getUTCMinutes())+":"+i(e.getUTCSeconds())+"Z":e.getFullYear()+"-"+i(e.getMonth()+1)+"-"+i(e.getDate())+"T"+i(e.getHours())+":"+i(e.getMinutes())+":"+i(e.getSeconds())+"Z":""}var n={};return n.id=a.id,n.from=t(a.from.toDate(),e),n.to=t(a.to.toDate(),e),n.subject=a.subject,n.status=a.status,n.location=a.location,n.description=a.description,n.title=a.title,n.resourceId=a.resourceId,a.recurrencePattern?n.recurrencePattern=a.recurrencePattern.toString():n.recurrencePattern="",a.recurrenceException&&0<a.recurrenceException.length?n.recurrenceException=function(){for(var e="",t=0;t<a.recurrenceException.length;t++)e+=a.recurrenceException[t].toString(),t<a.recurrenceException.length-1&&(e+=",");return e}():n.recurrenceException="",n.dtstamp=t(new Date,e),JSON.stringify(n)},a.toString=function(i){function e(e){for(var t="";75<e.length;)t+=e.substr(0,75)+"\n",e=" "+e.substr(75);return t+=e}function n(e){return(e<10?"0":"")+e}function r(e,t){return e?t?""+e.getFullYear()+n(e.getMonth()+1)+n(e.getDate())+"T"+n(e.getHours())+n(e.getMinutes())+n(e.getSeconds()):""+e.getUTCFullYear()+n(e.getUTCMonth()+1)+n(e.getUTCDate())+"T"+n(e.getUTCHours())+n(e.getUTCMinutes())+n(e.getUTCSeconds())+"Z":""}var t=a.status;return"busy"==(t=t||"CONFIRMED").toLowerCase()&&(t="CONFIRMED"),"tentative"==t.toLowerCase()&&(t="TENTATIVE"),"free"==t.toLowerCase()&&(t="CANCELLED"),"outOfOffice"==t.toLowerCase()&&(t="CANCELLED"),"BEGIN:VEVENT\nUID:"+a.id+"\nDTSTAMP:"+r(new Date,i)+"\n"+e("TITLE:"+a.subject)+"\nDTSTART:"+r(a.from.toDate(),i)+"\nDTEND:"+r(a.to.toDate(),i)+"\n"+(a.recurrencePattern?"RRULE:"+a.recurrencePattern.toString()+"\n":"")+(a.recurrenceException&&0<a.recurrenceException.length?"EXDATE:"+function(){for(var e="",t=0;t<a.recurrenceException.length;t++)e+=r(a.recurrenceException[t].toDate(),i),t<a.recurrenceException.length-1&&(e+=",");return e}()+"\n":"")+(a.subject?e("SUMMARY:"+a.subject)+"\n":"")+"TRANSP:OPAQUE\n"+(a.status?e("STATUS:"+t)+"\n":"")+(a.description?e("DESCRIPTION:"+a.description)+"\n":"")+(a.location?e("LOCATION:"+a.location)+"\n":"")+"END:VEVENT"},a.range=function(){return a.allDay?{from:M.jqx.scheduler.utilities.getStartOfDay(a.from),to:M.jqx.scheduler.utilities.getEndOfDay(a.to)}:{from:a.from,to:a.to}},a.clearRecurrence=function(){a.recurrencePattern&&(a.exceptions=new Array,a.exceptionDates=new Array,a.recurrencePattern=null,a.recurrenceException=new Array,a.hidden=!1)},a.isAllDayAppointment=function(){return 1<=this.duration().days()||this.allDay},a.cloneAppointmentAttributes=function(e){e.subject=a.subject,e.description=a.description,e.location=a.location,e.tooltip=a.tooltip,e.resourceId=a.resourceId,e.category=a.category,e.status=a.status,e.rootAppointment=a,e.color=a.color,e.borderColor=a.borderColor,e.background=a.background,e.hidden=a.hidden,e.timezone=a.timeZone,e.style=a.style,e.hiddenByResourceId=a.hiddenByResourceId},a.createOccurrence=function(e){if(null==e)return null;var t=new M.jqx.scheduler.appointment;t.allDay=a.allDay;var i=a.duration();return a.allDay&&(i=new M.jqx.timeSpan(1e4*(a.to-a.from))),t.from=e,t.to=e.add(i),t.occurrenceFrom=e.clone(),t.subject=a.subject,t.description=a.description,t.location=a.location,t.tooltip=a.tooltip,t.resourceId=a.resourceId,t.category=a.category,t.status=a.status,t.rootAppointment=a,t.color=a.color,t.draggable=a.draggable,t.resizable=a.resizable,t.borderColor=a.borderColor,t.background=a.background,t.recurrentAppointment=!0,t.timeZone=a.timeZone,t.style=a.style,t.hiddenByResourceId=a.hiddenByResourceId,t.boundAppointment=a.boundAppointment,a.hiddenByResourceId&&(t.hidden=!0),t.id=a.id+"."+M.jqx.scheduler.utilities.guid(),a.hidden=!0,a.occurrenceIndex++,t},a.clone=function(){var e=new M.jqx.scheduler.appointment;return e.allDay=a.allDay,e.from=a.from.clone(),e.to=a.to.clone(),e.subject=a.subject,e.description=a.description,e.location=a.location,e.tooltip=a.tooltip,e.resourceId=a.resourceId,e.category=a.category,e.status=a.status,e.color=a.color,e.borderColor=a.borderColor,e.background=a.background,e.style=a.style,e.timeZone=a.timeZone,e.hiddenByResourceId=a.hiddenByResourceId,a.hiddenByResourceId&&(e.hidden=!0),e.id=a.id+"."+M.jqx.scheduler.utilities.guid(),e},a.isRecurrentAppointment=function(){return a.recurrentAppointment||null!=a.recurrencePattern},a.anyExceptions=function(){return null!=a.exceptions&&0<a.exceptions.length},a.anyOccurrences=function(){return null!=a.occurrenceEnumerator&&a.occurrenceEnumerator.getNextAppointment()},a.isException=function(){var e=a.rootAppointment||this;if(!e.recurrenceException)return!1;for(var t=0;t<e.recurrenceException.length;t++){var i=e.recurrenceException[t];if(a.occurrenceFrom&&i.equals(a.occurrenceFrom))return!0}return!1},a.getOccurrences=function(e,t){a.occurrenceIndex=0;var i=null!==e?e:a.from,n=new M.jqx.scheduler.recurrentAppointmentsList(a,a.calendar,i,t,a.scheduler);return a.occurrences=n.list,n.list},1===arguments.length)if("object"==M.type(arguments[0]))for(var e in arguments[0]){var t=arguments[0][e];void 0!==this[e]&&(this[e]=t)}else a.from=arguments[0],a.to=new M.jqx.date(a.from).addHours(1);else 2===arguments.length?(a.from=arguments[0],a.to=arguments[1]):3===arguments.length?(a.from=arguments[0],a.to=arguments[1],a.subject=arguments[2]):3===arguments.length&&(a.from=arguments[0],a.to=arguments[1],a.subject=arguments[2],a.description=arguments[3]);null!=a.recurrencePattern&&a.recurrencePattern.setFrom(a.from)},M.jqx.scheduler.recurrentAppointmentsList=function(){var l=this;return l.recurrentAppointment=null,l.currentTime=null,l.calendar=M.jqx.scheduler.calendar,l.from=new M.jqx.date(0),l.to=new M.jqx.date(9999,12,31),l.foundItems=0,l.list=new Array,l.scheduler=null,l.getOccurrences=function(e,t,i){return null==e?l.list:new M.jqx.scheduler.recurrentAppointmentsList(e,l.calendar,t,i).list},l.current=function(){return l.recurrentAppointment.createOccurrence(l.currentTime)},l.fillList=function(){l.currentTime=null,l.foundItems=0,l.list=new Array;var e=l.recurrentAppointment.recurrencePattern;if(e.step=0,e.current=0,e.currentYearDay=0,null==e)return!1;for(;l.getNextAppointment(e);){var t=l.current();t&&l.list.push(t)}},l.getNextAppointment=function(e){if(null==l.recurrentAppointment)return!1;this.scheduler._views[this.scheduler._view].type;var t=this.scheduler._views[this.scheduler._view],i=0;switch(e.freq){case"weekly":i=7;break;case"monthly":i=31;break;case"yearly":i=365}for(var n=0;n<4294967295;n++){var r=e.getNewOccurenceDate();if(r){if(e.currentTime=r,e.to<r&&e.to.addDays(i)>=r||l.to<r&&l.to.addDays(i)>=r)return!(l.currentTime=null);if(M.jqx.scheduler.utilities.getEndOfDay(e.to).addDays(i)<r||M.jqx.scheduler.utilities.getEndOfDay(l.to).addDays(i)<r)return l.currentTime=null,!1;var a,o=!0,o=l.getCanSetTime(e,r,o);if(e.canCreateNewOccurence(r,l.calendar)&&(!(a=!0)===t.showWeekends&&(6!=r.dayOfWeek()&&0!=r.dayOfWeek()||(a=!1)),a&&l.foundItems++),o)return l.currentTime=r,!(l.foundItems>e.count)}}return!1},l.getCanSetTime=function(e,t,i){return e.canCreateNewOccurence(t,l.calendar)||(i=!1),t<l.from&&t.add(l.recurrentAppointment.duration())<=l.from&&(i=!1),l.to<=t&&(i=!1),i},l.isException=function(e,t,i){for(var n=l.recurrentAppointment.exceptions,r=0;r<n.length;r++)if(i.isDateInExceptionAppointment(e,t,n[r])&&-1===i.newExceptions.indexOf(n[r]))return!0;return!1},arguments&&0<arguments.length&&(l.recurrentAppointment=arguments[0],arguments[1]&&(l.calendar=arguments[1]),arguments[2]&&(l.from=arguments[2]),arguments[3]&&(l.to=arguments[3]),arguments[4]&&(l.scheduler=arguments[4]),void 0===arguments[2]&&(l.from=new M.jqx.date(0),l.to=new M.jqx.date(9999,12,31)),l.scheduler&&l.scheduler.localization&&(l.calendar.firstDay=l.scheduler.localization.firstDay),l.fillList()),l},M.jqx.scheduler.recurrencePattern=function(){var b=this,e={from:new M.jqx.date(0),to:new M.jqx.date(9999,12,31),count:1e3,interval:1,exceptions:new Array,newExceptions:new Array,month:1,day:1,current:0,currentYearDay:0,step:0,days:[],bynweekday:[],isEveryWeekDay:!0,timeZone:null,weekDays:{Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},freq:"daily",bymonth:null,bymonthday:null,byyearday:null,byweekno:null,byweekday:null};return M.extend(!0,b,e),b.getNewOccurenceDate=function(){function e(e,t){var i=0,n=[];if(e instanceof Array)for(;i<t;i++)n[i]=[].concat(e);else for(;i<t;i++)n[i]=e;return n}function t(e,t){var i=e%t;return i*t<0?i+t:i}function n(e,t){1===arguments.length&&(t=e,e=0);for(var i=[],n=e;n<t;n++)i.push(n);return i}function i(e){b.yearlen=e%4!=0||e%100==0&&e%400!=0?365:366,b.nextyearlen=(1+e)%4!=0||(1+e)%100==0&&(1+e)%400!=0?365:366,new Date(e,0,1);var t=d[new Date(e,0,1).getDay()],i=function(){for(var e=[],t=0;t<55;t++)e=e.concat(n(7));return e}();365==b.yearlen?(b.wdaymask=i.slice(t),b.mrange=[].concat(o)):(b.wdaymask=i.slice(t),b.mrange=[].concat(a))}var r,a=[0,31,60,91,121,152,182,213,244,274,305,335,366],o=[0,31,59,90,120,151,181,212,243,273,304,334,365],l=b.from.year(),d=[6,0,1,2,3,4,5];switch(i(l),b.freq){case"daily":default:var s=b.from.add(new M.jqx.timeSpan(b.step*b.interval,0,0,0));return b.step++,s;case"weekly":return b.byweekday&&(s=new M.jqx.date(b.from,b.timeZone),r=d[b.from.dayOfWeek()],(s=(s=(s=s.addDays(7*b.step)).addDays(b.byweekday[b.current])).addDays(-r))<b.from&&(s=null),b.current++,null==b.byweekday[b.current]&&(b.current=0,b.step++)),s;case"monthly":if(0<b.bynweekday.length){(s=new M.jqx.date(b.from.year(),b.from.month(),1,b.from.hour(),b.from.minute(),b.from.second())).timeZone=b.timeZone,i((s=s.addMonths(b.step*b.interval)).year());var c=s.month(),u=(g=b.mrange.slice(c-1,c+1))[0],h=g[1];--h,b.nwdaymask=e(0,b.yearlen),b.step++;for(var p=0;p<b.bynweekday.length;p++){var y=b.bynweekday[p][0];(f=b.bynweekday[p][1])<0?(v=h+7*(f+1),v-=t(b.wdaymask[v]-y,7)):(v=u+7*(f-1),v+=t(7-b.wdaymask[v]+y,7)),u<=v&&v<=h&&(b.nwdaymask[v]=1)}var m=v+1-u;(s=new M.jqx.date(b.from.year(),b.from.month(),m,b.from.hour(),b.from.minute(),b.from.second())).timeZone=b.timeZone,s=s.addMonths((b.step-1)*b.interval)}else{0<b.bymonthday.length?((s=new M.jqx.date(b.from.year(),b.from.month(),b.bymonthday[b.current],b.from.hour(),b.from.minute(),b.from.second())).timeZone=b.timeZone,s=s.addMonths(b.step*b.interval),b.current++,b.bymonthday[b.current]||(b.current=0,b.step++)):((s=new M.jqx.date(b.from.year(),b.from.month(),b.day,b.from.hour(),b.from.minute(),b.from.second())).timeZone=b.timeZone,s=s.addMonths(b.step*b.interval),b.step++)}return s;case"yearly":if(b.bymonth&&0<b.bymonth.length)if(0<b.bynweekday.length){(s=new M.jqx.date(b.from.year(),b.bymonth[b.current],1,b.from.hour(),b.from.minute(),b.from.second())).timeZone=b.timeZone,i((s=s.addYears(b.step*b.interval)).year());var g,c=s.month(),u=(g=b.mrange.slice(c-1,c+1))[0],h=g[1];--h,b.nwdaymask=e(0,b.yearlen);for(p=0;p<b.bynweekday.length;p++){var f,y=b.bynweekday[p][0];(f=b.bynweekday[p][1])<0?(v=h+7*(f+1),v-=t(b.wdaymask[v]-y,7)):(v=u+7*(f-1),v+=t(7-b.wdaymask[v]+y,7)),u<=v&&v<=h&&(b.nwdaymask[v]=1)}m=v+1-u;(s=new M.jqx.date(s.year(),b.bymonth[b.current],m,b.from.hour(),b.from.minute(),b.from.second())).timeZone=b.timeZone,b.step++}else{b.byyearday&&0<b.byyearday.length?((s=new M.jqx.date(b.from.year(),b.bymonth[b.current],b.byyearday[b.currentYearDay],b.from.hour(),b.from.minute(),b.from.second())).timeZone=b.timeZone,s=s.addYears(b.step*b.interval),b.currentYearDay++,b.byyearday[b.currentYearDay]||(b.currentYearDay=0,b.current++,b.bymonth[b.current]||(b.current=0,b.step++))):((s=new M.jqx.date(b.from.year(),b.bymonth[b.current],b.from.day(),b.from.hour(),b.from.minute(),b.from.second())).timeZone=b.timeZone,s=s.addYears(b.step*b.interval),b.current++,b.bymonth[b.current]||(b.current=0,b.step++))}else if(b.byyearday&&0<b.byyearday.length)(s=new M.jqx.date(b.from.year(),b.from.month(),b.byyearday[b.current],b.from.hour(),b.from.minute(),b.from.second())).timeZone=b.timeZone,s=s.addYears(b.step*b.interval),b.current++,b.byyearday[b.current]||(b.current=0,b.step++);else if(null!=b.byweekno){var s=b.from.addYears(b.step*b.interval);if(s=function(e,t){var i=1,n=new M.jqx.date(t.year(),1,1,t.hour(),t.minute(),t.second());for(n.timeZone=b.timeZone;i!=e&&(n=n.addDays(7),!(53<++i)););for(;M.jqx.scheduler.utilities.getWeekday(n.toDate())!=b.wkst;)n=n.addDays(1);return n}(b.byweekno[b.current],s),b.byweekday){for(var D=s,v=0;v<7&&d[D.dayOfWeek()]!==b.byweekday[b.currentYearDay];v++)D=D.addDays(1);s=D,b.currentYearDay++,b.byweekday[b.currentYearDay]||(b.currentYearDay=0,b.current++,b.byweekno[b.current]||(b.current=0,b.step++))}else b.current++,b.byweekno[b.current]||(b.current=0,b.step++)}else{(s=new M.jqx.date(b.from.year(),b.month,b.day,b.from.hour(),b.from.minute(),b.from.second())).timeZone=b.timeZone,s=s.addYears(b.step*b.interval),b.step++}return s}},b.isDateInExceptionAppointment=function(e,t,i){switch(b.freq){case"daily":case"weekly":default:return e.year()==i.from.year()&&e.dayOfYear()==i.from.dayOfYear()}},b.createNewPattern=function(){var e;return b.ical?e=new M.jqx.scheduler.recurrencePattern(b.ical):((e=new M.jqx.scheduler.recurrencePattern).from=b.from,e.to=b.to,e.count=b.count,e.interval=b.interval,e.exceptions=b.exceptions,e.newExceptions=b.newExceptions,e.weekDays=b.weekDays,e.isEveryWeekDay=b.isEveryWeekDay,e.month=b.month,e.day=b.day,e.current=b.current,e.currentYearDay=b.currentYearDay,e.step=b.step,e.days=b.days,e.bynweekday=b.bynweekday,e.bymonth=b.bymonth,e.bymonthday=b.bymonthday,e.byyearday=b.byyearday,e.byweekno=b.byweekno,e.byweekday=b.byweekday,e.freq=e.freq,e.timeZone=e.timeZone,e)},b.equals=function(e){return b.from==e.from&&b.to==e.to&&b.count===e.count&&b.interval===e.interval&&b.day===e.day&&b.month===e.month},b.isDayOfWeekIncluded=function(e){var t=e.dayOfWeek();return M.jqx.scheduler.utilities.areWeekDaysIncluded(b.weekDays,t)},b.getWeekIndexFromDate=function(e,t){var i=t.firstDay,n=M.jqx.scheduler.utilities.getStartOfWeek(b.from,t,i),r=new M.jqx.timeSpan(e.subtract(n));return parseInt(r.days()/7)},b.canCreateNewOccurence=function(e,t){e.toDate();switch(b.freq){case"daily":default:return b.bymonth&&-1==b.bymonth.indexOf(e.month())?!1:!b.isEveryWeekDay||!!b.isDayOfWeekIncluded(e,t);case"weekly":var i=b.getWeekIndexFromDate(e,t);if(b.bymonth&&-1==b.bymonth.indexOf(e.month()))return!1;if(i%b.interval!=0)return!1;if(b.weekDays=={}){var n=e;if(b.from.dayOfWeek()!=n.dayOfWeek())return!1}else if(!b.isDayOfWeekIncluded(e,t))return!1;break;case"monthly":case"yearly":if(b.bymonth&&-1==b.bymonth.indexOf(e.month()))return!1;if(e<b.from)return!1}return!0},b.toString=function(){var t={};t.dtstart=this.from.toDate(),t.until=this.to?this.to.toDate():null,t.count=this.count;var e={YEARLY:0,MONTHLY:1,WEEKLY:2,DAILY:3,HOURLY:4,MINUTELY:5,SECONDLY:6};t.freq=e[this.freq.toUpperCase()],"YEARLY"==t.freq&&(t.bymonth=this.bymonth?this.bymonth:(new Array).push(this.month)),t.byweekday=new Array;return M.each(this.weekDays,function(){var e=this;--e<0&&(e=6),t.byweekday.push(e)}),null!=this.byyearday&&(t.byyearday=this.byyearday),null!=this.byweekno&&(t.byweekno=this.byweekno),t.bymonthday=this.bymonthday,t.wkst=["MO","TU","WE","TH","FR","SA","SU"][this.wkst],t.interval=this.interval,new M.jqx.ICalRule(t).toString()},b.init=function(e){var t=new M.jqx.ICalRule(b.ical,e),i=t.options;if(b.from=i.dtstart?new M.jqx.date(i.dtstart,b.timeZone):b.from,b.count=null!=i.count?i.count:b.count,b.freq=t.FREQUENCIES[i.freq].toLowerCase(),b.interval=null!=i.interval?i.interval:b.interval,b.to=i.until?new M.jqx.date(i.until,b.timeZone):b.to,b.wkst=i.wkst,b.bymonth=i.bymonth,b.bymonth&&0<b.bymonth.length?b.month=b.bymonth[0]:b.month=b.from.month(),b.day=b.from.day(),null!=i.byweekday){b.weekDays={};for(var n=0;n<i.byweekday.length;n++){switch(i.byweekday[n]){case 0:b.weekDays.Monday=1;break;case 1:b.weekDays.Tuesday=2;break;case 2:b.weekDays.Wednesday=3;break;case 3:b.weekDays.Thursday=4;break;case 4:b.weekDays.Friday=5;break;case 5:b.weekDays.Saturday=6;break;case 6:b.weekDays.Sunday=0}}b.byweekday=i.byweekday}return b.byweekno=i.byweekno,i.bynweekday&&(b.bynweekday=i.bynweekday),null!=i.bymonthday&&(b.bymonthday=i.bymonthday.sort(),b.bymonthday[0]&&(b.day=b.bymonthday[0])),null!=i.byyearday&&(b.day=i.byyearday[0],b.byyearday=i.byyearday.sort()),i},b.setFrom=function(e){b.from=e.clone(),b.ical&&b.init(e)},1==arguments.length&&(b.ical=arguments[0],b.init()),b},M.jqx.scheduler.calendar={"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",zone1:"yyyy-MM-ddTHH:mm:ss-HH:mm",zone2:"yyyy-MM-ddTHH:mm:ss+HH:mm",custom:"yyyy-MM-ddTHH:mm:ss.fff",custom2:"yyyy-MM-dd HH:mm:ss.fff"},percentsymbol:"%",currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:","},M.jqx.ICalRule=function(t,e){function i(e,t){1===arguments.length&&(t=e,e=0);for(var i=[],n=e;n<t;n++)i.push(n);return i}function n(e,t){var i=0,n=[];if(e instanceof Array)for(;i<t;i++)n[i]=[].concat(e);else for(;i<t;i++)n[i]=e;return n}function r(e){return!(e instanceof Array&&0==e.length)&&Boolean(e)}function h(e,t){return-1!=e.indexOf(t)}var p=this,a=([].concat(n(1,31),n(2,28),n(3,31),n(4,30),n(5,31),n(6,30),n(7,31),n(8,31),n(9,30),n(10,31),n(11,30),n(12,31),n(1,7)),[].concat(n(1,31),n(2,29),n(3,31),n(4,30),n(5,31),n(6,30),n(7,31),n(8,31),n(9,30),n(10,31),n(11,30),n(12,31),n(1,7)),i(1,29)),o=i(1,30),l=i(1,31),d=i(1,32),a=([].concat(d,o,d,l,d,l,d,d,l,d,l,d,d.slice(0,7)),[].concat(d,a,d,l,d,l,d,d,l,d,l,d,d.slice(0,7)),i(-28,0)),o=i(-29,0),l=i(-30,0),d=i(-31,0),y=([].concat(d,o,d,l,d,l,d,d,l,d,l,d,d.slice(0,7)),[].concat(d,a,d,l,d,l,d,d,l,d,l,d,d.slice(0,7)),function(){for(var e=[],t=0;t<55;t++)e=e.concat(i(7))}(),function(e,t){var i=this;if(0===t)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=t,this.nth=function(e){return i.n==e?i:new y(i.weekday,e)},this.equals=function(e){return i.weekday==e.weekday&&i.n==e.n},this.toString=function(){var e=["MO","TU","WE","TH","FR","SA","SU"][i.weekday];return this.n&&(e=(0<i.n?"+":"")+String(i.n)+e),e},this.getJsWeekday=function(){return 6==i.weekday?0:i.weekday+1}});this.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],this.YEARLY=0,this.MONTHLY=1,this.WEEKLY=2,this.DAILY=3,this.HOURLY=4,this.MINUTELY=5,this.SECONDLY=6,this.MO=new y(0),this.TU=new y(1),this.WE=new y(2),this.TH=new y(3),this.FR=new y(4),this.SA=new y(5),this.SU=new y(6);var m={freq:null,dtstart:null,interval:1,wkst:p.MO,count:null,until:null,bysetpos:null,bymonth:null,bymonthday:null,byyearday:null,byweekno:null,byweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null};this._string=null,this.toString=function(){for(var e,t,i,n=this.origOptions,r=[],a=Object.keys(n),o=Object.keys(m),l=0;l<a.length;l++)if(h(o,a[l])&&(e=a[l].toUpperCase(),i=[],!(null===(t=n[a[l]])||t instanceof Array&&!t.length))){switch(e){case"FREQ":t=p.FREQUENCIES[n.freq];break;case"WKST":t=(t=t||0).toString();break;case"BYWEEKDAY":e="BYDAY",t instanceof Array||(t=[t]);for(var d,s=0;s<t.length;s++)(d=t[s])instanceof y||(d=d instanceof Array?new y(d[0],d[1]):new y(d)),i[s]=d.toString();t=i;break;case"DTSTART":case"UNTIL":t=M.jqx.scheduler.utilities.timeToUntilString(t);break;default:if(t instanceof Array){for(s=0;s<t.length;s++)i[s]=String(t[s]);t=i}else t=String(t)}r.push([e,t])}for(var c=[],l=0;l<r.length;l++){var u=r[l];c.push(u[0]+"="+u[1].toString())}return c.join(";")},this.parseString=function(e){if(!(e=e.replace(/^\s+|\s+$/,"")).length)return null;for(var t,i,n,r,a=e.split(";"),o={},l=0;l<a.length;l++)if(i=(r=a[l].split("="))[0],n=r[1],""!=i)switch(i){case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":if(-1!=n.indexOf(","))for(n=n.split(","),t=0;t<n.length;t++)/^[+-]?\d+$/.test(n[t])&&(n[t]=Number(n[t]));else/^[+-]?\d+$/.test(n)&&(n=Number(n));o[i=i.toLowerCase()]=n;break;case"BYDAY":var d,s,c,u=n.split(",");for(o.byweekday=[],t=0;t<u.length;t++)2==(c=u[t]).length?(s=p[c],o.byweekday.push(s)):(c=c.match(/^([+-]?\d)([A-Z]{2})$/),d=Number(c[1]),s=c[2],s=p[s].weekday,o.byweekday.push(new y(s,d)));break;case"FREQ":o.freq=p[n];break;case"WKST":o.wkst=p[n];break;case"DTSTART":o.dtstart=M.jqx.scheduler.utilities.untilStringToDate(n);break;case"UNTIL":o.until=M.jqx.scheduler.utilities.untilStringToDate(n);break;case"BYEASTER":o.byeaster=Number(n);break;default:throw new Error("Unknown ICalRule property '"+i+"'")}return p.options=o},"string"===M.type(t)?this.options=this.parseString(t):this.options=t||{};var s,c,u,g,t=this.options;Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var i,n;if(null==this)throw new TypeError(" this is null or not defined");var r,a=Object(this),o=a.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(1<arguments.length&&(i=t),n=0;n<o;){n in a&&(r=a[n],e.call(i,r,n,a)),n++}}),Object.keys||(Object.keys=(s=Object.prototype.hasOwnProperty,c=!{toString:null}.propertyIsEnumerable("toString"),g=(u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(e){if("object"!=typeof e&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var t,i,n=[];for(t in e)s.call(e,t)&&n.push(t);if(c)for(i=0;i<g;i++)s.call(e,u[i])&&n.push(u[i]);return n})),this.origOptions={};var f=[],D=Object.keys(this.options),v=Object.keys(m);if(D.forEach(function(e){this.origOptions[e]=this.options[e],h(v,e)||f.push(e)},this),f.length)throw new Error("Invalid options: "+f.join(", "));if(!p.FREQUENCIES[this.options.freq]&&null===t.byeaster)throw new Error("Invalid Frequency: "+String(t.freq));v.forEach(function(e){h(D,e)||(t[e]=m[e])});var b=this.options;if(null!==b.byeaster&&(b.freq=this.YEARLY),b.dtstart||(b.dtstart=new Date,b.dtstart.setMilliseconds(0)),e&&(b.dtstart=e.toDate()),null===b.wkst?b.wkst=this.MO.weekday:"number"==typeof b.wkst||(null==b.wkst?b.wkst=this.MO.weekday:b.wkst=b.wkst.weekday),null!==b.bysetpos){"number"==typeof b.bysetpos&&(b.bysetpos=[b.bysetpos]);for(var w=0;w<b.bysetpos.length;w++){if(0==(x=b.bysetpos[w])||!(-366<=x&&x<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(r(b.byweekno)||r(b.byyearday)||r(b.bymonthday)||null!==b.byweekday||null!==b.byeaster))switch(b.freq){case this.YEARLY:b.bymonth||(b.bymonth=b.dtstart.getMonth()+1),b.bymonthday=b.dtstart.getDate();break;case this.MONTHLY:b.bymonthday=b.dtstart.getDate();break;case this.WEEKLY:b.byweekday=M.jqx.scheduler.utilities.getWeekday(b.dtstart)}if(null===b.bymonth||b.bymonth instanceof Array||(b.bymonth=[b.bymonth]),null===b.byyearday||b.byyearday instanceof Array||(b.byyearday=[b.byyearday]),null===b.bymonthday)b.bymonthday=[],b.bynmonthday=[];else if(b.bymonthday instanceof Array){for(var x,q=[],j=[],w=0;w<b.bymonthday.length;w++){0<(x=b.bymonthday[w])?q.push(x):x<0&&j.push(x)}b.bymonthday=q,b.bynmonthday=j}else b.bymonthday<0?(b.bynmonthday=[b.bymonthday],b.bymonthday=[]):(b.bynmonthday=[],b.bymonthday=[b.bymonthday]);if(null===b.byweekno||b.byweekno instanceof Array||(b.byweekno=[b.byweekno]),null===b.byweekday)b.bynweekday=null;else if("number"==typeof b.byweekday)b.byweekday=[b.byweekday],b.bynweekday=null;else if(b.byweekday instanceof y)!b.byweekday.n||b.freq>this.MONTHLY?(b.byweekday=[b.byweekday.weekday],b.bynweekday=null):(b.bynweekday=[[b.byweekday.weekday,b.byweekday.n]],b.byweekday=null);else{var k=[],F=[];for(w=0;w<b.byweekday.length;w++){var A=b.byweekday[w];"number"==typeof A?k.push(A):!A.n||b.freq>this.MONTHLY?k.push(A.weekday):F.push([A.weekday,A.n])}b.byweekday=r(k)?k:null,b.bynweekday=r(F)?F:null}if(null===b.byhour?b.byhour=b.freq<this.HOURLY?[b.dtstart.getHours()]:null:"number"==typeof b.byhour&&(b.byhour=[b.byhour]),null===b.byminute?b.byminute=b.freq<this.MINUTELY?[b.dtstart.getMinutes()]:null:"number"==typeof b.byminute&&(b.byminute=[b.byminute]),null===b.bysecond?b.bysecond=b.freq<this.SECONDLY?[b.dtstart.getSeconds()]:null:"number"==typeof b.bysecond&&(b.bysecond=[b.bysecond]),b.freq>=this.HOURLY)this.timeset=null;else{if(this.timeset=[],b.byhour)for(w=0;w<b.byhour.length;w++)for(var T=b.byhour[w],S=0;S<b.byminute.length;S++)for(var _=b.byminute[S],L=0;L<b.bysecond.length;L++){var E=b.bysecond[L];this.timeset.push(new M.jqx.scheduler.utilities.Time(T,_,E))}M.jqx.scheduler.utilities.sort(this.timeset)}return this}}(jqxBaseFramework),function(pe){pe.extend(pe.jqx._jqxScheduler.prototype,{_getexportcolor:function(e){var t,i="transparent"==e?"#FFFFFF":e;if(i&&i.toString()||(i="#FFFFFF"),-1==i.toString().indexOf("rgb"))return-1!=i.toString().indexOf("#")&&4==i.toString().length&&(t=i.toString().substring(1,4),i+=t),i;var n=i.split(",");if(-1!=i.toString().indexOf("rgba")){var r=parseInt(n[0].substring(5)),a=parseInt(n[1]),o=parseInt(n[2]),l=parseFloat(n[3].substring(1,4)),d={r:r,g:a,b:o},s=this._rgbToHex(d);return 0==r&&0==a&&0==o&&0==l?"#ffffff":"#"+s}d={r:r=parseInt(n[0].substring(4)),g:a=parseInt(n[1]),b:o=parseInt(n[2].substring(1,4))};return"#"+(s=this._rgbToHex(d))},_rgbToHex:function(e){return this._intToHex(e.r)+this._intToHex(e.g)+this._intToHex(e.b)},_intToHex:function(e){var t=parseInt(e).toString(16);return 1==t.length&&(t="0"+t),t.toUpperCase()},exportData:function(c){if(!pe.jqx.dataAdapter.ArrayExporter)throw"jqxScheduler: Missing reference to jqxdata.export.js!";var e=this.exportSettings.serverURL,t=this.exportSettings.characterSet,i=this.exportSettings.fileName,n=this.exportSettings.ICSXWRCALNAME,r=this.exportSettings.ICSXWRCALDESC;void 0===i&&(i="jqxScheduler");var u=this;if("ical"!=c&&"ics"!=c){var a=this.getDataAppointments(),o=new Array,h={},p={},l=this.host.find(".jqx-grid-cell:first");l.removeClass(this.toThemeProperty("jqx-grid-cell-selected")),l.removeClass(this.toThemeProperty("jqx-fill-state-pressed")),l.removeClass(this.toThemeProperty("jqx-grid-cell-hover")),l.removeClass(this.toThemeProperty("jqx-fill-state-hover"));var d="cell",y=1,m="column",g=1,f=pe(this.columns.records[0].element),D=0;pe.each(this.appointmentDataFields,function(e,s){var t;h[s]={},h[s].text=s,h[s].width=100,h[s].formatString="",h[s].localization=u.schedulerLocalization,"from"==e||"to"==e?(h[s].type="date",h[s].formatString=u.exportSettings.dateTimeFormatString):h[s].type="string",h[s].cellsAlign="left",o.push(h[s]),d="cell"+y,m="column"+g,"html"!=c&&"xls"!=c&&"pdf"!=c||((t=function(e,t,i,n,r,a,o,l,d){p[e]={},null!=t&&(p[e]["font-size"]=t.css("font-size"),p[e]["font-weight"]=t.css("font-weight"),p[e]["font-style"]=t.css("font-style"),p[e]["background-color"]=u._getexportcolor(t.css("background-color")),p[e].color=u._getexportcolor(t.css("color")),p[e]["border-color"]=u._getexportcolor(t.css("border-top-color")),i?p[e]["text-align"]="left":(p[e]["text-align"]="left",p[e].formatString="",p[e].dataType="string","from"!=o&&"to"!=o||(p[e].dataType="date",p[e].formatString=u.exportSettings.dateTimeFormatString)),"html"!=c&&"pdf"!=c||(p[e]["border-top-width"]=t.css("border-top-width"),p[e]["border-left-width"]=t.css("border-left-width"),p[e]["border-right-width"]=t.css("border-right-width"),p[e]["border-bottom-width"]=t.css("border-bottom-width"),p[e]["border-top-style"]=t.css("border-top-style"),p[e]["border-left-style"]=t.css("border-left-style"),p[e]["border-right-style"]=t.css("border-right-style"),p[e]["border-bottom-style"]=t.css("border-bottom-style"),i?(0==D&&(p[e]["border-left-width"]=t.css("border-right-width")),p[e]["border-top-width"]=t.css("border-right-width"),p[e]["border-bottom-width"]=t.css("border-bottom-width")):(0==D&&(p[e]["border-left-width"]="1px"),p[e]["border-right-width"]="1px")),i&&(h[s].style=e),h[s].cellStyle=e)})(m,f,!0,0,0,0,e),g++,t(d,l,!1,0,0,0,e),y++),D++});var s=pe.jqx.dataAdapter.ArrayExporter(a,h,p,e);if(null==i){this._renderrows();var v=s.exportTo(c);return setTimeout(function(){u.exporting=!1},50),v}s.exportToFile(c,i,e,t),this._renderrows(),setTimeout(function(){u.exporting=!1},50)}else if(1<u._resources.length&&i&&u.resourcesInMultipleICSFiles)for(var a=this.getAppointments(),b=0;b<u._resources.length;b++){for(var w=u._resources[b],x=new Array,q=0;q<a.length;q++){var j=a[q];j.resourceId==w&&x.push(j)}var k="BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:jqxScheduler\nMETHOD:PUBLISH\n";n&&(k+="X-WR-CALNAME:"+n+"\n"),r&&(k+="X-WR-CALDESC:"+r+"\n");for(var F=0;F<x.length;F++)k+=x[F].jqxAppointment.toString(),F<x.length-1&&(k+="\n");for(var A=(k+="\nEND:VCALENDAR").length,T=new Uint8Array(new ArrayBuffer(A)),F=0;F<A;F++)T[F]=k.charCodeAt(F);var S=new Blob([T],{type:"application/calendar"});window.jqxSaveAs&&window.jqxSaveAs(S,i+"_"+w+".ics")}else{for(a=this.getAppointments(),k="BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:jqxScheduler\nMETHOD:PUBLISH\n",b=0;b<a.length;b++)k+=a[b].jqxAppointment.toString(),b<a.length-1&&(k+="\n");A=(k+="\nEND:VCALENDAR").length,T=new Uint8Array(new ArrayBuffer(A));for(b=0;b<A;b++)T[b]=k.charCodeAt(b);S=new Blob([T],{type:"application/calendar"});if(!i)return k;window.jqxSaveAs&&window.jqxSaveAs(S,i+".ics")}},shadeColor:function(e,t){var i=parseInt(e.slice(1),16),n=t<0?0:255,r=t<0?-1*t:t,a=i>>16,o=i>>8&255,l=255&i;return"#"+(16777216+65536*(Math.round((n-a)*r)+a)+256*(Math.round((n-o)*r)+o)+(Math.round((n-l)*r)+l)).toString(16).slice(1)},hexToRgba:function(e,t){function i(){var e=pe.jqx.browser.msie&&pe.jqx.browser.version<10;return null==this.alpha||e?"rgb("+this.r+", "+this.g+", "+this.b+")":(1<this.alpha?this.alpha=1:this.alpha<0&&(this.alpha=0),"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")")}var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return null==t?n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16),toString:i}:null:(1<t?t=1:t<0&&(t=0),n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16),alpha:t,toString:i}:null)},getAppointmentColors:function(e){var t,i=e;return{background:this.hexToRgba(e,this.appointmentOpacity).toString(),color:255-(.299*(t=this.hexToRgba(e,.7)).r+.587*t.g+.114*t.b)<105?"Black":"White",border:i}},getColors:function(e){-1==e&&(e=0);for(var t,i,n=(n=this.resources?this.resources.colorScheme:null)||"scheme01",r=new Array,a=0;a<this.colorSchemes.length;a++)if(this.colorSchemes[a].name==n){r=this.colorSchemes[a].colors;break}for(;e>r.length-1;){var o=parseInt(n.substring(6));27<=o&&(o=0),r=r.concat(this.colorSchemes[o].colors),o++}r[e],t=this.hexToRgba(r[e],this.appointmentOpacity).toString(),i=r[e];var l;return{background:t,color:255-(.299*(l=this.hexToRgba(r[e],.7)).r+.587*l.g+.114*l.b)<105?"Black":"White",border:i}},getAppointments:function(){for(var e=this.uiappointments,t=new Array,i=0;i<e.length;i++){var n=e[i].boundAppointment;n.toString=n.jqxAppointment.toString,t.push(n)}return t},getDataAppointments:function(){for(var e=this.uiappointments,t=new Array,i=0;i<e.length;i++){var n=e[i].boundAppointment,r={};pe.each(this.appointmentDataFields,function(e,t){if(r[t]=n[e],"from"!=e&&"to"!=e||"date"!=pe.type(n[e])&&(r[t]=n[e].toDate()),"recurrencePattern"==e&&n[e]&&(r[t]=n[e].toString()),"recurrenceException"==e&&n[e]){r[t]="";for(var i=0;i<n[e].length;i++)r[t]+=n[e][i].toString(),i<n[e].length-1&&(r[t]+=",")}try{JSON&&(r.toString=function(){return JSON.stringify(r)})}catch(e){}}),t.push(r)}return t},_refreshColumns:function(){this._initializeColumns(),this.columnsheader=this.columnsheader||pe('<div style="overflow: hidden;"></div>'),this.columnsheader.children().remove();var e=this.columnsHeight,e=this._preparecolumnGroups();this.columnsheader.height(e),this._rendercolumnheaders()},_refreshColumnTitles:function(){var e=this._views[this._view].type,p=this._views[this._view],y=this,m=new Array;if(y.columns.records[0].timeColumn&&m.push({}),p.timeRuler&&p.timeRuler.timeZones)for(var t=0;t<p.timeRuler.timeZones.length;t++)m.push({});function i(e,t,i){var n="halfHour";p.timeRuler&&p.timeRuler.scale&&(n=p.timeRuler.scale);var r=24,a=0,o=23;if(p.timeRuler&&(null!=p.timeRuler.scaleStartHour&&(a=parseInt(p.timeRuler.scaleStartHour)),null!=p.timeRuler.scaleEndHour&&(o=parseInt(p.timeRuler.scaleEndHour)),a<0&&(a=0),o<0&&(o=23),23<a&&(a=0),23<o&&(o=23),r=o-a+1),n)switch(n){case"sixtyMinutes":case"hour":0;break;case"thirdyMinutes":case"halfHour":0;break;case"fifteenMinutes":case"quarterHour":0;break;case"tenMinutes":0;break;case"fiveMinutes":0}new Array;var l="auto";p.timeRuler&&p.timeRuler.formatString&&(l=p.timeRuler.formatString);var d=r,s=e.addHours(a);y.rtl&&(s=e.addHours(o));for(var c=0;c<d;c++){var u,h=s.toDate();u="auto"===l?0==h.getHours()&&0==h.getMinutes()||12==h.getHours()&&0==h.getMinutes()?"hh tt":"hh:mm":pe.isFunction(l)?l(h):l,pe.jqx.dataFormat.isDate(h)&&(h=pe.jqx.dataFormat.formatdate(h,u,y.schedulerLocalization)),s=y.rtl?s.addMinutes(-60):s.addMinutes(60),m.push({}),y.columns.records[m.length-1].text=h}}this.tableColumns;for(var n=0;n<this.tableColumns;n++)switch(e){case"dayView":var r=this.getViewStart();!1===p.showWeekends&&(0!==r.dayOfWeek()&&6!==r.dayOfWeek()||(r=r.addDays(1)),0!==r.dayOfWeek()&&6!==r.dayOfWeek()||(r=r.addDays(1))),m.push({}),this.columns.records[m.length-1].text=this._getDayName(r.dayOfWeek());break;case"weekView":case"monthView":for(t=0;t<7;t++){var a=this.schedulerLocalization.firstDay+t;(!1!==p.showWeekends||0!==t&&6!==t)&&(m.push({}),y.rtl&&(a=6-a),this.columns.records[m.length-1].text=this._getDayName(a))}break;case"timelineDayView":y._resources[n]&&y._resources[n];i(y.getViewStart());break;case"timelineWeekView":for(t=0;t<7;t++){a=this.schedulerLocalization.firstDay+t;(!1!==p.showWeekends||0!==t&&6!==t)&&(y.rtl&&(a=6-a),i(y.getViewStart().addDays(t),this._getDayName(a)))}break;case"timelineMonthView":var o=y.getViewStart(),l="auto";p.timeRuler&&p.timeRuler.formatString&&(l=p.timeRuler.formatString);for(t=0;t<41;t++){var d,s,a=o.dayOfWeek();(!1!==p.showWeekends||0!==a&&6!==a)&&(y.rtl&&(a=6-a),d=o.toDate(),"auto"===l?(s="dd",1===(d=o.toDate()).getDate()&&(s="MMM dd")):s=pe.isFunction(l)?l(d):l,pe.jqx.dataFormat.isDate(d)&&(d=pe.jqx.dataFormat.formatdate(d,s,y.schedulerLocalization)),o=o.addDays(1),m.push({}),y.columns.records[m.length-1].text=d)}}for(var c,u,h=y.columnsHeight,t=0;t<this.columns.records.length;t++){var g,f=this.columns.records[t];f.timeColumn||(y.columnGroups&&y.columnGroups.length&&(f.datafield,c=f,u=void 0,u=y.columnGroupslevel*y.columnsHeight,h=u-=c.level*y.columnsHeight),null==(g=null!=f.renderer?f.renderer(f.text,f.align,h):y._rendercolumnheader(f.text,f.align,h,f))&&(g=y._rendercolumnheader(f.text,f.align,h,y)),null!=f.renderer&&(g=pe(g)),pe(f.element).html(g))}},_editDialogLabel:function(){return this.theme?"jqx-scheduler-edit-dialog-label jqx-scheduler-edit-dialog-label-"+this.theme:"jqx-scheduler-edit-dialog-label"},_editDialogField:function(){return this.theme?"jqx-scheduler-edit-dialog-field jqx-scheduler-edit-dialog-field-"+this.theme:"jqx-scheduler-edit-dialog-field"},initRepeatPanels:function(i,n,y){var $=this,e=pe("<div></div>");n.append(e);var t=pe("<div class='"+$._editDialogLabel()+"'>"+$.schedulerLocalization.editDialogRepeatString+"</div>").appendTo(e),r=pe("<div class='"+$._editDialogField()+"'></div>").appendTo(e),a=pe("<div></div>").appendTo(r),o=pe("<div></div>");n.append(o);var l=pe("<div></div>");o.append(l);l.detach(),$.editDialogFields.repeatEndPanel={},function(e,t){var i=pe("<div></div>").appendTo(e),n=pe("<div class='"+$._editDialogLabel()+"'>"+$.schedulerLocalization.editDialogRepeatEndString+"</div>").appendTo(i),r=pe("<div class='"+$._editDialogField()+"'></div>").appendTo(i),a=pe("<div style='top: 3px; position:relative; float:left;'><span style='margin-left:2px;'>"+$.schedulerLocalization.editDialogRepeatNeverString+"</span></div>").appendTo(r);a.jqxRadioButton({rtl:$.rtl,groupName:"end"+t,theme:$.theme,width:200,checked:!0}),$.editDialogFields[t].repeatEndNever=a,$.editDialogFields[t].repeatEndNeverLabel=n;var o=pe("<div class='"+$._editDialogLabel()+"'></div>").appendTo(i),l=pe("<div class='"+$._editDialogField()+"'></div>").appendTo(i),d=pe("<div style='top: 3px;  position:relative;  float:left;'><span style='margin-left:2px;'>"+$.schedulerLocalization.editDialogRepeatAfterString+"</span></div>").appendTo(l);d.jqxRadioButton({rtl:$.rtl,groupName:"end"+t,theme:$.theme,width:60,checked:!1});var s=pe("<div style='margin-left: 3px; float:left;'></div>").appendTo(l);s.jqxNumberInput({rtl:$.rtl,decimal:10,min:1,inputMode:"simple",width:50,spinButtons:!0,decimalDigits:0,theme:$.theme});pe("<div style='float: left; top: 3px;  margin-left: 5px; line-height:25px;'>"+$.schedulerLocalization.editDialogRepeatOccurrencesString+"</div>").appendTo(l);$.editDialogFields[t].repeatEndAfter=d,$.editDialogFields[t].repeatEndAfterValue=s,$.editDialogFields[t].repeatEndAfterLabel=o;var c=pe("<div class='"+$._editDialogLabel()+"'></div>").appendTo(i),u=pe("<div class='"+$._editDialogField()+"'></div>").appendTo(i),h=pe("<div style='top: 3px; position:relative; float:left;'><span style='margin-left:2px;'>"+$.schedulerLocalization.editDialogRepeatOnString+"</span></div>").appendTo(u);h.jqxRadioButton({rtl:$.rtl,groupName:"end"+t,theme:$.theme,width:60,checked:!1});var p=pe("<div style='margin-left: 3px; float:left;'></div>").appendTo(u);p.jqxDateTimeInput({dropDownWidth:220,dropDownHeight:220,rtl:$.rtl,localization:$._getDateTimeInputLocalization(),firstDayOfWeek:$.schedulerLocalization.firstDay,todayString:$.schedulerLocalization.todayString,clearString:$.schedulerLocalization.clearString,value:y,formatString:$.editDialogDateFormatString,width:150,theme:$.theme});p.jqxDateTimeInput("getInstance");$.editDialogFields[t].repeatEndOn=h,$.editDialogFields[t].repeatEndOnValue=p,$.editDialogFields[t].repeatEndOnLabel=c}($.editDialogFields.repeatEndPanelContainer=l,"repeatEndPanel");function d(){var e=pe("<div style='visibility: hidden;'></div>").appendTo(pe(document.body)),t=pe("<div class='"+$._editDialogLabel()+"'>"+$.schedulerLocalization.editDialogRepeatEveryString+"</div>").appendTo(e),i=pe("<div class='"+$._editDialogField()+"'></div>").appendTo(e),n=pe("<div style='float:left;'></div>").appendTo(i);n.jqxNumberInput({rtl:$.rtl,decimal:1,min:1,inputMode:"simple",width:50,spinButtons:!0,decimalDigits:0,theme:$.theme}),pe("<div style='float: left; margin-left: 5px; line-height:25px;'>"+$.schedulerLocalization.editDialogRepeatEveryDayString+"</div>").appendTo(i),$.editDialogFields.daily={},$.editDialogFields.daily.repeatDayInterval=n,$.editDialogFields.daily.repeatDayLabel=t,($.editDialogFields.daily.panel=e).detach(),$.editDialogFields.weekly={};var r=pe("<div style='visibility: hidden;'></div>").appendTo(pe(document.body)),a=pe("<div class='"+$._editDialogLabel()+"'>"+$.schedulerLocalization.editDialogRepeatEveryString+"</div>").appendTo(r),o=pe("<div class='"+$._editDialogField()+"'></div>").appendTo(r),l=pe("<div style='float:left;'></div>").appendTo(o);l.jqxNumberInput({rtl:$.rtl,decimal:1,min:1,inputMode:"simple",width:50,spinButtons:!0,decimalDigits:0,theme:$.theme}),pe("<div style='float: left; margin-left: 5px; line-height:25px;'>"+$.schedulerLocalization.editDialogRepeatEveryWeekString+"</div>").appendTo(o),$.editDialogFields.weekly.repeatWeekInterval=l,$.editDialogFields.weekly.repeatWeekIntervalLabel=a;var d=pe("<div class='"+$._editDialogLabel()+"'>"+$.schedulerLocalization.editDialogRepeatOnString+"</div>").appendTo(r),s=pe("<div class='"+$._editDialogField()+"'></div>").appendTo(r),c=pe("<div style='float:left;'></div>").appendTo(s);$.editDialogFields.weekly.repeatDaysLabel=d,$.editDialogFields.weekly.repeatDays=new Array;for(var u=0;u<7;u++){var h=$._getDayName(u,"firstTwoLetters"),p=pe("<div style='position:relative; top: 6px; float:left;'><span style='margin-left:2px;'>"+h+"</span></div>");c.append(p);var y=1==u;p.jqxCheckBox({rtl:$.rtl,checked:y,width:50,theme:$.theme}),$.editDialogFields.weekly.repeatDays.push(p)}($.editDialogFields.weekly.panel=r).detach(),$.editDialogFields.monthly={};var m=pe("<div style='visibility: hidden;'></div>").appendTo(pe(document.body)),g=pe("<div class='"+$._editDialogLabel()+"'>"+$.schedulerLocalization.editDialogRepeatEveryString+"</div>").appendTo(m),f=pe("<div class='"+$._editDialogField()+"'></div>").appendTo(m),D=pe("<div style='float:left;'></div>").appendTo(f);D.jqxNumberInput({rtl:$.rtl,decimal:1,min:1,inputMode:"simple",width:50,spinButtons:!0,decimalDigits:0,theme:$.theme}),pe("<div style='float: left; margin-left: 5px; line-height:25px;'>"+$.schedulerLocalization.editDialogRepeatEveryMonthString+"</div>").appendTo(f),$.editDialogFields.monthly.repeatMonth=D,$.editDialogFields.monthly.repeatMonthLabel=g;var v=pe("<div class='"+$._editDialogLabel()+"'>"+$.schedulerLocalization.editDialogRepeatOnString+"</div>").appendTo(m),b=pe("<div class='"+$._editDialogField()+"'></div>").appendTo(m),w=pe("<div style='float:left;'></div>").appendTo(b),x=pe("<div style='position:relative; top: 6px; float:left;'><span style='margin-left:2px;'>"+$.schedulerLocalization.editDialogRepeatEveryMonthDayString+"</span></div>").appendTo(w);x.jqxRadioButton({rtl:$.rtl,groupName:"month",width:60,checked:!0,theme:$.theme});var q=pe("<div style='float:left;'></div>").appendTo(w);q.jqxNumberInput({rtl:$.rtl,decimal:1,min:1,inputMode:"simple",width:50,spinButtons:!0,decimalDigits:0,theme:$.theme}),$.editDialogFields.monthly.repeatMonthDay=q,$.editDialogFields.monthly.repeatMonthDayBool=x,$.editDialogFields.monthly.repeatMonthDayLabel=v;var j=pe("<div class='"+$._editDialogLabel()+"'></div>").appendTo(m),k=pe("<div class='"+$._editDialogField()+"'></div>").appendTo(m),F=pe("<div style='float:left;'></div>").appendTo(k),A=pe("<div style='position:relative; top: 6px; float:left;'><span style='margin-left:2px;'></span></div>").appendTo(F);A.jqxRadioButton({groupName:"month",width:25,checked:!1,theme:$.theme});var T=pe("<div style='float:left;'></div>").appendTo(F),S=new Array;S.push($.schedulerLocalization.editDialogRepeatFirstString),S.push($.schedulerLocalization.editDialogRepeatSecondString),S.push($.schedulerLocalization.editDialogRepeatThirdString),S.push($.schedulerLocalization.editDialogRepeatFourthString),S.push($.schedulerLocalization.editDialogRepeatLastString),T.jqxDropDownList({height:27,dropDownWidth:150,selectedIndex:0,source:S,autoDropDownHeight:!0,width:"auto",theme:$.theme});for(var _=pe("<div style='margin-left: 5px; float:left;'></div>").appendTo(F),L=new Array,u=0;u<7;u++){h=$._getDayName(u);L.push(h)}_.jqxDropDownList({height:27,rtl:$.rtl,dropDownWidth:150,autoDropDownHeight:!0,selectedIndex:1,source:L,width:"auto",theme:$.theme}),$.editDialogFields.monthly.repeatDayOfWeekBool=A,$.editDialogFields.monthly.repeatDayOfWeek=_,$.editDialogFields.monthly.repeatDayOfWeekLabel=j,$.editDialogFields.monthly.repeatDayOfWeekType=T,($.editDialogFields.monthly.panel=m).detach(),$.editDialogFields.yearly={};var E=pe("<div style='visibility: hidden;'></div>").appendTo(pe(document.body)),M=pe("<div class='"+$._editDialogLabel()+"'>"+$.schedulerLocalization.editDialogRepeatEveryString+"</div>").appendTo(E),O=pe("<div class='"+$._editDialogField()+"'></div>").appendTo(E),C=pe("<div style='float:left;'></div>").appendTo(O);C.jqxNumberInput({decimal:1,min:1,inputMode:"simple",width:50,spinButtons:!0,decimalDigits:0,theme:$.theme}),pe("<div style='float: left; margin-left: 5px; line-height:25px;'>"+$.schedulerLocalization.editDialogRepeatEveryYearString+"</div>").appendTo(O),$.editDialogFields.yearly.repeatYear=C,$.editDialogFields.yearly.repeatYearLabel=M;var I=pe("<div class='"+$._editDialogLabel()+"'>"+$.schedulerLocalization.editDialogRepeatOnString+"</div>").appendTo(E),R=pe("<div class='"+$._editDialogField()+"'></div>").appendTo(E),B=pe("<div style='float:left;'></div>").appendTo(R),W=pe("<div style='position:relative; top: 6px; float:left;'></span></div>").appendTo(B);W.jqxRadioButton({rtl:$.rtl,groupName:"year",width:25,checked:!0,theme:$.theme}),$.editDialogFields.yearly.repeatYearBool=W,$.editDialogFields.yearly.repeatYearBoolLabel=I;for(var H=pe("<div style='float:left;'></div>").appendTo(B),z=new Array,u=0;u<12;u++){var N=$.schedulerLocalization.months.names[u];z.push(N)}H.jqxDropDownList({height:27,selectedIndex:0,dropDownWidth:150,width:"auto",source:z,theme:$.theme}),$.editDialogFields.yearly.repeatYearMonth=H;var P=pe("<div style='margin-left: 5px; float:left;'></div>").appendTo(B);P.jqxNumberInput({height:25,decimal:1,min:1,inputMode:"simple",width:50,spinButtons:!0,decimalDigits:0,theme:$.theme}),$.editDialogFields.yearly.repeatYearDay=P;var Y=pe("<div class='"+$._editDialogLabel()+"'></div>").appendTo(E),Z=pe("<div class='"+$._editDialogField()+"'></div>").appendTo(E),U=pe("<div style='float:left;'></div>").appendTo(Z),V=pe("<div style='position:relative; top: 6px; float:left;'><span style='margin-left:2px;'></span></div>").appendTo(U);V.jqxRadioButton({rtl:$.rtl,groupName:"year",width:25,checked:!1,theme:$.theme});var J=pe("<div style='float:left;'></div>").appendTo(U);$.editDialogFields.yearly.repeatDayOfWeekBool=V,$.editDialogFields.yearly.repeatDayOfWeekType=J,$.editDialogFields.yearly.repeatDayOfWeekLabel=Y;var Q=new Array;Q.push($.schedulerLocalization.editDialogRepeatFirstString),Q.push($.schedulerLocalization.editDialogRepeatSecondString),Q.push($.schedulerLocalization.editDialogRepeatThirdString),Q.push($.schedulerLocalization.editDialogRepeatFourthString),Q.push($.schedulerLocalization.editDialogRepeatLastString),J.jqxDropDownList({height:27,dropDownWidth:150,selectedIndex:0,source:Q,autoDropDownHeight:!0,width:"auto",theme:$.theme});var X=pe("<div style='margin-left: 5px; float:left;'></div>").appendTo(U);$.editDialogFields.yearly.repeatDayOfWeek=X;for(var K=new Array,u=0;u<7;u++){h=$._getDayName(u);K.push(h)}X.jqxDropDownList({height:27,rtl:$.rtl,dropDownWidth:150,selectedIndex:1,autoDropDownHeight:!0,source:K,width:"auto",theme:$.theme});for(var z=new Array,G=(pe("<div style='line-height:25px; height: 25px; margin-left: 5px; float:left;'>"+$.schedulerLocalization.editDialogRepeatOfString+"</div>").appendTo(U),pe("<div style='margin-left: 5px; float:left;'></div>").appendTo(U)),u=0;u<12;u++){N=$.schedulerLocalization.months.names[u];z.push(N)}($.editDialogFields.yearly.repeatDayOfWeekMonth=G).jqxDropDownList({height:27,rtl:$.rtl,dropDownWidth:150,selectedIndex:0,source:z,width:"auto",theme:$.theme}),($.editDialogFields.yearly.panel=E).detach()}$.editAppointment&&$.editAppointment.rootAppointment,d();var s=pe("<div></div>");n.append(s);var c=pe("<div class='"+$._editDialogLabel()+"'>"+$.schedulerLocalization.editDialogExceptionsString+"</div>").appendTo(s),u=pe("<div class='"+$._editDialogField()+"'></div>").appendTo(s),h=pe("<div style='position:relative; top:2px;'>"+$.schedulerLocalization.editDialogResetExceptionsString+"</div>").appendTo(u);h.jqxCheckBox({width:"100%",theme:$.theme}),s.hide(),$.editDialogFields.resetExceptions=h,$.editDialogFields.resetExceptionsLabel=c,$.editDialogFields.resetExceptionsContainer=s;var p=new Array;p.push($.schedulerLocalization.editDialogRepeatNeverString),p.push($.schedulerLocalization.editDialogRepeatDailyString),p.push($.schedulerLocalization.editDialogRepeatWeeklyString),p.push($.schedulerLocalization.editDialogRepeatMonthlyString),p.push($.schedulerLocalization.editDialogRepeatYearlyString),a.jqxDropDownList({rtl:$.rtl,height:27,width:"100%",autoDropDownHeight:!0,theme:$.theme,source:p,selectedIndex:0}),$.editDialogFields.repeat=a,$.editDialogFields.repeatLabel=t,$.editDialogFields.repeatContainer=e,$.editDialogFields.repeatPanel=o,this.addHandler(a,"change",function(e){var t=e.args.item.index;!function(){switch(o.children().detach(),t){case 0:break;case 1:$.editDialogFields.daily.panel.css("visibility","visible"),o.append($.editDialogFields.daily.panel);break;case 2:$.editDialogFields.weekly.panel.css("visibility","visible"),o.append($.editDialogFields.weekly.panel);break;case 3:$.editDialogFields.monthly.panel.css("visibility","visible"),o.append($.editDialogFields.monthly.panel);break;case 4:$.editDialogFields.yearly.panel.css("visibility","visible"),o.append($.editDialogFields.yearly.panel)}o.append(l),0==t?$.editDialogFields.repeatEndPanelContainer.hide():$.editDialogFields.repeatEndPanelContainer.show(),$.isTouchDevice()||(i.jqxWindow({height:150}),i.jqxWindow({height:n[0].scrollHeight+40}))}()})},_initMenu:function(){var n=this;if(this.host.jqxMenu){if(this.menu){if(this._hasOpenedMenu)return;this.removeHandler(this.menu,"keydown"),this.removeHandler(this.menu,"closed"),this.removeHandler(this.menu,"itemclick"),this.menu.jqxMenu("destroy"),this.menu.removeData(),this.menu.remove()}this.menuitemsarray=new Array,this.menu=pe('<div id="menu.jqxscheduler'+this.element.id+'" style="white-space: nowrap; z-index: 9999999999999;"></div>'),this.host.append(this.menu),this.addHandler(pe(window),"orientationchange.jqxscheduler"+this.element.id,function(){n.menu.jqxMenu("close"),n._hasOpenedMenu=!1}),this.addHandler(pe(window),"orientationchanged.jqxscheduler"+this.element.id,function(){n.menu.jqxMenu("close"),n._hasOpenedMenu=!1}),this.removeHandler(this.menu,"keydown"),this.addHandler(this.menu,"keydown",function(e){27==e.keyCode&&(n.menu.jqxMenu("close"),n._hasOpenedMenu=!1,n.focus())}),this.addHandler(this.menu,"open",function(e){n.contextMenuOpen&&n.contextMenuOpen(n.menu,n.selectedJQXAppointment?n.selectedJQXAppointment.boundAppointment:null,e),n._raiseEvent("contextMenuOpen",{menu:n.menu,appointment:n.selectedJQXAppointment?n.selectedJQXAppointment.boundAppointment:null}),n._removeFeedbackAndStopResize()}),this.addHandler(this.menu,"close",function(e){n.contextMenuClose&&n.contextMenuClose(n.menu,n.selectedJQXAppointment?n.selectedJQXAppointment.boundAppointment:null,e),n._hasOpenedMenu=!1,document.activeElement&&0<=document.activeElement.className.indexOf("jqx-menu")&&!n.menuOpening&&n.focus(),n._raiseEvent("contextMenuClose",{menu:n.menu,appointment:n.selectedJQXAppointment?n.selectedJQXAppointment.boundAppointment:null})}),this.addHandler(this.host,"contextmenu",function(e){return e.preventDefault(),e.stopPropagation(),!1}),this.addHandler(this.menu,"itemclick",function(e){var t=n.menu.jqxMenu("getItem",e.args.id);if((n._raiseEvent("contextMenuItemClick",{item:t,menu:n.menu,appointment:n.selectedJQXAppointment?n.selectedJQXAppointment.boundAppointment:null}),n.contextMenuItemClick)&&1==n.contextMenuItemClick(n.menu,n.selectedJQXAppointment?n.selectedJQXAppointment.boundAppointment:null,e))return 500<new Date-n.renderedTime&&n._renderrows(),n.menu.jqxMenu("close"),void(n._hasOpenedMenu=!1);if("createAppointment"==t.id)n._initDialog(),n._openDialog(),"keyboard"==e.args.clickType&&(n.menu.jqxMenu("close"),n._hasOpenedMenu=!1);else{if("editAppointment"!=t.id)return"keyboard"==e.args.clickType&&(n.menu.jqxMenu("close"),n._hasOpenedMenu=!1),!0;var i=n.getJQXAppointmentByElement(n.selectedAppointment);i.readOnly||!1!==n._initDialog(i)&&n._openDialog(),"keyboard"==e.args.clickType&&(n.menu.jqxMenu("close"),n._hasOpenedMenu=!1)}});var e=new Array;e.push({label:this.schedulerLocalization.contextMenuEditAppointmentString,id:"editAppointment"}),e.push({label:this.schedulerLocalization.contextMenuCreateAppointmentString,id:"createAppointment"});var t={rtl:this.rtl,keyboardNavigation:!0,source:e,popupZIndex:999999,autoOpenPopup:!1,mode:"popup",theme:this.theme,animationShowDuration:0,animationHideDuration:0,animationShowDelay:0};n.contextMenuCreate&&n.contextMenuCreate(n.menu,t),n._raiseEvent("contextMenuCreate",{menu:n.menu,settings:t}),this.menu.jqxMenu(t)}},_initDialog:function(oe,n){var le,de,e,se,ce,ue=this,he=null;if(oe&&oe.isRecurrentAppointment()&&!ue.editRecurrenceDialog.jqxWindow("isOpen")){var t=(r=ue.host.coord()).top+ue.host.height()/2-ue.editRecurrenceDialog.height()/2,i=r.left+ue.host.width()/2-ue.editRecurrenceDialog.width()/2;ue.editRecurrenceDialog.find("button:first").focus(),setTimeout(function(){ue.editRecurrenceDialog.find("button:first").focus()},25),ue.editRecurrenceDialog.jqxWindow("move",i,t),ue.editRecurrenceDialog.jqxWindow("open"),ue.editSeries=function(e){e?ue._initDialog(oe.rootAppointment):ue._initDialog(oe),ue._openDialog()},ue.overlay.show(),ue.overlay.width(ue.host.width()),ue.overlay.height(ue.host.height());var r=ue.host.coord();return ue.overlay.offset(r),ue._editDialog||ue._initDialog(),!1}if((ue.editAppointment=oe)||(he=ue.getSelection())||(ue.focus(),ue.focusedCell||ue._updateFocusedCell(),ue.focusedCell&&(ue.focusedCell.setAttribute("data-selected","true"),ue._lastSelectedCell=ue.focusedCell,ue._updateCellsSelection(ue.focusedCell),he=ue.getSelection())),(he||oe)&&(le=he?he.from:oe.from,de=he?he.to:oe.to,0<(e=ue.getSelectedCells()).length&&e[e.length-1].getAttribute("data-end-date")&&(de=pe.jqx.scheduler.utilities.getEndOfDay(de)),ue._editStart=le,ue._editEnd=de),ue.editDialogFields&&ue.editDialogFields.resourceContainer&&0<ue._resources.length){for(var a=new Array,o=0;o<ue._resources.length;o++)a.push(ue._resources[o]);var l=!0;10<a.length&&(l=!1),ue.editDialogFields.resource.jqxDropDownList({source:a,selectedIndex:0,autoDropDownHeight:l}),oe||ue.editDialogFields.resource.val(he.resourceId)}ue.editDialogFields&&ue.editDialogFields.repeatContainer&&(oe&&oe.rootAppointment?(ue.editDialogFields.repeatContainer.hide(),ue.editDialogFields.repeatPanel.hide()):(ue.editDialogFields.repeatContainer.show(),ue.editDialogFields.repeatPanel.show())),null==ue._editDialog&&(se=(ue._editDialog=null)==oe?ue.schedulerLocalization.editDialogCreateTitleString:ue.schedulerLocalization.editDialogTitleString,ce=pe("<div><div>"+se+"</div><div id='dialog"+this.element.id+"'></div></div>"),pe(ce).jqxWindow({rtl:ue.rtl,autoFocus:!1,autoOpen:!1,animationType:"none",theme:ue.theme,width:540,maxHeight:800,minHeight:110,resizable:!1,initContent:function(){ue.editDialogFields={},null==le&&null==de&&ue._editStart&&ue._editEnd&&(le=ue._editStart,de=ue._editEnd),ce.jqxWindow("setTitle",se);var e=pe(ce.children()[1]),t=pe("<div></div>");e.append(t);var i=pe("<div class='"+ue._editDialogLabel()+"'>"+ue.schedulerLocalization.editDialogSubjectString+"</div>").appendTo(t),n=pe("<div class='"+ue._editDialogField()+"'></div>").appendTo(t),r=pe("<input type='text'/>").appendTo(n);r.jqxInput({height:25,rtl:ue.rtl,width:"100%",theme:ue.theme}),r.css("box-sizing","border-box"),ue.editDialogFields.subject=r,ue.editDialogFields.subjectLabel=i,ue.editDialogFields.subjectContainer=t;var a=pe("<div></div>");e.append(a);var o=pe("<div class='"+ue._editDialogLabel()+"'>"+ue.schedulerLocalization.editDialogLocationString+"</div>").appendTo(a),l=pe("<div class='"+ue._editDialogField()+"'></div>").appendTo(a),d=pe("<input type='text'/>").appendTo(l);d.jqxInput({height:25,rtl:ue.rtl,width:"100%",theme:ue.theme}),d.css("box-sizing","border-box"),ue.editDialogFields.location=d,ue.editDialogFields.locationLabel=o,ue.editDialogFields.locationContainer=a;var s=pe("<div></div>");e.append(s);var c=pe("<div class='"+ue._editDialogLabel()+"'>"+ue.schedulerLocalization.editDialogFromString+"</div>").appendTo(s),u=pe("<div class='"+ue._editDialogField()+"'></div>").appendTo(s),h=pe("<div></div>").appendTo(u),p=null;le?p=le.toDate():((m=new Date).setHours(9,0,0),p=m,le=new pe.jqx.date(m)),h.jqxDateTimeInput({height:27,dropDownWidth:220,dropDownHeight:220,rtl:ue.rtl,localization:ue._getDateTimeInputLocalization(),firstDayOfWeek:ue.schedulerLocalization.firstDay,todayString:ue.schedulerLocalization.todayString,clearString:ue.schedulerLocalization.clearString,value:p,formatString:ue.editDialogDateTimeFormatString,width:"100%",showTimeButton:!0,theme:ue.theme}),ue.editDialogFields.from=h,ue.editDialogFields.fromLabel=c,ue.editDialogFields.fromContainer=s;var y=pe("<div></div>");e.append(y);var m,g=pe("<div class='"+ue._editDialogLabel()+"'>"+ue.schedulerLocalization.editDialogToString+"</div>").appendTo(y),f=pe("<div class='"+ue._editDialogField()+"'></div>").appendTo(y),D=pe("<div></div>").appendTo(f),v=null;de?v=de.toDate():((m=new Date).setHours(10,0,0),v=m,de=new pe.jqx.date(m)),D.jqxDateTimeInput({height:27,dropDownWidth:220,dropDownHeight:220,rtl:ue.rtl,localization:ue._getDateTimeInputLocalization(),firstDayOfWeek:ue.schedulerLocalization.firstDay,todayString:ue.schedulerLocalization.todayString,clearString:ue.schedulerLocalization.clearString,value:v,formatString:ue.editDialogDateTimeFormatString,width:"100%",showTimeButton:!0,theme:ue.theme}),ue.editDialogFields.to=D,ue.editDialogFields.toLabel=g,ue.editDialogFields.toContainer=y,ue._changeFromUser=!0,ue.addHandler(h,"change",function(e){var t,i,n,r,a,o;ue._changeFromUser&&(e.args,t=e.args.oldValue,i=D.val("date"),0<(n=new pe.jqx.date(i)-new pe.jqx.date(t))&&(r=1e4*n,a=pe.jqx.timeSpan(r),o=new pe.jqx.date(e.args.newValue).add(a),D.val(o.toDate())))}),ue.addHandler(D,"change",function(e){var t,i;ue._changeFromUser&&(e.args,t=e.args.oldValue,i=D.val("date"),h.val("date")>=i&&D.val(t))});var b=pe("<div></div>");e.append(b);var w=pe("<div class='"+ue._editDialogLabel()+"'>"+ue.schedulerLocalization.editDialogAllDayString+"</div>").appendTo(b),x=pe("<div class='"+ue._editDialogField()+"'></div>").appendTo(b),q=pe("<div style='top: 8px; position:relative;'></div>").appendTo(x);q.jqxCheckBox({rtl:ue.rtl,width:25,theme:ue.theme}),ue.editDialogFields.allDay=q,ue.editDialogFields.allDayLabel=w,ue.editDialogFields.allDayContainer=b,ue.addHandler(b,"change",function(e){e.args.checked?(D.jqxDateTimeInput({showTimeButton:!1,formatString:ue.editDialogDateFormatString}),h.jqxDateTimeInput({showTimeButton:!1,formatString:ue.editDialogDateFormatString})):(D.jqxDateTimeInput({showTimeButton:!0,formatString:ue.editDialogDateTimeFormatString}),h.jqxDateTimeInput({showTimeButton:!0,formatString:ue.editDialogDateTimeFormatString}))}),pe.jqx.scheduler.utilities.getStartOfDay(le).equals(le)&&pe.jqx.scheduler.utilities.getEndOfDay(de).equals(de)&&ue.editDialogFields.allDay.val(!0),(0<=ue._views[ue._view].type.indexOf("month")||le&&le.equals(de)||de&&de.equals(pe.jqx.scheduler.utilities.getEndOfDay(de))&&le&&le.equals(pe.jqx.scheduler.utilities.getStartOfDay(le)))&&ue.editDialogFields.allDay.val(!0);var j=pe("<div></div>");e.append(j);var k=pe("<div class='"+ue._editDialogLabel()+"'>"+ue.schedulerLocalization.editDialogTimeZoneString+"</div>").appendTo(j),F=pe("<div class='"+ue._editDialogField()+"'></div>").appendTo(j),A=pe("<div></div>").appendTo(F),T=new Array;T.push({displayName:ue.schedulerLocalization.editDialogSelectTimeZoneString,id:null}),T=T.concat(ue.timeZones);for(var S=0;S<T.length;S++){var _,L=T[S],E=L.displayName.indexOf(")");_=0<=E?L.displayName.substring(2+E):L.displayName,L.searchName=_}A.jqxDropDownList({height:27,rtl:ue.rtl,placeHolder:ue.schedulerLocalization.editDialogSelectTimeZoneString,width:"100%",theme:ue.theme,searchMember:"searchName",source:T,displayMember:"displayName",valueMember:"id"}),ue.editDialogFields.timeZone=A,ue.editDialogFields.timeZoneLabel=k,ue.editDialogFields.timeZoneContainer=j,ue.initRepeatPanels(ce,e,de.toDate()),ue.editDialogFields&&ue.editDialogFields.repeatContainer&&(ue.editAppointment&&ue.editAppointment.rootAppointment?(ue.editDialogFields.repeatContainer.hide(),ue.editDialogFields.repeatPanel.hide()):(ue.editDialogFields.repeatContainer.show(),ue.editDialogFields.repeatPanel.show()));var M=pe("<div></div>");e.append(M);var O=pe("<div class='"+ue._editDialogLabel()+"'>"+ue.schedulerLocalization.editDialogDescriptionString+"</div>").appendTo(M),C=pe("<div class='"+ue._editDialogField()+"'></div>").appendTo(M),I=pe("<textarea type='text' resizable='off' style='position:relative; top: 3px; padding:3px;'></textarea>").appendTo(C);I.jqxInput({rtl:ue.rtl,height:40,width:"100%",theme:ue.theme}),I.css("box-sizing","border-box"),ue.editDialogFields.description=I,ue.editDialogFields.descriptionLabel=O,ue.editDialogFields.descriptionContainer=M;var R=pe("<div></div>");e.append(R);var B=pe("<div class='"+ue._editDialogLabel()+"'>"+ue.schedulerLocalization.editDialogColorString+"</div>").appendTo(R),W=pe("<div class='"+ue._editDialogField()+"'></div>").appendTo(R),H=pe("<div></div>").appendTo(W);H.jqxDropDownList({height:27,rtl:ue.rtl,selectedIndex:-1,placeHolder:ue.schedulerLocalization.editDialogColorPlaceHolderString,selectionRenderer:function(e,t){if(t<0)return e.css("top","4px"),e.css("position","relative"),e[0].outerHTML;var i="";return i+="<div style='margin-top: 2px; float: left; border-radius: 3px; width: 96%; height: 20px; border: none; background:"+ue.colors[t]+"; margin-left: 2%;'></div>"},renderer:function(e){if(-1==e)return"";var t="",t="";return t+="<div style='margin-top: 1px; float: left; border-radius: 3px; width: 96%; height: 20px; border: none; background:"+ue.colors[e]+"; margin-left: 2%;'></div>"},source:ue.colors,width:"100%",theme:ue.theme}),ue.editDialogFields.color=H,ue.editDialogFields.colorLabel=B,ue.editDialogFields.colorContainer=R;var z=pe("<div></div>");e.append(z);var N=pe("<div class='"+ue._editDialogLabel()+"'>"+ue.schedulerLocalization.editDialogStatusString+"</div>").appendTo(z),P=pe("<div class='"+ue._editDialogField()+"'></div>").appendTo(z),Y=pe("<div></div>").appendTo(P);Y.jqxDropDownList({height:27,rtl:ue.rtl,selectedIndex:2,autoDropDownHeight:!0,source:ue.schedulerLocalization.editDialogStatuses,width:"100%",theme:ue.theme}),ue.editDialogFields.status=Y,ue.editDialogFields.statusLabel=N,ue.editDialogFields.statusContainer=z;var Z=pe("<div></div>");e.append(Z);for(var U=pe("<div class='"+ue._editDialogLabel()+"'>"+ue.schedulerLocalization.editDialogResourceIdString+"</div>").appendTo(Z),V=pe("<div class='"+ue._editDialogField()+"'></div>").appendTo(Z),J=pe("<div></div>").appendTo(V),Q=new Array,S=0;S<ue._resources.length;S++)Q.push(ue._resources[S]);var X=!0;10<Q.length&&(X=!1),J.jqxDropDownList({height:27,rtl:ue.rtl,source:Q,selectedIndex:0,autoDropDownHeight:X,width:"100%",theme:ue.theme}),ue.editDialogFields.resource=J,ue.editDialogFields.resourceLabel=U,ue.editDialogFields.resourceContainer=Z,0==Q.length&&Z.hide(),!oe&&he&&ue.editDialogFields.resource.val(he.resourceId);var K=pe("<div></div>");e.append(K);var G=pe("<div style='width:100%;' class='"+ue._editDialogField()+"'></div>").appendTo(K),$=pe("<button style='margin-left: 5px; float:right;'>"+ue.schedulerLocalization.editDialogCancelString+"</button>").appendTo(G),ee=pe("<button style='margin-left: 5px; float:right;'>"+ue.schedulerLocalization.editDialogDeleteString+"</button>").appendTo(G),te=pe("<button style='display: none; margin-left: 5px; float:right;'>"+ue.schedulerLocalization.editDialogRepeatDeleteSeriesString+"</button>").appendTo(G),ie=pe("<button style='display: none; margin-left: 5px; float:right;'>"+ue.schedulerLocalization.editDialogRepeatDeleteString+"</button>").appendTo(G),ne=pe("<button style='margin-left: 5px; float:right;'>"+ue.schedulerLocalization.editDialogSaveString+"</button>").appendTo(G),re=pe("<button style='display: none; margin-left: 5px; float:right;'>"+ue.schedulerLocalization.editDialogRepeatSaveSeriesString+"</button>").appendTo(G),ae=pe("<button style='display: none; margin-left: 5px; float:right;'>"+ue.schedulerLocalization.editDialogRepeatSaveString+"</button>").appendTo(G);ue.isTouchDevice(),ee.jqxButton({rtl:ue.rtl,theme:ue.theme}),te.jqxButton({rtl:ue.rtl,theme:ue.theme}),ie.jqxButton({rtl:ue.rtl,theme:ue.theme}),ne.jqxButton({rtl:ue.rtl,theme:ue.theme}),$.jqxButton({rtl:ue.rtl,theme:ue.theme}),re.jqxButton({rtl:ue.rtl,theme:ue.theme}),ae.jqxButton({rtl:ue.rtl,theme:ue.theme}),re.hide(),ae.hide(),ne.addClass("primary"),ae.addClass("primary"),re.addClass("primary"),ee.addClass("jqx-danger"),ue.editDialogFields.saveOccurrenceButton=ae,ue.editDialogFields.saveSeriesButton=re,ue.editDialogFields.saveButton=ne,ue.editDialogFields.cancelButton=$,ue.editDialogFields.deleteButton=ee,ue.editDialogFields.deleteSeriesButton=te,ue.editDialogFields.deleteExceptionsButton=ie,ue.editDialogFields.buttons=G,ue.addHandler(ee,"click",function(){ce.jqxWindow("close"),ue.overlay.hide(),ue._deleteAppointment(ue.editAppointment)}),ue.addHandler($,"click",function(){ce.jqxWindow("close"),ue.overlay.hide()}),ue.addHandler(ae,"click",function(){if(ue.editAppointment.isException()){for(var e=ue.editAppointment.rootAppointment?ue.editAppointment.rootAppointment.exceptions:ue.editAppointment.exceptions,t=0;t<e.length;t++)if(e[t].occurrenceFrom.equals(ue.editAppointment.occurrenceFrom)){e[t]=ue.editAppointment;break}}else null!=ue.editAppointment.rootAppointment?(ue.editAppointment.rootAppointment.exceptions.push(ue.editAppointment),ue.editAppointment.rootAppointment.recurrenceException.push(ue.editAppointment.occurrenceFrom)):(ue.editAppointment.exceptions.push(ue.editAppointment),ue.editAppointment.recurrenceException.push(ue.editAppointment.occurrenceFrom));ue._setAppointmentPropertiesFromDialog(ue.editAppointment,"occurrence")&&(ue.changedAppointments[ue.editAppointment.id]={type:"Update",appointment:ue.editAppointment.boundAppointment},ue._raiseEvent("appointmentChange",{appointment:ue.editAppointment.boundAppointment}),ue._renderrows(),ce.jqxWindow("close"),ue.overlay.hide())}),ue.addHandler(re,"click",function(){var e=ue.editAppointment;e.rootAppointment&&(e=e.rootAppointment),ue._setAppointmentPropertiesFromDialog(e,"series")&&(ue.changedAppointments[e.id]={type:"Update",appointment:e.boundAppointment},ue._raiseEvent("appointmentChange",{appointment:e.boundAppointment}),ue._renderrows(),ce.jqxWindow("close"),ue.overlay.hide())}),ue.addHandler(ne,"click",function(){var e,t=!0;null==ue.editAppointment?(e=new pe.jqx.scheduler.appointment,(t=ue._setAppointmentPropertiesFromDialog(e,"none"))&&ue.addAppointment(e)):ue.editAppointment.rootAppointment?(ae.trigger("click"),t=!1):ue.editAppointment.isRecurrentAppointment()?(re.trigger("click"),t=!1):(t=ue._setAppointmentPropertiesFromDialog(ue.editAppointment,"none"))&&(ue.changedAppointments[ue.editAppointment.id]={type:"Update",appointment:ue.editAppointment?ue.editAppointment.boundAppointment:null},ue._raiseEvent("appointmentChange",{appointment:ue.editAppointment.boundAppointment}),ue._renderrows()),t&&(ce.jqxWindow("close"),ue.overlay.hide())}),ue.addHandler(ce,"close",function(e){ue.overlay.hide(),ue.focus(),ue.editDialogClose&&ue.editDialogClose(ce,ue.editDialogFields,ue.editAppointment?ue.editAppointment.boundAppointment:null),ue._raiseEvent("editDialogClose",{dialog:ce,fields:ue.editDialogFields,appointment:ue.editAppointment?ue.editAppointment.boundAppointment:null})}),ue.editDialogCreate&&ue.editDialogCreate(ce,ue.editDialogFields,ue.editAppointment),ue._raiseEvent("editDialogCreate",{dialog:ce,fields:ue.editDialogFields,appointment:ue.editAppointment?ue.editAppointment.boundAppointment:null}),ce.jqxWindow({height:e[0].scrollHeight+40})}}),ue._editDialog=ce),ue.dialogOpenings||(ue.dialogOpenings=0),ue.removeHandler(ue._editDialog,"open"),ue.addHandler(ue._editDialog,"open",function(e){if(ue.editDialogOpen&&ue.editDialogFields&&1==ue.editDialogOpen(ce,ue.editDialogFields,ue.editAppointment?ue.editAppointment.boundAppointment:null))return;ue.rtl&&(ue._editDialog.find(".jqx-scheduler-edit-dialog-label").addClass(ue.toThemeProperty("jqx-scheduler-edit-dialog-label-rtl")),ue._editDialog.find(".jqx-scheduler-edit-dialog-field").addClass(ue.toThemeProperty("jqx-scheduler-edit-dialog-field-rtl")),ue.editDialogFields.saveOccurrenceButton.css("float","left"),ue.editDialogFields.saveSeriesButton.css("float","left"),ue.editDialogFields.saveButton.css("float","left"),ue.editDialogFields.cancelButton.css("float","left"),ue.editDialogFields.deleteButton.css("float","left"),ue.editDialogFields.deleteSeriesButton.css("float","left"),ue.editDialogFields.deleteExceptionsButton.css("float","left"),ue.editDialogFields.buttons.css("width","auto"),ue.editDialogFields.allDay.css("float","right")),setTimeout(function(){var e=ue.editAppointment?ue.editAppointment.boundAppointment:null;ue.editAppointment&&ue.editAppointment.rootAppointment&&(e=ue.editAppointment.rootAppointment.boundAppointment),ue._raiseEvent("editDialogOpen",{dialog:ue._editDialog,fields:ue.editDialogFields,appointment:e})});function t(){setTimeout(function(){n?ue.editDialogFields.deleteButton.focus():(ue.editDialogFields.subject.focus(),ue.editDialogFields.subject.select())},1)}var i=null==ue.editAppointment?ue.schedulerLocalization.editDialogCreateTitleString:ue.schedulerLocalization.editDialogTitleString;if(ue._editDialog.jqxWindow({title:i}),0==ue.dialogOpenings&&!oe)return ue.dialogOpenings++,ue.isTouchDevice()||(ue._editDialog.jqxWindow({height:150}),ue._editDialog.jqxWindow({height:pe(ue._editDialog.children())[1].scrollHeight+40})),ue.editDialogFields.deleteButton.hide(),void t();ue.editDialogFields&&(ue.editDialogFields.subject.val(""),ue.editDialogFields.location.val(""),t(),ue.editDialogFields.resetExceptions.val(!1),ue.editDialogFields.description.val(""),oe||ue.editDialogFields.deleteButton.hide(),oe?(ue.dialogOpenings++,ue.editDialogFields.deleteButton.show(),ue.editDialogFields.subject.val(oe.subject),ue.editDialogFields.location.val(oe.location),ue.editDialogFields.description.val(oe.description),ue.editDialogFields.timeZone.val(oe.timeZone),0<=ue.colors.indexOf(oe.borderColor)?ue.editDialogFields.color.val(oe.borderColor):ue.editDialogFields.color.jqxDropDownList("clearSelection"),ue.editDialogFields.allDay.val(oe.allDay),ue.editDialogFields.resource.val(oe.resourceId),ue.editDialogFields.status.val(oe.status),oe.timeZone&&(oe.from=oe.from.toTimeZone(oe.timeZone),oe.to=oe.to.toTimeZone(oe.timeZone)),le=oe.from,de=oe.to,pe.jqx.scheduler.utilities.getStartOfDay(le).equals(le)&&pe.jqx.scheduler.utilities.getEndOfDay(de).equals(de)&&ue.editDialogFields.allDay.val(!0),ue._setAppointmentPropertiesToDialog(oe,le,de,he?he.resourceId:null)):(ue.editDialogFields.saveButton.show(),ue._setAppointmentPropertiesToDialog(null,le,de,he?he.resourceId:null)),le&&de&&(ue._changeFromUser=!1,ue.editDialogFields.from.val(le.toDate()),ue.editDialogFields.to.val(de.toDate()),ue._changeFromUser=!0),ue.isTouchDevice()||(ue._editDialog.jqxWindow({height:150}),ue._editDialog.jqxWindow({height:pe(ue._editDialog.children())[1].scrollHeight+40})))}),ue.removeHandler(ue._editDialog,"keydown"),ue.addHandler(ue._editDialog,"keydown",function(e){if(ue.editDialogKeyDown){var t=ue.editDialogKeyDown(ce,ue.editDialogFields,ue.editAppointment,e);if(null!=t)return t}if(13==e.keyCode){if(pe(document.activeElement).ischildof(ue._editDialog)){if("button"==document.activeElement.nodeName.toLowerCase())return!0;oe?oe.isException()||oe.rootAppointment?ue.editDialogFields.saveOccurrenceButton.trigger("click"):oe.isRecurrentAppointment()?ue.editDialogFields.saveSeriesButton.trigger("click"):ue.editDialogFields.saveButton.trigger("click"):ue.editDialogFields.saveButton.trigger("click")}}else 27==e.keyCode&&ue.editDialogFields.cancelButton.trigger("click")})},openMenu:function(e,t){var i=this;i.menu||i._initMenu();var n;i._views[i._view].type;i.contextMenu&&i.menu&&(i.selectedAppointment?i.menu.jqxMenu("showItem","editAppointment"):i.menu.jqxMenu("hideItem","editAppointment"),arguments.length<2&&(i.selectedAppointment?(e=(n=i.selectedAppointment.coord()).left,t=n.top):i.focusedCell&&(n=pe(i.focusedCell).coord()),e=n.left,t=n.top),i.menu.jqxMenu("open",e,t),i._hasOpenedMenu=!0)},closeMenu:function(){var e=this;e.contextMenu&&e.menu&&setTimeout(function(){e.menu.jqxMenu("close")})},closeDialog:function(){this._editDialog.jqxWindow("close")},openDialog:function(e,t){var i=this;i._views[i._view].type;i.selectedJQXAppointment?!1!==i._initDialog(i.selectedJQXAppointment)&&i._openDialog(e,t):(null==i.getSelection()&&(i.focus(),i.focusedCell.setAttribute("data-selected","true"),i._lastSelectedCell=i.focusedCell,i._updateCellsSelection(i.focusedCell)),i._initDialog(),i._openDialog(e,t))},_openDialog:function(e,t){var i,n,r,a,o=this;o._views[o._view].type;o.editDialog&&(i=o.host.coord(),o.overlay.show(),o.overlay.css("z-index",9999999),o.overlay.width(o.host.width()),o.overlay.height(o.host.height()),o.overlay.offset(i),o.isTouchDevice()?(o._editDialog.jqxWindow("move",i.left,i.top),o._editDialog.jqxWindow({draggable:!1,maxWidth:o.host.width(),maxHeight:o.host.height()}),o._editDialog.jqxWindow({width:o.host.width(),height:o.host.height()}),o._editDialog.jqxWindow("open"),o._editDialog.jqxWindow("move",i.left,i.top)):(null!=e&&null!=t?o._editDialog.jqxWindow("move",e,t):((n=o._editDialog.height())<400&&(n=400),r=i.top+o.host.height()/2-n/2,a=i.left+o.host.width()/2-o._editDialog.width()/2,o._editDialog.jqxWindow("move",a,r)),o._editDialog.jqxWindow("open")),setTimeout(function(){o.overlay.css("z-index",999)},50))},_setAppointmentPropertiesFromDialog:function(e,j){var k=this;return function(e){var t,i=k._views[k._view].type,n=(k._views[k._view],k.editDialogFields.from.val("date")),r=k.editDialogFields.to.val("date");if(r<n)return k.editDialogFields.from.jqxDateTimeInput("focus"),!1;if(n==r)return 0<=i.indexOf("month");e.resourceId=k.editDialogFields.resource.val(),"none"==k.editDialogFields.resourceContainer.css("display")&&(e.resourceId=""),e.description=k.editDialogFields.description.val(),e.allDay=k.editDialogFields.allDay.val(),e.status=k.editDialogFields.status.val(),e.location=k.editDialogFields.location.val(),e.timeZone=k.editDialogFields.timeZone.val(),""==e.timeZone&&""!=k.timeZone&&(e.timeZone=k.timeZone),e.from=new pe.jqx.date(n,e.timeZone),e.to=new pe.jqx.date(r,e.timeZone),k.timeZone?(e.from=e.from.toTimeZone(k.timeZone),e.to=e.to.toTimeZone(k.timeZone)):(e.from=e.from.toTimeZone(null),e.to=e.to.toTimeZone(null)),e.allDay&&(e.from=pe.jqx.scheduler.utilities.getStartOfDay(e.from),e.to=pe.jqx.scheduler.utilities.getEndOfDay(e.to)),k.editDialogFields.color.val()&&(t=k.getAppointmentColors(k.editDialogFields.color.val()),e.color=t.color,e.background=t.background,e.borderColor=t.border),e.subject=k.editDialogFields.subject.val();var a=k.editDialogFields.repeat.jqxDropDownList("selectedIndex"),o=new pe.jqx.scheduler.recurrencePattern,l=k.editDialogFields.repeatEndPanel;switch(o.timeZone=k.timeZone,o.from=e.from.clone(),"occurrence"==j&&e.rootAppointment&&(o.from=e.rootAppointment.from.clone()),k.editDialogFields.resetExceptions.val()&&(e.exceptions=new Array,e.recurrenceException=new Array),l.repeatEndNever.val()?(o.count=1e3,o.to=new pe.jqx.date(9999,12,31)):l.repeatEndAfter.val()?(o.count=l.repeatEndAfterValue.val(),o.to=new pe.jqx.date(9999,12,31)):l.repeatEndOn.val()&&(o.count=1e3,r=new pe.jqx.date(l.repeatEndOnValue.jqxDateTimeInput("getDate"),k.timeZone),o.to=r),a){case 0:default:e.clearRecurrence();break;case 1:var d=k.editDialogFields.daily.repeatDayInterval.val();o.interval=d,o.freq="daily";break;case 2:var s=k.editDialogFields.weekly,d=s.repeatWeekInterval.val(),c=[{Sunday:0},{Monday:1},{Tuesday:2},{Wednesday:3},{Thursday:4},{Friday:5},{Saturday:6}],u=s.repeatDays,h=new Array;o.weekDays={};for(var p=0;p<7;p++){u[p].val()&&(0==p?h.push(6):h.push(p-1),pe.extend(o.weekDays,c[p]))}o.freq="weekly",o.byweekday=h,o.interval=d;break;case 3:var y=k.editDialogFields.monthly,d=y.repeatMonth.val();if(y.repeatMonthDayBool.val())o.day=y.repeatMonthDay.val(),o.bymonthday=new Array,o.bymonthday.push(o.day);else{var m=y.repeatDayOfWeek.jqxDropDownList("selectedIndex"),g=new Array;0==m?m=6:m--;var f="";switch(y.repeatDayOfWeekType.jqxDropDownList("selectedIndex")){case 0:f=1;break;case 1:f=2;break;case 2:f=3;break;case 3:f=4;break;case 4:f=-1}g.push([m,f]),o.bynweekday=g}o.freq="monthly",o.interval=d;break;case 4:var D=k.editDialogFields.yearly,d=D.repeatYear.val();if(D.repeatYearBool.val())o.day=D.repeatYearDay.val(),o.month=D.repeatYearMonth.jqxDropDownList("selectedIndex"),o.bymonth=new Array,o.bymonth.push(1+o.month),o.byyearday=new Array,o.byyearday.push(o.day);else{o.month=D.repeatDayOfWeekMonth.jqxDropDownList("selectedIndex"),o.bymonth=new Array,o.bymonth.push(1+o.month);m=D.repeatDayOfWeek.jqxDropDownList("selectedIndex"),g=new Array;0==m?m=6:m--;f="";switch(D.repeatDayOfWeekType.jqxDropDownList("selectedIndex")){case 0:f=1;break;case 1:f=2;break;case 2:f=3;break;case 3:f=4;break;case 4:f=-1}g.push([m,f]),o.bynweekday=g}o.freq="yearly",o.interval=d}e.rootAppointment?e.rootAppointment.recurrencePattern=o:0<a&&(e.recurrencePattern=o);var v={},b={};for(var w in k.appointmentDataFields){var x=k.appointmentDataFields[w],q=e[w];v[w]=q,"from"!=w&&"to"!=w||(q=q.toDate()),b[x]=q}return v.originalData=b,(v.jqxAppointment=e).boundAppointment=v,!0}(e)},_setAppointmentPropertiesToDialog:function(e,t,o,i){var m=this;if(!function(){var e=m.editDialogFields.repeatEndPanel;e.repeatEndNever.jqxRadioButton({checked:!0}),e.repeatEndAfter.jqxRadioButton({checked:!1}),e.repeatEndAfterValue.val(1),e.repeatEndOnValue.val(n);var t,i,n=o.toDate();if(m.editDialogFields.daily&&m.editDialogFields.daily.repeatDayInterval.val(1),m.editDialogFields.weekly){for(var r=m.editDialogFields.weekly,a=0;a<r.repeatDays.length;a++)1==a?r.repeatDays[a].jqxCheckBox({checked:!0}):r.repeatDays[a].jqxCheckBox({checked:!1});r.repeatWeekInterval.val(1)}m.editDialogFields.monthly&&((t=m.editDialogFields.monthly).repeatDayOfWeek.jqxDropDownList("selectIndex",1),t.repeatDayOfWeekBool.jqxRadioButton({checked:!1}),t.repeatDayOfWeekType.jqxDropDownList("selectIndex",0),t.repeatMonthDayBool.jqxRadioButton({checked:!0}),t.repeatMonthDay.val(1),t.repeatMonth.val(1)),m.editDialogFields.yearly&&((i=m.editDialogFields.yearly).repeatDayOfWeekMonth.jqxDropDownList("selectIndex",0),i.repeatDayOfWeekBool.jqxRadioButton({checked:!1}),i.repeatDayOfWeekType.jqxDropDownList("selectIndex",0),i.repeatDayOfWeek.jqxDropDownList("selectIndex",1),i.repeatYear.val(1),i.repeatYearMonth.jqxDropDownList("selectIndex",0),i.repeatYearDay.val(1),i.repeatYearBool.val(!0))}(),e&&e.isRecurrentAppointment()?e.rootAppointment?m.editDialogFields.resetExceptionsContainer.hide():m.editDialogFields.resetExceptionsContainer.show():e&&(m.editDialogFields.resetExceptionsContainer.hide(),m.editDialogFields.repeat.jqxDropDownList("selectIndex",0)),!e)return m.editDialogFields.timeZone.jqxDropDownList("clearSelection"),i?m.editDialogFields.resource.val(i):m.editDialogFields.resource.jqxDropDownList("selectIndex",0),m.editDialogFields.allDay.val(!1),(0<=m._views[m._view].type.indexOf("month")||t&&t.equals(o)||o&&o.equals(pe.jqx.scheduler.utilities.getEndOfDay(o))&&t&&t.equals(pe.jqx.scheduler.utilities.getStartOfDay(t)))&&m.editDialogFields.allDay.val(!0),m.editDialogFields.color.jqxDropDownList("clearSelection"),m.editDialogFields.description.val(""),m.editDialogFields.subject.val(""),void m.editDialogFields.repeat.jqxDropDownList("selectIndex",0);!function(e){var t=e.recurrencePattern;if(e.rootAppointment&&(t=e.rootAppointment.recurrencePattern),null!=t){var i=t.freq,n="yearly"==i?4:"monthly"==i?3:"weekly"==i?2:"daily"==i?1:0,r=m.editDialogFields.repeatEndPanel;switch(1e3!=t.count?(r.repeatEndNever.jqxRadioButton({checked:!1}),r.repeatEndAfter.jqxRadioButton({checked:!0}),r.repeatEndAfterValue.val(t.count)):9999!=t.to.year()?(r.repeatEndOn.jqxRadioButton({checked:!0}),r.repeatEndOnValue.val(t.to.toDate())):r.repeatEndNever.jqxRadioButton({checked:!0}),m.editDialogFields.repeat.jqxDropDownList("selectIndex",n),n){case 1:var a=t.interval;m.editDialogFields.daily.repeatDayInterval.val(a);break;case 2:var a=t.interval,o=m.editDialogFields.weekly;o.repeatWeekInterval.val(a);for(var l=t.byweekday,d=0;d<7;d++){(s=o.repeatDays[d]).val(!1)}for(var s,d=0;d<l.length;d++){6==(s=l[d])?o.repeatDays[0].val(!0):o.repeatDays[s+1].val(!0)}break;case 3:var c=m.editDialogFields.monthly;if(c.repeatMonth.val(t.interval),t.bymonthday&&0<t.bymonthday.length)c.repeatMonthDayBool.jqxRadioButton({checked:!0}),c.repeatMonthDay.val(t.day);else{c.repeatDayOfWeekBool.jqxRadioButton({checked:!0});var u=(y=t.bynweekday)[0][0];7==++u&&(u=0),c.repeatDayOfWeek.jqxDropDownList("selectIndex",u);var h="";switch(y[0][1]){case 1:h=0;break;case 2:h=1;break;case 3:h=2;break;case 4:h=3;break;case-1:h=4}c.repeatDayOfWeekType.jqxDropDownList("selectIndex",h)}break;case 4:var p=m.editDialogFields.yearly;if(t.byyearday&&0<t.byyearday.length&&(p.repeatYearDay.val(t.byyearday[0]),p.repeatYearBool.val(!0)),t.bymonth&&0<t.bymonth.length&&(p.repeatYearMonth.jqxDropDownList("selectIndex",t.bymonth[0]-1),p.repeatYearBool.val(!0)),!t.byyearday||t.byyearday&&0==t.byyearday.length){p.repeatDayOfWeekMonth.jqxDropDownList("selectIndex",t.bymonth[0]-1),p.repeatDayOfWeekBool.jqxRadioButton({checked:!0});var y,u=(y=t.bynweekday)[0][0];7==++u&&(u=0),p.repeatDayOfWeek.jqxDropDownList("selectIndex",u);h="";switch(y[0][1]){case 1:h=0;break;case 2:h=1;break;case 3:h=2;break;case 4:h=3;break;case-1:h=4}p.repeatDayOfWeekType.jqxDropDownList("selectIndex",h)}}}}(e)}}),pe.jqx.scheduler.column=function(i,e){return this.owner=i,this.datafield=null,this.displayfield=null,this.text="",this.sortable=!0,this.editable=!0,this.hidden=!1,this.hideable=!0,this.groupable=!0,this.renderer=null,this.cellsRenderer=null,this.columntype=null,this.cellsFormat="",this.align="center",this.cellsalign="center",this.width="auto",this.minwidth=60,this.maxwidth="auto",this.pinned=!1,this.visibleindex=-1,this.filterable=!0,this.filter=null,this.resizable=!0,this.draggable=!0,this.initeditor=null,this.createeditor=null,this.destroyeditor=null,this.geteditorvalue=null,this.autoCellHeight=!0,this.validation=null,this.classname="",this.cellclassname="",this.rendered=null,this.exportable=!0,this.nullable=!0,this.columngroup=null,this.columntype="textbox",this.getcolumnproperties=function(){return{nullable:this.nullable,sortable:this.sortable,hidden:this.hidden,groupable:this.groupable,width:this.width,align:this.align,editable:this.editable,minwidth:this.minwidth,maxwidth:this.maxwidth,resizable:this.resizable,datafield:this.datafield,text:this.text,exportable:this.exportable,cellsalign:this.cellsalign,pinned:this.pinned,cellsFormat:this.cellsFormat,columntype:this.columntype,classname:this.classname,cellclassname:this.cellclassname,menu:this.menu}},this.setproperty=function(e,t){var i;this[e]?(i=this[e],this[e]=t,this.owner._columnPropertyChanged(this,e,t,i)):this[e.toLowerCase()]&&(i=this[e.toLowerCase()],this[e.toLowerCase()]=t,this.owner._columnPropertyChanged(this,e.toLowerCase(),t,i))},this._initfields=function(e){if(null!=e){if(pe.jqx.hasProperty(e,"dataField")&&(this.datafield=pe.jqx.get(e,"dataField")),pe.jqx.hasProperty(e,"displayField")?this.displayfield=pe.jqx.get(e,"displayField"):this.displayfield=this.datafield,pe.jqx.hasProperty(e,"columnType")&&(this.columntype=pe.jqx.get(e,"columnType")),pe.jqx.hasProperty(e,"validation")&&(this.validation=pe.jqx.get(e,"validation")),pe.jqx.hasProperty(e,"autoCellHeight")&&(this.autoCellHeight=pe.jqx.get(e,"autoCellHeight")),pe.jqx.hasProperty(e,"text")?this.text=pe.jqx.get(e,"text"):this.text=this.displayfield,pe.jqx.hasProperty(e,"sortable")&&(this.sortable=pe.jqx.get(e,"sortable")),pe.jqx.hasProperty(e,"hidden")&&(this.hidden=pe.jqx.get(e,"hidden")),pe.jqx.hasProperty(e,"groupable")&&(this.groupable=pe.jqx.get(e,"groupable")),pe.jqx.hasProperty(e,"renderer")&&(this.renderer=pe.jqx.get(e,"renderer")),pe.jqx.hasProperty(e,"align")&&(this.align=pe.jqx.get(e,"align")),pe.jqx.hasProperty(e,"cellsAlign")&&(this.cellsalign=pe.jqx.get(e,"cellsAlign")),pe.jqx.hasProperty(e,"cellsFormat")&&(this.cellsFormat=pe.jqx.get(e,"cellsFormat")),pe.jqx.hasProperty(e,"width")&&(this.width=pe.jqx.get(e,"width")),pe.jqx.hasProperty(e,"minWidth")&&(this.minwidth=pe.jqx.get(e,"minWidth")),pe.jqx.hasProperty(e,"maxWidth")&&(this.maxwidth=pe.jqx.get(e,"maxWidth")),pe.jqx.hasProperty(e,"cellsRenderer")&&(this.cellsRenderer=pe.jqx.get(e,"cellsRenderer")),pe.jqx.hasProperty(e,"columnType")&&(this.columntype=pe.jqx.get(e,"columnType")),pe.jqx.hasProperty(e,"pinned")&&(this.pinned=pe.jqx.get(e,"pinned")),pe.jqx.hasProperty(e,"filterable")&&(this.filterable=pe.jqx.get(e,"filterable")),pe.jqx.hasProperty(e,"filter")&&(this.filter=pe.jqx.get(e,"filter")),pe.jqx.hasProperty(e,"resizable")&&(this.resizable=pe.jqx.get(e,"resizable")),pe.jqx.hasProperty(e,"draggable")&&(this.draggable=pe.jqx.get(e,"draggable")),pe.jqx.hasProperty(e,"editable")&&(this.editable=pe.jqx.get(e,"editable")),pe.jqx.hasProperty(e,"initEditor")&&(this.initeditor=pe.jqx.get(e,"initEditor")),pe.jqx.hasProperty(e,"createEditor")&&(this.createeditor=pe.jqx.get(e,"createEditor")),pe.jqx.hasProperty(e,"destroyEditor")&&(this.destroyeditor=pe.jqx.get(e,"destroyEditor")),pe.jqx.hasProperty(e,"getEditorValue")&&(this.geteditorvalue=pe.jqx.get(e,"getEditorValue")),pe.jqx.hasProperty(e,"className")&&(this.classname=pe.jqx.get(e,"className")),pe.jqx.hasProperty(e,"cellClassName")&&(this.cellclassname=pe.jqx.get(e,"cellClassName")),pe.jqx.hasProperty(e,"rendered")&&(this.rendered=pe.jqx.get(e,"rendered")),pe.jqx.hasProperty(e,"exportable")&&(this.exportable=pe.jqx.get(e,"exportable")),pe.jqx.hasProperty(e,"nullable")&&(this.nullable=pe.jqx.get(e,"nullable")),pe.jqx.hasProperty(e,"columnGroup")&&(this.columngroup=pe.jqx.get(e,"columnGroup")),!e instanceof String&&"string"!=typeof e)for(var t in e)if(!this.hasOwnProperty(t)&&!this.hasOwnProperty(t.toLowerCase()))throw i.host.remove(),new Error("jqxScheduler: Invalid property name - "+t+".")}},this._initfields(e),this},pe.jqx.schedulerDataCollection=function(e){return this.records=new Array,this.owner=e,this.updating=!1,this.beginUpdate=function(){this.updating=!0},this.resumeupdate=function(){this.updating=!1},this.clear=function(){this.records=new Array},this.replace=function(e,t){this.records[e]=t},this.isempty=function(e){return null==this.records[e]},this.initialize=function(e){e<1&&(e=1),this.records[e-1]=-1},this.length=function(){return this.records.length},this.indexOf=function(e){return this.records.indexOf(e)},this.add=function(e){return null!=e&&(this.records[this.records.length]=e,!0)},this.insertAt=function(e,t){return null!=e&&null!=e&&(null!=t&&(0<=e&&(e<this.records.length?(this.records.splice(e,0,t),!0):this.add(t))))},this.remove=function(e){if(null==e||null==e)return!1;var t=this.records.indexOf(e);return-1!=t&&(this.records.splice(t,1),!0)},this.removeAt=function(e){if(null==e||null==e)return!1;if(e<0)return!1;if(e<this.records.length){this.records[e];return this.records.splice(e,1),!0}return!1},this},pe.jqx.scheduler.dataView=function(c){return(this.that=this).scheduler=null,this.records=[],this.rows=[],this.columns=[],this.filters=new Array,this.pagesize=0,this.pagenum=0,this.source=null,this.databind=function(e,t){var i=this;if(pe.isArray(e))i.update(e);else{var n=!!e._source,r=null;this._sortData=null,this._sortHierarchyData=null,n?e=(r=e)._source:r=new pe.jqx.dataAdapter(e,{autoBind:!1});function a(e){e.originaldata=r.originaldata,e.records=r.records,e.hierarchy=r.hierarchy,e.scheduler.serverProcessing||(e._sortData=null,e._sortfield=null,e._filteredData=null,e._sortHierarchyData=null),e.hierarchy||(e.hierarchy=new Array,r.hierarchy=new Array),r._source.totalrecords?e.totalrecords=r._source.totalrecords:r._source.totalRecords?e.totalrecords=r._source.totalRecords:0!==e.hierarchy.length?e.totalrecords=e.hierarchy.length:e.totalrecords=e.records.length,e.cachedrecords=r.cachedrecords}var o;o=this,r.recordids=[],r.records=new Array,r.cachedrecords=new Array,r.originaldata=new Array,r._options.totalrecords=o.totalrecords,r._options.originaldata=o.originaldata,r._options.recordids=o.recordids,r._options.cachedrecords=new Array,r._options.pagenum=o.pagenum,r._options.pageable=o.pageable,null!=e.type&&(r._options.type=e.type),null!=e.formatdata&&(r._options.formatData=e.formatdata),null!=e.contenttype&&(r._options.contentType=e.contenttype),null!=e.async&&(r._options.async=e.async),null!=e.updaterow&&(r._options.updaterow=e.updaterow),null!=e.addrow&&(r._options.addrow=e.addrow),null!=e.deleterow&&(r._options.deleterow=e.deleterow),0==o.pagesize&&(o.pagesize=10),r._options.pagesize=o.pagesize,this.source=e,void 0!==t&&0;i=this;switch(e.datatype){case"local":case"array":default:null==e.localdata&&(e.localdata=[]),null!=e.localdata&&(r.unbindBindingUpdate(c+i.scheduler.element.id),(!i.scheduler.autoBind&&i.scheduler.isInitialized||i.scheduler.autoBind)&&r.dataBind(),(s=function(){a(i),i.update(r.records)})(),r.bindBindingUpdate(c+i.scheduler.element.id,s));break;case"ics":case"json":case"jsonp":case"xml":case"xhtml":case"script":case"text":case"csv":case"tab":if(null!=e.localdata)return r.unbindBindingUpdate(c+i.scheduler.element.id),(!i.scheduler.autoBind&&i.scheduler.isInitialized||i.scheduler.autoBind)&&r.dataBind(),(s=function(e){a(i),i.update(r.records)})(),void r.bindBindingUpdate(c+i.scheduler.element.id,s);var l={},d=r._options.data;r._options.data?pe.extend(r._options.data,l):(e.data&&pe.extend(l,e.data),r._options.data=l);var s=function(){function e(){a(i),i.update(r.records)}if(pe.jqx.browser.msie&&pe.jqx.browser.version<9)try{e()}catch(e){}else e()};r.unbindDownloadComplete(c+i.scheduler.element.id),r.bindDownloadComplete(c+i.scheduler.element.id,s),r._source.loaderror=function(e,t,i){s()},(!i.scheduler.autoBind&&i.scheduler.isInitialized||i.scheduler.autoBind)&&r.dataBind(),r._options.data=d}}},this.addFilter=function(e,t){this._sortData=null,this._sortHierarchyData=null;for(var i=-1,n=0;n<this.filters.length;n++)if(this.filters[n].datafield==e){i=n;break}-1==i?this.filters[this.filters.length]={filter:t,datafield:e}:this.filters[i]={filter:t,datafield:e}},this.removeFilter=function(e){this._sortData=null,this._sortHierarchyData=null;for(var t=0;t<this.filters.length;t++)if(this.filters[t].datafield==e){this.filters.splice(t,1);break}},this._compare=function(e,t,i){if(void 0===(e=e)&&(e=null),void 0===(t=t)&&(t=null),null===e&&null===t)return 0;if(null===e&&null!==t)return 1;if(null!==e&&null===t)return 1;if(e=e.toString(),t=t.toString(),pe.jqx.dataFormat)if(i&&""!=i)switch(i){case"number":case"int":case"float":return e<t?-1:t<e?1:0;case"date":case"time":return e<t?-1:t<e?1:0;case"string":case"text":e=String(e).toLowerCase(),t=String(t).toLowerCase()}else{if(pe.jqx.dataFormat.isNumber(e)&&pe.jqx.dataFormat.isNumber(t))return e<t?-1:t<e?1:0;if(pe.jqx.dataFormat.isDate(e)&&pe.jqx.dataFormat.isDate(t))return e<t?-1:t<e?1:0;pe.jqx.dataFormat.isNumber(e)||pe.jqx.dataFormat.isNumber(t)||(e=String(e).toLowerCase(),t=String(t).toLowerCase())}try{if(e<t)return-1;if(t<e)return 1}catch(e){}return 0},this._equals=function(e,t){return 0===this._compare(e,t)},this.evaluate=function(e){if(this.scheduler.serverProcessing)return e;var t=new Array;if(this.filters.length){function i(e,t){for(var i=0;i<e.length;i++){var n=e[i];n._visible=!0;for(var r=void 0,a=0;a<this.filters.length;a++)var o=this.filters[a].filter,l=n[this.filters[a].datafield],d=o.evaluate(l),r=null==r?d:"or"==o.operator?r||d:r&&d;n._visible=!1,(r||n.aggregate)&&(n._visible=!0,t.push(n),s[n.uid]=n)}}var s=new Array;if(this._filteredData)this.rows=this._filteredData;else{if(this.source.hierarchy||this.scheduler.source.hierarchy&&0<this.scheduler.source.hierarchy.length){var r=new Array,a=function(e,t){for(var i=0;i<t.length;i++){var n=t[i];r.push(n),n.records&&0<n.records.length&&a(n,n.records)}};a(null,e),i.call(this,r,t);for(var n=0;n<t.length;n++)for(var o=t[n];o.parent;){var l=o.parent;s[l.uid]||(l._visible=!0,s[l.uid]=l),o=l}t=e}else i.call(this,e,t);this._filteredData=t,this.rows=t}}else this.rows=e;return this.rows},this.getid=function(e,t,i){if(0<pe(e,t).length)return pe(e,t).text();if(this.rows&&""!=e&&null!=e&&0<this.rows.length){null==(a=this.rows[this.rows.length-1][e])&&(a=null);for(var n=1;n<=100;n++){if(!this.scheduler.appointmentsByKey[n+a]){if(this.scheduler&&this.scheduler.treeGrid&&this.scheduler.treescheduler.virtualModeCreateRecords){if(this.scheduler.appointmentsByKey["jqx"+a+n])continue;return"jqx"+a+n}return a+n}}}if(null!=e&&0<e.toString().length){var r=pe(t).attr(e);if(null!=r&&0<r.toString().length)return this.scheduler&&this.scheduler.treeGrid&&this.scheduler.treescheduler.virtualModeCreateRecords?"jqx"+r:r}var a;if(this.rows&&0<this.rows.length&&this.scheduler.appointmentsByKey[i]){null==(a=this.rows[this.rows.length-1][e])&&(a="");for(n=1;n<=1e3;n++){if(!this.scheduler.appointmentsByKey[n+a]){if(this.scheduler&&this.scheduler.treeGrid&&this.scheduler.treescheduler.virtualModeCreateRecords){if(this.scheduler.appointmentsByKey["jqx"+a+n])continue;return"jqx"+a+n}return a+n}}}if(this.scheduler&&this.scheduler.treeGrid&&this.scheduler.treescheduler.virtualModeCreateRecords){if(!this.scheduler.appointmentsByKey["jqx"+i])return"jqx"+i;for(n=i+1;n<=100;n++){if(!this.scheduler.appointmentsByKey["jqx"+n]){if(this.scheduler.appointmentsByKey["jqx"+n])continue;return"jqx"+n}}}return i},this.generatekey=function(){function e(){return 16*(1+Math.random())|0}return""+e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()},this}}(jqxBaseFramework);