!function(P){P.jqx.jqxWidget("jqxRangeSelector","",{}),P.extend(P.jqx._jqxRangeSelector.prototype,{defineInstance:function(){var e={width:400,height:100,min:0,max:100,range:{from:0,to:1/0,min:0,max:1/0},majorTicksInterval:10,minorTicksInterval:1,showMajorTicks:!0,showMinorTicks:!1,snapToTicks:!0,labelsFormat:null,markersFormat:null,showLabels:!0,labelsOnTicks:!0,markersPosition:"top",labelsFormatFunction:null,groupLabelsFormatFunction:null,markersFormatFunction:null,showGroupLabels:!1,showMarkers:!0,resizable:!0,moveOnClick:!0,disabled:!1,rtl:!1,padding:"auto",events:["change"]};return this===P.jqx._jqxRangeSelector.prototype||P.extend(!0,this,e),e},createInstance:function(e){var i=this;if(this._isTouchDevice=P.jqx.mobile.isTouchDevice(),!P.jqx.dataAdapter)throw new Error("jqxRangeSelector: Missing reference to the following module: 'jqxdata.js'.");var r=P.jqx.isHidden(this.host);this.render();var s=this.host.width(),a=this.host.height();P.jqx.utilities.resize(this.host,function(){var e=i.host.width(),t=i.host.height();i.range=i.getRange(),r?(i.refresh(),r=!1):s==e&&a==t||i.refresh(),s=i.host.width(),a=i.host.height()})},render:function(){(1<this.host.children().length||this.rangeSelector)&&(this._removeHandlers(),this.rangeSelector&&this.rangeSelector.remove()),this.host.addClass(this.toThemeProperty("jqx-widget")),this.host.addClass(this.toThemeProperty("jqx-rangeselector")),this.host.children(":eq(0)").addClass(this.toThemeProperty("jqx-rangeselector-content")),this._id=this.element.id,"string"==typeof this.min||this.min instanceof Date?this._dataType="date":this._dataType="number",this._privateProperties(),this._checkProperties(),this._setSize(),this._scale(),this._initSlider()},refresh:function(e){1!=e&&(this.host.children(".jqx-rangeselector-ticks-container").remove(),this._removeHandlers(),this._privateProperties(),this._checkProperties(),this._setSize(),this._scale(),this._initSlider())},destroy:function(){this._removeHandlers(),this.host.remove()},setRange:function(e,t){if(t<e)throw new Error("jqxRangeSelector: range object initialization error. 'min' should be less than 'max'");var i=this._getValue();if(i.from!=e||i.to!=t){var r="The set values are in the wrong format. Please set "+("number"==this._dataType?"numeric":"date")+" values.";if("string"==typeof e||e instanceof Date){if("number"==this._dataType)throw new Error(r)}else if("date"==this._dataType)throw new Error(r);e=this._validateInput(e),t=this._validateInput(t),e>this._max&&(e=this._max),e<this._min&&(e=this._min),t>this._max&&(t=this._max),t<this._min&&(t=this._min);var s=t-e;s>this._range._max?t=e+this._range._max:s<this._range._min&&(t=e+this._range._min);var a=this._valuesArray.indexOf(e),o=this._valuesArray.indexOf(t),h=this._ticksArray[a],n=this._ticksArray[o],l=Math.abs(n-h);this.slider[0].style.width=l+"px";var d=this.rtl?n:h;this.slider[0].style.left=d,this._moveSlider(d),"date"==this._dataType&&(e=new Date(e),t=new Date(t)),this._raiseEvent("0",{type:null,from:e,to:t})}},val:function(e){if(0==arguments.length)return this.getRange();null!=e.from&&this.setRange(e.from,e.to)},getRange:function(){return this._getValue()},propertyChangedHandler:function(e,t,i,r){switch(t){case"showMinorTicks":1==r?P("#"+this._id+" .jqx-rangeselector-ticks-minor").css("visibility","visible"):P("#"+this._id+" .jqx-rangeselector-ticks-minor").css("visibility","hidden");break;case"showMarkers":var s=P("#"+this._id+"LeftMarker, #"+this._id+"RightMarker, #"+this._id+"LeftMarkerArrow, #"+this._id+"RightMarkerArrow");1==r?s.css("visibility","visible"):s.css("visibility","hidden");break;default:this.refresh()}},_raiseEvent:function(e,t){var i=this.events[e],r=new P.Event(i);r.owner=this,r.args=t;try{var s=this.host.trigger(r)}catch(e){}return s},_setSize:function(){this.host.width(this.width),this.host.height(this.height)},resize:function(e,t){this.width=e,this.height=t,this.refresh()},_scale:function(){var e=this.host.width(),t=this._max-this._min;this._unitPerPixel=parseFloat((t/e).toFixed(4)),this._pixelPerUnit=e/t,this._minWidth=this._roundNumber(this._range._min/this._unitPerPixel),this._maxWidth=this._roundNumber(this._range._max/this._unitPerPixel),this._minWidth=parseInt(this._minWidth),this._maxWidth=parseInt(this._maxWidth),"number"==this._dataType&&(this._majorTicksCount=t/this.majorTicksInterval,this._majorTicksCount=Math.floor(this._majorTicksCount)+1,this._majorTicksDistance=parseInt(this._roundNumber(e/(t/this.majorTicksInterval))),this._unitsCount=t/this.minorTicksInterval,this._unitsCount=Math.floor(this._unitsCount)+1,this._unitsDistance=parseInt(this._roundNumber(e/(t/this.minorTicksInterval)))),this._addTicks()},_addTicks:function(){this.host.append("<div id='"+this._id+"TicksContainer' class='jqx-rangeselector-ticks-container'></div>"),this.rangeSelector=P("#"+this._id+"TicksContainer"),this._majorTicksArray=new Array,this._ticksArray=new Array,this._valuesArray=new Array;var e=new String;P("#"+this._id+"TicksContainer").append("<div id='labelPlaceholder' style='visibility: hidden; position: absolute;'></div>");var t=this.rangeSelector.height(),e="number"==this._dataType?this._addNumericTicks(t):this._addDateTicks(t),i=0;this.showLabels&&(i+=P("#labelPlaceholder").outerHeight()+6),"number"!=this._dataType&&this.showGroupLabels&&(i+=P("#labelPlaceholder").outerHeight()+6),"auto"==this.padding&&this.host.css("padding-bottom",i),P("#labelPlaceholder").remove(),P("#"+this._id+"TicksContainer").append(e),this._ticksArray.sort(function(e,t){return e-t});for(var r=1;r<this._ticksArray.length;r++)this._ticksArray[r]=this._roundNumber(this._ticksArray[r]);if(this._valuesArray.sort(function(e,t){return e-t}),"number"==this._dataType)for(r=1;r<this._valuesArray.length;r++)this._valuesArray[r]=this._roundNumber(this._valuesArray[r],"marker",!0);for(r=1;r<this._ticksArray.length;r++)this._ticksArray[r-1]==this._ticksArray[r]&&(this._ticksArray.splice(r,1),this._valuesArray.splice(r,1));this.rtl&&(this._valuesArray=this._valuesArray.reverse())},_addNumericTicks:function(e){for(var t=this,i=new String,r=0,s=this._min,a=this._max,o=0;o<this._majorTicksCount;o++){var h=this._id+"LabelTick"+(o+1);o==this._majorTicksCount-1&&(r=this.host.width());var n=t.showMajorTicks?"visible":"hidden";i+="<div id='"+h+"' class='"+this.toThemeProperty("jqx-rangeselector-ticks")+" "+this.toThemeProperty("jqx-slider-tick-horizontal")+"' style='visibility: "+n+"; left: "+r+"px;'></div>",this._ticksArray.push(r),this._majorTicksArray.push(r);var l=this._id+"Label"+(o+1),d=s;this._valuesArray.push(parseFloat(d.toFixed(4))),t.rtl&&(d=a),d=this._formatOutput(d,this.labelsFormat,1<=this.minorTicksInterval?0:2,"label"),P("#labelPlaceholder").html(d);var u=P("#labelPlaceholder").width(),m=t.showLabels?"visible":"hidden";t.labelsOnTicks&&(i+="<div id='"+l+"' class='"+this.toThemeProperty("jqx-rangeselector-labels")+"' style='visibility: "+m+"; left: "+(r-u/2)+"px; top: "+e+"px;'>"+d+"</div>");var _=r;s+=this.majorTicksInterval,a-=this.majorTicksInterval;var c,r=(s-t._min)/t._unitPerPixel;r=parseInt(r),!this.labelsOnTicks&&o<this._majorTicksCount-1&&(c=Math.abs(_-r),i+="<div id='"+l+"' class='"+this.toThemeProperty("jqx-rangeselector-labels")+"' style='visibility: "+m+"; left: "+(_+c/2-u/2)+"px; top: "+e+"px;'>"+d+"</div>")}for(var r=0,f=this.showMinorTicks?"visible":"hidden",s=this._min,o=0;o<this._unitsCount;o++){h=this._id+"MinorTick"+(o+1);o==this._unitsCount-1&&(r=this.host.width()),i+="<div id='"+h+"' class='"+this.toThemeProperty("jqx-rangeselector-ticks")+" "+this.toThemeProperty("jqx-rangeselector-ticks-minor")+" "+this.toThemeProperty("jqx-slider-tick-horizontal")+"' style='visibility: "+f+"; left: "+r+"px;'></div>";var v=s;-1===this._valuesArray.indexOf(parseFloat(v.toFixed(4)))&&(this._valuesArray.push(parseFloat(v.toFixed(4))),this._ticksArray.push(r));r=((s+=this.minorTicksInterval)-t._min)/t._unitPerPixel;r=parseInt(r)}return i},_getMillisecondsByInterval:function(e){var t={};return"year"==e||e.years?(t.divisor=e.years?e.years:1,31536e6*t.divisor):"month"==e||e.months?(t.divisor=e.months?e.months:1,2592e6*t.divisor):"week"==e||e.weeks?(t.divisor=e.weeks?e.weeks:1,6048e5*t.divisor):"day"==e||e.days?(t.divisor=e.days?e.days:1,864e5*t.divisor):"hour"==e||e.hours?(t.divisor=e.hours?e.hours:1,36e5*t.divisor):"minute"==e||e.minutes?(t.divisor=e.minutes?e.minutes:1,60*t.divisor*1e3):"second"==e||e.seconds?(t.divisor=e.seconds?e.seconds:1,1e3*t.divisor):"millisecond"==e||e.milliseconds?(t.divisor=e.milliseconds?e.milliseconds:1,+t.divisor):t},_addDateTicks:function(_){function e(e){var t="majorTicksInterval"==e?w.majorTicksInterval:w.minorTicksInterval,i=new Object;return"year"==t||t.years?(i.period="year",i.interval=864e5,i.divisor=t.years?t.years:1,i.value=31536e6*i.divisor):"month"==t||t.months?(i.period="month",i.interval=864e5,i.divisor=t.months?t.months:1,i.value=2592e6*i.divisor):"week"==t||t.weeks?(i.period="week",i.interval=864e5,i.divisor=t.weeks?t.weeks:1,i.value=6048e5*i.divisor):"day"==t||t.days?(i.period="day",i.interval=36e5,i.divisor=t.days?t.days:1,i.value=864e5*i.divisor):"hour"==t||t.hours?(i.period="hour",i.interval=6e4,i.divisor=t.hours?t.hours:1,i.value=36e5*i.divisor):"minute"==t||t.minutes?(i.period="minute",i.interval=6e4,i.divisor=t.minutes?t.minutes:1,i.value=60*i.divisor*1e3):"second"==t||t.seconds?(i.period="second",i.interval=1e3,i.divisor=t.seconds?t.seconds:1,i.value=1e3*i.divisor):"millisecond"!=t&&!t.milliseconds||(i.period="millisecond",i.interval=1,i.divisor=t.milliseconds?t.milliseconds:1,i.value=+i.divisor),i}function T(e,t,i){var r=(e-w._min)/w._unitPerPixel;w.rtl&&(e="majorTicksInterval"==t?w._dateMajorTicks[w._dateMajorTicks.length-i]:w._dateMinorTicks[w._dateMinorTicks.length-i]),r=parseInt(r);var s,a,o,h,n,l,d,u,m=e;-1===w._valuesArray.indexOf(m)&&(w._ticksArray.push(r),w._valuesArray.push(m),"majorTicksInterval"==t&&w._majorTicksArray.push(r)),"majorTicksInterval"==t?(s=w._id+"LabelTick"+i,d=w.showMajorTicks?"visible":"hidden",c+="<div id='"+s+"' class='"+w.toThemeProperty("jqx-rangeselector-ticks")+" "+w.toThemeProperty("jqx-slider-tick-horizontal")+"' style='visibility: "+d+"; left: "+r+"px;'></div>",a=m,a=w._formatOutput(a,w.labelsFormat,w.labelPrecision,"label"),P("#labelPlaceholder").html(a),o=P("#labelPlaceholder").width(),h=w._id+"Label"+i,n=w.showLabels?"visible":"hidden",w.labelsOnTicks?w.labelsOnTicks&&(c+="<div id='"+h+"' class='"+w.toThemeProperty("jqx-rangeselector-labels")+"' style='visibility: "+n+"; left: "+(r-o/2)+"px; top: "+_+"px;'>"+a+"</div>"):(l=w._getMillisecondsByInterval(w.majorTicksInterval)/w._unitPerPixel/2,c+="<div id='"+h+"' class='"+w.toThemeProperty("jqx-rangeselector-labels")+"' style='visibility: "+n+"; left: "+(l+r-o/2)+"px; top: "+_+"px;'>"+a+"</div>")):(d=w.showMinorTicks?"visible":"hidden",u=w._id+"MinorTick"+i,c+="<div id='"+u+"' class='"+w.toThemeProperty("jqx-rangeselector-ticks")+" "+w.toThemeProperty("jqx-rangeselector-ticks-minor")+" "+w.toThemeProperty("jqx-slider-tick-horizontal")+"' style='visibility: "+d+"; left: "+r+"px;'></div>")}function t(e,t,i){for(var r,s,a,o,h,n,l,d,u,m,_,c,f,v=0,g=1,p=new Date(w._min).getHours(),k=864e5==t.interval,y=new Array,x=w._min;x<=w._max;x+=t.interval){1!=k||p!=(r=new Date(x).getHours())&&(1==r?s=1:23==r&&(s=-1),x-=36e5*s,p=new Date(x).getHours()),1==(a=x,o=t.period,h=void 0,h=new Date(a),n=h.getDate(),l="year"==o&&0==h.getMonth()&&1==n,d="month"==o&&1==n,u="week"==o&&0==h.getDay(),m="day"==o&&0==h.getHours(),_="hour"==o&&0==h.getMinutes(),c="minute"==o&&0==h.getSeconds(),f="minute"==o&&0==h.getMilliseconds(),l||d||u||m||_||c||f||"millisecond"==o)&&(v%t.divisor==0&&(i?y.push(x):T(x,e,g,t.interval),g++),v++)}return y}var w=this,c=new String;return w._dateMajorTicks=t("majorTicksInterval",e("majorTicksInterval"),!0),w._dateMinorTicks=t("minorTicksInterval",e("minorTicksInterval"),!0),t("majorTicksInterval",e("majorTicksInterval")),t("minorTicksInterval",e("minorTicksInterval")),1==this.showGroupLabels&&this.showLabels&&this._addGroupLabels(P("#labelPlaceholder").height()+_),c},_addGroupLabels:function(e){var t=this,i=new Date(this._min),r=new Date(this._max);if(0<r.getFullYear()-i.getFullYear())var s="year",a=864e5;else if(0<r.getMonth()-i.getMonth())s="month",a=864e5;else{if(!(0<r.getDate()-i.getDate()))return;s="day",a=36e5}for(var o,h,n,l,d,u,m=new String,_=this.toThemeProperty("jqx-rangeselector-group-labels-ticks")+" "+this.toThemeProperty("jqx-slider-tick-horizontal"),c=1,f=this._min;f<this._max;f+=a){var v,g=(u=h=o=void 0,h=new Date(f),n=h.getFullYear(),l=h.getMonth(),d=h.getDate(),u=!0,"year"==s&&0==l&&1==d?o=n:"month"==s&&1==d?(o=P.jqx.dataFormat.formatdate(h,"MMMM"),0==l&&(o=n+" "+o)):"day"==s&&0==h.getHours()?o=P.jqx.dataFormat.formatdate(h,"dddd"):u=!1,{check:u,value:1==u&&t.groupLabelsFormatFunction?t.groupLabelsFormatFunction(o,h):o});1==g.check&&(v=(f-this._min)/this._unitPerPixel,m+="<div class='"+this.toThemeProperty("jqx-rangeselector-labels")+"' style='left: "+v+"px; top: "+e+"px;'><div class='"+_+"'></div><div id='"+this._id+"GroupLabel"+c+"' class='"+this.toThemeProperty("jqx-rangeselector-group-labels")+"' style='margin-left: 5px;'>"+g.value+"</div></div>",c++)}P("#"+this._id+"TicksContainer").append(m)},_updateCursor:function(e,t){var i=this.element.style.cursor,r=this.slider.offset().left,s=r+parseInt(this.slider[0].style.width);r-5<e&&e<r+5||s-5<e&&e<s+5?""!=i&&"auto"!=i||(this.element.style.cursor="e-resize"):"e-resize"==i&&(this.element.style.cursor="auto")},_handleMouseMove:function(e){var t,i=this,r=i.slider,s=e.pageX,a=e.pageY;i._isTouchDevice&&(s=(t=P.jqx.position(e)).left,a=t.top);var o=i._hostOffset.left,h=i._hostWidth;if(i.resizable&&!i.dragging&&"none"==i.resizeDirection&&o<=s&&s<=o+h&&a>=i._hostOffset.top&&a<=i._hostOffset.top+i._hostHeight&&this._updateCursor(s,a),!i.isMouseDown)return!0;if(i._isTouchDevice&&(a<i._hostOffset.top||a>i._hostOffset.top+i._hostHeight))return!0;var n=i._findNearestTick(i._sliderLeftOffset+s-i._mouseDownX);if((_=parseInt(n))<0)return!0;_<0&&(_=0);var l,d,u=parseInt(r[0].style.width);if(1==i.resizable&&!i.dragging){var m=_*i._unitPerPixel+i._min;if("left"==i.resizeDirection||i.isLeftMarkerCaptured){s<o-(k=i.isLeftMarkerCaptured?i.leftMarker.outerWidth():0)&&(s=o-k),o+h+k<s&&(s=o+h+k+1);var _,c=r[0].style.left,f=_-parseInt(c),v=parseInt(u-f);if(l=v,d=parseInt(i._maxWidth),l<parseInt(i._minWidth)||d<l||parseInt(i.rightMarker[0].style.left)<parseInt(i.leftMarker[0].style.left))if(s>i._mouseDownX){if(s=i.sliderRight-i._minWidth-o,u==(v=i._minWidth))return!0;if((_=n=i._findNearestTick(s))<0)return!0;parseInt(c),i._unitPerPixel,i._min;m=_*i._unitPerPixel+i._min}else{if(!(0!=i._maxWidth&&s<i._mouseDownX&&v>i._maxWidth))return!0;if(s=i.sliderRight-i._maxWidth-o,u==(v=i._maxWidth))return!0;if((_=n=i._findNearestTick(s))<0)return!0;parseInt(c),i._unitPerPixel,i._min;m=_*i._unitPerPixel+i._min}i.slider[0].style.left=_+"px",c!=r[0].style.left&&(i.slider[0].style.width=v+"px");var g=i._findNearestTick(_),p=i._valuesArray[i._ticksArray.indexOf(g)];null!=p?(i.leftMarkerValue[0].innerHTML=i._formatOutput(p,i.markersFormat,0,"left"),_!=g&&(i.slider[0].style.left=g+"px")):i.leftMarkerValue[0].innerHTML=i._formatOutput(m,i.markersFormat,0,"left"),i.oldX=s,i.moved=!0}else if("right"==i.resizeDirection||i.isRightMarkerCaptured){var k,y=!1;s<o-(k=i.isRightMarkerCaptured?i.rightMarker.outerWidth():0)&&(s=o-k,0),o+h+k<s&&(s=o+h+k,y=!0);var x=i._sliderInitialWidth,T=i._findNearestTick(x+i._sliderLeftOffset),w=i._findNearestTick(x+s-i._mouseDownX+i._sliderLeftOffset);if(w<0)return!0;(v=x-(f=T-w))<=0&&(f=x,v=0);var M=parseInt(i.element.style.width);0<=i.element.style.width.indexOf("%")&&(M=i.host.width()),(y||i._sliderLeftOffset+v>=M)&&(v=M-i._sliderLeftOffset,0),v>parseInt(this._maxWidth)&&(v=parseInt(this._maxWidth)),v<parseInt(this._minWidth)&&(v=parseInt(this._minWidth)),i.slider[0].style.width=v+"px";var m=(i._sliderLeftOffset+v)*i._unitPerPixel+i._min,b=i._findNearestTick(i._sliderLeftOffset+v),j=i._valuesArray[i._ticksArray.indexOf(b)];null!=j?(i._sliderLeftOffset+v!=b&&(i.slider[0].style.width=b-i._sliderLeftOffset+"px"),i.rightMarkerValue[0].innerHTML=i._formatOutput(j,i.markersFormat,0,"right")):i.rightMarkerValue[0].innerHTML=i._formatOutput(m,i.markersFormat,0,"right"),i.oldX=s}i._layoutShutter(),i._layoutMarkers(),i.moved=!0}1==i.dragging&&(i._moveSlider(_,!0),i.oldX=s)},_moveSlider:function(e,t){this.moved=!0;var i,r,s,a,o,h,n,l=parseInt(this.slider[0].style.width),d=parseInt(e+l),u=this._hostWidth,m=e;m<0&&(e=m=0),u<m+l&&(e=m=u-l),0<=m&&m+l<=u&&(this.slider[0].style.left=m+"px",i=this._findNearestTick(m),r=-1!=this._majorTicksArray.indexOf(i),null!=(s=this._valuesArray[this._ticksArray.indexOf(i)])?(this.leftMarkerValue[0].innerHTML=this._formatOutput(s,this.markersFormat,0,"left"),e!=i&&r&&t&&(this.slider[0].style.left=i+"px",d=parseInt(i+l))):this.leftMarkerValue[0].innerHTML=this._formatOutput(m*this._unitPerPixel+this._min,this.markersFormat,0,"left"),a=this._findNearestTick(d),null!=(o=this._valuesArray[this._ticksArray.indexOf(a)])?(h=-1!=this._majorTicksArray.indexOf(a),this.rightMarkerValue[0].innerHTML=this._formatOutput(o,this.markersFormat,0,"right"),d!=a&&h&&r&&t&&(n=a-i,this.slider[0].style.width=n+"px")):this.rightMarkerValue[0].innerHTML=this._formatOutput((m+l)*this._unitPerPixel+this._min,this.markersFormat,0,"right")),this._layoutShutter(),this._layoutMarkers()},_initSlider:function(){var n=this,e=this.toThemeProperty("jqx-rangeselector-shutter")+" "+this.toThemeProperty("jqx-scrollbar-state-normal");P("#"+this._id+"TicksContainer").append("<div id='"+this._id+"ShutterLeft' class='"+e+"'></div><div id='"+this._id+"Slider' class='"+this.toThemeProperty("jqx-rangeselector-slider")+" "+this.toThemeProperty("jqx-scrollbar-thumb-state-normal")+"'><div class='"+this.toThemeProperty("jqx-rangeselector-inner-slider")+"'></div></div><div id='"+this._id+"ShutterRight' class='"+e+"'></div>"),this.slider=P("#"+this._id+"Slider"),this.shutterLeft=P("#"+this._id+"ShutterLeft"),this.shutterRight=P("#"+this._id+"ShutterRight"),this._hostOffset=this.rangeSelector.offset(),this._hostWidth=this.rangeSelector.width(),this._hostHeight=this.rangeSelector.height();var t=this._hostOffset,i=this._initRange(),r=i.left,s=(i.right-r)/this._unitPerPixel;this.slider[0].style.width=Math.round(s)+"px";var l,d,a=t.left+parseInt((r-this._min)/this._unitPerPixel);if(this.slider.offset({left:a}),this._layoutShutter(),this._initMarkers(),0==this.disabled){this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled")),this.addHandler(this.host,"dragstart.rangeselector"+this._id,function(){return!1}),this.addHandler(P(window),"jqxReady.rangeselector",function(){return n._layoutMarkers(),!1}),this.isSliderCaptured=!1,this.resizeDirection="none",this.isLeftMarkerCaptured=!1,this.isRightMarkerCaptured=!1,this.dragging=!1,this._mouseDownX;var o="mousedown.rangeselector"+this.element.id;this._isTouchDevice&&(o=P.jqx.mobile.getTouchEventName("touchstart")+".rangeselector"+this.element.id),this.addHandler(this.host,o,function(e){n.isMouseDown=!0,n._hostOffset=n.rangeSelector.offset(),n._hostWidth=n.rangeSelector.width(),n._hostHeight=n.rangeSelector.height(),n._sliderLeftOffset=parseInt(n.slider[0].style.left);var t,i=e.pageX,r=e.pageY;n._isTouchDevice&&(i=(t=P.jqx.position(e)).left,r=t.top),n._initialSliderOffset=i-n.slider.offset().left;var s=n.slider.width();n._sliderInitialWidth=s,l=n.slider.offset().left,d=n._sliderInitialWidth,n.initialOffset=l;var a=parseInt(l+d);if(n.oldX=i,n._mouseDownX=i,n.resizeDirection="none",n.sliderRight=a,l-5<i&&i<l+5&&n._heightCheck(r))n.isSliderCaptured=!1,n.dragging=!1,n.resizeDirection="left";else if(a-5<i&&i<a+5&&n._heightCheck(r))n.isSliderCaptured=!1,n.dragging=!1,n.resizeDirection="right";else if(l+5<=i&&i<=a+5&&n._heightCheck(r))n.isSliderCaptured=!0,n.dragging=!0;else if(n.isSliderCaptured=!1,n.dragging=!1,n.moveOnClick){if(n.isLeftMarkerCaptured||n.isRightMarkerCaptured)return!1;var o=n._sliderLeftOffset+n._initialSliderOffset;(o=n._findNearestTick(o))<0&&(o=0);var h=parseInt(n.slider[0].style.width);r>=n.slider.offset().top&&(a<i?n._moveSlider(o-h,!0):n._moveSlider(o,!0))}}),this.addHandler(n.leftMarker,o,function(e){var t;n.leftMarkerAndArrow.addClass(n.toThemeProperty("jqx-fill-state-pressed")),n.oldLeftX=e.pageX,n._isTouchDevice&&(t=P.jqx.position(e),n.oldLeftX=t.left),n._mouseDownX=n.oldLeftX,n.isLeftMarkerCaptured=!0}),this.addHandler(n.rightMarker,o,function(e){var t;n.rightMarkerAndArrow.addClass(n.toThemeProperty("jqx-fill-state-pressed")),n.oldRightX=e.pageX,n._isTouchDevice&&(t=P.jqx.position(e),n.oldRightX=t.left),n._mouseDownX=n.oldRightX,n.isRightMarkerCaptured=!0}),this.addHandler(P(document),"selectstart.rangeselector"+this._id,function(e){if(1==n.isSliderCaptured||1==n.isLeftMarkerCaptured||1==n.isRightMarkerCaptured||1==n.dragging)return e.preventDefault(),!1});var h="mousemove.rangeselector"+this.element.id;this._isTouchDevice&&(h=P.jqx.mobile.getTouchEventName("touchmove")+".rangeselector"+this.element.id),this.addHandler(P(document),h,function(e){n._handleMouseMove(e)});function u(e){try{var t,i=n.moved;n.moved=!1,n.isMouseDown=!1,n.dragging=!1,n.resizeDirection="none",1==n.isLeftMarkerCaptured&&(n.leftMarkerAndArrow.removeClass(n.toThemeProperty("jqx-fill-state-pressed")),n.isLeftMarkerCaptured=!1),1==n.isRightMarkerCaptured&&(n.rightMarkerAndArrow.removeClass(n.toThemeProperty("jqx-fill-state-pressed")),n.isRightMarkerCaptured=!1),i&&(t=n._getValue(),n._raiseEvent("0",{type:"mouse",from:t.from,to:t.to}))}catch(e){}}var m,_;this.addHandler(P(document),"mouseup.rangeselector"+this._id,function(e){u()});try{""==document.referrer&&!window.frameElement||null==window.top||window.top==window.self||(m=function(e){u()},_=null,window.parent&&document.referrer&&(_=document.referrer),_&&-1!=_.indexOf(document.location.host)&&window.top.document&&(window.top.document.addEventListener?window.top.document.addEventListener("mouseup",m,!1):window.top.document.attachEvent&&window.top.document.attachEvent("onmouseup",m)))}catch(e){}}else this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled"));this._moveSlider(parseInt(n.slider[0].style.left)),this.moved=!1},_initMarkers:function(){var e=P("#"+this._id+"TicksContainer"),t=this.toThemeProperty("jqx-rangeselector-markers")+" "+this.toThemeProperty("jqx-disableselect")+" "+this.toThemeProperty("jqx-fill-state-normal");e.append("<div id='"+this._id+"LeftMarker' class='"+t+"'></div><div id='"+this._id+"RightMarker' class='"+t+"'></div>");var i=this.toThemeProperty("jqx-rangeselector-marker-arrow")+" "+this.toThemeProperty("jqx-fill-state-normal");"bottom"==this.markersPosition?i+=" "+this.toThemeProperty("jqx-rangeselector-marker-arrow-bottom"):i+=" "+this.toThemeProperty("jqx-rangeselector-marker-arrow-top"),e.append("<div id='"+this._id+"LeftMarkerArrow' class='"+i+" "+this.toThemeProperty("jqx-rangeselector-marker-left-arrow")+"'></div>"),e.append("<div id='"+this._id+"RightMarkerArrow' class='"+i+" "+this.toThemeProperty("jqx-rangeselector-marker-right-arrow")+"'></div>"),P("#"+this._id+"LeftMarker").append("<div id='"+this._id+"LeftMarkerValue' class='"+this.toThemeProperty("jqx-disableselect")+" "+this.toThemeProperty("jqx-rangeselector-markers-value")+"'></div>"),P("#"+this._id+"RightMarker").append("<div id='"+this._id+"RightMarkerValue' class='"+this.toThemeProperty("jqx-disableselect")+" "+this.toThemeProperty("jqx-rangeselector-markers-value")+"'></div>");var r,s=P("#"+this._id+"LeftMarker, #"+this._id+"RightMarker, #"+this._id+"LeftMarkerArrow, #"+this._id+"RightMarkerArrow"),a=P("#"+this._id+"LeftMarker, #"+this._id+"LeftMarkerArrow"),o=P("#"+this._id+"RightMarker, #"+this._id+"RightMarkerArrow");1==this.showMarkers?s.css("visibility","visible"):s.css("visibility","hidden"),0==this.disabled&&1==this.resizable&&((r=this).addHandler(a,"mouseenter.rangeselector"+this._id,function(e){r.element.style.cursor="pointer",a.addClass(r.toThemeProperty("jqx-fill-state-hover"))}),this.addHandler(a,"mouseleave.rangeselector"+this._id,function(e){r.element.style.cursor="auto",a.removeClass(r.toThemeProperty("jqx-fill-state-hover"))}),this.addHandler(o,"mouseenter.rangeselector"+this._id,function(e){r.element.style.cursor="pointer",o.addClass(r.toThemeProperty("jqx-fill-state-hover"))}),this.addHandler(o,"mouseleave.rangeselector"+this._id,function(e){r.element.style.cursor="auto",o.removeClass(r.toThemeProperty("jqx-fill-state-hover"))})),this.leftMarkerAndArrow=a,this.rightMarkerAndArrow=o,this.leftMarkerArrow=P("#"+this._id+"LeftMarkerArrow"),this.rightMarkerArrow=P("#"+this._id+"RightMarkerArrow"),this.leftMarker=P("#"+this._id+"LeftMarker"),this.rightMarker=P("#"+this._id+"RightMarker"),this.leftMarkerValue=P("#"+this._id+"LeftMarkerValue"),this.rightMarkerValue=P("#"+this._id+"RightMarkerValue");var h=this._initRange();this._updateMarkersValues(h.left,h.right),this._layoutMarkers(),"auto"==this.padding?(this.host.css("padding-left",this.leftMarker[0].offsetWidth),this.host.css("padding-right",this.rightMarker[0].offsetWidth),this.host.css("padding-top",this._leftMarkerHeight+7)):this.host.css("padding",this.padding)},_layoutMarkers:function(){var e,t,i,r,s,a,o;1==this.showMarkers&&(this._hostOffset||(this._hostOffset=this.rangeSelector.offset()),this._leftMarkerHeight||(this._leftMarkerHeight=this.leftMarker.outerHeight(),this._rightMarkerHeight=this.rightMarker.outerHeight()),this._hostOffset.top,e=parseInt(this.slider[0].style.left)+this._hostOffset.left,t=-5,"bottom"==this.markersPosition&&(t=parseInt(this.element.style.height)+4+this._rightMarkerHeight),i=t-this._leftMarkerHeight,r=t-this._rightMarkerHeight,"bottom"==this.markersPosition&&(t=parseInt(this.element.style.height)-6),a=1+e-(s=this.leftMarker[0].offsetWidth)-this._hostOffset.left,this.leftMarker[0].style.left=a+"px",this.leftMarker[0].style.top=i+"px",this.leftMarkerArrow[0].style.left=2+a+s+"px",this.leftMarkerArrow[0].style.top=6+t+"px",o=e+parseInt(this.slider[0].style.width)-this._hostOffset.left,this.rightMarker[0].style.left=o+"px",this.rightMarker[0].style.top=r+"px",this.rightMarkerArrow[0].style.left=7+o+"px",this.rightMarkerArrow[0].style.top=6+t+"px")},_updateMarkersValues:function(e,t){var i=t;this.leftMarkerValue[0].innerHTML=this._formatOutput(e,this.markersFormat,0,"left",!0),this.rightMarkerValue[0].innerHTML=this._formatOutput(i,this.markersFormat,0,"right",!0)},_removeHandlers:function(){var e=this.element.id,t=P("#"+e+"LeftMarker, #"+e+"LeftMarkerArrow"),i=P("#"+e+"RightMarker, #"+e+"RightMarkerArrow"),r="mousemove.rangeselector"+e,s="mousedown.rangeselector"+e;this._isTouchDevice&&(r=P.jqx.mobile.getTouchEventName("touchmove")+".rangeselector"+e,s=P.jqx.mobile.getTouchEventName("touchstart")+".rangeselector"+e),this.removeHandler(P(document),r),this.removeHandler(P(document),"mouseup.rangeselector"+e),this.removeHandler(this.host,s),this.removeHandler(this.host,"click.rangeselector"+e),this.removeHandler(this.host,"dragstart.rangeselector"+e),this.removeHandler(t,"mouseenter.rangeselector"+e),this.removeHandler(t,"mouseleave.rangeselector"+e),this.removeHandler(i,"mouseenter.rangeselector"+e),this.removeHandler(i,"mouseleave.rangeselector"+e),this.removeHandler(P("#"+e+"LeftMarker"),s),this.removeHandler(P("#"+e+"RightMarker"),s),this.removeHandler(P("#"+e+"LeftMarkerValue, #"+e+"RightMarkerValue"),"selectstart.rangeselector"+e)},_heightCheck:function(e){var t=this.slider,i=t.offset().top;return i<=e&&e<=i+t.height()},_checkProperties:function(){(this._range._from<this._min||this._range._from>this._min&&this._range._from>this._max)&&(this._range._from=this._min),(this._range._to>this._max||this._range._to<this._min&&this._range._to<this._max)&&(this._range._to=this._max);var e=this._max-this._min;this._range._min>e&&(this._range._min=e),this._range._max>e&&(this._range._max=e);var t=this._range._to-this._range._from;t<this._range._min?this._range._to=this._range._from+this._range._min:t>this._range._max&&(this._range._to=this._range._from+this._range._max)},_findNearestTick:function(e){for(var t=0,i=Math.abs(e-this._ticksArray[0]),r=1;r<this._ticksArray.length;r++){var s=Math.abs(e-this._ticksArray[r]);s<i&&(i=s,t=r)}return this._ticksArray[t]},_privateProperties:function(){this._min=this._validateInput(this.min),this._max=this._validateInput(this.max),this._range=new Object,this._range._from=this._validateInput(null!=this.range.from?this.range.from:0),this._range._to=this._validateInput(null!=this.range.to?this.range.to:1/0),this._range._min=this._minMaxDate(null!=this.range.min?this.range.min:0),this._range._max=this._minMaxDate(null!=this.range.max?this.range.max:1/0)},_validateInput:function(e){var t;return"number"==typeof e?t=e:"string"==typeof e?t=Date.parse(e):e instanceof Date&&(t=e.getTime()),t},_minMaxDate:function(e){if("number"==typeof e)return e;var t;switch(e){case"millisecond":t=1;break;case"second":t=1e3;break;case"minute":t=6e4;break;case"hour":t=36e5;break;case"day":t=864e5;break;case"week":t=6048e5;break;default:t=e.milliseconds?e.milliseconds:0+e.seconds?1e3*e.seconds:0+e.minutes?6e4*e.minutes:0+e.hours?36e5*e.hours:0+e.days?864e5*e.days:0+e.weeks?6048e5*e.weeks:0}return t},_formatOutput:function(e,t,i,r,s){var a,o;if(this.values||(this.values=new Array),this.values[r]=e,"label"==r&&this.labelsFormatFunction)a="date"==this._dataType?this._roundDate(e):this._roundNumber(e,"label"),a=this.labelsFormatFunction(a);else if("label"!=r&&this.markersFormatFunction)"date"==this._dataType&&(a=this._roundDate(e)),a=this.markersFormatFunction(e,r);else if(t)a="number"==this._dataType?P.jqx.dataFormat.formatnumber(e,t):(a=this._roundDate(e),P.jqx.dataFormat.formatdate(a,t));else{if("date"==this._dataType)throw null==this.labelsFormat&&null==this.markersFormat?o="both labelsFormat and markersFormat":null==this.labelsFormat?o="labelsFormat":null==this.markersFormat&&(o="markersFormat"),new Error("When the data format is date, "+o+" should be set.");a=e.toFixed(i)}return a},_getValue:function(e){var t=this,i=t.minorTicksInterval;function r(e){return"number"===t._dataType?Math.round(e/i)*i:t._roundNumber(e,"marker")}var s,a,o=this.slider,h=o.width(),n=new Object,l=(o.offset().left-this.rangeSelector.offset().left)*this._unitPerPixel+this._min;return n.from=r(l),n.to=r(l+h*this._unitPerPixel),e||1!=this.snapToTicks||(s=this._findNearestTick((n.from-this._min)/this._unitPerPixel),n.from=this._valuesArray[this._ticksArray.indexOf(s)],a=this._findNearestTick((n.to-this._min)/this._unitPerPixel),n.to=this._valuesArray[this._ticksArray.indexOf(a)]),"date"==this._dataType&&(n.from=new Date(n.from),n.to=new Date(n.to)),n},_roundNumber:function(e,t,i){var r=("marker"==t&&1==i&&(e=parseFloat(e)),parseFloat(e));return r},_roundDate:function(e){"number"==typeof e&&(e=new Date(e));var t,i=this._max-this._min;return 12096e5<i?(t=e.getDate(),12<e.getHours()&&(e.setDate(t+1),e.setHours(0),e.setMinutes(0),e.setSeconds(0))):1728e5<i&&(e.setHours(e.getHours()+Math.round(e.getMinutes()/60)),e.setMinutes(0),e.setSeconds(0)),e},_layoutShutter:function(){var e=parseInt(this.slider[0].style.left);this.shutterLeft[0].style.width=e+"px",this.shutterLeft[0].style.left="0px",P.jqx.browser.msie&&P.jqx.browser.version<9&&(this.shutterLeft[0].style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity=75)",this.shutterRight[0].style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity=75)");var t=1+e+parseInt(this.slider[0].style.width);this.shutterRight[0].style.left=t+"px";var i=parseInt(this.element.style.width);0<=this.element.style.width.indexOf("%")&&(i=parseInt(this.host.width()));var r=i-1-e-parseInt(this.slider[0].style.width);r<0&&(r=0),this.shutterRight[0].style.width=1+r+"px",t+1+r<2+i&&(this.shutterRight[0].style.width=2+r+"px"),0==r&&(this.shutterRight[0].style.width="0px")},_initRange:function(){if(this._range._from>this._range._to)throw new Error("jqxRangeSelector: range object initialization error. 'min' should be less than 'max'");return{left:this._range._from,right:this._range._to}}})}(jqxBaseFramework);