!function(D){D.jqx.jqxWidget("jqxDockingLayout","jqxLayout",{}),D.extend(D.jqx._jqxDockingLayout.prototype,{defineInstance:function(){var e={events:["float","dock"]};return this.base&&(this.base.dockingLayout=this),this===D.jqx._jqxDockingLayout.prototype||D.extend(!0,this,e),e},createInstance:function(){var e=this;if(!e.base.host.jqxWindow)throw new Error("jqxDockingLayout: Missing reference to jqxwindow.js.");e._oldIE=D.jqx.browser.msie&&D.jqx.browser.version<9,e._addClasses(),!0!==e.base._initiallyHidden&&(e._createOverlay(),e._createEdgeOverlays())},loadLayout:function(e){if(void 0!==e&&!1===D.isEmptyObject(e)){for(var t=this.base,o=t.element.id,a=t._find(document.body,"."+o+"FloatGroup"),r=0;r<a.length;r++){var n=D(a[r]);n.off(),n.jqxWindow("destroy")}t.loadLayout(e)}},destroy:function(){for(var e=this.base,t=e.element.id,o=e._find(document.body,"."+t+"FloatGroup"),a=0;a<o.length;a++){var r=D(o[a]);r.off(),r.jqxWindow("destroy")}this._removeHandlers(),e.destroy()},addFloatGroup:function(e,t,o,a,r,n,i){var d=this.base,l={type:"floatGroup",width:e,height:t,position:o,items:[],programmaticallyAdded:!0},s={type:a,title:r,content:n,initContent:i};l.items.push(s),d.layout.push(l),d.render()},_raiseEvent:function(e,t){void 0===t&&(t={owner:null});var o=this.events[e];t.owner=this;var a=new D.Event(o);return a.owner=this,a.args=t,a.preventDefault&&a.preventDefault(),this.base.host.trigger(a)},_addClasses:function(){var e=this.base;e.host.addClass(e.toThemeProperty("jqx-docking-layout"))},_removeHandlers:function(){var e=this,t=e.base,o=t.element.id;e.removeHandler(D(document),"mousemove.jqxDockingLayout"+o),e.removeHandler(t.host,"mouseleave.jqxDockingLayout"+o),t._touchDevice&&(e.removeHandler(D(document),"touchmove.jqxDockingLayout"+o),e.removeHandler(D(document),"touchend.jqxDockingLayout"+o))},_removeByDragHandler:function(e,t,o,a,r){void 0===a&&(a=e.args.draggedIndex),void 0===r&&(r=!0);var n=this,i=n.base,d=t.items,l=d[a],s=i._find(t.widget,".jqx-ribbon-content-section")[a],u=i._detachChildNodes(s);o.hasClass("jqx-ribbon")||(o=D(i._find(o,".jqx-ribbon")[0])),n.base._suppressResizeHandler=!0,n._createFloatGroup(e,l.title,u,"documentGroup",t,l),n.base._closeDocumentPanel(a,d,t,o,r),n.base._suppressResizeHandler=!1},_floatTabbedGroup:function(e,t,o){for(var a,r,n=this,i=n.base,d=[],l=D(i._find(t,".jqx-ribbon")[0]),s=i._find(l,".jqx-ribbon-content-section"),u=0;u<e.items.length;u++){var c=e.items[u],y=i._detachChildNodes(s[u]);c.selected&&(a=c.title,r=u),d.push(y)}n._createFloatGroup(o,a,d,"tabbedGroup",e,null,r),n.base._close(e),o&&(o.target.style.cursor="")},_addTabbedGroupHandlers:function(o,t){var a,r=this,n=r.base,e=n.element.id,i=n._find(t,".jqx-layout-window-header")[0],d=!1,l=n._touchDevice?["touchstart","touchend"]:["mousedown","mouseup"];function s(e){!0===d&&!0!==n._clickedToResize&&(r._floatTabbedGroup(o,t,e),d=!1)}r.addHandler(i,l[0]+".jqxDockingLayout"+e,function(e){var t;!1!==o.allowDrag&&(d=!0,e.target.style.cursor="move",n._touchDevice&&(t=e.originalEvent.touches[0],a=document.elementFromPoint(t.pageX,t.pageY)))}),r.addHandler(i,l[1]+".jqxDockingLayout"+e,function(e){d=!1,e.target.style.cursor=""}),n._touchDevice?r.addHandler(D(document),"touchmove.jqxDockingLayout"+e,function(e){!0===n._clickedToResize&&e.preventDefault();var t=e.originalEvent.touches[0];a!==document.elementFromPoint(t.pageX,t.pageY)&&s({pageX:t.pageX,pageY:t.pageY,target:a})}):r.addHandler(i,"mouseleave.jqxDockingLayout"+e,function(e){s({pageX:e.pageX,pageY:e.pageY,target:e.target})})},_floatAutoHideGroup:function(e,t,o,a){var r=this.base._detachChildNodes(o);this._createFloatGroup(a,t,r,"autoHideGroup",e,e),this.base._close(e)},_addAutoHideGroupHandlers:function(o,e,t,a){var r,n=this,i=n.base,d=i.element.id,l=!1,s=i._touchDevice?["touchstart","touchend"]:["mousedown","mouseup"];function u(e){!0===l&&(n._floatAutoHideGroup(o,t,a,e),l=!1,e.target.style.cursor="")}n.addHandler(e,s[0]+".jqxDockingLayout"+d,function(e){var t;!1!==o.parent.allowDrag&&(l=!0,e.target.style.cursor="move",i._touchDevice&&(t=e.originalEvent.touches[0],r=document.elementFromPoint(t.pageX,t.pageY)))}),n.addHandler(e,s[1]+".jqxDockingLayout"+d,function(e){l=!1,e.target.style.cursor=""}),i._touchDevice?n.addHandler(D(document),"touchmove.jqxDockingLayout"+d,function(e){!0===i._clickedToResize&&e.preventDefault();var t=e.originalEvent.touches[0];r!==document.elementFromPoint(t.pageX,t.pageY)&&u({pageX:t.pageX,pageY:t.pageY,target:r})}):n.addHandler(e,"mouseleave.jqxDockingLayout"+d,function(e){u({pageX:e.pageX,pageY:e.pageY,target:e.target})})},_createFloatGroup:function(a,r,e,n,i,d,l){var t,o,s,u,c,y,p,g=this,v=g.base,h=document.createElement("div");if(h.className=v.toThemeProperty("jqx-docking-layout-group-floating")+" "+v.element.id+"FloatGroup",h.innerHTML="<div></div><div></div>",document.body.appendChild(h),h=D(h),"documentGroup"===n)a&&(y=a.args.x,p=a.args.y),t=i.widget.width(),o=i.widget.height(),s=e;else if("tabbedGroup"===n){a&&(y=a.pageX,p=a.pageY),t=i.widget.width(),o=i.widget.height(),s="",u=document.createElement("div");var m=document.createElement("div"),_=document.createElement("ul");_.className="jqx-layout-ribbon-header jqx-layout-ribbon-header-"+(g.rtl?"rtl":"ltr");for(var f=0;f<i.items.length;f++){var q=i.items[f],x=document.createElement("div"),j=document.createElement("li");j.innerHTML=q.title,_.appendChild(j);for(var w=0;w<e[f].length;w++)e[f][w].appendTo(x);m.appendChild(x)}u.appendChild(_),u.appendChild(m),s=u=D(u)}else"autoHideGroup"===n&&(a&&(y=a.pageX,p=a.pageY),t=D(v._find(i.parent.widget,".jqx-ribbon-content")[0]).width(),o=i.parent.widget.height(),s=e);y||p||(c=v.host.offset(),y=(v.host.width()-t)/2+c.left+100,p=(v.host.height()-o)/2+c.top+10),h.on("moved close",function(e){g._hideOverlays();var t=h.current;"moved"===e.type?(t.position.x=e.args.x,t.position.y=e.args.y,t._overlayGroup&&g._updateOverlayGroup(t._overlayGroup),g._clearTextSelection(),g._windowCreate=!1,g._hideOverlays()):(v._raiseEvent("4",{element:h,floatGroup:h.current}),t._overlayGroup&&(t._overlayGroup.removed=!0,g._updateOverlayGroups()),t.removed=!0,v._updateLayout(v.layout))}),h.on("resized",function(e){var t=h.current,o=D(this).offset();t.width=e.args.width,t.height=e.args.height,t.position.x=o.left,t.position.y=o.top,t._overlayGroup&&g._updateOverlayGroup(t._overlayGroup)}),h.jqxWindow({theme:v.theme,title:r,content:s,width:t,maxWidth:null,height:o,maxHeight:null,position:{x:y-100,y:p-10},closeButtonAction:"close",rtl:v.rtl,initContent:function(){var e=this._header,t=v._touchDevice?"touchstart":"mousedown",o="autoHideGroup"===n?i.parent:i;a&&(g._draggedWindow={fromGroup:o,fromPanel:d,title:r,element:h},e.trigger("mousedown",[y,p]),g._windowDragged=!0,g._windowCreate=!0,g._interval(),v.resizable&&(v._overlay[0].style.display="block"),g._showEdgeOverlays()),e.on(t,function(){g._windowDragged=!0,h.current._overlayGroup&&(h.current._overlayGroup.self=!0),g._interval(),v.resizable&&(v._overlay[0].style.display="block"),g._draggedWindow={fromGroup:o,fromPanel:d,title:r,element:h},g._showEdgeOverlays()}),e.on("mouseup",function(){g._hideOverlays(),g._windowCreate=!1}),"tabbedGroup"===n&&(u.jqxRibbon({theme:v.theme,width:"100%",height:"100%",position:"bottom",selectedIndex:l,selectionMode:"click",animationType:"none",rtl:v.rtl,reorder:!0,_suppressReorder:!1,_removeByDrag:!0}),u.on("select",function(e){var t;e.owner.widgetName&&"jqxRibbon"!==e.owner.widgetName||(t=h.current.items[0].items[e.args.selectedIndex],h.jqxWindow("setTitle",t.title),t.selected=!0)}),u.on("unselect",function(e){e.owner.widgetName&&"jqxRibbon"!==e.owner.widgetName||(h.current.items[0].items[e.args.unselectedIndex].selected=!1)}),u.on("reorder",function(e){v._swapPanelsInLayout(h.current.items[0].items,e.args.newIndex,e.args.oldIndex)}),u.on("_removeByDrag",function(e){g._removeByDragHandler(e,h.current.items[0],u),1===h.current.items[0].items.length&&u.jqxRibbon({_removeByDrag:!1})}))}});var b,k,G={type:"floatGroup",parent:{type:"host"},widget:h,position:{x:y-100,y:p-10},index:v.layout.length,width:t,height:o};if(h.current=G,d)G.items=[],v._copyItem(d,G.items),b=G.items,k=G;else{G.items=[{type:"tabbedGroup",items:[],parent:G,widget:u}],b=G.items[0].items;for(var T=0;T<i.items.length;T++)v._copyItem(i.items[T],b);k=G.items[0]}for(var O=0;O<b.length;O++)b[O].parent=k;v.layout.push(G),g._raiseEvent("0",{item:G}),g._trackFloatGroups()},_interval:function(){var e,t,o=this;!0===o._oldIE&&(e=o._overlayWidth,t=o._overlayHeight,o._oldIEInterval=setInterval(function(){o._checkPosition(e,t),o._windowCreate&&o._draggedWindow.element.jqxWindow("move",o._x-50,o._y-10)},1e3))},_createOverlay:function(){var u=this,c=u.base,e=c.element.id;u._overlay=document.createElement("div"),u._overlay.className=c.toThemeProperty("jqx-docking-layout-overlay"),u._overlay.innerHTML='<div class="jqx-docking-layout-overlay-section"><div class="'+c.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-square jqx-docking-layout-overlay-square-invisible")+'"></div><div class="'+c.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-square jqx-widget-content jqx-docking-layout-overlay-square-top")+'"><div class="'+c.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-inner-square")+'"><div class="'+c.toThemeProperty("jqx-widget-header jqx-docking-layout-overlay-inner-square-header")+'"></div><div class="'+c.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-inner-square-content")+'"><div class="'+c.toThemeProperty("jqx-widget-content jqx-fill-state-pressed jqx-docking-layout-overlay-highlight jqx-docking-layout-overlay-highlight-top")+'"></div></div></div></div><div class="'+c.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-square jqx-docking-layout-overlay-square-invisible")+'"></div></div><div class="jqx-docking-layout-overlay-section"><div class="'+c.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-square jqx-widget-content jqx-docking-layout-overlay-square-left")+'"><div class="'+c.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-inner-square")+'"><div class="'+c.toThemeProperty("jqx-widget-header jqx-docking-layout-overlay-inner-square-header")+'"></div><div class="'+c.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-inner-square-content")+'"><div class="'+c.toThemeProperty("jqx-widget-content jqx-fill-state-pressed jqx-docking-layout-overlay-highlight jqx-docking-layout-overlay-highlight-left")+'"></div></div></div></div><div class="'+c.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-square jqx-widget-content jqx-docking-layout-overlay-square-center")+'"><div class="'+c.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-inner-square")+'"><div class="'+c.toThemeProperty("jqx-widget-header jqx-docking-layout-overlay-inner-square-header")+'"></div><div class="'+c.toThemeProperty("jqx-widget-content jqx-fill-state-pressed jqx-docking-layout-overlay-inner-square-content jqx-docking-layout-overlay-highlight")+'"></div></div></div><div class="'+c.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-square jqx-widget-content jqx-docking-layout-overlay-square-right")+'"><div class="'+c.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-inner-square")+'"><div class="'+c.toThemeProperty("jqx-widget-header jqx-docking-layout-overlay-inner-square-header")+'"></div><div class="'+c.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-inner-square-content")+'"><div class="'+c.toThemeProperty("jqx-widget-content jqx-fill-state-pressed jqx-docking-layout-overlay-highlight jqx-docking-layout-overlay-highlight-right")+'"></div></div></div></div></div><div class="jqx-docking-layout-overlay-section"><div class="'+c.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-square jqx-docking-layout-overlay-square-invisible")+'"></div><div class="'+c.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-square jqx-widget-content jqx-docking-layout-overlay-square-bottom")+'"><div class="'+c.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-inner-square")+'"><div class="'+c.toThemeProperty("jqx-widget-header jqx-docking-layout-overlay-inner-square-header")+'"></div><div class="'+c.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-inner-square-content")+'"><div class="'+c.toThemeProperty("jqx-widget-content jqx-fill-state-pressed jqx-docking-layout-overlay-highlight jqx-docking-layout-overlay-highlight-bottom")+'"></div></div></div></div><div class="'+c.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-square jqx-docking-layout-overlay-square-invisible")+'"></div></div>',u._overlay=D(u._overlay);var t=c._find(u._overlay,".jqx-docking-layout-overlay-square-center")[0];u._overlayCenter=D(t.firstChild),u._dropOverlay=document.createElement("div"),u._dropOverlay.className=u.toThemeProperty("jqx-docking-layout-drop-overlay"),u._dropOverlayHelper=D(u._dropOverlay),c._ie7?D("body").append(u._overlay,u._dropOverlay):(c.element.appendChild(u._overlay[0]),c.element.appendChild(u._dropOverlay)),u._overlayWidth=u._overlay[0].offsetWidth,u._overlayHeight=u._overlay[0].offsetHeight,u._overlay[0].style.display="none",u._addOverlayHandlers(),u._squares=[c._find(u._overlay,".jqx-docking-layout-overlay-square-top")[0],c._find(u._overlay,".jqx-docking-layout-overlay-square-left")[0],t,c._find(u._overlay,".jqx-docking-layout-overlay-square-right")[0],c._find(u._overlay,".jqx-docking-layout-overlay-square-bottom")[0]];var r=!(u._sansCenter=[D(c._find(D(u._squares[0]),".jqx-docking-layout-overlay-inner-square")[0]),D(c._find(D(u._squares[1]),".jqx-docking-layout-overlay-inner-square")[0]),D(c._find(D(u._squares[3]),".jqx-docking-layout-overlay-inner-square")[0]),D(c._find(D(u._squares[4]),".jqx-docking-layout-overlay-inner-square")[0])]);function n(e,t,o,a){u._dropOverlay.style.display="block",u._dropOverlay.style.width=e+"px",u._dropOverlay.style.height=t+"px",D(u._dropOverlay).offset({left:o,top:a})}function o(e){var t,o,a;e=u._closest(e,"jqx-docking-layout-overlay-square"),r=e,D(c._find(e,".jqx-docking-layout-overlay-inner-square")[0]).hasClass("jqx-fill-state-disabled")||(t=u._dropToGroup.element.width(),o=u._dropToGroup.element.height(),a=u._dropToGroup.element.offset(),e.hasClass("jqx-docking-layout-overlay-square-top")?n(t,o/2,a.left,a.top):e.hasClass("jqx-docking-layout-overlay-square-left")?n(t/2,o,a.left,a.top):e.hasClass("jqx-docking-layout-overlay-square-center")&&!u._overlayCenter.hasClass("jqx-docking-layout-square-disabled")?n(t,o,a.left,a.top):e.hasClass("jqx-docking-layout-overlay-square-right")?n(t/2,o,a.left+t/2,a.top):e.hasClass("jqx-docking-layout-overlay-square-bottom")?n(t,o/2,a.left,a.top+o/2):c._touchDevice&&(u._dropOverlay.style.display="none",r=!1))}function a(e){var t=u._dropToGroup.settings;if(D(c._find(e,".jqx-docking-layout-overlay-inner-square")[0]).hasClass("jqx-fill-state-disabled"))u._hideOverlays();else{if(e.hasClass("jqx-docking-layout-overlay-square-top"))u._dropHandler(0,"vertical","height","top");else if(e.hasClass("jqx-docking-layout-overlay-square-left"))u._dropHandler(0,"horizontal","width","left");else if(e.hasClass("jqx-docking-layout-overlay-square-center")){var o,a,r=u._getDraggedWindowInformation(),n=r.title,i=r.content;if("documentGroup"===t.type?(o=t.widget,a="documentPanel"):"tabbedGroup"===t.type&&(o="floatGroup"===t.parent.type?t.widget:D(c._find(t.widget,".jqx-ribbon")[0]),a="layoutPanel"),"layoutGroup"===t.type)u._dropToEmptyLayoutGroup(r);else for(var d=0;d<n.length;d++){o.jqxRibbon({_suppressReorder:!0}),o.jqxRibbon("addAt",c._find(o,".jqx-ribbon-content-section").length,{title:n[d],content:i[d]},!0);var l=t.items.length,s={type:a,title:n[d],parent:t,index:l,detachedContent:r.content[d],docked:!0};t.items.push(s),c._addRightClickHandler(D(c._find(o,".jqx-ribbon-item")[l]),{current:s}),o.jqxRibbon({_suppressReorder:!1})}"floatGroup"===t.parent.type&&t.widget.jqxRibbon({_removeByDrag:!0}),u._clearTextSelection(),u._raiseEvent("1",{position:"center",item:t})}else e.hasClass("jqx-docking-layout-overlay-square-right")?u._dropHandler(1,"horizontal","width","right"):e.hasClass("jqx-docking-layout-overlay-square-bottom")&&u._dropHandler(1,"vertical","height","bottom");u._removeFloatGroupObject(u._draggedWindow.element.current),u._draggedWindow.element.remove(),u._hideOverlays()}}c._touchDevice?(u.addHandler(D(document),"touchmove.jqxDockingLayout"+e,function(e){var t;u._windowDragged&&(e.preventDefault(),t=e.originalEvent.touches[0],o(D(document.elementFromPoint(t.pageX,t.pageY))))}),u.addHandler(D(document),"touchend.jqxDockingLayout"+e,function(){!1!==r&&(a(r),r=!1)})):D.each(u._squares,function(){u.addHandler(this,"mouseenter.jqxDockingLayout"+e,function(){o(D(this))}),u.addHandler(this,"mouseleave.jqxDockingLayout"+e,function(){u._dropOverlay.style.display="none"}),u.addHandler(this,"mouseup.jqxDockingLayout"+e,function(){a(D(this))})})},_addOverlayHandlers:function(){var o=this,a=o._overlayWidth,r=o._overlayHeight;o.base._touchDevice?o.addHandler(D(document),"touchmove.jqxDockingLayout"+o.base.element.id,function(e){var t=e.originalEvent.touches[0];o._x=t.pageX,o._y=t.pageY,o._windowDragged&&!o._oldIE&&(o._checkPosition(a,r),o._windowCreate&&o._draggedWindow.element.jqxWindow("move",t.pageX-50,t.pageY-10))}):o.addHandler(D(document),"mousemove.jqxDockingLayout"+o.base.element.id,function(e){o._x=e.pageX,o._y=e.pageY,o._windowDragged&&!o._oldIE&&(o._checkPosition(a,r),o._windowCreate&&o._draggedWindow.element.jqxWindow("move",e.pageX-50,e.pageY-10))})},_checkPosition:function(e,t){for(var o=this,a=o.base,r=o._x,n=o._y,i=0;i<a._overlayGroups.length;i++){var d=a._overlayGroups[i];if(!d.self){var l=d.width,s=d.height,u=d.offset,c=u.left,y=u.top;if(c<=r&&r<=c+l&&y<=n&&n<=y+s){if(("documentGroup"===d.settings.type&&"documentGroup"===o._draggedWindow.fromGroup.type||"tabbedGroup"===d.settings.type&&("tabbedGroup"===o._draggedWindow.fromGroup.type||"autoHideGroup"===o._draggedWindow.fromGroup.type)||"layoutGroup"===d.settings.type)&&!1!==d.settings.allowDrop)o._overlayCenter.removeClass(a.toThemeProperty("jqx-fill-state-disabled"));else if(o._overlayCenter.addClass(a.toThemeProperty("jqx-fill-state-disabled")),"floatGroup"===d.settings.parent.type)return;for(var p=0;p<o._sansCenter.length;p++)"floatGroup"===d.settings.parent.type?o._sansCenter[p].addClass(a.toThemeProperty("jqx-fill-state-disabled")):o._sansCenter[p].removeClass(a.toThemeProperty("jqx-fill-state-disabled"));return o._overlay[0].style.display="block",o._overlay.offset({left:parseInt(c+l/2-e/2,10),top:parseInt(y+s/2-t/2,10)}),void(o._dropToGroup=d)}}}o._overlay[0].style.display="none"},_dropHandler:function(e,t,o,a){var r,n,i=this,d=i.base,l=i._dropToGroup.settings,s=l.parent,u=i._getDraggedWindowInformation(),c=u.title,y=u.content,p=u.groupType,g=u.itemType,v=[];if(s.orientation===t){r=l.index+e,(n={type:p,parent:s})[o]=i._draggedWindow.element[o]();for(var h=0;h<c.length;h++)v.push({type:g,title:c[h],parent:n,prevent:!0,selected:i._getFloatGroupItemSelection(h),detachedContent:y[h],docked:!0});n.items=v,i._setOptimalDimension(o,n,l),s.items.splice(r,0,n)}else{var m,_="width"===o?(m="height","minHeight"):(m="width","minWidth"),f={type:"layoutGroup",orientation:t,parent:l.parent,index:l.index};f[m]=l[m],l[_]&&(f[_]=l[_]),l.parent.items.splice(l.index,1),l.parent.items.splice(l.index,0,f),n={type:p,parent:l.parent=f};for(var q=0;q<c.length;q++)v.push({type:g,title:c[q],parent:n,prevent:!0,selected:i._getFloatGroupItemSelection(q),detachedContent:y[q],docked:!0});n.items=v,delete l[m],l[o]="50%",n[o]="50%",f.items=[l],f.items.splice(0+e,0,n)}d.render();for(var x=d._find(n.widget,".jqx-ribbon-content-section"),j=0;j<x.length;j++)for(var w=D(x[j]),b=y[j],k=0;k<b.length;k++)y[j][k].appendTo(w);i._clearTextSelection(),d._raiseEvent("1",{item:l}),i._raiseEvent("1",{position:a,item:n})},_setOptimalDimension:function(e,t,o){var a,r="width"===e?"minWidth":"minHeight",n=o[r]||this.base["minGroup"+e.charAt(0).toUpperCase()+e.slice(1)],i=o.parent.widget[e](),d=parseFloat(o[e])-n/i*100,l=t[e]/i*100;d<l?(t[e]=parseFloat(o[e])/2+"%",t[r]=parseInt(parseFloat(t[e])/100*i,10),o[e]=parseFloat(o[e])-parseFloat(t[e])+"%",(a=parseInt(parseFloat(o[e])/100*i,10))<n&&(o[r]=a)):(t[e]=l+"%",o[e]=parseFloat(o[e])-l+"%")},_dropToEmptyLayoutGroup:function(e){var t=this._dropToGroup.settings,o={type:e.groupType,items:[],parent:t},a=e.content;"horizontal"===t.orientation?o.width="100%":"vertical"===t.orientation&&(o.height="100%");for(var r=0;r<e.title.length;r++){var n={type:e.itemType,title:e.title[r],parent:o,prevent:!0,selected:this._getFloatGroupItemSelection(r),detachedContent:a[r],docked:!0};o.items.push(n)}t.items.push(o),this.base.render();for(var i=this.base._find(o.widget,".jqx-ribbon-content-section"),d=0;d<i.length;d++)for(var l=0;l<a[d].length;l++)a[d][l].appendTo(i[d])},_getFloatGroupItemSelection:function(e){var t=!!this._draggedWindow.fromPanel||this._draggedWindow.element.current.items[0].items[e].selected;return t},_createEdgeOverlays:function(){function e(e){var t="left"===e||"right"===e?"horizontal":"vertical",o='<div class="'+d.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-mini-window-edge-"+t)+'"><div class="'+d.toThemeProperty("jqx-widget-header jqx-docking-layout-overlay-inner-square-header jqx-docking-layout-overlay-inner-square-header-"+t)+'"></div><div class="'+d.toThemeProperty("jqx-widget-content jqx-fill-state-pressed jqx-docking-layout-overlay-inner-square-content jqx-docking-layout-overlay-inner-square-content-"+t)+'"></div></div>',a='<div class="'+d.toThemeProperty("jqx-docking-layout-overlay-square-edge-arrow-container jqx-docking-layout-overlay-square-edge-arrow-container-"+t)+'"><div class="'+d.toThemeProperty("jqx-fill-state-pressed jqx-docking-layout-overlay-square-edge-arrow jqx-docking-layout-overlay-square-edge-arrow-"+e)+'"></div></div>',r="left"===e||"top"===e?o+a:a+o,n=document.createElement("div");return n.className=d.toThemeProperty("jqx-widget-content jqx-docking-layout-overlay-square jqx-docking-layout-overlay-square-edge"),n.innerHTML='<div class="'+d.toThemeProperty("jqx-docking-layout-overlay-inner-square-edge")+'">'+r+"</div>",d._ie7?document.body.appendChild(n):d.element.appendChild(n),i._edgeOverlays.push(n),D(n)}var i=this,d=i.base;i._edgeOverlays=[],i._leftOverlay=e("left"),i._rightOverlay=e("right"),i._topOverlay=e("top"),i._bottomOverlay=e("bottom"),i._addEdgeOverlaysHandlers()},_addEdgeOverlaysHandlers:function(){function t(e,t,o,a){r._dropOverlay.style.display="block",r._dropOverlay.style.width=e,r._dropOverlay.style.height=t,D(r._dropOverlay).offset({left:o,top:a})}var o,r=this,a=r.base,e=a.element.id,n=!1;function i(e){switch(o=a.host.offset(),e=r._closest(D(e),"jqx-docking-layout-overlay-square-edge")[0],n=e){case r._leftOverlay[0]:t("100px",a.host.height()+"px",o.left,o.top);break;case r._rightOverlay[0]:t("100px",a.host.height()+"px",o.left+a.host.width()-100,o.top);break;case r._topOverlay[0]:t(a.host.width()+"px","100px",o.left,o.top);break;case r._bottomOverlay[0]:t(a.host.width()+"px","100px",o.left,o.top+a.host.height()-100);break;default:a._touchDevice&&(n=!1)}}function d(e){switch(e){case r._leftOverlay[0]:r._dropToEdge("left",0,"horizontal","width");break;case r._rightOverlay[0]:r._dropToEdge("right",a.layout[0].items.length-1,"horizontal","width");break;case r._topOverlay[0]:r._dropToEdge("top",0,"vertical","height");break;case r._bottomOverlay[0]:r._dropToEdge("bottom",a.layout[0].items.length-1,"vertical","height")}}a._touchDevice?(r.addHandler(D(document),"touchmove.jqxDockingLayout"+e,function(e){var t;r._windowDragged&&(e.preventDefault(),t=e.originalEvent.touches[0],i(D(document.elementFromPoint(t.pageX,t.pageY))))}),r.addHandler(D(document),"touchend.jqxDockingLayout"+e,function(){!1!==n&&(d(n),n=!1)})):D.each(r._edgeOverlays,function(){r.addHandler(this,"mouseenter.jqxDockingLayout"+e,function(){i(this)}),r.addHandler(this,"mouseleave.jqxDockingLayout"+e,function(){r._dropOverlay.style.display="none"}),r.addHandler(this,"mouseup.jqxDockingLayout"+e,function(){d(this)})})},_dropToEdge:function(e,t,o,a){var r,n=this,i=n.base,d=i.layout[0],l=n._getDraggedWindowInformation(),s=l.title,u=l.content,c=l.groupType,y=l.itemType,p=[];if(n._removeFloatGroupObject(n._draggedWindow.element.current),d.orientation===o){(m={type:c,parent:d})[a]=n._draggedWindow.element[a]();for(var g=0;g<s.length;g++)p.push({type:y,title:s[g],parent:m,prevent:!0,selected:n._getFloatGroupItemSelection(g),detachedContent:u[g],docked:!0});m.items=p,r=d.items[t],n._setOptimalDimension(a,m,r),"left"===e||"top"===e?d.items.splice(t,0,m):d.items.push(m)}else{"width"===a?v="height":v="width";for(var v,h={type:"layoutGroup",orientation:o,parent:d.parent,index:d.index},m={type:c,parent:h},_=0;_<s.length;_++)p.push({type:y,title:s[_],parent:m,prevent:!0,selected:n._getFloatGroupItemSelection(_),detachedContent:u[_],docked:!0});m.items=p,delete d[v],delete m[v],m[a]="50%",d[a]="50%",(d.parent=h).items="left"===e||"top"===e?[m,d]:[d,m],i.layout[0]=h,r=d}i.render();for(var f=i._find(m.widget,".jqx-ribbon-content-section"),q=0;q<f.length;q++)for(var x=0;x<u[q].length;x++)u[q][x].appendTo(f[q]);n._clearTextSelection(),i._raiseEvent("1",{item:r}),n._raiseEvent("1",{position:e+"-edge",item:m}),n._draggedWindow.element.remove(),n._hideOverlays()},_showEdgeOverlays:function(){var e=this,t=e.base,o=t.host.width(),a=t.host.height(),r=t.host.offset(),n=!0,i=!0,d=!0,l=!0;!function e(t){var o,a,r;t.items&&0!==t.items.length&&(o=t.orientation,a=t.items[0],r=t.items[t.items.length-1],"horizontal"===o?("autoHideGroup"===a.type?n=n&&!1:"layoutGroup"===a.type&&e(a),"autoHideGroup"===r.type?i=i&&!1:"layoutGroup"===r.type&&e(r)):"vertical"===o&&("autoHideGroup"===a.type?d=d&&!1:"layoutGroup"===a.type&&e(a),"autoHideGroup"===r.type?l=l&&!1:"layoutGroup"===r.type&&e(r)))}(t.layout[0]),n&&(e._leftOverlay[0].style.display="block"),i&&(e._rightOverlay[0].style.display="block"),d&&(e._topOverlay[0].style.display="block"),l&&(e._bottomOverlay[0].style.display="block"),e._leftOverlay.offset({left:r.left+5,top:r.top+a/2-20}),e._rightOverlay.offset({left:r.left+o-40,top:r.top+a/2-20}),e._topOverlay.offset({left:r.left+o/2-20,top:r.top+5}),e._bottomOverlay.offset({left:r.left+o/2-20,top:r.top+a-40})},_hideOverlays:function(){var e=this,t=e.base;!(e._windowDragged=!1)===e._oldIE&&clearInterval(e._oldIEInterval),t.resizable&&setTimeout(function(){e.base._overlay[0].style.display="none"},0),e._overlay[0].style.display="none";for(var o=0;o<e._edgeOverlays.length;o++)e._edgeOverlays[o].style.display="none";e._dropOverlay.style.display="none"},_getDraggedWindowInformation:function(){var e,t,o=this,a=o.base,r=[],n=[];if(o._draggedWindow.fromPanel)r.push(o._draggedWindow.title),n.push(a._detachChildNodes(a._find(o._draggedWindow.element,".jqx-window-content")[0]));else for(var i=a._find(o._draggedWindow.element,".jqx-ribbon-content-section"),d=0;d<o._draggedWindow.element.current.items[0].items.length;d++){var l=o._draggedWindow.element.current.items[0].items[d];r.push(l.title),n.push(a._detachChildNodes(i[d]))}return t="documentGroup"===o._draggedWindow.fromGroup.type?(e="documentGroup","documentPanel"):(e="tabbedGroup","layoutPanel"),{title:r,content:n,groupType:e,itemType:t}},_removeFloatGroupObject:function(e){var t=this.base;e.removed=!0,t._updateLayout(t.layout)},_trackFloatGroups:function(){for(var e=this.base,t=1;t<e.layout.length;t++){var o,a,r=e.layout[t];"tabbedGroup"===r.items[0].type&&(a={element:o=r.items[0].widget,width:o.width(),height:o.height(),offset:o.offset(),settings:r.items[0]},r._overlayGroup=a,e._overlayGroups.push(a))}},_updateOverlayGroup:function(e){var t;e&&(t=e.element,e.width=t.width(),e.height=t.height(),e.offset=t.offset(),e.self=!1)},_updateOverlayGroups:function(){for(var e=this.base._overlayGroups,t=e.length-1;0<=t;t--){!0===e[t].removed&&e.splice(t,1)}},_clearTextSelection:function(){try{document.selection?document.selection.empty():window.getSelection&&(window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges())}catch(e){}},_closest:function(e,t){if(e.hasClass(t))return e;for(var o=D(e[0].parentNode);null!==o[0]&&"#document"!==o[0].nodeName;){if(o.hasClass(t))return o;o=D(o[0].parentNode)}}})}(jqxBaseFramework);