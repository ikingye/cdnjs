!function(p){p.jqx.jqxWidget("jqxValidator","",{}),p.extend(p.jqx._jqxValidator.prototype,{defineInstance:function(){var t={rules:null,scroll:!0,focus:!0,scrollDuration:300,scrollCallback:null,position:"right",arrow:!0,animation:"fade",animationDuration:150,closeOnClick:!0,onError:null,onSuccess:null,ownerElement:null,_events:["validationError","validationSuccess"],hintPositionOffset:5,_inputHint:[],rtl:!1,hintType:"tooltip"};return this===p.jqx._jqxValidator.prototype||p.extend(!0,this,t),t},createInstance:function(){"label"==this.hintType&&150==this.animationDuration&&(this.animationDuration=0),this._configureInputs(),this._removeEventListeners(),this._addEventListeners()},destroy:function(){this._removeEventListeners(),this.hide()},validate:function(n){var r,o,s,a,l=!0,h=1/0,u=[];this.updatePosition();for(var d=this,f=0,t=0;t<this.rules.length;t+=1)"function"==typeof this.rules[t].rule&&f++;this.positions=new Array;for(t=0;t<this.rules.length;t+=1){var e;p(this.rules[t].input);"function"==typeof this.rules[t].rule?this._validateRule(this.rules[t],function(t,e){var i;0==(r=t)&&(l=!1,p(e.input),a=p(e.input),u.push(a),(i=a.offset())&&(o=i.top)<h&&(h=o,s=a)),0==--f&&"function"==typeof n&&(d._handleValidation(l,h,s,u),n&&n(l))}):r=this._validateRule(this.rules[t]),0==r&&(l=!1,a=p(this.rules[t].input),u.push(a),(e=a.offset())&&(o=e.top)<h&&(h=o,s=a))}return 0==f?(this._handleValidation(l,h,s,u),l):void 0},validateInput:function(t){for(var e=this._getRulesForInput(t),i=!0,n=0;n<e.length;n+=1)this._validateRule(e[n])||(i=!1);return i},hideHint:function(t){for(var e=this._getRulesForInput(t),i=0;i<e.length;i+=1)this._hideHintByRule(e[i])},hide:function(){for(var t=0;t<this.rules.length;t+=1)this.rules[t],this._hideHintByRule(this.rules[t])},updatePosition:function(){var t;this.positions=new Array;for(var e=0;e<this.rules.length;e+=1)(t=this.rules[e]).hint&&this._hintLayout(t.hint,p(t.input),t.position,t)},_getRulesForInput:function(t){for(var e=[],i=0;i<this.rules.length;i+=1)this.rules[i].input===t&&e.push(this.rules[i]);return e},_validateRule:function(i,n){var r,o=p(i.input),t=!0,s=this,e=!1;return"function"==typeof i.rule&&1==(e=i.rule.call(this,o,function(t){if(t)s._hideHintByRule(i),n&&n(!0,i);else{var e=s.animation;if(s.animation=null,i.hint&&s._hideHintByRule(i),"none"==p(o).css("display"))return void s._hideHintByRule(i);if(0==p(o).parents().length)return void s._hideHintByRule(i);r=i.hintRender.apply(s,[i.message,o]),s._hintLayout(r,o,i.position,i),s._showHint(r),i.hint=r,s._removeLowPriorityHints(i),n&&n(!1,i),s.animation=e}}))&&n&&n(!0,i),"function"==typeof i.rule&&0==e?("function"!=typeof i.hintRender||i.hint||this._higherPriorityActive(i)||!o.is(":visible")||(r=i.hintRender.apply(this,[i.message,o]),this._removeLowPriorityHints(i),this._hintLayout(r,o,i.position,i),this._showHint(r),i.hint=r),t=!1,n&&n(!1,i)):this._hideHintByRule(i),t},_hideHintByRule:function(t){function e(){if("label"==r.hintType){var t=r;if("top"==t.position||"left"==t.position){if(n.prev().hasClass(".jqx-validator-error-label"))return}else if(n.next().hasClass(".jqx-validator-error-label"))return;"input"!=n[0].nodeName.toLowerCase()&&0<n.find("input").length?(0<n.find(".jqx-input").length?n.find(".jqx-input").removeClass(t.toThemeProperty("jqx-validator-error-element")):0<n.find(".jqx-text-area").length?n.find(".jqx-text-area").removeClass(t.toThemeProperty("jqx-validator-error-element")):n.is(".jqx-checkbox")&&n.find(".jqx-checkbox-default").removeClass(t.toThemeProperty("jqx-validator-error-element")),n.is(".jqx-radiobutton")?n.find(".jqx-radiobutton-default").removeClass(t.toThemeProperty("jqx-validator-error-element")):n.removeClass(t.toThemeProperty("jqx-validator-error-element"))):n.removeClass(t.toThemeProperty("jqx-validator-error-element"))}}var i,n=p(t.input),r=this;t&&((i=t.hint)&&(this.positions&&this.positions[Math.round(i.offset().top)+"_"+Math.round(i.offset().left)]&&(this.positions[Math.round(i.offset().top)+"_"+Math.round(i.offset().left)]=null),"fade"===this.animation?i.fadeOut(this.animationDuration,function(){i.remove(),e()}):(i.remove(),e())),t.hint=null)},_handleValidation:function(t,e,i,n){t?(this._raiseEvent(1),"function"==typeof this.onSuccess&&this.onSuccess()):(this._scrollHandler(e),this.focus&&i.focus(),this._raiseEvent(0,{invalidInputs:n}),"function"==typeof this.onError&&this.onError(n))},_scrollHandler:function(t){var e;this.scroll&&(e=this,p("html,body").animate({scrollTop:t},this.scrollDuration,function(){"function"==typeof e.scrollCallback&&e.scrollCallback.call(e)}))},_higherPriorityActive:function(t){for(var e,i=!1,n=this.rules.length-1;0<=n;--n){if(e=this.rules[n],i&&e.input===t.input&&e.hint)return!0;e===t&&(i=!0)}return!1},_removeLowPriorityHints:function(t){for(var e,i=!1,n=0;n<this.rules.length;n+=1)e=this.rules[n],i&&e.input===t.input&&this._hideHintByRule(e),e===t&&(i=!0)},_getHintRuleByInput:function(t){for(var e,i=0;i<this.rules.length;i+=1)if(e=this.rules[i],p(e.input)[0]===t[0]&&e.hint)return e;return null},_removeEventListeners:function(){for(var t,e,i,n=0;n<this.rules.length;n+=1){i=(t=this.rules[n]).action.split(","),e=p(t.input);for(var r=0;r<i.length;r+=1)this.removeHandler(e,p.trim(i[r])+".jqx-validator")}},_addEventListeners:function(){var t,e,i,n,r;0<this.host.parents(".jqx-window").length&&(n=function(){i.updatePosition()},r=(i=this).host.parents(".jqx-window"),this.addHandler(r,"closed",function(){i.hide()}),this.addHandler(r,"moved",n),this.addHandler(r,"moving",n),this.addHandler(r,"resized",n),this.addHandler(r,"resizing",n),this.addHandler(p(document.parentWindow),"scroll",function(){i.scroll&&n()}));for(var o=0;o<this.rules.length;o+=1)t=this.rules[o],e=p(t.input),this._addListenerTo(e,t)},_addListenerTo:function(t,e){var i=this,n=e.action.split(","),r=!1;this._isjQWidget(t)&&(r=!0);for(var o=0;o<n.length;o+=1){var s=p.trim(n[o]);!r||"blur"!=s&&"focus"!=s||t&&"input"!=t[0].nodeName.toLowerCase()&&(t=t.find("input")),this.addHandler(t,s+".jqx-validator",function(t){i._validateRule(e)})}},_configureInputs:function(){this.rules=this.rules||[];for(var t=0;t<this.rules.length;t+=1)this._handleInput(t)},_handleInput:function(t){var e=this.rules[t];e.position||(e.position=this.position),e.message||(e.message="Validation Failed!"),e.action||(e.action="blur"),e.hintRender||(e.hintRender=this._hintRender),e.rule?this._handleRule(e):e.rule=null},_handleRule:function(t){var i,n,e=t.rule,r=!1;if("string"==typeof e?(0<=e.indexOf("=")&&(e=e.split("="),n=e[1].split(","),e=e[0]),(i=this["_"+e])?t.rule=function(t,e){return i.apply(this,[t].concat(n))}:r=!0):"function"!=typeof e?r=!0:t.rule=e,r)throw new Error("Wrong parameter!")},_required:function(t){switch(this._getType(t)){case"jqx-input-inner":if(0<t.find("input").length)return""!==p.trim(t.find("input").val());break;case"textarea":case"password":case"jqx-input":case"jqx-text-area":case"text":var e=p.data(t[0]);if(e.jqxMaskedInput){var i=t.jqxMaskedInput("promptChar");return(n=t.jqxMaskedInput("value"))&&n.indexOf(i)<0}return e.jqxNumberInput?""!==t.jqxNumberInput("inputValue"):!!e.jqxDateTimeInput||""!==p.trim(t.val());case"checkbox":case"radio":return t.is(":checked");case"jqx-check-box":case"jqx-radio-button":return t[0].val();case"jqxCheckBox":case"jqxcheckbox":case"jqxradiobutton":case"jqxRadioButton":var n;return!0===(n=t.find("input").val())||1===n||"true"===n?!0:!1;case"div":return t.is(".jqx-checkbox")?t.jqxCheckBox("checked"):!!t.is(".jqx-radiobutton")&&t.jqxRadioButton("checked")}return!1},_notNumber:function(t){return this._validateText(t,function(t){if(""==t)return!0;return!/\d/.test(t)})},_startWithLetter:function(t){return this._validateText(t,function(t){if(""==t)return!0;return!/\d/.test(t.substring(0,1))})},_number:function(t){return this._validateText(t,function(t){if(""==t)return!0;var e=new Number(t);return!isNaN(e)&&isFinite(e)})},_phone:function(t){return this._validateText(t,function(t){if(""==t)return!0;return/^\(\d{3}\)(\d){3}-(\d){4}$/.test(t)})},_length:function(t,e,i){return this._minLength(t,e)&&this._maxLength(t,i)},_maxLength:function(t,e){return e=parseInt(e,10),this._validateText(t,function(t){return t.length<=e})},_minLength:function(t,e){return e=parseInt(e,10),this._validateText(t,function(t){return t.length>=e})},_email:function(t){return this._validateText(t,function(t){if(""==t)return!0;return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)})},_zipCode:function(t){return this._validateText(t,function(t){if(""==t)return!0;return/^(^\d{5}$)|(^\d{5}-\d{4}$)|(\d{3}-\d{2}-\d{4})$/.test(t)})},_ssn:function(t){return this._validateText(t,function(t){if(""==t)return!0;return/\d{3}-\d{2}-\d{4}/.test(t)})},_validateText:function(t,e){return!!this._isTextInput(t)&&e(this._isjQWidget(t)&&0<t.find("input").length?t.find("input").val():t.val())},_isjQWidget:function(t){var e=p.data(t[0]);return!!(e.jqxMaskedInput||e.jqxNumberInput||e.jqxDateTimeInput)||(0<=t[0].tagName.toLowerCase().indexOf("jqx")||(0<=t[0].tagName.toLowerCase().indexOf("jqx-input")||(0<=t[0].tagName.toLowerCase().indexOf("jqx-password-input")||(0<=t[0].tagName.toLowerCase().indexOf("jqx-complex-input")||(0<=t[0].tagName.toLowerCase().indexOf("jqx-formatted-input")||(0<=t[0].tagName.toLowerCase().indexOf("jqx-masked-input")||(0<=t[0].tagName.toLowerCase().indexOf("jqx-date-time-input")||(0<=t[0].tagName.toLowerCase().indexOf("jqx-number-input")||(0<=t[0].tagName.toLowerCase().indexOf("jqx-check-box")||(0<=t[0].tagName.toLowerCase().indexOf("jqx-radio-button")||(0<=t[0].tagName.toLowerCase().indexOf("jqxcheckbox")||0<=t[0].tagName.toLowerCase().indexOf("angular"))))))))))))},_isTextInput:function(t){var e=this._getType(t);return"text"===e||"textarea"===e||"password"===e||"jqx-input-inner"===e||t.is(".jqx-input")||t.is(".jqx-text-area")},_getType:function(t){if(t[0]){var e=t[0].tagName.toLowerCase();return"textarea"===e?"textarea":t.is(".jqx-input")?"jqx-input":t.is(".jqx-text-area")?"jqx-text-area":0<t.find(".jqx-input").length?"jqx-input-inner":"input"===e?p(t).attr("type")?p(t).attr("type").toLowerCase():"text":"jqx-password-input"===e?"password":"jqx-check-box"===e?"jqx-check-box":"jqx-radio-button"===e?"jqx-radio-button":e}},_hintRender:function(t,e){if("label"==this.hintType){(r=p('<label class="'+this.toThemeProperty("jqx-validator-error-label")+'"></label>')).html(t);var i=!1;0<e.parent().find(".jqx-input-label").length&&!e.hasClass("jqx-dropdownlist")&&!e.hasClass("jqx-combobox")&&!e.hasClass("jqx-datetimeinput")&&(r=e.parent().find(".jqx-input-label"),e.data().jqxWidget.hint&&(r.html(t),r.addClass(this.toThemeProperty("jqx-validator-error-label")),e.data().jqxWidget.host.attr("hint",!0)),i=!0,this.hasHint=!0);var n=this;return this.closeOnClick&&r.click(function(){n.hideHint(e.selector)}),i||("left"==this.position||"top"==this.position?r.insertBefore(p(e)):r.insertAfter(p(e))),r}var r=p('<div class="'+this.toThemeProperty("jqx-validator-hint")+' jqx-rc-all"></div>'),o=this;return r.html(t),this.closeOnClick&&r.click(function(){o.hideHint(e.selector)}),null==this.ownerElement?r.appendTo(document.body):this.ownerElement.innerHTML?r.appendTo(p(this.ownerElement)):r.appendTo(this.ownerElement),r},_hintLayout:function(t,e,i,n){if(this._hintRender===n.hintRender){var r=this._getPosition(e,i,t,n);if("label"==this.hintType){var o="2px";"left"!=this.position&&"top"!=this.position||(o="-2px"),"input"!=e[0].nodeName.toLowerCase()&&"textarea"!=e[0].nodeName.toLowerCase()?(0<e.find(".jqx-text-area").length&&e.find(".jqx-text-area").addClass(this.toThemeProperty("jqx-validator-error-element")),0<e.find("input").length&&(0<e.find(".jqx-input").length?e.find(".jqx-input").addClass(this.toThemeProperty("jqx-validator-error-element")):0<e.find(".jqx-text-area").length?e.find(".jqx-text-area").addClass(this.toThemeProperty("jqx-validator-error-element")):e.is(".jqx-checkbox")&&e.find(".jqx-checkbox-default").addClass(this.toThemeProperty("jqx-validator-error-element")),e.is(".jqx-radiobutton")?e.find(".jqx-radiobutton-default").addClass(this.toThemeProperty("jqx-validator-error-element")):e.addClass(this.toThemeProperty("jqx-validator-error-element")))):e.addClass(this.toThemeProperty("jqx-validator-error-element"));var s=p("<span></span>");s.addClass(this.toThemeProperty("jqx-validator-hint")),s.html(t.text()),s.appendTo(p(document.body));var a=s.outerWidth();return s.remove(),void(this.hasHint||(t.css({position:"relative",left:p(e).css("margin-left"),width:p(e).width(),top:o}),"center"==i&&(t.css("width",a),t.css("left","0px"),t.css("margin-left","auto"),t.css("margin-right","auto"))))}t.css({position:"absolute",left:r.left,top:r.top}),this.arrow&&this._addArrow(e,t,i,r)}},_showHint:function(t){t&&"fade"===this.animation&&(t.fadeOut(0),t.fadeIn(this.animationDuration))},_getPosition:function(t,e,i,n){var r,o,s,a=t.offset(),l=t.outerWidth(),h=t.outerHeight();return this.rtl&&0<=e.indexOf("left")&&(e="right"),this.rtl&&0<=e.indexOf("right")&&(e="left"),null!=this.ownerElement&&((a={left:0,top:0}).top=parseInt(a.top)+t.position().top,a.left=parseInt(a.left)+t.position().left),n&&n.hintPositionRelativeElement&&(a=(s=p(n.hintPositionRelativeElement)).offset(),l=s.width(),h=s.height()),r=0<=e.indexOf("top")?a.top-h:0<=e.indexOf("bottom")?a.top+i.outerHeight()+this.hintPositionOffset+5:a.top,o=0<=e.indexOf("center")?a.left+this.hintPositionOffset+(l-i.outerWidth())/2:0<=e.indexOf("left")?a.left-i.outerWidth()-this.hintPositionOffset:0<=e.indexOf("right")?a.left+l+this.hintPositionOffset:a.left+this.hintPositionOffset,0<=e.indexOf(":")&&(e=e.split(":")[1].split(","),o+=parseInt(e[0],10),r+=parseInt(e[1],10)),this.positions||(this.positions=new Array),this.positions[Math.round(r)+"_"+Math.round(o)]&&this.positions[Math.round(r)+"_"+Math.round(o)].top==r&&(r+=t.outerHeight()),this.positions[Math.round(r)+"_"+Math.round(o)]={left:o,top:r},{left:o,top:r}},_addArrow:function(t,e,i,n){var r,o,s=p('<div class="'+this.toThemeProperty("jqx-validator-hint-arrow")+'"></div>');this.rtl&&0<=i.indexOf("left")&&(i="right"),this.rtl&&0<=i.indexOf("right")&&(i="left"),e.children(".jqx-validator-hint-arrow").remove(),e.append(s);var a=s.outerHeight(),l=s.outerWidth(),h=e.outerHeight(),u=e.outerWidth();this._addImage(s),o=0<=i.indexOf("top")?h-a:0<=i.indexOf("bottom")?-a:(h-a)/2-a/2,0<=i.indexOf("center")?r=(u-l)/2:0<=i.indexOf("left")?r=u-l/2-1:0<=i.indexOf("right")&&(r=-l/2),(0<=i.indexOf("topright")||0<=i.indexOf("bottomright"))&&(r=0),(0<=i.indexOf("topleft")||0<=i.indexOf("bottomleft"))&&(r=u-l),s.css({position:"absolute",left:r,top:o})},_addImage:function(t){var e=t.css("background-image");e=(e=(e=(e=e.replace('url("',"")).replace('")',"")).replace("url(","")).replace(")",""),t.css("background-image","none"),t.append('<img src="'+e+'" alt="Arrow" style="position: relative; top: 0px; left: 0px; width: '+t.width()+"px; height: "+t.height()+'px;" />')},_raiseEvent:function(t,e){var i=p.Event(this._events[t]);return i.args=e,this.host.trigger(i)},propertyChangedHandler:function(t,e,i,n){"rules"===e&&(this._configureInputs(),this._removeEventListeners(),this._addEventListeners())}})}(jqxBaseFramework);