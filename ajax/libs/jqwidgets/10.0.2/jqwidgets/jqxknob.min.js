!function(k){k.jqx.jqxWidget("jqxKnob","",{}),k.extend(k.jqx._jqxKnob.prototype,{defineInstance:function(){var e={type:"circle",allowValueChangeOnClick:!0,allowValueChangeOnDrag:!0,allowValueChangeOnMouseWheel:!0,changing:null,dragEndAngle:-1,dragStartAngle:-1,disabled:!1,dial:{style:"transparent",innerRadius:0,outerRadius:0,gradientType:null,gradientStops:null,startAngle:null,endAngle:null},endAngle:360,height:400,labels:{type:"digits",step:null,rotate:!1,offset:null,style:"",visible:!1},marks:{type:"",thickness:1,size:"10%",colorProgress:"transparent",colorRemaining:"transparent",minorInterval:1,majorInterval:5,offset:"80%",majorSize:"15%"},min:0,max:100,progressBar:{size:"10%",offset:"60%",color:"transparent",background:"transparent"},pointer:{color:{color:"transparent",border:null,gradientType:null,gradientStops:null},thickness:1,size:"",type:"",visible:!1},pointerGrabAction:"normal",renderEngine:"",rotation:"clockwise",startAngle:0,spinner:{color:"transparent",innerRadius:0,outerRadius:0,marks:{step:1,rotate:!1,color:"transparent",size:0,steps:10,thickness:1,offset:0}},style:{fill:"transparent",stroke:"transparent"},_touchEvents:{mousedown:k.jqx.mobile.getTouchEventName("touchstart"),mouseup:k.jqx.mobile.getTouchEventName("touchend"),mousemove:k.jqx.mobile.getTouchEventName("touchmove"),mouseenter:"mouseenter",mouseleave:"mouseleave",click:k.jqx.mobile.getTouchEventName("touchstart")},step:1,snapToStep:!0,value:0,width:400};return this===k.jqx._jqxKnob.prototype||k.extend(!0,this,e),e},createInstance:function(){var e=this;e._hostInit(),e._ie8Plugin(),e._validateProperties(),e._initValues(),e._refresh(),k.jqx.utilities.resize(e.host,function(){e.widgetSize=Math.min(e.host.width(),e.host.height()),e._refresh()})},_getEvent:function(e){return this._isTouchDevice?this._touchEvents[e]+".jqxKnob"+this.element.id:e+".jqxKnob"+this.element.id},_ie8Plugin:function(){"function"!=typeof Array.prototype.forEach&&(Array.prototype.forEach=function(e){for(var r=0;r<this.length;r++)e.apply(this,[this[r],r,this])}),window.getComputedStyle||(window.getComputedStyle=function(t,e){return this.el=t,this.getPropertyValue=function(e){var r=/(\-([a-z]){1})/g;return"float"==e&&(e="styleFloat"),r.test(e)&&(e=e.replace(r,function(){return arguments[2].toUpperCase()})),t.currentStyle[e]?t.currentStyle[e]:null},this})},createColorGradient:function(e,r,t){return this._getGradient(e,r,t)},destroy:function(){var e=this;e.removeHandler(k(document),"mousemove.jqxKnob"+e.host[0].id),e.removeHandler(k(document),"blur.jqxKnob"+e.host[0].id),e.removeHandler(k(document),"mouseup.jqxKnob"+e.host[0].id),e.host.empty(),e.host.remove()},propertiesChangedHandler:function(e,r,t){t.width&&t.height&&2==Object.keys(t).length&&e._refresh()},propertyChangedHandler:function(e,r,t,a){e.batchUpdate&&e.batchUpdate.width&&e.batchUpdate.height&&2==Object.keys(e.batchUpdate).length||("disabled"===r&&e.host.removeClass(e.toThemeProperty("jqx-fill-state-disabled")),"value"!==r?(e._validateProperties(),e._refresh()):e._setValue(a,"propertyChange"))},val:function(e){if(0==arguments.length)return this.value;this._setValue(e,null)},_isPointerGrabbed:!1,_pointerGrabbedIndex:-1,_attatchPointerEventHandlers:function(){var d=this;d.addHandler(d.host,this._getEvent("mousedown"),function(e){if("pointer"!==d.pointerGrabAction||e.target.id===d._pointerID){var r;if(d._isTouchDevice&&(r=k.jqx.position(e),e.clientX=r.left,e.clientY=r.top),"progressBar"===d.pointerGrabAction){var t={x:e.clientX,y:e.clientY},a=d.host[0].getBoundingClientRect(),n=d.widgetSize,i={x:a.left+n/2,y:a.top+n/2},o=d._calculateAngleFromCoordinates(t,i,d.rotation),s=d._calculateDistance(t,i);if(o<d.startAngle&&(o+=360),o>d.endAngle&&o-d.endAngle!=360+d.startAngle-o)return;var l=d._getScale(d.progressBar.offset,"w",n/2),g=d._getScale(d.progressBar.size,"w",n/2);if(s<l||l+g<s)return}return(d._isPointerGrabbed=!0)===d.allowValueChangeOnClick&&d._mouseMovePointer(e),e.preventDefault(),e.stopPropagation(),!1}});var r=null;d.addHandler(k(document),this._getEvent("mousemove"),function(e){if(d.allowValueChangeOnDrag&&(r&&clearTimeout(r),r=setTimeout(function(){d._mouseMovePointer(e)}),d._isPointerGrabbed))return!1}),d.addHandler(k(document),"blur.jqxKnob"+d.host[0].id,function(){d._isPointerGrabbed=!1,d._pointerGrabbedIndex=-1}),d.addHandler(k(document),this._getEvent("mouseup"),function(e){d._isPointerGrabbed&&(d._isPointerGrabbed=!1,d._pointerGrabbedIndex=-1,d._raiseEvent(0,{originalEvent:e,value:d.value}))}),d.addHandler(d.host,"wheel",function(e){if(d.allowValueChangeOnMouseWheel){var r=0;return(e=e||window.event).originalEvent&&e.originalEvent.wheelDelta&&(e.wheelDelta=e.originalEvent.wheelDelta),e.wheelDelta?r=e.wheelDelta/120:e.detail?r=-e.detail/3:e.originalEvent&&e.originalEvent.deltaY&&(r=e.originalEvent.deltaY),0<r?d._increment():d._decrement(),!1}})},_mouseMovePointer:function(e){var r,t=this;if(!t.disabled&&t._isPointerGrabbed){t._isTouchDevice&&(r=k.jqx.position(e),e.clientX=r.left,e.clientY=r.top);var a={x:e.clientX,y:e.clientY},n=t.host[0].getBoundingClientRect(),i=t.widgetSize,o={x:n.left+i/2,y:n.top+i/2},s=t._calculateAngleFromCoordinates(a,o,t.rotation),l=t._calculateValueFromAngle(s,t.dragStartAngle,t.dragEndAngle,t.min,t.max);if(t.value.length&&-1===t._pointerGrabbedIndex)for(var g=0;g<t.value.length;g++){if(l<=t.value[g]){t._pointerGrabbedIndex=g;break}if(g===t.value.length-1)t._pointerGrabbedIndex=g;else if(l<=t.value[g+1]){var d=t.value[g]+(t.value[g+1]-t.value[g])/2;t._pointerGrabbedIndex=l<=d?g:g+1;break}}if(t.pointer&&1<t.pointer.length){if(1==t._pointerGrabbedIndex){var c=t._calculateAngleFromValue(t.value[0],t.dragStartAngle,t.dragEndAngle,t.min,t.max),u=t._calculateAngleFromValue(t.max,t.dragStartAngle,t.dragEndAngle,t.min,t.max);if((s=t._calculateAngleFromValue(l,t.dragStartAngle,t.dragEndAngle,t.min,t.max))<=c)return;if(u<=s)return}if(0==t._pointerGrabbedIndex){u=t._calculateAngleFromValue(t.value[1],t.dragStartAngle,t.dragEndAngle,t.min,t.max),c=t._calculateAngleFromValue(t.min,t.dragStartAngle,t.dragEndAngle,t.min,t.max);if((s=t._calculateAngleFromValue(l,t.dragStartAngle,t.dragEndAngle,t.min,t.max))<=c)return;if(u<=s)return}}if(t.changing){var h=t.value.slice(0);if(h[t._pointerGrabbedIndex]=l,!1===t.changing(t.value,h))return}t._setValue(l,"mouse")}},_getScale:function(e,r,t){return e&&0<=e.toString().indexOf("%")?(e=parseInt(e,10)/100,"object"==typeof t?t[r]()*e:t*e):parseInt(e,10)},_hostInit:function(){var e=this;this._isTouchDevice=k.jqx.mobile.isTouchDevice();var r=e.host;r.width(e.width),r.height(e.height),r.css("position","relative"),e.host.addClass(e.toThemeProperty("jqx-widget jqx-knob")),-1==e.dragStartAngle&&(e.dragStartAngle=e.startAngle),-1==e.dragEndAngle&&(e.dragEndAngle=e.endAngle),e.dragStartAngle<e.startAngle&&(e.dragStartAngle=e.startAngle),e.dragEndAngle>e.endAngle&&(e.dragEndAngle=e.endAngle),e.widgetSize=Math.min(e.host.width(),e.host.height())},_initRenderer:function(e){if(!k.jqx.createRenderer)throw"jqxKnob: Please include a reference to jqxdraw.js";return k.jqx.createRenderer(this,e)},_initValues:function(){var e=this;e.marks&&(e.marks.style&&""!==e.marks.style&&("line"!==e.marks.style||e.marks.thickness||(e.marks.thickness=1),e.marks.size||(e.marks.size="5%"),e.marks.offset||(e.marks.offset="85%")),e.marks.majorInterval&&void 0===e.marks.majorSize&&(e.marks.majorSize="10%")),e._marksList=e._getMarksArray(e.marks),e.spinner&&(e._spinnerMarksList=e._getMarksArray(e.spinner.marks))},_calculateAngleFromValue:function(e,r,t,a,n){return k.jqx.browser.msie&&k.jqx.browser.version<9?"circle"!=this.type?a!=n?parseInt((e-a)/(n-a)):0:a!=n?parseInt((e-a)/(n-a)*(t-r)):0:"circle"!=this.type?a!=n?(e-a)/(n-a):0:a!=n?(e-a)/(n-a)*(t-r):0},_calculateAngleFromCoordinates:function(e,r,t){var a=e.x-r.x,n=e.y-r.y;return 0<n?"clockwise"===t?90-180*Math.atan(a/n)/Math.PI:270+180*Math.atan(a/n)/Math.PI:n<0?"clockwise"===t?270-180*Math.atan(a/n)/Math.PI:90+180*Math.atan(a/n)/Math.PI:0<=a?0:180},_calculateValueFromAngle:function(e,r,t,a,n){e<r&&(e+=360);var i=a;return t<e?e-t<360+r-e&&(i=n):i=a+(e-r)*(n-a)/(t-r),i},_calculateDistance:function(e,r){return Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2))},_drawBackground:function(){var e,r,t=this,a=t.renderer,n=t.widgetSize,i=n/2,o=t.style.strokeWidth?t.style.strokeWidth:0;i-=o/2,t.style&&(e=t._getColor(t.style.fill),r=t._getColor(t.style.stroke),o=t.style.strokeWidth?t.style.strokeWidth:1,"circle"!=t.type?a.rect(0,0,this.host.width(),this.host.height(),{fill:e,stroke:r,"stroke-width":o}):a.circle(n/2,n/2,i,{fill:e,stroke:r,"stroke-width":o}))},_drawDial:function(){var e,r,t,a,n,i,o,s,l,g,d,c=this;c.dial&&(e=c.renderer,n=t=(r=c.widgetSize)/2,i=c._getScale(c.dial.outerRadius,"w",r/2),o=c._getScale(c.dial.innerRadius,"w",r/2),s=null!=c.dial.startAngle&&null!=c.dial.endAngle?(a="clockwise"===c.rotation?360-c.dial.endAngle:c.dial.startAngle,"clockwise"===c.rotation?360-c.dial.startAngle:c.dial.endAngle):(a="clockwise"===c.rotation?360-c.endAngle:c.startAngle,"clockwise"===c.rotation?360-c.startAngle:c.endAngle),l=c._getColor(c.dial.style.fill),g=c._getColor(c.dial.style.stroke)||"",d=c.dial.style.strokeWidth||0,e.pieslice(n,t,o,i,a,s,0,{fill:l,stroke:g,"stroke-width":d}))},_getMarksArray:function(e){if(null==e)return[];function r(e){return parseFloat(e.toPrecision(12))}var t,a={},n=this.max,i=this.min,o=n-i,s=e.minorInterval,l=e.majorInterval;if(s){for(t=0;t<o;t+=s)a[r(i+t)]={type:"minor"};a[n]={type:"minor"}}if(l){for(t=0;t<o;t+=l)a[r(i+t)]={type:"major"};a[n]={type:"major"}}if(!s&&!l){var g=this.step;if(g){for(t=0;t<o;t+=g)a[r(i+t)]={type:"minor"};a[n]={type:"minor"}}}return a},_drawMarks:function(){var s,l,g,d,c,u,h,e,p=this;p.marks&&(s=p.renderer,l=p.widgetSize,c=p.marks&&null!=p.marks.colorRemaining?p.marks.colorRemaining:"transparent",c=p._getColor(c),p._dialMarks=[],u=(u=p.marks.type)||"line",h=p._getScale(p.marks.offset,"w",l/2),e=p._marksList,k.each(e,function(e,r){var t,a,n,i,o;p.dragEndAngle-p.dragStartAngle==360&&e==p.max||(d=p.dragStartAngle+p._calculateAngleFromValue(e,p.dragStartAngle,p.dragEndAngle,p.min,p.max),"circle"===u?(t=p._getScale(p.marks.size,"w",l/2),a=p._getPointerPosition({x:l/2,y:l/2},h,d,p.rotation),p._dialMarks.push(s.circle(a.x,a.y,t,{fill:c}))):"line"===u&&(g="major"===r.type&&null!==p.marks.majorSize&&void 0!==p.marks.majorSize?p._getScale(p.marks.majorSize,"w",l/2):p._getScale(p.marks.size,"w",l/2),n=p._getScale(p.marks.thickness,"w",l/2),i=p._getPointerPosition({x:l/2,y:l/2},h,d,p.rotation),o=p._getPointerPosition({x:l/2,y:l/2},h+g,d,p.rotation),k.jqx.browser.msie&&k.jqx.browser.version<9?p._dialMarks.push(s.line(parseInt(i.x),parseInt(i.y),parseInt(o.x),parseInt(o.y),{stroke:c,"stroke-width":n})):p._dialMarks.push(s.line(i.x,i.y,o.x,o.y,{stroke:c,"stroke-width":n}))))}))},_drawProgressBars:function(){var e=this;if(e.progressBar){e._progressBar=e._progressBar||[];for(var r=0;r<e._progressBar.length;r++)k(e._progressBar[r]).remove();if(e._progressBar=[],e._isArray(e.progressBar.style)){var t=e.value[0],a=e.value[1],n=e.progressBar.style[0],i=e.progressBar.style[1];if(e._progressBar.push(e._drawProgressBar(e.max,e.progressBar.background,"background")),e.progressBar.ranges)for(r=0;r<e.progressBar.ranges.length;r++){var o=e.progressBar.ranges[r].startValue,s=e.progressBar.ranges[r].endValue;e._progressBar.push(e._drawProgressBarFromToValue(o,s,e.progressBar.ranges[r],"background"))}e._progressBar.push(e._drawProgressBar(t,n)),e._progressBar.push(e._drawProgressBarFromEndToStart(a,i))}else{if(e._progressBar.push(e._drawProgressBar(e.max,e.progressBar.background,"background")),e.progressBar.ranges)for(r=0;r<e.progressBar.ranges.length;r++){o=e.progressBar.ranges[r].startValue,s=e.progressBar.ranges[r].endValue;e._progressBar.push(e._drawProgressBarFromToValue(o,s,e.progressBar.ranges[r],"background"))}e._progressBar.push(e._drawProgressBar(e.value,e.progressBar.style))}}},_drawProgressBarFromEndToStart:function(e,r){var t,a=this,n=a.renderer,i=a.widgetSize,o=a._getScale(a.progressBar.offset,"w",i/2),s=t=i/2,l=o,g=o+a._getScale(a.progressBar.size,"w",i/2),d=a._getColor(r.fill)||"transparent",c=a._getColor(r.stroke)||"transparent",u=a.dragStartAngle+a._calculateAngleFromValue(e,a.dragStartAngle,a.dragEndAngle,a.min,a.max),h=(a.dragStartAngle,r.strokeWidth?r.strokeWidth:1);if(a.endAngle!=u)return"clockwise"===a.rotation?n.pieslice(s,t,l,g,360-a.endAngle,360-u,0,{fill:d,stroke:c,"stroke-width":h}):n.pieslice(s,t,l,g,void 0,u,0,{fill:d,stroke:c,"stroke-width":h})},_drawProgressBarFromToValue:function(e,r,t,a){var n,i=this,o=i.renderer,s=i.widgetSize,l=i._getScale(i.progressBar.offset,"w",s/2),g=i._getScale(i.progressBar.size,"w",s/2),d=n=s/2,c=l,u=l+g,h=i._getColor(t.fill)||"transparent",p=i._getColor(t.stroke)||"transparent",_=i.dragStartAngle+i._calculateAngleFromValue(r,i.dragStartAngle,i.dragEndAngle,i.min,i.max),m=i.dragStartAngle+i._calculateAngleFromValue(e,i.dragStartAngle,i.dragEndAngle,i.min,i.max);if(m!=_){var f=1;"background"==a&&(f=0);var v=t.strokeWidth?t.strokeWidth:f;if("circle"==i.type)return"clockwise"===i.rotation?o.pieslice(d,n,c,u,360-_,360-m,0,{fill:h,stroke:p,"stroke-width":v}):o.pieslice(d,n,c,u,m,_,0,{fill:h,stroke:p,"stroke-width":v});if("rect"!=i.type)return o.rect(l,n-g/2,this.host.width()-2*l,g,{fill:h,stroke:p,"stroke-width":v});var k=_*(this.host.height()-2*l),y=this.host.height()-2*l;return o.rect(d-g/2,l+y-k,g,k,{fill:h,stroke:p,"stroke-width":v})}},_drawProgressBar:function(e,r,t){var a,n=this,i=n.renderer,o=n.widgetSize,s=n._getScale(n.progressBar.offset,"w",o/2),l=n._getScale(n.progressBar.size,"w",o/2),g=a=o/2,d=s,c=s+l,u=n._getColor(r.fill)||"transparent",h=n._getColor(r.stroke)||"transparent",p=n.dragStartAngle+n._calculateAngleFromValue(e,n.dragStartAngle,n.dragEndAngle,n.min,n.max),_=n.dragStartAngle;if(_!=p){var m=1;"background"==t&&(m=0);var f=r.strokeWidth?r.strokeWidth:m;if("circle"==n.type)return"clockwise"===n.rotation?i.pieslice(g,a,d,c,360-p,360-_,0,{opacity:r.opacity||1,fill:u,stroke:h,"stroke-width":f}):i.pieslice(g,a,d,c,_,p,0,{opacity:r.opacity||1,fill:u,stroke:h,"stroke-width":f});if("rect"!=n.type)return i.rect(s,a-l/2,this.host.width()-2*s,l,{fill:u,stroke:h,"stroke-width":f});var v=p*(this.host.height()-2*s),k=this.host.height()-2*s;return i.rect(g-l/2,s+k-v,l,v,{fill:u,stroke:h,"stroke-width":f})}},_drawLabels:function(){var e=this;e._labels=[];var r=e.renderer,t=e.widgetSize;if(void 0===e.labels.visible&&(e.labels.visible=!0),!0===e.labels.visible){var a=e._getScale(e.labels.offset,"w",t/2),n=e.labels.type?e.labels.type:"digits",i=e.labels.style,o=i&&i.fill?e._getColor(i.fill):"#333";if("digits"===n){var s=[];if(e.labels.customLabels)for(g=0;g<e.labels.customLabels.length;g++)s.push(e.labels.customLabels[g].value);else{for(var l=e.labels.step||e.step,g=e.min;g<e.max;g+=l)s.push(g);e.dragEndAngle-360<e.dragStartAngle&&s.push(e.max)}for(g=0;g<s.length;g++){var d=e.labels.customLabels?e.labels.customLabels[g].text:s[g].toString();e.labels.formatFunction&&(d=e.labels.formatFunction(d));var c,u,h=e.dragStartAngle,p=e.dragEndAngle,_=h+e._calculateAngleFromValue(s[g],h,p,e.min,e.max),m=e._getPointerPosition({x:t/2,y:t/2},a,_,e.rotation);k.jqx.browser.msie&&k.jqx.browser.version<9?(c=r.measureText(d,0,{class:this.toThemeProperty("jqx-knob-label")}),u=e.labels.rotate?90-_:0,r.text(d,m.x-c.width/2,m.y-c.height/2,c.width,c.height,u,{class:this.toThemeProperty("jqx-knob-label")},!1)):(c=r.measureText(d,0,{style:{fill:o},class:this.toThemeProperty("jqx-knob-label")}),u=e.labels.rotate?90-_:0,r.text(d,m.x-c.width/2,m.y-c.height/2,c.width,c.height,u,{style:{fill:o},class:this.toThemeProperty("jqx-knob-label")},!1))}}}},_drawPointers:function(){var e=this;if(e._pointers=e._pointers||[],e._pointers.forEach(function(e,r,t){k(e).remove(),t.splice(r,1)}),e.pointer)if(e._isArray(e.pointer))for(var r=0;r<e.progressBar.style.length;r++)!1!==e.pointer[r].visible&&e._pointers.push(e._drawPointer(e.value[r],e.pointer[r]));else{if(!1===e.pointer.visible)return;e._pointers.push(e._drawPointer(e.value,e.pointer))}},_drawPointer:function(e,r){var t=this;r.id=r.id||t._getID();var a=t.renderer,n=t.widgetSize,i=(i=r.type)||"circle";r.style||(r.style={fill:"#feaf4e",stroke:"#feaf4e"});var o,s,l,g,d,c,u,h,p,_,m,f,v,k,y,w,x,b,A=t._getColor(r.style.fill),S=r.style.stroke||"",P=t._getScale(r.offset,"w",n/2),j=t.dragStartAngle+t._calculateAngleFromValue(e,t.dragStartAngle,t.dragEndAngle,t.min,t.max);return"circle"===i?(l=t._getScale(r.size,"w",n/2),g=t._getPointerPosition({x:n/2,y:n/2},P,j,t.rotation),d=a.circle(g.x,g.y,l,{id:r.id,fill:A,stroke:S})):"line"===i?(o=t._getScale(r.size,"w",n/2),s=r.thickness,c=t._getPointerPosition({x:n/2,y:n/2},P,j,t.rotation),u=t._getPointerPosition({x:n/2,y:n/2},P+o,j,t.rotation),d=a.line(c.x,c.y,u.x,u.y,{id:r.id,stroke:A,"stroke-width":s})):"arc"===i?(o=t._getScale(r.size,"w",n/2),p=(t.dragEndAngle-t.dragStartAngle)/t._steps.length,_=h=n/2,m=P+o,f="clockwise"===t.rotation?360-(j+p/2):j-p/2,v="clockwise"===t.rotation?360-(j-p/2):j+p/2,d=a.pieslice(_,h,P,m,f,v,0,{id:r.id,fill:A,stroke:S})):"arrow"===i&&(o=t._getScale(r.size,"w",n/2),s=r.thickness,k=t._getPointerPosition({x:n/2,y:n/2},o,j,t.rotation),y=t._getPointerPosition({x:n/2,y:n/2},P,j,t.rotation),w=t._getPointerPosition({x:y.x,y:y.y},s/2,j-90,t.rotation),x=t._getPointerPosition({x:y.x,y:y.y},s/2,j+90,t.rotation),b="M "+k.x+","+k.y+" L "+w.x+","+w.y+" L "+x.x+","+x.y+" "+k.x+","+k.y,d=this.renderer.path(b,{id:r.id,stroke:S,fill:A})),d},_rotateSpinnerMarks:function(s){var l=this,g=l.spinner.marks;if(g){if(!1===g.rotate)return;for(var d,c,u=l.renderer,h=l.widgetSize,p=g&&null!=g.colorRemaining?g.colorRemaining:"transparent",p=l._getColor(p),_=(_=g.type)||"line",m=l._getScale(g.offset,"w",h/2),e=0;e<l._spinnerMarks.length;e++)k(l._spinnerMarks[e]).remove();l._spinnerMarks=[];var r=l._spinnerMarksList;k.each(r,function(e,r){var t,a,n,i,o;if(l.endAngle-l.startAngle!=360||e!=l.max)return(c=s+l._calculateAngleFromValue(e,l.startAngle,l.endAngle,l.min,l.max))<l.startAngle||(c>l.endAngle&&c<l.startAngle+360||void("circle"===_?(t=l._getScale(g.size,"w",h/2),a=l._getPointerPosition({x:h/2,y:h/2},m,c,l.rotation),l._spinnerMarks.push(u.circle(a.x,a.y,t,{fill:p}))):"line"===_&&(d="major"===r.type&&null!==g.majorSize&&void 0!==g.majorSize?l._getScale(g.majorSize,"w",h/2):l._getScale(g.size,"w",h/2),n=l._getScale(g.thickness,"w",h/2),i=l._getPointerPosition({x:h/2,y:h/2},m,c,l.rotation),o=l._getPointerPosition({x:h/2,y:h/2},m+d,c,l.rotation),l._spinnerMarks.push(u.line(i.x,i.y,o.x,o.y,{stroke:p,"stroke-width":n})))))})}},_drawSpinnerMarks:function(s){var l,g,d,c,u,h,p,e,_=this;s&&(l=_.renderer,g=_.widgetSize,u=s&&null!=s.colorRemaining?s.colorRemaining:"transparent",u=_._getColor(u),_._spinnerMarks=[],h=(h=s.type)||"line",p=_._getScale(s.offset,"w",g/2),e=_._spinnerMarksList,k.each(e,function(e,r){var t,a,n,i,o;_.dragEndAngle-_.dragStartAngle==360&&e==_.max||(c=_.startAngle+_._calculateAngleFromValue(e,_.startAngle,_.endAngle,_.min,_.max),"circle"===h?(t=_._getScale(s.size,"w",g/2),a=_._getPointerPosition({x:g/2,y:g/2},p,c,_.rotation),_._spinnerMarks.push(l.circle(a.x,a.y,t,{fill:u}))):"line"===h&&(d="major"===r.type&&null!==s.majorSize&&void 0!==s.majorSize?_._getScale(s.majorSize,"w",g/2):_._getScale(s.size,"w",g/2),n=_._getScale(s.thickness,"w",g/2),i=_._getPointerPosition({x:g/2,y:g/2},p,c,_.rotation),o=_._getPointerPosition({x:g/2,y:g/2},p+d,c,_.rotation),_._spinnerMarks.push(l.line(i.x,i.y,o.x,o.y,{stroke:u,"stroke-width":n}))))}))},_drawSpinner:function(){var e=this;if(e.spinner){var r=e.renderer,t=e.widgetSize;e.spinner.style||(e.spinner.style={fill:"#dfe3e9",stroke:"#dfe3e9"});var a,n=e._getColor(e.spinner.style.fill),i=e.spinner.style.stroke||"",o=a=t/2,s=e._getScale(e.spinner.outerRadius,"w",t/2),l=e._getScale(e.spinner.innerRadius,"w",t/2),g=n.strokeWidth?n.strokeWidth:2;if(r.pieslice(o,a,l,s,360-e.endAngle,360-e.startAngle,0,{"stroke-width":g,fill:n,stroke:i}),e.spinner.marks)return void e._drawSpinnerMarks(e.spinner.marks)}},_getColor:function(e){return e&&"object"==typeof e?this._getGradient(e.color,e.gradientType,e.gradientStops):e},_getGradient:function(e,r,t){return r&&null!=t&&"object"==typeof t&&("linear"===r?e=this.renderer._toLinearGradient(e,!0,t):"linearHorizontal"===r?e=this.renderer._toLinearGradient(e,!1,t):"radial"===r&&(e=this.renderer._toRadialGradient(e,t))),e},_isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},_events:["slide","change"],_raiseEvent:function(e,r){var t=this._events[e],a=k.Event(t);return a.args=r,this.host.trigger(a)},_movePointers:function(){for(var e,r=this,t=0;t<r._pointers.length;t++)1!==r._pointers.length?(e=r.dragStartAngle+r._calculateAngleFromValue(r.value[t],r.dragStartAngle,r.dragEndAngle,r.min,r.max),r._pointers[t]=r._movePointer(r._pointers[t],r.pointer[t],e,r.value[t])):(e=r.dragStartAngle+r._calculateAngleFromValue(r.value,r.dragStartAngle,r.dragEndAngle,r.min,r.max),r._pointers[0]=r._movePointer(r._pointers[0],r.pointer,e,r.value))},_movePointer:function(e,r,t,a){var n,i,o,s,l,g,d,c,u,h,p=this,_=p.renderer,m=p.widgetSize,f=(f=r.type)||"circle",v=p._getScale(r.offset,"w",m/2);return"circle"===f?(i=p._getPointerPosition({x:m/2,y:m/2},v,t,p.rotation),_.attr(e,{cx:i.x,cy:i.y}),k.jqx.browser.msie&&k.jqx.browser.version<9&&(k("#"+r.id).remove(),e=p._drawPointer(a,r))):"line"===f?(n=p._getScale(r.size,"w",m/2),o=p._getPointerPosition({x:m/2,y:m/2},v,t,p.rotation),s=p._getPointerPosition({x:m/2,y:m/2},v+n,t,p.rotation),_.attr(e,{x1:o.x,y1:o.y,x2:s.x,y2:s.y}),k.jqx.browser.msie&&k.jqx.browser.version<9&&(k("#"+r.id).remove(),e=p._drawPointer(a,r))):"arrow"===f?(n=p._getScale(r.size,"w",m/2),l=r.thickness,g=p._getPointerPosition({x:m/2,y:m/2},n,t,p.rotation),d=p._getPointerPosition({x:m/2,y:m/2},v,t,p.rotation),c=p._getPointerPosition({x:d.x,y:d.y},l/2,t-90,p.rotation),u=p._getPointerPosition({x:d.x,y:d.y},l/2,t+90,p.rotation),h="M "+g.x+","+g.y+" L "+c.x+","+c.y+" L "+u.x+","+u.y+" "+g.x+","+g.y,_.attr(e,{d:h}),k.jqx.browser.msie&&k.jqx.browser.version<9&&(k("#"+r.id).remove(),e=p._drawPointer(a,r))):"arc"===f&&(k("#"+r.id).remove(),e=p._drawPointer(r)),p.progressBar&&e.parentNode.appendChild(e.parentNode.removeChild(e)),e},_getPointerPosition:function(e,r,t,a){return k.jqx.browser.msie&&k.jqx.browser.version<9?{x:parseInt(e.x+r*Math.sin(Math.PI/180*(t+90))),y:"clockwise"===a?parseInt(e.y+r*Math.sin(Math.PI/180*t)):parseInt(e.y-r*Math.sin(Math.PI/180*t))}:{x:e.x+r*Math.sin(Math.PI/180*(t+90)),y:"clockwise"===a?e.y+r*Math.sin(Math.PI/180*t):e.y-r*Math.sin(Math.PI/180*t)}},_getID:function(){function e(){return 16*(1+Math.random())|0}return""+e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},_decrement:function(){this._setValue(this.value-this.step,"mouse")},_increment:function(){this._setValue(this.value+this.step,"mouse")},_refresh:function(){var e=this;if(e.disabled&&e.host.addClass(e.toThemeProperty("jqx-fill-state-disabled")),e.renderer||(e._isVML=!1,e.host.empty(),e._initRenderer(e.host)),e.removeHandler(k(document),"mousemove.jqxKnob"+e.host[0].id),e.removeHandler(k(document),"blur.jqxKnob"+e.host[0].id),e.removeHandler(k(document),"mouseup.jqxKnob"+e.host[0].id),e.removeHandler(e.host,"wheel"),e.removeHandler(e.host,"mousedown"),e.host.empty(),e._initRenderer(e.host),e.renderer){e._steps=[];for(var r=0;r<=(e.max-e.min)/e.step;r++)e._steps.push(e.min+e.step*r);e._initValues(),e._render()}},_render:function(){var e=this;e._drawBackground(),e._drawDial(),e._drawMarks(),e._drawLabels(),e._drawSpinner(),e._drawProgressBars(),e._updateMarksColor(),e._updateSpinnerMarksColor(),e._drawPointers(),e._attatchPointerEventHandlers()},_setValue:function(e,r){var t,a=this,n=a.value;if(isNaN(e)&&(e=a.min),e>a.max?e=a.max:e<a.min&&(e=a.min),a.snapToStep)for(var i=a._steps,o=0;o<i.length;o++)if(e<i[o]){e=0===o||i[o]-e<e-i[o-1]?i[o]:i[o-1];break}e!=n&&(k.isArray(a.value)?-1!=a._pointerGrabbedIndex&&(1==a._pointerGrabbedIndex&&(a.value[0],a.value[a._pointerGrabbedIndex]=e),0==a._pointerGrabbedIndex&&(a.value[1],a.value[a._pointerGrabbedIndex]=e),a.value[a._pointerGrabbedIndex]=e):a.value=e,a._updateProgressBarColor(),a._updateMarksColor(),a._updateSpinnerMarksColor(),t=a.dragStartAngle+a._calculateAngleFromValue(e,a.dragStartAngle,a.dragEndAngle,a.min,a.max),a._rotateSpinnerMarks(t),a._movePointers(),a._raiseEvent(1,{value:a.value,type:r}))},_updateMarksColor:function(){var r=this;if(r.marks&&(r.marks.colorProgress||r.marks.colorRemaining)){var e=r.renderer,t=[];k.each(r._marksList,function(e){r.endAngle-r.startAngle!=360||r.max,t.push(e)});for(var a=r._getColor(r.marks.colorProgress),n=r._getColor(r.marks.colorRemaining),i=r.value.length?r.value[0]:r.value,o=0;o<r._dialMarks.length;o++)t[o]>i?"circle"===r.marks.type?e.attr(r._dialMarks[o],{fill:n}):e.attr(r._dialMarks[o],{stroke:n}):"circle"===r.marks.type?e.attr(r._dialMarks[o],{fill:a}):e.attr(r._dialMarks[o],{stroke:a}),r.progressBar&&r.marks.drawAboveProgressBar&&r._dialMarks[o].parentNode.appendChild(r._dialMarks[o].parentNode.removeChild(r._dialMarks[o]))}},_updateSpinnerMarksColor:function(){var r=this;if(r.spinner&&r.spinner.marks&&r.spinner.marks&&(r.spinner.marks.colorProgress||r.spinner.marks.colorRemaining)){var e=r.renderer,t=[];k.each(r._spinnerMarksList,function(e){r.endAngle-r.startAngle==360&&e==r.max||t.push(e)});for(var a=r._getColor(r.spinner.marks.colorProgress),n=r._getColor(r.spinner.marks.colorRemaining),i=r.value.length?r.value[0]:r.value,o=0;o<r._spinnerMarks.length;o++)t[o]>i?"circle"===r.spinner.marks.type?e.attr(r._spinnerMarks[o],{fill:n}):e.attr(r._spinnerMarks[o],{stroke:n}):"circle"===r.spinner.marks.type?e.attr(r._spinnerMarks[o],{fill:a}):e.attr(r._spinnerMarks[o],{stroke:a})}},_updateProgressBarColor:function(){this.progressBar&&this._drawProgressBars()},_validateProperties:function(){function e(e,r){return e&&"string"==typeof e?e={fill:e,stroke:e}:(e||((e={}).fill=r,e.stroke=r),e&&e.fill&&!e.stroke&&(e.stroke=e.fill),e&&!e.fill&&e.stroke&&(e.fill=e.stroke),e&&!e.fill&&(e.fill=r),e&&!e.stroke&&(e.stroke=r),e)}var r=this;if(r.dial&&(r.dial.style=e(r.dial.style,"#dddddd")),r.style&&(r.style=e(r.style,"#dddddd")),r.progressBar&&(r.progressBar.style=e(r.progressBar.style,"transparent"),r.progressBar.background=e(r.progressBar.background,"transparent")),r.spinner&&(r.spinner.style=e(r.spinner.style,"transparent")),r.pointer&&(r.pointer.style=e(r.pointer.style,"transparent")),r.startAngle>=r.endAngle)throw new Error("jqxKnob: The end angle must be bigger than the start angle!");if(r.startAngle<0||360<r.startAngle)throw new Error("jqxKnob: Start angle must be between 0 and 360");if(r.endAngle>r.startAngle+360)throw new Error("jqxKnob: End angle must be between startAngle and startAngle + 360");if(r.dial&&r.dial.color&&"transparent"!==r.dial.color&&(!r.dial.outerRadius||!r.dial.innerRadius))throw new Error("jqxKnob: Dial options innerRadius and outerRadius need to be specified");if(r._isArray(r.pointer)||r._isArray(r.value)){if(!r._isArray(r.pointer))throw new Error("jqxKnob: If the value is an array, the pointer must also be an array.");if(!r._isArray(r.value))throw new Error("jqxKnob: If the pointer is an array, the value must also be an array.");if(r.pointer.length!==r.value.length)throw new Error("jqxKnob: The pointer and value array sizes must match.");if(r.progressBar&&(!r._isArray(r.progressBar.style)||r.progressBar.style.length!==r.pointer.length))throw new Error("jqxKnob: progressBar color must be an array with the same number of elements as the pointer and value.")}return!0}})}(jqxBaseFramework);