!function(o){o.jqx.jqxWidget("jqxInput","",{}),o.extend(o.jqx._jqxInput.prototype,{defineInstance:function(){var e=this,t={disabled:!1,filter:e._filter,sort:e._sort,highlight:e._highlight,dropDownWidth:null,renderer:e._renderer,opened:!1,$popup:document.createElement("ul"),source:[],roundedCorners:!0,searchMode:"default",placeHolder:"",width:null,height:null,value:"",rtl:!1,hint:!0,displayMember:"",valueMember:"",events:["select","open","close","change"],popupZIndex:1e3,items:8,minLength:1,maxLength:null};return this===o.jqx._jqxInput.prototype||o.extend(!0,this,t),t},createInstance:function(){var e=this;"none"!==e.host.css("display")&&!1!==document.body.contains(e.element)||(e._initiallyHidden=!0),e._popupHelper=o(e.$popup),e.render()},render:function(){var i=this;if(this.input=this.element,i.isMaterialized()&&this.input instanceof HTMLInputElement){var s=this.host.children();o.each(s,function(e){var t="jqx-input-group-addon";o(this).removeClass(i.toThemeProperty("jqx-rc-all")),0===e&&(t+=" jqx-rc-l"),e===s.length-1&&(t+=" jqx-rc-r"),this!==i.element&&(t+=" jqx-fill-state-normal"),this.className+=" "+i.toThemeProperty(t)});var e=o("<div></div>");e.addClass(i.toThemeProperty("jqx-input-group")),this.host.after(e);var t=this.element,n=this.host.data();e.append(t);var a=o("<label></label");this.hint&&(a[0].innerHTML=this.placeHolder),a.addClass(i.toThemeProperty("jqx-input-label")),e.append(a);var l=o("<span></span>");e.append(l),l.addClass(i.toThemeProperty("jqx-input-bar")),e[0].id=this.element.id,this.element.removeAttribute("id"),e[0].style.cssText=this.element.style.cssText,i.input=i.element,this.input instanceof HTMLInputElement||(this.input=this.host.find("input"),0<this.input.length&&(this.input=this.input[0]),o(this.input).addClass(this.toThemeProperty("jqx-input-widget"))),this.label=a,this.bar=l,this.element.style.cssText="",this.host=e,this.element=e[0],this.host.data(n),(i=this).template&&(i.bar.addClass(i.toThemeProperty("jqx-"+i.template)),i.label.addClass(i.toThemeProperty("jqx-"+i.template))),0<s.length&&(i._hasAddons=!0)}else if("textarea"===this.element.nodeName.toLowerCase())this.element.style.overflow="auto";else if("div"===this.element.nodeName.toLowerCase()){this.baseHost=this.element;var t=i.element.getElementsByTagName("input"),r=!1;if(o.each(t,function(){var e=this.type;if(null==e||"text"===e||"textarea"===e)return t=o(this),!(r=!0)}),!r)throw new Error("jqxInput: Missing Text Input in the Input Group");0<t.length&&(this.baseHost=o(this.element),i.baseElement=i.element,n=this.host.data(),this.host=t,this.element=t[0],i.input=t[0],this.host.data(n),i.baseElement.className+=" "+i.toThemeProperty("jqx-widget jqx-rc-all jqx-input-group"),s=this.baseHost.children(),o.each(s,function(e){var t="jqx-input-group-addon";o(this).removeClass(i.toThemeProperty("jqx-rc-all")),0===e&&(t+=" jqx-rc-l"),e===s.length-1&&(t+=" jqx-rc-r"),this!==i.element&&(t+=" jqx-fill-state-normal"),this.className+=" "+i.toThemeProperty(t)}))}this.addHandlers(),this.rtl&&(i.element.className+=" "+i.toThemeProperty("jqx-rtl")),i.element.setAttribute("role","textbox"),o.jqx.aria(this,"aria-autocomplete","both"),o.jqx.aria(this,"aria-disabled",this.disabled),o.jqx.aria(this,"aria-readonly",!1),o.jqx.aria(this,"aria-multiline",!1),this.source&&this.source.length&&o.jqx.aria(this,"aria-haspopup",!0),""!==this.value&&(this.input.value=this.value),this._oldsource=this.source,this._updateSource()},_updateSource:function(){function s(e){if(void 0===e)return null;if("string"==typeof e||e instanceof String)return{label:e,value:e};if("string"==typeof e||e instanceof String!=!1)return e;var t="",i="";return""!==n.displayMember&&void 0!==n.displayMember&&e[n.displayMember]&&(t=e[n.displayMember]),""!==n.valueMember&&void 0!==n.valueMember&&(i=e[n.valueMember]),""===t&&(t=e.label),""===i&&(i=e.value),{label:t,value:i}}function e(e){for(var t=[],i=0;i<e.length;i++)t[i]=s(e[i]);return t}var t,n=this;if(this.source&&this.source._source)return this.adapter=this.source,null!=this.adapter._source.localdata?(this.adapter.unbindBindingUpdate(this.element.id),this.adapter.bindBindingUpdate(this.element.id,function(){n.source=e(n.adapter.records)})):(t={},this.adapter._options.data?o.extend(n.adapter._options.data,t):(this.source._source.data&&o.extend(t,this.source._source.data),this.adapter._options.data=t),this.adapter.unbindDownloadComplete(this.element.id),this.adapter.bindDownloadComplete(this.element.id,function(){n.source=e(n.adapter.records)})),void this.source.dataBind();o.isFunction(this.source)||(this.source=e(this.source))},_refreshClasses:function(e){var t=e?"addClass":"removeClass",i="jqx-widget-content jqx-input-widget jqx-input jqx-widget",s="jqx-popup jqx-input-popup jqx-menu jqx-menu-vertical jqx-menu-dropdown jqx-widget jqx-widget-content";o.jqx.browser.msie&&(s+=" jqx-noshadow"),this.roundedCorners&&(i+=" jqx-rc-all",s+=" jqx-rc-all"),this.disabled?i+=" jqx-fill-state-disabled":this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled")),this.host[t](this.toThemeProperty(i)),this._popupHelper[t](this.toThemeProperty(s))},selectAll:function(){var t=this.host;t[0]instanceof HTMLInputElement==!1&&(t=o(this.input)),setTimeout(function(){var e;"selectionStart"in t[0]?(t[0].focus(),t[0].setSelectionRange(0,t[0].value.length)):((e=t[0].createTextRange()).collapse(!0),e.moveEnd("character",t[0].value.length),e.moveStart("character",0),e.select())},10)},selectLast:function(){var e=this.host;e[0]instanceof HTMLInputElement==!1&&(e=o(this.input)),this.selectStart(e[0].value.length)},selectFirst:function(){this.selectStart(0)},selectStart:function(t){var i=this.host;i[0]instanceof HTMLInputElement==!1&&(i=o(this.input)),setTimeout(function(){var e;"selectionStart"in i[0]?(i[0].focus(),i[0].setSelectionRange(t,t)):((e=i[0].createTextRange()).collapse(!0),e.moveEnd("character",t),e.moveStart("character",t),e.select())},10)},focus:function(){try{var e=this;e.element.focus(),setTimeout(function(){e.element.focus()},25)}catch(e){}},resize:function(e,t){this.width=e,this.height=t,this.refresh()},refresh:function(){var t,i,e,s;this._refreshClasses(!1),this._refreshClasses(!0),this.baseHost?(null!=this.width&&-1!=this.width.toString().indexOf("px")?this.baseElement.style.width=parseInt(this.width)+"px":null==this.width||isNaN(this.width)||(this.baseElement.style.width=this.width+"px"),null!=this.height&&-1!=this.height.toString().indexOf("px")?this.baseElement.style.height=parseInt(this.height)+"px":null==this.height||isNaN(this.height)||(this.baseElement.style.height=this.height+"px"),t=this,i=o.jqx.browser.msie&&o.jqx.browser.version<9,e=0,o.each(this.baseHost.children(),function(){this.style.height="100%",this!==t.element&&(e+=o(this).outerWidth())}),t._addonsWidth=e,i?(s=Math.max(0,t.baseElement.offsetHeight-2),t.element.style.width=Math.max(0,t.baseElement.offsetWidth-e-1)+"px",t.element.style.minHeight=s+"px",t.element.style.lineHeight=s+"px"):t.element.style.width="calc(100% - "+e+"px)",o.jqx.utilities.resize(t.baseHost,function(){var e;i&&"string"==typeof t.width&&-1!==t.width.indexOf("%")&&!t._initiallyHidden?t.element.style.width=t.baseElement.offsetWidth-t._addonsWidth-1+"px":t._initiallyHidden&&(t._addonsWidth=t._getAddonsWidth(),i?(t.element.style.width=t.baseElement.offsetWidth-t._addonsWidth-1+"px",e=t.baseElement.offsetHeight-2,t.element.style.minHeight=e+"px",t.element.style.lineHeight=e+"px"):t.element.style.width="calc(100% - "+t._addonsWidth+"px)",t._initiallyHidden=!1)})):(null!=this.width&&-1!=this.width.toString().indexOf("px")?this.element.style.width=parseInt(this.width)+"px":null==this.width||isNaN(this.width)?this.element.style.width=this.width:this.element.style.width=this.width+"px",null!=this.height&&-1!=this.height.toString().indexOf("px")?this.element.style.height=parseInt(this.height)+"px":null==this.height||isNaN(this.height)?this.element.style.height=this.height:this.element.style.height=this.height+"px",this._hasAddons&&(this._addonsWidth=35,this.input.style.width="calc(100% - "+this._addonsWidth+"px)")),this.disabled?this.element.setAttribute("disabled",!0):this.element.removeAttribute("disabled"),this.maxLength&&(this.element.setAttribute("maxlength",this.maxLength),this.input&&this.input.setAttribute("maxlength",this.maxLength)),this.element.getAttribute("placeholder")||this._refreshPlaceHolder()},_refreshPlaceHolder:function(){var e=this;e.isMaterialized()&&e.hint||("placeholder"in this.input&&!(o.jqx.browser.msie&&o.jqx.browser.version<9)?e.input.setAttribute("placeHolder",e.placeHolder):""===e.input.value&&(e.input.value=e.placeHolder)),e.hint&&(""!==e.input.value?e.element.setAttribute("hint",!0):e.element.removeAttribute("hint"),e.label&&(e.label.innerHTML=e.placeHolder))},destroy:function(){this.removeHandlers(),this.baseHost?this.baseHost.remove():this.host.remove(),this.$popup&&this._popupHelper.remove()},propertiesChangedHandler:function(e,t,i){i.width&&i.height&&2===Object.keys(i).length&&e.refresh()},propertyChangedHandler:function(e,t,i,s){if("width"!==t||s===i)return"placeHolder"===t?("placeholder"in e.element&&!(o.jqx.browser.msie&&o.jqx.browser.version<9)||e.input.value!==i||(e.input.value=""),void e._refreshPlaceHolder()):void(e.batchUpdate&&e.batchUpdate.width&&e.batchUpdate.height&&2===Object.keys(e.batchUpdate).length||("theme"===t&&o.jqx.utilities.setTheme(i,s,e.host),"opened"!==t?("source"===t&&(e._oldsource=s,e._updateSource()),"displayMember"!==t&&"valueMember"!==t||(e.source=e._oldsource,e._updateSource()),"disabled"===t&&o.jqx.aria(e,"aria-disabled",e.disabled),"value"===t&&(e.input.value=s,e._refreshPlaceHolder()),e.refresh()):s?e.open():e.close()));e.baseHost?(e.baseElement.style.width=e._toPx(s),o.jqx.browser.msie&&o.jqx.browser.version<9&&(e.element.style.width=e.baseElement.offsetWidth-e._addonsWidth-1+"px")):e.element.style.width=e._toPx(s)},select:function(e,t,i){var s=this._find("jqx-fill-state-pressed",this._popupHelper),n=s.getAttribute("data-value"),a=s.getAttribute("data-name");return this.input.value=this.renderer(a,this.input.value),this.selectedItem={label:a,value:n},this.element.setAttribute("data-value",n),this.element.setAttribute("data-label",a),this._raiseEvent("0",{item:{label:a,value:n},label:a,value:n}),this._raiseEvent("3",{type:i,item:{label:a,value:n},label:a,value:n}),this.value=a,this.close()},val:function(e){return 0===arguments.length||null!=e&&"object"==typeof e&&!e.label&&!e.value?""!==this.displayMember&&""!==this.valueMember&&this.selectedItem?""===this.input.value?"":this.selectedItem:this.input.value:(e&&e.label?(this.selectedItem={label:e.label,value:e.value},this.element.setAttribute("data-value",e.value),this.element.setAttribute("data-label",e.label),this.value=e,this.input.value=e.label,this.input&&(this.input.value=e.label)):(this.value=e,this.input.value=e,this.element.setAttribute("data-value",e),this.element.setAttribute("data-label",e),e&&e.label?this._raiseEvent("3",{type:null,item:{label:e.label,value:e.value},label:e.label,value:e.value}):this._raiseEvent("3",{type:null,item:{label:e,value:e},label:e,value:e}),this._refreshPlaceHolder()),this.input.value)},_raiseEvent:function(e,t){void 0===t&&(t={owner:null});var i=this.events[e];t.owner=this;var s=new o.Event(i);return s.owner=this,s.args=t,s.preventDefault&&s.preventDefault(),this.host.trigger(s)},_renderer:function(e){return e},open:function(){if(!o.jqx.isHidden(this.host)){var e,t=o.extend({},this.host.coord(!0),{height:this.element.offsetHeight});this.$popup.parentNode!==document.body&&(e=this.element.id+"_popup",this.$popup.id=e,o.jqx.aria(this,"aria-owns",e),document.body.appendChild(this.$popup)),this.$popup.style.position="absolute",this.$popup.style.zIndex=this.popupZIndex,this.$popup.style.top=this._toPx(t.top+t.height),this.$popup.style.left=this._toPx(t.left),this.$popup.style.display="block";var i=0,s=this._popupHelper.children();return o.each(s,function(){i+=o(this).outerHeight()+1}),this.$popup.style.height=this._toPx(i),this.opened=!0,this._raiseEvent("1",{popup:this.$popup}),o.jqx.aria(this,"aria-expanded",!0),this}},close:function(){if(this.opened)return this.$popup.style.display="none",this.opened=!1,this._raiseEvent("2",{popup:this.$popup}),o.jqx.aria(this,"aria-expanded",!1),this._refreshPlaceHolder(),this},suggest:function(){var e;return this.query=this.input.value,!this.query||this.query.length<this.minLength?this.opened?this.close():this:(e=o.isFunction(this.source)?this.source(this.query,o.proxy(this.load,this)):this.source)?this.load(e):this},load:function(e){for(var t=[],i=0;i<e.length;i++){var s=e[i];this.filter(s)&&t.push(s)}return(t=this.sort(t)).length?this._render(t.slice(0,this.items)).open():this.opened?this.close():this},_filter:function(e){var t=this.query,i=e;switch(null!=e.label?i=e.label:this.displayMember&&(i=e[this.displayMember]),this.searchMode){case"none":break;default:return o.jqx.string.containsIgnoreCase(i,t);case"contains":return o.jqx.string.contains(i,t);case"equals":return o.jqx.string.equals(i,t);case"equalsignorecase":return o.jqx.string.equalsIgnoreCase(i,t);case"startswith":return o.jqx.string.startsWith(i,t);case"startswithignorecase":return o.jqx.string.startsWithIgnoreCase(i,t);case"endswith":return o.jqx.string.endsWith(i,t);case"endswithignorecase":return o.jqx.string.endsWithIgnoreCase(i,t)}},_sort:function(e){for(var t=[],i=[],s=[],n=0;n<e.length;n++){var a=e[n],l=a;a.label?l=a.label:this.displayMember&&(l=a[this.displayMember]),0===l.toString().toLowerCase().indexOf(this.query.toString().toLowerCase())?t.push(a):0<=l.toString().indexOf(this.query)?i.push(a):0<=l.toString().toLowerCase().indexOf(this.query.toString().toLowerCase())&&s.push(a)}return t.concat(i,s)},_highlight:function(e){var t=(t=this.query).replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),i=new RegExp("("+t+")","ig");return e.replace(i,function(e,t){return"<b>"+t+"</b>"})},_render:function(e){var h=this,t=h._popupHelper.children();if(0<t.length)for(var i=0;i<t.length;i++)o(t[i]).remove();function s(e,t){var i,s,n=e,a=document.createElement("li"),l=document.createElement("a");l.setAttribute("href","#"),a.appendChild(l),s=void 0!==e.value&&null!==e.value?(i=void 0!==e.label&&null!==e.label?e.label:e.value,e.value):void 0!==e.label&&null!==e.label?(i=e.label,e.label):void 0!==h.displayMember&&""!==h.displayMember?(i=e[h.displayMember],e[h.valueMember]):i=e,a.setAttribute("data-value",s),a.setAttribute("data-name",i),e.label?n=e.label:h.displayMember&&(n=e[h.displayMember]),l.innerHTML=h.highlight(n);var r="";h.rtl&&(r=" jqx-rtl"),0===t&&(r+=" jqx-fill-state-pressed"),a.className=h.toThemeProperty("jqx-item jqx-menu-item jqx-rc-all"+r),h.$popup.appendChild(a),h.addHandler(a,"mouseenter",function(e){h.mouseenter(e)})}return function(e){for(var t=0;t<e.length;t++)s(e[t],t)}(e),this.dropDownWidth?this.$popup.style.width=h._toPx(h.dropDownWidth):this.$popup.style.width=h._toPx(h.element.offsetWidth-6),this},next:function(){var e=this._find("jqx-fill-state-pressed",this._popupHelper),t=e.nextSibling;o(e).removeClass(this.toThemeProperty("jqx-fill-state-pressed")),(t=t||this.$popup.firstChild).className+=" "+this.toThemeProperty("jqx-fill-state-pressed")},prev:function(){var e=this._find("jqx-fill-state-pressed",this._popupHelper),t=e.previousSibling;o(e).removeClass(this.toThemeProperty("jqx-fill-state-pressed")),(t=t||this.$popup.lastChild).className+=" "+this.toThemeProperty("jqx-fill-state-pressed")},addHandlers:function(){var n=this,e=".jqxInput"+n.element.id;n.addHandler(n.host,"focus"+e,function(){n.onFocus()}),n.addHandler(n.host,"blur"+e,function(){n.onBlur()}),n.addHandler(n.host,"change"+e,function(e){var t,i,s;e.args||(e.stopPropagation(),e.preventDefault(),s=(t=n.val())&&t.label?(i=t.label,t.val):i=t,n._raiseEvent("3",{type:"keyboard",item:{label:i,value:s},label:i,value:s}),n.value=i,n._refreshPlaceHolder())}),n.addHandler(n.host,"keypress"+e,function(e){n.keypress(e)}),n.addHandler(n.host,"keyup"+e,function(e){n.keyup(e)}),n.addHandler(n.host,"keydown"+e,function(e){n.keydown(e)}),n.addHandler(n.$popup,"mousedown"+e,function(e){n.click(e)})},removeHandlers:function(){var e=this,t=".jqxInput"+e.element.id;e.removeHandler(e.host,"change"+t),e.removeHandler(e.host,"focus"+t),e.removeHandler(e.host,"blur"+t),e.removeHandler(e.host,"keypress"+t),e.removeHandler(e.host,"keyup"+t),e.removeHandler(e.host,"keydown"+t),e.removeHandler(e.$popup,"mousedown"+t)},move:function(e){if(this.opened){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.shiftKey||(e.preventDefault(),this.prev());break;case 40:e.shiftKey||(e.preventDefault(),this.next())}e.stopPropagation()}},keydown:function(e){this.suppressKeyPressRepeat=-1!==[40,38,9,13,27].indexOf(e.keyCode),this.move(e)},keypress:function(e){this.suppressKeyPressRepeat||this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.opened)return;this.select(e,this,"keyboard");break;case 27:if(!this.opened)return;this.close();break;default:var t=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){t.suggest()},300)}e.stopPropagation(),e.preventDefault()},clear:function(){this.val("")},onBlur:function(){var e=this;setTimeout(function(){e.close()},150),e.host.removeClass(e.toThemeProperty("jqx-fill-state-focus")),e._refreshPlaceHolder()},onFocus:function(){this.element.className+=" "+this.toThemeProperty("jqx-fill-state-focus"),this._refreshPlaceHolder()},click:function(e){e.stopPropagation(),e.preventDefault(),this.select(e,this,"mouse")},mouseenter:function(e){o(this._find("jqx-fill-state-pressed",this._popupHelper)).removeClass(this.toThemeProperty("jqx-fill-state-pressed")),e.currentTarget.className+=" "+this.toThemeProperty("jqx-fill-state-pressed")},_toPx:function(e){return"number"==typeof e?e+"px":e},_find:function(e,t){for(var i=t.children(),s=0;s<i.length;s++){var n=i[s];if(-1!==n.className.indexOf(e))return n}},_getAddonsWidth:function(){for(var e=this.baseHost.children(),t=0,i=0;i<e.length;i++)e[i]!==this.element&&(t+=o(e[i]).outerWidth());return t}})}(jqxBaseFramework);