!function(r){r.jqx.jqxWidget("jqxSwitchButton","",{}),r.extend(r.jqx._jqxSwitchButton.prototype,{defineInstance:function(){var t={disabled:!1,checked:!1,onLabel:"On",offLabel:"Off",toggleMode:"default",animationDuration:250,width:90,height:30,animationEnabled:!0,thumbSize:"40%",orientation:"horizontal",switchRatio:"50%",metroMode:!1,_isMouseDown:!1,rtl:!1,_dimensions:{horizontal:{size:"width",opSize:"height",oSize:"outerWidth",opOSize:"outerHeight",pos:"left",oPos:"top",opposite:"vertical"},vertical:{size:"height",opSize:"width",oSize:"outerHeight",opOSize:"outerWidth",pos:"top",oPos:"left",opposite:"horizontal"}},_touchEvents:{mousedown:"touchstart",click:"touchend",mouseup:"touchend",mousemove:"touchmove",mouseenter:"mouseenter",mouseleave:"mouseleave"},_borders:{},_isTouchDevice:!1,_distanceRequired:3,_isDistanceTraveled:!1,_thumb:void 0,_onLabel:void 0,_offLabel:void 0,_wrapper:void 0,_animationActive:!1,aria:{"aria-checked":{name:"checked",type:"boolean"},"aria-disabled":{name:"disabled",type:"boolean"}},_events:["checked","unchecked","change"]};return this===r.jqx._jqxSwitchButton.prototype||r.extend(!0,this,t),t},createInstance:function(t){if(this._createFromInput(),this.element.nodeName&&("INPUT"==this.element.nodeName||"BUTTON"==this.element.nodeName))throw"jqxSwitchButton can be rendered only from a DIV tag.";this.host.attr("role","checkbox"),r.jqx.aria(this),this.render();var e=this;e.element.tabIndex||e.host.attr("tabindex",0),r.jqx.utilities.resize(this.host,function(){e.element.innerHTML="",e.render()})},_createFromInput:function(){var t,e,i,s,h=this;"input"==h.element.nodeName.toLowerCase()&&(h.field=h.element,h.field.className&&(h._className=h.field.className),t={title:h.field.title},h.field.value&&(t.value=h.field.value),h.field.checked&&(t.checked=!0),h.field.id.length?t.id=h.field.id.replace(/[^\w]/g,"_")+"_jqxSwitchButton":t.id=r.jqx.utilities.createId()+"_jqxSwitchButton",(e=r("<div></div>",t))[0].style.cssText=h.field.style.cssText,h.width||(h.width=r(h.field).width()),h.height||(h.height=r(h.field).outerHeight()),r(h.field).hide().after(e),i=h.host.data(),h.host=e,h.host.data(i),h.element=e[0],h.element.id=h.field.id,h.field.id=t.id,h._className&&(h.host.addClass(h._className),r(h.field).removeClass(h._className)),h.field.tabIndex&&(s=h.field.tabIndex,h.field.tabIndex=-1,h.element.tabIndex=s))},resize:function(t,e){this.width=t,this.height=e,this.render()},render:function(){this.innerHTML="",!this.theme||""==this.theme||-1==this.theme.indexOf("metro")&&-1==this.theme.indexOf("windowsphone")&&-1==this.theme.indexOf("office")||("40%"==this.thumbSize&&(this.thumbSize=12),this.metroMode=!0);var t=r.data(document.body,"jqx-switchbutton")||1;this._idHandler(t),r.data(document.body,"jqx-draggables",++t),this._isTouchDevice=r.jqx.mobile.isTouchDevice(),this.switchRatio=parseInt(this.switchRatio,10),this._render(),this._addClasses(),this._performLayout(),this._removeEventHandlers(),this._addEventHandles(),this._disableSelection();var e=this;this.canRaiseEvents=!1,this.checked||this._switchButton(this.checked,0,!1),this.disabled&&(this.element.disabled=!0),setTimeout(function(){e.host.hide(),e.host.show(1)},250)},setOnLabel:function(t){this._onLabel.html('<div style="display: inline-block;">'+t+"</div>"),this._centerLabels()},setOffLabel:function(t){this._offLabel.html('<div style="display: inline-block;">'+t+"</div>"),this._centerLabels()},toggle:function(){this.checked?this.uncheck():this.check()},val:function(t){return 0==arguments.length||null!=t&&"object"==typeof t||("string"==typeof t?("true"==t&&this.check(),"false"==t&&this.uncheck(),""==t&&this.indeterminate()):(1==t&&this.check(),0==t&&this.uncheck(),null==t&&this.indeterminate())),this.checked},uncheck:function(){this._switchButton(!1),r.jqx.aria(this,"aria-checked",this.checked)},check:function(){this._switchButton(!0),r.jqx.aria(this,"aria-checked",this.checked)},_idHandler:function(t){var e;this.element.id||(e="jqx-switchbutton-"+t,this.element.id=e)},_dir:function(t){return this._dimensions[this.orientation][t]},_getEvent:function(t){if(this._isTouchDevice){var e=this._touchEvents[t];return r.jqx.mobile.getTouchEventName(e)}return t},_render:function(){this._thumb=r("<div/>"),this._onLabel=r("<div/>"),this._offLabel=r("<div/>"),this._wrapper=r("<div/>"),this._onLabel.appendTo(this.host),this._thumb.appendTo(this.host),this._offLabel.appendTo(this.host),this.host.wrapInner(this._wrapper),this._wrapper=this.host.children(),this.setOnLabel(this.onLabel),this.setOffLabel(this.offLabel)},_addClasses:function(){var t=this._thumb,e=this._onLabel,i=this._offLabel;this.host.addClass(this.toThemeProperty("jqx-switchbutton")),this.host.addClass(this.toThemeProperty("jqx-widget")),this.host.addClass(this.toThemeProperty("jqx-widget-content")),this._wrapper.addClass(this.toThemeProperty("jqx-switchbutton-wrapper")),t.addClass(this.toThemeProperty("jqx-fill-state-normal")),t.addClass(this.toThemeProperty("jqx-switchbutton-thumb")),e.addClass(this.toThemeProperty("jqx-switchbutton-label-on")),e.addClass(this.toThemeProperty("jqx-switchbutton-label")),i.addClass(this.toThemeProperty("jqx-switchbutton-label-off")),i.addClass(this.toThemeProperty("jqx-switchbutton-label")),this.checked?this.host.addClass(this.toThemeProperty("jqx-switchbutton-on")):this.host.removeClass(this.toThemeProperty("jqx-switchbutton-on"))},_performLayout:function(){var t,e,i,s=this.host,h=this._dir("opSize"),o=this._dir("size"),a=this._wrapper;s.css({width:this.width,height:this.height}),a.css(h,s[h]()),this._thumbLayout(),this._labelsLayout(),t=this._borders[this._dir("opposite")],a.css(o,s[o]()+this._offLabel[this._dir("oSize")]()+t),a.css(h,s[h]()),(this.metroMode||this.theme&&""!=this.theme&&(-1!=this.theme.indexOf("metro")||-1!=this.theme.indexOf("office")))&&(this._thumb,e=this._onLabel,i=this._offLabel,e.css("position","relative"),e.css("top","1px"),e.css("margin-left","1px"),i.css("position","relative"),i.css("top","1px"),i.css("left","-2px"),i.css("margin-right","1px"),i.height(e.height()-2),i.width(e.width()-3),e.height(e.height()-2),e.width(e.width()-3),this._thumb[this._dir("size")](this.thumbSize+3),this._thumb.css("top","-1px"),this._thumb[this._dir("opSize")](s[this._dir("opSize")]()+2),this._thumb.css("position","relative"),this.host.css("overflow","hidden"),this.checked?(this._onLabel.css("visibility","visible"),this._offLabel.css("visibility","hidden"),this._thumb.css("left","0px")):(this._onLabel.css("visibility","hidden"),this._offLabel.css("visibility","visible"),this._thumb.css("left","-2px")))},_thumbLayout:function(){var t=this.thumbSize,e=this.host;0<=t.toString().indexOf("%")&&(t=e[this._dir("size")]()*parseInt(t,10)/100),this._thumb[this._dir("size")](t),this._thumb[this._dir("opSize")](e[this._dir("opSize")]()),this._handleThumbBorders()},_handleThumbBorders:function(){this._borders.horizontal=parseInt(this._thumb.css("border-left-width"),10)||0,this._borders.horizontal+=parseInt(this._thumb.css("border-right-width"),10)||0,this._borders.vertical=parseInt(this._thumb.css("border-top-width"),10)||0,this._borders.vertical+=parseInt(this._thumb.css("border-bottom-width"),10)||0;var t=this._borders[this._dir("opposite")];"horizontal"===this.orientation?(this._thumb.css("margin-top",-t/2),this._thumb.css("margin-left",0)):(this._thumb.css("margin-left",-t/2),this._thumb.css("margin-top",0))},_labelsLayout:function(){var t=this.host,e=this._thumb,i=this._dir("opSize"),s=this._dir("size"),h=this._dir("oSize"),o=t[s]()-e[h](),a=this._borders[this._dir("opposite")]/2;this._onLabel[s](o+a),this._offLabel[s](o+a),this.rtl&&this._onLabel[s](o+2*a),this._onLabel[i](t[i]()),this._offLabel[i](t[i]()),this._orderLabels(),this._centerLabels()},_orderLabels:function(){var t;"horizontal"===this.orientation?(t="left",this.rtl&&(t="right"),this._onLabel.css("float",t),this._thumb.css("float",t),this._offLabel.css("float",t)):(this._onLabel.css("display","block"),this._offLabel.css("display","block"))},_centerLabels:function(){var t=this._onLabel.children("div"),e=this._offLabel.children("div"),i=t.parent().height(),s=t.outerHeight(),h=this._borders[this.orientation]/2||0;0==s&&(s=14);var o=Math.floor((i-s)/2)+h;t.css("margin-top",o),e.css("margin-top",o)},_removeEventHandlers:function(){var t="."+this.element.id;this.removeHandler(this._wrapper,this._getEvent("click")+t,this._clickHandle),this.removeHandler(this._thumb,this._getEvent("mousedown")+t,this._mouseDown),this.removeHandler(r(document),this._getEvent("mouseup")+t,this._mouseUp),this.removeHandler(r(document),this._getEvent("mousemove")+t,this._mouseMove),this.removeHandler(this._thumb,"mouseenter"+t),this.removeHandler(this._thumb,"mouseleave"+t),this.removeHandler(this._wrapper,"focus"+t),this.removeHandler(this._wrapper,"blur"+t)},_addEventHandles:function(){var t="."+this.element.id,e=this;this.addHandler(this.host,"focus"+t,function(t){return e.host.addClass(e.toThemeProperty("jqx-fill-state-focus")),!1}),this.addHandler(this.host,"blur"+t,function(){e.host.removeClass(e.toThemeProperty("jqx-fill-state-focus"))}),this.addHandler(this._thumb,"mouseenter"+t,function(){e._thumb.addClass(e.toThemeProperty("jqx-fill-state-hover"))}),this.addHandler(this._thumb,"mouseleave"+t,function(){e._thumb.removeClass(e.toThemeProperty("jqx-fill-state-hover"))}),this.addHandler(this._wrapper,this._getEvent("click")+t,this._clickHandle,{self:this}),this.addHandler(this._thumb,this._getEvent("mousedown")+t,this._mouseDown,{self:this}),this.addHandler(r(document),this._getEvent("mouseup")+t,this._mouseUp,{self:this}),this.addHandler(r(document),this._getEvent("mousemove")+t,this._mouseMove,{self:this})},enable:function(){this.disabled=!1,this.element.disabled=!1,r.jqx.aria(this,"aria-disabled",this.disabled)},disable:function(){this.disabled=!0,this.element.disabled=!0,r.jqx.aria(this,"aria-disabled",this.disabled)},_clickHandle:function(t){var e=t.data.self;"click"!==e.toggleMode&&"default"!==e.toggleMode||e.disabled||e._isDistanceTraveled||e._dragged||(e._wrapper.stop(),e.toggle()),e._thumb.removeClass(e.toThemeProperty("jqx-fill-state-pressed"))},_mouseDown:function(t){var e=t.data.self,i=e._wrapper;e.metroMode&&(e.host.css("overflow","hidden"),e._onLabel.css("visibility","visible"),e._offLabel.css("visibility","visible")),e._mouseStartPosition=e._getMouseCoordinates(t),e._buttonStartPosition={left:parseInt(i.css("margin-left"),10)||0,top:parseInt(i.css("margin-top"),10)||0},e.disabled||"slide"!==e.toggleMode&&"default"!==e.toggleMode||(e._wrapper.stop(),e._isMouseDown=!0,e._isDistanceTraveled=!1,e._dragged=!1),e._thumb.addClass(e.toThemeProperty("jqx-fill-state-pressed"))},_mouseUp:function(t){var e,i,s=t.data.self;s.metroMode,s._isMouseDown=!1,s._thumb.removeClass(s.toThemeProperty("jqx-fill-state-pressed")),s._isDistanceTraveled&&(e=s._wrapper,i=parseInt(e.css("margin-"+s._dir("pos")),10)||0,s._dropHandler(i)?s._switchButton(!s.checked):s._switchButton(s.checked,null,!0),s._isDistanceTraveled=!1)},_mouseMove:function(t){var e=t.data.self,i=e._getMouseCoordinates(t);if(e._isMouseDown&&e._distanceTraveled(i)){var s=e._dir("pos"),h=e._wrapper,o=e._buttonStartPosition[s]+i[s]-e._mouseStartPosition[s],o=e._validatePosition(o);return e._dragged=!0,h.css("margin-"+e._dir("pos"),o),e._onLabel.css("visibility","visible"),e._offLabel.css("visibility","visible"),!1}},_distanceTraveled:function(t){if(this._isDistanceTraveled)return!0;if(this._isMouseDown){var e=this._mouseStartPosition,i=this._distanceRequired;return this._isDistanceTraveled=Math.abs(t.left-e.left)>=i||Math.abs(t.top-e.top)>=i,this._isDistanceTraveled}return!1},_validatePosition:function(t){var e=this._borders[this._dir("opposite")],i=-(this.host[this._dir("size")]()-this._thumb[this._dir("oSize")]())-e;return 0<t?0:t<i?i:t},_dropHandler:function(t){var e=-(this.host[this._dir("size")]()-this._thumb[this._dir("oSize")]()),i=Math.abs(e),s=Math.abs(t-this._buttonStartPosition[this._dir("pos")]);return i*(this.switchRatio/100)<=s},_switchButton:function(t,e,i){this.metroMode?(this.host.css("overflow","hidden"),this._onLabel.css("visibility","visible"),this._offLabel.css("visibility","visible"),t?this._thumb.css("left","0px"):this._thumb.css("left","-2px")):(this._onLabel.css("visibility","visible"),this._offLabel.css("visibility","visible"));var s=this._wrapper,h=this,o={},a=this._borders[this._dir("opposite")],n=0;void 0===e&&(e=this.animationEnabled?this.animationDuration:0),this.rtl?t?(n=this.host[this._dir("size")]()-this._thumb[this._dir("oSize")]()+a,this.metroMode&&(n+=5)):this.metroMode&&(n-=3):t||(n=this.host[this._dir("size")]()-this._thumb[this._dir("oSize")]()+a),o["margin-"+this._dir("pos")]=-n,t?h.host.addClass(h.toThemeProperty("jqx-switchbutton-on")):h.host.removeClass(h.toThemeProperty("jqx-switchbutton-on")),s.animate(o,e,function(){t?(h._onLabel.css("visibility","visible"),h._offLabel.css("visibility","hidden")):(h._onLabel.css("visibility","hidden"),h._offLabel.css("visibility","visible")),t!==h.checked&&h._raiseEvent(2,{check:h.checked,checked:h.checked}),h.checked=t,i||h._handleEvent(t)})},_handleEvent:function(t){t!==this.checked&&this._raiseEvent(2,{check:this.checked,checked:this.checked}),t?this._raiseEvent(0,{checked:this.checked}):this._raiseEvent(1,{checked:this.checked})},_disableSelection:function(){var t=this.host.find("*");r.each(t,function(t,e){e.onselectstart=function(){return!1},r(e).addClass("jqx-disableselect")})},_getMouseCoordinates:function(t){return this._isTouchDevice&&t.originalEvent.touches?{left:t.originalEvent.touches[0].pageX,top:t.originalEvent.touches[0].pageY}:{left:t.pageX,top:t.pageY}},destroy:function(){this._removeEventHandlers(),this.host.removeClass(this.toThemeProperty("jqx-switchbutton")),this._wrapper.remove()},_raiseEvent:function(t,e){var i=r.Event(this._events[t]);return i.args=e,this.host.trigger(i)},_themeChanger:function(t,e,i){if(t){void 0===i&&(i=this.host);for(var s=i[0].className.split(" "),h=[],o=[],a=i.children(),n=0;n<s.length;n+=1)0<=s[n].indexOf(t)&&(h.push(s[n]),o.push(s[n].replace(t,e)));this._removeOldClasses(h,i),this._addNewClasses(o,i);for(n=0;n<a.length;n+=1)this._themeChanger(t,e,r(a[n]))}},_removeOldClasses:function(t,e){for(var i=0;i<t.length;i+=1)e.removeClass(t[i])},_addNewClasses:function(t,e){for(var i=0;i<t.length;i+=1)e.addClass(t[i])},propertiesChangedHandler:function(t,e,i){i&&i.width&&i.height&&2==Object.keys(i).length&&(t._wrapper.css("margin-left","0px"),t._wrapper.css("margin-top","0px"),t._performLayout(),t._wrapper.css("left","0px"),t._wrapper.css("top","0px"),t._switchButton(this.checked,0,!0))},propertyChangedHandler:function(t,e,i,s){if(!(t.batchUpdate&&t.batchUpdate.width&&t.batchUpdate.height&&2==Object.keys(t.batchUpdate).length))switch(e){case"disabled":s?t.disable():t.enable();break;case"switchRatio":t.switchRatio=parseInt(t.switchRatio,10);break;case"checked":s?t.check():t.uncheck();break;case"onLabel":t.setOnLabel(s);break;case"offLabel":t.setOffLabel(s);break;case"theme":r.jqx.utilities.setTheme(i,s,t.host);break;case"width":case"height":case"thumbSize":case"orientation":t._wrapper.css("margin-left","0px"),t._wrapper.css("margin-top","0px"),t._performLayout(),t._wrapper.css("left","0px"),t._wrapper.css("top","0px"),t._switchButton(this.checked,0,!0)}}})}(jqxBaseFramework);