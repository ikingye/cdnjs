!function(j){j.extend(j.jqx._jqxGrid.prototype,{autoresizecolumns:function(e,t){"cells"!=e&&"all"!=e&&"column"!=e&&(e="all");var i=this.that,l=this.getrows();this.pageable&&(l=this.dataview.rows,this.groupable&&(l=this.dataview.records)),t=null==t?0:parseInt(t);var s,r=l.length;null==r&&null!=l&&(s=new Array,j.each(l,function(e){s.push(this)}),r=(l=s).length);var o=j("<span></span>");o.addClass(this.toThemeProperty("jqx-widget")),o.addClass(this.toThemeProperty("jqx-grid-cell")),j(document.body).append(o);var n=[],a=[],d=[],u=[],c=i.host.width();"hidden"!=i.vScrollBar[0].style.visibility&&(c-=this.scrollbarsize+5),c<0&&(c=0);for(var h=0;h<r;h++)for(var m,p,w,f,g,z,b=l[h],v=0;v<this.columns.records.length;v++){(x=this.columns.records[v]).hidden||0<this.groups.length&&v<=this.groups.length-1||(null==a[x.displayfield]&&(a[x.displayfield]=0),null==d[x.displayfield]&&(d[x.displayfield]=""),w=b[x.displayfield],""!=x.cellsformat?j.jqx.dataFormat&&(j.jqx.dataFormat.isDate(w)?w=j.jqx.dataFormat.formatdate(w,x.cellsformat,this.gridlocalization):j.jqx.dataFormat.isNumber(w)&&(w=j.jqx.dataFormat.formatnumber(w,x.cellsformat,this.gridlocalization))):x.cellsrenderer&&(m=i._defaultcellsrenderer(w,x),null!=(p=x.cellsrenderer(h,x.datafield,w,m,x.getcolumnproperties(),b))&&(w=j(p).text())),null!=e&&"cells"!=e&&"all"!=e||null!=w&&(n=w.toString().length,f=w.toString().replace(/[^A-Z]/g,"").length,n>a[x.displayfield]&&(a[x.displayfield]=n,d[x.displayfield]=w,u[x.displayfield]=f),0<n&&f<=n&&(g=20*f+15*(n-f),(z=20*u[x.displayfield]+15*(a[x.displayfield]-u[x.displayfield]))<g&&0<g&&0<z&&(a[x.displayfield]=n,d[x.displayfield]=w,u[x.displayfield]=f))),"column"!=e&&"all"!=e||(x.text.toString().length>a[x.displayfield]&&(d[x.displayfield]=x.text,a[x.displayfield]=x.text.length,f=x.text.toString().replace(/[^A-Z]/g,"").length,u[x.displayfield]=f),n=(w=x.text).toString().length,f=w.toString().replace(/[^A-Z]/g,"").length,0<n&&f<=n&&(g=20*f+15*(n-f),(z=20*u[x.displayfield]+15*(a[x.displayfield]-u[x.displayfield]))<g&&0<g&&0<z&&(a[x.displayfield]=n,d[x.displayfield]=w,u[x.displayfield]=f))))}if(this.columns.records){for(var _,y,v=0;v<this.columns.records.length;v++){(x=this.columns.records[v]).displayfield&&(null==d[x.displayfield]&&(d[x.displayfield]=x.text),0<=o[0].className.indexOf("jqx-grid-column-header")&&o.removeClass(this.toThemeProperty("jqx-grid-column-header")),d[x.displayfield]==x.text&&o.addClass(this.toThemeProperty("jqx-grid-column-header")),o[0].innerHTML=d[x.displayfield].toString(),_=o.outerWidth()+10,0<o.children().length&&(_=o.children().outerWidth()+10),j.jqx.browser.msie&&j.jqx.browser.version<8&&(_+=10),this.filterable&&this.showfilterrow&&(_+=5),(_+=t)>x.maxwidth&&(_=x.maxwidth),null!=x._width&&(x.__width=x._width),x._width=null,("auto"==x.maxwidth||_<=x.maxwidth)&&(y=x.width,_<x.minwidth&&(_=x.minwidth),x.width=_,null!=x._percentagewidth&&(x._percentagewidth=null),this._raiseEvent(14,{columntext:x.text,column:x.getcolumnproperties(),datafield:x.datafield,displayfield:x.displayfield,oldwidth:y,newwidth:_})))}o.remove(),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo);for(var x,v=0;v<this.columns.records.length;v++){null!=(x=this.columns.records[v]).__width&&(x._width=x.__width)}}},autoresizecolumn:function(e,t,i){if("cells"!=t&&"all"!=t&&"column"!=t&&(t="all"),null==e)return!1;var l=this.getrows();this.pageable&&(l=this.dataview.rows,this.groupable&&(l=this.dataview.records));var s=this.getcolumn(e);if(null==s)return!1;i=null==i?0:parseInt(i);var r=l.length,o=j("<span></span>");o.addClass(this.toThemeProperty("jqx-widget")),o.addClass(this.toThemeProperty("jqx-grid-cell")),j(document.body).append(o);var n=0,a="",d=0,u=this.that,c=u.host.width();if("hidden"!=u.vScrollBar[0].style.visibility&&(c-=this.scrollbarsize+5),c<0&&(c=0),null==t||"cells"==t||"all"==t)for(var h=0;h<r;h++){var m,p,w,f,g,z=l[h][s.displayfield];""!=s.cellsformat?j.jqx.dataFormat&&(j.jqx.dataFormat.isDate(z)?z=j.jqx.dataFormat.formatdate(z,s.cellsformat,this.gridlocalization):j.jqx.dataFormat.isNumber(z)&&(z=j.jqx.dataFormat.formatnumber(z,s.cellsformat,this.gridlocalization))):!s.cellsrenderer||null!=(m=s.cellsrenderer(h,s,z))&&(z=j(m).text()),null!=z&&(p=z.toString().length,w=z.toString().replace(/[^A-Z]/g,"").length,n<p&&(n=p,a=z,d=w),0<p&&w<=p&&(g=20*d+15*(n-d))<(f=20*w+15*(p-w))&&0<f&&0<g&&(n=p,a=z,d=w))}"column"!=t&&"all"!=t||(s.text.toString().length>n&&(a=s.text),p=(z=s.text.toString()).toString().length,w=z.toString().replace(/[^A-Z]/g,"").length,0<p&&w<=p&&(g=20*d+15*(n-d))<(f=20*w+15*(p-w))&&0<f&&0<g&&(n=p,a=z,d=w)),null==a&&(a=s.text),(o[0].innerHTML=a)==s.text&&o.addClass(this.toThemeProperty("jqx-grid-column-header"));var b,v=o.outerWidth()+10;j.jqx.browser.msie&&j.jqx.browser.version<8&&(v+=5),this.filterable&&this.showfilterrow&&(v+=5),v+=i,o.remove(),v>s.maxwidth&&(v=s.maxwidth),("auto"==s.maxwidth||v<=s.maxwidth)&&(b=s.width,v<s.minwidth&&(v=s.minwidth),s.width=v,null!=s._width&&(s.__width=s._width),(s._width=null)!=s._percentagewidth&&(s._percentagewidth=null),this._updatecolumnwidths(),this._updatecellwidths(),this._raiseEvent(14,{columntext:s.text,column:s.getcolumnproperties(),datafield:e,displayfield:s.displayfield,oldwidth:b,newwidth:v}),this._renderrows(this.virtualsizeinfo),null!=s._width&&(s._width=s.__width))},_handlecolumnsresize:function(){var d=this.that;if(this.columnsresize){var u=!1;d.isTouchDevice()&&!0!==d.touchmode&&(u=!0);var e="mousemove.resize"+this.element.id,t="mousedown.resize"+this.element.id,i="mouseup.resize"+this.element.id;u&&(e=j.jqx.mobile.getTouchEventName("touchmove")+".resize"+this.element.id,t=j.jqx.mobile.getTouchEventName("touchstart")+".resize"+this.element.id,i=j.jqx.mobile.getTouchEventName("touchend")+".resize"+this.element.id),this.removeHandler(j(document),e),this.addHandler(j(document),e,function(e){if(null!=j.data(document.body,"contextmenu"+d.element.id)&&d.autoshowcolumnsmenubutton)return!0;if(null!=d.resizablecolumn&&!d.disabled&&d.resizing&&null!=d.resizeline){d.resizablecolumn.columnelement;var t=d.host.coord(),i=parseInt(d.resizestartline.coord().left),l=i-d._startcolumnwidth,s="auto"==(s=d.resizablecolumn.column.minwidth)?0:parseInt(s),r="auto"==(r=d.resizablecolumn.column.maxwidth)?0:parseInt(r),o=e.pageX;u&&(o=d.getTouches(e)[0].pageX),l+=s;var n=0<r?i+r:0,a=0==r||d._startcolumnwidth+o-i<r;if(d.rtl&&(a=!0),a)if(d.rtl){if(o>=t.left&&o<=t.left+d.host.width()&&(d.resizeline.css("left",o),u))return!1}else if(o>=t.left&&l<=o&&((0!=n&&e.pageX<n||0==n)&&d.resizeline.css("left",o),u))return!1}return!(!u&&null!=d.resizablecolumn)&&void 0}),this.removeHandler(j(document),t),this.addHandler(j(document),t,function(e){if(null!=j.data(document.body,"contextmenu"+d.element.id)&&d.autoshowcolumnsmenubutton)return!0;if(null!=d.resizablecolumn&&!d.disabled){var t=d.resizablecolumn.columnelement;if(t.coord().top+t.height()+5<e.pageY)return void(d.resizablecolumn=null);if(t.coord().top-5>e.pageY)return void(d.resizablecolumn=null);if(d._startcolumnwidth=d.resizablecolumn.column.width,d.resizablecolumn.column._width=null,j(document.body).addClass("jqx-disableselect"),j(document.body).addClass("jqx-position-reset"),d.host.addClass("jqx-disableselect"),d.content.addClass("jqx-disableselect"),d._mouseDownResize=new Date,d.resizing=!0,d._lastmouseDownResize&&d.columnsautoresize&&d._lastmouseDownResize-d._mouseDownResize<300&&-500<d._lastmouseDownResize-d._mouseDownResize){var i=d.resizablecolumn.column;if(i.resizable){d.resizablecolumn.column.width;var l=d.hScrollBar[0].style.visibility;return d._resizecolumn=null,d.resizeline.hide(),d.resizestartline.hide(),d.resizebackground.remove(),d.resizablecolumn=null,d.columndragstarted=!1,d.dragmousedown=null,d.__drag=!1,d.autoresizecolumn(i.displayfield,"all"),l!=d.hScrollBar[0].style.visibility&&d.hScrollInstance.setPosition(0),d.rtl&&d._arrange(),d.autosavestate&&d.savestate&&d.savestate(),e.stopPropagation(),d.suspendClick=!0,setTimeout(function(){d.suspendClick=!1},100),!1}}d._lastmouseDownResize=new Date,d._resizecolumn=d.resizablecolumn.column,d.resizeline=d.resizeline||j('<div style="position: absolute;"></div>'),d.resizestartline=d.resizestartline||j('<div style="position: absolute;"></div>'),d.resizebackground=d.resizebackground||j('<div style="position: absolute; left: 0; top: 0; background: #000;"></div>'),d.resizebackground.css("opacity",.01),d.resizebackground.css("cursor","col-resize"),d.resizeline.css("cursor","col-resize"),d.resizestartline.css("cursor","col-resize"),d.resizeline.addClass(d.toThemeProperty("jqx-grid-column-resizeline")),d.resizestartline.addClass(d.toThemeProperty("jqx-grid-column-resizestartline")),j(document.body).append(d.resizeline),j(document.body).append(d.resizestartline),j(document.body).append(d.resizebackground);var s=d.resizablecolumn.columnelement.coord();d.resizebackground.css("left",d.host.coord().left),d.resizebackground.css("top",d.host.coord().top),d.resizebackground.width(d.host.width()),d.resizebackground.height(d.host.height()),d.resizebackground.css("z-index",9999);function r(e){d.rtl?e.css("left",parseInt(s.left)):e.css("left",parseInt(s.left)+d._startcolumnwidth);var t=d._groupsheader()?d.groupsheader.height():0;t+=d.showtoolbar?d.toolbarheight:0,t+=d.showstatusbar?d.statusbarheight:0;var i=0;d.pageable&&(i=d.pagerheight);var l="visible"==d.hScrollBar.css("visibility")?17:0;e.css("top",parseInt(s.top)),e.css("z-index",99999),d.columngroups?e.height(d.host.height()+d.resizablecolumn.columnelement.height()-i-t-l-d.columngroupslevel*d.columnsheight):e.height(d.host.height()-i-t-l),d.enableanimations?e.show("fast"):e.show()}r(d.resizeline),r(d.resizestartline),d.dragmousedown=null}});function l(){if(j(document.body).removeClass("jqx-disableselect"),j(document.body).removeClass("jqx-position-reset"),(d.showfilterrow||d.showstatusbar||d.showtoolbar||d.enablebrowserselection)&&(d.host.removeClass("jqx-disableselect"),d.content.removeClass("jqx-disableselect")),d.resizing){if(d._mouseUpResize=new Date,d._mouseUpResize-d._mouseDownResize<200)return d.resizing=!1,void(null!=d._resizecolumn&&null!=d.resizeline&&"block"==d.resizeline.css("display")&&(d._resizecolumn=null,d.resizeline.hide(),d.resizestartline.hide(),d.resizebackground.remove()));if(d.resizing=!1,!d.disabled){var e=d.host.width();if("hidden"!=d.vScrollBar[0].style.visibility&&(e-=20),e<0&&(e=0),null!=d._resizecolumn&&null!=d.resizeline&&"block"==d.resizeline.css("display")){var t=parseInt(d.resizeline.css("left")),i=parseInt(d.resizestartline.css("left")),l=d._startcolumnwidth+t-i;d.rtl&&(l=d._startcolumnwidth-t+i);var s=d._resizecolumn.width;d._closemenu(),l<d._resizecolumn.minwidth&&(l=d._resizecolumn.minwidth),d._resizecolumn.width=l,null!=d._resizecolumn._percentagewidth&&(d._resizecolumn._percentagewidth=l/e*100);for(var r=0;r<d._columns.length;r++)if(d._columns[r].datafield===d._resizecolumn.datafield){d._columns[r].width=d._resizecolumn.width,d._columns[r].width<d._resizecolumn.minwidth&&(d._columns[r].width=d._resizecolumn.minwidth);break}var o=d.hScrollBar[0].style.visibility;d._updatecolumnwidths(),d._updatecellwidths(),d._raiseEvent(14,{columntext:d._resizecolumn.text,column:d._resizecolumn.getcolumnproperties(),datafield:d._resizecolumn.datafield,oldwidth:s,newwidth:l}),d._renderrows(d.virtualsizeinfo),d.autosavestate&&d.savestate&&d.savestate(),o!=d.hScrollBar[0].style.visibility&&d.hScrollInstance.setPosition(0),d.rtl&&d._arrange(),d._resizecolumn=null,d.resizeline.hide(),d.resizestartline.hide(),d.resizebackground.remove(),d.resizablecolumn=null}else d.resizablecolumn=null}}}var s,r;try{""==document.referrer&&!window.frameElement||((s=null)!=window.top&&window.top!=window.self&&window.parent&&document.referrer&&(s=document.referrer),s&&-1!=s.indexOf(document.location.host)&&(r=function(e){l()},window.top.document.addEventListener?window.top.document.addEventListener("mouseup",r,!1):window.top.document.attachEvent&&window.top.document.attachEvent("onmouseup",r)))}catch(e){}this.removeHandler(j(document),i),this.addHandler(j(document),i,function(e){if(null!=j.data(document.body,"contextmenu"+d.element.id)&&d.autoshowcolumnsmenubutton)return!0;l()})}}})}(jqxBaseFramework);