!function(T){T.jqx.jqxWidget("jqxLayout","",{}),T.extend(T.jqx._jqxLayout.prototype,{defineInstance:function(){var e={width:null,height:null,minGroupWidth:100,minGroupHeight:100,layout:[],resizable:!0,contextMenu:!1,rtl:!1,events:["create","resize","pin","unpin","floatGroupClosed"]};return this===T.jqx._jqxLayout.prototype||T.extend(!0,this,e),e},createInstance:function(){var e=this;e._originalElement=T(e.element.cloneNode(!0)),e._coordinates=[],e._oldIE=T.jqx.browser.msie&&T.jqx.browser.version<9,e._ie7=T.jqx.browser.msie&&T.jqx.browser.version<8,e._touchDevice=T.jqx.mobile.isTouchDevice(),"none"!==e.host.css("display")&&!0===document.body.contains(e.element)?(e._initiallyHidden=!1,e._initialization=!0,e.render()):e._initiallyHidden=!0,T.jqx.utilities.resize(this.host,function(){!0!==e._suppressResizeHandler&&(!0===e._initiallyHidden&&(e._initialization=!0),e.render(),!0===e._initiallyHidden&&(e.dockingLayout&&(e.dockingLayout._createOverlay(),e.dockingLayout._createEdgeOverlays()),e._initiallyHidden=!1))})},render:function(){var e,t,o=this,i=[];if(o._tabbedGroupsList=[],o.dockingLayout&&!(o._overlayGroups=[])===o._initialization){e=o.dockingLayout._overlay.detach(),t=o.dockingLayout._dropOverlayHelper.detach();for(var n=0;n<o.dockingLayout._edgeOverlays.length;n++)i.push(T(o.dockingLayout._edgeOverlays[n]).detach())}if(!0===o._rendered&&o._detachContent(o.layout[0].items),o.element.innerHTML="",!o.host.jqxRibbon)throw new Error("jqxLayout: Missing reference to jqxribbon.js.");if(o._setSize(),o._addClasses(),o._removeHandlers(),!o._rendered){if("layoutGroup"!==o.layout[0].type)throw new Error('jqxLayout: Invalid layout structure. The first member of the layout array has to be with type: "layoutGroup".');var a=o.layout[0].items[0].width,r=o.layout[0].items[0].height;a&&"string"==typeof a&&"%"===a.charAt(a.length-1)||r&&"string"==typeof r&&"%"===r.charAt(r.length-1)||(o.layout[0].initialPxWidth=o.element.offsetWidth,o.layout[0].initialPxHeight=o.element.offsetHeight,o._pxToPercent(o.layout[0],!0))}if(o._createLayout(o.layout,o.host,{type:"host"},0),!0===o.resizable&&(o._addResizeFeedbacks(),o._getGroupCoordinates(),o._addHandlers()),!0===o.contextMenu&&o._initMenu(),!0===o._initialization)o._initialization=!1,o._raiseEvent("0");else if(o.dockingLayout){if(o._ie7){T("body").append(e,t);for(var d=0;d<i.length;d++)T("body").append(i[d])}else{e.appendTo(o.host),t.appendTo(o.host);for(var l=0;l<i.length;l++)i[l].appendTo(o.host)}o.dockingLayout._trackFloatGroups()}for(var s=0;s<o._tabbedGroupsList.length;s++)o._validateTabbedGroup(o._tabbedGroupsList[s]);o._rendered||(o._rendered=!0)},refresh:function(e){!0!==e&&this.render()},destroy:function(){var e=this;e._mouseupHandler=null,e._docUP=null,e._removeHandlers(),!0===e.contextMenu&&e._menu.jqxMenu("destroy"),e.host.remove()},saveLayout:function(){for(var e=this,t=[],o=0;o<e.layout.length;o++)e._copyItem(e.layout[o],t);return t},loadLayout:function(e){var t;void 0!==e&&!1===T.isEmptyObject(e)&&((t=this).layout=e,t._rendered=!1,t.render())},propertyChangedHandler:function(m,e,t,y){if("layout"!==e){if(y!==t)switch(e){case"width":case"height":m.element.style[e]=m._toPx(y);break;case"theme":T.jqx.utilities.setTheme(t,y,m.host),m._menuInitialized&&T.jqx.utilities.setTheme(t,y,m._menu),m.dockingLayout&&0<T("."+m.element.id+"FloatGroup").length&&T("."+m.element.id+"FloatGroup").jqxWindow({theme:y});break;case"layout":case"resizable":m.render();break;case"contextMenu":!0!==y||m._menuInitialized||m.render();break;case"rtl":function o(e){for(var t=m._find(e,".jqx-layout-pseudo-window-title-"+f),o=m._find(e,".jqx-layout-pseudo-window-pin-background-"+f),i=m._find(e,".jqx-layout-pseudo-window-close-background-"+f),n=m._find(e,".jqx-layout-ribbon-header"),a=m._find(e,".jqx-ribbon"),r=0;r<t.length;r++){var d=T(t[r]);d.removeClass(m.toThemeProperty("jqx-layout-pseudo-window-title-"+f)),d.addClass(m.toThemeProperty("jqx-layout-pseudo-window-title-"+_))}for(var l=0;l<o.length;l++){var s=T(o[l]);s.removeClass(m.toThemeProperty("jqx-layout-pseudo-window-pin-background-"+f)),s.addClass(m.toThemeProperty("jqx-layout-pseudo-window-pin-background-"+_))}for(var u=0;u<i.length;u++){var c=T(i[u]);c.removeClass(m.toThemeProperty("jqx-layout-pseudo-window-close-background-"+f)),c.addClass(m.toThemeProperty("jqx-layout-pseudo-window-close-background-"+_))}for(var p=0;p<n.length;p++){var h=T(n[p]);h.removeClass(m.toThemeProperty("jqx-layout-ribbon-header-"+f)),h.addClass(m.toThemeProperty("jqx-layout-ribbon-header-"+_))}for(var g=0;g<a.length;g++)T(a[g]).jqxRibbon({rtl:y})}var _=y?"rtl":"ltr",f=y?"ltr":"rtl";if(o(m.host),m.dockingLayout)for(var i=m._find(document.body,"."+m.element.id+"FloatGroup"),n=0;n<i.length;n++){var a=T(i[n]);o(a),a.jqxWindow({rtl:y})}}}else m.render()},_raiseEvent:function(e,t){void 0===t&&(t={owner:null});var o=this.events[e];t.owner=this;var i=new T.Event(o);return i.owner=this,i.args=t,i.preventDefault&&i.preventDefault(),this.host.trigger(i)},_setSize:function(){var e=this;e.element.style.width=e._toPx(e.width),e.element.style.height=e._toPx(e.height)},_addClasses:function(){this.host.addClass(this.toThemeProperty("jqx-layout jqx-widget jqx-widget-content jqx-rc-all"))},_getPercentage:function(e,t,o){return e/t.widget[o]()*100},_addHandlers:function(){var h,g,m=this,e=m.element.id;function o(e,t){for(var o=0;o<m._coordinates.length;o++){var i=m._coordinates[o];if(e>=i.x.from&&e<=i.x.to&&t>=i.y.from&&t<=i.y.to){"horizontal"===i.orientation?m.element.style.cursor="col-resize":m.element.style.cursor="row-resize",m._resize={allowed:!0,widget:i.widget,side:i.side};break}m.element.style.cursor="default",m._resize.allowed=!1}}function i(e){if(!0===m._resize.allowed){var t=m._resize.widget,o=t.current.parent,i=m._percentToPx("width",t.current.minWidth,o),n=m._percentToPx("height",t.current.minHeight,o),a=o.items[t.current.index-1],r=o.items[t.current.index+1];switch(m._resizeStartPosition={x:e.pageX,y:e.pageY},i=i||m._percentToPx("width",m.minGroupWidth,o),i=Math.min(i,t.width()),t.current.minWidth=i,n=n||m._percentToPx("height",m.minGroupHeight,o),n=Math.min(n,t.height()),t.current.minHeight=n,m._resize.side){case"left":var d=(d=m._percentToPx("width",a.minWidth,o))||m._percentToPx("width",m.minGroupWidth,o);h=a.widget.offset().left+d,g=t.offset().left+t.width()-i;break;case"right":var l=(l=m._percentToPx("width",r.minWidth,o))||m._percentToPx("width",m.minGroupWidth,o);h=t.offset().left+i,g=r.widget.offset().left+r.widget.width()-l;break;case"top":var s=(s=m._percentToPx("height",a.minHeight,o))||m._percentToPx("height",m.minGroupHeight,o);h=a.widget.offset().top+s,g=t.offset().top+t.height()-n;break;case"bottom":var u=(u=m._percentToPx("height",r.minHeight,o))||m._percentToPx("height",m.minGroupHeight,o);h=t.offset().top+n,g=r.widget.offset().top+r.widget.height()-u}var c,p=function(e,t){var o;return t=void 0===t?{top:0,left:0}:t,e!==top&&(o=e.frameElement.getBoundingClientRect(),t.left+=o.left,t.top+=o.top,t=p(e.parent,t)),t};m._clickedToResize=!0,m._overlay[0].style.display="block","left"===m._resize.side||"right"===m._resize.side?(m._verticalFeedback[0].style.height=m._resize.widget.height()+"px",c=m._ie7?p(window).top:0,m._verticalFeedback.offset({top:m._resize.widget.offset().top-m.host.offset().top+document.body.scrollTop-c})):(m._horizontalFeedback[0].style.width=m._resize.widget.width()+"px",c=m._ie7?p(window).left:0,m._horizontalFeedback.offset({left:m._resize.widget.offset().left-m.host.offset().left+document.body.scrollLeft+1-c}))}}function y(e,t,o,i,n){var a=n.charAt(0).toUpperCase()+n.slice(1),r=t.parent,d=e?(l=m._percentToPx(n,o["min"+a],r),parseFloat(o[n])/100*t.parent.widget[n]()-i):(l=m._percentToPx(n,t["min"+a],r),parseFloat(t[n])/100*t.parent.widget[n]()-i),l=l||m._percentToPx(n,m["minGroup"+a],r);return d<l?l:d}function t(e){if(!0===m._clickedToResize){function t(){m._clickedToResize=!1,m._overlay[0].style.display="none",m._verticalFeedback[0].style.display="none",m._horizontalFeedback[0].style.display="none"}var o,i,n,a,r,d,l=e.pageX,s=e.pageY,u=m._resize.widget.current,c=m._resize.widget.offset(),p=c.left,h=c.top;if(e.pageX===m._resizeStartPosition.x&&e.pageY===m._resizeStartPosition.y)return void t();if("left"===m._resize.side||"right"===m._resize.side){if(d=u.width,n="left"===m._resize.side?(o=u.parent.items[u.index-1],l<(i=p)):(o=u.parent.items[u.index+1],(i=p+u.widget.width())<=l),0===(a=Math.abs(l-i)))return void t();if(n?(r=m._getPercentage(y(!0,u,o,a,"width"),u.parent,"width"),a=Math.abs(r-parseFloat(o.width)),o.width=r+"%",u.width=parseFloat(u.width)+a+"%"):(r=m._getPercentage(y(!1,u,o,a,"width"),u.parent,"width"),a=Math.abs(r-parseFloat(u.width)),u.width=r+"%",o.width=parseFloat(o.width)+a+"%"),u.width===d)return void t()}else{if(d=u.height,n="top"===m._resize.side?(o=u.parent.items[u.index-1],s<(i=h)):(o=u.parent.items[u.index+1],(i=h+u.widget.height())<=s),0===(a=Math.abs(s-i)))return void t();if(n?(r=m._getPercentage(y(!0,u,o,a,"height"),u.parent,"height"),a=Math.abs(r-parseFloat(o.height)),o.height=r+"%",u.height=parseFloat(u.height)+a+"%"):(r=m._getPercentage(y(!1,u,o,a,"height"),u.parent,"height"),a=Math.abs(r-parseFloat(u.height)),u.height=r+"%",o.height=parseFloat(o.height)+a+"%"),u.height===d)return void t()}t(),m.render(),m._raiseEvent("1",{item:u})}}function n(e){var t,o;!0===m._clickedToResize&&(t=e.pageX,o=e.pageY,"left"===m._resize.side||"right"===m._resize.side?(m._verticalFeedback[0].style.display="block",t<h?(t=h,m._verticalFeedback.addClass(m.toThemeProperty("jqx-layout-resize-feedback-warning"))):g<t?(t=g,m._verticalFeedback.addClass(m.toThemeProperty("jqx-layout-resize-feedback-warning"))):m._verticalFeedback.removeClass(m.toThemeProperty("jqx-layout-resize-feedback-warning")),m._verticalFeedback.offset({left:t-2})):(m._horizontalFeedback[0].style.display="block",o<h?(o=h,m._horizontalFeedback.addClass(m.toThemeProperty("jqx-layout-resize-feedback-warning"))):g<o?(o=g,m._horizontalFeedback.addClass(m.toThemeProperty("jqx-layout-resize-feedback-warning"))):m._horizontalFeedback.removeClass(m.toThemeProperty("jqx-layout-resize-feedback-warning")),m._horizontalFeedback.offset({top:o-2}),m._horizontalFeedback.offset({left:m._resize.widget.offset().left+document.body.scrollLeft+1})))}if(m._resize={allowed:!1},m._clickedToResize=!1,m._docUP=t,m._touchDevice?(m.addHandler(T(document),"touchstart.jqxDockingLayout"+e,function(e){var t=e.originalEvent.touches[0];o(t.pageX,t.pageY),i(t)}),m.addHandler(T(document),"touchmove.jqxDockingLayout"+e,function(e){n(e.originalEvent.touches[0])}),m.addHandler(T(document),"touchend.jqxDockingLayout"+e,function(e){t(e.originalEvent.changedTouches[0])})):(m.addHandler(m.host,"mousemove.jqxLayout"+e,function(e){!1===m._clickedToResize&&(!m.dockingLayout||m.dockingLayout&&!0!==m.dockingLayout._windowDragged)&&o(e.pageX,e.pageY)}),m.addHandler(T(document),"mousemove.jqxLayout"+e,function(e){n(e)}),m.addHandler(m.host,"mousedown.jqxLayout"+e,function(e){i(e)}),m.addHandler(T(document),"mouseup.jqxLayout"+e,function(e){t(e)})),m.addHandler(T(document),"selectstart.jqxLayout"+e,function(){if(!0===m._clickedToResize)return!1}),m.dockingLayout)try{""===document.referrer&&!window.frameElement||(window.top.document.addEventListener?window.top.document.addEventListener("mouseup",m._mouseupHandler,!1):window.top.document.attachEvent&&window.top.document.attachEvent("onmouseup",m._mouseupHandler))}catch(e){}},_removeHandlers:function(){var e=this,t=e.element.id;if(e._touchDevice?(e.removeHandler(T(document),"touchstart.jqxLayout"+t),e.removeHandler(T(document),"touchmove.jqxLayout"+t),e.removeHandler(T(document),"touchend.jqxLayout"+t)):(e.removeHandler(e.host,"mousemove.jqxLayout"+t),e.removeHandler(T(document),"mousemove.jqxLayout"+t),e.removeHandler(e.host,"mousedown.jqxLayout"+t),e.removeHandler(T(document),"mouseup.jqxLayout"+t)),e.removeHandler(T(document),"selectstart.jqxLayout"+t),e.dockingLayout)try{""===document.referrer&&!window.frameElement||(window.top.document.removeEventListener?window.top.document.removeEventListener("mouseup",e._mouseupHandler,!1):window.top.document.detachEvent&&window.top.document.detachEvent("onmouseup",e._mouseupHandler))}catch(e){}if(e._oldIE)T("."+t+"FloatGroup").off("close");else for(var o=document.body.querySelectorAll("."+t+"FloatGroup"),i=0;i<o.length;i++)e.removeHandler(o[i],"close")},_createLayout:function(e,a,t){function o(e){var t,o=a.children(),i=o[0],n=o[1];i.innerHTML=e.title,void 0===(s=e.content?e.content:void 0!==(t=r._find(r._originalElement,'[data-container="'+e.contentContainer+'"]')[0])?t.innerHTML:"")&&(s=""),n.innerHTML=s}for(var r=this,i=t.type,n=0;n<e.length;n++){var d,l,s,u,c,p,h,g=e[n];switch(g.type){case"layoutGroup":var m,y,_=document.createElement("div"),f="jqx-layout-group-default";"horizontal"===g.orientation&&(f+=" jqx-layout-group-default-horizontal"),"host"===i?f+=" jqx-layout-group-root":(m="horizontal"===t.orientation?g.width:"100%",y="horizontal"===t.orientation?"100%":g.height,_.style.width=r._toPx(m),_.style.height=r._toPx(y)),_.className=r.toThemeProperty(f),a[0].appendChild(_),d=T(_);break;case"tabbedGroup":"floatGroup"!==i?((d=document.createElement("div")).className=r.toThemeProperty("jqx-layout-group-tabbed"),d.innerHTML='<div class="jqx-layout-window-header"><div></div></div><div><div class="jqx-layout-ribbon"><ul class="jqx-layout-ribbon-header jqx-layout-ribbon-header-'+(r.rtl?"rtl":"ltr")+'"></ul><div class="jqx-layout-ribbon-content"></div></div></div>',a[0].appendChild(d),d=T(d),r._addRightClickHandler(r._find(d,".jqx-layout-window-header")[0],d)):((d=document.createElement("div")).className="jqx-layout-ribbon",d.innerHTML='<ul class="jqx-layout-ribbon-header jqx-layout-ribbon-header-'+(r.rtl?"rtl":"ltr")+'"></ul><div class="jqx-layout-ribbon-content"></div>',a.children()[1].appendChild(d),d=T(d));break;case"documentGroup":case"autoHideGroup":_=document.createElement("div");var w="";"documentGroup"===g.type&&(w="jqx-layout-ribbon-header jqx-layout-ribbon-header-"+(r.rtl?"rtl":"ltr")),_.innerHTML='<ul class="'+w+'"></ul><div></div>',r._ie7&&"autoHideGroup"===g.type&&(_.style.zIndex=9999-500*n),a[0].appendChild(_),d=T(_);break;case"floatGroup":if(r._rendered&&!0!==g.programmaticallyAdded)continue;if(!r.dockingLayout)throw new Error("Float groups are only available in the jqxDockingLayout widget. Initialize a jqxDockingLayout (requires jqxdockinglayout.js) instead of a jqxLayout.");(d=document.createElement("div")).className=r.toThemeProperty("jqx-docking-layout-group-floating"),d.innerHTML="<div></div><div></div>",a[0].appendChild(d),d=T(d),!0===g.programmaticallyAdded&&delete g.programmaticallyAdded;break;case"layoutPanel":if(d={},"tabbedGroup"===i){var v=r._find(a,".jqx-layout-window-header")[0];if(v&&""===T(v).text()&&(v.firstChild.innerHTML=g.title),(c=document.createElement("li")).innerHTML=g.title,r._find(a,".jqx-layout-ribbon-header")[0].appendChild(c),s=r._rendered||g.docked?g.detachedContent:void 0!==(l=r._find(r._originalElement,'[data-container="'+g.contentContainer+'"]')[0])?l.innerHTML:"",u=document.createElement("div"),"string"==typeof s)u.innerHTML=s;else for(var x=0;x<s.length;x++)T(s[x]).appendTo(u);r._find(a,".jqx-layout-ribbon-content")[0].appendChild(u),r._addRightClickHandler(c,d)}else if("autoHideGroup"===i){if(p=a.children(),(c=document.createElement("li")).innerHTML=g.title,p[0].appendChild(c),s=r._rendered?g.detachedContent:void 0!==(l=r._find(r._originalElement,'[data-container="'+g.contentContainer+'"]')[0])?l.innerHTML:"",u=document.createElement("div"),"string"==typeof s)u.innerHTML=s;else for(var b=0;b<s.length;b++)s[b].appendTo(u);var j="left"===t.alignment||"right"===t.alignment?(void 0!==t.popupContentSize&&(u.style.width=parseInt(t.popupContentSize,10)+"px"),"jqx-layout-group-auto-hide-content-vertical"):(void 0!==t.popupContentSize&&(u.style.height=parseInt(t.popupContentSize,10)+"px"),"jqx-layout-group-auto-hide-content-horizontal");u.className=r.toThemeProperty(j);var q=document.createElement("div"),k=document.createElement("div");k.className="jqx-layout-window",k.innerHTML="<div><div>"+g.title+"</div></div>",k.appendChild(u),q.appendChild(k),p[1].appendChild(q),r._addRightClickHandler(k,d)}else"floatGroup"===i&&o(g);break;case"documentPanel":if(d={},"floatGroup"===i)o(g);else{if(p=a.children(),(c=document.createElement("li")).innerHTML=g.title,p[0].appendChild(c),s=r._rendered||g.docked?g.detachedContent:void 0!==(l=r._find(r._originalElement,'[data-container="'+g.contentContainer+'"]')[0])?l.innerHTML:"",u=document.createElement("div"),"string"==typeof s)u.innerHTML=s;else for(var C=0;C<s.length;C++)s[C].appendTo(u);p[1].appendChild(u),r._addRightClickHandler(c,d)}}g.items&&0<g.items.length&&r._createLayout(g.items,d,g),r._createWidget(t,a,g,d,n),r.dockingLayout&&("documentGroup"===g.type||"tabbedGroup"===g.type||"layoutGroup"===g.type&&0===g.items.length)&&(h={element:d,width:d.width(),height:d.height(),offset:d.offset(),settings:g},r._overlayGroups.push(h),"floatGroup"===g.parent.type&&(g.parent._overlayGroup=h))}},_createWidget:function(i,e,r,d,t){var n,a,l=this,o="horizontal"===i.orientation?r.width:"100%",s="horizontal"===i.orientation?"100%":r.height,u=!1;function c(){for(var e=0,t=0;t<r.items.length;t++)if(!0===r.items[t].selected){e=t;break}return r.items[e].selected=!0,e}switch(r.parent=i,r.widget=d,r.index=t,r.widget&&(r.widget.current=r),r.type){case"tabbedGroup":"floatGroup"!==i.type?(n=l._initWindowPanel(d,o,s,r.type),a=T(l._find(d,".jqx-layout-ribbon")[0]),l._tabbedGroupsList.push(r)):a=d,l.dockingLayout&&!1!==r.allowDrag&&(u=!0),a.jqxRibbon({theme:l.theme,width:"100%",height:"100%",position:"bottom",selectionMode:"click",animationType:"none",rtl:l.rtl,_roundedCorners:!1,initContent:function(e){var t=r.items[e];!t.initialized&&t.initContent&&(t.initContent(T(this._contentSections[e])),t.initialized=!0)},_removeByDrag:u,reorder:!0,_suppressReorder:!1}),a.on("select",function(e){var t,o;e.stopPropagation(),e.target.id===a[0].id&&(e.stopPropagation(),t=e.args.selectedIndex,r.items[t].selected=!0,o=T(T(a.children()[1]).children()[t]).text(),"floatGroup"!==i.type?n[0].innerHTML=o:l._find(i.widget,".jqx-window-header")[0].firstChild.innerHTML=o)}),a.on("unselect",function(e){e.stopPropagation(),e.target.id===a[0].id&&(r.items[e.args.unselectedIndex].selected=!1)}),a.on("reorder",function(e){l._swapPanelsInLayout(r.items,e.args.newIndex,e.args.oldIndex);var t=e.args.newIndex;setTimeout(function(){r.items[t]&&l._addRightClickHandler(l._find(a,".jqx-ribbon-item")[t],r.items[t].widget)},200)}),u&&(a.on("_removeByDrag",function(e){l.dockingLayout._removeByDragHandler(e,r,a),"floatGroup"===r.parent.type&&1===r.items.length&&a.jqxRibbon({_removeByDrag:!1})}),"floatGroup"!==r.parent.type&&l.dockingLayout._addTabbedGroupHandlers(r,d)),a.jqxRibbon("selectAt",c());break;case"documentGroup":l.dockingLayout&&!1!==r.allowDrag&&(u=!0),d.jqxRibbon({theme:l.theme,width:o,height:s,_roundedCorners:!1,position:"top",selectedIndex:c(),selectionMode:"click",animationType:"none",rtl:l.rtl,initContent:function(e){var t=r.items[e];!t.initialized&&t.initContent&&(t.initContent(T(this._contentSections[e])),t.initialized=!0)},_removeByDrag:u,reorder:!0,_suppressReorder:!1}),d.on("select",function(e){e.stopPropagation(),e.target.id===d[0].id&&(r.items[e.args.selectedIndex].selected=!0)}),d.on("unselect",function(e){e.stopPropagation(),e.target.id===d[0].id&&(r.items[e.args.unselectedIndex].selected=!1)}),d.on("reorder",function(e){l._swapPanelsInLayout(r.items,e.args.newIndex,e.args.oldIndex);var t=e.args.newIndex;setTimeout(function(){l._addRightClickHandler(l._find(d,".jqx-ribbon-item")[t],r.items[t].widget)},200)}),u&&d.on("_removeByDrag",function(e){l.dockingLayout._removeByDragHandler(e,r,d)}),d.addClass(l.toThemeProperty("jqx-layout-group-document"));break;case"autoHideGroup":d.jqxRibbon({theme:l.theme,width:o,height:s,mode:"popup",popupCloseMode:"click",position:r.alignment,selectionMode:"click",animationType:"none",_roundedCorners:!1,rtl:l.rtl,initContent:function(e){var t=T(this._contentSections[e]),o=T(l._find(t,".jqx-layout-window")[0]);o.current=d.current.items[e],o[0].style.border="none",l._initWindowPanel(o,"100%","100%",r.type),!r.items[e].initialized&&r.items[e].initContent&&(r.items[e].initContent(T(o.children()[1])),r.items[e].initialized=!0)}}),d.addClass(l.toThemeProperty("jqx-layout-group-auto-hide"));break;case"floatGroup":d.addClass(l.element.id+"FloatGroup"),d.jqxWindow({theme:l.theme,width:r.width,maxWidth:null,height:r.height,maxHeight:null,position:{x:r.position.x,y:r.position.y},showCloseButton:!1!==r.allowClose,closeButtonAction:"close",rtl:l.rtl,initContent:function(){var e=this._header,t=l._touchDevice?"touchstart":"mousedown",o=".jqxLayout"+l.element.id;if(l.addHandler(e,t+o,function(){var e,t,o;l.dockingLayout._windowDragged=!0,r._overlayGroup&&(r._overlayGroup.self=!0),l.dockingLayout._interval(),l.resizable&&(l._overlay[0].style.display="block"),"documentPanel"===r.items[0].type?(e={type:"documentGroup"},o=(t=r.items[0]).title):"layoutPanel"===r.items[0].type?(e={type:"tabbedGroup"},o=(t=r.items[0]).title):"tabbedGroup"===r.items[0].type&&(e=r.items[0]),l.dockingLayout._draggedWindow={fromGroup:e,fromPanel:t,title:o,element:d},l.dockingLayout._showEdgeOverlays()}),l.addHandler(e,"mouseup"+o,function(){l.dockingLayout._hideOverlays()}),"tabbedGroup"===r.items[0].type){for(var i=0,n=0;n<r.items[0].items.length;n++)if(r.items[0].items[n].selected){i=n;break}var a=r.items[0].items[i].title;d.jqxWindow("setTitle",a)}else r.items[0].initContent&&r.items[0].initContent(this._content)}}),d.on("moved",function(e){r.position.x=e.args.x,r.position.y=e.args.y,r._overlayGroup&&l.dockingLayout._updateOverlayGroup(r._overlayGroup),l.dockingLayout._windowCreate=!1,l.dockingLayout._hideOverlays(),l.dockingLayout._clearTextSelection()}),d.on("resized",function(e){r.width=e.args.width,r.height=e.args.height;var t=T(this).offset();r.position.x=t.left,r.position.y=t.top,r._overlayGroup&&l.dockingLayout._updateOverlayGroup(r._overlayGroup)}),d.on("close",function(e){e.stopPropagation(),e.target.id===d[0].id&&(l._raiseEvent("4",{element:d,floatGroup:d.current}),d.current._overlayGroup&&(d.current._overlayGroup.removed=!0,l.dockingLayout._updateOverlayGroups()),l.dockingLayout._removeFloatGroupObject(d.current))})}},_initWindowPanel:function(e,t,o,i){var n,a,r,d,l,s,u,c=this;e.addClass(c.toThemeProperty("jqx-widget jqx-widget-content jqx-window jqx-layout-pseudo-window jqx-rc-all")),c._ie7?(n=e.parent(),"tabbedGroup"===i?(a=parseInt(e.css("border-left-width"),10),r=parseInt(e.css("border-right-width"),10),d=parseInt(e.css("border-top-width"),10),l=parseInt(e.css("border-bottom-width"),10),u="100%"===t?n.width():parseFloat(t)/100*n.width(),u-=a+r,s="100%"===o?n.height():parseFloat(o)/100*n.height(),s-=d+l,e.css({width:u,height:s})):"autoHideGroup"===i&&e.css({width:t,height:o})):(e[0].style.width=t,e[0].style.height=o);var p=c.rtl?"rtl":"ltr",h=T(e[0].firstChild),g=T(h[0].firstChild);g.addClass(c.toThemeProperty("jqx-layout-pseudo-window-title jqx-layout-pseudo-window-title-"+p)),h.addClass(c.toThemeProperty("jqx-widget-header jqx-window-header jqx-disableselect jqx-layout-pseudo-window-header")),c._ie7&&(h.css("width",h.width()-parseInt(h.css("padding-left"),10)-parseInt(h.css("padding-right"),10)),h.css("height",h.height()-parseInt(h.css("padding-top"),10)-parseInt(h.css("padding-bottom"),10)));var m,y,_,f=0;if((c.dockingLayout?"layoutPanel"===e.current.type?void 0===e.current.parent.allowClose||!0===e.current.parent.allowClose:void 0===e.current.allowClose||!0===e.current.allowClose:"layoutPanel"===e.current.type?!0===e.current.parent.allowClose:!0===e.current.allowClose)&&((m=document.createElement("div")).className=c.toThemeProperty("jqx-window-close-button-background jqx-layout-pseudo-window-close-background jqx-layout-pseudo-window-close-background-"+p),m.setAttribute("title","Close"),m.innerHTML='<div class="'+c.toThemeProperty("jqx-window-close-button jqx-icon-close jqx-layout-pseudo-window-close-icon")+'"></div>',h[0].appendChild(m),f+=16),"tabbedGroup"===i&&!1!==e.current.allowPin||"autoHideGroup"===i&&!1!==e.current.parent.allowUnpin){switch(i){case"tabbedGroup":_="jqx-layout-pseudo-window-pin-icon",e.pinned=!1;break;case"autoHideGroup":_="jqx-layout-pseudo-window-pinned-icon",e.pinned=!0}(y=document.createElement("div")).className=c.toThemeProperty("jqx-window-close-button-background jqx-layout-pseudo-window-pin-background"),y.setAttribute("title","Auto Hide"),y.innerHTML='<div class="'+c.toThemeProperty(_)+'"></div>',m?y.className+=" "+c.toThemeProperty("jqx-layout-pseudo-window-pin-background-"+p):!1===c.rtl&&(y.style.right="0px"),h[0].appendChild(y),f+=16,c.dockingLayout&&"autoHideGroup"===i&&c.dockingLayout._addAutoHideGroupHandlers(e.current,h,e.current.title,e.children()[1])}g[0].style.maxWidth=c._toPx(h.width()-f);var w=e.children()[1];return w.style.height=c._toPx(1+e.height()-h.outerHeight()),w.style.marginLeft="-1px",w.style.marginRight="-1px",c._addWindowPanelHandlers(m,y,e),g},_addWindowPanelHandlers:function(e,t,o){var i=this,n=i.element.id,a=o.current,r=a.type;e&&i.addHandler(e,"click.jqxLayout"+n,function(){var e;"tabbedGroup"===r&&1<a.items.length?(e=i._find(o,".jqx-ribbon-item-selected")[0]._index,i._close(a.items[e])):(o.initAnimate&&o.initAnimate(),o.fadeOut({complete:function(){i._close(a),o.remove()}}))}),t&&i.addHandler(t,"click.jqxLayout"+n,function(){"tabbedGroup"===r&&!0===a.pinValid?i._pin(a):"layoutPanel"===r&&i._unPin(a.parent)})},_getGroupCoordinates:function(){var p=this;function h(e){return"layoutGroup"===e||"tabbedGroup"===e||"documentGroup"===e}p._coordinates=[],function e(t){for(var o=0;o<t.length;o++){var i,n,a,r,d,l,s,u,c=t[o];h(c.type)&&(i=t[o-1],n=t[o+1],a=c.widget.offset(),i&&h(i.type)&&(u="horizontal"===c.parent.orientation?(d=10+(r=a.left-5),s=(l=a.top-5)+c.widget.height()+10,"left"):(d=(r=a.left-5)+c.widget.width()+10,s=10+(l=a.top-5),"top"),p._coordinates.push({x:{from:r,to:d},y:{from:l,to:s},widget:c.widget,side:u,orientation:c.parent.orientation})),n&&h(n.type)&&(u="horizontal"===c.parent.orientation?(d=10+(r=a.left+c.widget.width()-5),s=(l=a.top-5)+c.widget.height()+10,"right"):(d=(r=a.left-5)+c.widget.width()+10,s=10+(l=a.top+c.widget.height()-5),"bottom"),p._coordinates.push({x:{from:r,to:d},y:{from:l,to:s},widget:c.widget,side:u,orientation:c.parent.orientation})),c.items&&e(c.items))}}(p.layout[0].items)},_close:function(o){var e,t,i,n,a,r=this;if(o.removed=!0,"tabbedGroup"===o.type||"autoHideGroup"===o.type||"documentGroup"===o.type)(a="tabbedGroup"===o.type?T(r._find(o.widget,".jqx-ribbon")[0]):o.widget).jqxRibbon("destroy"),o.parent.items&&(e=o.parent.items[o.index-1],t=o.parent.items[o.index+1],i="vertical"===o.parent.orientation?"height":"width",n=function(e){var t=parseFloat(e[i])+parseFloat(o[i])+"%";"documentGroup"===e.type?"height"==i?e.widget.jqxRibbon({height:t}):e.widget.jqxRibbon({width:t}):"layoutGroup"!==e.type&&"tabbedGroup"!==e.type||(e.widget[0].style[i]=t),e[i]=t,r._raiseEvent("1",{item:e})},e&&"autoHideGroup"!==e.type&&"floatGroup"!==e.type?n(e):t&&"autoHideGroup"!==t.type&&"floatGroup"!==t.type&&n(t));else if("layoutPanel"===o.type){if("tabbedGroup"===o.parent.type)return(a=T(r._find(o.parent.widget,".jqx-ribbon")[0])).jqxRibbon("removeAt",o.index),r._updateLayout(r.layout),void(0===o.index?a.jqxRibbon("selectAt",0):a.jqxRibbon("selectAt",o.index-1));if("autoHideGroup"===o.parent.type){(a=o.parent.widget).jqxRibbon("removeAt",o.index);for(var d=a.children(),l=0,s=0;s<d.length;s++)if("ul"===d[s].nodeName.toLowerCase()){l=T(d[s]).children().length;break}0===l&&r._close(a.current)}}r._updateLayout(r.layout),r.render()},_updateLayout:function(e){for(var t=0;t<e.length;t++)if(!0===e[t].removed){e.splice(t,1);for(var o=0;o<e.length;o++)e[o].index=o}else e[t].items&&this._updateLayout(e[t].items)},_pin:function(e){var t,o,i,n,a=this,r=e.parent,d="top"===(i=e.alignment?e.alignment:(o=Math.abs(e.parent.items.length-1-e.index),Math.abs(0-e.index)<o?"horizontal"===e.parent.orientation?"left":"top":"horizontal"===e.parent.orientation?"right":"bottom"))||"left"===i?e.index+1:e.index-1;"number"==typeof(n="left"===i||"right"===i?(t="width",e.pinnedWidth):(t="height",e.pinnedHeight))&&(n=a._getPercentage(n,r,t)+"%"),n||("width"===t?n=8e3/e.parent.widget.width()+"%":"height"===t&&(n=3e3/e.parent.widget.height()+"%")),a._detachContent(e.items,!0);var l={type:"autoHideGroup",alignment:i,items:e.items};l[t]=n,l["min"+t.charAt(0).toUpperCase()+t.slice(1)]=e["min"+t.charAt(0).toUpperCase()+t.slice(1)],l["unpinned"+t.charAt(0).toUpperCase()+t.slice(1)]=e[t],l.allowDrag=e.allowDrag,l.allowDrop=e.allowDrop,l.allowClose=e.allowClose;for(var s=0;s<l.items.length;s++)l.items[s].allowClose=e.allowClose;e.popupContentSize&&(l.popupContentSize=e.popupContentSize);var u=r.items[d];u[t]=parseFloat(u[t])+parseFloat(e[t])-parseFloat(n)+"%",r.items.splice(e.index,0,l),e.removed=!0,T(a._find(e.widget,".jqx-ribbon")[0]).jqxRibbon("destroy"),e.widget.remove(),a._updateLayout(a.layout),a.render(),a._raiseEvent("1",{item:u}),a._raiseEvent("2",{item:l})},_unPin:function(e){var t,o,i=this,n=e.parent,a=e.alignment,r="top"===a||"left"===a?e.index+1:e.index-1,d=n.items[r],l="left"===a||"right"===a?(t="width",e.unpinnedWidth):(t="height",e.unpinnedHeight);l=l||"10%",i._detachContent(e.items,!0);var s,u,c={type:"tabbedGroup",alignment:a,items:e.items};c["pinned"+t.charAt(0).toUpperCase()+t.slice(1)]=e[t],c.allowDrag=e.allowDrag,c.allowDrop=e.allowDrop,c.allowClose=e.allowClose,e.popupContentSize&&(c.popupContentSize=e.popupContentSize),o=d?(s=parseFloat(d[t])+parseFloat(e[t])-parseFloat(l)+"%",u=(u=d["min"+t.charAt(0).toUpperCase()+t.slice(1)])||i["minGroup"+t.charAt(0).toUpperCase()+t.slice(1)],parseFloat(s)<i._getPercentage(u,n,t)?(l=e[t],s=i._getPercentage(u,n,t)+"%",c["min"+t.charAt(0).toUpperCase()+t.slice(1)]=e.widget.width()):c["min"+t.charAt(0).toUpperCase()+t.slice(1)]=e["min"+t.charAt(0).toUpperCase()+t.slice(1)],c[t]=l,d[t]=s,d):(c["min"+t.charAt(0).toUpperCase()+t.slice(1)]=e["min"+t.charAt(0).toUpperCase()+t.slice(1)],c[t]="100%",c),n.items.splice(e.index,0,c),e.removed=!0,e.widget.jqxRibbon("destroy"),i._updateLayout(i.layout),i.render(),i._raiseEvent("1",{item:o}),i._raiseEvent("3",{item:c})},_copyItem:function(e,t){var o={};for(var i in e)if(e.hasOwnProperty(i)&&"parent"!==i&&"widget"!==i&&"initialized"!==i)if("position"===i)o.position={x:e.position.x,y:e.position.y};else if("items"===i){for(var n=[],a=0;a<e.items.length;a++)this._copyItem(e.items[a],n);o.items=n}else o[i]=e[i];t.push(o)},_addResizeFeedbacks:function(){var e=this;e._horizontalFeedback=document.createElement("div"),e._horizontalFeedback.className=e.toThemeProperty("jqx-fill-state-normal jqx-layout-resize-feedback jqx-layout-resize-feedback-horizontal"),e._verticalFeedback=document.createElement("div"),e._verticalFeedback.className=e.toThemeProperty("jqx-fill-state-normal jqx-layout-resize-feedback jqx-layout-resize-feedback-vertical"),e._overlay=document.createElement("div"),e._overlay.className=e.toThemeProperty("jqx-layout-overlay"),e.dockingLayout&&e.dockingLayout._windowDragged&&(e._overlay.style.display="block"),e.element.appendChild(e._horizontalFeedback),e.element.appendChild(e._verticalFeedback),e.element.appendChild(e._overlay),e._horizontalFeedback=T(e._horizontalFeedback),e._verticalFeedback=T(e._verticalFeedback),e._overlay=T(e._overlay)},_detachContent:function(e,o){var i=this;function t(e){var t;!0===e.prevent?e.prevent=!1:(t=i._find(e.parent.widget,".jqx-ribbon-content-section")[e.index],r=i._detachChildNodes(t),T(t).remove(),e.detachedContent=r,!0===o&&(e.prevent=!0))}for(var n=e.length-1;0<=n;n--){var a,r,d,l=e[n],s=l.type;"layoutGroup"===s||"tabbedGroup"===s||"documentGroup"===s||"autoHideGroup"===s||"floatGroup"===s?l.items&&0<l.items.length&&this._detachContent(l.items):"layoutPanel"===s?"tabbedGroup"===l.parent.type?t(l):"autoHideGroup"===l.parent.type&&(!0===l.prevent?l.prevent=!1:("left"===l.parent.alignment||"right"===l.parent.alignment?(a=i._find(l.parent.widget,".jqx-layout-group-auto-hide-content-vertical")[n],r=i._detachChildNodes(a),T(a).remove()):(d=i._find(l.parent.widget,".jqx-layout-group-auto-hide-content-horizontal")[n],r=i._detachChildNodes(d),T(d).remove()),l.detachedContent=r,!0===o&&(l.prevent=!0))):"documentPanel"===s&&t(l)}},_pxToPercent:function(o,i){function e(e,t){return(100*(e=parseInt(e,10))/(i?n.element["offset"+t]:o["initialPx"+t])).toString()+"%"}for(var n=this,t=0;t<o.items.length;t++){var a=o.items[t];void 0!==a.width?(a.initialPxWidth=a.width,a.width=e(a.width,"Width")):a.initialPxWidth=o.initialPxWidth,void 0!==a.height?(a.initialPxHeight=a.height,a.height=e(a.height,"Height")):a.initialPxHeight=o.initialPxHeight,void 0!==a.unpinnedWidth&&(a.unpinnedWidth=e(a.unpinnedWidth,"Width")),void 0!==a.pinnedWidth&&(a.pinnedWidth=e(a.pinnedWidth,"Width")),void 0!==a.unpinnedHeight&&(a.unpinnedHeight=e(a.unpinnedHeight,"Height")),void 0!==a.pinnedHeight&&(a.pinnedHeight=e(a.pinnedHeight,"Height")),"layoutGroup"===a.type&&a.items&&0<a.items.length&&n._pxToPercent(a,!1)}},_percentToPx:function(e,t,o){return void 0===t?void 0:"string"!=typeof t||"string"==typeof t&&"%"!==t.charAt(t.length-1)?parseFloat(t):parseFloat(t.slice(0,t.length-1))/100*o.widget[e]()},_swapPanelsInLayout:function(e,t,o){var i=e[t];e[t]=e[o],e[t].index=t,e[o]=i,e[o].index=o},_initMenu:function(){var i=this;if(!i._menuInitialized){function t(e,t,o){i._menu.jqxMenu("disable","dockOption"+n,e),i._menu.jqxMenu("disable","autoHideOption"+n,t),i._menu.jqxMenu("disable","closeOption"+n,o)}var n=i.element.id,e="";if(!i.host.jqxMenu)throw new Error("jqxLayout: Missing reference to jqxmenu.js.");i.dockingLayout&&(e='<li id="floatOption'+n+'">Float</li>');var o=document.createElement("div");o.className=i.toThemeProperty("jqx-layout-context-menu jqx-layout-context-menu-"+n),o.innerHTML="<ul>"+e+'<li id="dockOption'+n+'">Dock</li><li id="autoHideOption'+n+'" style="white-space: nowrap;">Auto Hide</li><li id="closeOption'+n+'">Close</li></ul>',i._menu=T(o),document.body.appendChild(o),i._menu.jqxMenu({theme:i.theme,width:100,height:"auto",autoOpenPopup:!1,mode:"popup",popupZIndex:99999,rtl:i.rtl}),i._menuInitialized=!0,i.addHandler(i._menu,"itemclick.jqxLayout"+n,function(e){i._handleMenuItemClick(T(e.target).text())});function a(e){return i.dockingLayout?!1===e.allowClose:!0!==e.allowClose}i.addHandler(i._menu,"shown.jqxLayout"+n,function(){switch(i._contextMenuTarget.type){case"tabbedGroup":t(!0,!1===i._contextMenuTarget.allowPin||!1===i._contextMenuTarget.pinValid,a(i._contextMenuTarget));break;case"layoutPanel":var e=i._contextMenuTarget.parent;"tabbedGroup"===e.type?t(!0,!1===e.allowPin||i._isMiddleTabbedGroup(e),a(e)):"autoHideGroup"===e.type&&t(!1===e.allowUnpin,!0,a(i._contextMenuTarget));break;case"documentPanel":t(!0,!0,a(i._contextMenuTarget))}})}},_addRightClickHandler:function(e,i){var n=this;!0===n.contextMenu&&(n.addHandler(e,"mousedown.jqxLayout"+n.element.id,function(e){var t,o;!0===n.contextMenu&&(e.which&&3===e.which||e.button&&2===e.button)&&(t=document.body.scrollTop,o=T(window).scrollLeft(),n._contextMenuTarget=i.current,n._menu.jqxMenu("open",parseInt(e.clientX,10)+5+o,parseInt(e.clientY,10)+5+t))}),n.addHandler(e,"contextmenu.jqxLayout"+n.element.id,function(){if(!0===n.contextMenu)return!1}))},_handleMenuItemClick:function(e){var t,o=this,i=o._contextMenuTarget.type,n=o._contextMenuTarget.parent;switch(e){case"Float":switch(i){case"tabbedGroup":o.dockingLayout._floatTabbedGroup(o._contextMenuTarget,o._contextMenuTarget.widget);break;case"layoutPanel":"tabbedGroup"===n.type?o.dockingLayout._removeByDragHandler(void 0,n,n.widget,o._contextMenuTarget.index,!1):"autoHideGroup"===n.type&&(t=o._find(T(T(o._find(o._contextMenuTarget.parent.widget,".jqx-ribbon-content")[0]).children()[o._contextMenuTarget.index]),".jqx-layout-window")[0].firstChild,o.dockingLayout._floatAutoHideGroup(o._contextMenuTarget,o._contextMenuTarget.title,t));break;case"documentPanel":o.dockingLayout._removeByDragHandler(void 0,n,n.widget,o._contextMenuTarget.index,!1)}break;case"Dock":o._unPin(o._contextMenuTarget.parent);break;case"Auto Hide":switch(i){case"tabbedGroup":o._pin(o._contextMenuTarget);break;case"layoutPanel":o._pin(o._contextMenuTarget.parent)}break;case"Close":switch(i){case"tabbedGroup":o._close(o._contextMenuTarget);break;case"layoutPanel":1<o._contextMenuTarget.parent.items.length?o._close(o._contextMenuTarget):o._close(o._contextMenuTarget.parent);break;case"documentPanel":o._closeDocumentPanel(o._contextMenuTarget.index,o._contextMenuTarget.parent.items,o._contextMenuTarget.parent,o._contextMenuTarget.parent.widget,!1)}}},_closeDocumentPanel:function(e,t,o,i,n){if(!1===n&&i.jqxRibbon("removeAt",e),1<t.length){var a=!1;t[e].removed=!0,this._updateLayout(t);for(var r=0;r<t.length;r++)if(!0===t[r].selected){a=!0;break}setTimeout(function(){!1===a?t[e]?i.jqxRibbon("selectAt",e):i.jqxRibbon("selectAt",e-1):i.jqxRibbon("render")},0)}else this._close(o)},_isMiddleTabbedGroup:function(e){return!(0===e.index||e.index===e.parent.items.length-1)},_validateTabbedGroup:function(e){var t,o=!0;(o=o&&1<e.parent.items.length)&&2===e.parent.items.length&&(t=0===e.index?1:0,"autoHideGroup"===e.parent.items[t].type&&(o=!1)),o=o&&(o&&!this._isMiddleTabbedGroup(e)),!1===(e.pinValid=o)&&T(this._find(e.widget,".jqx-layout-pseudo-window-pin-background")[0]).addClass("jqx-fill-state-disabled")},_mouseupHandler:function(e){try{this.dockingLayout&&(this._docUP(e),this.dockingLayout._windowCreate=!1,this.dockingLayout._hideOverlays())}catch(e){}},_toPx:function(e){return"number"==typeof e?e+"px":e},_find:function(e,t){return this._oldIE?e.find(t):e[0]?e[0].querySelectorAll(t):e.querySelectorAll(t)},_detachChildNodes:function(e){if(void 0===e)return[];var t=[],o=e.childNodes;if(void 0!==o)for(;0<o.length;)t.push(T(o[0]).detach());return t}})}(jqxBaseFramework);