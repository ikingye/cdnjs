!function(te){function c(r,e){return this.owner=r,this.datafield=null,this.displayfield=null,this.text="",this.createfilterpanel=null,this.sortable=!0,this.hideable=!0,this.editable=!0,this.hidden=!1,this.adaptivehidden=!1,this.groupable=!0,this.renderer=null,this.cellsrenderer=null,this.checkchange=null,this.threestatecheckbox=!1,this.buttonclick=null,this.columntype=null,this.cellsformat="",this.align="left",this.cellsalign="left",this.width="auto",this.minwidth=25,this.maxwidth="auto",this.pinned=!1,this.visibleindex=-1,this.filterable=!0,this.filter=null,this.filteritems=[],this.resizable=!0,this.initeditor=null,this.createeditor=null,this.createwidget=null,this.initwidget=null,this.destroywidget=null,this.destroyeditor=null,this.geteditorvalue=null,this.validation=null,this.classname="",this.cellclassname="",this.cellendedit=null,this.cellbeginedit=null,this.cellvaluechanging=null,this.aggregates=null,this.aggregatesrenderer=null,this.menu=!0,this.createfilterwidget=null,this.filtertype="default",this.filtercondition=null,this.rendered=null,this.exportable=!0,this.exporting=!1,this.draggable=!0,this.nullable=!0,this.clipboard=!0,this.selectable=!1,this._applyStyle=function(){var e=this;return e.hovered?(e.style.headerBackgroundHoveredColor&&(e.element.style.backgroundColor=e.style.headerBackgroundHoveredColor),void(e.style.headerHoveredColor&&(e.element.style.color=e.style.headerHoveredColor))):e.selected?(e.style.headerBackgroundSelectedColor&&(e.element.style.backgroundColor=e.style.headerBackgroundSelectedColor),void(e.style.headerSelectedColor&&(e.element.style.color=e.style.headerSelectedColor))):(e.style.headerBackgroundColor?e.element.style.backgroundColor=e.style.headerBackgroundColor:e.element.style.backgroundColor="",void(e.style.headerColor?e.element.style.color=e.style.headerColor:e.element.style.color=""))},this._applyCellStyle=function(e){var t=this,i=!1;if(e.length)for(var r=0;r<e.length;r++)this._applyCellStyle(e[r]);else if((t.style.backgroundColor||t.style.color||t.style.hoveredColor||t.style.hoveredColor||t.style.backgroundSelectedColor||t.style.selectedColor)&&(i=!0),i){if(0<=e.className.indexOf("hover"))return t.style.backgroundHoveredColor&&(e.style.backgroundColor=t.style.backgroundHoveredColor),void(t.style.hoveredColor&&(e.style.color=t.style.hoveredColor));if(0<=e.className.indexOf("selected"))return t.style.backgroundSelectedColor&&(e.style.backgroundColor=t.style.backgroundSelectedColor),void(t.style.selectedColor&&(e.style.color=t.style.selectedColor));t.style.backgroundColor&&(e.style.backgroundColor=t.style.backgroundColor),t.style.color&&(e.style.color=t.style.color)}},this.style={headerBackgroundColor:"",headerColor:"",headerBackgroundHoveredColor:"",headerHoveredColor:"",headerBackgroundSelectedColor:"",headerSelectedColor:"",backgroundColor:"",color:"",backgroundHoveredColor:"",hoveredColor:"",backgroundSelectedColor:"",selectedColor:""},this.enabletooltips=!0,this.columngroup=null,this.filterdelay=800,this.reseteverpresentrowwidgetvalue=null,this.geteverpresentrowwidgetvalue=null,this.createeverpresentrowwidget=null,this.initeverpresentrowwidget=null,this.validateeverpresentrowwidgetvalue=null,this.destroyeverpresentrowwidget=null,this.getcolumnproperties=function(){return{nullable:this.nullable,sortable:this.sortable,hideable:this.hideable,hidden:this.hidden,groupable:this.groupable,width:this.width,align:this.align,editable:this.editable,minwidth:this.minwidth,maxwidth:this.maxwidth,resizable:this.resizable,datafield:this.datafield,text:this.text,exportable:this.exportable,cellsalign:this.cellsalign,pinned:this.pinned,cellsformat:this.cellsformat,columntype:this.columntype,classname:this.classname,cellclassname:this.cellclassname,menu:this.menu}},this.setproperty=function(e,t){var i;this[e]?(i=this[e],this[e]=t,this.owner._columnPropertyChanged(this,e,t,i)):this[e.toLowerCase()]&&(i=this[e.toLowerCase()],this[e.toLowerCase()]=t,this.owner._columnPropertyChanged(this,e.toLowerCase(),t,i))},this._initfields=function(e){if(null!=e){var t=this.that;if(te.jqx.hasProperty(e,"dataField")&&(this.datafield=te.jqx.get(e,"dataField")),te.jqx.hasProperty(e,"selectable")&&(this.selectable=te.jqx.get(e,"selectable")),te.jqx.hasProperty(e,"displayField")?this.displayfield=te.jqx.get(e,"displayField"):this.displayfield=this.datafield,te.jqx.hasProperty(e,"enableTooltips")&&(this.enabletooltips=te.jqx.get(e,"enableTooltips")),te.jqx.hasProperty(e,"text")?this.text=te.jqx.get(e,"text"):this.text=this.displayfield,te.jqx.hasProperty(e,"style")&&(this.style=te.jqx.get(e,"style")),te.jqx.hasProperty(e,"createfilterpanel")&&(this.createfilterpanel=te.jqx.get(e,"createfilterpanel")),te.jqx.hasProperty(e,"sortable")&&(this.sortable=te.jqx.get(e,"sortable")),te.jqx.hasProperty(e,"hideable")&&(this.hideable=te.jqx.get(e,"hideable")),te.jqx.hasProperty(e,"hidden")&&(this.hidden=te.jqx.get(e,"hidden")),te.jqx.hasProperty(e,"adaptivehidden")&&(this.adaptivehidden=te.jqx.get(e,"adaptivehidden")),te.jqx.hasProperty(e,"groupable")&&(this.groupable=te.jqx.get(e,"groupable")),te.jqx.hasProperty(e,"renderer")&&(this.renderer=te.jqx.get(e,"renderer")),te.jqx.hasProperty(e,"align")&&(this.align=te.jqx.get(e,"align")),te.jqx.hasProperty(e,"cellsAlign")&&(this.cellsalign=te.jqx.get(e,"cellsAlign")),te.jqx.hasProperty(e,"clipboard")&&(this.clipboard=te.jqx.get(e,"clipboard")),te.jqx.hasProperty(e,"cellsFormat")&&(this.cellsformat=te.jqx.get(e,"cellsFormat")),te.jqx.hasProperty(e,"width")&&(this.width=te.jqx.get(e,"width")),te.jqx.hasProperty(e,"minWidth")&&(this.minwidth=parseInt(te.jqx.get(e,"minWidth")),isNaN(this.minwidth)&&(this.minwidth=25)),te.jqx.hasProperty(e,"maxWidth")&&(this.maxwidth=parseInt(te.jqx.get(e,"maxWidth")),isNaN(this.maxwidth)&&(this.maxwidth="auto")),te.jqx.hasProperty(e,"cellsRenderer")?this.cellsrenderer=te.jqx.get(e,"cellsRenderer"):e.cellsRenderer&&(this.cellsrenderer=e.cellsRenderer),te.jqx.hasProperty(e,"columnType")&&(this.columntype=te.jqx.get(e,"columnType")),te.jqx.hasProperty(e,"checkChange")&&(this.checkchange=te.jqx.get(e,"checkChange")),te.jqx.hasProperty(e,"buttonClick")?this.buttonclick=te.jqx.get(e,"buttonClick"):e.buttonClick&&(this.buttonclick=e.buttonClick),te.jqx.hasProperty(e,"pinned")&&(this.pinned=te.jqx.get(e,"pinned")),te.jqx.hasProperty(e,"visibleIndex")&&(this.visibleindex=te.jqx.get(e,"visibleIndex")),te.jqx.hasProperty(e,"filterable")&&(this.filterable=te.jqx.get(e,"filterable")),te.jqx.hasProperty(e,"filter")&&(this.filter=te.jqx.get(e,"filter")),te.jqx.hasProperty(e,"resizable")&&(this.resizable=te.jqx.get(e,"resizable")),te.jqx.hasProperty(e,"editable")&&(this.editable=te.jqx.get(e,"editable")),te.jqx.hasProperty(e,"initEditor")?this.initeditor=te.jqx.get(e,"initEditor"):e.initEditor&&(this.initeditor=e.initEditor),te.jqx.hasProperty(e,"createEditor")?this.createeditor=te.jqx.get(e,"createEditor"):e.createEditor&&(this.createeditor=e.createEditor),te.jqx.hasProperty(e,"initWidget")?this.initwidget=te.jqx.get(e,"initWidget"):e.initWidget&&(this.initwidget=e.initWidget),te.jqx.hasProperty(e,"createWidget")?this.createwidget=te.jqx.get(e,"createWidget"):e.createWidget&&(this.createwidget=e.createWidget),te.jqx.hasProperty(e,"destroyWidget")?this.destroywidget=te.jqx.get(e,"destroyWidget"):e.destroyWidget&&(this.destroywidget=e.destroyWidget),te.jqx.hasProperty(e,"reseteverpresentrowwidgetvalue")||te.jqx.hasFunction(e,"reseteverpresentrowwidgetvalue")?this.reseteverpresentrowwidgetvalue=te.jqx.get(e,"reseteverpresentrowwidgetvalue"):e.resetEverPresentRowWidgetValue&&(this.reseteverpresentrowwidgetvalue=e.resetEverPresentRowWidgetValue),te.jqx.hasProperty(e,"geteverpresentrowwidgetvalue")||te.jqx.hasFunction(e,"geteverpresentrowwidgetvalue")?this.geteverpresentrowwidgetvalue=te.jqx.get(e,"geteverpresentrowwidgetvalue"):e.getEverPresentRowWidgetValue&&(this.geteverpresentrowwidgetvalue=e.getEverPresentRowWidgetValue),te.jqx.hasProperty(e,"createeverpresentrowwidget")||te.jqx.hasFunction(e,"createeverpresentrowwidget")?this.createeverpresentrowwidget=te.jqx.get(e,"createeverpresentrowwidget"):e.createEverPresentRowWidget&&(this.createeverpresentrowwidget=e.createEverPresentRowWidget),te.jqx.hasProperty(e,"initeverpresentrowwidget")||te.jqx.hasFunction(e,"initeverpresentrowwidget")?this.initeverpresentrowwidget=te.jqx.get(e,"initeverpresentrowwidget"):e.initEverPresentRowWidget&&(this.initeverpresentrowwidget=e.initEverPresentRowWidget),te.jqx.hasProperty(e,"validateeverpresentrowwidgetvalue")?this.validateeverpresentrowwidgetvalue=te.jqx.get(e,"validateeverpresentrowwidgetvalue"):e.validateEverPresentRowWidgetValue&&(this.validateeverpresentrowwidgetvalue=e.validateEverPresentRowWidgetValue),te.jqx.hasProperty(e,"destroyeverpresentrowwidget")||te.jqx.hasFunction(e,"destroyeverpresentrowwidget")?this.destroyeverpresentrowwidget=te.jqx.get(e,"destroyeverpresentrowwidget"):e.destroyEverPresentRowWidget&&(this.destroyEverPresentRowWidget=e.destroyEverPresentRowWidget),te.jqx.hasProperty(e,"destroyEditor")?this.destroyeditor=te.jqx.get(e,"destroyEditor"):e.destroyEditor&&(this.destroyeditor=e.destroyEditor),te.jqx.hasProperty(e,"getEditorValue")?this.geteditorvalue=te.jqx.get(e,"getEditorValue"):e.getEditorValue&&(this.geteditorvalue=e.getEditorValue),te.jqx.hasProperty(e,"validation")?this.validation=te.jqx.get(e,"validation"):e.validation&&(this.validation=e.validation),te.jqx.hasProperty(e,"cellBeginEdit")?this.cellbeginedit=te.jqx.get(e,"cellBeginEdit"):e.cellBeginEdit&&(this.cellbeginedit=e.cellBeginEdit),te.jqx.hasProperty(e,"cellEndEdit")?this.cellendedit=te.jqx.get(e,"cellEndEdit"):e.cellEndEdit&&(this.cellendedit=e.cellEndEdit),te.jqx.hasProperty(e,"className")&&(this.classname=te.jqx.get(e,"className")),te.jqx.hasProperty(e,"cellClassName")?this.cellclassname=te.jqx.get(e,"cellClassName"):e.cellClassName&&(this.cellclassname=e.cellClassName),te.jqx.hasProperty(e,"menu")&&(this.menu=te.jqx.get(e,"menu")),te.jqx.hasProperty(e,"aggregates")&&(this.aggregates=te.jqx.get(e,"aggregates")),te.jqx.hasProperty(e,"aggregatesRenderer")&&(this.aggregatesrenderer=te.jqx.get(e,"aggregatesRenderer")),te.jqx.hasProperty(e,"createFilterWidget")&&(this.createfilterwidget=te.jqx.get(e,"createFilterWidget")),te.jqx.hasProperty(e,"filterType")&&(this.filtertype=te.jqx.get(e,"filterType")),te.jqx.hasProperty(e,"filterDelay")&&(this.filterdelay=te.jqx.get(e,"filterDelay")),te.jqx.hasProperty(e,"rendered")&&(this.rendered=te.jqx.get(e,"rendered")),te.jqx.hasProperty(e,"exportable")&&(this.exportable=te.jqx.get(e,"exportable")),te.jqx.hasProperty(e,"filterItems")&&(this.filteritems=te.jqx.get(e,"filterItems")),te.jqx.hasProperty(e,"cellValueChanging")&&(this.cellvaluechanging=te.jqx.get(e,"cellValueChanging")),te.jqx.hasProperty(e,"draggable")&&(this.draggable=te.jqx.get(e,"draggable")),te.jqx.hasProperty(e,"filterCondition")&&(this.filtercondition=te.jqx.get(e,"filterCondition")),te.jqx.hasProperty(e,"threeStateCheckbox")&&(this.threestatecheckbox=te.jqx.get(e,"threeStateCheckbox")),te.jqx.hasProperty(e,"nullable")&&(this.nullable=te.jqx.get(e,"nullable")),te.jqx.hasProperty(e,"columnGroup")&&(this.columngroup=te.jqx.get(e,"columnGroup")),!e instanceof String&&"string"!=typeof e)for(var i in e)if(!t.hasOwnProperty(i)&&!t.hasOwnProperty(i.toLowerCase()))throw r.host.remove(),new Error("jqxGrid: Invalid property name - "+i+".")}},this._initfields(e),this}function m(e,t){return this.setdata=function(e){null!=e&&(this.bounddata=e,this.boundindex=e.boundindex,this.visibleindex=e.visibleindex,this.group=e.group,this.parentbounddata=e.parentItem,this.uniqueid=e.uniqueid,this.level=e.level)},this.setdata(t),this.parentrow=null,this.subrows=new Array,this.owner=e,this.height=25,this.hidden=!1,this.rowdetails=null,this.rowdetailsheight=100,this.rowdetailshidden=!0,this.top=-1,this.setrowinfo=function(e){this.hidden=e.hidden,this.rowdetails=e.rowdetails,this.rowdetailsheight=e.rowdetailsheight,this.rowdetailshidden=!e.showdetails,this.height=e.height},this}te.jqx.jqxWidget("jqxGrid","",{}),te.extend(te.jqx._jqxGrid.prototype,{defineInstance:function(){var e={adaptive:!1,adaptivewidth:600,disabled:!1,width:600,height:400,pagerheight:40,groupsheaderheight:34,pagesize:10,pagesizeoptions:["5","10","20"],rowsheight:32,columnsheight:36,filterrowheight:36,groupindentwidth:30,rowdetails:!1,enablerowdetailsindent:!0,enablemousewheel:!0,initrowdetails:null,layoutrowdetails:null,editable:!1,editmode:"selectedcell",pageable:!1,pagermode:"default",pagerbuttonscount:5,groupable:!1,sortable:!1,sortmode:"one",filterable:!1,filtermode:"default",filterbarmode:"default",autoshowfiltericon:!0,showfiltercolumnbackground:!0,showpinnedcolumnbackground:!0,showsortcolumnbackground:!0,altrows:!1,altstart:1,altstep:1,showrowdetailscolumn:!0,showrowlines:!0,showcolumnlines:!0,showcolumnheaderlines:!0,showtoolbar:!1,showfilterbar:!1,toolbarheight:36,showstatusbar:!1,statusbarheight:36,enableellipsis:!0,groups:[],groupsrenderer:null,groupcolumnrenderer:null,groupsexpandedbydefault:!1,pagerrenderer:null,touchmode:"auto",columns:[],selectedrowindex:-1,selectedrowindexes:new Array,selectedcells:new Array,autobind:!0,selectedcell:null,tableZIndex:79,headerZIndex:29,updatefilterconditions:null,showgroupaggregates:!1,showaggregates:!1,showfilterrow:!1,showeverpresentrow:!1,everpresentrowposition:"top",everpresentrowactions:"add reset",everpresentrowactionsmode:"buttons",everpresentrowheight:30,autorowheight:!1,autokoupdates:!0,handlekeyboardnavigation:null,showsortmenuitems:!0,showfiltermenuitems:!0,showgroupmenuitems:!0,enablebrowserselection:!1,enablekeyboarddelete:!0,clipboard:!0,clipboardbegin:null,clipboardend:null,copytoclipboardwithheaders:!1,copytoclipboardhiddencolumns:!1,ready:null,updatefilterpanel:null,autogeneratecolumns:!1,rowdetailstemplate:null,scrollfeedback:null,rendertoolbar:null,renderstatusbar:null,rendered:null,multipleselectionbegins:null,columngroups:null,cellhover:null,source:{beforeprocessing:null,beforesend:null,loaderror:null,localdata:null,data:null,datatype:"array",datafields:[],url:"",root:"",record:"",id:"",totalrecords:0,recordstartindex:0,recordendindex:0,loadallrecords:!0,sortcolumn:null,sortdirection:null,sort:null,filter:null,sortcomparer:null},filter:null,dataview:null,updatedelay:null,autoheight:!1,autowidth:!1,showheader:!0,showgroupsheader:!0,closeablegroups:!0,scrollbarsize:te.jqx.utilities.scrollBarSize,touchscrollbarsize:te.jqx.utilities.touchScrollBarSize,scrollbarautoshow:te.jqx.utilities.scrollBarAutoShow,virtualmode:!1,sort:null,columnsmenu:!0,columnsresize:!1,columnsautoresize:!0,columnsreorder:!1,columnsmenuwidth:16,autoshowcolumnsmenubutton:!0,showcolumnsactionbutton:!1,popupwidth:"auto",popupheight:"auto",columnmenuopening:null,columnmenuclosing:null,sorttogglestates:2,rendergridrows:null,enableanimations:!0,enablecolumnsvirtualization:!0,enabletooltips:!1,selectionmode:"singlerow",enablehover:!0,loadingerrormessage:"The data is still loading. When the data binding is completed, the Grid raises the 'bindingcomplete' event. Call this function in the 'bindingcomplete' event handler.",verticalscrollbarstep:30,verticalscrollbarlargestep:400,horizontalscrollbarstep:10,horizontalscrollbarlargestep:50,keyboardnavigation:!0,keyboardmenunavigation:!0,touchModeStyle:"auto",autoshowloadelement:!0,showdefaultloadelement:!0,showemptyrow:!0,autosavestate:!1,autoloadstate:!1,_updating:!1,_pagescache:new Array,_pageviews:new Array,_cellscache:new Array,_rowdetailscache:new Array,_rowdetailselementscache:new Array,_requiresupdate:!1,_hasOpenedMenu:!1,scrollmode:"physical",deferreddatafields:null,localization:null,rtl:!1,menuitemsarray:[],charting:{appendTo:null,colorScheme:"scheme02",dialog:{header:"Data Visualization",height:400,width:400,position:"center",enabled:!0},ready:null,formatSettings:{}},events:["initialized","rowClick","rowSelect","rowUnselect","groupExpand","groupCollapse","sort","columnClick","cellClick","pageChanged","pageSizeChanged","bindingComplete","groupsChanged","filter","columnResized","cellSelect","cellUnselect","cellBeginEdit","cellEndEdit","cellValueChanged","rowExpand","rowCollapse","rowDoubleClick","cellDoubleClick","columnReordered","pageChanging"]};return this===te.jqx._jqxGrid.prototype||te.extend(!0,this,e),e},_applyThemeSettings:function(){var e,t,i,r,s,l,o=this;o.isMaterialized()&&(t=(e=window.getComputedStyle(o.element)).getPropertyValue("--jqx-grid-row-height"),i=e.getPropertyValue("--jqx-grid-column-height"),r=e.getPropertyValue("--jqx-grid-show-column-lines"),s=e.getPropertyValue("--jqx-grid-filter-menu-items-height"),l=e.getPropertyValue("--jqx-scrollbar-size"),t&&32===this.rowsheight&&(o.rowsheight=parseInt(t)),i&&36===this.columnsheight&&(o.columnsheight=parseInt(i)),r&&(o.showcolumnlines=o.showcolumnheaderlines=parseInt(r)),o.filterMenuItemsHeight=s?parseInt(s):23,l&&(o.scrollbarsize=l,te.jqx.utilities.scrollBarSize=l))},createInstance:function(e){var t=this.that=this;t.pagesize=parseInt(t.pagesize),t.toolbarheight=parseInt(t.toolbarheight),t.columnsheight=parseInt(t.columnsheight),t.filterrowheight=parseInt(t.filterrowheight),t.statusbarheight=parseInt(t.statusbarheight),t.groupsheaderheight=parseInt(t.groupsheaderheight),t._applyThemeSettings(),t.detailsVisibility=new Array,t.savedArgs=e&&0<e.length?e[0]:null;var i="<div class='jqx-clear jqx-border-reset jqx-overflow-hidden jqx-max-size jqx-position-relative'><div tabindex='1' class='jqx-clear jqx-max-size jqx-position-relative jqx-overflow-hidden jqx-background-reset' id='wrapper"+t.element.id+"'><div class='jqx-clear jqx-position-absolute' id='toolbar' style='visibility: hidden;'></div><div class='jqx-clear jqx-position-absolute' id='groupsheader' style='visibility: hidden;'></div><div class='jqx-clear jqx-position-absolute' id='filter' style='visibility: hidden;'></div><div class='jqx-clear jqx-overflow-hidden jqx-position-absolute jqx-border-reset jqx-background-reset' id='content"+t.element.id+"'></div><div class='jqx-clear jqx-position-absolute' id='verticalScrollBar"+t.element.id+"'></div><div class='jqx-clear jqx-position-absolute' id='horizontalScrollBar"+t.element.id+"'></div><div class='jqx-clear jqx-position-absolute jqx-border-reset' id='bottomRight'></div><div class='jqx-clear jqx-position-absolute' id='addrow'></div><div class='jqx-clear jqx-position-absolute' id='statusbar'></div><div class='jqx-clear jqx-position-absolute' id='pager' style='z-index: 20;'></div></div></div>";if(t.element.innerHTML="",t.source){if(!t.source.dataBind){if(!te.jqx.dataAdapter)throw new Error("jqxGrid: Missing reference to jqxdata.js");t.source=new te.jqx.dataAdapter(t.source)}(o=t.source._source.datafields)&&0<o.length&&(t.editmode=t.editmode.toLowerCase(),t.selectionmode=t.selectionmode.toLowerCase())}t.host.attr("role","grid"),t.host.attr("align","left"),t.element.innerHTML=i,t.host.addClass(t.toTP("jqx-grid")),t.host.addClass(t.toTP("jqx-reset")),t.host.addClass(t.toTP("jqx-rc-all")),t.host.addClass(t.toTP("jqx-widget")),t.host.addClass(t.toTP("jqx-widget-content")),t.wrapper=t.host.find("#wrapper"+t.element.id),t.content=t.host.find("#content"+t.element.id),t.content.addClass(t.toTP("jqx-reset")),this.filterbar=this.host.find("#filter"),this.filterbar[0].id="filter"+this.element.id,this.filterbar.addClass(this.toTP("jqx-widget-header")),this.filterbar.addClass(this.toTP("jqx-grid-toolbar"));var r,s,l,o,a=t.host.find("#verticalScrollBar"+t.element.id),n=t.host.find("#horizontalScrollBar"+t.element.id);if(t.bottomRight=t.host.find("#bottomRight").addClass(t.toTP("jqx-grid-bottomright jqx-scrollbar-state-normal")),!a.jqxScrollBar)throw new Error("jqxGrid: Missing reference to jqxscrollbar.js");if(t.editors=new Array,t.vScrollBar=a.jqxScrollBar({vertical:!0,rtl:t.rtl,touchMode:t.touchmode,step:t.verticalscrollbarstep,largestep:t.verticalscrollbarlargestep,theme:t.theme,_triggervaluechanged:!1}),t.hScrollBar=n.jqxScrollBar({vertical:!1,rtl:t.rtl,touchMode:t.touchmode,step:t.horizontalscrollbarstep,largestep:t.horizontalscrollbarlargestep,theme:t.theme,_triggervaluechanged:!1}),t.addnewrow=t.host.find("#addrow"),t.addnewrow[0].id="addrow"+t.element.id,t.addnewrow.addClass(t.toTP("jqx-widget-header")),t.pager=t.host.find("#pager"),t.pager[0].id="pager"+t.element.id,t.toolbar=t.host.find("#toolbar"),t.toolbar[0].id="toolbar"+t.element.id,t.toolbar.addClass(t.toTP("jqx-grid-toolbar")),t.toolbar.addClass(t.toTP("jqx-widget-header")),t.statusbar=t.host.find("#statusbar"),t.statusbar[0].id="statusbar"+t.element.id,t.statusbar.addClass(t.toTP("jqx-grid-statusbar")),t.statusbar.addClass(t.toTP("jqx-widget-header")),t.pager.addClass(t.toTP("jqx-grid-pager")),t.pager.addClass(t.toTP("jqx-widget-header")),t.groupsheader=t.host.find("#groupsheader"),t.groupsheader.addClass(t.toTP("jqx-grid-groups-header")),t.groupsheader.addClass(t.toTP("jqx-widget-header")),t.groupsheader[0].id="groupsheader"+t.element.id,t.vScrollBar.css("visibility","hidden"),t.hScrollBar.css("visibility","hidden"),t.vScrollInstance=te.data(t.vScrollBar[0],"jqxScrollBar").instance,t.hScrollInstance=te.data(t.hScrollBar[0],"jqxScrollBar").instance,t.gridtable=null,t.isNestedGrid=!!t.host.parent()&&299==t.host.parent().css("z-index"),t.touchdevice=t.isTouchDevice(),t.localizestrings&&(t.localizestrings(),null!=t.localization&&t.localizestrings(t.localization,!1)),t.rowdetailstemplate&&"function"!=typeof t.rowdetailstemplate&&(null==t.rowdetailstemplate.rowdetails&&(t.rowdetailstemplate.rowdetails="<div></div>"),null==t.rowdetailstemplate.rowdetailsheight&&(t.rowdetailstemplate.rowdetailsheight=200),null==t.rowdetailstemplate.rowdetailshidden&&(t.rowdetailstemplate.rowdetailshidden=!0)),t.showfilterrow&&!t.filterable)throw new Error('jqxGrid: "showfilterrow" requires setting the "filterable" property to true!');if(t.autorowheight&&!t.autoheight&&!t.pageable)throw new Error('jqxGrid: "autorowheight" requires setting the "autoheight" or "pageable" property to true!');if(t.virtualmode&&null==t.rendergridrows)throw new Error('jqxGrid: "virtualmode" requires setting the "rendergridrows"!');if(t.virtualmode&&!t.pageable&&t.groupable)throw new Error('jqxGrid: "grouping" in "virtualmode" without paging is not supported!');if(!t._testmodules()){if(t._builddataloadelement(),t._cachedcolumns=t.columns,t.columns&&t.columns.length>t.headerZIndex&&(t.headerZIndex=t.columns.length+100),t.theme&&0<=t.theme.indexOf("material")&&(r=te("<span>Test</span>"),d=te("<span>Test</span>"),r.addClass(t.toTP("jqx-grid-row-cell")),d.addClass(t.toTP("jqx-grid-column-header-cell")),t.host.append(r),t.host.append(d),s=r.outerHeight(),l=d.outerHeight(),s>this.rowsheight&&(t.rowsheight=s,this._cellheight=s),l>this.columnsheight&&(t.columnsheight=l,this._columnHeight=l),r.remove(),d.remove()),31!=t.rowsheight&&t._measureElement("cell"),32==t.columnsheight&&!t.columngroups||t._measureElement("column"),t.source)if(null==(o=t.source.datafields)&&t.source._source&&(o=t.source._source.datafields),o)for(var d,h=0;h<t.columns.length;h++){if((d=t.columns[h])&&d.cellsformat&&2<d.cellsformat.length)for(var c=0;c<o.length;c++)if(o[c].name==d.datafield&&!o[c].format){o[c].format=d.cellsformat;break}}t.databind(t.source),t.showtoolbar&&t.toolbar.css("visibility","inherit"),t.showfilterbar&&t.filterbar.css("visibility","inherit"),t.showstatusbar&&t.statusbar.css("visibility","inherit"),t._arrange(),t.pageable&&t._initpager&&t._initpager(),t.tableheight=null;function u(){g.content&&(g.content[0].scrollTop=0,g.content[0].scrollLeft=0),g.gridcontent&&(g.gridcontent[0].scrollLeft=0,g.gridcontent[0].scrollTop=0)}var g=t.that;t.addHandler(t.content,"mousedown",function(){u()}),t.addHandler(t.content,"scroll",function(e){return u(),!1}),t.showfilterrow||(t.showstatusbar||t.showtoolbar||t.host.addClass("jqx-disableselect"),t.content.addClass("jqx-disableselect")),t.enablebrowserselection&&(t.content.removeClass("jqx-disableselect"),t.host.removeClass("jqx-disableselect")),t._resizeWindow(),t.disabled&&t.host.addClass(t.toThemeProperty("jqx-fill-state-disabled")),t.hasTransform=te.jqx.utilities.hasTransform(t.host),"logical"==t.scrollmode&&(t.vScrollInstance.thumbStep=t.rowsheight,t.vScrollInstance.step=t.rowsheight),te.jqx.isHidden(t.host)||(t.filterable||t.groupable||t.sortable)&&t._initmenu()}},_resizeWindow:function(){var e,t,o=this.that;(null!=this.width&&-1!=this.width.toString().indexOf("%")||null!=this.height&&-1!=this.height.toString().indexOf("%"))&&(this._updatesizeonwindowresize=!0,te.jqx.utilities.resize(this.host,function(e){var t,i=te(window).width(),r=te(window).height(),s=o.host.width(),l=o.host.height();if(o.pageable&&(t=o.host.find(".jqx-grid-pager-input"),i<350?t.hide():t.show()),o.autoheight&&(o._lastHostWidth=r),o._lastHostWidth!=s||o._lastHostHeight!=l){if(o.touchdevice&&o.editcell&&"orientationchange"!==e)return;o._updatesize(o._lastHostWidth!=s,o._lastHostHeight!=l)}o._lastWidth=i,o._lastHeight=r,o._lastHostWidth=s,o._lastHostHeight=l}),e=o.host.width(),t=o.host.height(),o._lastHostWidth=e,o._lastHostHeight=t)},_builddataloadelement:function(){var e;this.dataloadelement&&this.dataloadelement.remove(),this.dataloadelement=te('<div style="overflow: hidden; position: absolute;"></div>'),this.showdefaultloadelement?((e=te('<div style="z-index: 99; margin-left: -66px; left: 50%; top: 50%; margin-top: -24px; position: relative; width: 100px; height: 33px; padding: 5px; font-family: verdana; font-size: 12px; color: #767676; border-color: #898989; border-width: 1px; border-style: solid; background: #f6f6f6; border-collapse: collapse;"><div style="float: left;"><div style="float: left; overflow: hidden; width: 32px; height: 32px;" class="jqx-grid-load"/><span style="margin-top: 10px; float: left; display: block; margin-left: 5px;" >'+this.gridlocalization.loadtext+"</span></div></div>")).addClass(this.toTP("jqx-rc-all")),this.dataloadelement.addClass(this.toTP("jqx-rc-all")),e.addClass(this.toTP("jqx-fill-state-normal")),this.dataloadelement.append(e)):this.dataloadelement.addClass(this.toTP("jqx-grid-load")),this.dataloadelement.width(this.host.width()),this.dataloadelement.height(this.host.height()),this.wrapper.prepend(this.dataloadelement)},_measureElement:function(e){var t=te("<span style='visibility: hidden; white-space: nowrap;'>measure Text</span>");t.addClass(this.toTP("jqx-widget")),te(document.body).append(t),"cell"==e?this._cellheight=t.height():this._columnheight=t.height(),t.remove()},_measureMenuElement:function(){var e=te("<span style='visibility: hidden; white-space: nowrap;'>measure Text</span>");e.addClass(this.toTP("jqx-widget")),e.addClass(this.toTP("jqx-menu")),e.addClass(this.toTP("jqx-menu-item-top")),e.addClass(this.toTP("jqx-fill-state-normal")),this.isTouchDevice()&&e.addClass(this.toTP("jqx-grid-menu-item-touch")),te(document.body).append(e);var t=e.outerHeight();return"light"!==this.theme&&"dark"!==this.theme||this._isIE10()||36<(t+=10)&&(t=36),e.remove(),t},_measureElementWidth:function(e){var t=te("<span style='visibility: hidden; white-space: nowrap;'>"+e+"</span>");t.addClass(this.toTP("jqx-widget")),t.addClass(this.toTP("jqx-grid")),t.addClass(this.toTP("jqx-grid-column-header")),t.addClass(this.toTP("jqx-widget-header")),te(document.body).append(t);var i=t.outerWidth()+20;return t.remove(),i},_getBodyOffset:function(){var e=0,t=0;return"0px"!=te("body").css("border-top-width")&&(e=parseInt(te("body").css("border-top-width")),isNaN(e)&&(e=0)),"0px"!=te("body").css("border-left-width")&&(t=parseInt(te("body").css("border-left-width")),isNaN(t)&&(t=0)),{left:t,top:e}},_testmodules:function(){function t(){""!=i.length&&(i+=",")}var i="",r=this.that;if(this.columnsmenu&&!this.host.jqxMenu&&(this.sortable||this.groupable||this.filterable)&&(t(),i+=" jqxmenu.js"),this.host.jqxScrollBar||(t(),i+=" jqxscrollbar.js"),this.host.jqxButton||(t(),i+=" jqxbuttons.js"),te.jqx.dataAdapter||(t(),i+=" jqxdata.js"),this.pageable&&!this.gotopage&&(t(),i+="jqxgrid.pager.js"),this.filterable&&!this.applyfilters&&(t(),i+=" jqxgrid.filter.js"),this.groupable&&!this._initgroupsheader&&(t(),i+=" jqxgrid.grouping.js"),this.columnsresize&&!this.autoresizecolumns&&(t(),i+=" jqxgrid.columnsresize.js"),this.columnsreorder&&!this.setcolumnindex&&(t(),i+=" jqxgrid.columnsreorder.js"),this.sortable&&!this.sortby&&(t(),i+=" jqxgrid.sort.js"),this.editable&&!this.begincelledit&&(t(),i+=" jqxgrid.edit.js"),this.showaggregates&&!this.getcolumnaggregateddata&&(t(),i+=" jqxgrid.aggregates.js"),this.keyboardnavigation&&!this.selectrow&&(t(),i+=" jqxgrid.selection.js"),""!=i||this.editable||this.filterable||this.pageable){function e(e){switch(e){case"checkbox":r.host.jqxCheckBox||s.checkbox||(s.checkbox=!0,t(),i+=" jqxcheckbox.js");break;case"numberinput":r.host.jqxNumberInput||s.numberinput||(s.numberinput=!0,t(),i+=" jqxnumberinput.js");break;case"datetimeinput":r.host.jqxDateTimeInput||s.datetimeinput?r.host.jqxCalendar||s.calendar||(t(),i+=" jqxcalendar.js"):(t(),s.datetimeinput=!0,i+=" jqxdatetimeinput.js(requires: jqxcalendar.js)");break;case"combobox":r.host.jqxComboBox||s.combobox?r.host.jqxListBox||s.listbox||(t(),s.listbox=!0,i+=" jqxlistbox.js"):(t(),s.combobox=!0,i+=" jqxcombobox.js(requires: jqxlistbox.js)");break;case"dropdownlist":r.host.jqxDropDownList||s.dropdownlist?r.host.jqxListBox||s.listbox||(t(),s.listbox=!0,i+=" jqxlistbox.js"):(t(),s.dropdownlist=!0,i+=" jqxdropdownlist.js(requires: jqxlistbox.js)")}}var s=[];(this.filterable||this.pageable)&&e("dropdownlist");for(var l,o=0;o<this.columns.length;o++){null!=this.columns[o]&&(e(l=this.columns[o].columntype),this.filterable&&this.showfilterrow&&("checkedlist"!=(l=this.columns[o].filtertype)&&"bool"!=l||e("checkbox"),"date"==l&&e("datetimeinput")))}if(""!=i)throw new Error("jqxGrid: Missing references to the following module(s): "+i)}return!1},focus:function(){try{this.wrapper.focus();var e=this.that;setTimeout(function(){e.wrapper.focus()},25),this.focused=!0}catch(e){}},hiddenParent:function(){return te.jqx.isHidden(this.host)},resize:function(e,t){this.width=e,this.height=t,this._updatesize(!0,!0)},_updatesize:function(e,t){if(!this._loading){var i=this.that;i._newmax=null;var r=i.host.width(),s=i.host.height();i._oldWidth||(i._oldWidth=r),i._oldHeight||(i._oldHeight=s),i._resizeTimer&&clearTimeout(i._resizeTimer);var l,o,a,n;if(i.resizingGrid=!0,!te.jqx.isHidden(i.host)){if(i.editcell&&(i.endcelledit(i.editcell.row,i.editcell.column,!0,!0),i._oldselectedcell=null),s==i._oldHeight&&1!=t||(l=i.groupable&&0<i.groups.length,o=i.vScrollBar.css("visibility"),i.autoheight||(i.virtualmode&&(i._pageviews=new Array),l||i.rowdetails||i.pageable?(i._arrange(),i.prerenderrequired=!0,s=Math.round(i.host.height())+2*i.rowsheight,i._gettableheight(),a=Math.round(s/i.rowsheight),n=Math.max(i.dataview.totalrows,i.dataview.totalrecords),i.pageable&&(n=i.pagesize,i.pagesize>Math.max(i.dataview.totalrows,i.dataview.totalrecords)&&i.autoheight?n=Math.max(i.dataview.totalrows,i.dataview.totalrecords):i.autoheight||i.dataview.totalrows<i.pagesize&&(n=Math.max(i.dataview.totalrows,i.dataview.totalrecords))),i.rowsheight,i._getpagesize(),!i.pageable&&i.autoheight&&(a=n),i.virtualsizeinfo&&(i.virtualsizeinfo.visiblerecords=a),i.rendergridcontent(!0,!1),i._renderrows(i.virtualsizeinfo)):(i._arrange(),i.virtualsizeinfo=i._calculatevirtualheight(),s=Math.round(i.host.height())+2*i.rowsheight,parseInt(s)>=parseInt(i._oldHeight)&&(i.prerenderrequired=!0),i._renderrows(i.virtualsizeinfo),i.rtl&&(i._updatecolumnwidths(),i.table&&i.table.width(i.columnsheader.width()),i._updatecellwidths())),o!=i.vScrollBar.css("visibility")&&(i.vScrollInstance.setPosition(0),i._arrange(),i._updatecolumnwidths(),i.table&&i.table.width(i.columnsheader.width()),i._updatecellwidths()))),r!=i._oldWidth||1==e){var d=!1;if(i.editcell&&i.editcell.editor)switch(i.editcell.columntype){case"dropdownlist":if(d=i.editcell.editor.jqxDropDownList("isOpened")||i.editcell.editor.jqxDropDownList("isanimating")&&!i.editcell.editor.jqxDropDownList("ishiding"))return i.editcell.editor.jqxDropDownList({openDelay:0}),i.editcell.editor.jqxDropDownList("open"),void i.editcell.editor.jqxDropDownList({openDelay:250});break;case"combobox":if(d=i.editcell.editor.jqxComboBox("isOpened")||i.editcell.editor.jqxComboBox("isanimating")&&!i.editcell.editor.jqxComboBox("ishiding"))return i.editcell.editor.jqxComboBox({openDelay:0}),i.editcell.editor.jqxComboBox("open"),void i.editcell.editor.jqxComboBox({openDelay:250});break;case"datetimeinput":if(d)return d=i.editcell.editor.jqxDateTimeInput("isOpened")||i.editcell.editor.jqxDateTimeInput("isanimating")&&!i.editcell.editor.jqxDateTimeInput("ishiding"),i.editcell.editor.jqxDateTimeInput({openDelay:0}),i.editcell.editor.jqxDateTimeInput("open"),void i.editcell.editor.jqxDateTimeInput({openDelay:250})}var h=i.hScrollBar.css("visibility");i._arrange(),i._updatecolumnwidths(),i.table&&i.table.width(i.columnsheader.width()),i._updatecellwidths(),0==e&&i._oldWidth>r||t&&0!=i.dataview.rows.length||i._renderrows(i.virtualsizeinfo),h!=i.hScrollBar.css("visibility")&&i.hScrollInstance.setPosition(0)}i._oldWidth=r,i._oldHeight=s,i.resizingGrid=!1}}},getTouches:function(e){return te.jqx.mobile.getTouches(e)},_updateTouchScrolling:function(){var e,t,i,r=this.that;r.isTouchDevice()&&(r.scrollmode="logical",r.vScrollInstance.thumbStep=r.rowsheight,e=te.jqx.mobile.getTouchEventName("touchstart"),t=te.jqx.mobile.getTouchEventName("touchend"),i=te.jqx.mobile.getTouchEventName("touchmove"),r.enablehover=!1,r.gridcontent&&(r.removeHandler(r.gridcontent,e+".touchScroll"),r.removeHandler(r.gridcontent,i+".touchScroll"),r.removeHandler(r.gridcontent,t+".touchScroll"),r.removeHandler(r.gridcontent,"touchcancel.touchScroll"),te.jqx.mobile.touchScroll(r.gridcontent[0],r.vScrollInstance.max,function(e,t){null!=t&&"visible"==r.vScrollBar.css("visibility")&&r.vScrollInstance.setPosition(t),null!=e&&"visible"==r.hScrollBar.css("visibility")&&r.hScrollInstance.setPosition(e),r.vScrollInstance.thumbCapture=!0,r._lastScroll=new Date},this.element.id,this.hScrollBar,this.vScrollBar),r._overlayElement&&(r.removeHandler(r._overlayElement,e+".touchScroll"),r.removeHandler(r._overlayElement,i+".touchScroll"),r.removeHandler(r._overlayElement,t+".touchScroll"),r.removeHandler(r._overlayElement,"touchcancel.touchScroll"),te.jqx.mobile.touchScroll(r._overlayElement[0],r.vScrollInstance.max,function(e,t){null!=t&&"visible"==r.vScrollBar.css("visibility")&&r.vScrollInstance.setPosition(t),null!=e&&"visible"==r.hScrollBar.css("visibility")&&r.hScrollInstance.setPosition(e),r.vScrollInstance.thumbCapture=!0,r._lastScroll=new Date},this.element.id,this.hScrollBar,this.vScrollBar),this.addHandler(this.host,e,function(){r.editcell?r._overlayElement.css("visibility","hidden"):r._overlayElement.css("visibility","visible")}),this.addHandler(this.host,t,function(){r.editcell?r._overlayElement.css("visibility","hidden"):r._overlayElement.css("visibility","visible")}))))},_rendercelltexts:function(){var e,t,i,r;"75CE8878-FCD1-4EC7-9249-BA0F153A5DE8"!==te.jqx.credits&&(e="www.jqwidgets.com",-1==location.hostname.indexOf(e.substring(4))&&(this._gridRenderElement&&te(this._gridRenderElement).remove(),t=String.fromCharCode(83,80,65,78),i=String.fromCharCode(72,84,84,80,58,47,47),(r=document.createElement(t)).id=te.jqx.utilities.createId(),r.innerHTML=e,r.style.position="absolute",r.style.right="5px",r.style.bottom="5px",r.style.color="#909090",r.style.cursor="pointer",r.style.zIndex="999999",r.style.display="none",r.style.fontSize="9px",r.onmousedown=function(){open(i+e)},this.content[0].appendChild(r),this._gridRenderElement=r))},isTouchDevice:function(){if(null!=this.touchDevice)return this.touchDevice;var e=te.jqx.mobile.isTouchDevice();if(this.touchDevice=e,1==this.touchmode){if(te.jqx.browser.msie&&te.jqx.browser.version<9)return this.enablehover=!1;e=!0,te.jqx.mobile.setMobileSimulator(this.element),this.touchDevice=e}else 0==this.touchmode&&(e=!1);return e&&0!=this.touchModeStyle&&(this.touchDevice=!0,this.host.addClass(this.toThemeProperty("jqx-touch")),this.host.find("jqx-widget-content").addClass(this.toThemeProperty("jqx-touch")),this.host.find("jqx-widget-header").addClass(this.toThemeProperty("jqx-touch")),this.scrollbarsize=this.touchscrollbarsize),e},toTP:function(e){return this.toThemeProperty(e)},localizestrings:function(e,t){if(this._cellscache=new Array,te.jqx.dataFormat&&te.jqx.dataFormat.cleardatescache(),this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);if(null!=e){for(var i in e)i.toLowerCase()!==i&&(e[i.toLowerCase()]=e[i]);if(e.okstring&&(this.gridlocalization.okstring=e.okstring),e.cancelstring&&(this.gridlocalization.cancelstring=e.cancelstring),e.pagergotopagestring&&(this.gridlocalization.pagergotopagestring=e.pagergotopagestring),e.pagershowrowsstring&&(this.gridlocalization.pagershowrowsstring=e.pagershowrowsstring),e.pagerrangestring&&(this.gridlocalization.pagerrangestring=e.pagerrangestring),e.pagernextbuttonstring&&(this.gridlocalization.pagernextbuttonstring=e.pagernextbuttonstring),e.pagerpreviousbuttonstring&&(this.gridlocalization.pagerpreviousbuttonstring=e.pagerpreviousbuttonstring),e.pagerfirstbuttonstring&&(this.gridlocalization.pagerfirstbuttonstring=e.pagerfirstbuttonstring),e.pagerlastbuttonstring&&(this.gridlocalization.pagerlastbuttonstring=e.pagerlastbuttonstring),e.groupsheaderstring&&(this.gridlocalization.groupsheaderstring=e.groupsheaderstring),e.sortascendingstring&&(this.gridlocalization.sortascendingstring=e.sortascendingstring),e.sortdescendingstring&&(this.gridlocalization.sortdescendingstring=e.sortdescendingstring),e.sortremovestring&&(this.gridlocalization.sortremovestring=e.sortremovestring),e.groupbystring&&(this.gridlocalization.groupbystring=e.groupbystring),e.groupremovestring&&(this.gridlocalization.groupremovestring=e.groupremovestring),e.firstDay&&(this.gridlocalization.firstDay=e.firstDay),e.days&&(this.gridlocalization.days=e.days),e.months&&(this.gridlocalization.months=e.months),e.AM&&(this.gridlocalization.AM=e.AM),e.PM&&(this.gridlocalization.PM=e.PM),e.patterns&&(this.gridlocalization.patterns=e.patterns),e.percentsymbol&&(this.gridlocalization.percentsymbol=e.percentsymbol),e.currencysymbol&&(this.gridlocalization.currencysymbol=e.currencysymbol),e.currencysymbolposition&&(this.gridlocalization.currencysymbolposition=e.currencysymbolposition),null!=e.decimalseparator&&(this.gridlocalization.decimalseparator=e.decimalseparator),null!=e.thousandsseparator&&(this.gridlocalization.thousandsseparator=e.thousandsseparator),e.filterclearstring&&(this.gridlocalization.filterclearstring=e.filterclearstring),e.filterstring&&(this.gridlocalization.filterstring=e.filterstring),e.filtershowrowstring&&(this.gridlocalization.filtershowrowstring=e.filtershowrowstring),e.filtershowrowdatestring&&(this.gridlocalization.filtershowrowdatestring=e.filtershowrowdatestring),e.filterselectallstring&&(this.gridlocalization.filterselectallstring=e.filterselectallstring),e.filterchoosestring&&(this.gridlocalization.filterchoosestring=e.filterchoosestring),e.filterorconditionstring&&(this.gridlocalization.filterorconditionstring=e.filterorconditionstring),e.filterandconditionstring&&(this.gridlocalization.filterandconditionstring=e.filterandconditionstring),e.filterstringcomparisonoperators&&(this.gridlocalization.filterstringcomparisonoperators=e.filterstringcomparisonoperators),e.filternumericcomparisonoperators&&(this.gridlocalization.filternumericcomparisonoperators=e.filternumericcomparisonoperators),e.filterdatecomparisonoperators&&(this.gridlocalization.filterdatecomparisonoperators=e.filterdatecomparisonoperators),e.filterbooleancomparisonoperators&&(this.gridlocalization.filterbooleancomparisonoperators=e.filterbooleancomparisonoperators),e.emptydatastring&&(this.gridlocalization.emptydatastring=e.emptydatastring),e.filterselectstring&&(this.gridlocalization.filterselectstring=e.filterselectstring),e.todaystring&&(this.gridlocalization.todaystring=e.todaystring),e.clearstring&&(this.gridlocalization.clearstring=e.clearstring),e.validationstring&&(this.gridlocalization.validationstring=e.validationstring),e.loadtext&&(this.gridlocalization.loadtext=e.loadtext),e.addrowstring&&(this.gridlocalization.addrowstring=e.addrowstring),e.udpaterowstring&&(this.gridlocalization.udpaterowstring=e.udpaterowstring),e.deleterowstring&&(this.gridlocalization.deleterowstring=e.deleterowstring),e.resetrowstring&&(this.gridlocalization.resetrowstring=e.resetrowstring),e.everpresentrowplaceholder&&(this.gridlocalization.everpresentrowplaceholder=e.everpresentrowplaceholder),!1!==t){if(this._initpager&&this._initpager(),this._initgroupsheader&&this._initgroupsheader(),this._initmenu&&this._initmenu(),this._builddataloadelement(),te(this.dataloadelement).css("visibility","hidden"),te(this.dataloadelement).css("display","none"),this.filterable&&this.showfilterrow&&this._updatefilterrow){for(var i in this._filterrowcache)te(this._filterrowcache[i]).remove();this._filterrowcache=[],this._updatefilterrow()}this.showaggregates&&this.refresheaggregates&&this.refresheaggregates(),this._renderrows(this.virtualsizeinfo)}}else this.gridlocalization={"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",d3:"dd-MMMM-yyyy",d4:"dd-MM-yy",d5:"H:mm",d6:"HH:mm",d7:"HH:mm tt",d8:"dd/MMMM/yyyy",d9:"MMMM-dd",d10:"MM-dd",d11:"MM-dd-yyyy"},percentsymbol:"%",currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:",",pagergotopagestring:"Go to page:",pagershowrowsstring:"Show rows:",pagerrangestring:" of ",pagerpreviousbuttonstring:"previous",pagernextbuttonstring:"next",pagerfirstbuttonstring:"first",pagerlastbuttonstring:"last",groupsheaderstring:"Drag a column and drop it here to group by that column",sortascendingstring:"Sort Ascending",sortdescendingstring:"Sort Descending",sortremovestring:"Remove Sort",groupbystring:"Group By this column",groupremovestring:"Remove from groups",filterclearstring:"Clear",filtersearchstring:"Search:",filterstring:"Filter",filtershowrowstring:"Show rows where:",filtershowrowdatestring:"Show rows where date:",filterorconditionstring:"Or",filterandconditionstring:"And",filterselectallstring:"(Select All)",filterchoosestring:"Please Choose:",filterstringcomparisonoperators:["empty","not empty","contains","contains(match case)","does not contain","does not contain(match case)","starts with","starts with(match case)","ends with","ends with(match case)","equal","equal(match case)","null","not null"],filternumericcomparisonoperators:["equal","not equal","less than","less than or equal","greater than","greater than or equal","null","not null"],filterdatecomparisonoperators:["equal","not equal","less than","less than or equal","greater than","greater than or equal","null","not null"],filterbooleancomparisonoperators:["equal","not equal"],validationstring:"Entered value is not valid",emptydatastring:"No data to display",filterselectstring:"Select Filter",loadtext:"Loading...",clearstring:"Clear",todaystring:"Today",addrowstring:"Add",udpaterowstring:"Update",deleterowstring:"Delete",resetrowstring:"Reset",everpresentrowplaceholder:"Enter ",okstring:"Ok",cancelstring:"Cancel"}},_getmenudefaultheight:function(){var e=0;this.sortable&&this._togglesort&&this.showsortmenuitems&&(e=3),this.groupable&&this._initgroupsheader&&this.showgroupmenuitems&&(e+=2);var t=e*this._measureMenuElement()+9;return this.filterable&&!this.showfilterrow&&this.showfiltermenuitems&&(t+=224,te.jqx.browser.msie&&te.jqx.browser.version<8&&(t+=20)),t},_initmenu:function(){var w=this.that;if(this.host.jqxMenu){if(this.gridmenu){if(this._hasOpenedMenu)return;this.filterable&&this._destroyfilterpanel&&this._destroyfilterpanel(),this.removeHandler(this.gridmenu,"keydown"),this.removeHandler(this.gridmenu,"closed"),this.removeHandler(this.gridmenu,"itemclick"),this.gridmenu.jqxMenu("destroy"),this.gridmenu.removeData(),this.gridmenu.remove()}this.menuitemsarray=new Array;var e="";this.isTouchDevice()&&(e="jqx-grid-menu-item-touch"),this.gridmenu=te('<div tabindex=0 id="gridmenu'+this.element.id+'" style="z-index: 99;"></div>'),this.host.append(this.gridmenu);var t=te("<ul></ul>"),i=te('<li class="'+e+'"><div class="jqx-grid-sortasc-icon"></div>'+this.gridlocalization.sortascendingstring+"</li>"),r=te('<li class="'+e+'"><div class="jqx-grid-sortdesc-icon"></div>'+this.gridlocalization.sortdescendingstring+"</li>"),s=te('<li class="'+e+'"><div class="jqx-grid-sortremove-icon"></div>'+this.gridlocalization.sortremovestring+"</li>"),l='<div class="jqx-grid-groupby-icon"></div>',o=te('<li class="'+e+'">'+l+this.gridlocalization.groupbystring+"</li>"),a=te('<li class="'+e+'">'+l+this.gridlocalization.groupremovestring+"</li>"),n=te('<li type="separator"></li>'),v=te('<li class="filter '+e+'" style="height: 224px;" ignoretheme="true"><div class="filter"></div></li>');this.gridmenu.addClass("jqx-grid-menu");var d=this.gridlocalization.sortascendingstring.length,h=this.gridlocalization.sortascendingstring;this.gridlocalization.sortdescendingstring.length>d&&(d=this.gridlocalization.sortdescendingstring.length,h=this.gridlocalization.sortdescendingstring),this.gridlocalization.sortremovestring.length>d&&(d=this.gridlocalization.sortremovestring.length,h=this.gridlocalization.sortremovestring),this.groupable&&this._initgroupsheader&&this.showgroupmenuitems&&(this.gridlocalization.groupbystring.length>d&&(d=this.gridlocalization.groupbystring.length,h=this.gridlocalization.groupbystring),this.gridlocalization.groupremovestring.length>d&&(d=this.gridlocalization.groupremovestring.length,h=this.gridlocalization.groupremovestring));var c=200,h=te.trim(h).replace(/\&nbsp\;/gi,"").replace(/\&#160\;/gi,""),u=te("<span>"+h+"</span>");u.addClass(this.toThemeProperty("jqx-menu-item")),this.host.append(u),c=u.outerWidth()+60,u.remove();var g=0;this.sortable&&this._togglesort&&this.showsortmenuitems&&(t.append(i),this.menuitemsarray[0]=i[0],t.append(r),this.menuitemsarray[1]=r[0],t.append(s),this.menuitemsarray[2]=s[0],g=3),this.groupable&&this._initgroupsheader&&this.showgroupmenuitems&&(t.append(o),this.menuitemsarray[3]=o[0],t.append(a),this.menuitemsarray[4]=a[0],g+=2);var p=g*this._measureMenuElement()+9,m=!0;if(this.filterable&&!this.showfilterrow&&this.showfiltermenuitems){if(!this._initfilterpanel)throw new Error("jqxGrid: Missing reference to jqxgrid.filter.js.");this.menuitemsarray[5]=v[0],this.menuitemsarray[6]=v[0],t.append(n),t.append(v),p+=220,te.jqx.browser.msie&&te.jqx.browser.version<8&&(p+=20),this.isTouchDevice()&&(p+=30);var f=te(v).find("div:first");this.excelfilterpanel=te("<div></div>"),this.filterpanel=f,this.filtermenu=te(v),c+=20,this.adaptive&&this.element.offsetWidth<this.adaptivewidth&&(c=this.element.offsetWidth-50),this._initfilterpanel(this,f,"",c),this._initfilterpanel(this,this.excelfilterpanel,"",c,!0),m=!1,this.removeHandler(te(document),"click.menu"+w.element.id,w._closemenuafterclick,w),this.addHandler(te(document),"click.menu"+w.element.id,w._closemenuafterclick,w)}this.gridmenu.append(t),te.jqx.browser.msie&&te.jqx.browser.version<8&&this.filterable&&(te("#listBoxfilter1"+this.element.id).css("z-index",49),te("#listBoxfilter2"+this.element.id).css("z-index",49),te("#listBoxfilter3"+this.element.id).css("z-index",49),te("#gridmenu"+this.element.id).css("z-index",50),this.addHandler(te("#gridmenu"+this.element.id),"initialized",function(){te("#menuWrappergridmenu"+w.element.id).css("z-index",49)})),null==this.menuitemsarray[0]&&"light"!==this.theme&&"dark"!==this.theme&&(p=65),this.removeHandler(te(window),"orientationchange.jqxgrid"+this.element.id),this.removeHandler(te(window),"orientationchanged.jqxgrid"+this.element.id),this.addHandler(te(window),"orientationchange.jqxgrid"+this.element.id,function(){w.gridmenu.jqxMenu("close")}),this.addHandler(te(window),"orientationchanged.jqxgrid"+this.element.id,function(){w.gridmenu.jqxMenu("close")}),this.removeHandler(this.gridmenu,"keydown"),this.addHandler(this.gridmenu,"keydown",function(e){function t(e){for(var t=p.indexOf(e)-1;0<=t;t--)if(!(0<=p[t].className.indexOf("disabled")))return p[t];return e}function i(e){for(var t=p.indexOf(e)+1;t<p.length;t++)if(!(0<=p[t].className.indexOf("disabled")))return p[t];return e}function r(){var e=p[p.length-1];return 0<=e.className.indexOf("disabled")?t(e):e}function s(e){te(p).removeClass("jqx-fill-state-focus");for(var t=0;t<p.length;t++)p[t].active=!1;e&&(te(e).addClass("jqx-fill-state-focus"),e.active=!0)}var l,o,a,n,d,h,c,u,g,p=te(w.gridmenu.find(".jqx-item")).toArray(),m=function(){for(var e=0;e<p.length;e++)if(p[e].active)return p[e];return null};if((m()||w.filterable||(p[0].active=!0),w.keyboardmenunavigation&&w.keyboardnavigation)&&(40===e.keyCode?(m=m(),s(i(m))):38===e.keyCode&&(m=m(),s(t(m))),9===e.keyCode)){if(!m())return e.shiftKey&&(document.activeElement===te.find("#filter1"+w.element.id)[0]?(s(r()),te(te.find("#filter1"+w.element.id)).removeClass("jqx-fill-state-focus"),w.gridmenu.focus(),e.stopPropagation(),e.preventDefault()):document.activeElement===te.find("#filter1"+w.element.id+"ex")[0]&&(s(r()),te(te.find("#filter1"+w.element.id)+"ex").removeClass("jqx-fill-state-focus"),w.gridmenu.focus(),e.stopPropagation(),e.preventDefault())),!0;e.shiftKey?(m=m(),s(t(m))):(m=m())===r()&&w.filterable&&!w.showfilterrow?(s(null),0<te(te.find("#filter1"+w.element.id)).length?te(te.find("#filter1"+w.element.id)).jqxDropDownList("focus"):0<te(te.find("#filter1"+w.element.id+"ex")).length&&te(te.find("#filter1"+w.element.id+"ex")).jqxListBox("focus")):s(i(m)),e.stopPropagation(),e.preventDefault()}27==e.keyCode?w.gridmenu.jqxMenu("close"):13==e.keyCode&&(p=w.gridmenu.find(".jqx-item"),(m=m())?(te(m).trigger("click"),s(null)):w._buildfilter&&w.filterable&&!w.showfilterrow&&(0<te.find("#filter1"+w.element.id).length&&(l="block"==te(te.find("#filter1"+w.element.id)).jqxDropDownList("container").css("display"),o="block"==te(te.find("#filter2"+w.element.id)).jqxDropDownList("container").css("display"),a="block"==te(te.find("#filter3"+w.element.id)).jqxDropDownList("container").css("display")),n=te(te.find("#filterclearbutton"+w.element.id)).hasClass("jqx-fill-state-focus"),d=te(te.find("#filterbutton"+w.element.id)).hasClass("jqx-fill-state-focus"),n?(h=te.data(document.body,"contextmenu"+w.element.id).column,w._clearfilter(w,w.element,h),w.gridmenu.jqxMenu("close")):d&&(l||o||a||(h=te.data(document.body,"contextmenu"+w.element.id).column,w.gridmenu.jqxMenu("close"),w._buildfilter(w,v,h)))),c=0<w.selectedcells.length||0<w.selectedrowindexes.length,w.clearselection(),(u=w.getdisplayrows()[0])&&(g=w.getboundindex(u),0<=w.selectionmode.indexOf("cell")?c&&w.selectcell(g,w.columns.records[0].displayfield):c&&w.selectrow(g)))}),"auto"!=this.popupwidth&&(c=this.popupwidth),this.gridmenu.jqxMenu({popupZIndex:1e3,width:c,height:p,autoCloseOnClick:m,autoOpenPopup:!1,mode:"popup",theme:this.theme,animationShowDuration:0,animationHideDuration:0,animationShowDelay:0});var b,x,y=document.querySelectorAll(".jqx-menu-wrapper");this.gridmenu.parent().attr("tabindex",y.length-1),this.filterable&&this.gridmenu.jqxMenu("_setItemProperty",v[0].id,"closeOnClick",!1),this.rtl&&(b=this.that,te.each(t.find("li"),function(){te(this).addClass(b.toTP("jqx-rtl"))}),(x=function(e){var t=e.find("div");t.css("float","right"),t.css("margin-left","4px"),t.css("margin-right","-4px")})(s),x(r),x(i),x(o),x(a)),this._handlemenueevents()}else this.columnsmenu=!1},_arrangemenu:function(){this.gridmenu||this._initmenu();var e=this.gridlocalization.sortascendingstring.length,t=this.gridlocalization.sortascendingstring;this.gridlocalization.sortdescendingstring.length>e&&(e=this.gridlocalization.sortdescendingstring.length,t=this.gridlocalization.sortdescendingstring),this.gridlocalization.sortremovestring.length>e&&(e=this.gridlocalization.sortremovestring.length,t=this.gridlocalization.sortremovestring),this.groupable&&this._initgroupsheader&&(this.gridlocalization.groupbystring.length>e&&(e=this.gridlocalization.groupbystring.length,t=this.gridlocalization.groupbystring),this.gridlocalization.groupremovestring.length>e&&(e=this.gridlocalization.groupremovestring.length,t=this.gridlocalization.groupremovestring));var i=200,t=te.trim(t).replace(/\&nbsp\;/gi,"").replace(/\&#160\;/gi,""),r=te("<span>"+t+"</span>");r.addClass(this.toThemeProperty("jqx-menu-item")),this.host.append(r),i=r.outerWidth()+60,r.remove();var s=0;this.sortable&&this._togglesort&&this.showsortmenuitems&&(s=3),this.groupable&&this._initgroupsheader&&this.showgroupmenuitems&&(s+=2);var l=s*this._measureMenuElement()+9;this.filterable&&this.showfiltermenuitems&&this._initfilterpanel&&(l+=224,i+=20,te.jqx.browser.msie&&te.jqx.browser.version<8&&(l+=20),this.isTouchDevice()&&(l+=30)),null==this.menuitemsarray[0]&&"light"!==this.theme&&"dark"!==this.theme&&(l=65),"auto"!=this.popupwidth&&(i=this.popupwidth),"auto"!=this.popupheight&&(l=this.popupheight),this.gridmenu.jqxMenu({width:i,height:l})},_closemenuafterclick:function(e){var t=null!=e?e.data:this,i=!1;if(null==e.target||null!=e.target&&null==e.target.className.indexOf)t.gridmenu.jqxMenu("close");else if(-1==e.target.className.indexOf("filter")||-1!=e.target.className.indexOf("jqx-grid-cell-filter"))if(-1==e.target.className.indexOf("jqx-grid-cell")){if(!t._hasOpenedMenu||!te(e.target).ischildof(t.gridmenu)){t.host.coord();var r=t.gridmenu.coord(),s=e.pageX,l=e.pageY;if(te.each(te(e.target).parents(),function(){return null!=this.id&&this.id.indexOf&&-1!=this.id.indexOf("filter")||this.className.indexOf&&-1!=this.className.indexOf("filter")&&-1==this.className.indexOf("jqx-grid-cell-filter")?!(i=!0):this.className.indexOf&&-1!=this.className.indexOf("jqx-grid-cell")||this.className.indexOf&&-1!=this.className.indexOf("jqx-grid-column")?(t.gridmenu.jqxMenu("close"),!1):void 0}),!i){try{if("default"===t.filtermode){var o=te(te.find("#filter1"+t.element.id)).jqxDropDownList("listBox").vScrollInstance._mouseup;if((a=new Date)-o<100)return;if(a-te(te.find("#filter3"+t.element.id)).jqxDropDownList("listBox").vScrollInstance._mouseup<100)return;if("block"==te(te.find("#filter3"+t.element.id)).jqxDropDownList("container").css("display"))return;if("block"==te(te.find("#filter1"+t.element.id)).jqxDropDownList("container").css("display"))return;if("block"==te(te.find("#filter2"+t.element.id)).jqxDropDownList("container").css("display"))return;if(t._hasdatefilter&&"div"==te(".filtertext1"+t.element.id)[0].nodeName.toLowerCase()){if("block"==te(".filtertext1"+t.element.id).jqxDateTimeInput("container").css("display"))return;if("block"==te(".filtertext2"+t.element.id).jqxDateTimeInput("container").css("display"))return}}else{var a,o=te(te.find("#filter1"+t.element.id)).data().jqxListBox.instance.vScrollInstance._mouseup;if((a=new Date)-o<100)return;if(a-te(te.find("#filter1"+t.element.id)).data().jqxListBox.instance.hScrollInstance._mouseup<100)return}}catch(e){}if(!(s>=r.left&&s<=r.left+t.gridmenu.width()&&l>=r.top&&l<=r.top+t.gridmenu.height())){if(t.columnmenuclosing){var n=(n=te.data(document.body,"contextmenu"+t.element.id))||{column:{displayfield:null}};if(!1===t.columnmenuclosing(t.gridmenu,n.column.displayfield,te(t.gridmenu).height()))return}t.gridmenu.jqxMenu("close")}}}}else t.gridmenu.jqxMenu("close")},openColumnChooser:function(e,t){var r=this;t=t||"Columns",e&&!te.isEmptyObject(e)||(e=r.columns.records);for(var i=[],s=0;s<e.length;s++)i.push({label:e[s].text,value:e[s].datafield,checked:!e[s].hidden});var l=document.createElement("div");l.innerHTML="<div>"+t+'</div><div style="overflow:hidden;"></div>';var o=document.createElement("div");o.style.width="100%",o.style.height="calc(100% - 30px)";var a=new jqxListBox(o,{width:"100%",height:"calc(100% - 30px)",checkboxes:!0,source:i}),n=new jqxWindow(l,{width:400,height:400,position:"center",isModal:!0}),d=document.createElement("button");d.innerHTML=this.gridlocalization.okstring;var h=document.createElement("button");h.innerHTML=this.gridlocalization.cancelstring,d.style.width="50%",d.style.height="100%",h.style.width="50%",h.style.height="100%";var c=document.createElement("div");c.style.height="30px",n.open(),setTimeout(function(){l.querySelector(".jqx-widget-content").appendChild(o),l.querySelector(".jqx-widget-content").appendChild(c),c.appendChild(d),c.appendChild(h),d=new jqxButton(d,{theme:r.theme}),h=new jqxButton(h,{theme:r.theme}),d.element.style.borderTopRightRadius="0px",d.element.style.borderBottomRightRadius="0px",d.element.style.borderTopLeftRadius="0px",d.element.style.borderBottomLeftRadius="0px",h.element.style.borderTopLeftRadius="0px",h.element.style.borderBottomLeftRadius="0px",h.element.style.borderTopRightRadius="0px",h.element.style.borderBottomRightRadius="0px",h.element.style.marginLeft="-2px",a.on("checkChange",function(){var e=a.getCheckedItems();d.disabled=0===e.length}),d.on("click",function(){n.destroy(),r.beginupdate();for(var e=a.getItems(),t=0;t<e.length;t++){var i=e[t];!1===i.checked?r.hidecolumn(i.value):r.showcolumn(i.value)}r.endupdate()}),h.on("click",function(){n.destroy()})},100),n.on("close",function(){n.destroy()})},_handlemenueevents:function(){var a=this.that;this.removeHandler(this.gridmenu,"closed"),this.addHandler(this.gridmenu,"closed",function(e){a._closemenu()}),this.removeHandler(this.gridmenu,"itemclick"),this.addHandler(this.gridmenu,"itemclick",function(e){for(var t=e.args,i=0;i<a.menuitemsarray.length;i++){if(t==a.menuitemsarray[i]){if(null!=te(t).attr("ignoretheme"))return;var r=te.data(document.body,"contextmenu"+a.element.id),s=r.column;a.filterable&&a.gridmenu.jqxMenu("close");var l=s.displayfield;if(null==l&&(l=s.datafield),null!=r)switch(i){case 0:a.sortby(l,"ascending",null);break;case 1:a.sortby(l,"descending",null);break;case 2:a.sortby(l,null,null);break;case 3:a.addgroup(l);break;case 4:a.removegroup(l);break;case 5:var o=te(a.menuitemsarray[6]);te(o).css("display","block")}break}}})},getdatainformation:function(){var e=this.dataview.totalrecords;return this.summaryrows&&(e+=this.summaryrows.length),{rowscount:e,sortinformation:this.getsortinformation(),paginginformation:this.getpaginginformation()}},getsortinformation:function(){return{sortcolumns:this.getsortcolumns?this.getsortcolumns():[],sortcolumn:this.sortcolumn,sortdirection:this.sortdirection}},getpaginginformation:function(){return{pagenum:this.dataview.pagenum,pagesize:this.pagesize,pagescount:Math.ceil(this.dataview.totalrecords/this.pagesize)}},_updaterowsproperties:function(){this._updatehiddenrows(),this._updaterowheights(),this._updaterowdetails()},_updatehiddenrows:function(){var i=this.that;this.hiddens=new Array;var e=this.hiddenboundrows;te.each(e,function(e){var t;null!=this.index&&(this.index,t=i.getrowvisibleindex(e),i.hiddens[t]=this.hidden)})},_updaterowheights:function(){var i=this.that;this.heights=new Array;var e=this.heightboundrows;te.each(e,function(e){var t;null!=this.index&&(this.index,t=i.getrowvisibleindex(e),i.heights[t]=this.height)})},_updaterowdetails:function(){var i=this.that;this.details=new Array;var e=this.detailboundrows;te.each(e,function(e){var t;null!=this.index&&(this.index,t=i.getrowvisibleindex(e),i.details[t]=this.details)})},_getmenuitembyindex:function(e){return null==e?null:this.menuitemsarray[e]},openmenu:function(e){if(!this._openingmenu){this._openingmenu=!0,this.closemenu();var t=this.getcolumn(e);if(!t.menu)return!1;this.gridmenu||this._initmenu();var i=t.columnsmenu;te(t.element).trigger("mouseenter"),this.menuOwner=t;for(var r=this,s=0;s<r.columns.records.length;s++)r.columns.records[s].datafield!=e&&te(r.columns.records[s].element).trigger("mouseleave");setTimeout(function(){"block"==te(i)[0].style.display&&te(i).trigger("click"),r._openingmenu=!1},200)}},closemenu:function(){this._closemenu()},_closemenu:function(){if(this._hasOpenedMenu){if(this.columnmenuclosing)if(e=(e=te.data(document.body,"contextmenu"+this.element.id))||{column:{displayfield:null}},!1===this.columnmenuclosing(this.gridmenu,e.column.displayfield,te(this.gridmenu).height()))return;null!=this.gridmenu&&this.gridmenu.jqxMenu("close");var e,t;null!=(e=te.data(document.body,"contextmenu"+this.element.id))&&this.autoshowcolumnsmenubutton&&(this.enableanimations?(te(e.columnsmenu).animate({"margin-left":0},"fast",function(){te(e.columnsmenu).css("display","none")}),t=this.rtl?0:-32,e.column.iconscontainer.animate({"margin-left":t},"fast")):(te(e.columnsmenu).css("display","none"),t=this.rtl?0:-32,e.column.iconscontainer.css("margin-left",t)),te.data(document.body,"contextmenu"+this.element.id,null)),this._hasOpenedMenu=!1,this.menuOwner=null;var i,r,s,l=this._getmenuitembyindex(5);l&&(i=te(l).find("#filter1"+this.element.id),r=te(l).find("#filter2"+this.element.id),s=te(l).find("#filter3"+this.element.id),0<i.length&&"default"===this.filtermode&&(i.jqxDropDownList("hideListBox"),0<r.length&&r.jqxDropDownList("hideListBox"),0<s.length&&s.jqxDropDownList("hideListBox"))),this.focus()}},scrolloffset:function(e,t){null!=e&&null!=t&&null!=e&&null!=t&&(this.vScrollBar.jqxScrollBar("setPosition",e),this.hScrollBar.jqxScrollBar("setPosition",t))},scrollleft:function(e){null!=e&&null!=e&&"hidden"!=this.hScrollBar.css("visibility")&&this.hScrollBar.jqxScrollBar("setPosition",e)},scrolltop:function(e){null!=e&&null!=e&&"hidden"!=this.vScrollBar.css("visibility")&&this.vScrollBar.jqxScrollBar("setPosition",e)},beginupdate:function(e,t){this._updating=!0,!(this._datachanged=!1)===e&&(this._batchupdate=!0),!0===t&&(this._stopbindings=!0)},endupdate:function(){this.resumeupdate()},resumeupdate:function(){if(this._updating=!1,this._batchupdate)return this._batchupdate=!1,this._datachanged=!1,void(this._stopbindings?this.updatebounddata():this.render());var e;this._stopbindings?this.updatebounddata("data"):(1==this._datachanged?(e=this.vScrollInstance.value,this.render(!0,!0,!1),this._datachanged=!1,0!=e&&e<this.vScrollInstance.max&&this.scrolltop(e)):(this.rendergridcontent(!0),this._renderrows(this.virtualsizeinfo)),this.showaggregates&&this.renderaggregates&&this.renderaggregates(),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo))},updating:function(){return this._updating},showloadelement:function(){this.renderloadelement&&this.dataloadelement.html(this.renderloadelement()),this.dataloadelement.width(this.host.width()),this.dataloadelement.height(this.host.height()),te(this.dataloadelement).css("visibility","visible"),te(this.dataloadelement).css("display","block")},hideloadelement:function(){te(this.dataloadelement).css("visibility","hidden"),te(this.dataloadelement).css("display","none")},_updatefocusedfilter:function(){var i=this.that;i.focusedfilter&&(i.focusedfilter.focus(),setTimeout(function(){if(i.focusedfilter.focus(),"input"==i.focusedfilter[0].nodeName.toLowerCase()){var e,t=i.focusedfilter.val().length;try{"selectionStart"in i.focusedfilter[0]?i.focusedfilter[0].setSelectionRange(t,t):((e=i.focusedfilter[0].createTextRange()).collapse(!0),e.moveEnd("character",t),e.moveStart("character",t),e.select())}catch(e){}}},50))},databind:function(e,n){var d,h,t,i,r;!0!==this.loadingstate&&!0!==this._stopbindings&&(d=window,"block"==this.host.css("display")&&(this.autoshowloadelement?(te(this.dataloadelement).css("visibility","visible"),te(this.dataloadelement).css("display","block"),this.dataloadelement.width(this.host.width()),this.dataloadelement.height(this.host.height()),this._hideemptyrow()):(te(this.dataloadelement).css("visibility","hidden"),te(this.dataloadelement).css("display","none"))),!this._initgroupsheader&&0<this.groups.length&&(this.groups=new Array),h=this.that,null==e&&(e={}),e.recordstartindex||(e.recordstartindex=0),e.recordendindex||(e.recordendindex=0),null!=e.loadallrecords&&null!=e.loadallrecords||(e.loadallrecords=!0),null!=e.sortcomparer&&null!=e.sortcomparer||(e.sortcomparer=null),null!=e.filter&&null!=e.filter||(e.filter=null),null!=e.sort&&null!=e.sort||(e.sort=null),null!=e.data&&null!=e.data||(e.data=null),(t=null)!=e&&(t=null!=e._source?e._source.url:e.url),this.dataview=this.dataview||new te.jqx.dataview,te.jqx.dataview.sort&&te.extend(this.dataview,new te.jqx.dataview.sort),te.jqx.dataview.grouping&&te.extend(this.dataview,new te.jqx.dataview.grouping),this.dataview.suspendupdate(),this.dataview.pageable=this.pageable,this.dataview.groupable=this.groupable,this.dataview.groups=this.groups,this.dataview.virtualmode=this.virtualmode,(this.dataview.grid=this).dataview._clearcaches(),!this.pageable&&this.virtualmode&&(this.loadondemand=!0),h.initializedcall||(e._source&&this.sortable&&(null!=e._source.sortcolumn&&(this.sortcolumn=e._source.sortcolumn,this.source.sortcolumn=this.sortcolumn,this.dataview.sortfield=e._source.sortcolumn,e._source.sortcolumn=null),null!=e._source.sortdirection&&(this.dataview.sortfielddirection=e._source.sortdirection,r="a"==(i=e._source.sortdirection)||"asc"==i||"ascending"==i||1==i,this.sortdirection=null!=i?{ascending:r,descending:!r}:{ascending:!1,descending:!1})),this.pageable&&e._source&&(null!=e._source.pagenum&&(this.dataview.pagenum=e._source.pagenum),null!=e._source.pagesize?(this.pagesize=e._source.pagesize,this.dataview.pagesize=e._source.pagesize):(this.dataview.pagesize=e._source.pagesize,null==this.dataview.pagesize&&(this.dataview.pagesize=this.pagesize))),this.sortable&&(e.sortcolumn&&(this.dataview.sortfield=e.sortcolumn),e.sortdirection&&(this.dataview.sortfielddirection=e.sortdirection)),this.filterable&&this.columns&&te.each(this.columns,function(){this.filter&&h.dataview.addfilter(this.datafield,this.filter)})),this._loading=!0,this.dataview.update=function(e){if(!h.pageable&&h.virtualmode&&(h.loadondemand=!0),h._loading=!1,h.dataview.isupdating()&&h.dataview.resumeupdate(!1),h.pageable&&h.pagerrenderer){if(!h._initpager)throw new Error("jqxGrid: Missing reference to jqxgrid.pager.js.");h._initpager()}if(h.source&&h.source.sortcolumn&&h.sortby&&!h.virtualmode)h.render(),h.source._source.sort||h.sortby(h.source.sortcolumn,h.source.sortdirection,h.source.sortcomparer),h.source.sortcolumn=null,h._postrender("data");else{var t=h.vScrollInstance.value,i=h.hScrollInstance.value,r=h.source?h.source.datatype:"array";if("local"!=r||"array"!=r){var s=null==h.virtualsizeinfo||null!=h.virtualsizeinfo&&0==h.virtualsizeinfo.virtualheight;if("cells"==n){var l=!1;if(h.filterable&&h._initfilterpanel&&h.dataview.filters.length&&(l=!0),0==e)return h.vScrollInstance.isScrolling()||h.hScrollInstance.isScrolling()||(h._cellscache=new Array,h._pagescache=new Array,h._renderrows(h.virtualsizeinfo),h.showfilterrow&&h.filterable&&h.filterrow&&h._updatelistfilters(!0),h.showaggregates&&h._updateaggregates&&h._updateaggregates()),h.sortcolumn&&h.sortby(h.sortcolumn,h.dataview.sortfielddirection,h.source.sortcomparer),h.autoshowloadelement&&(te(h.dataloadelement).css("visibility","hidden"),te(h.dataloadelement).css("display","none")),h.virtualmode&&!h._loading&&(h.loadondemand=!0,h._renderrows(h.virtualsizeinfo)),void h._postrender("data");l?n="filter":null!=h.sortcolumn&&(n="sort")}if(!h.virtualmode||s||h.virtualmode&&h.pageable)if(1==h.initializedcall&&"pagechanged"==n)t=0,h.groupable&&0<h.groups.length?(h._render(!0,!0,!1,!1,!1),h._updatecolumnwidths(),h._updatecellwidths(),h._renderrows(h.virtualsizeinfo),h._postrender("data")):(h.rendergridcontent(!0),h.pageable&&h.updatepagerdetails&&(h.updatepagerdetails(),h.autoheight?(h._updatepageviews(),h.autorowheight&&h._renderrows(this.virtualsizeinfo)):h.autorowheight&&(h._updatepageviews(),h._renderrows(this.virtualsizeinfo)))),h.showaggregates&&h._updateaggregates&&h._updateaggregates(),h._postrender("data");else if("filter"==n)h.virtualmode,h._render(!0,!0,!1,!1,!1),h._updatecolumnwidths(),h._updatecellwidths(),h._renderrows(h.virtualsizeinfo),h._updatefocusedfilter(),h._postrender("data");else if("sort"==n){if(h.virtualmode)h.rendergridcontent(!0),h.showaggregates&&h._updateaggregates&&h._updateaggregates(),h._postrender("data");else{if(h._render(!0,!0,!1,!1,!1),"many"===h.sortmode)for(var o in h.sortcolumns)h.sortby(o,h.sortcolumns[o],h.source.sortcomparer);else h.sortcolumn&&!h.source.sort&&h.sortby(h.sortcolumn,h.dataview.sortfielddirection,h.source.sortcomparer);h._postrender("data")}h.source.sort&&h._updatefocusedfilter()}else"data"==n?h._render(!0,!0,!1,!1,!1):"state"==n?h._render(!0,!0,!1,h.menuitemsarray&&0<h.menuitemsarray.length&&!h.virtualmode):h._render(!0,!0,!0,h.menuitemsarray&&0<h.menuitemsarray.length&&!h.virtualmode),h._postrender("data");else h.virtualmode&&1==e&&!h.pageable?(h._render(!0,!0,!1,!1,!1),h._updatefocusedfilter(),h._updatecolumnwidths(),h._updatecellwidths(),h._renderrows(h.virtualsizeinfo)):h.virtualmode&&!h.pageable&&0==e&&null!=n?(h.rendergridcontent(!0),h.showaggregates&&h._updateaggregates&&h._updateaggregates()):h.virtualmode&&0==h.dataview.totalrecords&&0<h.dataview.filters.length?h._render(!0,!0,!0,h.menuitemsarray&&!h.virtualmode):(h._pagescache=new Array,h._renderrows(h.virtualsizeinfo)),h._postrender("data");h.vScrollInstance.value!=t&&t<=h.vScrollInstance.max&&h.vScrollInstance.setPosition(t),h.hScrollInstance.value!=i&&i<=h.hScrollInstance.max&&h.hScrollInstance.setPosition(i)}}var a;h.autoshowloadelement&&(te(h.dataloadelement).css("visibility","hidden"),te(h.dataloadelement).css("display","none")),h.pageable&&(h.pagerrightbutton&&(h.pagerrightbutton.jqxButton({disabled:!1}),h.pagerleftbutton.jqxButton({disabled:!1}),h.pagershowrowscombo.jqxDropDownList({disabled:!1})),h.pagerfirstbutton&&(h.pagerfirstbutton.jqxButton({disabled:!1}),h.pagerlastbutton.jqxButton({disabled:!1}))),h._raiseEvent(11),h.initializedcall?h._updateTouchScrolling():(a=function(){if(h._raiseEvent(0),h.initializedcall=!0,h.isInitialized=!0,h.ready&&h.ready(),"many"===h.sortmode&&h.sortable&&h.source&&h.source.sortcolumns)for(var e=h.source.sortcolumns,t=0;t<e.length;t++)h.sortby(e[t],"asc"===h.source.sortdirections[t]);var i,r;h.renderstatusbar&&h.renderstatusbar(h.statusbar),h.rendertoolbar&&h.rendertoolbar(h.toolbar),h._rendercelltexts&&h._rendercelltexts(),h._gridRenderElement&&(te(h._gridRenderElement).show("slow"),i=6e3+Math.floor(4e3*Math.random()+1),r=String.fromCharCode(83,69,84).toLowerCase()+"-"+String.fromCharCode(84,73,77,69,79,85,84).toLowerCase(),d[te.camelCase(r)](function(){te(h._gridRenderElement).hide("slow",function(){te(h._gridRenderElement).remove()})},i)),h.autoloadstate&&h.loadstate&&h.loadstate(null,!0)},te.jqx.isHidden(h.host)?(h.readyInterval&&clearInterval(h.readyInterval),h.readyInterval=setInterval(function(){te.jqx.isHidden(h.host)||h.__isRendered&&(clearInterval(h.readyInterval),h.readyInterval=null,a(),h._initmenu())},200)):a(),null!=h.width&&-1!=h.width.toString().indexOf("%")||null!=h.height&&h.height.toString().indexOf("%"),"hidden"==h.host.css("visibility")&&(te.jqx.browser.msie&&te.jqx.browser.version,"visible"==h.vScrollBar.css("visibility")&&h.vScrollBar.css("visibility","inherit"),h.autowidth||"visible"==h.hScrollBar.css("visibility")&&h.hScrollBar.css("visibility","inherit"),h._intervalTimer=setInterval(function(){"visible"==h.host.css("visibility")&&(h._updatesize(!0),clearInterval(h._intervalTimer))},100)))},this.dataview.databind(e),this.dataview.isupdating()&&(null!=t?this.dataview.suspend=!1:this.dataview.resumeupdate(!1)),this._initializeRows())},scrollto:function(e,t){null!=e&&this.hScrollInstance.setPosition(e),null!=t&&this.vScrollInstance.setPosition(t)},scrollposition:function(){return{top:this.vScrollInstance.value,left:this.hScrollInstance.value}},ensurerowvisible:function(e){var t=this;if(this.autoheight&&!this.pageable)return!0;var i,r=this._getpagesize(),s=Math.floor(e/r);if(this._pageviews[s]||this.pageable||this._updatepageviews(),this.groupable&&0<this.groups.length){for(var l=this.getdisplayrows(),o=0,a=0;a<l.length;a++){var n=l[a];if(n.boundindex===e){var d=this.vScrollInstance.value,h=this._gettableheight()-this.rowsheight;(o<d||d+h<o)&&this.scrolltop(o-this.rowsheight),o===d&&this.scrolltop(o-this.rowsheight);break}for(var c=n.parentItem,u=!0;c;){if(c&&!((i=c).group&&t.expandedgroups[i.uniqueid]&&t.expandedgroups[i.uniqueid].expanded)){u=!1;break}c=c.parentItem}u&&(o+=this.rowsheight,this.details[a]&&0==this.details[a].rowdetailshidden&&(o+=this.details[a].rowdetailsheight))}return!0}var g=!1;if(this.pageable&&this.gotopage&&!this.virtualmode){s=Math.floor(e/r);if(this.dataview.pagenum!=s){if(this.groupable&&0<this.groups.length)return!0;if(this.editcell)return setTimeout(function(){t.pagerpageinput.focus()},25),!1;this.gotopage(s),g=!0}}var d=this.vScrollInstance.value,h=this._gettableheight()-this.rowsheight,p=r*(e/r-s),p=Math.round(p);if(this._pageviews[s]){var m=(o=this._pageviews[s].top)+p*this.rowsheight;if(this.rowdetails)for(a=r*s;a<e;a++)this.details[a]&&0==this.details[a].rowdetailshidden&&(m+=this.details[a].rowdetailsheight);"deferred"==this.scrollmode&&this.vScrollInstance.max<=m+this.rowsheight&&(m=this.vScrollInstance.max),m<d?(this.scrolltop(m),g=!0):d+h+2<m&&(this.scrolltop(m-h),g=!0)}else if(this.pageable){m=p*this.rowsheight;if(this.rowdetails)for(a=r*s;a<r*s+p;a++)this.details[a]&&0==this.details[a].rowdetailshidden&&(m+=this.details[a].rowdetailsheight);(m<d||d+h<m)&&(this.scrollto(0,m),g=!0)}return g},ensurecellvisible:function(e,i){var r=this.that,s=this.hScrollBar.jqxScrollBar("value"),l=r.hScrollInstance.max;r.rtl&&"visible"!=this.hScrollBar.css("visibility")&&(l=0);var t=this.ensurerowvisible(e),o=0;if(this.columns.records){var a=s;if("hidden"==this.hScrollBar.css("visibility"))return;var n=this.host.width(),d=0,h="visible"==this.vScrollBar.css("visibility")?20:0,c=!1;te.each(this.columns.records,function(){if(this.hidden)return!0;if(this.datafield==i){var e=0,t=r.rtl?l-s:a;return o+this.width>t+n-h?(e=o+this.width-n+h,r.rtl&&(e=l-e),r.scrollleft(e),c=!0):o<=t&&(e=o-this.width,r.rtl&&(e=l-e),r.scrollleft(e),c=!0),0==d?(r.rtl?r.scrollleft(l):r.scrollleft(0),c=!0):d==r.columns.records.length-1&&"visible"==r.hScrollBar.css("visibility")&&(r.rtl?r.scrollleft(r.hScrollBar.jqxScrollBar("min")):r.scrollleft(r.hScrollBar.jqxScrollBar("max")),c=!0),!1}d++,o+=this.width}),c||r.scrollleft(a)}return t},setrowheight:function(e,t){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);return null!=e&&null!=t&&(this.heightboundrows[e]={index:e,height:t},!((e=this.getrowvisibleindex(e))<0)&&(this.rows.records[e]?this.rows.records[e].height=t:((i=new m(this,null)).height=t,this.rows.replace(e,i)),this.heights[e]=t,this.rendergridcontent(!0),!0));var i},getrowheight:function(e){return null==e?null:!((e=this.getrowvisibleindex(e))<0)&&(this.rows.records[e]?this.rows.records[e].height:void 0)},setrowdetails:function(e,t,i,r){if(!(null==e||null==e||e<0)){var s,l=e+"_";this._rowdetailscache[l]&&(s=this._rowdetailscache[l].element,te(s).remove(),this._rowdetailscache[l]=null);var o=this.dataview.generatekey();return this.detailboundrows[e]={index:e,details:{rowdetails:t,rowdetailsheight:i,rowdetailshidden:r,key:o}},!((e=this.getrowvisibleindex(e))<0)&&this._setrowdetails(e,t,i,r,o)}},getcolumn:function(e){var t=null;return this.columns.records?te.each(this.columns.records,function(){if(this.datafield==e||this.displayfield==e)return t=this,!1}):this.columns&&te.each(this.columns,function(){if(this.datafield==e||this.displayfield==e)return t=this,!1}),t},_getcolumnindex:function(e){var t=-1;return this.columns.records&&te.each(this.columns.records,function(){if(t++,this.datafield==e)return!1}),t},_getcolumnat:function(e){return this.columns.records[e]},_getprevvisiblecolumn:function(e){for(var t=this.that;0<e;){e--;var i=t.getcolumnat(e);if(!i)return null;if(!i.hidden)return i}return null},_getnextvisiblecolumn:function(e){for(var t=this.that;e<this.columns.records.length;){e++;var i=t.getcolumnat(e);if(!i)return null;if(!i.hidden)return i}return null},getcolumnat:function(e){return isNaN(e)?null:this.columns.records[e]},_getcolumn:function(e){var t=null;return te.each(this._columns,function(){if(this.datafield==e||this.displayfield==e)return t=this,!1}),t},_setcolumnproperty:function(e,t,i){if(null==e||null==t||null==i)return null;t=t.toLowerCase();var r=this.getcolumn(e);if(null!=r){var s=r[t];r[t]=i;var l=this._getcolumn(e);switch(null!=l&&(l[t]=i),this._cellscache=new Array,t){case"filteritems":this.filterable&&this.showfilterrow&&this._updatelistfilters(!0,!0);break;case"text":this.prerenderrequired=!0,this._rendercolumnheaders(),this._updatecellwidths(),this._groupsheader()&&this._initgroupsheader&&this._initgroupsheader(),this._renderrows(this.virtualsizeinfo),this.filterable&&this.showfilterrow&&this.refreshfilterrow();break;case"editable":case"resizable":case"draggable":if("editable"==t&&i!=s){if(null!=this.editcell&&this.endcelledit&&this.endcelledit(this.editcell.row,this.editcell.column,!0,!0),"checkbox"==r.columntype&&(this.prerenderrequired=!0,this.rendergridcontent(!0,!1),this.updating()))return!1;if(this.updating())return!1;this._renderrows(this.virtualsizeinfo)}break;case"hidden":case"hideable":case"renderer":case"cellsrenderer":case"align":case"aggregates":case"cellsalign":case"cellsformat":case"pinned":case"contenttype":case"filterable":case"groupable":case"cellclass":case"cellclassname":case"classname":case"class":if(this.prerenderrequired=!0,"pinned"==t&&(this._initializeColumns(),this._preparecolumngroups()),this.rendergridcontent(!0),this.updating())return!1;"hidden"==t&&(this._updatecolumnwidths(),this._updatecellwidths()),this._renderrows(this.virtualsizeinfo),this.showaggregates&&this._updateaggregates&&this._updateaggregates();break;case"width":case"minwidth":case"maxwidth":if(this.updating())return!1;r._width=null,r._percentagewidth=null,this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo)}}},_getcolumnproperty:function(e,t){return null==e||null==t?null:(t=t.toLowerCase(),this.getcolumn(e)[t])},setcolumnproperty:function(e,t,i){this._setcolumnproperty(e,t,i)},getcolumnproperty:function(e,t){return this._getcolumnproperty(e,t)},hidecolumn:function(e){this._setcolumnproperty(e,"hidden",!0)},showcolumn:function(e){this._setcolumnproperty(e,"hidden",!1)},iscolumnvisible:function(e){return!this._getcolumnproperty(e,"hidden")},pincolumn:function(e){this._setcolumnproperty(e,"pinned",!0)},unpincolumn:function(e){this._setcolumnproperty(e,"pinned",!1)},iscolumnpinned:function(e){return this._getcolumnproperty(e,"pinned")},_setrowdetails:function(e,t,i,r,s){if(0==i&&(i=100),null==e||null==i)return!1;if(null!=s)this.details[e]={rowdetails:t,rowdetailsheight:i,rowdetailshidden:r,detailskey:s};else{for(var l=null!=this.details[e]?this.details[e].detailskey:null,o={rowdetails:t,rowdetailsheight:i,rowdetailshidden:r,detailskey:l},a=(this.that,0);a<this.detailboundrows.length;a++)if(null!=this.detailboundrows[a]){var n=this.detailboundrows[a];if(n.details.detailskey==l){n.details.rowdetailsheight=o.rowdetailsheight,n.details.rowdetailshidden=o.rowdetailshidden,n.details.rowdetails=o.rowdetails;break}}this.details[e]=o}return this._detailsUpdate?void 0:(this.rendergridcontent(!0),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo),!0)},getrowdetails:function(e){return null!=e&&(e=this.getrowvisibleindex(e),this._getrowdetails(e))},_getrowdetails:function(e){if(null==e)return!1;if(e<0)return!1;if(this.details[e])return this.details[e];if(this.rowdetailstemplate){if("function"!=typeof this.rowdetailstemplate)return this.rowdetailstemplate;var t=this.rowdetailstemplate(e);return void 0===t.rowdetailshidden&&(t.rowdetailshidden=!0),void 0===t.rowdetailsheight&&(t.rowdetailsheight=200),void 0===t.rowdetails&&(t.rowdetails="<div></div>"),t}},getrecordscount:function(){return this.dataview.totalrecords},showrowdetails:function(e){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);if(null==e)return!1;if(this.detailsVisibility||(this.detailsVisibility=new Array),this.detailsVisibility[e]=!1,(e=this.getrowvisibleindex(e))<0)return!1;var t=this._getrowdetails(e);return this._setrowdetailsvisibility(e,t,!1)},hiderowdetails:function(e){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);if(this.detailsVisibility||(this.detailsVisibility=new Array),this.detailsVisibility[e]=!0,(e=this.getrowvisibleindex(e))<0)return!1;var t=this._getrowdetails(e);return this._setrowdetailsvisibility(e,t,!0)},_togglerowdetails:function(e){this.detailsVisibility||(this.detailsVisibility=new Array);var t=e.visibleindex,i=this._getrowdetails(t);if(null==i)return!1;var r=this.vScrollInstance.value,s=!i.rowdetailshidden,l=this.getboundindex(e);null!=l&&(this.detailsVisibility[l]=s);var o=this._setrowdetailsvisibility(t,i,s);return 0!==r&&"hidden"!==this.vScrollBar.css("visibility")&&(r<=this.vScrollInstance.max?this.vScrollInstance.setPosition(r):this.vScrollInstance.setPosition(this.vScrollInstance.max)),o},_setrowdetailsvisibility:function(e,t,i){var r,s;if(this.rowdetailstemplate&&(this.details||(this.details=new Array),this.details[e]||(void 0===(r="function"==typeof this.rowdetailstemplate?this.rowdetailstemplate(e):this.rowdetailstemplate).rowdetailshidden&&(r.rowdetailshidden=!0),void 0===r.rowdetailsheight&&(r.rowdetailsheight=200),void 0===r.rowdetails&&(r.rowdetails="<div></div>"),this.details[e]={rowdetailshidden:r.rowdetailshidden,rowdetailsheight:r.rowdetailsheight,rowdetails:r.rowdetails},s=this.dataview.generatekey(),this.details[e].detailskey=s,this.detailboundrows[e]={index:e,details:this.details[e]})),null==t)return!1;this.details[e].rowdetailshidden=i;var l=this.details[e];return i?this._raiseEvent(21,{rowindex:e,details:l.rowdetails,height:l.rowdetailsheight}):this._raiseEvent(20,{rowindex:e,details:l.rowdetails,height:l.rowdetailsheight}),this._setrowdetails(e,l.rowdetails,l.rowdetailsheight,l.rowdetailshidden)},getrowvisibleindex:function(e){if(null==e||null==e||e<0)return!1;if(this.virtualmode){var t=this.dataview.loadedrecords[e];return null==t?-1:t.visibleindex}return this.getrowdisplayindex(e)},hiderow:function(e){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);return!(null==e||null==e||e<0)&&(null!=e&&(this.hiddenboundrows[e]={index:e,hidden:!0},e=this.getrowvisibleindex(e),this._setrowvisibility(e,!0)))},showrow:function(e){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);return!(null==e||null==e||e<0)&&(null!=e&&(this.hiddenboundrows[e]={index:e,hidden:!1},e=this.getrowvisibleindex(e),this._setrowvisibility(e,!1)))},isrowhiddenat:function(e){return null==e?null:(e=this.getrowvisibleindex(e),this.rows.records[e]?this.rows.records[e].hidden:void 0)},_setrowvisibility:function(e,t,i){return null!=e&&(this.hiddens[e]=t,!(null!=i&&!i)&&(this.rendergridcontent(!0),!0))},_loadrows:function(){if(this._pageviews[this.dataview.pagenum]||this.pageable){var e=this.pageable?0:this._pageviews[this.dataview.pagenum].top;if(!this.pageable&&null!=this._pagescache[this.dataview.pagenum])return null;if(this.virtualsizeinfo){var t=this.that,i=new Array,r=new Array,s=t.groupable&&0<t.groups.length,l=(this.dataview.totalrecords,this.virtualsizeinfo.virtualheight,0);this.rows.beginupdate();var o=this.dataview.pagesize;this.pageable&&s&&(o=this.dataview.rows.length);for(var a=0;a<o&&!(a>=this.dataview.rows.length);a++){var n,d=this.dataview.rows[a],h=null;t.rows.records[d.visibleindex]?(h=t.rows.records[d.visibleindex]).setdata(d):h=new m(t,d),h.hidden=this.hiddens[h.visibleindex],this.rowdetailstemplate&&(n="function"==typeof this.rowdetailstemplate?this.rowdetailstemplate(h.boundindex):this.rowdetailstemplate,h.rowdetails=n.rowdetails,h.rowdetailsheight=n.rowdetailsheight,h.rowdetailshidden=n.rowdetailshidden,void 0===h.rowdetailshidden&&(h.rowdetailshidden=!0),void 0===h.rowdetailsheight&&(h.rowdetailsheight=200),void 0===h.rowdetails&&(h.rowdetails="<div></div>"));var c,u,g,p=this.details[h.visibleindex];p?(h.rowdetails=p.rowdetails,h.rowdetailsheight=p.rowdetailsheight,h.rowdetailshidden=p.rowdetailshidden,void 0===h.rowdetailshidden&&(h.rowdetailshidden=!0),void 0===h.rowdetailsheight&&(h.rowdetailsheight=200),void 0===h.rowdetails&&(h.rowdetails="<div></div>")):this.rowdetailstemplate||(h.rowdetails=null),s&&this.pageable&&null!=h.parentbounddata&&(null!=(c=i[h.parentbounddata.uniqueid])&&(u=this._findgroupstate(c.uniqueid),this._setsubgroupsvisibility&&this._setsubgroupsvisibility(this,h.parentbounddata,!u,!1),h.hidden=this.hiddens[h.visibleindex]),null!=c&&null!=c&&((h.parentrow=c).subrows[c.subrows.length++]=h)),h.hidden||(g=d.visibleindex,this.heights[g]||(this.heights[g]=this.rowsheight),h.height=this.heights[g],this.rowdetails&&h.rowdetails&&!h.rowdetailshidden&&(h.height+=h.rowdetailsheight),i[h.uniqueid]=h,(r[l++]=h).top=e,e+=h.height,t.rows.replace(g,h))}(this.autoheight||this.pageable)&&this.autorowheight&&this._pageviews&&0<this._pageviews.length&&(this._pageviews[0].height=e),this.rows.resumeupdate(),0<r.length&&(this._pagescache[this.dataview.pagenum]=r)}}},_updateaddnewrowui:function(e){for(var t=this,i="bottom"!=t.everpresentrowposition?t.addnewrowtop:t.addnewrowbottom,r=t.columns.records.length,s=0,l=0;l<r;l++){(o=t.columns.records[l]).addnewrowwidget&&te(o.addnewrowwidget).detach()}for(l=0;l<r;l++){var o,a=(o=t.columns.records[l]).width;a<o.minwidth&&(a=o.minwidth),a>o.maxwidth&&(a=o.maxwidth);var n=te(i[0].cells[l]);n.css("left",s);n.width()==a&&0,e&&0,n.width(a),n[0].left=s,o.addnewrowwidget&&(n.html(""),n.append(o.addnewrowwidget)),o.hidden&&o.hideable||o.adaptivehidden?n.css("display","none"):s+=a}var d=t.everpresentrowactions.split(" ");t.addnewrowbutton.show(),t.addnewrowupdatebutton.show(),t.addnewrowresetbutton.show(),t.addnewrowdeletebutton.show(),-1==d.indexOf("add")&&-1==d.indexOf("addBottom")&&t.addnewrowbutton.hide(),-1==d.indexOf("update")&&t.addnewrowupdatebutton.hide(),-1==d.indexOf("reset")&&t.addnewrowresetbutton.hide(),-1==d.indexOf("delete")&&t.addnewrowdeletebutton.hide();var h=te(i.children()[0]);h.width(parseInt(s)+2),h.height(t.everpresentrowheight),h.css("max-height",t.everpresentrowheight+"px")},_removeaddnewrow:function(){for(var e=this,t=e.columns.records.length,i=0;i<t;i++){var r=e.columns.records[i];r.addnewrowwidget&&(r.destroyeverpresentrowwidget?r.destroyeverpresentrowwidget(r.addnewrowwidget):r.addnewrowwidget.remove(),r.addnewrowwidget=null)}e.addnewrowbutton&&e.addnewrowbutton.remove(),e.addnewrowupdatebutton&&e.addnewrowupdatebutton.remove(),e.addnewrowdeletebutton&&e.addnewrowdeletebutton.remove(),e.addnewrowresetbutton&&e.addnewrowresetbutton.remove(),e.addnewrowpopup&&(e.addnewrowpopup.remove(),e.addnewrowpopup=null),e.addnewrowtop&&(e.addnewrowtop.remove(),e.addnewrowtop=null),e.addnewrowbottom&&(e.addnewrowbottom.remove(),e.addnewrowbottom=null)},_updateaddnewrow:function(){var w=this,e="bottom"!=w.everpresentrowposition?w.addnewrowtop:w.addnewrowbottom,t=te('<div style="position: relative;" id="row000'+w.element.id+'"></div>'),i=0,v=w.columns.records.length,r=w.toThemeProperty("jqx-grid-cell");r+=" "+w.toThemeProperty("jqx-grid-cell-add-new-row"),r+=" "+w.toThemeProperty("jqx-grid-cell-filter-row");var s=v+10,l=new Array;w.that;e[0].cells=l,t.height(w.everpresentrowheight),w.showfilterrow||"bottom"==w.everpresentrowposition?w.showfilterrow&&"bottom"!=w.everpresentrowposition&&e.css("max-height",w.everpresentrowheight-3+"px"):e.css("max-height",w.everpresentrowheight-1+"px"),t.css("max-height",w.everpresentrowheight+"px"),e.append(t);var c=te("<div style='border-width: 1px; border-style: solid; padding: 5px; z-index: 99; display: none; position: absolute;'><div>").appendTo(te(document.body)),o=te("<button style='position: relative; float: left; margin: 2px; border-radius: 0px; padding: 4px 8px;'>"+w.gridlocalization.addrowstring+"</button>"),a=te("<button style='position: relative; float: left; margin: 2px; border-radius: 0px; padding: 4px 8px;'>"+w.gridlocalization.udpaterowstring+"</button>"),n=te("<button style='position: relative; float: left; margin: 2px; border-radius: 0px; padding: 4px 8px;'>"+w.gridlocalization.deleterowstring+"</button>"),d=te("<button style='position: relative; float: left; margin: 2px; border-radius: 0px; padding: 4px 8px;'>"+w.gridlocalization.resetrowstring+"</button>");c.addClass(w.toThemeProperty("jqx-popup")),c.addClass(w.toThemeProperty("jqx-rc-all")),c.addClass(w.toThemeProperty("jqx-fill-state-normal")),c.addClass(w.toThemeProperty("jqx-shadow")),c.append(o),c.append(a),c.append(n),c.append(d);var h=w.everpresentrowactions.split(" ");-1==h.indexOf("add")&&-1==h.indexOf("addBottom")&&o.hide(),-1==h.indexOf("update")&&a.hide(),-1==h.indexOf("reset")&&d.hide(),-1==h.indexOf("delete")&&n.hide(),w.addnewrowpopup=c,w.addnewrowbutton=o,w.addnewrowupdatebutton=a,w.addnewrowdeletebutton=n,w.addnewrowresetbutton=d,o.jqxButton({template:"success",theme:w.theme}),n.jqxButton({template:"danger",theme:w.theme}),a.jqxButton({template:"primary",theme:w.theme}),d.jqxButton({template:"warning",theme:w.theme}),a.mousedown(function(e){for(var t={},i={},r=0;r<v;r++){(a=w.columns.records[r]).geteverpresentrowwidgetvalue&&(n=a.geteverpresentrowwidgetvalue(a.displayfield,a.addnewrowwidget),i[a.datafield]=n,a.datafield!=a.displayfield&&(i[a.datafield]=n.value,i[a.displayfield]=n.label))}for(var s,l,o=!1,r=0;r<v;r++){(a=w.columns.records[r]).geteverpresentrowwidgetvalue&&(n=a.geteverpresentrowwidgetvalue(a.displayfield,a.addnewrowwidget),a.createeverpresentrowwidget&&a.validateeverpresentrowwidgetvalue&&(s=a.validateeverpresentrowwidgetvalue(a.displayfield,n,i),l=w.gridlocalization.validationstring,null!=s.message&&(l=s.message),("boolean"==typeof s?s:s.result)?(a.addnewrowwidget.attr("title",""),a.addnewrowwidget.removeClass(w.toThemeProperty("jqx-input-invalid"))):(n="invalid editor state",a.addnewrowwidget.attr("title",l),a.addnewrowwidget.addClass(w.toThemeProperty("jqx-input-invalid")))),"invalid editor state"!==n||(e.preventDefault(),e.stopPropagation(),o=!0))}if(o)return c.hide(),void w.focus();for(var a,n,d,h,r=0;r<v;r++){(a=w.columns.records[r]).geteverpresentrowwidgetvalue&&(n=a.geteverpresentrowwidgetvalue(a.displayfield,a.addnewrowwidget),t[a.datafield]=n,a.datafield!=a.displayfield&&(t[a.datafield]=n.value,t[a.displayfield]=n.label),a.reseteverpresentrowwidgetvalue&&a.reseteverpresentrowwidgetvalue(a.displayfield,a.addnewrowwidget))}(0<w.selectedcells.length||0<w.selectedrowindexes.length)&&(d=0<=w.selectionmode.indexOf("cell")?w.getselectedcells()[0].rowindex:w.selectedrowindexes[0],(h=w.getrowdata(d))&&w.updaterow(h.uid,t)),c.hide(),w.focus()}),n.mousedown(function(e){var t,i;(0<w.selectedcells.length||0<w.selectedrowindexes.length)&&(t=0<=w.selectionmode.indexOf("cell")?w.getselectedcells()[0].rowindex:w.selectedrowindexes[0],(i=w.getrowdata(t))&&w.deleterow(i.uid));for(var r=0;r<v;r++){var s=w.columns.records[r];s.reseteverpresentrowwidgetvalue&&s.reseteverpresentrowwidgetvalue(s.displayfield,s.addnewrowwidget)}c.hide(),w.focus(),w.updateeverpresentrow()}),o.mousedown(function(e){for(var t={},i={},r=0;r<v;r++){(a=w.columns.records[r]).geteverpresentrowwidgetvalue&&(n=a.geteverpresentrowwidgetvalue(a.displayfield,a.addnewrowwidget),i[a.datafield]=n,a.datafield!=a.displayfield&&(i[a.datafield]=n.value,i[a.displayfield]=n.label),a.datafield!=a.displayfield&&(i[a.datafield]=n.label,i[a.displayfield]=n.value))}for(var s,l,o=!1,r=0;r<v;r++){(a=w.columns.records[r]).geteverpresentrowwidgetvalue&&(n=a.geteverpresentrowwidgetvalue(a.displayfield,a.addnewrowwidget),a.createeverpresentrowwidget&&a.validateeverpresentrowwidgetvalue&&(s=a.validateeverpresentrowwidgetvalue(a.displayfield,n,i),l=w.gridlocalization.validationstring,null!=s.message&&(l=s.message),("boolean"==typeof s?s:s.result)?(a.addnewrowwidget.attr("title",""),a.addnewrowwidget.removeClass(w.toThemeProperty("jqx-input-invalid"))):(n="invalid editor state",a.addnewrowwidget.attr("title",l),a.addnewrowwidget.addClass(w.toThemeProperty("jqx-input-invalid")))),"invalid editor state"!==n||(e.preventDefault(),e.stopPropagation(),o=!0))}if(o)return c.hide(),void w.focus();for(var a,n,r=0;r<v;r++){(a=w.columns.records[r]).geteverpresentrowwidgetvalue&&(n=a.geteverpresentrowwidgetvalue(a.displayfield,a.addnewrowwidget),t[a.datafield]=n,a.datafield!=a.displayfield&&(i[a.datafield]=n.label,i[a.displayfield]=n.value),a.reseteverpresentrowwidgetvalue&&a.reseteverpresentrowwidgetvalue(a.displayfield,a.addnewrowwidget))}var d=0<=w.everpresentrowactions.indexOf("addBottom")?"last":"first";w.addrow(null,t,d),c.hide(),w.focus()}),d.mousedown(function(e){for(var t=0;t<v;t++){var i=w.columns.records[t];i.reseteverpresentrowwidgetvalue&&i.reseteverpresentrowwidgetvalue(i.displayfield,i.addnewrowwidget),i.addnewrowwidget&&(i.addnewrowwidget.attr("title",""),i.addnewrowwidget.removeClass(w.toThemeProperty("jqx-input-invalid")))}c.hide(),w.focus()});for(var u=0;u<v;u++){var g=w.columns.records[u],p=g.width;p<g.minwidth&&(p=g.minwidth),p>g.maxwidth&&(p=g.maxwidth);var m=te('<div style="overflow: hidden; position: absolute; height: 100%;" class="'+r+'"></div>');if(t.append(m),m.css("left",i),w.rtl?(m.css("z-index",s++),m.css("border-left-width","1px")):m.css("z-index",s--),"auto"==p&&(p=0),m[0].style.width=parseFloat(p)+"px",m[0].left=i,g.hidden&&g.hideable||g.adaptivehidden?m.css("display","none"):i+=p,l[l.length]=m[0],g.checkboxcolumn){var f=w.toThemeProperty("jqx-grid-cell");f+=" "+w.toThemeProperty("jqx-grid-cell-filter-row"),f+=" "+w.toThemeProperty("jqx-grid-cell-pinned"),m.removeClass().addClass(f)}else{var b,x=!0;if(w.rtl?(w.groupable&&(b=w.showrowdetailscolumn&&w.rowdetails?1:0,w.groups.length+b+u>v-1&&(x=!1)),w.showrowdetailscolumn&&w.rowdetails&&u==v-1&&(x=!1)):(w.groupable&&(b=w.showrowdetailscolumn&&w.rowdetails?1:0,w.groups.length+b>u&&(x=!1)),w.showrowdetailscolumn&&w.rowdetails&&0==u&&(x=!1)),w.updateeverpresentrow=function(){var e,t=null;if((0<w.selectedcells.length||0<w.selectedrowindexes.length)&&(e=0<=w.selectionmode.indexOf("cell")?w.getselectedcells()[0].rowindex:w.selectedrowindexes[0],t=w.getrowdata(e)),t)for(var i=0;i<w.columns.records.length;i++){var r,s=w.columns.records[i];s.seteverpresentrowwidgetvalue&&(r=w.getcelltext(e,s.displayfield),s.seteverpresentrowwidgetvalue(s.addnewrowwidget,r))}},x)if(g.createeverpresentrowwidget){g.addnewrowwidget=g.createeverpresentrowwidget(g.datafield,m,c,function(){o.trigger("mousedown")}),g.initeverpresentrowwidget&&g.initeverpresentrowwidget(g.datafield,m,c)}else{w._measureElement("column");var y=w.everpresentrowheight/2-w._columnheight/2;if(y<0&&(y=6),y+="px","addButtonColumn"===g.datafield){var _=te('<div style="padding-bottom: 2px; text-align: center; margin-top: '+y+';"><a href="#">'+w.gridlocalization.addrowstring+"</a></div>");m.append(_),_.mousedown(function(){o.trigger("mousedown")});continue}if("resetButtonColumn"===g.datafield){_=te('<div style="padding-bottom: 2px; text-align: center; margin-top: '+y+';"><a href="#">'+w.gridlocalization.resetrowstring+"</a></div>");m.append(_),_.mousedown(function(){d.trigger("mousedown")});continue}!function(i,e,r){var p,m=te('<input style="box-sizing: border-box; padding-right: 4px; padding-left: 4px; border:none;" autocomplete="off" type="textarea"/>');m[0].id=te.jqx.utilities.createId(),m.addClass(i.toThemeProperty("jqx-widget")),m.addClass(i.toThemeProperty("jqx-input")),m.addClass(i.toThemeProperty("jqx-widget-content")),m.addClass(i.toThemeProperty("jqx-enableselect")),m.addClass(i.toThemeProperty("jqx-grid-cell-add-new-row")),m.css("text-align",r.cellsalign),i.rtl&&m.css("direction","rtl"),i.disabled&&m.attr("disabled",!0),m.attr("disabled",!1),m.attr("placeholder",i.gridlocalization.everpresentrowplaceholder+r.text),m.appendTo(e),m.css("width","100%"),m.css("height",i.everpresentrowheight+"px"),m.css("line-height",i.everpresentrowheight+"px"),m.css("max-height",i.everpresentrowheight+"px"),m.css("margin","0px"),m.focus(function(){(0<w.selectedcells.length||0<w.selectedrowindexes.length)&&(0<=w.selectionmode.indexOf("cell")?w.getselectedcells()[0].rowindex:w.selectedrowindexes[0]),m.addClass(i.toThemeProperty("jqx-fill-state-focus"));var e=i.columns.records.indexOf(r);"columns"!==i.everpresentrowactionsmode&&c.css({display:"block",top:m.coord().top+i.everpresentrowheight-1,left:0<e?m.coord().left:m.coord().left-1});var t=c.children().width();return"right"===r.cellsalign?(t=o.width()+d.width(),c.children().css("left",t-t+"px")):c.children().css("left","0px"),i.content[0].scrollLeft=0,i.content[0].scrollTop=0,setTimeout(function(){i.content[0].scrollLeft=0,i.content[0].scrollTop=0},50),!1}),r.addnewrowwidget=m,r.reseteverpresentrowwidgetvalue||(r.reseteverpresentrowwidgetvalue=function(e,t){t.val(""),t.focus(),t.blur(),t.removeClass(w.toThemeProperty("jqx-input-invalid")),t.attr("title","")}),r.seteverpresentrowwidgetvalue||(r.seteverpresentrowwidgetvalue=function(e,t){e.val(t)}),r.geteverpresentrowwidgetvalue||((p=r).geteverpresentrowwidgetvalue=function(e,t,i){var r=t.val();if(!1!==i&&p.validateeverpresentrowwidgetvalue){for(var s={},l=0;l<v;l++){var o,a=w.columns.records[l];a.geteverpresentrowwidgetvalue&&(o=a.geteverpresentrowwidgetvalue(a.displayfield,a.addnewrowwidget,!1),s[a.datafield]=o,a.datafield!=a.displayfield&&(s[a.datafield]=o.value,s[a.displayfield]=o.label))}var n=p.validateeverpresentrowwidgetvalue(p.displayfield,r,s),d=w.gridlocalization.validationstring;if(null!=n.message&&(d=n.message),!("boolean"==typeof n?n:n.result))return m.addClass(w.toThemeProperty("jqx-input-invalid")),m.attr("title",d),"invalid editor state";m.removeClass(w.toThemeProperty("jqx-input-invalid")),m.attr("title","")}var h,c="string",u=w.source.datafields||(w.source._source?w.source._source.datafields:null);if(u&&(h="",te.each(u,function(){if(this.name==p.displayfield)return this.type&&(h=this.type),!1}),h&&(c=h)),"number"===c){var g=parseFloat(r);if(isNaN(g))return null}return"date"===c?te.jqx.dataFormat.tryparsedate(r,w.gridlocalization):"bool"===c||"boolean"===c?"true"===r||("1"==r||"false"!==r&&("0"!=r&&((!0===r||!1===r)&&r))):r}),m.keydown(function(e){13===e.keyCode&&(0<=w.everpresentrowactions.indexOf("add")?o.trigger("mousedown"):0<=w.everpresentrowactions.indexOf("update")?a.trigger("mousedown"):0<=w.everpresentrowactions.indexOf("delete")&&n.trigger("mousedown"))}),m.blur(function(){m.removeClass(i.toThemeProperty("jqx-fill-state-focus")),c.css("display","none")}),r.initeverpresentrowwidget&&r.initeverpresentrowwidget(r.datafield,e,c)}(this,m,g)}}}te.jqx.browser.msie&&te.jqx.browser.version<8&&t.css("z-index",s--),t.width(parseFloat(i)+2),e.addClass(r),e.css("border-bottom-width","0px"),w.showfilterrow?e.css("border-top-width","0px"):e.css("border-top-width","1px"),e.css("box-sizing","border-box"),e.css("border-right-width","0px")},_gettableheight:function(){if(null!=this.tableheight)return this.tableheight;var e,t=this.host.height();return this.columnsheader&&(e=this.columnsheader.outerHeight(),this.showheader||(e=0)),t-=e,"visible"==this.hScrollBar[0].style.visibility&&(t-=this.hScrollBar.outerHeight()),this.pageable&&(t-=this.pager.outerHeight()),this._groupsheader()&&(t-=this.groupsheader.outerHeight()),this.showtoolbar&&(t-=this.toolbarheight),this.showfilterbar&&(t-=this.toolbarheight),this.showstatusbar&&(t-=this.statusbarheight),this.showeverpresentrow&&"bottom"===this.everpresentrowposition&&(t-=this.everpresentrowheight),0<t?this.tableheight=t:this.host.height()},_getpagesize:function(){if(this.pageable)return this.pagesize;if(this.virtualmode){var e=Math.round(this.host.height())+2*this.rowsheight;return Math.round(e/this.rowsheight)}return this.autoheight||this.autorowheight?0==this.dataview.totalrows?1:this.dataview.totalrows:this.dataview.totalrows<100&&this.dataview.totalrecords<100&&0<this.dataview.totalrows?this.dataview.totalrows:100},_calculatevirtualheight:function(){this.that;var e=Math.round(this.host.height())+2*this.rowsheight,t=this._gettableheight(),i=Math.round(e/this.rowsheight);this.heights=new Array,this.hiddens=new Array,this.details=new Array,this.expandedgroups=new Array,this.hiddenboundrows=new Array,this.heightboundrows=new Array,this.detailboundrows=new Array;var r=Math.max(this.dataview.totalrows,this.dataview.totalrecords);this.pageable&&(r=this.pagesize,this.pagesize>Math.max(this.dataview.totalrows,this.dataview.totalrecords)&&this.autoheight?r=Math.max(this.dataview.totalrows,this.dataview.totalrecords):this.autoheight||this.dataview.totalrows<this.pagesize&&(r=Math.max(this.dataview.totalrows,this.dataview.totalrecords)));var s=r*this.rowsheight,l=0,o=0,a=0,n=this._getpagesize(),d=n*this.rowsheight,h=0;if(!this.pageable&&this.autoheight&&(i=r),0<r+n)for(;h<=r+n;){if(l+=d,h-n<r&&r<=h){var c=h-r;0<c&&(a-=d,this._pageviews[o-1]={top:a,height:d-c*this.rowsheight});break}this._pageviews[o++]={top:a,height:d},a=l,h+=n}if(1!=this.resizingGrid&&this.vScrollBar.jqxScrollBar({value:0}),"hidden"==this.hScrollBar.css("visibility")){var u=0;if(this.columns&&this.columns.records){for(h=0;h<this.columns.records.length;h++)u+=isNaN(this.columns.records[h].width)?this.columns.records[h].minwidth:this.columns.records[h].width;!isNaN(u)&&parseInt(u)>this.host.width()&&(t-=30)}}return t<s&&!this.autoheight?(this.vScrollBar.css("visibility","visible"),"deferred"==this.scrollmode?this.vScrollBar.jqxScrollBar({max:s}):this.vScrollBar.jqxScrollBar({max:s-t})):this.vScrollBar.css("visibility","hidden"),this.dataview.pagesize=n,this.dataview.updateview(),{visiblerecords:i,virtualheight:s}},_updatepageviews:function(){if(!this.updating()){this._pagescache=new Array,this._pageviews=new Array,this.tableheight=null;var e=this.that,t=Math.round(this.host.height())+2*this.rowsheight,i=Math.round(t/this.rowsheight),r=Math.max(this.dataview.totalrows,this.dataview.totalrecords),s=r*this.rowsheight,l=0,o=0,a=0,n=0,d=0,h=this._getpagesize();if(this.pageable)this._updatepagedview&&(s=this._updatepagedview(r,s,0)),this.autoheight&&this._arrange();else for(var c=0;c<r;c++){var u,g,p={index:c,height:this.heights[c],hidden:this.hiddens[c],details:this.details[c]};null==this.heights[c]&&(this.heights[c]=this.rowsheight,p.height=this.rowsheight),null==this.hiddens[c]&&(this.hiddens[c]=!1,p.hidden=!1),null==this.details[c]&&(this.details[c]=null),p.height!=e.rowsheight&&(s-=e.rowsheight,s+=p.height),p.hidden?s-=p.height:(o+=p.height,u=0,this.rowdetails&&(this.rowdetailstemplate&&(p.details||(void 0===(g="function"==typeof this.rowdetailstemplate?this.rowdetailstemplate():this.rowdetailstemplate).rowdetailshidden&&(g.rowdetailshidden=!0),void 0===g.rowdetailsheight&&(g.rowdetailsheight=200),void 0===g.rowdetails&&(g.rowdetails="<div></div>"),p.details=g)),p.details&&p.details.rowdetails&&!p.details.rowdetailshidden&&(o+=u=p.details.rowdetailsheight,s+=u)),l+=p.height+u),(h<=++d||c==r-1)&&(this._pageviews[a++]={top:n,height:o},n=l,d=o=0)}var m,w,v=this._gettableheight();v<s?(this.pageable&&this.gotopage&&(s=this._pageviews[0].height)<0&&(s=this._pageviews[0].height),"visible"!=this.vScrollBar.css("visibility")&&this.vScrollBar.css("visibility","visible"),(s<=v||this.autoheight)&&this.vScrollBar.css("visibility","hidden"),0<s-v&&"deferred"!=this.scrollmode?(m=s-v,w=this.vScrollInstance.max,this.vScrollBar.jqxScrollBar({max:m}),m!=w&&this.vScrollBar.jqxScrollBar({value:0})):this.vScrollBar.jqxScrollBar({value:0,max:s})):(this._loading||this.vScrollBar.css("visibility","hidden"),this.vScrollBar.jqxScrollBar({value:0})),this._arrange(),this.autoheight&&(i=Math.round(this.host.height()/this.rowsheight)),this.virtualsizeinfo={visiblerecords:i,virtualheight:s}}},updatebounddata:function(e){if("data"!=e&&"sort"!=e&&"filter"!=e&&"cells"!=e&&"pagechanged"!=e&&"pagesizechanged"!=e&&!this.virtualmode){if(this.virtualsizeinfo=null,this.columns&&this.columns.records)for(var t=0;t<this.columns.records.length;t++){var i=this.columns.records[t];i.destroywidget&&i.widget&&i.destroywidget&&i.destroywidget(i.widget)}this.showfilterrow&&this.filterable&&this.filterrow?(this.clearfilters&&this.clearfilters(!1),this.filterable&&this._destroyedfilters&&this.showfilterrow&&this._destroyedfilters(),this.filterrow.remove(),this._filterrowcache=new Array,this.filterrow=null):this.filterable&&this.clearfilters&&this.clearfilters(!1),this.showeverpresentrow&&this._removeaddnewrow(),this.detailsVisibility=new Array,this.groupsVisibility=new Array,this.groupable&&(this.dataview.groups=[],this.groups=[]),this.pageable&&(this.pagenum=0,this.dataview.pagenum=0),this.sortable&&(this.sortcolumn=null,this.sortdirection="",this.dataview.sortfielddirection="",this.dataview.clearsortdata())}this.databind(this.source,e)},refreshdata:function(){this._refreshdataview(),this.render()},_updatevscrollbarmax:function(){var e,t,i;this._pageviews&&0<this._pageviews.length&&(e=this._pageviews[0].height,!this.virtualmode&&this.pageable||(e=this.virtualsizeinfo.virtualheight),(t=this._gettableheight())<e?(this.pageable&&this.gotopage&&(e=this._pageviews[0].height)<0&&(e=this._pageviews[0].height),"visible"!=this.vScrollBar.css("visibility")&&this.vScrollBar.css("visibility","visible"),(e<=t||this.autoheight)&&this.vScrollBar.css("visibility","hidden"),0<e-t?(i=e-t,this.vScrollBar.jqxScrollBar({max:i})):this.vScrollBar.jqxScrollBar({value:0,max:e})):(this.vScrollBar.css("visibility","hidden"),this.vScrollBar.jqxScrollBar({value:0})))},_refreshdataview:function(){this.dataview.refresh()},refresh:function(e){if(1!=e){if(te.jqx.isHidden(this.host))return;null!=this.virtualsizeinfo&&(this._cellscache=new Array,this._renderrows(this.virtualsizeinfo),this._updatesize())}},render:function(){this._render(!0,!0,!0,!0)},invalidate:function(){this.virtualsizeinfo&&(this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo))},clear:function(){this.databind(null),this.render()},_preparecolumngroups:function(){var e=this.columnsheight;if(this.columngroups){if(this.columnshierarchy=new Array,this.columngroups.length){for(var r=this,t=0;t<this.columngroups.length;t++)this.columngroups[t].parent=null,this.columngroups[t].groups=null;for(t=0;t<this.columns.records.length;t++)this.columns.records[t].parent=null,this.columns.records[t].groups=null;function i(e){for(var t=0;t<r.columngroups.length;t++){var i=r.columngroups[t];if(i.name===e)return i}return null}for(t=0;t<this.columngroups.length;t++){(d=this.columngroups[t]).groups||(d.groups=null),d.parentgroup&&(s=i(d.parentgroup))&&((d.parent=s).groups||(s.groups=new Array),-1===s.groups.indexOf(d)&&s.groups.push(d))}for(var s,t=0;t<this.columns.records.length;t++){(d=this.columns.records[t]).columngroup&&(s=i(d.columngroup))&&(s.groups||(s.groups=new Array),-1===(d.parent=s).groups.indexOf(d)&&s.groups.push(d))}for(var l=0,t=0;t<this.columns.records.length;t++){var o=d=this.columns.records[t];for(d.level=0;o.parent;)o=o.parent,d.level++;for(var o=d,a=d.level,l=Math.max(l,d.level);o.parent;)(o=o.parent)&&(o.level=--a)}for(var n=function(e){var t=new Array;if(e.columngroup&&t.push(e),e.groups)for(var i=0;i<e.groups.length;i++)if(e.groups[i].columngroup)t.push(e.groups[i]);else if(e.groups[i].groups)for(var r=n(e.groups[i]),s=0;s<r.length;s++)t.push(r[s]);return t},t=0;t<this.columngroups.length;t++){var d=this.columngroups[t],h=n(d);d.columns=h;for(var c=new Array,u=0,g=0;g<h.length;g++)c.push(this.columns.records.indexOf(h[g])),h[g].pinned&&u++;if(0!=u)throw new Error("jqxGrid: Column Groups initialization Error. Please, check the initialization of the jqxGrid's columns array. The columns in a column group cannot be pinned.");c.sort(function(e,t){return(e=parseInt(e))<(t=parseInt(t))?-1:t<e?1:0});for(var p=1;p<c.length;p++)if(c[p]!=c[p-1]+1)throw new Error("jqxGrid: Column Groups initialization Error. Please, check the initialization of the jqxGrid's columns array. The columns in a column group are expected to be siblings in the columns array.")}}this.columngroupslevel=1+l,e=this.columngroupslevel*this.columnsheight}return e},_render:function(e,t,i,r,s){if(null!=this.dataview&&!this._loading&&!this._batchupdate){if(te.jqx.isHidden(this.host)){var l=this;return l.___hiddenTimer&&(clearInterval(l.___hiddenTimer),l.___hiddenTimer=null),void(this.___hiddenTimer=setInterval(function(){te.jqx.isHidden(l.host)||(clearInterval(l.___hiddenTimer),l.render())},300))}var o;null!=this.editcell&&this.endcelledit&&this.endcelledit(this.editcell.row,this.editcell.column,!0,!1),this.validationpopup=null,this._removeHandlers(),this._addHandlers(),this._initializeRows(),this._requiresupdate=null==t||t,this._newmax=null,i&&(this._requiresupdate||0!=r&&this._initmenu(),null==this.columns?this.columns=new te.jqx.collection(this.element):((o=this).columns&&"observableArray"===this.columns.name&&(this.columns.notifier=function(e){function t(){o.columns=o._columns,o.render()}switch(e.type){case"add":t();break;case"update":if("index"===e.name){for(var i in o.beginupdate(),e.newValue)o.setcolumnproperty(e.newValue.datafield,i,e.newValue[i]);o.endupdate()}else{var r=e.path.split(".");o.setcolumnproperty(o.columns[r[0]].datafield,e.name,e.newValue)}break;case"delete":t()}}),this.columngroups&&"observableArray"===this.columngroups.name&&(this.columngroups.notifier=function(e){o.render()}),this._initializeColumns())),this.tableheight=null,this._pagescache=new Array,this._pageviews=new Array,this.visiblerows=new Array,this.hittestinfo=new Array,this._requiresupdate&&(this._clearcaches(),1==r&&this._initmenu()),this.virtualsizeinfo=null,this.prerenderrequired=!0,(this.groupable&&0<this.groups.length&&this.rowdetails||this.rowdetails)&&this.gridcontent&&(this._rowdetailscache=new Array,this._rowdetailselementscache=new Array,this.detailboundrows=new Array,this.details=new Array,te.jqx.utilities.html(this.gridcontent,""),this.gridcontent=null),this.gridcontent&&this.editable&&this._destroyeditors&&this._destroyeditors(),i?(this.filterrow&&this.filterrow.detach(),te.jqx.utilities.html(this.content,""),this.columnsheader=this.columnsheader||te('<div style="overflow: hidden;"></div>'),this.columnsheader.remove(),this.columnsheader.addClass(this.toTP("jqx-widget-header")),this.columnsheader.addClass(this.toTP("jqx-grid-header"))):this.gridcontent&&te.jqx.utilities.html(this.gridcontent,""),this.showheader?this.columnsheader&&this.columnsheader.css("display","block"):this.columnsheader.css("display","none"),this.gridcontent=this.gridcontent||te('<div style="width: 100%; overflow: hidden; position: absolute;"></div>'),this.gridcontent.remove();var a,n=this.columnsheight,n=this._preparecolumngroups();this.showfilterrow&&this.filterable?(this.columnsheader.height(n+this.filterrowheight),this.showeverpresentrow&&"bottom"!==this.everpresentrowposition&&this.columnsheader.height(n+this.filterrowheight+this.everpresentrowheight)):this.showeverpresentrow&&"bottom"!==this.everpresentrowposition?this.columnsheader.height(n+this.everpresentrowheight):this.columnsheader.height(n),this.content.append(this.columnsheader),this.content.append(this.gridcontent),this._arrange(),this._initgroupsheader&&this._initgroupsheader(),this.selectionarea=this.selectionarea||te("<div style='z-index: 99; visibility: hidden; position: absolute;'></div>"),this.selectionarea.addClass(this.toThemeProperty("jqx-grid-selectionarea")),this.selectionarea.addClass(this.toThemeProperty("jqx-fill-state-pressed")),this.content.append(this.selectionarea),this.tableheight=null,this.rendergridcontent(!1,i),0<this.groups.length&&this.groupable&&(a=this.vScrollBar[0].style.visibility,this.suspendgroupevents=!0,this.collapseallgroups&&(this.groupsexpandedbydefault?this.expandallgroups(!1):(this.collapseallgroups(!1),this._updatescrollbarsafterrowsprerender())),this.vScrollBar[0].style.visibility!=a&&(this._updatecolumnwidths(),this._updatecellwidths()),this.suspendgroupevents=!1),this.pageable&&this.updatepagerdetails&&(this.updatepagerdetails(),this.autoheight&&this._updatepageviews(),this.autorowheight&&(this.autoheight||this._updatepageviews(),this._renderrows(this.virtualsizeinfo))),this.showaggregates&&this._updateaggregates&&this._updateaggregates(),this._addoverlayelement(),"deferred"==this.scrollmode&&this._addscrollelement(),this.showfilterrow&&this.filterable&&this.filterrow&&(null==s||1==s)&&this._updatelistfilters(!i),(this.filterable&&"simple"===this.filtermode||"default"===this.filtermode&&this.showfilterbar)&&this._renderfilter(),this.rendered&&this.rendered("full"),this.__isRendered=!0}},_addoverlayelement:function(){var e,t,i=te.jqx.utilities.getBrowser();("msie"==i.browser&&parseInt(i.version)<9||this.isTouchDevice())&&(this._overlayElement&&this._overlayElement.remove(),this._overlayElement=te("<div class='jqxgrid-overlay' style='visibility: hidden; position: absolute; width: 100%; height: 100%;'></div>"),this._overlayElement.css("background","white"),this._overlayElement.css("z-index",180),this._overlayElement.css("opacity",.001),this.isTouchDevice()?"hidden"!==this.vScrollBar.css("visibility")||"hidden"!==this.hScrollBar.css("visibility")?(e=0,"checkbox"==this.selectionmode&&(e+=30),(this.groupable||this.rowdetails)&&this._overlayElement.css("left",30*(this.groups.length+(this.rowdetails?1:0))),t=this._overlayElement.css("left"),this._overlayElement.css("left",t+e)):this._overlayElement&&this._overlayElement.remove():this.content.prepend(this._overlayElement)),this._updateTouchScrolling()},_addscrollelement:function(){this._scrollelement&&this._scrollelement.remove(),this._scrollelementoverlay&&this._scrollelementoverlay.remove(),this._scrollelementoverlay=te("<div style='visibility: hidden; position: absolute; width: 100%; height: 100%;'></div>"),this._scrollelementoverlay.css("background","black"),this._scrollelementoverlay.css("z-index",1800),this._scrollelementoverlay.css("opacity",.1),this._scrollelement=te("<span style='visibility: hidden; top: 50%; right: 10px; position: absolute;'></span>"),this._scrollelement.css("z-index",1900),this._scrollelement.addClass(this.toThemeProperty("jqx-button")),this._scrollelement.addClass(this.toThemeProperty("jqx-fill-state-normal")),this._scrollelement.addClass(this.toThemeProperty("jqx-rc-all")),this._scrollelement.addClass(this.toThemeProperty("jqx-shadow")),this.content.prepend(this._scrollelement),this.content.prepend(this._scrollelementoverlay)},_postrender:function(e){if(("filter"==e||"sort"==e||"group"==e)&&this.rowdetails&&this.detailsVisibility&&0<this.detailsVisibility.length){this._detailsUpdate=!0;for(var t=0;t<this.details.length;t++)this.details[t]&&(this.details[t].rowdetailshidden=!0);if(!this._loading)for(t=0;t<this.detailsVisibility.length;t++)!1===this.detailsVisibility[t]?this.showrowdetails(t):!0===this.detailsVisibility[t]&&this.hiderowdetails(t);this._detailsUpdate=!1,this.rendergridcontent(!0),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo)}if(this.groupable&&0<this.groups.length)if("filter"==e||"sort"==e)for(t=0;t<this.dataview.loadedgroups.length;t++){var i,r=this.dataview.loadedgroups[t],s=0;for(var l in this.groupsVisibility)l==r.group&&this.groupsVisibility[l]&&(this._setgroupstate(r,!0,!1),s++);0<s&&(i=this.vScrollBar[0].style.visibility,this.rendergridcontent(!0,!1),i==this.vScrollBar[0].style.visibility&&!this._hiddencolumns||(this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo)))}else"group"==e&&(this.groupsVisibility=new Array)},rendergridcontent:function(e,t){if(this.updating())return!1;null!=e&&null!=e||(e=!1),this._requiresupdate=e;var i=this.prerenderrequired;this.prerenderrequired&&this._arrange();var r,s,l,o=this.that;return null!=(t=t)&&null!=t||(t=!0),this.tableheight=null,o.virtualsizeinfo=o.virtualsizeinfo||o._calculatevirtualheight(),o.pageable&&!o.autoheight&&o.dataview.totalrows<o.pagesize&&(o._requiresupdate=!0),t?o._rendercolumnheaders():(this._rendersortcolumn&&this._rendersortcolumn(),this._renderfiltercolumn&&this._renderfiltercolumn()),o._renderrows(o.virtualsizeinfo),this.gridcontent&&(0!=this.gridcontent[0].scrollTop&&(this.gridcontent[0].scrollTop=0),0!=this.gridcontent[0].scrollLeft&&(this.gridcontent[0].scrollLeft=0)),i&&(r=this.tableheight,this._arrange(),r!=this.tableheight&&this.autoheight&&o._renderrows(o.virtualsizeinfo)),this.rtl&&this._renderhorizontalscroll(),this.autosavestate&&null!=this.initializedcall&&this.savestate&&this.savestate(),this.adaptive&&this.element.offsetWidth<=this.adaptivewidth&&(s=0,l=o.element.offsetWidth-2,te.each(this.columns.records,function(e,t){if(s+=this.width,"adaptive"===this.columntype)return!0;l<=s&&(this.adaptivehidden=!0)}),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo)),!0},_updatecolumnwidths:function(){var a=this.host.width(),n=a,d="";if(null!=this.columns&&null!=this.columns.records){var i,e,t,h=this.that,s=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth,r=this.adaptive&&this.element.offsetWidth<=this.adaptivewidth,c=0;r&&(i=1,te.each(this.columns.records,function(e,t){this.adaptivehidden&&i++}),e=0<this.vScrollBar[0].offsetWidth?this.vScrollBar[0].offsetWidth+4:0,"hidden"==this.vScrollBar.css("visibility")&&(e=0),t=this.columns.records.length-i,c=(this.element.offsetWidth-32-e)/t),te.each(this.columns.records,function(e,t){var i,r;this.hidden&&this.hideable||this.adaptivehidden||(-1!=this.width.toString().indexOf("%")||null!=this._percentagewidth?(t=0,i="hidden"==h.vScrollBar[0].style.visibility?0:h.scrollbarsize+5,!h.scrollbarautoshow&&0!=h.scrollbarsize||(i=0),r=n,t=parseFloat(this.width)*r/100,i+=s,null!=this._percentagewidth&&(t=parseFloat(this._percentagewidth)*(r-i)/100),t<this.minwidth&&"auto"!=this.minwidth&&(t=this.minwidth),t>this.maxwidth&&"auto"!=this.maxwidth&&(t=this.maxwidth),a-=t):"auto"==this.width||this._width?d+=this.text:a-=this.width)});var l=this._gettableheight();if(!this.autoheight&&this.virtualsizeinfo&&this.virtualsizeinfo.virtualheight>l)if(this.groupable&&0<this.groups.length)if(this.dataview&&this.dataview.loadedrootgroups&&!this.groupsexpandedbydefault){var o=this.dataview.loadedrootgroups.length*this.rowsheight;if(this.pageable)for(var u=0;u<this.dataview.rows.length;u++)this.dataview.rows[u].group&&0===this.dataview.rows[u].level&&(o+=this.rowsheight);(l<o||"visible"==this.vScrollBar.css("visibility"))&&(a-=this.scrollbarsize+5,n-=this.scrollbarsize+5)}else a-=this.scrollbarsize+5,n-=this.scrollbarsize+5;else"hidden"!=this.vScrollBar.css("visibility")&&0<this.scrollbarsize&&(a-=this.scrollbarsize+5,n-=this.scrollbarsize+5);var g,p,m,s=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth;n-=s,!this.columnsheader||0!=(g=this.columnsheader.find("#columntable"+this.element.id)).length&&(m=p=0,te.each(this.columns.records,function(e,t){var i=te(this.element);this.hidden||this.adaptivehidden||"none"!==this.element.style.display||(this.element.style.display="block"),this.adaptivehidden&&(this.element.style.display="none");var r,s,l=!1,o=this.width;-1==this.width.toString().indexOf("%")&&null==this._percentagewidth||(o=null!=this._percentagewidth?parseFloat(this._percentagewidth)*n/100:parseFloat(this.width)*n/100,l=!0),0<c&&"adaptive"!==this.columntype?(i.width(c),this.adaptivewidth=c):"auto"==this.width||this._width||l?l?(o<this.minwidth&&"auto"!=this.minwidth&&(o=this.minwidth,this.width=o),o>this.maxwidth&&"auto"!=this.maxwidth&&(o=this.maxwidth,this.width=o),parseInt(i[0].style.width)!=o&&(i.width(o),this.width=o)):(r=Math.floor(a*(this.text.length/d.length)),a-(m+=r)<3&&a!=m&&.01<a-m?a-m==1?r++:r+=2:e==h.columns.records.length-1&&m<a&&(r+=a-m),isNaN(r)&&(r=this.minwidth),isNaN(r)&&(r=this.minwidth),r==1/0&&(r=0),r<0&&(s=te("<span>"+this.text+"</span>"),te(document.body).append(s),r=10+s.width(),s.remove()),r<this.minwidth&&(r=this.minwidth),r>this.maxwidth&&(r=this.maxwidth),this._width="auto",this.width=r,i.width(this.width)):parseInt(i[0].style.width)!=this.width&&i.width(this.width),parseInt(i[0].style.left)!=p&&i.css("left",p),this.hidden&&this.hideable||this.adaptivehidden||(0<c&&"adaptive"!==this.columntype?p+=c:p+=this.width),this._requirewidthupdate=!0}),this.columnsheader.width(2+p),g.width(this.columnsheader.width()),this.columnsheader[0].style.visibility=0==p?"hidden":"inherit",this._resizecolumngroups(),this.showfilterrow&&this.filterrow&&(this.filterrow.width(this.columnsheader.width()),this._updatefilterrowui()),this.showeverpresentrow&&("bottom"!==this.everpresentrowposition?this.addnewrowtop.width(this.columnsheader.width()):this.addnewrowbottom.width(this.columnsheader.width()),this._updateaddnewrowui()),this.autowidth&&this._arrange())}},_rendercolumnheaders:function(){var C=this.that;if(!this.prerenderrequired)return this._rendersortcolumn&&this._rendersortcolumn(),this._renderfiltercolumn&&this._renderfiltercolumn(),this.showfilterrow&&this.filterrow&&(this.filterrow.width(this.columnsheader.width()),this._updatefilterrowui()),void(this.showeverpresentrow&&("bottom"!==this.everpresentrowposition?this.addnewrowtop.width(this.columnsheader.width()):this.addnewrowbottom.width(this.columnsheader.width()),this._updateaddnewrowui()));this._columnsbydatafield=new Array,this.columnsheader.find("#columntable"+this.element.id).remove();var I=te('<div id="columntable'+this.element.id+'" style="height: 100%; position: relative;"></div>');I[0].cells=new Array;var T=0,B=0,P="",H=this.host.width(),M=H,r=new Array,s=new Array,l=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth;if(te.each(this.columns.records,function(e,t){var i;this.hidden&&this.hideable||this.adaptivehidden||("auto"==this.width||this._width?P+=this.text:this.width<this.minwidth&&"auto"!=this.minwidth?H-=this.minwidth:this.width>this.maxwidth&&"auto"!=this.maxwidth?H-=this.maxwidth:-1!=this.width.toString().indexOf("%")?(t=0,i="hidden"==C.vScrollBar[0].style.visibility?0:C.scrollbarsize+5,i+=l,(t=parseFloat(this.width)*(M-i)/100)<this.minwidth&&"auto"!=this.minwidth&&(t=this.minwidth),t>this.maxwidth&&"auto"!=this.maxwidth&&(t=this.maxwidth),H-=t):("string"==typeof this.width&&(this.width=parseInt(this.width)),H-=this.width)),this.pinned||this.grouped||this.checkboxcolumn?(C._haspinned&&(this.pinned=!0),r[r.length]=this):s[s.length]=this}),this.rtl){var e=0;r.reverse();for(t=this.columns.records.length-1;t>=this.columns.records.length-r.length;t--)this.columns.replace(t,r[e++]);for(i=0;i<s.length;i++)this.columns.replace(i,s[i])}else{for(var t=0;t<r.length;t++)this.columns.replace(t,r[t]);for(var i=0;i<s.length;i++)this.columns.replace(r.length+i,s[i])}var A=this.headerZIndex,D=C.groupable?C.groups.length:0;this.rowdetails&&this.showrowdetailscolumn&&D++;var E=C.columnsheader.height();this.showfilterrow&&(this.columngroups?E-=this.filterrowheight:E=this.columnsheight),this.showeverpresentrow&&"bottom"!==this.everpresentrowposition&&(this.columngroups?E-=this.everpresentrowheight:E=this.columnsheight);var o=this._gettableheight();if(this.virtualsizeinfo&&this.virtualsizeinfo.virtualheight>o&&!this.scrollbarautoshow)if(this.groupable&&0<this.groups.length)if(this.dataview&&this.dataview.loadedrootgroups&&!this.groupsexpandedbydefault){var a=0;if(this.pageable){if(this.pageable)for(var n=0;n<this.dataview.rows.length;n++)this.dataview.rows[n].group&&0===this.dataview.rows[n].level&&(a+=this.rowsheight)}else a=this.dataview.loadedrootgroups.length*this.rowsheight;o<a&&(H-=this.scrollbarsize+5,M-=this.scrollbarsize+5)}else H-=this.scrollbarsize+5,M-=this.scrollbarsize+5;else!this.autoheight&&0<this.scrollbarsize&&(H-=this.scrollbarsize+5,M-=this.scrollbarsize+5);M-=l;var d,h,c,O=document.createDocumentFragment(),L=0;te.each(this.columns.records,function(e,t){var i,r;this.height=C.columnsheight,C.columngroups&&C.columngroups.length&&(this.height=(this.datafield,i=this,r=C.columngroupslevel*C.columnsheight,r-=i.level*C.columnsheight),E=this.height);var s=C.toTP("jqx-grid-column-header")+" "+C.toTP("jqx-widget-header");C.rtl&&(s+=" "+C.toTP("jqx-grid-column-header-rtl"));var l=C.rtl?150+A+1:150+A-1,o=C.rtl?A++:A--,a=te('<div role="columnheader" style="z-index: '+o+';position: absolute; height: 100%;" class="'+s+'"><div style="height: 100%; width: 100%;"></div></div>');C.columngroups&&(a[0].style.height=E+"px",a[0].style.bottom="0px",this.pinned&&(a[0].style.zIndex=l)),this.uielement=a,""!=this.classname&&this.classname&&a.addClass(this.classname);var n,d,h=this.width,c=!1;null===this.width&&(this.width="auto"),-1==this.width.toString().indexOf("%")&&null==this._percentagewidth||(h=null!=this._percentagewidth?parseFloat(this._percentagewidth)*M/100:parseFloat(this.width)*M/100,c=!0),"auto"==this.width||this._width||c?c?(h<this.minwidth&&"auto"!=this.minwidth&&(h=this.minwidth),h>this.maxwidth&&"auto"!=this.maxwidth&&(h=this.maxwidth),null!=this._percentagewidth&&-1==this.width.toString().indexOf("%")||(this._percentagewidth=this.width),a.width(h),this.width=h):this.hidden||this.adaptivehidden||(n=Math.floor(H*(this.text.length/P.length)),H-(L+=n)<3&&H!=L&&.01<H-L?H-L==1?n++:n+=2:e==C.columns.records.length-1&&L<H&&(n+=H-L),isNaN(n)&&(n=this.minwidth),n<0&&(d=te("<span>"+this.text+"</span>"),te(document.body).append(d),n=10+d.width(),d.remove()),n<this.minwidth&&(n=this.minwidth),n>this.maxwidth&&(n=this.maxwidth),this._width="auto",this.width=n,h=this.width,a.width(this.width)):(h<this.minwidth&&"auto"!=this.minwidth&&(h=this.minwidth,this.width=h),h>this.maxwidth&&"auto"!=this.maxwidth&&(h=this.maxwidth,this.width=h),a[0].style.width=parseInt(h)+"px"),(this.hidden&&this.hideable||this.adaptivehidden)&&a.css("display","none");var u=te(a.children()[0]),g=C.rtl?C.toTP("jqx-grid-column-menubutton")+" "+C.toTP("jqx-grid-column-menubutton-rtl"):C.toTP("jqx-grid-column-menubutton");g+=" "+C.toTP("jqx-icon-arrow-down");var p=te('<div style="height: '+E+'px; display: none; left: 100%; top: 0%; position: absolute;"><div class="'+g+'" style="width: 100%; height:100%;"></div></div>');C.enableanimations||p.css("margin-left",-16),C.rtl&&p.css("left","0px"),this.columnsmenu=p[0],I[0].cells[e]=a[0],p[0].style.width=parseInt(C.columnsmenuwidth)+"px";var m,w,v,f=C.columnsmenu,b=!1,x=!1,y=C.groupable&&0<D&&T<D||C.rowdetails&&T<D;if(C.rtl&&(y=C.groupable&&0<D&&T<D||C.rowdetails&&T<D,y&=e>C.columns.records.length-1-D),y?(T++,f&=!1,this.sortable=!1,x=!(this.editable=!1)):(null==(m=null!=this.renderer?this.renderer(this.text,this.align,E):C._rendercolumnheader(this.text,this.align,E,C))&&(m=C._rendercolumnheader(this.text,this.align,E,C)),null!=this.renderer&&(m=te(m)),f&=!0,b=!0),C.WinJS?MSApp.execUnsafeLocalFunction(function(){u.append(te(m))}):this.renderer?u.append(te(m)):m&&(u[0].innerHTML=m),null!=m&&(w=te('<div class="iconscontainer" style="height: '+E+'px; margin-left: -32px; display: block; position: absolute; left: 100%; top: 0%; width: 32px;"><div class="filtericon '+C.toTP("jqx-widget-header")+'" style="height: '+E+'px; float: right; display: none; width: 16px;"><div class="'+C.toTP("jqx-grid-column-filterbutton")+'" style="width: 100%; height:100%;"></div></div><div class="sortasc '+C.toTP("jqx-widget-header")+'" style="height: '+E+'px; float: right; display: none; width: 16px;"><div class="'+C.toTP("jqx-grid-column-sortascbutton")+" "+C.toTP("jqx-icon-arrow-up")+'" style="width: 100%; height:100%;"></div></div><div class="sortdesc '+C.toTP("jqx-widget-header")+'" style="height: '+E+'px; float: right; display: none; width: 16px;"><div class="'+C.toTP("jqx-grid-column-sortdescbutton")+" "+C.toTP("jqx-icon-arrow-down")+'" style="width: 100%; height:100%;"></div></div><div class="sorticon '+C.toTP("jqx-widget-header")+'" style="height: '+E+'px; float: right; visibility: hidden; width: 16px;"><div class="'+C.toTP("jqx-grid-column-sorticon")+" "+C.toTP("jqx-icon-arrow-down")+'" style="width: 100%; height:100%;"></div></div></div>'),p.addClass(C.toTP("jqx-widget-header")),u.append(w),v=w.children(),this.sorticon=v[3],this.sortasc=v[1],this.sortdesc=v[2],this.filtericon=v[0],this.iconscontainer=w,C.rtl&&(w.css("margin-left","0px"),w.css("left","0px"),te(this.sorticon).css("float","left"),te(this.sortasc).css("float","left"),te(this.filtericon).css("float","left"),te(this.sortdesc).css("float","left")),!C.autoshowfiltericon&&this.filterable&&te(this.filtericon).css("display","block")),this.element=a[0],f&&(C._handlecolumnsmenu(C,u,a,p,this),this.menu||p.hide()),O.appendChild(a[0]),C.groupable&&b){if(a[0].id=C.dataview.generatekey(),!C._handlecolumnstogroupsdragdrop)throw new Error("jqxGrid: Missing reference to jqxgrid.grouping.js.");C._handlecolumnstogroupsdragdrop(this,a)}C.columnsreorder&&this.draggable&&C._handlecolumnsdragreorder&&C._handlecolumnsdragreorder(this,a);var _=this;_._applyStyle(),C.addHandler(a,"mouseenter",function(e){_.hovered=!0,_._applyStyle()}),C.addHandler(a,"mouseleave",function(e){_.hovered=!1,_._applyStyle()});var q,j,S=function(e,t,i){if(e.selectable){var r=C.getrows();if(void 0===e.selected&&(e.selected=!1),t.shiftKey&&void 0!==C._clickedcolumn||(C._clickedcolumn=e),t.shiftKey&&C._clickedcolumn&&void 0===i){var s=C.columns.records.indexOf(C._clickedcolumn),l=C.columns.records.indexOf(e),o=Math.min(s,l),a=Math.max(s,l);C.clearselection();for(var n=o;n<=a;n++)S(C.columns.records[n],t,!0);return void C._renderrows(this.virtualsizeinfo)}i?e.selected=!0:(t.ctrlKey||C.clearselection(),e.selected=!e.selected);for(n=0;n<r.length;n++)C._applycellselection(r[n].boundindex,e.displayfield,e.selected,!1);e.selected?e.element.setAttribute("selected",""):e.element.removeAttribute("selected"),e._applyStyle(),void 0===i&&C._renderrows(this.virtualsizeinfo)}};if(C.addHandler(a,"click",function(e){if(_.checkboxcolumn)return!0;if(0<C.sorttogglestates&&C._togglesort&&!C._loading){if(C.suspendClick)return!0;C._togglesort(_)}S(_,e),e.preventDefault(),C._raiseEvent(7,{column:_.getcolumnproperties(),datafield:_.datafield,originalEvent:e})}),_.resizable&&C.columnsresize&&!x&&(q=!1,j="mousemove",C.isTouchDevice()&&!0!==C.touchmode&&(q=!0,j=te.jqx.mobile.getTouchEventName("touchstart")),C.addHandler(a,j,function(e){var t=parseInt(e.pageX),i=5,r=parseInt(a.coord().left);if(C.hasTransform&&(r=te.jqx.utilities.getOffset(a).left),C.resizing)return!0;if(C._handlecolumnsresize){if(q){i=40;return(t=C.getTouches(e)[0].pageX)>=r+_.width-i?(C.resizablecolumn={columnelement:a,column:_},a.css("cursor","col-resize")):(a.css("cursor",""),C.resizablecolumn=null),!0}var s=_.width;if(C.rtl&&(s=0),r+s-i<=t){if(t<=r+s+i)return C.resizablecolumn={columnelement:a,column:_},a.css("cursor","col-resize"),!1;a.css("cursor",""),C.resizablecolumn=null}else a.css("cursor",""),t<r+s-i&&(_._animating||_._menuvisible||a.mouseenter()),C.resizablecolumn=null}})),a.css("left",B),this.hidden&&this.hideable||this.adaptivehidden||(B+=h),_.rendered&&_.rendered(te(u[0].firstChild),_.align,E)&&null!=w&&w.hide(),_.checkboxcolumn){if(w&&w.hide(),!C.host.jqxCheckBox)throw new Error("jqxGrid: Missing reference to jqxcheckbox.js");u.html('<div style="cursor: pointer; margin-left: 3px; top: 50%; margin-top: -9px; position: relative;"></div>');var z=u.find("div:first");z.jqxCheckBox({_canFocus:!1,disabled:C.disabled,disabledContainer:!0,theme:C.theme,enableContainerClick:!1,animationShowDelay:0,animationHideDelay:0}),z.addClass(C.toThemeProperty("jqx-checkbox"));var k=(_.checkboxelement=z).data().jqxCheckBox.instance;C._checkboxcolumn=_,k.updated=function(e,t,i){C._checkboxcolumnupdating=!0,C.disabled&&(z.jqxCheckBox({disabled:C.disabled}),t=i),t?C.selectallrows():C.unselectallrows(),C._checkboxcolumnupdating=!1}}}),0<B?this.columnsheader.width(2+B):this.columnsheader.width(B),I[0].appendChild(O),this.columnsrow=I,C.columnsheader.append(I),this.showfilterrow&&this._updatefilterrow&&(this.columngroups?I.height(this.columngroupslevel*this.columnsheight):I.height(this.columnsheight),this.filterrow||((d=te("<div style='position: relative !important; '></div>"))[0].id="filterrow."+this.element.id,d.height(this.filterrowheight),this.filterrow=d),this.filterrow.width(2+B),this.columnsheader.append(this.filterrow),this._updatefilterrow()),this.showeverpresentrow&&"bottom"!==this.everpresentrowposition?(this.columngroups?I.height(this.columngroupslevel*this.columnsheight):I.height(this.columnsheight),this.addnewrowtop||((h=te("<div style='position: relative !important; z-index:"+this.headerZIndex+";'></div>"))[0].id="addnewrowtop."+this.element.id,h.height(this.everpresentrowheight),this.addnewrowtop=h),this.addnewrowtop.width(2+B),"topAboveFilterRow"==this.everpresentrowposition&&this.filterrow?this.addnewrowtop.insertBefore(this.filterrow):this.columnsheader.append(this.addnewrowtop),this._updateaddnewrow()):this.showeverpresentrow&&"bottom"===this.everpresentrowposition&&(this.addnewrowbottom||((c=te("<div style='position: relative !important; z-index:"+this.headerZIndex+";'></div>"))[0].id="addnewrowbottom."+this.element.id,c.height(this.everpresentrowheight),this.addnewrowbottom=c),this.addnewrowbottom.width(2+B),this.addnewrow.append(this.addnewrowbottom),this._updateaddnewrow()),I[0].style.visibility=0==B?"hidden":"inherit",I.width(B),this._handlecolumnsdragdrop&&this._handlecolumnsdragdrop(),this._handlecolumnsreorder&&this._handlecolumnsreorder(),this._rendersortcolumn&&this._rendersortcolumn(),this._renderfiltercolumn&&this._renderfiltercolumn(),this._handlecolumnsresize&&this._handlecolumnsresize(),this.columngroups&&this._rendercolumngroups(),this._updatecheckboxselection&&this._updatecheckboxselection()},_rendercolumngroups:function(){if(this.columngroups){for(var e=0,t=0;t<this.columns.records.length;t++)this.columns.records[t].pinned&&e++;var i=this.headerZIndex-e+this.columns.records.length,r=this.that,s=r.toTP("jqx-grid-column-header")+" "+r.toTP("jqx-grid-columngroup-header")+" "+r.toTP("jqx-widget-header");r.rtl&&(s+=" "+r.toTP("jqx-grid-columngroup-header-rtl"));var l=this.columnsheader.find("#columntable"+this.element.id);l.find("jqx-grid-columngroup-header").remove();for(var o=0;o<this.columngroupslevel-1;o++)for(t=0;t<this.columngroups.length;t++){var a,n,d,h,c,u,g,p,m=this.columngroups[t],w=m.level;w===o&&(a=w*this.columnsheight,n=99999,m.groups&&(d=function(e){for(var t=0,i=0;i<e.groups.length;i++){var r=e.groups[i];r.groups?t+=d(r):r.hidden||(t+=r.width,n=Math.min(parseFloat(r.element.style.left),n))}return t},m.width=d(m),m.left=n,h=this.columnsheight,c=i--,u=te('<div role="columnheader" style="z-index: '+c+';position: absolute;" class="'+s+'"></div>'),g=te(this._rendercolumnheader(m.text,m.align,this.columnsheight,this)),m.renderer&&(g=te("<div style='height: 100%; width: 100%;'></div>"),p=m.renderer(m.text,m.align,h),g.html(p)),u.append(g),u[0].style.left=n+"px",0===n&&(u[0].style.borderLeftColor="transparent"),this.showcolumnheaderlines||(u[0].style.borderRightColor="transparent",u[0].style.borderBottomColor="transparent",u[0].style.boxShadow="none"),u[0].style.top=a+"px",u[0].style.height=h+"px",u[0].style.width=-1+m.width+"px",l.append(u),m.element=u,m.rendered&&m.rendered(g,m.align,h)))}}},_resizecolumngroups:function(){if(this.columngroups)for(var e=0;e<this.columngroups.length;e++){var s,t,i,r=this.columngroups[e],l=r.level*this.columnsheight,o=99999;r.groups&&(s=function(e){for(var t=0,i=0;i<e.groups.length;i++){var r=e.groups[i];r.groups?t+=s(r):r.hidden||(t+=r.width,o=Math.min(parseFloat(r.element.style.left),o))}return t},r.width=s(r),r.left=o,t=this.columnsheight,(i=r.element)[0].style.left=o+"px",i[0].style.top=l+"px",i[0].style.height=t+"px",i[0].style.width=-1+r.width+"px")}},_handlecolumnsmenu:function(v,e,o,f,b){v.dragmousedown=null,f[0].id=v.dataview.generatekey(),e.append(f),o[0].columnsmenu=f[0],b.element=o[0];var t,a=this.columnsmenuwidth+1,i="mouseenter";v.isTouchDevice()&&(i="touchstart"),v.addHandler(o,i,function(e){var t=parseInt(e.pageX),i=v.columnsresize&&b.resizable?3:0,r=parseInt(o.coord().left);v.hasTransform&&(r=te.jqx.utilities.getOffset(o).left);var s=b.width;if(v.rtl&&(s=0),0!=i&&r+s-i<=t&&t<=r+s+i)return!1;var l=v.vScrollInstance.isScrolling();b.menu&&v.autoshowcolumnsmenubutton&&!l&&!v.disabled&&function(){if(!b.menu)return;if(!v.resizing){if(b._menuvisible&&v._hasOpenedMenu)return;var e;b._animating=!0,v.menuitemsarray&&0<v.menuitemsarray.length&&(v.enableanimations?(f.css("display","block"),f.stop(),b.iconscontainer.stop(),v.rtl?(f.css("margin-left",-a),f.animate({"margin-left":"0px"},"fast",function(){f.css("display","block"),b._animating=!1,b._menuvisible=!0})):(f.css("margin-left","0px"),f.animate({"margin-left":-a},"fast",function(){f.css("display","block"),b._animating=!1,b._menuvisible=!0})),e=v.rtl?a:-(32+a),b.iconscontainer.animate({"margin-left":e},"fast")):(f.css("display","block"),e=v.rtl?16:-48,b.iconscontainer.css("margin-left",e+"px"),b._animating=!1,b._menuvisible=!0))}}()}),v.autoshowcolumnsmenubutton||(f.css("display","block"),t=v.rtl?16:-48,b.iconscontainer.css("margin-left",t+"px"),v.rtl?f.css({"margin-left":"0px"}):f.css({"margin-left":-a})),v.addHandler(o,"mouseleave",function(e){if(v.menuitemsarray&&0<v.menuitemsarray.length&&b.menu){var t,i=te.data(document.body,"contextmenu"+v.element.id);if(null!=i&&f[0].id==i.columnsmenu.id)return;v.autoshowcolumnsmenubutton&&(v.enableanimations?(v.rtl?f.css("margin-left","0px"):f.css("margin-left",-a),f.stop(),b.iconscontainer.stop(),v.rtl?f.animate({"margin-left":-a},"fast",function(){f.css("display","none"),b._menuvisible=!1}):f.animate({"margin-left":0},"fast",function(){f.css("display","none"),b._menuvisible=!1}),t=v.rtl?0:-32,b.iconscontainer.animate({"margin-left":t},"fast")):(f.css("display","none"),t=v.rtl?0:-32,b.iconscontainer.css("margin-left",t+"px"),b._menuvisible=!1))}});var x=!0,y="",r=te(b.filtericon);v.addHandler(f,"mousedown",function(e){v.gridmenu||v._initmenu(),x=!te.data(v.gridmenu[0],"contextMenuOpened"+v.gridmenu[0].id),null!=(y=te.data(document.body,"contextmenu"+v.element.id))&&(y=y.column.datafield)}),v.addHandler(r,"mousedown",function(e){v.gridmenu||v._initmenu(),x=!te.data(v.gridmenu[0],"contextMenuOpened"+v.gridmenu[0].id),null!=(y=te.data(document.body,"contextmenu"+v.element.id))&&(y=y.column.datafield)});function s(){if(b.menu&&(v.gridmenu||v._initmenu(),!v.disabled)){for(var e=0;e<v.columns.records.length;e++)v.columns.records[e].datafield!=b.datafield&&(v.columns.records[e]._menuvisible=!1);var t=f.coord(!0),i=f.height();if(!x&&(x=!0,y==b.datafield))return v._closemenu(),0;var r=v.host.coord(!0);if(v.hasTransform&&(r=te.jqx.utilities.getOffset(v.host),t=te.jqx.utilities.getOffset(f)),r.left+v.host.width()>parseInt(t.left)+v.gridmenu.width()?v.gridmenu.jqxMenu("open",t.left,t.top+i):v.gridmenu.jqxMenu("open",f.width()+t.left-v.gridmenu.width(),t.top+i),v.gridmenu.width()<100&&v._arrangemenu(),v.adaptive&&v.element.offsetWidth<v.adaptivewidth){v.gridmenu.jqxMenu("close"),v.gridmenu.jqxMenu("open",r.left,t.top+i);for(var s=0,e=0;e<v.columns.records.length;e++){var l=v.columns.records[e];l.hidden||l.adaptivehidden||"adaptive"===l.columntype||(s+=l.adaptivewidth)}v.gridmenu.width(s),v.gridmenu.height(v.content.height())}(!v.filterable||v.filterable&&v.showfilterrow)&&setTimeout(function(){v.gridmenu.focus();for(var e=v.gridmenu.find(".jqx-item"),t=0;t<e.length;t++)e[t].active&&(e[t].active=!1);var i=e[0];0<=e[0].className.indexOf("disabled")&&(i=e[1]),te(e).removeClass("jqx-fill-state-focus"),te(i).addClass("jqx-fill-state-focus"),i.active=!0},225),v._hasOpenedMenu=!0;var o,a,n,d,h,c=v._getmenuitembyindex(0),u=v._getmenuitembyindex(1),g=v._getmenuitembyindex(2),p=v._getmenuitembyindex(3),m=v._getmenuitembyindex(4),w=v._getmenuitembyindex(5);null!=c&&null!=u&&null!=g&&(o=b.sortable&&v.sortable,v.gridmenu.jqxMenu("disable",c.id,!o),v.gridmenu.jqxMenu("disable",u.id,!o),v.gridmenu.jqxMenu("disable",g.id,!o),null!=b.displayfield&&(a=(n=v.getsortinformation())&&n.sortcolumns&&n.sortcolumns.find(function(e){return e.dataField===b.displayfield}),v.sortcolumn==b.displayfield||a?(n=v.getsortinformation(),o&&(n.sortdirection.ascending?v.gridmenu.jqxMenu("disable",c.id,!0):v.gridmenu.jqxMenu("disable",u.id,!0))):v.gridmenu.jqxMenu("disable",g.id,!0))),null!=p&&null!=m&&(v.groupable&&b.groupable?v.groups&&-1!=v.groups.indexOf(b.datafield)?(v.gridmenu.jqxMenu("disable",p.id,!0),v.gridmenu.jqxMenu("disable",m.id,!1)):(v.gridmenu.jqxMenu("disable",p.id,!1),v.gridmenu.jqxMenu("disable",m.id,!0)):(v.gridmenu.jqxMenu("disable",m.id,!0),v.gridmenu.jqxMenu("disable",p.id,!0))),null!=w&&(v.menuOwner=b,v._updatefilterpanel(v,w,b),d=0,v.sortable&&v._togglesort&&v.showsortmenuitems&&(d+=3),v.groupable&&v.addgroup&&v.showgroupmenuitems&&(d+=2),h=36*d+6,h=d*v._measureMenuElement()+20,te.jqx.browser.msie&&te.jqx.browser.version<8&&(h+=20,te(w).height(220)),v.isTouchDevice()&&(h+=10),v.filterable&&v.showfiltermenuitems&&(b.filterable?(v.gridmenu.height(h+230),te(w).css("display","block")):(v.gridmenu.height(h),te(w).css("display","none")))),v.columnmenuopening&&!1===v.columnmenuopening(v.gridmenu,b.displayfield,v.gridmenu.height())&&setTimeout(function(){v._closemenu()}),te.data(document.body,"contextmenu"+v.element.id,{column:b,columnsmenu:f[0]})}}v.addHandler(r,"click",function(e){return b.menu&&(v.showfilterrow||("block"!=f[0].style.display&&o.trigger("mouseenter"),setTimeout(function(){"block"!=f[0].style.display&&o.trigger("mouseenter"),s()},200))),!1}),v.addHandler(f,"click",function(e){return b.menu&&s(),!1}),v.isTouchDevice()&&v.addHandler(f,te.jqx.mobile.getTouchEventName("touchstart"),function(e){return b.menu&&(v._hasOpenedMenu?v._closemenu():s()),!1})},_removecolumnhandlers:function(e){var t,i,r=this.that,s=te(e.element);0<s.length&&(r.removeHandler(s,"mouseenter"),r.removeHandler(s,"mouseleave"),t=te(e.filtericon),r.removeHandler(t,"mousedown"),r.removeHandler(t,"click"),r.removeHandler(s,"click"),r.removeHandler(s,"mousemove"),r.columnsreorder&&(r.removeHandler(s,"mousedown.drag"),r.removeHandler(s,"mousemove.drag")),r.removeHandler(s,"dragstart"),s[0].columnsmenu&&(i=te(s[0].columnsmenu),r.removeHandler(i,"click"),r.removeHandler(i,"mousedown"),r.removeHandler(i,te.jqx.mobile.getTouchEventName("touchstart"))))},_rendercolumnheader:function(e,t,i,r){return r.columngroups?(i/2-this._columnheight/2<0&&0,0):32!=this.columnsheight&&(this.columnsheight/2-this._columnheight/2<0&&0,0),this.enableellipsis?"left"==t?'<div style="padding-bottom: 2px; overflow: hidden; text-overflow: ellipsis; text-align: '+t+"; margin-left: 4px; margin-right: 2px; line-height: "+i+'px;"><span style="text-overflow: ellipsis; cursor: default;">'+e+"</span></div>":'<div style="padding-bottom: 2px; overflow: hidden; text-overflow: ellipsis; text-align: '+t+"; margin-left: 2px; margin-right: 4px; line-height: "+i+'px;"><span style="text-overflow: ellipsis; cursor: default;">'+e+"</span></div>":"center"==t||"middle"==t?'<div style="padding-bottom: 2px; text-align: center; line-height: '+i+'px;"><a href="#">'+e+"</a></div>":'<a style="line-height: '+i+"px; float: "+t+';" href="#">'+e+"</a>"},_renderrows:function(e,r,t){var i,o=this.that;(this.pageable||this.groupable)&&(this.autoheight||this.autorowheight)&&null!=this.table&&null!=this.table[0].rows&&this.table[0].rows.length<this.dataview.rows.length&&(o.prerenderrequired=!0),this.pageable||!this.autoheight&&!this.autorowheight||!this.virtualmode&&!this.unboundmode||(i=this.source.totalrecords,isNaN(i)||null!=this.table&&null!=this.table[0].rows&&this.table[0].rows.length!=i&&(o.prerenderrequired=!0)),!this.autoheight&&!this.autorowheight||o.prerenderrequired||this.table&&this.table[0].rows&&(this.table[0].rows.length<this.dataview.records.length&&(!(this.pageable&&this.table[0].rows.length<this.dataview.pagesize)&&this.pageable||(o.prerenderrequired=!0)),this.table[0].rows.length<this.dataview.cachedrecords.length&&(!(this.pageable&&this.table[0].rows.length<this.dataview.pagesize)&&this.pageable||(o.prerenderrequired=!0))),o._prerenderrows(e),o._requiresupdate&&(o._requiresupdate=!1,o._updatepageviews());function s(){o._loading||(o.WinJS?MSApp.execUnsafeLocalFunction(function(){o._rendervisualrows()}):o._rendervisualrows(),o.virtualmode&&o.showaggregates&&o._updateaggregates&&o.refreshaggregates())}var l,a,n,d,h,c=te.jqx.browser.msie&&te.jqx.browser.version<10;if(this.virtualmode){this.loadondemand&&(s(),function(){if(o.rendergridrows){var e=o._startboundindex;null==e&&(e=0);var t=e+1+o.dataview.pagesize;if(null!=e&&null!=t){var i=!!o.source._source;if((i?o.source._source.recordstartindex:o.source.recordstartindex)!=e||1==r){if(i){if(t>=o.source._source.totalrecords&&((e=(t=o.source._source.totalrecords)-o.dataview.pagesize-1)<0&&(e=0),o.source._source.recordendindex==t&&o.source._source.recordstartindex==e))return;o.source._source.recordstartindex=e,o.source._source.recordendindex=t}else o.source.recordstartindex=e,o.source.recordendindex=t;o.updatebounddata("cells")}}}}(),this.loadondemand=!1);var u=null==this._browser?this._isIE10():this._browser;(!this.editable||!this.editcell||this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling())&&!this.autoheight&&(u||c||navigator&&-1!=navigator.userAgent.indexOf("Safari"))?(null!=this._scrolltimer&&clearTimeout(this._scrolltimer),this._scrolltimer=setTimeout(function(){s()},5)):s()}else{if("deferred"==this.scrollmode&&(this.hScrollInstance.isScrolling()||this.vScrollInstance.isScrolling())){null!=this._scrolltimer&&clearInterval(this._scrolltimer);var g,p=this._getfirstvisualrow();return null!=p&&((g=this.scrollfeedback?this.scrollfeedback(p.bounddata):function(){if(null==p)return"";var e="<table>",t=o.deferreddatafields;null==t&&0<o.columns.records.length&&(t=new Array).push(o.columns.records[0].displayfield);for(var i=0;i<t.length;i++){var r,s=t[i],l=o._getcolumnbydatafield(s);l&&(r=o._getcellvalue(l,p),""!=l.cellsformat&&te.jqx.dataFormat&&(te.jqx.dataFormat.isDate(r)?r=te.jqx.dataFormat.formatdate(r,l.cellsformat,o.gridlocalization):te.jqx.dataFormat.isNumber(r)&&(r=te.jqx.dataFormat.formatnumber(r,l.cellsformat,o.gridlocalization))),e+="<tr><td>"+r+"</td></tr>")}return e+="</table>"}(p.bounddata))!=this._scrollelementcontent&&(this._scrollelement[0].innerHTML=g,this._scrollelementcontent=g)),this._scrollelement.css("visibility","visible"),this._scrollelementoverlay.css("visibility","visible"),this._scrollelement.css("margin-top",-this._scrollelement.height()/2),void(this._scrolltimer=setInterval(function(){o.hScrollInstance.isScrolling()||o.vScrollInstance.isScrolling()||(s(),o._scrollelement.css("visibility","hidden"),o._scrollelementoverlay.css("visibility","hidden"),clearInterval(o._scrolltimer),p&&o.ensurerowvisible(p.visibleindex))},100))}if(navigator&&-1==navigator.userAgent.indexOf("Chrome")&&-1!=navigator.userAgent.indexOf("Safari")&&(this._updatedelay=1),null!=this.touchDevice&&1==this.touchDevice&&(this._updatedelay=5),((u=null==this._browser?this._isIE10():this._browser)||c)&&(this._updatedelay=5),u&&this.hScrollInstance.isScrolling())return void s();te.jqx.browser.mozilla&&0==this._updatedelay&&(this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling())&&(this._updatedelay=0),this.isTouchDevice()&&(this._updatedelay=0),null!=this.updatedelay&&(this._updatedelay=this.updatedelay),0==this._updatedelay?s():(null!=(l=this._jqxgridrendertimer)&&clearTimeout(l),this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling()?(this._updatedelay?l=setTimeout(function(){s()},this._updatedelay):(l=null,s()),this._jqxgridrendertimer=l):(this._jqxgridrendertimer=l,s()))}o.autorowheight&&!o.autoheight&&0<this._pageviews.length&&((a=this._gettableheight())<(n=this._pageviews[0].height)?(this.pageable&&this.gotopage&&(n=this._pageviews[0].height)<0&&(n=this._pageviews[0].height),"visible"!=this.vScrollBar.css("visibility")&&this.vScrollBar.css("visibility","visible"),(n<=a||this.autoheight)&&this.vScrollBar.css("visibility","hidden"),0<n-a?"deferred"!=this.scrollmode&&(d=n-a,h=this.vScrollInstance.max,this.vScrollBar.jqxScrollBar({max:d}),Math.round(d)!=Math.round(h)&&d<this.vScrollBar.jqxScrollBar("value")&&this.vScrollBar.jqxScrollBar({value:0})):this.vScrollBar.jqxScrollBar({value:0,max:n})):(this._loading||this.vScrollBar.css("visibility","hidden"),this.vScrollBar.jqxScrollBar({value:0})),this._arrange(),this.virtualsizeinfo&&(this.virtualsizeinfo.virtualheight=n))},scrolling:function(){return{vertical:this.vScrollInstance.isScrolling(),horizontal:this.hScrollInstance.isScrolling()}},_renderhorizontalscroll:function(){var e=this.hScrollInstance,t=e.value;"hidden"===this.hScrollBar.css("visibility")&&(t=e.value=0);var i=parseInt(t);if(null!=this.table){var r,s=this.table[0].rows.length,l=this.columnsrow,o=this.groupable&&0<this.groups.length?this.groups.length:0,a=this.columns.records.length-o,n=this.columns.records,d=0==this.dataview.rows.length;if(this.rtl&&"hidden"!=this.hScrollBar.css("visibility")&&(i=e.max-i),d&&!this._haspinned){for(var h=0;h<s;h++)for(var c=this.table[0].rows[h],u=0;u<o+a;u++){null!=(g=c.cells[u])&&n[u].pinned&&(g.style.marginLeft=i+"px",0==h&&(l[0].cells[u].style.marginLeft=i+"px"))}this.table[0].style.marginLeft=-i+"px",l[0].style.marginLeft=-i+"px"}else if(this._haspinned||null==this._haspinned){for(h=0;h<s;h++)for(var g,c=this.table[0].rows[h],u=0;u<o+a;u++){if(null!=(g=c.cells[u]))if(n[u].pinned){if(0==i&&""==g.style.marginLeft)continue;var p=null,m=null,w=null;this.showeverpresentrow&&this.addnewrowtop&&this.addnewrowtop[0].cells&&(w=this.addnewrowtop[0].cells[u]),this.showfilterrow&&this.filterrow&&this.filterrow[0].cells&&(m=this.filterrow[0].cells[u]),this.showaggregates&&this.statusbar[0].cells&&(p=this.statusbar[0].cells[u]),this.rtl?(g.style.marginLeft=-parseInt(t)+"px",0==h&&(l[0].cells[u].style.marginLeft=-parseInt(t)+"px",p&&(p.style.marginLeft=-parseInt(t)+"px"),m&&(m.style.marginLeft=-parseInt(t)+"px"),w&&(w.style.marginLeft=-parseInt(t)+"px"))):(g.style.marginLeft=i+"px",0==h&&(l[0].cells[u].style.marginLeft=i+"px",p&&(p.style.marginLeft=i+"px"),m&&(m.style.marginLeft=i+"px"),w&&(w.style.marginLeft=i+"px")))}}this.table[0].style.marginLeft=-i+"px",l[0].style.marginLeft=-i+"px"}else 0==this._haspinned&&(this.table[0].style.marginLeft=-i+"px",l[0].style.marginLeft=-i+"px");this.showaggregates&&this.statusbar[0].cells&&(r=0,this.rtl&&"hidden"!=this.vScrollBar.css("visibility")&&"hidden"!=this.hScrollBar.css("visibility")&&(r=2+parseInt(this.hScrollBar.css("left"))),this.statusbar[0].style.marginLeft=-i+r+"px"),this.showfilterrow&&this.filterrow&&this.filterrow[0].cells&&(this.filterrow[0].style.marginLeft=-i+"px"),this.showeverpresentrow&&this.addnewrowtop&&this.addnewrowtop[0].cells&&(this.addnewrowtop[0].style.marginLeft=-i+"px")}},_updaterowdetailsvisibility:function(){if(this.rowdetails)for(var e=0;e<this._rowdetailselementscache.length;e++)te(this._rowdetailselementscache[e]).css("display","none")},_getvisualcolumnsindexes:function(e,t,i,r,s,l){if(this.rowdetails||this.rtl||this.editcell||this.width&&0<=this.width.toString().indexOf("%")||this.exporting)return{start:0,end:i+r};var o=0,a=-1,n=i+r,d=!1;if(this.autorowheight)return{start:0,end:i+r};if(!s)for(var h=0;h<i+r;h++){if(d||this.columns.records[h].pinned&&l&&(d=!0),this.columns.records[h].hidden||this.columns.records[h].adaptivehidden||(o+=this.columns.records[h].width),e<=o&&-1==a&&(a=h),t+e<o){n=h;break}}return i+r<++n&&(n=i+r),-1!=a&&!d||(a=0),{start:a,end:n}},_getvirtualcolumnsindexes:function(e,t,i,r,s){if(this.rtl||this.editcell||this.exporting)return{start:0,end:i+r};var l=0,o=-1,a=i+r;if(this.autorowheight)return{start:0,end:i+r};if(!s)for(var n=0;n<i+r;n++){if(this.columns.records[n].hidden||this.columns.records[n].adaptivehidden||(l+=this.columns.records[n].width),e<=l&&-1==o&&(o=n),t+e<l){a=n;break}}return i+r<++a&&(a=i+r),-1==o&&(o=0),{start:o,end:a}},_getfirstvisualrow:function(){var e=this.vScrollInstance.value,t=parseInt(e);if(0==this._pagescache.length&&(this.dataview.updateview(),this._loadrows()),"visible"!=this.vScrollBar[0].style.visibility&&(t=0),!this.pageable){var i=this._findvisiblerow(t,this._pageviews);if(-1==i)return null;i!=this.dataview.pagenum?(this.dataview.pagenum=i,this.dataview.updateview(),this._loadrows()):this._pagescache[this.dataview.pagenum]||this._loadrows()}var r=this._findvisiblerow(t,this._pagescache[this.dataview.pagenum]),s=this._pagescache[this.dataview.pagenum];if(s&&s[0])return s[r]},_rendervisualrows:function(){if(this.virtualsizeinfo){var e=this.vScrollInstance,t=this.hScrollInstance,i=e.value,r=t.value,s=parseInt(i),l=parseInt(r),o=this._gettableheight(),a=null!=this._hostwidth?this._hostwidth:this.host.width();"visible"==this.hScrollBar[0].style.visibility&&(o+=29),"deferred"==this.scrollmode&&0!=this._newmax&&s>this._newmax&&null!=this._newmax&&(s=this._newmax);var n,d=e.isScrolling()||t.isScrolling()||this._keydown,h=this.groupable&&0<this.groups.length;this.visiblerows=new Array,this.hittestinfo=new Array,this.editcell&&null==this.editrow&&this._hidecelleditor(!1),null!=this.editrow&&this._hideeditors(),this.virtualmode&&!this.pageable&&(this._pagescache=new Array),0==this._pagescache.length&&(this.dataview.updateview(),this._loadrows()),"hidden"==this.vScrollBar[0].style.visibility&&(s=0),this.pageable||(-1==(n=this._findvisiblerow(s,this._pageviews))&&(this._clearvisualrows(),this._renderemptyrow(),this._updaterowdetailsvisibility()),n!=this.dataview.pagenum?(this.dataview.pagenum=n,this.dataview.updateview(),this._loadrows()):this._pagescache[this.dataview.pagenum]||this._loadrows());var c=this.groupable&&0<this.groups.length?this.groups.length:0;if(this.columns.records){var u=this.columns.records.length-c,g=this._findvisiblerow(s,this._pagescache[this.dataview.pagenum]),p=this._pagescache[this.dataview.pagenum],m=g;m<0&&(m=0);var w=0,v=0,f=0,b=0,x=this.virtualsizeinfo.visiblerecords,y=this.groupable?this.groups.length:0,_=this.toTP("jqx-grid-cell")+" "+this.toTP("jqx-item");this.rtl&&(_+=" "+this.toTP("jqx-grid-cell-rtl")),(this.autoheight||this.autorowheight)&&this.pageable&&(!this.groupable||this.groupable&&0===this.groups.length)&&(x=this.dataview.pagesize),h&&(_=" "+this.toTP("jqx-grid-group-cell")),this.isTouchDevice()&&(_+=" "+this.toTP("jqx-touch")),this.autorowheight&&(_+=" jqx-grid-cell-wrap");var q=this.rowsheight,j=this._rendercell,S=this._getvisualcolumnsindexes(l,a,c,u,h,!0),z=S.start,k=S.end,C=this._getvirtualcolumnsindexes(l,a,c,u,h),I=C.start,T=C.end;te.jqx.browser.msie&&te.jqx.browser.version;if((this.autoheight||this.pageable)&&this.autorowheight&&this._pageviews[0]&&(this._oldpageviewheight=this._pageviews[0].height),this.autorowheight&&(m=0),0<=m){this._updaterowdetailsvisibility(),this._startboundindex=null!=p?p[m].bounddata.boundindex:0,this._startvisibleindex=null!=p?p[m].bounddata.visibleindex:0;var B=this.table[0].rows;if(10<this.columns.records.length&&this.enablecolumnsvirtualization){function P(e){return!(!e||!e.parentNode||"#document-fragment"==e.parentNode.nodeName)}for(var H=0;H<B.length;H++){for(var M=B[H],A=0;A<I;A++){var D=A;this.columns.records[D].pinned||null!=this.columns.records[D].datafield&&(P(E=M.cells[D])&&E.parentNode.removeChild(E),O=this.columns.records[D].element,this.columns.records[D]._rendered=!1,P(O)&&this.columnsrow[0].removeChild(O),this.filterrow&&P(this.filterrow[0].cells[D])&&this.columns.records[D].filterable&&this.filterrow[0].cells[D].parentNode.removeChild(this.filterrow[0].cells[D]))}for(A=T;A<this.columns.records.length;A++){D=A;this.columns.records[D].pinned||null!=this.columns.records[D].datafield&&(P(E=M.cells[D])&&E.parentNode.removeChild(E),O=this.columns.records[D].element,this.columns.records[D]._rendered=!1,P(O)&&this.columnsrow[0].removeChild(O),this.filterrow&&P(this.filterrow[0].cells[D])&&this.columns.records[D].filterable&&this.filterrow[0].cells[D].parentNode.removeChild(this.filterrow[0].cells[D]))}for(A=I;A<T;A++){var E,D=A;P(E=M.cells[D])||M.appendChild(E);var O=this.columns.records[D].element;this.columns.records[D]._rendered=!0,O.selectable&&(E.removeAttribute("selected"),O.selected&&E.setAttribute("selected","")),P(O)||this.columnsrow[0].appendChild(O),this.filterrow&&this.showfilterrow&&!P(this.filterrow[0].cells[D])&&this.columns.records[D].filterable&&this.filterrow[0].firstChild.appendChild(this.filterrow[0].cells[D])}}}for(var L,N,F,R=0;R<x&&v<x;R++){var W,V=null!=p?p[m+R]:null;if(this.virtualmode&&R>=this.source.totalrecords&&(V=null),null==V){if(m=-R,this._pagescache[this.dataview.pagenum+1])p=this._pagescache[this.dataview.pagenum+1],this.dataview.pagenum++;else{var G=this._pageviews.length;do{if(!(this.dataview.pagenum<this._pageviews.length-1)){p=void 0;break}this.dataview.pagenum++,p=void 0,0<this._pageviews[this.dataview.pagenum].height&&(this.dataview.updateview(),this._loadrows(),p=this._pagescache[this.dataview.pagenum])}while(null==p&&this.dataview.pagenum<G)}null!=p&&(V=p[m+R])}if(null!=V){if(V.hidden)continue;if(this._endboundindex=this._startboundindex+R,this._endvisibleindex=this._startvisibleindex+R,0==R&&(W=Math.abs(s-V.top),this.table[0].style.top=-W+"px",b=-W),!(M=this.table[0].rows[v]))continue;parseInt(M.style.height)!=V.height&&(M.style.height=parseInt(V.height)+"px"),f+=V.height;var K=this.rowdetails&&V.rowdetails,U=!V.rowdetailshidden;K&&U&&(M.style.height=parseInt(V.height-V.rowdetailsheight)+"px",x++);for(var Y=this._isrowselected(!0,V),A=z;A<k;A++){D=A;this._rendervisualcell(j,_,Y,K,U,h,y,M,V,D,v,d)}if(null!=V.group&&this._rendergroup&&this._rendergroup(y,M,V,c,u,v,a),this.autorowheight&&(this.autoheight||this.pageable)){for(q=this.rowsheight,A=z;A<k;A++)this.editable&&this.editcell&&this.editcell.column==this.columns.records[A].datafield&&this.editcell.row==this.getboundindex(V)&&this.editcell.editor?q=Math.max(q,this.editcell.editor.height()):M.cells[A].firstChild&&(q=Math.max(q,8+parseInt(M.cells[A].firstChild.offsetHeight)));M.style.height=parseInt(q)+"px",this.heights[this._startboundindex+R]=q,K&&U&&(q+=V.rowdetailsheight),V.height=q}if(this.visiblerows[this.visiblerows.length]=V,this.hittestinfo[this.hittestinfo.length]={row:V,visualrow:M,details:!1},K&&U&&(v++,M=this.table[0].rows[v],this._renderrowdetails(_,M,V,c,u,v),this.visiblerows[this.visiblerows.length]=V,this.hittestinfo[this.hittestinfo.length]={row:V,visualrow:M,details:!0}),!this.autorowheight&&o<=f+b)break}else{this._clearvisualrow(l,h,v,c,u),f+w+b<=o&&(w+=q)}v++}this._horizontalvalue=l,0<w&&"visible"==this.vScrollBar[0].style.visibility&&(parseInt(this.table.css("top")),L=this._pageviews[this._pageviews.length-1],N=e.max,F=L.top+L.height-o,"visible"==this.hScrollBar.css("visibility")&&(F+=this.scrollbarsize+20),N==F||this.autorowheight||0<=F&&("deferred"!=this.scrollmode?(e.max=F,e.setPosition(e.max)):this._newmax!=F&&(this._newmax=F,this._rendervisualrows())))}if((this.autoheight||this.pageable)&&this.autorowheight){this._pagescache=new Array;for(var Z=0,X=0,H=0;H<this.visiblerows.length;H++){var J=this.visiblerows[H];J.top=Z,Z+=J.height,X+=J.height;K=this.rowdetails&&J.rowdetails,U=!J.rowdetailshidden,M=this.table[0].rows[H];K&&U&&H++;for(A=z;A<k;A++){var $=this.columns.records[A];if(!$.hidden&&!$.adaptivehidden&&!$.cellsrenderer){var Q=M.cells[A],ee=0;if(Q.firstChild?(ee=(J.height-parseInt(Q.firstChild.offsetHeight)-8)/2,K&&U&&(ee=(J.height-J.rowdetailsheight-te(Q.firstChild).height()-8)/2)):ee=(J.height-parseInt(te(Q).height())-8)/2,0<=ee&&(ee=parseInt(ee)+4,Q.firstChild&&-1==Q.firstChild.className.indexOf("jqx-grid-groups-row")&&"checkbox"!=$.columntype&&"button"!=$.columntype)){if(this.editable&&this.editcell&&this.editcell.column==$.datafield&&this.editcell.row==this.getboundindex(J))continue;Q.firstChild.style.marginTop=ee+"px"}}}}this._pageviews[0]&&(this._pageviews[0].height=X),this._arrange()}this._renderemptyrow(),this.toCompile&&0<this.toCompile.length&&te.each(this.toCompile,function(e,t){if(this.compiled)return!0;var i=this.cell;if(!i)return!0;te.jqx.angularCompile&&te.jqx.angularCompile(i,"<div>"+this.value+"</div>"),this.compiled=!0})}}},_hideemptyrow:function(){if(this.showemptyrow&&this.table&&this.table[0].rows){var e=this.table[0].rows[0];if(e)for(var t=!1,i=0;i<e.cells.length;i++){var r=te(e.cells[i]);"none"==r.css("display")||t||r.width()!=this.host.width()&&r.text()!=this.gridlocalization.emptydatastring||(r[0].checkbox=null,t=!(r[0].button=null),r[0].innerHTML="")}}},_renderemptyrow:function(){if(!this._loading&&0==this.dataview.records.length&&this.showemptyrow){var e=!1,t=this.toTP("jqx-grid-cell");if(this.table&&0<this.table.length&&this.table[0].rows&&0<this.table[0].rows.length){var i=this.table[0].rows[0];this.table[0].style.top="0px";for(var r=0;r<i.cells.length;r++){var s,l,o,a=te(i.cells[r]);"none"==a.css("display")||e||(a[0].checkbox=null,a[0].button=null,a[0].className=t,e=!0,a[0].innerHTML="",(s=te("<span style='white-space: nowrap; float: left; margin-left: 50%; position: relative;'></span>")).text(this.gridlocalization.emptydatastring),a.append(s),l=0,this.oldhscroll||(l=parseInt(this.table[0].style.marginLeft),this.rtl&&(a.css("z-index",999),a.css("overflow","visible"))),s.css("left",-l-s.width()/2),s.css("top",this._gettableheight()/2-s.height()/2),te.jqx.browser.msie&&te.jqx.browser.version<8&&(s.css("margin-left","0px"),s.css("left",this.host.width()/2-s.width()/2)),o=Math.abs(parseInt(this.table[0].style.top)),isNaN(o)&&(o=0),te(i).height(this._gettableheight()+o),a.css("margin-left","0px"),a.width(this.host.width()),this.table.width()<this.host.width()&&this.table.width(this.host.width())),a.addClass(this.toThemeProperty("jqx-grid-empty-cell"))}}}},_clearvisualrows:function(){var e=this.virtualsizeinfo.visiblerecords,t=this.hScrollInstance.value,i=parseInt(t),r=this.groupable&&0<this.groups.length;if(this.columns.records)for(var s=0;s<e;s++)this._clearvisualrow(i,r,s,0,this.columns.records.length)},_iscellselected:function(e,t,i){var r=!1,s=0;if(this.virtualmode&&this.pageable&&this.groupable&&0<this.groups.length&&(s=this.dataview.pagesize*this.dataview.pagenum),0<this.groups.length&&this.pageable&&this.groupable){var l=this.getrowboundindexbyid(t.bounddata.uid);if(-1==l)return!1;for(var o in this.selectedcells)o==l+"_"+i&&(r=!0);return r}if(e&&null!=t.bounddata)if("singlerow"!=this.selectionmode){if(0<this.dataview.filters.length)if(this.virtualmode||null==t.bounddata.dataindex)for(var o in this.selectedcells)o==s+t.bounddata.boundindex+"_"+i&&(r=!0);else for(var o in this.selectedcells)o==s+t.bounddata.dataindex+"_"+i&&(r=!0);else for(var o in this.selectedcells)if(o==s+t.bounddata.boundindex+"_"+i){r=!0;break}}else if(0<this.dataview.filters.length){if(this.virtualmode||null==t.bounddata.dataindex){for(var o in this.selectedcells)if(o==s+t.bounddata.boundindex+"_"+i){r=!0;break}}else for(var o in this.selectedcells)if(o==s+t.bounddata.dataindex+"_"+i){r=!0;break}}else for(var o in this.selectedcells)if(o==s+t.bounddata.boundindex==this.selectedrowindex){r=!0;break}return r},_isrowselected:function(e,t){var i=!1,r=0;if(this.virtualmode&&this.pageable&&this.groupable&&0<this.groups.length&&(r=this.dataview.pagesize*this.dataview.pagenum),this.groupable&&0<this.groups.length&&this.pageable){var s=this.getrowboundindexbyid(t.bounddata.uid);return null==s||-1==s?!1:(-1!=this.selectedrowindexes.indexOf(s)&&(i=!0),i=i||s==this.selectedrowindex&&-1!=this.selectedrowindex)}return e&&null!=t.bounddata&&("singlerow"!=this.selectionmode?!(0<this.dataview.filters.length)||this.virtualmode||null==t.bounddata.dataindex?-1!=this.selectedrowindexes.indexOf(r+t.bounddata.boundindex)&&(i=!0):-1!=this.selectedrowindexes.indexOf(r+t.bounddata.dataindex)&&(i=!0):0<this.dataview.filters.length?this.virtualmode||null==t.bounddata.dataindex?-1!=this.selectedrowindexes.indexOf(r+t.bounddata.boundindex)&&(i=!0):-1!=this.selectedrowindexes.indexOf(r+t.bounddata.dataindex)&&(i=!0):r+t.bounddata.boundindex==this.selectedrowindex&&(i=!0)),i},_rendervisualcell:function(e,t,i,r,s,l,o,a,n,d,h,c){var u=this.columns.records[d];if(u.hidden||u.adaptivehidden){(m=a.cells[d]).innerHTML=""}else{var g,p=this._getcellvalue(u,n),m=a.cells[d],w=t;-1!=this.selectionmode.indexOf("cell")&&(i=0<this.dataview.filters.length?!!this.selectedcells[n.bounddata.dataindex+"_"+u.datafield]:!!this.selectedcells[n.boundindex+"_"+u.datafield],this.editcell&&this.editcell.row===n.boundindex&&this.editcell.column===u.datafield&&"checkbox"!==u.columntype&&(i=!1),(this.virtualmode||this.groupable&&0<this.groups.length&&this.pageable)&&(i=this._iscellselected(!0,n,u.datafield))),""!=u.cellclassname&&u.cellclassname&&("string"==typeof u.cellclassname?w+=" "+u.cellclassname:(g=u.cellclassname(this.getboundindex(n),u.datafield,p,n.bounddata))&&(w+=" "+g));var v,f,b,x=this.showsortcolumnbackground&&this.sortcolumn&&u.displayfield==this.sortcolumn;if("many"===this.sortmode&&this.showsortcolumnbackground)for(var y=this.getsortcolumns(),_=0;_<y.length;_++)u.displayfield===y[_].dataField&&(x=!0);x&&(w+=" "+this.toTP("jqx-grid-cell-sort")),u.filter&&this.showfiltercolumnbackground&&(w+=" "+this.toTP("jqx-grid-cell-filter")),n.bounddata.totalsrow&&(w+=" "+this.toTP("jqx-grid-cell-pinned")),(u.pinned&&this.showpinnedcolumnbackground||u.grouped)&&(l&&n.bounddata.totalsrow||(w+=" "+this.toTP("jqx-grid-cell-pinned"))),!this.altrows||null!=n.group||(v=n.visibleindex)>=this.altstart&&(this.altstart+v)%(1+this.altstep)==0&&(w+=x?" "+this.toTP("jqx-grid-cell-sort-alt"):" "+this.toTP("jqx-grid-cell-alt"),u.filter&&this.showfiltercolumnbackground&&(w+=" "+this.toTP("jqx-grid-cell-filter-alt")),u.pinned&&this.showpinnedcolumnbackground&&(w+=" "+this.toTP("jqx-grid-cell-pinned-alt"))),d<=o?(l||this.rowdetails||this.pageable&&this.virtualmode)&&(f=te(m),b=this.columns.records[d].width,m.style.width!=parseInt(b)+"px"&&f.width(b)):(l||this.rowdetails)&&this._hiddencolumns&&(f=te(m),b=this.columns.records[d].width,parseInt(m.style.width)!=b&&f.width(b));var q=!0;if(this.rowdetails&&r&&(s&&!l?w+=" "+this.toTP("jqx-grid-details-cell"):l&&(w+=" "+this.toTP("jqx-grid-group-details-cell")),this.showrowdetailscolumn))if(this.rtl){if(null==n.group&&d==a.cells.length-o-1){j=this.toThemeProperty("jqx-icon-arrow-down");return s?(w+=" "+this.toTP("jqx-grid-group-expand-rtl"),w+=" "+j):(w+=" "+this.toTP("jqx-grid-group-collapse-rtl"),w+=" "+(j=this.toThemeProperty("jqx-icon-arrow-left"))),q=!1,m.title="",m.innerHTML="",void(m.className!=w&&(m.className=w))}}else if(null==n.group&&d==o&&!n.bounddata.totalsrow){var j=this.toThemeProperty("jqx-icon-arrow-down");return s?(w+=" "+this.toTP("jqx-grid-group-expand"),w+=" "+j):(w+=" "+this.toTP("jqx-grid-group-collapse"),w+=" "+(j=this.toThemeProperty("jqx-icon-arrow-right"))),q=!1,m.title="",m.innerHTML="",void(m.className!=w&&(m.className=w))}if(i&&q&&o<=d&&(w+=" "+this.toTP("jqx-grid-cell-selected"),w+=" "+this.toTP("jqx-fill-state-pressed")),m.className!=w&&(m.className=w),u._applyCellStyle(m),null!=n.group)return p="",m.title="",void(m.innerHTML="");e(this,u,n,p,m,c)}},_rendercell:function(e,t,i,r,s,l){var o=r+"_"+t.visibleindex;if("number"!=t.columntype&&null==t.cellsrenderer||(o=i.uniqueid+"_"+t.visibleindex),"number"==t.columntype&&(r=i.visibleindex),"adaptive"===t.columntype&&(r="..."),t._applyCellStyle(s),e.showrowlines?s.style.borderBottomColor="":s.style.borderBottomColor="transparent",e.showcolumnheaderlines?(t.element.style.borderRightColor="",t.element.style.boxShadow=""):(t.element.style.borderRightColor="transparent",t.element.style.boxShadow="none"),e.showcolumnlines?s.style.borderRightColor="":s.style.borderRightColor="transparent",e.editcell&&null==e.editrow)if("selectedrow"==e.editmode&&t.editable&&e.editable){if(e.editcell.row==e.getboundindex(i)&&e._showcelleditor)return e.hScrollInstance.isScrolling()||e.vScrollInstance.isScrolling()?e._showcelleditor(e.editcell.row,t,s,!1,!1):e._showcelleditor(e.editcell.row,t,s,e.editcell.init),void(s.className+=" "+e.toTP("jqx-grid-cell-edit"))}else if(e.editcell.row==e.getboundindex(i)&&e.editcell.column==t.datafield&&(e.editcell.element=s,e.editcell.editing&&e._showcelleditor))return e.hScrollInstance.isScrolling()||e.vScrollInstance.isScrolling()?e._showcelleditor(e.editcell.row,t,e.editcell.element,e.editcell.init,!1):e._showcelleditor(e.editcell.row,t,e.editcell.element,e.editcell.init),void(s.className+=" "+e.toTP("jqx-grid-cell-edit"));var a=e._defaultcellsrenderer(r,t),n=e._cellscache[o];if(n){if("checkbox"==t.columntype){if(e.host.jqxCheckBox){""===r&&(r=null);var d,h=0==s.innerHTML.toString().length;return!s.checkbox||e.groupable||h?e._rendercheckboxcell(e,s,t,i,r):(s.checkboxrow=e.getboundindex(i),""==r&&(r=!1),"1"==r&&(r=!0),"0"==r&&(r=!1),1==r&&(r=!0),0==r&&(r=!1),"true"==r&&(r=!0),"false"==r&&(r=!1),null!=r||t.threestatecheckbox||(r=!1),t.checkboxcolumn&&(r=!1,0<e.dataview.filters.length&&!e.virtualmode&&null!=i.bounddata.dataindex?-1!=e.selectedrowindexes.indexOf(i.bounddata.dataindex)&&(r=!0):-1!=e.selectedrowindexes.indexOf(i.bounddata.boundindex)&&(r=!0)),e.disabled||(s.checkboxinstance?s.checkboxinstance._setState(r):s.checkbox.jqxCheckBox("_setState",r))),void(null==t.cellsrenderer||null!=(d=t.cellsrenderer(e.getboundindex(i),t.datafield,r,a,t.getcolumnproperties(),i.bounddata))&&(s.innerHTML=d))}}else if("button"==t.columntype){if(e.host.jqxButton)return""==r&&(r=!1),null!=t.cellsrenderer&&(r=t.cellsrenderer(e.getboundindex(i),t.datafield,r,a,t.getcolumnproperties(),i.bounddata)),""==s.innerHTML&&(s.buttonrow=e.getboundindex(i),s.button=null,e._renderbuttoncell(e,s,t,i,r)),void(s.button&&!e.groupable?(s.buttonrow=e.getboundindex(i),s.button.val(r)):e._renderbuttoncell(e,s,t,i,r))}else if(("progressbar"==t.columntype||"rating"===t.columntype)&&e.host.jqxButton)return""==r&&(r=!1),null!=t.cellsrenderer&&(r=t.cellsrenderer(e.getboundindex(i),t.datafield,r,a,t.getcolumnproperties(),i.bounddata)),""==s.innerHTML&&(s.progressrow=e.getboundindex(i),s.progress=null,e._renderprogresscell(e,s,t,i,r)),void(s.progress&&!e.groupable?(s.progressrow=e.getboundindex(i),s.progress.val(r)):e._renderprogresscell(e,s,t,i,r));if(t.createwidget){if(""==s.innerHTML&&(s.widgetrow=e.getboundindex(i),s.widget=null,t.widget=null,e._renderwidgetcell(e,s,t,i,r)),s.widget&&!e.groupable){if(s.widgetrow=e.getboundindex(i),!t.initwidget)throw new Error("jqxGrid: 'initwidget' column function is not implemented. Please, implement 'initwidget'");t.initwidget(e.getboundindex(i),t.datafield,r,s.firstChild)}else e._renderwidgetcell(e,s,t,i,r);return}var c=n.element;return null!=t.cellsrenderer||s.childNodes&&0==s.childNodes.length||e.groupable||e.rowdetails?s.innerHTML!=c&&(s.innerHTML=c):0<=s.innerHTML.indexOf("editor")?s.innerHTML=c:l?(g=c.indexOf(">"),p=c.indexOf("</"),m=c.substring(g+1,p),w=s.childNodes[0],0<=m.indexOf(">")?s.innerHTML=c:w.childNodes[0]?m!=w.childNodes[0].nodeValue&&(0<=m.indexOf("&")?s.innerHTML=c:w.childNodes[0].nodeValue=m):(v=document.createTextNode(m),w.appendChild(v))):s.innerHTML!=c&&(s.innerHTML=c),void(e.enabletooltips&&t.enabletooltips&&(s.title=n.title))}if("checkbox"==t.columntype)return e._rendercheckboxcell(e,s,t,i,r),e._cellscache[o]={element:"",title:r},void(e.enabletooltips&&t.enabletooltips&&(s.title=""+r));if("button"==t.columntype)return null!=t.cellsrenderer&&(r=t.cellsrenderer(e.getboundindex(i),t.datafield,r,a,t.getcolumnproperties(),i.bounddata)),e._renderbuttoncell(e,s,t,i,r),e._cellscache[o]={element:"",title:r},void(e.enabletooltips&&t.enabletooltips&&(s.title=""+r));if("progressbar"==t.columntype||"rating"===t.columntype)return null!=t.cellsrenderer&&(r=t.cellsrenderer(e.getboundindex(i),t.datafield,r,a,t.getcolumnproperties(),i.bounddata)),e._renderprogresscell(e,s,t,i,r),e._cellscache[o]={element:"",title:r},void(e.enabletooltips&&t.enabletooltips&&(s.title=""+r));if("number"==t.columntype&&(r=i.visibleindex),t.createwidget)return null!=t.cellsrenderer&&(r=t.cellsrenderer(e.getboundindex(i),t.datafield,r,a,t.getcolumnproperties(),i.bounddata)),e._renderwidgetcell(e,s,t,i,r),e._cellscache[o]={element:"",title:r},void(e.enabletooltips&&t.enabletooltips&&(s.title=r));c=null;if(null!=t.cellsrenderer){if((c=t.cellsrenderer(e.getboundindex(i),t.datafield,r,a,t.getcolumnproperties(),i.bounddata))&&(0<=c.indexOf("<jqx-")||0<=c.indexOf(" ng-")))return void(e.toCompile&&e.toCompile.push({cell:s,value:c,row:e.getboundindex(i)}))}else c=a;null==c&&(c=a);var u,g,p,m,w,v,f=r;return e.enabletooltips&&t.enabletooltips&&(""!=t.cellsformat&&te.jqx.dataFormat&&(te.jqx.dataFormat.isDate(r)?f=te.jqx.dataFormat.formatdate(f,t.cellsformat,e.gridlocalization):te.jqx.dataFormat.isNumber(r)&&(f=te.jqx.dataFormat.formatnumber(f,t.cellsformat,e.gridlocalization))),s.title=f),e.WinJS?te(s).html(c):0<=(u=s.innerHTML).indexOf("editor")||null!=t.cellsrenderer||e.groupable||e.virtualmode?s.innerHTML=c:0<u.length?(g=c.indexOf(">"),p=c.indexOf("</"),m=c.substring(g+1,p),w=s.childNodes[0],0<=m.indexOf(">")?s.innerHTML=c:w.childNodes[0]?m!=w.childNodes[0].nodeValue&&(0<=m.indexOf("&")||0<=u.indexOf("span")?s.innerHTML=c:w.childNodes[0].nodeValue=m):(v=document.createTextNode(m),w.appendChild(v))):u!=c&&(s.innerHTML=c),e._cellscache[o]={element:s.innerHTML,title:f},!0},_isIE10:function(){var e,t;return null==this._browser&&("msie"==(e=te.jqx.utilities.getBrowser()).browser&&9<parseInt(e.version)?this._browser=!0:(this._browser=!1,"msie"==e.browser&&(t="Browser CodeName: "+navigator.appCodeName,t+="Browser Name: "+navigator.appName,t+="Browser Version: "+navigator.appVersion,t+="Platform: "+navigator.platform,-1!=(t+="User-agent header: "+navigator.userAgent).indexOf("Zune 4.7")&&(this._browser=!0)))),this._browser},_renderinlinecell:function(e,t,i,r,s){te(t);t.innerHTML='<div style="position: absolute;"></div>'},_rendercheckboxcell:function(d,h,c,e,t){var i,r;d.host.jqxCheckBox&&(i=te(h),""===t&&(t=!!c.threestatecheckbox&&null),null!==t||c.threestatecheckbox||(t=!1),"1"==t&&(t=!0),"0"==t&&(t=!1),1==t&&(t=!0),0==t&&(t=!1),"true"==t&&(t=!0),"false"==t&&(t=!1),c.checkboxcolumn&&(t=!1,r=this.getboundindex(e),-1!=this.selectedrowindexes.indexOf(r)&&(t=!0)),0==i.find(".jqx-checkbox").length?(h.innerHTML='<div style="position: absolute; top: 50%; left: 50%; margin-top: -9px; margin-left: -12px;"></div>',te(h.firstChild).jqxCheckBox({disabled:d.disabled,_canFocus:!1,hasInput:!1,hasThreeStates:c.threestatecheckbox,enableContainerClick:!1,animationShowDelay:0,animationHideDelay:0,locked:!0,theme:d.theme,checked:t}),this.enabletooltips&&c.enabletooltips&&(h.title=""+t),this.editable&&c.editable&&te(h.firstChild).jqxCheckBox({locked:!1}),c.checkboxcolumn&&te(h.firstChild).jqxCheckBox({locked:!1}),h.checkbox=te(h.firstChild),h.checkboxinstance=h.checkbox.data().jqxCheckBox.instance,h.checkboxrow=this.getboundindex(e),te.data(h.firstChild,"jqxCheckBox").instance.updated=function(e,t,i){if(d.disabled){t=i;for(var r=d.table[0].rows.length,s=d._getcolumnindex(c.datafield),l=0;l<r;l++){(n=d.table[0].rows[l].cells[s].firstChild)&&te(n).jqxCheckBox({disabled:d.disabled})}}if(c.editable&&!d.disabled){var o,a,r=d.table[0].rows.length,s=d._getcolumnindex(c.datafield);if(null==d.editrow){if(c.cellbeginedit)if(0==c.cellbeginedit(h.checkboxrow,c.datafield,c.columntype,!t))return void d.setcellvalue(h.checkboxrow,c.datafield,!t,!0);if(!c.cellvaluechanging||null!=(o=c.cellvaluechanging(h.checkboxrow,c.datafield,c.columntype,i,t))&&(t=o),"selectedrow"!==d.editmode)for(var n,l=0;l<r;l++){(n=d.table[0].rows[l].cells[s].firstChild)&&te(n).jqxCheckBox("destroy")}d.editcell&&0==d.editcell.validated?d.setcellvalue(h.checkboxrow,c.datafield,!t,!0):"selectedrow"!==d.editmode||null==d.editcell?(a=d.getrowdata(h.checkboxrow),d._raiseEvent(17,{rowindex:h.checkboxrow,row:a,datafield:c.datafield,value:i,columntype:c.columntype}),d.setcellvalue(h.checkboxrow,c.datafield,t,!0),d._raiseEvent(18,{rowindex:h.checkboxrow,row:a,datafield:c.datafield,oldvalue:i,value:t,columntype:c.columntype})):d.setcellvalue(h.checkboxrow,c.datafield,t,!1,!1),c.cellendedit&&c.cellendedit(h.checkboxrow,c.datafield,c.columntype,t)}}else c.checkboxcolumn&&(d.editcell&&d.endcelledit(d.editcell.row,d.editcell.column,!1,!0),d.disabled||(t?d.selectrow(h.checkboxrow):d.unselectrow(h.checkboxrow),d.autosavestate&&d.savestate&&d.savestate()))}):(h.checkboxrow=this.getboundindex(e),te(h.firstChild).jqxCheckBox("_setState",t,!(this.editable&&c.editable||c.checkboxcolumn))))},_renderwidgetcell:function(e,t,i,r,s){0==te(t).find(".jqx-grid-widget").length?(t.innerHTML='<div class="jqx-grid-widget" style="opacity: 0.99; position: absolute; width: 100%; height:100%; top: 0%; left: 0%; padding: 0px;"></div>',i.createwidget(r,i.datafield,s,t.firstChild),te(t.firstChild).attr("hideFocus","true"),te(t.firstChild).children().addClass("jqx-grid-widget"),t.widget=te(t.firstChild),t.widgetrow=e.getboundindex(r),i.widget=te(t.firstChild)):(i.initwidget(e.getboundindex(r),i.datafield,s,t.firstChild),t.widgetrow=e.getboundindex(r),te(t.firstChild).val(s))},_renderprogresscell:function(e,t,i,r,s){var l,o=te(t);if("rating"===i.columntype){e._linkadded||((l=document.createElement("link")).rel="stylesheet",l.href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css",document.head.appendChild(l),e._linkadded=!0),i.ratingmax||(i.ratingmax=5);for(var a="",n=0;n<i.ratingmax;n++)a+=n+1<=s?'<span style="color: rgba(255, 165, 0, 1);" class="fa fa-star checked"></span>':'<span style="color: rgba(255, 165, 0, .3);" class="fa fa-star"></span>';var d=i.cellsalign;return"right"===d&&(d="flex-end"),void(t.innerHTML='<div style="display: flex; width: 100%; height: 100%; justify-content: '+d+'; padding: 5px; box-sizing: border-box; font-size: 16px; align-items: center;">'+a+"</div>")}""==s&&(s=!1),0==o.find(".jqx-progress").length?(t.innerHTML='<progress class="jqx-progress" max="100" style="opacity: 0.99; position: absolute; top: 10%; left: 10%; width:80%; height:80%; padding: 0px;"/>',te(t.firstChild).val(s),t.progress=te(t.firstChild),t.progressrow=e.getboundindex(r)):(t.progressrow=e.getboundindex(r),te(t.firstChild).val(s))},_renderbuttoncell:function(e,t,i,r,s){var l;e.host.jqxButton&&(""==s&&(s=!1),0==te(t).find(".jqx-button").length?(t.innerHTML='<input type="button" style="opacity: 0.99; position: absolute; top: 0%; left: 0%; padding: 0px; margin-top: 2px; margin-left: 2px;"/>',te(t.firstChild).val(s),te(t.firstChild).attr("hideFocus","true"),te(t.firstChild).jqxButton({disabled:e.disabled,theme:e.theme,height:e.rowsheight-4,width:i.width-4}),t.button=te(t.firstChild),t.buttonrow=e.getboundindex(r),this.isTouchDevice()?(l=te.jqx.mobile.getTouchEventName("touchend"),e.addHandler(te(t.firstChild),l,function(e){i.buttonclick&&i.buttonclick(t.buttonrow,e)})):e.addHandler(te(t.firstChild),"click",function(e){i.buttonclick&&i.buttonclick(t.buttonrow,e)})):(t.buttonrow=e.getboundindex(r),te(t.firstChild).val(s)))},_clearvisualrow:function(e,t,i,r,s){var l=this.toTP("jqx-grid-cell");t&&(l=" "+this.toTP("jqx-grid-group-cell")),l+=" "+this.toTP("jqx-grid-cleared-cell");for(var o,a,n,d=this.table[0].rows,h=0;h<r+s;h++){d[i]&&((o=d[i].cells[h]).className!=l&&(o.className=l),a=this.columns.records[h],this._horizontalvalue==e||a.pinned||1==this.oldhscroll&&(o.style.marginLeft=-e+"px"),n=a.width,a.adaptivewidth&&(n=a.adaptivewidth),n<a.minwidth&&(n=a.minwidth),n>a.maxwidth&&(n=a.maxwidth),parseInt(o.style.width)!=n&&(te(o)[0].style.width="auto"!=n?n+"px":n),""!=o.title&&(o.title=""),""!=o.innerHTML&&(o.innerHTML=""))}d[i]&&parseInt(d[i].style.height)!=this.rowsheight&&(d[i].style.height=parseInt(this.rowsheight)+"px")},_findgroupstate:function(e){var t=this._findgroup(e);return null!=t&&t.expanded},_findgroup:function(e){return this.expandedgroups[e]?this.expandedgroups[e]:null},_clearcaches:function(){this._columnsbydatafield=new Array,this._pagescache=new Array,this._pageviews=new Array,this._cellscache=new Array,this.heights=new Array,this.hiddens=new Array,this.hiddenboundrows=new Array,this.heightboundrows=new Array,this.detailboundrows=new Array,this.details=new Array,this.expandedgroups=new Array,this._rowdetailscache=new Array,this._rowdetailselementscache=new Array,te.jqx.dataFormat&&te.jqx.dataFormat.cleardatescache(),this.tableheight=null},_getColumnText:function(e){if(null==this._columnsbydatafield&&(this._columnsbydatafield=new Array),this._columnsbydatafield[e])return this._columnsbydatafield[e];var t=e,i=null;return te.each(this.columns.records,function(){if(this.datafield==e||this.displayfield==e)return t=this.text,i=this,!1}),this._columnsbydatafield[e]={label:t,column:i},this._columnsbydatafield[e]},_getcolumnbydatafield:function(e){if(null==this.__columnsbydatafield&&(this.__columnsbydatafield=new Array),this.__columnsbydatafield[e])return this.__columnsbydatafield[e];var t=null;return te.each(this.columns.records,function(){if(this.datafield==e||this.displayfield==e)return this.text,t=this,!1}),this.__columnsbydatafield[e]=t,this.__columnsbydatafield[e]},isscrollingvertically:function(){return this.vScrollBar.jqxScrollBar("isScrolling")},_renderrowdetails:function(e,t,i,r,s,l){if(null!=t){var o=te(t),a=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth;if(this.groupable&&0<this.groups.length)for(var n,d=0;d<=s;d++){(n=te(t.cells[d]))[0].innerHTML="",n[0].className="jqx-grid-details-cell"}if("none"==(n=te(t.cells[0]))[0].style.display){for(var h=t.cells[0],c=2;null!=h&&"none"==h.style.display&&c<10;)h=t.cells[0+c-1],c++;n=te(h)}if(this.rtl)for(var u=r;u<s;u++)t.cells[u].innerHTML="",t.cells[u].className="jqx-grid-details-cell";n.css("width","100%"),o.height(i.rowdetailsheight),n[0].className=e;var g,p,m,w,v,f,b,x,y=this.getboundindex(i),_=y+"_";this._rowdetailscache[_]?(g=this._rowdetailscache[_].html,this.initrowdetails?this._rowdetailscache[_].element&&(m=this._rowdetailscache[_].element,w=n.coord(),v=this.gridcontent.coord(),f=parseInt(w.top)-parseInt(v.top),b=parseInt(w.left)-parseInt(v.left),this.rtl&&(b=0),te(m).css("top",f),te(m).css("left",b),te(m).css("display","block"),te(m).width(this.host.width()-a),this.layoutrowdetails&&this.layoutrowdetails(y,m,this.element,this.getrowdata(y))):n[0].innerHTML=g):(n[0].innerHTML="",this.enablerowdetailsindent||(a=0),p='<div class="jqx-enableselect" role="rowgroup" style="border: none; overflow: hidden; width: 100%; height: 100%; margin-left: '+a+'px;">'+i.rowdetails+"</div>",this.rtl&&(p='<div class="jqx-enableselect" role="rowgroup" style="border: none; overflow: hidden; width: 100%; height: 100%; margin-left: 0px; margin-right: '+a+'px;">'+i.rowdetails+"</div>"),this._rowdetailscache[_]={id:t.id,html:p},this.initrowdetails?(m=te(p)[0],te(this.gridcontent).prepend(te(m)),te(m).css("position","absolute"),te(m).width(this.host.width()-a),te(m).height(n.height()),w=n.coord(),te(m).css("z-index",1799),this.isTouchDevice()&&te(m).css("z-index",1999),te(m).addClass(this.toThemeProperty("jqx-widget-content")),w=n.coord(),v=this.gridcontent.coord(),f=parseInt(w.top)-parseInt(v.top),b=parseInt(w.left)-parseInt(v.left),te(m).css("top",f),te(m).css("left",b),this.content[0].scrollTop=0,this.content[0].scrollLeft=0,""!=(x=te(te(m).children()[0]))[0].id&&(x[0].id=x[0].id+y),this.initrowdetails(y,m,this.element,this.getrowdata(y)),this._rowdetailscache[_].element=m,this._rowdetailselementscache[y]=m):n[0].innerHTML=p)}},_defaultcellsrenderer:function(e,t){""!=t.cellsformat&&te.jqx.dataFormat&&(te.jqx.dataFormat.isDate(e)?e=te.jqx.dataFormat.formatdate(e,t.cellsformat,this.gridlocalization):te.jqx.dataFormat.isNumber(e)&&(e=te.jqx.dataFormat.formatnumber(e,t.cellsformat,this.gridlocalization)));var i="8px";if(31!=this.rowsheight&&((i=this.rowsheight/2-this._cellheight/2)<0&&(i=4),i+="px"),this.enableellipsis){if("center"==t.cellsalign||"middle"==t.cellsalign)return'<div class="jqx-grid-cell-middle-align" style="margin-top: '+i+';">'+e+"</div>";if("left"==t.cellsalign)return'<div class="jqx-grid-cell-left-align" style="margin-top: '+i+';">'+e+"</div>";if("right"==t.cellsalign)return'<div class="jqx-grid-cell-right-align" style="margin-top: '+i+';">'+e+"</div>"}return"center"==t.cellsalign||"middle"==t.cellsalign?'<div style="text-align: center; margin-top: '+i+';">'+e+"</div>":'<span style="margin-left: 4px; margin-right: 2px; margin-top: '+i+"; float: "+t.cellsalign+';">'+e+"</span>"},getcelltext:function(e,t){if(null==e||null==t)return null;var i=this.getcellvalue(e,t),r=this.getcolumn(t);return r&&""!=r.cellsformat&&te.jqx.dataFormat&&(te.jqx.dataFormat.isDate(i)?i=te.jqx.dataFormat.formatdate(i,r.cellsformat,this.gridlocalization):te.jqx.dataFormat.isNumber(i)&&(i=te.jqx.dataFormat.formatnumber(i,r.cellsformat,this.gridlocalization))),i},getcelltextbyid:function(e,t){if(null==e||null==t)return null;var i=this.getcellvaluebyid(e,t),r=this.getcolumn(t);return r&&""!=r.cellsformat&&te.jqx.dataFormat&&(te.jqx.dataFormat.isDate(i)?i=te.jqx.dataFormat.formatdate(i,r.cellsformat,this.gridlocalization):te.jqx.dataFormat.isNumber(i)&&(i=te.jqx.dataFormat.formatnumber(i,r.cellsformat,this.gridlocalization))),i},_getcellvalue:function(e,t){var i=null,i=t.bounddata[e.datafield];return null!=e.displayfield&&(i=t.bounddata[e.displayfield]),null==i&&(i=""),i},getcell:function(e,t){if(null==e||null==t)return null;var i=parseInt(e),r=e,s="";return isNaN(i)||(r=this.getrowdata(i)),null!=r&&(s=r[t]),this._getcellresult(s,e,t)},getrenderedcell:function(e,t){if(null==e||null==t)return null;var i=parseInt(e),r=e,s="";return isNaN(i)||(r=this.getrenderedrowdata(i)),null!=r&&(s=r[t]),this._getcellresult(s,e,t)},_getcellresult:function(e,t,i){var r=this.getcolumn(i);if(null==r||null==r)return null;var s=r.getcolumnproperties(),l=s.hidden,o=s.width,a=s.pinned,n=s.cellsalign,d=s.cellsformat,h=this.getrowheight(t);return 0==h?null:{value:e,row:t,column:i,datafield:i,width:o,height:h,hidden:l,pinned:a,align:n,format:d}},setcellvaluebyid:function(e,t,i,r,s){var l=this.getrowboundindexbyid(e);return this.setcellvalue(l,t,i,r,s)},getcellvaluebyid:function(e,t){var i=this.getrowboundindexbyid(e);return this.getcellvalue(i,t)},setcellvalue:function(t,i,e,r,s){if(null==t||null==i)return!1;var l=parseInt(t),o=t;isNaN(l)||(o=this.getrowdata(l));var a=!1;this.filterable&&this._initfilterpanel&&this.dataview.filters.length&&(a=!0),this.virtualmode&&(this._pagescache=new Array),this.sortcache&&(this.sortcache={});var n="",d="";if(null==o||o[i]===e)return this._updating||0==r||this._renderrows(this.virtualsizeinfo),!1;if(null!==o[i]||""!==e){var h,c,u=this._getcolumnbydatafield(i),g="string";if(this.source||(this.source=new te.jqx.dataAdapter({})),(x=this.source.datafields||(this.source._source?this.source._source.datafields:null))&&(h="",te.each(x,function(){if(this.name==u.displayfield)return this.type&&(h=this.type),!1}),h&&(g=h),d=o[u.displayfield]),n=o[i],u.nullable&&(null==e||""===e||!u.nullable||void 0!==e.label)||(te.jqx.dataFormat.isNumber(n)||"number"==g||"float"==g||"int"==g||"decimal"==g&&"date"!=g?(this.gridlocalization&&","==this.gridlocalization.decimalseparator&&e&&e.indexOf&&0<=e.indexOf(",")&&(e=e.replace(",",".")),e=new Number(e),e=parseFloat(e),isNaN(e)&&(e=0)):!te.jqx.dataFormat.isDate(n)&&"date"!=g||""==e||(c=e,"Invalid Date"!=(c=new Date(c))&&null!=c?e=c:"Invalid Date"==c&&(e=c=new Date)),o[i]!==e)){var p,m=this.source&&this.source._source.localdata&&"observableArray"===this.source._source.localdata.name;o[i]=e,m&&((p=this.source._source.localdata)._updating||(p._updating=!0,p[t][i]=e,p._updating=!1));var w=this.getrenderedrowdata(l,!0);if(w){if(null!=(w[i]=e)&&null!=e.label&&(o[(u=this._getcolumnbydatafield(i)).displayfield]=e.label,w[u.displayfield]=e.label,o[i]=e.value,w[i]=e.value,m&&!p._updating&&(p._updating=!0,p[t][i]=e.value,p[t][u.displayfield]=e.label,p._updating=!1)),a&&null!=o.dataindex&&(o.dataindex,null!=(this.dataview.cachedrecords[o.dataindex][i]=e)&&null!=e.label&&(this.dataview.cachedrecords[o.dataindex][i]=e.value,this.dataview.cachedrecords[o.dataindex][u.displayfield]=e.label)),this.source&&this.source._knockoutdatasource&&!this._updateFromAdapter&&this.autokoupdates&&this.source._source._localdata){var v=l;a&&null!=o.dataindex&&(v=o.dataindex);var f=this.source._source._localdata()[v];this.source.suspendKO=!0;var b=f;if(b[i]&&b[i].subscribe)null!=e&&null!=e.label?(b[u.displayfield](e.label),b[i](e.value)):b[i](e);else{var x=this.source._source.datafields,y=null;if(x&&te.each(x,function(){if(this.name==i)return y=this.map,!1}),null==y)null!=e&&null!=e.label?(b[i]=e.value,b[u.displayfield]=e.label):b[i]=e;else{var _=y.split(this.source.mapChar);if(0<_.length){for(var q=b,j=0;j<_.length-1;j++)q=q[_[j]];q[_[_.length-1]]=e}}this.source._source._localdata.replace(f,te.extend({},b))}this.source.suspendKO=!1}if(this.sortcolumn&&this.dataview.sortby&&!this._updating){var S=this.getsortinformation();if(this.sortcolumn==i&&"many"!==this.sortmode)this.dataview.clearsortdata(),this.dataview.sortby(S.sortcolumn,S.sortdirection.ascending);else if("many"===this.sortmode){var z=this.getsortcolumns();this.dataview.clearsortdata(),this.sortby(null);for(var k=0;k<z.length;k++)this.sortby(z[k].dataField,z[k].ascending)}}else this._updating||this.dataview.sortby&&this.dataview.sortcache[i]&&(this.dataview.sortcache[i]=null);if(this._cellscache=new Array,this._pagescache=new Array,this.source.updaterow&&(null==s||1==s)){var C=this.that;try{var I=this.getrowid(l);null==this.source.updaterow(I,o,function(e){0==e&&(C.setcellvalue(t,i,n,!0,!1),n!=d&&C.setcellvalue(t,C.getcolumn(i).displayfield,d,!0,!1))})&&0}catch(e){return C.setcellvalue(t,i,n,!0,!1),void(n!=d&&C.setcellvalue(t,C.getcolumn(i).displayfield,d,!0,!1))}}var T,B,P,H=this.vScrollInstance.value;return this._updating&&1!=r&&(r=!1),1!=r&&null!=r||(C=this.that,T=function(){C.pageable&&C.updatepagerdetails&&(C.updatepagerdetails(),(C.autoheight||C.autorowheight)&&C._updatepageviews())},B=this.groupable&&0<this.groups.length,a&&!B?((this.autoheight||this.autorowheight)&&(this.prerenderrequired=!0),this.dataview.refresh(),this.rendergridcontent(!0,!1),T(),this._renderrows(this.virtualsizeinfo)):this.sortcolumn&&!B?((this.autoheight||this.autorowheight)&&(this.prerenderrequired=!0),this.dataview.reloaddata(),this.rendergridcontent(!0,!1),T(),this._renderrows(this.virtualsizeinfo)):this.groupable&&0<this.groups.length?((this.autoheight||this.autorowheight)&&(this.prerenderrequired=!0),this.pageable&&-1!=this.groups.indexOf(i)?(this._pagescache=new Array,this._cellscache=new Array,this.dataview.refresh(),this._render(!0,!0,!1,!1)):(this._pagescache=new Array,this._cellscache=new Array,this.dataview.updateview(),this._renderrows(this.virtualsizeinfo))):(this.dataview.updateview(),this._renderrows(this.virtualsizeinfo))),this.vScrollInstance.setPosition(H),this.showaggregates&&this._updatecolumnsaggregates&&this._updatecolumnsaggregates(),this.showfilterrow&&this.filterable&&this.filterrow&&("list"!=(P=this.getcolumn(i).filtertype)&&"checkedlist"!=P||this._updatelistfilters(!0)),this._raiseEvent(19,{rowindex:t,datafield:i,newvalue:e,value:e,oldvalue:n}),!0}}else this._updating||0==r||this._renderrows(this.virtualsizeinfo)}},getcellvalue:function(e,t){if(null==e||null==t)return null;var i=parseInt(e),r=e;return isNaN(i)||(r=this.getrowdata(i)),null==r?null:r[t]},getrows:function(){var e=this.dataview.records.length;if(this.virtualmode){for(var t=new Array,i=0;i<this.dataview.records.length;i++){var r=this.dataview.records[i];r&&t.push(r)}void 0===this.dataview.records.length&&te.each(this.dataview.records,function(){this&&t.push(this)});var s=0;return this.pageable&&(s=this.dataview.pagenum*this.dataview.pagesize),t.length>this.source._source.totalrecords-s?t.slice(0,this.source._source.totalrecords-s):t}if(this.dataview.sortdata){for(t=new Array,i=0;i<e;i++){var l=te.extend({},this.dataview.sortdata[i].value);t[i]=l}return t}return this.dataview.records},getrowboundindexbyid:function(e){var t=this.dataview.recordsbyid["id"+e];if(t&&t.boundindex)return this.getboundindex(t);for(var i=this.getboundrows(),r=0;r<i.length;r++)if(i[r]&&i[r].uid==e)return r;return-1},getrowdatabyid:function(e){var t=this.dataview.recordsbyid["id"+e];if(t)return t;var i=this.getrowboundindexbyid(e);return this.getboundrows()[i]},getrowdata:function(e){return null==e&&(e=0),this.virtualmode?this.dataview.records[e]:this.getboundrows()[e]},getrenderedrowdata:function(e,t){if(null==e&&(e=0),this.virtualmode){var i=this.getrowvisibleindex(e);return r=this.dataview.loadedrecords[i]}var r;return 0<=(i=this.getrowvisibleindex(e))?(this.groupable&&0<this.groups.length?r=this.dataview.loadedrecords[i]:(r=this.dataview.loadedrecords[i],!this.pageable||null!=t&&0!=t||(r=this.dataview.loadedrecords[this.dataview.pagesize*this.dataview.pagenum+e])),r):null},getboundrows:function(){return this.dataview.cachedrecords},getrowdisplayindex:function(e){for(var t=this.getdisplayrows(),i=0;i<t.length;i++)if(t[i])if(void 0!==t[i].dataindex){if(t[i].dataindex==e)return t[i].visibleindex}else if(t[i].boundindex==e)return t[i].visibleindex;return-1},getboundindex:function(e){var t=e.boundindex;return this.groupable&&0<this.groups.length&&this.pageable&&e.bounddata&&(t=this.getrowboundindexbyid(e.bounddata.uid)),0<this.dataview.filters.length&&(e.bounddata?void 0!==e.bounddata.dataindex&&(t=e.bounddata.dataindex):void 0!==e.dataindex&&(t=e.dataindex)),t},getrowboundindex:function(e){var t=this.getdisplayrows()[e];return t?void 0!==t.dataindex?t.dataindex:t.boundindex:-1},getdisplayrows:function(){return this.dataview.loadedrecords},getloadedrows:function(){return this.getdisplayrows()},getvisiblerowdata:function(e){var t=this.getvisiblerows();return t?t[e]:null},getloadedrowdata:function(e){var t=this.getloadedrows();return t?t[e]:null},getvisiblerows:function(){if(this.virtualmode)return this.dataview.loadedrecords;if(this.pageable){for(var e=[],t=0;t<this.dataview.pagesize;t++){if(null==(i=this.dataview.loadedrecords[t+this.dataview.pagesize*this.dataview.pagenum]))break;e.push(i)}return e}if(null==this._startboundindex||null==this._endboundindex)return this.dataview.loadedrecords;for(var i,e=[],t=this._startvisibleindex;t<=this._endvisibleindex;t++){if(null==(i=this.dataview.loadedrecords[t]))break;e.push(i)}return e},getrowid:function(e){if(null==e&&(e=0),this.virtualmode){var t=this.getrowvisibleindex(e);if(i=this.dataview.loadedrecords[t])return i.uid}else{var i=null,r=0<this.dataview.filters.length;if(0<=e&&e<this.dataview.bounditems.length&&!r)if(i=(this.groupable&&this.groups.length,t=this.getrowvisibleindex(e),this.dataview.loadedrecords[t]))return i.uid;if(0<this.dataview.filters.length)return(i=this.getboundrows()[e])&&null!=i.uid?i.uid:null}return null},_updateGridData:function(e){var t=!1;this.filterable&&this._initfilterpanel&&this.dataview.filters.length&&(t=!0),t?(this.dataview.refresh(),"updaterow"==e?(this._render(!0,!0,!1,!1,!1),this.invalidate()):this.render()):this.sortcolumn||this.groupable&&0<this.groups.length?(this.dataview.reloaddata(),this.render()):("updaterow"===e&&(this.dataview.refresh(),this.virtualmode||this._render(!0,!0,!1,!1,!1)),this._cellscache=new Array,this._pagescache=new Array,this._renderrows(this.virtualsizeinfo)),this.showfilterrow&&this.filterable&&this.filterrow&&this._updatelistfilters(!0)},updaterow:function(t,i,d){if(null==t||null==i)return!1;var r=this.that,s=!1;r._datachanged=!0;function l(i,e,r){if(i._loading)throw new Error("jqxGrid: "+i.loadingerrormessage);var s=!1;te.isArray(e)?(te.each(e,function(e,t){s=i.dataview.updaterow(this,r[e],!1)}),i._cellscache=new Array,i._pagescache=new Array,i.dataview.refresh()):s=i.dataview.updaterow(e,r);var t,l,o,a,n=i.vScrollInstance.value;return null!=d&&1!=d||null!=i._updating&&0!=i._updating||i._updateGridData("updaterow"),i.showaggregates&&i._updatecolumnsaggregates&&i._updatecolumnsaggregates(),i.source&&i.source._knockoutdatasource&&!i._updateFromAdapter&&i.autokoupdates&&i.source._source._localdata&&(t=i.dataview.recordsbyid["id"+e],l=i.dataview.records.indexOf(t),o=i.source._source._localdata()[l],i.source.suspendKO=!0,i.source._source._localdata.replace(o,te.extend({},t)),i.source.suspendKO=!1),i.source&&i.source._source.localdata&&"observableArray"===i.source._source.localdata.name&&(i.source._source.localdata._updating||(i.source._source.localdata._updating=!0,a=i.getrowboundindexbyid(e),i.source._source.localdata.set(a,r),i.source._source.localdata._updating=!1)),i.vScrollInstance.setPosition(n),s}if(this.source.updaterow){try{null==(s=this.source.updaterow(t,i,function(e){1==e||null==e?l(r,t,i):s=!1}))&&(s=!0)}catch(e){s=!1}}else s=l(r,t,i);return s},deleterow:function(t,h){if(null==t)return!1;var i=!(this._datachanged=!0),r=this.that,c=this.getrowboundindexbyid(t),u=new Array;new Array;if(null!=c&&(0<=this.selectedrowindexes.indexOf(c)&&this.selectedrowindexes.splice(this.selectedrowindexes.indexOf(c),1),this.selectedrowindex==c&&(this.selectedrowindex=-1),!this.virtualmode)){if(0<=r.selectionmode.indexOf("row"))te.each(this.selectedrowindexes,function(){var e=r.getrowid(this);u.push(e)}),this.selectedrowindexes=new Array,this.selectedrowindex=-1;else if(0<=r.selectionmode.indexOf("cell"))for(var e in r.selectedcells){var s=r.selectedcells[e],l=r.getrowid(s.rowindex);s.rowid=l}this._rendervisualrows()}function o(t,e){if(t._loading)throw new Error("jqxGrid: "+t.loadingerrormessage);var i,r=!1,s=t.vScrollInstance.value;if(te.isArray(e)?(te.each(e,function(){r=t.dataview.deleterow(this,!1)}),t._cellscache=new Array,t._pagescache=new Array,t.dataview.refresh()):r=t.dataview.deleterow(e),!t.virtualmode)if(0<=t.selectionmode.indexOf("row"))te.each(u,function(){var e=t.getrowboundindexbyid(this);-1!=e&&t.selectrow(e,!1)});else{var l=new Array;for(var o in t.selectedcells){var a=t.selectedcells[o],n=a.rowid,d=t.getrowboundindexbyid(n);-1!=d&&(l[(a.rowindex=d)+"_"+a.datafield]=a)}t.selectedcells=l}return null!=t._updating&&0!=t._updating||null!=h&&1!=h||setTimeout(function(){t._render(!0,!0,!1,!1),"visible"!=t.vScrollBar.css("visibility")&&(t._arrange(),t._updatecolumnwidths(),t._updatecellwidths(),t._renderrows(t.virtualsizeinfo))}),t.source&&t.source._knockoutdatasource&&!t._updateFromAdapter&&t.autokoupdates&&t.source._source._localdata&&(t.source.suspendKO=!0,t.source._source._localdata.pop(),t.source.suspendKO=!1),t.source&&t.source._source.localdata&&"observableArray"===t.source._source.localdata.name&&(t.source._source.localdata._updating||(t.source._source.localdata._updating=!0,t.source._source.localdata.splice(c,1),t.source._source.localdata._updating=!1)),!t.dataview.sortby||"many"===t.sortmode||(i=t.getsortinformation()).sortcolumn&&(t.dataview.clearsortdata(),t.dataview.sortby(i.sortcolumn,i.sortdirection?i.sortdirection.ascending:null)),t.vScrollInstance.setPosition(s),r}if(this.source.deleterow){try{this.source.deleterow(t,function(e){1!=e&&null!=e||o(r,t)}),null==i&&(i=!0)}catch(e){i=!1}}else i=o(r,t);return i},addrow:function(i,r,s){if(null==r)return!1;this._datachanged=!0,null==s&&(s="last");var t=!1,l=this.that;if(null==i){var o=this.dataview.filters&&0<this.dataview.filters.length?this.dataview.cachedrecords.length:this.dataview.totalrecords;if(te.isArray(r)){var a=new Array;te.each(r,function(e,t){var i=l.dataview.getid(l.dataview.source.id,r[e],o+e);a.push(i)}),i=a}else for(i=this.dataview.getid(this.dataview.source.id,r,o);null!=this.dataview.recordsbyid["id"+i];)i++}function n(r,s,e,l){if(r._loading)throw new Error("jqxGrid: "+r.loadingerrormessage);var t,i=r.vScrollInstance.value,o=!1;return te.isArray(e)?(te.each(e,function(e,t){null!=this.dataindex&&delete this.dataindex;var i=null;null!=s&&null!=s[e]&&(i=s[e]),o=r.dataview.addrow(i,this,l,!1)}),r._cellscache=new Array,r._pagescache=new Array,r.dataview.refresh()):(null!=e&&null!=e.dataindex&&delete e.dataindex,o=r.dataview.addrow(s,e,l)),null!=r._updating&&0!=r._updating||(r._render(!0,!0,!1,!1),r.invalidate()),r.source&&r.source._knockoutdatasource&&!r._updateFromAdapter&&r.autokoupdates&&r.source._source._localdata&&(r.source.suspendKO=!0,r.source._source._localdata.push(e),r.source.suspendKO=!1),r.source&&r.source._source.localdata&&"observableArray"===r.source._source.localdata.name&&(r.source._source.localdata._updating||(r.source._source.localdata._updating=!0,t=r.getrowboundindexbyid(s),r.source._source.localdata.set(t,e),r.source._source.localdata._updating=!1)),"deferred"!=r.scrollmode?r.vScrollInstance.setPosition(i):r.vScrollInstance.setPosition(0),o}if(this.source&&this.source.addrow){try{null==(t=this.source.addrow(i,r,s,function(e,t){1!=e&&null!=e||(null!=t&&(i=t),n(l,i,r,s))}))&&(t=!0)}catch(e){t=!1}if(0==t)return!1}else n(this,i,r,s);return t},_findvisiblerow:function(e,t){null==e&&(e=parseInt(this.vScrollInstance.value));var i=0;null!=t&&null!=t||(t=this.rows.records);for(var r=t.length;i<=r;){var s=parseInt((i+r)/2),l=t[s];if(null==l)break;if(l.top>e&&l.top+l.height>e)r=s-1;else{if(!(l.top<e&&l.top+l.height<e))return s;i=s+1}}return-1},_updatecellwidths:function(){var e=this.virtualsizeinfo;if(e){var t=this.that;if(null!=t.gridcontent){null==t.table&&(t.table=t.gridcontent.find("#contenttable"+t.element.id));var i=t.groupable&&0<t.groups.length,r=0,s=e.visiblerecords;if(t.pageable&&(t.autoheight||t.autorowheight)&&(s=t.dataview.pagesize,t.groupable&&(t.dataview.updateview(),s=t.dataview.rows.length)),t.groupable||t.pageable||!t.autoheight&&!t.autorowheight||(s=t.dataview.totalrecords),t.rowdetails&&(s+=t.dataview.pagesize),t.columns.records){for(var l=t.columns.records.length,o=t.table[0].rows,a=0;a<s;a++){var n=o[a];if(!n)break;for(var d=n.cells,h=0,c=0;c<l;c++){var u=t.columns.records[c],g=u.width;u.adaptivewidth&&(g=u.adaptivewidth);var p=d[c];parseInt(p.style.left)!=h&&(p.style.left=h+"px"),parseInt(p.style.width)!=g&&(p.style.width=g+"px"),u.hidden&&u.hideable||u.adaptivehidden?p.style.display="none":h+=parseFloat(g)}0==r&&(t.table.width(parseFloat(h)+2),r=h)}t.showaggregates&&t._updateaggregates&&t._updateaggregates(),t.showfilterrow&&t.filterable&&t._updatefilterrowui&&t._updatefilterrowui(),t.showeverpresentrow&&t._updateaddnewrowui(),t._updatescrollbarsafterrowsprerender(),i&&t._renderrows(t.virtualsizeinfo)}}}},_updatescrollbarsafterrowsprerender:function(){var e=this.that,t=e.hScrollBar[0].style.visibility,i=0,r=e.vScrollBar[0].style.visibility;"visible"==r&&(i=e.scrollbarsize+3),0==e.scrollbarsize&&(i=0),e.scrollbarautoshow&&(i=0);var s,l=0<=(l=e.element.style.width).toString().indexOf("%")?e.host.width():parseInt(l);parseInt(e.table[0].style.width)-2>l-i?("visible"!=t&&(e.autowidth||(e.hScrollBar[0].style.visibility="visible"),e._arrange()),"visible"==r?"deferred"==e.scrollmode||e.virtualmode?e._updatevscrollbarmax():e.virtualsizeinfo&&(s=e.virtualsizeinfo.virtualheight-e._gettableheight(),!isNaN(s)&&0<s&&("hidden"!=t?e.vScrollBar.jqxScrollBar("max",s+e.scrollbarsize+4):e.vScrollBar.jqxScrollBar("max",s))):i=-2,e.hScrollBar.jqxScrollBar("max",i+e.table.width()-e.host.width())):"hidden"!=t&&(e.hScrollBar.css("visibility","hidden"),e._arrange()),e._renderhorizontalscroll()},_hascolumnstyle:function(){if(void 0!==this._hascolumnstyles)return this._hascolumnstyles;this._hascolumnstyles=!1;for(var e=0;e<this.columns.records.length;e++){var t=this.columns.records[e];if(t.style.headerBackgroundColor||t.style.headerColor||t.style.headerBackgroundHoveredColor||t.style.headerHoveredColor||t.style.headerBackgroundSelectedColor||t.style.headerSelectedColor||t.style.backgroundColor||t.style.color||t.style.backgroundHoveredColor||t.style.hoveredColor||t.style.backgroundSelectedColor||t.style.selectedColor)return this._hascolumnstyles=!0}return!1},_prerenderrows:function(e){var t=this.that;if(1==t.prerenderrequired){if(t.prerenderrequired=!1,t.editable&&t._destroyeditors&&t._destroyeditors(),null==t.gridcontent)return;t.gridcontent.find("#contenttable"+t.element.id).remove(),null!=t.table&&(t.table.remove(),t.table=null),t.table=te('<div id="contenttable'+t.element.id+'" style="overflow: hidden; position: relative;"></div>'),t.gridcontent.addClass(t.toTP("jqx-grid-content")),t.gridcontent.addClass(t.toTP("jqx-widget-content")),t.gridcontent.append(t.table);var i=t.groupable&&0<t.groups.length,r=0;t.table[0].rows=new Array;var s=t.toTP("jqx-grid-cell");i&&(s=" "+t.toTP("jqx-grid-group-cell"));var l=e.visiblerecords;if(t.pageable&&(t.autoheight||t.autorowheight)&&(l=t.dataview.pagesize,t.groupable&&(t.dataview.updateview(),(l=t.dataview.rows.length)<t.dataview.pagesize&&(l=t.dataview.pagesize))),t.pageable||!t.autoheight&&!t.autorowheight||(l=t.dataview.totalrecords),t.groupable&&0<t.groups.length&&(t.autoheight||t.autorowheight)&&!t.pageable&&(l=t.dataview.rows.length),t.rowdetails&&(t.autoheight||t.autorowheight?l+=t.dataview.pagesize:l+=l),!t.columns.records)return;var o=t.columns.records.length;te.jqx.browser.msie&&8<te.jqx.browser.version&&t.table.css("opacity","0.99"),te.jqx.browser.mozilla,-1!=navigator.userAgent.indexOf("Safari")&&t.table.css("opacity","0.99");var a=te.jqx.browser.msie&&te.jqx.browser.version<8;a&&t.host.attr("hideFocus","true");var n=t.tableZIndex;n<l*o&&(n=l*o);t.dataview.records.length,t.isTouchDevice();var d="";t._hiddencolumns=!1;for(var h=5+t.columns.records.length,c=0;c<l;c++){var u='<div role="row" style="position: relative; height:'+t.rowsheight+'px;" id="row'+c+t.element.id+'">';a&&(u='<div role="row" style="position: relative; z-index: '+n+"; height:"+t.rowsheight+'px;" id="row'+c+t.element.id+'">',n--);for(var g=0,p=0;p<o;p++){(x=(f=t.columns.records[p]).width)<f.minwidth&&(x=f.minwidth),x>f.maxwidth&&(x=f.maxwidth),t.rtl?(b='<div columnindex="'+p+'" role="gridcell" style="left: '+g+"px; z-index: "+(n-o+2*p)+"; width:"+x+"px;",n--):b='<div columnindex="'+p+'" role="gridcell" style="left: '+g+"px; z-index: "+n--+"; width:"+x+"px;",f.hidden&&f.hideable||f.adaptivehidden?(b+="display: none;",t._hiddencolumns=!0,n++):g+=x,0===c&&0===p&&(b+='" tabindex="'+h+'"'),b+='" class="'+s+'">',b+=this._defaultcellsrenderer("",f),u+=b+="</div>"}0==r&&(t.table.width(parseInt(g)+2),r=g),d+=u+="</div>"}t.WinJS?MSApp.execUnsafeLocalFunction(function(){t.table.html(d)}):t.table[0].innerHTML=d,t.table[0].rows=new Array;for(var m=t.table.children(),c=0;c<l;c++){var w=m[c];t.table[0].rows.push(w),w.cells=new Array;for(var v=te(w).children(),p=0;p<o;p++)w.cells.push(v[p])}if(0==l){g=0;t.showemptyrow&&(u=te('<div style="position: relative;" id="row0'+t.element.id+'"></div>'),t.table.append(u),u.height(t.rowsheight),t.table[0].rows[0]=u[0],t.table[0].rows[0].cells=new Array);for(p=0;p<o;p++){var f,b,x=(f=t.columns.records[p]).width;t.showemptyrow&&((b=te('<div style="position: absolute; height: 100%; left: '+g+"px; z-index: "+n--+"; width:"+x+'px;" class="'+s+'"></div>')).height(t.rowsheight),u.append(b),t.table[0].rows[0].cells[p]=b[0]),x<f.minwidth&&(x=f.minwidth),x>f.maxwidth&&(x=f.maxwidth),f.hidden&&f.hideable||f.adaptivehidden||(g+=x)}t.table.width(parseInt(g)+2),r=g}t._updatescrollbarsafterrowsprerender(),t.rendered&&t.rendered("rows"),t.toCompile=new Array,t._addoverlayelement()}},_groupsheader:function(){return this.groupable&&this.showgroupsheader},_arrange:function(){var e=null,t=null;this.tableheight=null;var i=this.that,r=!1,s=!1;if((null==i.width||-1==i.width.toString().indexOf("px"))&&(null==i.width||isNaN(i.width))||(e=i.width),null!=i.width&&-1!=i.width.toString().indexOf("%")&&(e=i.width,r=!0),i.scrollbarautoshow&&(i.vScrollBar[0].style.display="none",i.hScrollBar[0].style.display="none",i.vScrollBar[0].style.zIndex=i.tableZIndex+i.headerZIndex,i.hScrollBar[0].style.zIndex=i.tableZIndex+i.headerZIndex),i.autowidth){for(var l=0,o=0;o<i.columns.records.length;o++){var a=i.columns.records[o].width;l+="auto"==a?a=i._measureElementWidth(i.columns.records[o].text):a}"hidden"!=i.vScrollBar.css("visibility")&&(l+=i.scrollbarsize+4),e=l,i.width=e}(null!=i.height&&-1!=i.height.toString().indexOf("px")||null!=i.height&&!isNaN(i.height))&&(t=i.height),null!=i.height&&-1!=i.height.toString().indexOf("%")&&(t=i.height,s=!0);function n(){var e=0;return e+=i.showheader&&null!=i.columnsheader?i.columnsheader.height()+2:0,i.pageable&&(e+=i.pagerheight),i._groupsheader()&&(e+=i.groupsheaderheight),i.showtoolbar&&(e+=i.toolbarheight),i.showfilterbar&&(e+=i.toolbarheight),i.showstatusbar&&(e+=i.statusbarheight),i.showeverpresentrow&&"bottom"===i.everpresentrowposition&&(e+=i.everpresentrowheight),"visible"==i.hScrollBar[0].style.visibility&&(e+=15),e}var d;i.autoheight&&i.virtualsizeinfo?i.pageable&&i.gotopage?(t=(d=0)+(i._pageviews[0]?i._pageviews[0].height:0),t+=n(),i.showemptyrow&&0==i.dataview.totalrecords&&(t+=i.rowsheight)):(d=i.host.height()-i._gettableheight(),0<i._pageviews.length?(t=d+i._pageviews[i._pageviews.length-1].height+i._pageviews[i._pageviews.length-1].top,i.vScrollBar[0].style.visibility="hidden"):(t=n(),i.showemptyrow&&(t+=i.rowsheight))):i.autoheight&&(t=i.dataview.totalrecords*i.rowsheight,i.pageable&&i.gotopage&&(t=i.pagesize*i.rowsheight),i._loading&&(t=250,i.dataloadelement.height(t)),1e4<(t+=n())&&(t=1e4)),null!=e?(e=parseInt(e),r?i.element.style.width=i.width:i.element.style.width!=parseInt(i.width)+"px"&&(i.element.style.width=parseInt(i.width)+"px"),r&&((e=i.host.width())<=2&&(e=600,i.host.width(e)),i._oldWidth||(i._oldWidth=e))):i.host.width(250),null!=t?(this.autoheight&&(t+=2),s||(t=parseInt(t)),s?i.element.style.height=i.height:i.element.style.height!=parseInt(t)+"px"&&(i.element.style.height=parseInt(t)+"px"),s&&!i.autoheight&&(0==(t=i.host.height())&&(t=400,i.host.height(t)),i._oldHeight||(i._oldHeight=t))):i.host.height(250),i.autoheight&&(i.tableheight=null,i._gettableheight());var h,c,u=0;i.showtoolbar?(i.toolbar.width(e),i.toolbar.height(i.toolbarheight-1),i.toolbar.css("top",0),u+=i.toolbarheight,t-=parseInt(i.toolbarheight)):i.toolbar[0].style.height="0px",i.showfilterbar?(i.filterbar.width(e),i.filterbar.height(i.toolbarheight-1),i.filterbar.css("top",u),u+=i.toolbarheight,t-=parseInt(i.toolbarheight)):i.filterbar[0].style.height="0px",i.showstatusbar?(i.showaggregates?i.statusbar.width(i.table?Math.max(e,i.table.width()):e):i.statusbar.width(e),i.statusbar.height(i.statusbarheight)):i.statusbar[0].style.height="0px",i.showeverpresentrow&&"bottom"===i.everpresentrowposition?(i.addnewrow.width(e),i.addnewrow.height(i.everpresentrowheight)):i.addnewrow[0].style.height="0px",i._groupsheader()?(i.groupsheader.width(e),i.groupsheader.height(i.groupsheaderheight),i.groupsheader.css("top",u),u+=h=i.groupsheader.height()+1,h<t&&(t-=parseInt(h))):(i.groupsheader[0].style.width!=e+"px"&&(i.groupsheader[0].style.width=parseInt(e)+"px"),i.groupsheader[0].style.height="0px",i.groupsheader[0].style.top!=u+"px"&&i.groupsheader.css("top",u),c=u+(h=i.showgroupsheader&&i.groupable?i.groupsheaderheight:0)+"px",i.content[0].style.top!=c&&i.content.css("top",u+i.groupsheaderheight));var g=i.scrollbarsize;isNaN(g)&&(g=parseInt(g),isNaN(g)?g="17px":g+="px"),g=parseInt(g);var p=2,m=0;"visible"==i.vScrollBar[0].style.visibility&&(m=g+4),"visible"==i.hScrollBar[0].style.visibility&&(p=g+4+2),0==g&&(p=m=0);var w=0;i.pageable&&(w=i.pagerheight,p+=i.pagerheight),i.showstatusbar&&(p+=i.statusbarheight,w+=i.statusbarheight),i.showeverpresentrow&&"bottom"===i.everpresentrowposition&&(p+=i.everpresentrowheight,w+=i.everpresentrowheight),i.hScrollBar[0].style.height!=g+"px"&&(i.hScrollBar[0].style.height=parseInt(g)+"px"),i.hScrollBar[0].style.top==u+t-4-g-w+"px"&&"0px"==i.hScrollBar[0].style.left||i.hScrollBar.css({top:u+t-4-g-w+"px",left:"0px"});var v=i.hScrollBar[0].style.width,f=!1,b=!1;0==m?v!=e-2+"px"&&(i.hScrollBar.width(e-2),f=!0):v!=e-g-4+"px"&&(i.hScrollBar.width(e-g-4+"px"),f=!0),i.autoheight||(i.vScrollBar[0].style.width!=g+"px"&&(i.vScrollBar.width(g),b=!0),i.vScrollBar[0].style.height!=parseInt(t)-p+"px"&&(i.vScrollBar.height(parseInt(t)-p+"px"),b=!0),i.vScrollBar[0].style.left==parseInt(e)-parseInt(g)-4+"px"&&i.vScrollBar[0].style.top==u+"px"||i.vScrollBar.css({left:parseInt(e)-parseInt(g)-4+"px",top:u})),i.rtl&&(i.vScrollBar.css({left:"0px",top:u}),"hidden"!=i.vScrollBar.css("visibility")&&i.hScrollBar.css({left:g+2}));var x=i.vScrollInstance;x.disabled=i.disabled,i.autoheight||b&&x.refresh();var y=i.hScrollInstance;y.disabled=i.disabled,f&&y.refresh(),i.autowidth&&(i.hScrollBar[0].style.visibility="hidden"),i.statusbarheight=parseInt(i.statusbarheight),i.toolbarheight=parseInt(i.toolbarheight);function _(e){var t;"visible"==e.vScrollBar[0].style.visibility&&"visible"==e.hScrollBar[0].style.visibility?(e.bottomRight[0].style.visibility="visible",e.bottomRight.css({left:1+parseInt(e.vScrollBar.css("left")),top:parseInt(e.hScrollBar.css("top"))}),e.rtl&&e.bottomRight.css("left","0px"),e.bottomRight.width(parseInt(g)+3),e.bottomRight.height(parseInt(g)+4),0<(t=e.showeverpresentrow&&"bottom"==e.everpresentrowposition?e.everpresentrowheight:0)&&!e.showaggregates&&(e.bottomRight.css("z-index",99),e.bottomRight.height(parseInt(g)+4+t),e.bottomRight.css({top:parseInt(e.hScrollBar.css("top"))-t})),e.showaggregates&&(e.bottomRight.css("z-index",99),e.bottomRight.height(parseInt(g)+4+e.statusbarheight+t),e.bottomRight.css({top:parseInt(e.hScrollBar.css("top"))-e.statusbarheight-t}))):e.bottomRight[0].style.visibility="hidden"}var q,j,S;_(this),i.content[0].style.width!=e-m+"px"&&i.content.width(e-m),i.content[0].style.height!=t-p+3+"px"&&i.content.height(t-p+3),i.scrollbarautoshow&&(i.content[0].style.width!=e+"px"&&i.content.width(e),i.content[0].style.height!=t+"px"&&i.content.height(t)),i.content[0].style.top!=u+"px"&&i.content.css("top",u),i.rtl&&(i.content.css("left",m),i.scrollbarautoshow&&i.content.css("left","0px"),!i.table||(q=i.table.width())<e-m&&i.content.css("left",e-q)),i.showstatusbar&&(i.statusbar.css("top",u+t-i.statusbarheight-(i.pageable?i.pagerheight:0)),i.showaggregates&&("visible"==i.hScrollBar.css("visibility")&&(i.hScrollBar.css({top:u+t-4-g-w+i.statusbarheight+"px"}),i.statusbar.css("top",1+u+t-g-5-i.statusbarheight-(i.pageable?i.pagerheight:0))),_(this)),i.rtl&&("visible"!=i.hScrollBar.css("visibility")?i.statusbar.css("left",i.content.css("left")):i.statusbar.css("left","0px"))),i.showeverpresentrow&&"bottom"===i.everpresentrowposition&&(i.addnewrow.css("top",u+t-(i.showstatusbar?i.statusbarheight:0)-(i.pageable?i.pagerheight:0)-i.everpresentrowheight),i.rtl&&("visible"!=i.hScrollBar.css("visibility")?i.addnewrow.css("left",i.content.css("left")):i.addnewrow.css("left","0px"))),i.pageable?(i.pager.width(e),i.pager.height(i.pagerheight),i.pager.css("top",u+t-i.pagerheight-1)):i.pager[0].style.height="0px",null!=i.table&&(j=-2,"visible"==i.vScrollBar[0].style.visibility&&(j=i.scrollbarsize+3),"visible"==i.hScrollBar[0].style.visibility&&(0<=(S=j+i.table.width()-i.host.width())&&i.hScrollBar.jqxScrollBar("max",S),"visible"==i.hScrollBar[0].style.visibility&&0==S&&(i.hScrollBar[0].style.visibility="hidden",i._arrange()))),e!=parseInt(i.dataloadelement[0].style.width)&&(i.dataloadelement[0].style.width=i.element.style.width),t!=parseInt(i.dataloadelement[0].style.height)&&(i.dataloadelement[0].style.height=i.element.style.height),this.pagergotoinput&&(this.pagergotoinput.offset().top!==this.pagergoto.offset().top?(this.pagergotoinput.css("visibility","hidden"),this.pagergoto.css("visibility","hidden")):(this.pagergotoinput.css("visibility","inherit"),this.pagergoto.css("visibility","inherit"))),i._hostwidth=e},destroy:function(){if(delete te.jqx.dataFormat.datescache,delete this.gridlocalization,te.jqx.utilities.resize(this.host,null,!0),""==document.referrer&&!window.frameElement||null==window.top||window.top==window.self||this.removeHandler(te(window.top.document),"mouseup.grid"+this.element.id),this.table&&this.table[0]){for(var e=this.table[0].rows.length,t=0;t<e;t++){for(var i=this.table[0].rows[t],r=i.cells.length,s=0;s<r;s++)te(i.cells[s]).remove(),i.cells[s]=null,delete i.cells[s];i.cells=null,i.cells&&delete i.cells,te(this.table[0].rows[t]).remove(),this.table[0].rows[t]=null}try{delete this.table[0].rows}catch(e){}this.table.remove(),delete this.table}if(this.columns&&this.columns.records){for(t=0;t<this.columns.records.length;t++){var l=this.columns.records[t];l.addnewrowwidget&&l.destroyeverpresentrowwidget&&l.destroyeverpresentrowwidget(l.addnewrowwidget),l.destroywidget&&l.destroywidget&&l.destroywidget(l.widget),this._removecolumnhandlers(this.columns.records[t]),l.element&&(te(l.element).remove(),te(l.sortasc).remove(),te(l.sortdesc).remove(),te(l.filtericon).remove(),te(l.menu).remove(),l.element=null,l.uielement=null,l.sortasc=null,l.sortdesc=null,l.filtericon=null,l.menu=null,delete l.element,delete l.uielement,delete l.sortasc,delete l.sortdesc,delete l.filtericon,delete l.menu,delete this.columnsrow[0].cells[t])}try{delete this.columnsrow[0].cells}catch(e){}delete this.columnsrow}var o,a,n;if(te.removeData(document.body,"contextmenu"+this.element.id),this.host.jqxDropDownList&&this._destroyfilterpanel&&this._destroyfilterpanel(),this.editable&&this._destroyeditors&&this._destroyeditors(),this.filterable&&this._destroyedfilters&&this.showfilterrow&&this._destroyedfilters(),this.host.jqxMenu&&this.gridmenu&&(this.removeHandler(te(document),"click.menu"+this.element.id),this.removeHandler(this.gridmenu,"keydown"),this.removeHandler(this.gridmenu,"closed"),this.removeHandler(this.gridmenu,"itemclick"),this.gridmenu.jqxMenu("destroy"),this.gridmenu=null),this.pagershowrowscombo&&(this.pagershowrowscombo.jqxDropDownList("destroy"),this.pagershowrowscombo=null),this.pagerrightbutton&&(this.removeHandler(this.pagerrightbutton,"mousedown"),this.removeHandler(this.pagerrightbutton,"mouseup"),this.removeHandler(this.pagerrightbutton,"click"),this.pagerrightbutton.jqxButton("destroy"),this.pagerrightbutton=null),this.pagerleftbutton&&(this.removeHandler(this.pagerleftbutton,"mousedown"),this.removeHandler(this.pagerleftbutton,"mouseup"),this.removeHandler(this.pagerleftbutton,"click"),this.pagerleftbutton.jqxButton("destroy"),this.removeHandler(te(document),"mouseup.pagerbuttons"+this.element.id),this.pagerleftbutton=null),this.removeHandler(te(document),"selectstart."+this.element.id),this.removeHandler(te(document),"mousedown.resize"+this.element.id),this.removeHandler(te(document),"mouseup.resize"+this.element.id),this.removeHandler(te(document),"mousemove.resize"+this.element.id),this.isTouchDevice()&&(o=te.jqx.mobile.getTouchEventName("touchmove")+".resize"+this.element.id,a=te.jqx.mobile.getTouchEventName("touchstart")+".resize"+this.element.id,n=te.jqx.mobile.getTouchEventName("touchend")+".resize"+this.element.id,this.removeHandler(te(document),o),this.removeHandler(te(document),a),this.removeHandler(te(document),n)),this.removeHandler(te(document),"mousedown.reorder"+this.element.id),this.removeHandler(te(document),"mouseup.reorder"+this.element.id),this.removeHandler(te(document),"mousemove.reorder"+this.element.id),this.isTouchDevice()&&(o=te.jqx.mobile.getTouchEventName("touchmove")+".reorder"+this.element.id,a=te.jqx.mobile.getTouchEventName("touchstart")+".reorder"+this.element.id,n=te.jqx.mobile.getTouchEventName("touchend")+".reorder"+this.element.id,this.removeHandler(te(document),o),this.removeHandler(te(document),a),this.removeHandler(te(document),n)),this.removeHandler(te(window),"resize."+this.element.id),this.resizeline&&this.resizeline.remove(),this.resizestartline&&this.resizestartline.remove(),this.groupable&&(o="mousemove.grouping"+this.element.id,a="mousedown.grouping"+this.element.id,n="mouseup.grouping"+this.element.id,this.removeHandler(te(document),o),this.removeHandler(te(document),a),this.removeHandler(te(document),n)),this.columnsreorder&&(o="mousemove.reorder"+this.element.id,a="mousedown.reorder"+this.element.id,n="mouseup.reorder"+this.element.id,this.removeHandler(te(document),o),this.removeHandler(te(document),a),this.removeHandler(te(document),n),delete this.columnsbounds),this.content&&(this.removeHandler(this.content,"mousedown"),this.removeHandler(this.content,"scroll")),this._removeHandlers(),this.hScrollInstance.destroy(),this.vScrollInstance.destroy(),this.hScrollBar.remove(),this.vScrollBar.remove(),this._clearcaches(),delete this.hScrollInstance,delete this.vScrollInstance,delete this.visiblerows,delete this.hittestinfo,delete this.rows,delete this.columns,delete this.columnsbydatafield,delete this.pagescache,delete this.pageviews,delete this.cellscache,delete this.heights,delete this.hiddens,delete this.hiddenboundrows,delete this.heightboundrows,delete this.detailboundrows,delete this.details,delete this.expandedgroups,delete this._rowdetailscache,delete this._rowdetailselementscache,delete this.columnsmenu,this.columnsheader&&(this.columnsheader.remove(),delete this.columnsheader),this.selectionarea&&(this.selectionarea.remove(),delete this.selectionarea),this.menuitemsarray&&this.menuitemsarray.length)for(var d=this.menuitemsarray.length,t=0;t<d;t++)te(this.menuitemsarray[t]).remove();delete this.menuitemsarray,this.dataview._clearcaches(),this.content.removeClass(),this.content.remove(),this.content=null,delete this.content,this.vScrollBar=null,this.hScrollBar=null,delete this.hScrollBar,delete this.hScrollBar,this.gridcontent&&(this.gridcontent.remove(),delete this.gridcontent),this.gridmenu&&(this.gridmenu=null,delete this.gridmenu),delete this._mousemovefunc,delete this._mousewheelfunc,this.dataview.destroy(),delete this.dataview,this.bottomRight.remove(),delete this.bottomRight,this.wrapper.remove(),delete this.wrapper,this.pagerdiv&&(this.pagerdiv.remove(),delete this.pagerdiv),this.pagerpageinput&&(this.pagerpageinput.remove(),delete this.pagerpageinput),this.pagergoto&&(this.pagergoto.remove(),delete this.pagergoto),this.pagershowrows&&(this.pagershowrows.remove(),delete this.pagershowrows),this.pagerfirstbutton&&(this.pagerfirstbutton.remove(),delete this.pagerfirstbutton),this.pagerlastbutton&&(this.pagerlastbutton.remove(),delete this.pagerlastbutton),this.pagerbuttons&&(this.pagerbuttons.remove(),delete this.pagerbuttons),this.pagerdetails&&(this.pagerdetails.remove(),delete this.pagerdetails),this.pagergotoinput&&(this.pagergotoinput.remove(),delete this.pagergotoinput),this.pager.remove(),delete this.pager,this.groupsheader.remove(),delete this.groupsheader,this.dataloadelement.remove(),delete this.dataloadelement,this.toolbar.remove(),delete this.toolbar,this.statusbar.remove(),delete this.statusbar,this.host.removeData(),this.host.removeClass(),this.host.remove(),this.host=null,delete this.host,delete this.element,delete this.set,delete this.get,delete this.that,delete this.call},_initializeColumns:function(){var e=this.source?this.source.datafields:null;null==e&&this.source&&this.source._source&&(e=this.source._source.datafields);var i=!!e&&0<e.length;if(this.autogeneratecolumns){var t=new Array;if(e)te.each(e,function(){var e={datafield:this.name,text:this.text||this.name,cellsformat:this.format||""};t.push(e)});else if(0<this.source.records.length){var r=this.source.records[0];for(var s in r){"uid"!=s&&(d={width:100,datafield:s,text:s},t.push(d))}}this.columns=t}if(this.columns&&this.columns.records)for(var l=0;l<this.columns.records.length;l++)this._removecolumnhandlers(this.columns.records[l]);var o=this.that,a=new te.jqx.collection(this.element),n=0;this._haspinned=!1,this._columns?this.columns=this._columns:this._columns=this.columns,this.groupable&&te.each(this.groups,function(e){var t=new c(o,this);t.visibleindex=n++,t.width=o.groupindentwidth,a.add(t),t.grouped=!0,t.filterable=!1,t.sortable=!1,t.editable=!1,t.resizable=!1,t.draggable=!1}),this.rowdetails&&this.showrowdetailscolumn&&((d=new c(o,this)).visibleindex=n++,d.width=o.groupindentwidth,d.pinned=!0,d.editable=!1,d.filterable=!1,d.draggable=!1,d.groupable=!1,d.resizable=!1,a.add(d),o._haspinned=!0),"checkbox"==this.selectionmode&&((d=new c(o,null)).visibleindex=n++,d.width=o.groupindentwidth,d.checkboxcolumn=!0,d.editable=!1,d.columntype="checkbox",d.groupable=!1,d.draggable=!1,d.filterable=!1,d.resizable=!1,d.datafield="_checkboxcolumn",a.add(d));var d,h=new Array;te.each(this.columns,function(e){if(null!=o.columns[e]){var t=new c(o,this);if(t.visibleindex=n++,null!=this.dataField&&(this.datafield=this.dataField),this.pinned&&(o._haspinned=!0),o.showeverpresentrow&&("addButtonColumn"!==this.datafield&&"resetButtonColumn"!==this.datafield&&"updateButtonColumn"!==this.datafield&&"deleteButtonColumn"!==this.datafield||(t.editable=!1,t.groupable=!1,t.draggable=!1,t.filterable=!1,t.resizable=!1,t.menu=!1)),null==this.datafield)o.source&&o.source._source&&"array"==o.source._source.datatype&&(i||(o.source._source.datafields||(o.source._source.datafields=new Array),o.source._source.datafields.push({name:e.toString()})),this.datafield=e.toString(),this.displayfield=e.toString(),t.datafield=this.datafield,t.displayfield=this.displayfield);else{if(h[this.datafield])throw new Error("jqxGrid: Invalid column 'datafield' setting. jqxGrid's columns should be initialized with unique data fields.");h[this.datafield]=!0}a.add(t)}}),this.adaptive&&((d=new c(o,null)).visibleindex=n++,d.width=o.groupindentwidth,d.editable=!1,d.columntype="adaptive",d.cellsalign="center",d.groupable=!1,d.draggable=!1,d.menu=!1,d.sortable=!1,d.filterable=!1,d.resizable=!1,d.datafield="_adaptivecolumn",a.add(d)),this.rtl&&a.records.reverse(),this.columns=a},_initializeRows:function(){var e=new te.jqx.collection(this.element);this.rows&&this.rows.clear(),this.rows=e},_raiseEvent:function(e,t){if(null==t&&(t={owner:null}),!1!==this._trigger){var i,r=this.events[e];this._camelCase||(r=r.toLowerCase()),2!=e&&15!=e||this.showeverpresentrow&&(0<=this.everpresentrowactions.indexOf("delete")||0<=this.everpresentrowactions.indexOf("update"))&&(this.updateeverpresentrow&&(i=this),setTimeout(function(){i.updateeverpresentrow()},50));var s=t;s.owner=this;var l=new te.Event(r);l.owner=this,l.args=s;var o=this.host.trigger(l);return t=l.args,o}},wheel:function(e,t){if(t.autoheight&&"visible"!=t.hScrollBar.css("visibility"))return e.returnValue=!0;var i=0;if((e=e||window.event).originalEvent&&e.originalEvent.wheelDelta&&(e.wheelDelta=e.originalEvent.wheelDelta),e.wheelDelta?i=e.wheelDelta/120:e.detail&&(i=-e.detail/3),i){var r=t._handleDelta(i);return r&&(e.preventDefault&&e.preventDefault(),null!=e.originalEvent&&(e.originalEvent.mouseHandled=!0),null!=e.stopPropagation&&e.stopPropagation()),!!r&&(r=!1,e.returnValue=r)}e.preventDefault&&e.preventDefault(),e.returnValue=!1},_handleDelta:function(e){if("hidden"!=this.vScrollBar.css("visibility")){var t=this.vScrollInstance.value;if(e<0?this.scrollDown():this.scrollUp(),t!=this.vScrollInstance.value)return!0}else if("hidden"!=this.hScrollBar.css("visibility")){t=this.hScrollInstance.value;if(0<e?this.hScrollInstance.value>2*this.horizontalscrollbarstep?this.hScrollInstance.setPosition(this.hScrollInstance.value-2*this.horizontalscrollbarstep):this.hScrollInstance.setPosition(0):this.hScrollInstance.value<this.hScrollInstance.max?this.hScrollInstance.setPosition(this.hScrollInstance.value+2*this.horizontalscrollbarstep):this.hScrollInstance.setPosition(this.hScrollInstance.max),t!=this.hScrollInstance.value)return this._activeFilterElement&&this._activeFilterElement.jqxDropDownList("close"),!0}return!1},scrollDown:function(){var e;"hidden"!=this.vScrollBar.css("visibility")&&((e=this.vScrollInstance).value+this.rowsheight<=e.max?e.setPosition(parseInt(e.value)+this.rowsheight):e.setPosition(e.max))},scrollUp:function(){var e;"hidden"!=this.vScrollBar.css("visibility")&&((e=this.vScrollInstance).value-this.rowsheight>=e.min?e.setPosition(parseInt(e.value)-this.rowsheight):e.setPosition(e.min))},_removeHandlers:function(){var e=this.that;e.removeHandler(te(window),"orientationchange.jqxgrid"+e.element.id),e.removeHandler(te(window),"orientationchanged.jqxgrid"+e.element.id),e.removeHandler(e.vScrollBar,"valueChanged"),e.removeHandler(e.hScrollBar,"valueChanged"),e.vScrollInstance.valueChanged=null,e.hScrollInstance.valueChanged=null;var t="mousedown.jqxgrid";e.isTouchDevice()&&(t=te.jqx.mobile.getTouchEventName("touchend")),e.removeHandler(e.host,"dblclick.jqxgrid"),e.removeHandler(e.host,t),e.removeHandler(e.content,"mousemove",e._mousemovefunc),e.removeHandler(e.host,"mouseleave.jqxgrid"),e.removeHandler(e.content,"mouseenter"),e.removeHandler(e.content,"mouseleave"),e.removeHandler(e.content,"mousedown"),e.removeHandler(e.content,"scroll"),e.removeHandler(e.content,"selectstart."+e.element.id),e.removeHandler(e.host,"dragstart."+e.element.id),e.removeHandler(e.host,"keydown.edit"+e.element.id),e.removeHandler(te(document),"keydown.edit"+e.element.id),e.removeHandler(te(document),"keyup.edit"+e.element.id),e._mousemovedocumentfunc&&e.removeHandler(te(document),"mousemove.selection"+e.element.id,e._mousemovedocumentfunc),e.removeHandler(te(document),"mouseup.selection"+e.element.id),e._mousewheelfunc&&e.removeHandler(e.host,"mousewheel",e._mousewheelfunc),e.editable&&e.removeHandler(te(document),"mousedown.gridedit"+e.element.id),e.host.off&&(e.content.off("mousemove"),e.host.off("mousewheel"))},_addHandlers:function(){var c=this.that,i=c.isTouchDevice();i||c.addHandler(c.host,"dragstart."+c.element.id,function(e){return!1}),c.scrollbarautoshow&&(c.addHandler(c.host,"mouseenter.gridscroll"+c.element.id,function(e){c.vScrollBar.fadeIn("fast"),c.hScrollBar.fadeIn("fast")}),c.addHandler(c.host,"mouseleave.gridscroll"+c.element.id,function(e){c.vScrollInstance.isScrolling()||c.hScrollInstance.isScrolling()||(c.vScrollBar.fadeOut("fast"),c.hScrollBar.fadeOut("fast"))})),c.editable&&c.addHandler(te(document),"mousedown.gridedit"+c.element.id,function(l){if(c.editable&&c.begincelledit&&c.editcell&&!c.vScrollInstance.isScrolling()&&!c.vScrollInstance.isScrolling()){var e=c.host.coord(),t=c.host.width(),i=c.host.height(),o=!1,a=!1;if((l.pageY<e.top||l.pageY>e.top+i)&&(a=o=!0),(l.pageX<e.left||l.pageX>e.left+t)&&(o=!0),o){if(c.editcell&&c.editcell.editor)switch(c.editcell.columntype){case"datetimeinput":if(c.editcell.editor.jqxDateTimeInput&&c.editcell.editor.jqxDateTimeInput("container")&&"block"==c.editcell.editor.jqxDateTimeInput("container")[0].style.display){var r=c.editcell.editor.jqxDateTimeInput("container").coord().top,s=c.editcell.editor.jqxDateTimeInput("container").coord().top+c.editcell.editor.jqxDateTimeInput("container").height();if(!a||!(l.pageY<r||l.pageY>s))return;o=!0,c.editcell.editor.jqxDateTimeInput("close")}break;case"combobox":if(c.editcell.editor.jqxComboBox&&c.editcell.editor.jqxComboBox("container")&&"block"==c.editcell.editor.jqxComboBox("container")[0].style.display){r=c.editcell.editor.jqxComboBox("container").coord().top,s=c.editcell.editor.jqxComboBox("container").coord().top+c.editcell.editor.jqxComboBox("container").height();if(!a||!(l.pageY<r||l.pageY>s))return;o=!0,c.editcell.editor.jqxComboBox("close")}break;case"dropdownlist":if(c.editcell.editor.jqxDropDownList&&c.editcell.editor.jqxDropDownList("container")&&"block"==c.editcell.editor.jqxDropDownList("container")[0].style.display){r=c.editcell.editor.jqxDropDownList("container").coord().top,s=c.editcell.editor.jqxDropDownList("container").coord().top+c.editcell.editor.jqxDropDownList("container").height();if(!a||!(l.pageY<r||l.pageY>s))return;o=!0,c.editcell.editor.jqxDropDownList("close")}break;case"template":case"custom":function n(e){var t=c.editcell.editor.data();if(t[e]&&t[e].instance.container&&"block"==t[e].instance.container[0].style.display){var i=t[e].instance,r=i.container.coord().top,s=i.container.coord().top+i.container.height();return!(!a||!(l.pageY<r||l.pageY>s))&&(o=!0,i.close(),!0)}}for(var d=["jqxDropDownList","jqxComboBox","jqxDropDownButton","jqxDateTimeInput"],h=0;h<d.length;h++){if(0==n(d[h]))return}}c.endcelledit(c.editcell.row,c.editcell.column,!1,!0),c._oldselectedcell=null}}}),c.vScrollInstance.valueChanged=function(e){c.virtualsizeinfo&&(c._closemenu(),"physical"!=c.scrollmode||null!=c.currentScrollValue&&Math.abs(c.currentScrollValue-e.currentValue),c._renderrows(c.virtualsizeinfo),c.currentScrollValue=e.currentValue,c.pageable||c.groupable||!c.dataview.virtualmode||(c.loadondemandupdate&&clearTimeout(c.loadondemandupdate),c.loadondemandupdate=setTimeout(function(){c.loadondemand=!0,c._renderrows(c.virtualsizeinfo)},100)),i&&(c._lastScroll=new Date))},c.hScrollInstance.valueChanged=function(e){var t;c.virtualsizeinfo&&(c._closemenu(),t=function(){c._renderhorizontalscroll(),c._renderrows(c.virtualsizeinfo),c.editcell&&!c.editrow&&c._showcelleditor&&c.editcell.editing&&(c.hScrollInstance.isScrolling()||c._showcelleditor(c.editcell.row,c.getcolumn(c.editcell.column),c.editcell.element,c.editcell.init))},i?t():(null==c._browser?c._isIE10():c._browser,navigator&&-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")?(c._hScrollTimer&&clearTimeout(c._hScrollTimer),c._hScrollTimer=setTimeout(function(){t()},1)):te.jqx.browser.msie?(c._hScrollTimer&&clearTimeout(c._hScrollTimer),c._hScrollTimer=setTimeout(function(){t()},.01)):t()),i&&(c._lastScroll=new Date))},c._mousewheelfunc=c._mousewheelfunc||function(e){if(!c.editcell&&c.enablemousewheel)return c.wheel(e,c),!1},c.removeHandler(c.host,"mousewheel",c._mousewheelfunc),c.addHandler(c.host,"mousewheel",c._mousewheelfunc);var e,t="mousedown.jqxgrid";i&&(t=te.jqx.mobile.getTouchEventName("touchend")),c.addHandler(c.host,t,function(e){if(c.isTouchDevice()){if(c._newScroll=new Date,c._newScroll-c._lastScroll<500)return!1;if(te(e.target).ischildof(c.vScrollBar))return!1;if(te(e.target).ischildof(c.hScrollBar))return!1}c._mousedown=new Date;var t=c._handlemousedown(e,c);return c.isNestedGrid&&(c.resizablecolumn||c.columnsreorder||e.stopPropagation()),c._lastmousedown=new Date,t}),i||(c.addHandler(c.host,"dblclick.jqxgrid",function(e){return c.editable&&c.begincelledit&&"dblclick"==c.editmode?c._handledblclick(e,c):te.jqx.browser.msie&&te.jqx.browser.version<9&&c._handlemousedown(e,c),c.mousecaptured=!1,c._lastmousedown=new Date,!0}),c._mousemovefunc=function(e){if(c._handlemousemove)return c._handlemousemove(e,c)},c.addHandler(c.content,"mousemove",c._mousemovefunc),c._handlemousemoveselection&&(c._mousemovedocumentfunc=function(e){if(c._handlemousemoveselection)return c._handlemousemoveselection(e,c)},c.addHandler(te(document),"mousemove.selection"+c.element.id,c._mousemovedocumentfunc)),c.addHandler(te(document),"mouseup.selection"+c.element.id,function(e){c._handlemouseupselection&&c._handlemouseupselection(e,c)}));try{""==document.referrer&&!window.frameElement||null==window.top||window.top==window.self||(e=null,window.parent&&document.referrer&&(e=document.referrer),e&&-1!=e.indexOf(document.location.host)&&c.addHandler(te(window.top.document),"mouseup.grid"+c.element.id,function(e){if(c._handlemouseupselection)try{c._handlemouseupselection(e,c)}catch(e){}}))}catch(e){}c.focused=!1,i||(c.addHandler(c.content,"mouseenter",function(e){c.focused=!0,c.wrapper&&(c.wrapper.attr("tabindex",1),c.content.attr("tabindex",2)),c._overlayElement&&(c.vScrollInstance.isScrolling()||c.hScrollInstance.isScrolling()?c._overlayElement[0].style.visibility="visible":c._overlayElement[0].style.visibility="hidden")}),c.addHandler(c.content,"mouseleave",function(e){c._handlemousemove&&c.enablehover&&c._clearhoverstyle(),c._overlayElement&&(c._overlayElement[0].style.visibility="hidden"),c.focused=!1}),(c.groupable||c.columnsreorder)&&c.addHandler(te(document),"selectstart."+c.element.id,function(e){if(!0===c.__drag)return!1}),c.addHandler(c.content,"selectstart."+c.element.id,function(e){if(c.enablebrowserselection)return!0;if(c.showfilterrow&&te(e.target).ischildof(c.filterrow))return!0;if(c.showeverpresentrow){if(te(e.target).ischildof(c.addnewrow))return!0;if(c.addnewrowtop&&te(e.target).ischildof(c.addnewrowtop))return!0}return!!(e.target.className&&0<=e.target.className.indexOf("jqx-grid-widget"))||!!c.editcell&&void(e.stopPropagation&&e.stopPropagation())}),c.addHandler(te(document),"keyup.edit"+c.element.id,function(e){c._keydown=!1}),c.addHandler(te(document),"keydown.edit"+c.element.id,function(e){if(c.adaptiveview)return!0;if((c._keydown=!c.editcell,20===(i=e.charCode?e.charCode:e.keyCode?e.keyCode:0)&&(c._capsLock?c._capsLock=!1:c._capsLock=!0),c.handlekeyboardnavigation)&&((c.focused||e.target===c.element||te(e.target).ischildof(c.host))&&1==c.handlekeyboardnavigation(e)))return!1;if(c.editable&&c.editcell&&(13!=i&&27!=i&&9!=i&&32!=i||c._handleeditkeydown&&(t=c._handleeditkeydown(e,c))),27==i&&(c.mousecaptured=!1,"visible"==c.selectionarea.css("visibility")&&c.selectionarea.css("visibility","hidden")),te.jqx.browser.msie&&te.jqx.browser.version<12&&c.focused&&!c.isNestedGrid){if(13==i&&0==t)return t;var t=!0,i=e.charCode?e.charCode:e.keyCode?e.keyCode:0;if(!c.editcell&&c.editable&&"programmatic"!=c.editmode&&c._handleeditkeydown&&(t=c._handleeditkeydown(e,c)),t&&c.keyboardnavigation&&c._handlekeydown)return(t=c._handlekeydown(e,c))||(e.preventDefault&&e.preventDefault(),null!=e.stopPropagation&&e.stopPropagation()),t}return!0}),c.addHandler(c.host,"keyup.edit"+c.element.id,function(e){if(c.adaptiveview)return!0;if(9===e.keyCode&&!te(document.activeElement).ischildof(c.filterrow)&&!te(document.activeElement).ischildof(c.pager))switch(c.selectionmode){case"singlecell":case"multiplecells":case"multiplecellsextended":case"multiplecellsadvanced":c.getselectedcell();break;default:c.getselectedrowindex()}}),c.addHandler(c.host,"keydown.edit"+c.element.id,function(e){var t,i=!0;if(c.adaptiveview)return!0;if(c.handlekeyboardnavigation&&1==c.handlekeyboardnavigation(e))return!1;return c.editable&&"programmatic"!=c.editmode&&c._handleeditkeydown&&(i=c._handleeditkeydown(e,c),c.isNestedGrid&&e.stopPropagation()),!c.editcell&&e.altKey&&(te(document.activeElement).ischildof(c.filterrow)||te(document.activeElement).ischildof(c.pager)||(40===e.keyCode?(t=c.getselectedcell())&&c.openmenu(t.column):38===e.keyCode&&c._closemenu())),te.jqx.browser.msie&&te.jqx.browser.version<8?c.isNestedGrid&&i&&c.keyboardnavigation&&c._handlekeydown&&(i=c._handlekeydown(e,c),e.stopPropagation()):i&&c.keyboardnavigation&&c._handlekeydown&&(i=c._handlekeydown(e,c),c.isNestedGrid&&e.stopPropagation()),i||(e.preventDefault&&e.preventDefault(),null!=e.stopPropagation&&e.stopPropagation()),i&&c.selectedcells&&0<c.selectedcells.length&&9===e.keyCode&&e.shiftKey&&c.table&&c.table[0].rows&&0<c.table[0].rows.length&&(te(document.activeElement).ischildof(c.filterrow)||te(document.activeElement).ischildof(c.pager)||c.table[0].rows[0].cells[0].focus()),i}))},_hittestrow:function(e,t){if(null!=this.vScrollInstance&&null!=this.hScrollInstance){null==e&&(e=0);var i=this.vScrollInstance,r=this.hScrollInstance,s=i.value;"visible"!=this.vScrollBar.css("visibility")&&(s=0);var l=r.value;"visible"!=this.hScrollBar.css("visibility")&&(l=0),"deferred"==this.scrollmode&&null!=this._newmax&&s>this._newmax&&(s=this._newmax);var o=parseInt(s)+t;parseInt(l);if(null!=this.visiblerows&&0!=this.visiblerows.length){var a,n,d,h,c,u,g=!1,p=this._findvisiblerow(o,this.visiblerows);return 0<=p&&(a=this.visiblerows[p],n=this.rowdetails&&a.rowdetails,d=!a.rowdetailshidden,n&&((h=this.visiblerows[p-1])==a&&(a=h,p--),d&&(c=te(this.hittestinfo[p].visualrow).position().top+parseInt(this.table.css("top")),u=te(this.hittestinfo[p].visualrow).height(),c<=t&&t<=c+u||(p++,a=this.visiblerows[p],g=!0)))),{index:p,row:a,details:g}}}},getcellatposition:function(e,t){var i=this.that,r=this.showheader?this.columnsheader.height()+2:0,s=this._groupsheader()?this.groupsheader.height():0;s+=this.showtoolbar?this.toolbarheight:0,s+=this.showfilterbar?this.toolbarheight:0;var l=this.host.coord();this.hasTransform&&(l=te.jqx.utilities.getOffset(this.host));var o=e-l.left,a=t-r-l.top-s,n=this._hittestrow(o,a),d=n.row,h=n.index,c=this.table[0].rows[h];if(this.dataview&&0==this.dataview.records.length){for(var u=this.table[0].rows,g=0,p=0;p<u.length;p++){if(g<=a&&a<g+this.rowsheight){c=u[p];break}g+=this.rowsheight}d={boundindex:p}}if(null==c)return!0;for(var m=this.hScrollInstance.value,w=0,p=(this.groupable&&this.groups.length,0);p<c.cells.length;p++){var v=parseInt(te(this.columnsrow[0].cells[p]).css("left")),e=v-m;if(i.columns.records[p].pinned&&(e=v),!i.columns.records[p].hidden&&!i.columns.records[p].adaptivehidden)if(o<=e+te(this.columnsrow[0].cells[p]).width()&&e<=o){w=p;break}}if(null==d)return null;var f=this._getcolumnat(w);return{row:this.getboundindex(d),column:f.datafield,value:this.getcellvalue(this.getboundindex(d),f.datafield)}},_handlemousedown:function(e,l){if(null==e.target)return!0;if(l.disabled)return!0;if(te(e.target).ischildof(this.columnsheader)||te(e.target).ischildof(this.hScrollBar)||te(e.target).ischildof(this.vScrollBar))return!0;if(e.target===l.bottomRight[0])return!0;var t,i;if(e.which?t=3==e.which:e.button&&(t=2==e.button),e.which?i=2==e.which:e.button&&(i=1==e.button),i)return!0;if(this.adaptiveview){if(te(e.target).ischildof(te(this.adaptiveview)))return!0;if(e.target==this.adaptiveview)return!0}if(this.showstatusbar){if(te(e.target).ischildof(this.statusbar))return!0;if(e.target==this.statusbar[0])return!0}if(this.showtoolbar){if(te(e.target).ischildof(this.toolbar))return!0;if(e.target==this.toolbar[0])return!0}if(this.showfilterbar){if(te(e.target).ischildof(this.filterbar))return!0;if(e.target==this.filterbar[0])return!0}if(this.pageable){if(te(e.target).ischildof(this.pager))return!0;if(e.target==this.pager[0])return!0}if(!this.columnsheader)return!0;if(!this.editcell&&this.pageable&&te(e.target).ischildof(this.pager))return!0;var r=this.showheader?this.columnsheader.height()+2:0,s=this._groupsheader()?this.groupsheader.height():0;s+=this.showtoolbar?this.toolbarheight:0,s+=this.showfilterbar?this.toolbarheight:0;var o,a=this.host.coord();this.hasTransform&&(a=te.jqx.utilities.getOffset(this.host),o=this._getBodyOffset(),a.left-=o.left,a.top-=o.top);var n,d=parseInt(e.pageX),h=parseInt(e.pageY);this.isTouchDevice()&&(n=l.getTouches(e)[0],d=parseInt(n.pageX),h=parseInt(n.pageY),1==l.touchmode&&null!=n._pageX&&(d=parseInt(n._pageX),h=parseInt(n._pageY)));var c=d-a.left,u=h-r-a.top-s;if(this.pageable&&!this.autoheight&&this.gotopage&&this.pager.coord().top-a.top-s-r<u)return;var g=this._hittestrow(c,u);if(g&&!g.details){var p=g.row,m=g.index,w=e.target.className,v=this.table[0].rows[m];if(null==v)return l.editable&&l.begincelledit&&l.editcell&&l.endcelledit(l.editcell.row,l.editcell.column,!1,!0),!0;l.mousecaptured=!0,l.mousecaptureposition={left:e.pageX,top:e.pageY-s,clickedrow:v};var f=this.hScrollInstance,b=f.value;this.rtl&&"hidden"!=this.hScrollBar.css("visibility")&&(b=f.max-f.value);var x=-1,y=this.groupable?this.groups.length:0;this.rtl&&("hidden"!=this.vScrollBar[0].style.visibility&&(b-=this.scrollbarsize+4),"hidden"==this.hScrollBar[0].style.visibility&&(b=-parseInt(this.content.css("left"))));for(var _=0;_<v.cells.length;_++){d=(q=parseInt(te(this.columnsrow[0].cells[_]).css("left")))-b;if(l.columns.records[_].pinned&&!l.rtl&&(d=q),null==(j=this._getcolumnat(_))||!j.hidden)if(null==j||!j.adaptivehidden)if(c<=d+te(this.columnsrow[0].cells[_]).width()&&d<=c){x=_,l.mousecaptureposition.clickedcell=_;break}}if(this.rtl&&this._haspinned)for(_=v.cells.length-1;0<=_&&l.columns.records[_].pinned;_--){var q,d=q=te(this.columnsrow[0].cells[_]).coord().left-this.host.coord().left;if((null==(j=this._getcolumnat(_))||!j.hidden)&&(null==j||!j.adaptivehidden)&&c<=d+te(this.columnsrow[0].cells[_]).width()&&d<=c){x=_,l.mousecaptureposition.clickedcell=_;break}}if(null!=p&&0<=x){this._raiseEvent(1,{rowindex:this.getboundindex(p),visibleindex:p.visibleindex,row:p,group:p.group,rightclick:t,originalEvent:e});var j=this._getcolumnat(x),S=this.getcellvalue(this.getboundindex(p),j.datafield);if(this.editable&&this.editcell&&(this._currentEditableColumn=x,j.datafield==this.editcell.column&&this.getboundindex(p)==this.editcell.row&&(this.mousecaptured=!1)),"adaptive"===j.columntype){var z=document.createElement("div"),k=document.createElement("div"),C=document.createElement("a"),I=document.createElement("a"),T=document.createElement("div"),B=this.getrowdata(this.getboundindex(p));C.href="#",I.href="#",z.style.zIndex=99999,z.style.position="absolute",z.style.left="0px",z.style.top="0px",z.style.width="100%",z.style.height="100%",z.className="jqx-adaptive-view jqx-widget-content",T.style.position="relative",T.style.top="100%",T.style.textAlign="center",T.style.marginTop="-40px",k.style.position="absolute",k.style.left="0px",k.style.top="0px",k.style.width="100%",k.style.height="100%",this.theme&&(z.className="jqx-widget-content jqx-widget-content-"+this.theme);var P=document.createElement("span");P.className="jqx-icon-close",this.theme&&(P.className="jqx-icon-close jqx-widget-close-"+this.theme),P.style.zIndex=99,P.style.position="absolute",P.style.right="10px",P.style.top="10px",P.style.width="16px",P.style.height="16px",z.appendChild(k),z.appendChild(P),C.innerHTML=this.gridlocalization.okstring,I.innerHTML=this.gridlocalization.cancelstring,C.addEventListener("mousedown",function(e){for(var t={},i=l.adaptiveview.querySelectorAll("input"),r=0;r<i.length;r++){var s=i[r].value;t[i[r].getAttribute("data-column")]=s}return l.updaterow(B.uid,t),z.parentNode.removeChild(z),l.adaptiveview=null,e.stopPropagation(),!1}),I.addEventListener("mousedown",function(){return z.parentNode.removeChild(z),l.adaptiveview=null,e.stopPropagation(),!1}),this.editable&&(T.appendChild(C),T.appendChild(I),z.appendChild(T));for(var H,M,A="<table class='jqx-adaptive-table'><tr>",m=0,_=0;_<this.columns.records.length;_++){"adaptive"!==(j=this.columns.records[_]).columntype&&(0<_&&m%2==0&&(A+="</tr><tr>"),H=B[j.displayfield],""!=j.cellsformat&&te.jqx.dataFormat&&(te.jqx.dataFormat.isDate(H)?H=te.jqx.dataFormat.formatdate(H,j.cellsformat,this.gridlocalization):te.jqx.dataFormat.isNumber(H)&&(H=te.jqx.dataFormat.formatnumber(H,j.cellsformat,this.gridlocalization))),M=this.filterable?'<div datafield="'+j.datafield+'" class="'+l.toTP("jqx-grid-column-filterbutton")+'" style="position: relative; top: 4px; display: inline-block; width: 16px; height:16px;"></div>':"",this.editable?j.editable?A+="<td>"+M+j.text+": <input data-column='"+j.displayfield+"' value='"+H+"'/></td>":A+="<td>"+M+j.text+": <input data-column='"+j.displayfield+"' readonly value='"+H+"'/></td>":A+="<td>"+M+j.text+": "+H+"</td>",m++)}return A+="</tr></table>",k.innerHTML=A,P.addEventListener("mousedown",function(e){z.parentNode.removeChild(z),l.adaptiveview=null}),this.wrapper[0].appendChild(z),this.adaptiveview=z,void te(this.adaptiveview).find(".jqx-grid-column-filterbutton").on("click",function(){var e=this.getAttribute("datafield"),t=this.offsetTop;l.openmenu(e),setTimeout(function(){l.gridmenu.css("top",30+t),l.gridmenu.css("left",25),l.gridmenu.css("z-index",99999),l.gridmenu.parent().css("z-index",99999)},300)})}if(this._raiseEvent(8,{rowindex:this.getboundindex(p),column:j?j.getcolumnproperties():null,row:p,visibleindex:p.visibleindex,datafield:j?j.datafield:null,columnindex:x,value:S,rightclick:t,originalEvent:e}),j.createwidget)return!0;if(this.isTouchDevice())if("checkbox"==j.columntype&&this.editable&&this._overlayElement){if(!this.editcell)return this._overlayElement.css("visibility","hidden"),this.editcell=this.getcell(m,j.datafield),!0}else if("button"==j.columntype&&this._overlayElement)return j.buttonclick&&j.buttonclick(v.cells[x].buttonrow,e),!0;var D=!1;if(null!=this._lastmousedown&&this._mousedown-this._lastmousedown<300&&this._clickedrowindex==this.getboundindex(p)&&(this._raiseEvent(22,{rowindex:this.getboundindex(p),row:p,visibleindex:p.visibleindex,group:p.group,rightclick:t,originalEvent:e}),this._clickedcolumn==j.datafield&&this._raiseEvent(23,{rowindex:this.getboundindex(p),row:p,visibleindex:p.visibleindex,column:j?j.getcolumnproperties():null,datafield:j?j.datafield:null,columnindex:x,value:S,rightclick:t,originalEvent:e}),D=!0,this._clickedrowindex=-1,this._clickedcolumn=null,e.isPropagationStopped&&e.isPropagationStopped()))return!1;if(t)return!0;D||(this._clickedrowindex=this.getboundindex(p),this._clickedcolumn=j.datafield);var E=te.jqx.utilities.getBrowser();if("msie"==E.browser&&parseInt(E.version)<=7&&(0==x&&this.rowdetails&&(w="jqx-grid-group-collapse"),0<y&&x<=y&&(w="jqx-grid-group-collapse")),-1!=w.indexOf("jqx-grid-group-expand")||-1!=w.indexOf("jqx-grid-group-collapse"))this.rtl?0<y&&x>v.cells.length-y-1&&this._togglegroupstate?this._togglegroupstate(p.bounddata,!0):x==v.cells.length-1-y&&this.rowdetails&&this.showrowdetailscolumn&&(this._togglerowdetails(p.bounddata,!0),this.gridcontent[0].scrollTop=0,this.gridcontent[0].scrollLeft=0):0<y&&x<y&&this._togglegroupstate?this._togglegroupstate(p.bounddata,!0):x==y&&this.rowdetails&&this.showrowdetailscolumn&&(this._togglerowdetails(p.bounddata,!0),this.gridcontent[0].scrollTop=0,this.gridcontent[0].scrollLeft=0);else if(-1!=p.boundindex){var O,L,N,F=this.selectedrowindexes.slice(0),R=!1;if("none"!=l.selectionmode&&"checkbox"!=l.selectionmode&&this._selectrowwithmouse&&("multiplecellsadvanced"!=l.selectionmode&&"multiplecellsextended"!=l.selectionmode&&"multiplerowsextended"!=l.selectionmode&&"multiplerowsadvanced"!=l.selectionmode||e.ctrlKey||e.shiftKey||e.metaKey||(l.selectedrowindexes=new Array,l.selectedcells=new Array),O=!1,L=this.getboundindex(p),l._oldselectedrow!==L&&"none"!==l.selectionmode||(O=!0),-1==l.selectionmode.indexOf("cell")?("singlerow"!=l.selectionmode||l.selectedrowindex!=L&&"singlerow"==l.selectionmode)&&(this._applyrowselection(L,!0,!1,null,j.datafield),this._selectrowwithmouse(l,g,F,j.datafield,e.ctrlKey||e.metaKey,e.shiftKey)):null!=j.datafield&&(this._selectrowwithmouse(l,g,F,j.datafield,e.ctrlKey||e.metaKey,e.shiftKey),e.shiftKey||this._applycellselection(L,j.datafield,!0,!1)),l._oldselectedcell&&l._oldselectedcell.datafield==l.selectedcell.datafield&&l._oldselectedcell.rowindex==l.selectedcell.rowindex&&(R=!0),l._oldselectedcell=l.selectedcell,l._oldselectedrow=L),l.autosavestate&&l.savestate&&l.savestate(),l.editable&&l.begincelledit&&"programmatic"!=l.editmode)return e.isPropagationStopped&&e.isPropagationStopped()?!1:("selectedrow"==l.editmode?O&&!l.editcell?"checkbox"!==j.columntype&&(this._currentEditableColumn=x,l.beginrowedit(this.getboundindex(p))):l.editcell&&!O&&"none"!=l.selectionmode&&l.endrowedit(l.editcell.row):(L=this.getboundindex(p),N="click"==l.editmode||R&&"selectedcell"==l.editmode,-1==l.selectionmode.indexOf("cell")&&"dblclick"!=l.editmode&&(N=!0),N&&null!=p.boundindex&&j.editable&&(l.begincelledit(this.getboundindex(p),j.datafield,j.defaulteditorvalue),-1!=l.selectionmode.indexOf("cell")&&l._applycellselection(L,j.datafield,!1,!1)),-1!=l.selectionmode.indexOf("cell")&&"selectedcell"==l.editmode&&!R&&l.editcell&&l.endcelledit(l.editcell.row,l.editcell.column,!1,!0),"dblclick"!=l.editmode||R||!l.editcell||l.editcell.row==L&&j.datafield==l.editcell.column||l.endcelledit(l.editcell.row,l.editcell.column,!1,!0)),!0)}}return!0}},_columnPropertyChanged:function(e,t,i,r){},_rowPropertyChanged:function(e,t,i,r){},_serializeObject:function(e){if(null==e)return"";var r="";return te.each(e,function(e){0<e&&(r+=", "),r+="[";var t=0;for(var i in this)0<t&&(r+=", "),r+="{"+i+":"+this[i]+"}",t++;r+="]"}),r},isbindingcompleted:function(){return!this._loading},propertiesChangedHandler:function(e,t,i){i.width&&i.height&&2==Object.keys(i).length&&(e._updatesize(!0,!0),e._resizeWindow(),e.virtualmode&&!e._loading?e.vScrollInstance.setPosition(0):setTimeout(function(){e._renderrows(e.virtualsizeinfo)},100))},propertyChangedHandler:function(e,t,i,r){if(null!=this.isInitialized&&0!=this.isInitialized&&!(e.batchUpdate&&e.batchUpdate.width&&e.batchUpdate.height&&2==Object.keys(e.batchUpdate).length))switch(t=t.toLowerCase()){case"editable":case"showcolumnheaderlines":case"showcolumnlines":case"showrowlines":e.refresh();break;case"everpresentrowactionsmode":i!=r&&(e._removeaddnewrow(),e.render());break;case"everpresentrowactions":e._updateaddnewrowui();break;case"showeverpresentrow":case"everpresentrowposition":case"everpresentrowheight":i!=r&&(e._removeaddnewrow(),e.render());break;case"rtl":e.content.css("left",""),e.columns=e._columns,e._filterrowcache=[],e.vScrollBar.jqxScrollBar({rtl:r}),e.hScrollBar.jqxScrollBar({rtl:r}),e._initpager&&e._initpager(),e._initgroupsheader&&e._initgroupsheader(),e.render();break;case"enablebrowserselection":e.showfilterrow||(e.showstatusbar||e.showtoolbar||e.host.addClass("jqx-disableselect"),e.content.addClass("jqx-disableselect")),e.enablebrowserselection&&(e.content.removeClass("jqx-disableselect"),e.host.removeClass("jqx-disableselect"));break;case"columnsheight":32==e.columnsheight&&!e.columngroups||e._measureElement("column"),e._render(!0,!0,!0,!1,!1);break;case"rowsheight":r!=i&&(31!=e.rowsheight&&e._measureElement("cell"),e.virtualsizeinfo=null,e.rendergridcontent(!0,!1),e.refresh());break;case"scrollMode":e.vScrollInstance.thumbStep=e.rowsheight;break;case"showdefaultloadelement":e._builddataloadelement();break;case"showfiltermenuitems":case"showsortmenuitems":case"showgroupmenuitems":case"filtermode":e._initmenu();break;case"touchmode":i!=r&&(e._removeHandlers(),e.touchDevice=null,e.vScrollBar.jqxScrollBar({touchMode:r}),e.hScrollBar.jqxScrollBar({touchMode:r}),e._updateTouchScrolling(),e._arrange(),e._updatecolumnwidths(),e._updatecellwidths(),e._addHandlers());break;case"autoshowcolumnsmenubutton":i!=r&&e._rendercolumnheaders();break;case"rendergridrows":i!=r&&e.updatebounddata();break;case"editmode":i!=r&&(e._removeHandlers(),e._addHandlers());break;case"source":e.updatebounddata(),e.virtualmode&&!e._loading&&(e.loadondemand=!0,e._renderrows(e.virtualsizeinfo));break;case"horizontalscrollbarstep":case"verticalscrollbarstep":case"horizontalscrollbarlargestep":case"verticalscrollbarlargestep":this.vScrollBar.jqxScrollBar({step:this.verticalscrollbarstep,largestep:this.verticalscrollbarlargestep}),this.hScrollBar.jqxScrollBar({step:this.horizontalscrollbarstep,largestep:this.horizontalscrollbarlargestep});break;case"closeablegroups":e._initgroupsheader&&e._initgroupsheader();break;case"showgroupsheader":i!=r&&(e._arrange(),e._initgroupsheader&&e._initgroupsheader(),e._renderrows(e.virtualsizeinfo));break;case"theme":r!=i&&(te.jqx.utilities.setTheme(i,r,e.host),e.gridmenu&&e.gridmenu.jqxMenu({theme:r}),e.pageable&&e._updatepagertheme(),e.filterable&&e._updatefilterrowui(!0),e.showeverpresentrow&&e._updateaddnewrowui(!0),that._applyThemeSettings());break;case"showtoolbar":case"showfilterbar":case"toolbarheight":i!=r&&(e._arrange(),e.refresh());break;case"showstatusbar":i!=r&&(e.statusbar&&(r?e.statusbar.show():e.statusbar.hide()),e._arrange(),e.refresh());break;case"statusbarheight":i!=r&&(e._arrange(),e.refresh());break;case"filterable":case"showfilterrow":i!=r&&e.render();break;case"autoshowfiltericon":case"showfiltercolumnbackground":case"showpinnedcolumnbackground":case"showsortcolumnbackground":i!=r&&e.rendergridcontent();break;case"showrowdetailscolumn":i!=r&&e.render();break;case"scrollbarsize":i!=r&&(te.jqx.utilities.scrollBarSize=r,e._arrange());break;case"width":case"height":i!=r&&(e._updatesize(!0,!0),e._resizeWindow(),e.virtualmode&&!e._loading?e.vScrollInstance.setPosition(0):setTimeout(function(){e._renderrows(e.virtualsizeinfo)},100));break;case"altrows":case"altstart":case"altstep":i!=r&&e._renderrows(e.virtualsizeinfo);break;case"groupsheaderheight":i!=r&&(e._arrange(),e._initgroupsheader&&e._initgroupsheader());break;case"pagerheight":i!=r&&e._initpager();break;case"selectedrowindex":e.selectrow(r);break;case"selectionmode":i!=r&&("none"==r&&(e.selectedrowindexes=new Array,e.selectedcells=new Array,e.selectedrowindex=-1),e._renderrows(e.virtualsizeinfo),"checkbox"==r&&e._render(!1,!1,!0,!1,!1));break;case"showheader":r?e.columnsheader.css("display","block"):e.columnsheader.css("display","none");break;case"virtualmode":i!=r&&(e.dataview.virtualmode=e.virtualmode,e.dataview.refresh(!1),e._render(!1,!1,!1));break;case"columnsmenu":i!=r&&e.render();break;case"columngroups":e._render(!0,!0,!0,!1,!1);break;case"columns":var s;e.columns&&e.columns.length>e.headerZIndex&&(e.headerZIndex=e.columns.length+100),e._serializeObject(e._cachedcolumns)!==e._serializeObject(r)?(s=!1,e.filterable&&i&&i.records&&te.each(i.records,function(){this.filter&&(s=!0),e.dataview.removefilter(this.displayfield,this.filter)}),e._columns=null,e._filterrowcache=[],e.render(),s&&e.applyfilters(),e._cachedcolumns=e.columns,e.removesort&&e.removesort()):e[t]=i;break;case"autoheight":i!=r&&e._render(!1,!1,!0);break;case"pagermode":case"pagerbuttonscount":i!=r&&e._initpager&&(e.pagershowrowscombo&&(e.pagershowrowscombo.jqxDropDownList("destroy"),e.pagershowrowscombo=null),e.pagerrightbutton&&(e.removeHandler(e.pagerrightbutton,"mousedown"),e.removeHandler(e.pagerrightbutton,"mouseup"),e.removeHandler(e.pagerrightbutton,"click"),e.pagerrightbutton.jqxButton("destroy"),e.pagerrightbutton=null),e.pagerleftbutton&&(e.removeHandler(e.pagerleftbutton,"mousedown"),e.removeHandler(e.pagerleftbutton,"mouseup"),e.removeHandler(e.pagerleftbutton,"click"),e.pagerleftbutton.jqxButton("destroy"),e.removeHandler(te(document),"mouseup.pagerbuttons"+e.element.id),e.pagerleftbutton=null),e.pagerdiv.remove(),e._initpager());break;case"pagesizeoptions":case"pageable":case"pagesize":if(i!=r){if(e._loading)throw new Error("jqxGrid: "+e.loadingerrormessage);if(!e.host.jqxDropDownList||!e.host.jqxListBox)return void e._testmodules();if(e._initpager){if("pageable"!=t&&"pagermode"!=t)if("string"==typeof r)throw new Error("Invalid Value for: "+t+". "+("pagesize"!=t?"The expected value type is: Array of Int values.":"The expected value type is: Int."));e.dataview.pageable=e.pageable,e.dataview.pagenum=0,e.dataview.pagesize=e._getpagesize(),e.virtualmode&&e.updatebounddata(),e.dataview.refresh(!0),e._initpager(),"pagesizeoptions"==t&&null!=r&&0<r.length&&(e.pagesize=parseInt(r[0]),e.dataview.pagesize=parseInt(r[0]),e.prerenderrequired=!0,e._requiresupdate=!0,e.dataview.pagenum=-1,e.gotopage(0))}e._render(!1,!1,!1)}break;case"groups":e._serializeObject(i)!==e._serializeObject(r)&&(e.dataview.groups=r,e._refreshdataview(),e._render(!0,!0,!0,!1));break;case"groupable":i!=r&&(e.dataview.groupable=e.groupable,e.dataview.pagenum=0,e.dataview.refresh(!1),e._render(!1,!1,!0));break;case"renderstatusbar":null!=r&&e.renderstatusbar(e.statusbar);break;case"rendertoolbar":null!=r&&e.rendertoolbar(e.toolbar);break;case"disabled":r?e.host.addClass(e.toThemeProperty("jqx-fill-state-disabled")):e.host.removeClass(e.toThemeProperty("jqx-fill-state-disabled")),te.jqx.aria(e,"aria-disabled",e.disabled),e.pageable&&(e.pagerrightbutton&&(e.pagerrightbutton.jqxButton({disabled:r}),e.pagerleftbutton.jqxButton({disabled:r}),e.pagershowrowscombo.jqxDropDownList({disabled:r}),e.pagergotoinput.attr("disabled",r)),e.pagerfirstbutton&&(e.pagerfirstbutton.jqxButton({disabled:r}),e.pagerlastbutton.jqxButton({disabled:r}))),e.vScrollBar.jqxScrollBar({disabled:r}),e.hScrollBar.jqxScrollBar({disabled:r}),e.filterable&&e.showfilterrow&&e._updatefilterrowui(!0),e.showeverpresentrow&&e._updateaddnewrowui(!0)}}}),te.jqx.collection=function(e){return this.records=new Array,this.owner=e,this.updating=!1,this.beginupdate=function(){this.updating=!0},this.resumeupdate=function(){this.updating=!1},this._raiseEvent=function(e){},this.clear=function(){this.records=new Array},this.replace=function(e,t){this.records[e]=t,this.updating||this._raiseEvent({type:"replace",element:t})},this.isempty=function(e){return null==this.records[e]},this.initialize=function(e){e<1&&(e=1),this.records[e-1]=-1},this.length=function(){return this.records.length},this.indexOf=function(e){return this.records.indexOf(e)},this.add=function(e){return null!=e&&(this.records[this.records.length]=e,this.updating||this._raiseEvent({type:"add",element:e}),!0)},this.insertAt=function(e,t){return null!=e&&null!=e&&(null!=t&&(0<=e&&(e<this.records.length?(this.records.splice(e,0,t),this.updating||this._raiseEvent({type:"insert",index:e,element:t}),!0):this.add(t))))},this.remove=function(e){if(null==e||null==e)return!1;var t=this.records.indexOf(e);return-1!=t&&(this.records.splice(t,1),this.updating||this._raiseEvent({type:"remove",element:e}),!0)},this.removeAt=function(e){if(null==e||null==e)return!1;if(e<0)return!1;if(e<this.records.length){var t=this.records[e];return this.records.splice(e,1),this.updating||this._raiseEvent({type:"removeAt",index:e,element:t}),!0}return!1},this},te.jqx.dataview=function(){return(this.self=this).aggregates=!1,this.grid=null,this.uniqueId="id",this.records=[],this.rows=[],this.columns=[],this.groups=[],this.filters=new Array,this.updated=null,this.update=null,this.suspend=!1,this.pagesize=0,this.pagenum=0,this.totalrows=0,this.totalrecords=0,this.groupable=!0,this.loadedrecords=[],this.loadedrootgroups=[],this.loadedgroups=[],this.loadedgroupsByKey=[],this.virtualmode=!0,this._cachegrouppages=new Array,this.source=null,this.changedrecords=new Array,this.rowschangecallback=null,(this.that=this).destroy=function(){delete this.self,delete this.grid,delete this.uniqueId,delete this.records,delete this.rows,delete this.columns,delete this.groups,delete this.filters,delete this.updated,delete this.update,delete this.suspend,delete this.pagesize,delete this.pagenum,delete this.totalrows,delete this.totalrecords,delete this.groupable,delete this.loadedrecords,delete this.loadedrootgroups,delete this.loadedgroups,delete this.loadedgroupsByKey,delete this.virtualmode,delete this._cachegrouppages,delete this.source,delete this.changedrecords,delete this.rowschangecallback,delete this.that},this.suspendupdate=function(){this.suspend=!0},this.isupdating=function(){return this.suspend},this.resumeupdate=function(e){this.suspend=!1,null==e&&(e=!0),this.refresh(e)},this.getrecords=function(){return this.records},this.clearrecords=function(){this.recordids=new Array},this.databind=function(d,e){var t=!!d._source,h=null;this.grid&&(this.aggregates=this.grid.showgroupaggregates),t?d=(h=d)._source:h=new te.jqx.dataAdapter(d,{autoBind:!1});function i(e){if(e.totalrecords=h.totalrecords,e.virtualmode){var t={startindex:e.pagenum*e.pagesize,endindex:e.pagenum*e.pagesize+e.pagesize};if(null!=d.recordstartindex&&(t.startindex=parseInt(d.recordstartindex)),null!=d.recordendindex?t.endindex=parseInt(d.recordendindex):e.grid.pageable||(t.endindex=t.startindex+100,e.grid.autoheight&&(t.endindex=t.startindex+e.totalrecords)),d.recordendindex||(e.grid.pageable?t={startindex:e.pagenum*e.pagesize,endindex:e.pagenum*e.pagesize+e.pagesize}:(t.endindex=t.startindex+100,e.grid.autoheight&&(t.endindex=t.startindex+e.totalrecords))),t.data=h.records,e.grid.rendergridrows&&0<e.totalrecords){var i,r,s=0;if(d.records=e.grid.rendergridrows(t),d.records.length&&(s=d.records.length),d.records&&!d.records[t.startindex]&&(i=new Array,r=t.startindex,te.each(d.records,function(){i[r]=this,r++,s++}),d.records=i),0==s&&d.records&&te.each(d.records,function(){s++}),0<s&&s<t.endindex-t.startindex&&!e.grid.groupable)for(var l=d.records[0],o=0;o<t.endindex-t.startindex-s;o++){var a={};for(var n in l)a[n]="";d.records.push&&d.records.push(a)}}d.records&&0!=e.totalrecords||(d.records=new Array),e.originaldata=d.records,e.records=d.records,e.cachedrecords=d.records}else e.originaldata=h.originaldata,e.records=h.records,e.recordids=h.recordids,e.cachedrecords=h.cachedrecords}var r;r=this,h.recordids=[],h.records=new Array,h.cachedrecords=new Array,h.originaldata=new Array,h._options.virtualmode=r.virtualmode,h._options.totalrecords=r.totalrecords,h._options.originaldata=r.originaldata,h._options.recordids=r.recordids,h._options.cachedrecords=new Array,h._options.pagenum=r.pagenum,h._options.pageable=r.pageable,null!=d.type&&(h._options.type=d.type),null!=d.formatdata&&(h._options.formatData=d.formatdata),null!=d.contenttype&&(h._options.contentType=d.contenttype),null!=d.async&&(h._options.async=d.async),null!=d.updaterow&&(h._options.updaterow=d.updaterow),null!=d.addrow&&(h._options.addrow=d.addrow),null!=d.deleterow&&(h._options.deleterow=d.deleterow),0==r.pagesize&&(r.pagesize=10),h._options.pagesize=r.pagesize,this.source=d;var o=this.that;switch(d.datatype){case"local":case"array":default:null==d.localdata&&(d.localdata=[]),null!=d.localdata&&(h.unbindBindingUpdate(o.grid.element.id),(!o.grid.autobind&&o.grid.isInitialized||o.grid.autobind)&&h.dataBind(),(q=function(s){var l;if(null!=s&&""!=s&&(h._changedrecords[0]&&(l=new Array,te.each(h._changedrecords,function(e){var t=this.index,i=this.record;switch(o.grid._updateFromAdapter=!0,s){case"update":var r=o.grid.getrowid(t);return e==h._changedrecords.length-1?o.grid.updaterow(r,i):o.grid.updaterow(r,i,!1),void(o.grid._updateFromAdapter=!1);case"add":return o.grid.addrow(null,i),void(o.grid._updateFromAdapter=!1);case"remove":r=o.grid.getrowid(t);return void l.push(r)}}),0<l.length&&(o.grid.deleterow(l,!1),o.grid._updateFromAdapter=!1)),"update"==s))return;var e=o.totalrecords;i(o),null===d.localdata.notifier&&"observableArray"==d.localdata.name&&(d.localdata.notifier=function(e){if(!o._updating){o._updating=!0;var t,i=o.grid.getrowid(e.index);switch(e.type){case"add":var r=te.extend({},e.object[e.index]),s=h.getid(d.id,r,e.index);0===e.index?o.grid.addrow(s,r,"first"):o.grid.addrow(s,r);break;case"delete":o.grid.deleterow(i);break;case"update":e.path&&1<e.path.split(".").length?(t=e.path.split("."),o.grid.setcellvalue(e.index,t[t.length-1],e.newValue)):(r=te.extend({},e.object[e.index]),o.grid.updaterow(i,r))}o._updating=!1}}),"updateData"==s?(o.refresh(),o.grid._updateGridData()):(d.recordstartindex&&o.virtualmode?o.updateview(d.recordstartindex,d.recordstartindex+o.pagesize):o.refresh(),o.update(e!=o.totalrecords))})(),h.bindBindingUpdate(o.grid.element.id,q));break;case"json":case"jsonp":case"xml":case"xhtml":case"script":case"text":case"csv":case"tab":if(null!=d.localdata)return h.unbindBindingUpdate(o.grid.element.id),(!o.grid.autobind&&o.grid.isInitialized||o.grid.autobind)&&h.dataBind(),(q=function(e){var t=o.totalrecords;i(o),"updateData"==e?(o.refresh(),o.grid._updateGridData()):(d.recordstartindex&&o.virtualmode?o.updateview(d.recordstartindex,d.recordstartindex+o.pagesize):o.refresh(),o.update(t!=o.totalrecords))})(),void h.bindBindingUpdate(o.grid.element.id,q);for(var s=[],l=0,a={},n=0;n<o.filters.length;n++){var c=o.filters[n].datafield,u=o.filters[n].filter;if(u.getfilters){var g=u.getfilters();a[c+"operator"]=u.operator;for(var p=0;p<g.length;p++){g[p].datafield=c;var m,w,v=g[p].value;"datefilter"==g[p].type?g[p].value&&g[p].value.toLocaleString&&(m=o.grid.getcolumn(g[p].datafield))&&m.cellsformat?(w=o.grid.source.formatDate(g[p].value,m.cellsformat,o.grid.gridlocalization),a["filtervalue"+l]=w||g[p].value.toLocaleString()):a["filtervalue"+l]=v.toString():(a["filtervalue"+l]=v.toString(),g[p].data&&(a["filterid"+l]=g[p].data.toString()),g[p].id&&(a["filterid"+l]=g[p].id.toString())),a["filtercondition"+l]=g[p].condition,a["filteroperator"+l]=g[p].operator,a["filterdatafield"+l]=c;var f={label:v.toString()};g[p].data&&(f.value=g[p].data.toString()),g[p].id?f.value=g[p].id.toString():f.value=v.toString(),f.condition=g[p].condition,f.operator=0==g[p].operator?"and":"or",f.field=c,f.type=g[p].type;var b=!1;if(0<s.length)for(var x=0;x<s.length;x++){var y=s[x];if(y.field==c){y.filters.push(f),b=!0;break}}b||(s.push({field:c,filters:[]}),s[s.length-1].filters.push(f)),l++}}}a.filterGroups=s,a.filterscount=l,a.groupscount=o.groups.length;for(n=0;n<o.groups.length;n++)a["group"+n]=o.groups[n];null==d.recordstartindex&&(d.recordstartindex=0),null!=d.recordendindex&&0!=d.recordendindex||(o.grid.height&&-1==o.grid.height.toString().indexOf("%")?(d.recordendindex=parseInt(o.grid.height)/o.grid.rowsheight,d.recordendindex+=2):d.recordendindex=te(window).height()/o.grid.rowsheight,d.recordendindex=parseInt(d.recordendindex),o.pageable&&(d.recordendindex=o.pagesize)),o.pageable&&(d.recordstartindex=o.pagenum*o.pagesize,d.recordendindex=(o.pagenum+1)*o.pagesize),te.extend(a,{sortdatafield:o.sortfield,sortorder:o.sortfielddirection,pagenum:o.pagenum,pagesize:o.grid.pagesize,recordstartindex:d.recordstartindex,recordendindex:d.recordendindex});var _=h._options.data;h._options.data?te.extend(h._options.data,a):(d.data&&te.extend(a,d.data),h._options.data=a);var q=function(){function e(){var e=o.totalrecords;i(o),d.recordstartindex&&o.virtualmode?o.updateview(d.recordstartindex,d.recordstartindex+o.pagesize):o.refresh(),o.update(e!=o.totalrecords)}if(te.jqx.browser.msie&&te.jqx.browser.version<9)try{e()}catch(e){}else e()};h.unbindDownloadComplete(o.grid.element.id),h.bindDownloadComplete(o.grid.element.id,q),!o.grid.autobind&&o.grid.isInitialized||o.grid.autobind?h.dataBind():o.grid.isInitialized||o.grid.autobind||q(),h._options.data=_}},this.getid=function(e,t,i){if(0<te(e,t).length)return te(e,t).text();if(e&&0<e.toString().length){var r=te(t).attr(e);if(null!=r&&0<r.toString().length)return r}return i},this.getvaluebytype=function(e,t){var i,r=e;return"date"==t.type?null==(e=("NaN"==(i=new Date(e)).toString()||"Invalid Date"==i.toString())&&te.jqx.dataFormat?te.jqx.dataFormat.tryparsedate(e):i)&&(e=r):"float"==t.type?(e=parseFloat(e),isNaN(e)&&(e=r)):"int"==t.type?(e=parseInt(e),isNaN(e)&&(e=r)):"bool"==t.type&&(null!=e&&("false"==e.toLowerCase()?e=!1:"true"==e.toLowerCase()&&(e=!0)),e=1==e||0!=e&&""),e},this.setpaging=function(e){null!=e.pageSize&&(this.pagesize=e.pageSize),null!=e.pageNum&&(this.pagenum=Math.min(e.pageNum,Math.ceil(this.totalrows/this.pagesize))),this.refresh()},this.getpagingdetails=function(){return{pageSize:this.pagesize,pageNum:this.pagenum,totalrows:this.totalrows}},this._clearcaches=function(){this.sortcache={},this.sortdata=null,this.changedrecords=new Array,this.records=new Array,this.rows=new Array,this.cacheddata=new Array,this.originaldata=new Array,this.bounditems=new Array,this.loadedrecords=new Array,this.loadedrootgroups=new Array,this.loadedgroups=new Array,this.loadedgroupsByKey=new Array,this._cachegrouppages=new Array,this.recordsbyid=new Array,this.cachedrecords=new Array,this.recordids=new Array},this.addfilter=function(e,t){for(var i=-1,r=0;r<this.filters.length;r++)if(this.filters[r].datafield==e){i=r;break}-1==i?this.filters[this.filters.length]={filter:t,datafield:e}:this.filters[i]={filter:t,datafield:e}},this.removefilter=function(e){for(var t=0;t<this.filters.length;t++)if(this.filters[t].datafield==e){this.filters.splice(t,1);break}},this.getItemFromIndex=function(e){return this.records[e]},this.updaterow=function(e,t,i){if(!(this.filters&&0<this.filters.length&&!this.virtualmode)&&null!=t&&null!=e){t.uid=e,t[this.source.id]||(t[this.source.id]=t.uid);var r=this.recordsbyid["id"+e];return-1==(l=this.records.indexOf(r))?!1:(this.records[l]=t,this.cachedrecords&&(this.cachedrecords[l]=t),1!=i&&null!=i||this.refresh(),this.changedrecords[t.uid]={Type:"Update",OldData:r,Data:t},!0)}if(this.filters&&0<this.filters.length){for(var s=this.cachedrecords,r=null,l=-1,o=0;o<s.length;o++)if(s[o].uid==e){r=s[o],l=o;break}if(r){var a=this.that;for(var n in t)a.cachedrecords[l][n]=t[n];return 1!=i&&null!=i||this.refresh(),!0}}return!1},this.addrow=function(e,t,i,r){if(null==t)return!1;if(te.isEmptyObject(t)&&this.source&&this.source.datafields&&te.each(this.source.datafields,function(){var e="";"number"==this.type&&(e=null),"date"==this.type&&(e=null),"bool"!=this.type&&"boolean"!=this.type||(e=!1),t[this.name]=e}),!e||this.recordsbyid["id"+e]){t.uid=this.getid(this.source.id,t,this.totalrecords);for(var s=this.recordsbyid["id"+t.uid];null!=s;){var l=Math.floor(1e4*Math.random()).toString();t.uid=l,s=this.recordsbyid["id"+l]}}else t.uid=e;return t[this.source.id]||null!=this.source.id&&(t[this.source.id]=t.uid),t.boundindex=this.records.length,"last"==i?this.records.push(t):"number"==typeof i&&isFinite(i)?this.records.splice(i,0,t):this.records.splice(0,0,t),this.filters&&0<this.filters.length&&("last"==i?this.cachedrecords.push(t):"number"==typeof i&&isFinite(i)?this.cachedrecords.splice(i,0,t):this.cachedrecords.splice(0,0,t)),this.totalrecords++,this.virtualmode&&(this.source.totalrecords=this.totalrecords),1!=r&&null!=r||this.refresh(),this.changedrecords[t.uid]={Type:"New",Data:t},!0},this.deleterow=function(e,t){if(null==e)return!1;var i=this.filters&&0<this.filters.length;if(this.recordsbyid["id"+e]&&!i){var r=this.recordsbyid["id"+e],s=this.records.indexOf(r);if(this.grid&&this.grid.sortable&&"many"==this.grid.sortmode)for(var l=0;l<this.records.length;l++)if(this.records[l].boundindex===r.boundindex){s=l;break}return this.changedrecords[e]={Type:"Delete",Data:this.records[s]},this.records.splice(s,1),this.totalrecords--,this.virtualmode&&(this.source.totalrecords=this.totalrecords),1!=t&&null!=t||this.refresh(),!0}if(this.filters&&0<this.filters.length){for(var o=this.cachedrecords,r=null,s=-1,l=0;l<o.length;l++)if(o[l].uid==e){r=o[l],s=l;break}if(r)return this.cachedrecords.splice(s,1),1!=t&&null!=t||(this.totalrecords=0,this.records=this.cachedrecords,this.refresh()),!0}return!1},this.reload=function(e,t,i,r,s,l,o){var a,n,d=this.that,h=new Array,c=e,u=t,g=i,p=r,m=u.length,w=0;if(this.columns=[],this.bounditems=new Array,this.loadedrecords=new Array,this.loadedrootgroups=new Array,this.loadedgroups=new Array,this.loadedgroupsByKey=new Array,this._cachegrouppages=new Array,this.recordsbyid={},0==this.totalrecords&&(Object.size=function(e){var t,i=0;for(t in e)e.hasOwnProperty(t)&&i++;return i},a=Object.size(c),this.totalrecords=a,te.each(this.records,function(e){var i=0;return te.each(this,function(e,t){d.columns[i++]=e}),!1})),this.virtualmode){if(this.pageable)return void this.updateview();l=0;if(!this.groupable)return void this.updateview();o=this.totalrecords}else l=0,o=this.totalrecords;return this.groupable&&0<this.groups.length&&this.loadgrouprecords?(n=l,n=this.loadgrouprecords(0,l,o,g,0,p,u,m,h)):w=this.loadflatrecords(l,o,g,0,p,u,m,h),0<m&&u.splice(0,+m),0<this.groups.length&&this.groupable?this.totalrows=n:this.totalrows=w,h},this.loadflatrecords=function(e,t,i,r,s,l,o,a){var n=this.that,d=e,h=e;t=Math.min(t,this.totalrecords);for(var c,u=null!=this.sortdata,g=(this.source.id&&("local"==this.source.datatype||"array"==this.source.datatype||this.source.datatype),u?this.sortdata:this.records),p=e;p<t;p++){var m,w={};u?(m=(w=te.extend({},g[p].value))[n.uniqueId],w.boundindex=g[p].index,null==w.uid&&(w.uid=n.getid(n.source.id,w,w.boundindex)),n.recordsbyid["id"+w.uid]=g[p].value,(n.loadedrecords[d]=w).uniqueid=n.generatekey(),n.bounditems[w.boundindex]=w):(m=(w=new Object(g[p]))[n.uniqueId],w.boundindex=d,null==(n.loadedrecords[d]=w).uid&&(w.uid=n.getid(n.source.id,w,d)),n.recordsbyid["id"+w.uid]=g[p],w.uniqueid=n.generatekey(),n.bounditems[this.bounditems.length]=w),(o<=r||m!=l[r][n.uniqueId]||s&&s[m])&&(a[a.length]=r),l[r]=w,r++,w.visibleindex=h,h++,d++}return n.grid.summaryrows&&(c=d,te.each(n.grid.summaryrows,function(){var e=te.extend({},this);e.boundindex=t++,(n.loadedrecords[c]=e).uniqueid=n.generatekey(),n.bounditems[n.bounditems.length]=e,l[r]=e,r++,e.visibleindex=h,h++,c++})),h},this.updateview=function(e,t){var i=this.that,r=this.pagesize*this.pagenum,s=0,l=new Array,o=this.filters,a=this.updated,n=l.length;if(this.pageable){if(this.virtualmode)if(this.groupable&&0!=this.groups.length){if(this.groupable&&0<this.groups.length&&this.loadgrouprecords){if(null!=this._cachegrouppages[this.pagenum+"_"+this.pagesize])return this.rows=this._cachegrouppages[this.pagenum+"_"+this.pagesize],void(this.totalrows=this.rows.length);var d=this.pagesize*(1+this.pagenum);return d>this.totalrecords&&(d=this.totalrecords),this.loadgrouprecords(0,this.pagesize*this.pagenum,d,o,s,a,l,n,[]),this._cachegrouppages[this.pagenum+"_"+this.pagesize]=this.rows,void(this.totalrows=this.rows.length)}}else this.loadflatrecords(this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum),o,s,a,l,n,[]),this.totalrows=l.length}else if(this.virtualmode&&(!this.groupable||0==this.groups.length)){var h=this.pagesize;0==h&&(h=Math.min(100,this.totalrecords));this.pagenum;if(0==this.loadedrecords.length&&0,null!=e&&null!=t?this.loadflatrecords(e,t,o,s,a,l,n,[]):this.loadflatrecords(this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum),o,s,a,l,n,[]),this.totalrows=this.loadedrecords.length,(this.rows=l).length>=h)return}if(this.groupable&&this.pageable&&0<this.groups.length&&this._updategroupsinpage)l=this._updategroupsinpage(i,o,r,s,n,this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum));else for(var c=this.pagesize*this.pagenum;c<this.pagesize*(1+this.pagenum);c++){null!=(u=c<this.loadedrecords.length?this.loadedrecords[c]:null)&&((!this.pagesize||r>=this.pagesize*this.pagenum&&r<=this.pagesize*(this.pagenum+1))&&(l[s]=u,s++),r++)}if((0==l.length||l.length<this.pagesize)&&!this.pageable&&this.virtualmode){s=l.length;for(var u,g=l.length,c=this.pagesize*this.pagenum;c<this.pagesize*(1+this.pagenum)-g;c++){(u={}).boundindex=c+g,u.visibleindex=c+g,u.uniqueid=i.generatekey(),u.empty=!0,i.bounditems[c+g]=u,l[s]=u,s++}}this.rows=l},this.generatekey=function(){function e(){return 16*(1+Math.random())|0}return""+e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},this.reloaddata=function(){this.reload(this.records,this.rows,this.filter,this.updated,!0)},this.refresh=function(e){if(!this.suspend){null==e&&(e=!0);var t=this.rows.length,i=this.totalrows;if(0<this.filters.length&&!this.virtualmode){var r="",s=this.cachedrecords.length,l=new Array;this.totalrecords=0;var o=this.cachedrecords;this._dataIndexToBoundIndex=new Array;var a=this.filters.length;if(null!=this.source&&null!=this.source.filter&&null!=this.source.localdata){var n=this.source.filter(this.filters,o,s);null==n&&(n=new Array);for(var d=0;d<s;d++){var h=o[d];(c=0<=n.indexOf(h))?(l[l.length]=te.extend({dataindex:d},h),this._dataIndexToBoundIndex[d]={boundindex:l.length-1}):this._dataIndexToBoundIndex[d]=null}this.records=l}else if(null==this.source.filter||null==this.source.filter){for(d=0;d<s;d++){for(var h=o[d],c=void 0,u=0;u<a;u++){var g,r=this.filters[u].filter,p=h[this.filters[u].datafield],m=r.evaluate(p);!this.grid.filter||void 0!==(g=this.grid.filter(p,h,this.filters[u].datafield,r,m))&&(m=g),c=null==c?m:"or"==r.operator?c||m:c&&m}c?(l[l.length]=te.extend({dataindex:d},h),this._dataIndexToBoundIndex[d]={boundindex:l.length-1}):this._dataIndexToBoundIndex[d]=null}this.records=l}if(this.sortdata){if(!this.grid||"many"===this.grid.sortmode){for(var w=this.grid.getsortcolumns(),v=0;v<w.length;v++){var f=(y=w[v]).dataField;this.grid.sortby(f,y.ascending,null)}return}var b=this.sortfield;if(this.sortcache[b]){this.sortdata=null;var x=this.sortcache[b].direction;return this.sortcache[b]=null,void this.sortby(this.sortfield,x)}}}else if(0==this.filters.length&&!this.virtualmode&&this.cachedrecords){this.totalrecords=0;o=this.cachedrecords;if(this.records=o,this.sortdata){if(!this.grid||"many"===this.grid.sortmode){for(w=this.grid.getsortcolumns(),v=0;v<w.length;v++){var y,f=(y=w[v]).dataField;this.grid.sortby(f,y.ascending,null)}return}b=this.sortfield;if(this.sortcache[b]){this.sortdata=null;x=this.sortcache[b].direction;return this.sortcache[b]=null,void this.sortby(this.sortfield,x)}}}var _,q=this.reload(this.records,this.rows,this.filter,this.updated,e);(this.updated=null)!=this.rowschangecallback&&(_=this.rows,i!=this.totalrows&&this.rowschangecallback({type:"PagingChanged",data:this.getpagingdetails()}),t!=_.length&&this.rowschangecallback({type:"RowsCountChanged",data:{previous:t,current:_.length}}),(0<q.length||t!=_.length)&&this.rowschangecallback({type:"RowsChanged",data:{previous:t,current:_.length,diff:q}}))}},this}}(jqxBaseFramework);