!function(a){var e=0;a.jqx.jqxWidget("jqxScrollView","",{}),a.extend(a.jqx._jqxScrollView.prototype,{defineInstance:function(){var t={width:320,height:320,buttonsOffset:[0,0],moveThreshold:.5,currentPage:0,animationDuration:300,showButtons:!0,bounceEnabled:!0,slideShow:!1,slideDuration:3e3,disabled:!1,_mouseDown:!1,_movePermited:!1,_startX:-1,_startOffset:-1,_lastOffset:-1,_events:["pageChanged"],_eventsMap:{mousedown:a.jqx.mobile.getTouchEventName("touchstart"),mouseup:a.jqx.mobile.getTouchEventName("touchend"),mousemove:a.jqx.mobile.getTouchEventName("touchmove")}};return this===a.jqx._jqxScrollView.prototype||a.extend(!0,this,t),t},createInstance:function(){e+=1,this._instanceId=e,this._isTouchDevice=a.jqx.mobile.isTouchDevice();var t=this;a.jqx.utilities.resize(this.host,function(){t.refresh()})},resize:function(t,e){this.width=t,this.height=e,this.refresh()},refresh:function(){var t;this.host.width(this.width),this.host.height(this.height),this._render(),this._performLayout(),0<=this.moveThreshold.toString().indexOf("%")&&(this.moveThreshold=parseInt(this.moveThreshold,10)/100),this._refreshPages(),this._refreshButtons(),this._removeEventListeners(),this._addEventListeners(),this._changePage(this.currentPage,!1,0),this.slideShow?(t=this).slideShowTimer=setInterval(function(){t.currentPage>=t._pages.length-1?t._changePage(0,!0,t.animationDuration):t._changePage(t.currentPage+1,!0,t.animationDuration)},this.slideDuration):null!=this.slideShowTimer&&clearInterval(this.slideShowTimer)},destroy:function(){this.host.remove()},_getEvent:function(t){return this._isTouchDevice?this._eventsMap[t]:t},_eventNamespace:function(){return".scrollview"+this._instanceId},_removeEventListeners:function(){this.removeHandler(this._innerWrapper),this.removeHandler(this.host,this._getEvent("mousemove")+this._eventNamespace()),this.removeHandler(a(document),this._getEvent("mouseup")+this._eventNamespace())},_getCoordinate:function(t,e){if(this._isTouchDevice){var s=a.jqx.position(t);if("pageX"==e)return s.left;if("pageY"==e)return s.top;if(t.originalEvent.touches)return t.originalEvent.touches[0][e]}return t[e]},_draggedRight:function(){if(0<this.currentPage){var t=this.currentPage-1,e=a(this._pages[t]);if(e.offset().left+e.outerWidth()-this.host.offset().left>=this.host.width()*this.moveThreshold)return this.changePage(t),!0}return!1},_draggedLeft:function(){if(this.currentPage+1<this._pages.length){var t=this.currentPage+1,e=a(this._pages[t]);if(this.host.width()-(e.offset().left-this.host.offset().left)>=this.host.width()*this.moveThreshold)return this.changePage(t),!0}return!1},_dropTarget:function(){var t=this._movedLeft?this._draggedLeft():this._draggedRight();t||this.changePage(this.currentPage,!1)},_scrollEnabled:function(t){return!!this._mouseDown&&(this._movePermited||15<=Math.abs(this._getCoordinate(t,"pageX")-this._startX)&&(this._movePermited=!0),this._movePermited)},_setMoveDirection:function(t){this._lastOffset>t?this._movedLeft=!0:this._movedLeft=!1},_getBounceOffset:function(t){var e=-(this._innerWrapper.width()-this.host.width());return 0<t?t=0:t<e&&(t=e),t},_addEventListeners:function(){var t,e,s=this;this.addHandler(this._innerWrapper,this._getEvent("mousedown")+this._eventNamespace(),function(t){s._mouseDown=!0,s._startX=s._getCoordinate(t,"pageX"),s._startOffset=s._lastOffset=parseInt(s._innerWrapper.css("margin-left"),10)}),this.addHandler(this.host,"dragstart",function(){return!1}),this.addHandler(this.host,this._getEvent("mousemove")+this._eventNamespace(),function(t){if(s._scrollEnabled(t)){var e=s._startOffset+s._getCoordinate(t,"pageX")-s._startX;return s.bounceEnabled||(e=s._getBounceOffset(e)),s._innerWrapper.css("margin-left",e),s._setMoveDirection(e),s._lastOffset=e,t.preventDefault(),!1}return!0}),this.addHandler(a(document),this._getEvent("mouseup")+this._eventNamespace(),function(t){s._movePermited&&s._dropTarget(),s._movePermited=!1,s._mouseDown=!1});try{""==document.referrer&&!window.frameElement||(null!=window.top&&window.parent&&document.referrer&&(t=document.referrer),-1!=t.indexOf(document.location.host)&&(e=function(t){s._movePermited&&s._dropTarget(),s._movePermited=!1,s._mouseDown=!1},window.top.document.addEventListener?window.top.document.addEventListener("mouseup",e,!1):window.top.document.attachEvent&&window.top.document.attachEvent("onmouseup",e)))}catch(t){}},_render:function(){this.host.addClass(this.toThemeProperty("jqx-scrollview")),this.host.css({overflow:"hidden",position:"relative"})},_performLayout:function(){this.host.css({width:this.width,height:this.height})},_renderPages:function(){this._innerWrapper||(this._innerWrapper=a("<div/>"),this.host.wrapInner(this._innerWrapper),this._innerWrapper=this.host.children().first()),this._innerWrapper.addClass(this.toThemeProperty("jqx-scrollview-inner-wrapper")),this._innerWrapper.height(this.host.height())},_refreshPage:function(t){t.addClass(this.toThemeProperty("jqx-scrollview-page")),this._performPageLayout(t)},_refreshPages:function(){var t=this,e=0;this._renderPages(),this._pages=this._innerWrapper.children(),this._pages.each(function(){t._refreshPage(a(this)),e+=a(this).outerWidth(!0)}),this._innerWrapper.width(e)},_performPageLayout:function(t){t.css("float","left"),t.width(this.host.width()),t.height(this.host.height())},_refreshButtons:function(){this._renderButtons(),this._removeButtonsEventListeners(),this._addButtonsEventListeners(),this._performButtonsLayout()},_removeButtonsEventListeners:function(){var t=this;this._buttonsContainer.children().each(function(){t.removeHandler(a(this))})},_addButtonsEventListeners:function(){var e=this;this._buttonsContainer.children().each(function(t){e.addHandler(a(this),"click",function(){e.changePage(t)})})},_performButtonsLayout:function(){var t=(this.host.width()-this._buttonsContainer.width())/2,e=0!=this._buttonsContainer.outerHeight()?this._buttonsContainer.outerHeight():14;this._buttonsContainer.css({position:"absolute",left:t+parseInt(this.buttonsOffset[0],10),top:this.host.height()-2*e+parseInt(this.buttonsOffset[1],10)-1})},_renderButtons:function(){var t;this._buttonsContainer&&this._buttonsContainer.remove(),this._buttons=[],this._buttonsContainer=a("<span/>");for(var e=0;e<this._pages.length;e+=1)t=a('<span class="'+this.toThemeProperty("jqx-scrollview-button")+" "+this.toThemeProperty("jqx-fill-state-normal")+'"></span>'),this._buttonsContainer.append(t),this._buttons[e]=t;this._buttonsContainer.appendTo(this.host),this.showButtons||this._buttonsContainer.hide()},_raiseEvent:function(t,e){var s=new a.Event(this._events[t]);return s.args=e,this.host.trigger(s)},_swapButtons:function(t,e){this._buttons[t].removeClass(this.toThemeProperty("jqx-scrollview-button-selected")),this._buttons[t].removeClass(this.toThemeProperty("jqx-fill-state-pressed")),this._buttons[e].addClass(this.toThemeProperty("jqx-scrollview-button-selected")),this._buttons[e].addClass(this.toThemeProperty("jqx-fill-state-pressed"))},_changePage:function(t,e,s){var i,n,r,o,h;this.disabled||(i=a(this._pages[t]),n=(this.host.width()-i.width())/2,r=i.offset().left-this._innerWrapper.offset().left-n,o=this.currentPage,h=this,void 0===s&&(s=this.animationDuration),this._innerWrapper.stop(),this._swapButtons(this.currentPage,t),this.currentPage=t,this._innerWrapper.animate({marginLeft:-r},s,function(){e&&h._raiseEvent(0,{currentPage:t,oldPage:o})}))},propertyChangedHandler:function(t,e,s,i){if("currentPage"===e)t.currentPage=s,t.changePage(i);else if(/(buttonsOffset|width|height)/.test(e))t.refresh();else{if("showButtons"===e)return void(i?t._buttonsContainer.css("display","block"):t._buttonsContainer.css("display","none"));"slideShow"==e&&t.refresh()}},changePage:function(t){if(t>=this._pages.length||t<0)throw new Error("Invalid index!");this._changePage(t,!0)},forward:function(){this.currentPage+1<this._pages.length&&this.changePage(this.currentPage+1)},back:function(){0<=this.currentPage-1&&this.changePage(this.currentPage-1)}})}(jqxBaseFramework);