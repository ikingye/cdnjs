!function($){$.jqx.jqxWidget("jqxPivotDesigner","",{}),$.extend($.jqx._jqxPivotDesigner.prototype,{defineInstance:function(){var t={type:"pivotGrid",target:null,dataFields:null};return $.extend(!0,this,t),t},_instanceId:0,createInstance:function(t){this.element;var e=this.host,i=this;this.target&&this.target.getInstance&&(this.target=this.target.getInstance());var s=[{widget:"jqxWindow",src:"jqxwindow.js"},{widget:"jqxButton",src:"jqxbuttons.js"},{widget:"jqxCheckBox",src:"jqxcheckbox.js"},{widget:"jqxInput",src:"jqxinput.js"},{widget:"jqxScrollBar",src:"jqxscrollbar.js"},{widget:"jqxListBox",src:"jqxlistbox.js"},{widget:"jqxDropDownList",src:"jqxdropdownlist.js"},{widget:"jqxDragDrop",src:"jqxdragdrop.js"}];for(var n in s)if(!window[s[n].widget])throw new Error("Please include "+s[n].src);this._isTouchDevice();var a="jqx-rc-all jqx-widget jqx-pivotgrid jqx-designer-host"+this.toThemeProperty("jqx-widget-content");e.append("<div class='"+a+"' style='width: 100%; height: 100%; overflow:hidden; onselectstart='return false;' oncontextmenu='return false;''><div class='labelFields jqx-widget' style='position: absolute;'>Pivot Table Fields</div><div class='labelFilters jqx-widget' style='position: absolute;'>Filters</div><div class='labelColumns jqx-widget' style='position: absolute;'>Columns</div><div class='labelRows jqx-widget' style='position: absolute;'>Rows</div><div class='labelValues jqx-widget' style='position: absolute;'>Values</div><div class='divFields' style='position: absolute;'></div><div class='divFilters' style='position: absolute;'></div><div class='divColumns' style='position: absolute;'></div><div class='divRows' style='position: absolute;'></div><div class='divValues' style='position: absolute;'></div></div>"),this._listBoxes={fields:i.host.find(".divFields"),rows:i.host.find(".divRows"),columns:i.host.find(".divColumns"),values:i.host.find(".divValues"),filters:i.host.find(".divFilters")},$.jqx.utilities.resize(i.host,function(){i._resize()},!1)},destroy:function(){$.jqx.utilities.resize(this.host,null,!0),this.target&&delete this.target._pivotDesigner},_getLocalizedString:function(t){var e=this.target?this.target._localizedStrings:{};switch(t){case"fields":return e.fieldslabel||"Pivot Fields";case"calculation":return e.calculation||"Calculation";case"filters":return e.filterslabel||"Filters";case"rows":return e.rowslabel||"Rows";case"columns":return e.columnslabel||"Columns";case"values":return e.valueslabel||"Values";case"of":return e.of||"of";case"to":return e.to||"to";case"move":return e.move||"Move";case"remove":return e.remove||"Remove";case"count":return e.count||"Count";case"sum":return e.sum||"Sum";case"average":return e.avgerage||"Average";case"product":return e.product||"Product";case"min":return e.min||"Min";case"max":return e.max||"Max"}return e[t]?e[t]:t},_isTouchDevice:function(){if(null!=this.touchDevice)return this.touchDevice;var t=$.jqx.mobile.isTouchDevice();if(this.touchDevice=t,1==this.touchmode){if($.jqx.browser.msie&&$.jqx.browser.version<9)return this.enablehover=!1;t=!0,$.jqx.mobile.setMobileSimulator(this.element),this.touchDevice=t}else 0==this.touchmode&&(t=!1);return t&&0!=this.touchModeStyle&&(this.touchDevice=!0,this.host.addClass(this.toThemeProperty("jqx-touch")),this.host.find("jqx-widget-content").addClass(this.toThemeProperty("jqx-touch")),this.host.find("jqx-widget-header").addClass(this.toThemeProperty("jqx-touch")),this.scrollbarsize=this.touchscrollbarsize),t},_resize:function(){var t=this._listBoxes,e=this.host,i=e.height()-10,s=e.width()-10,n=$("<span style='white-space:nowrap;'></span>");this.host.append(n);for(var a=0,o=["fields","filters","rows","columns","values"],l=0;l<o.length;l++){n.text(this._getLocalizedString(o[l]));var r=n.height();a<r&&(a=r)}n.remove();var d=this.host.position(),u=d.left+5,g=d.top+5;g+=5,e.find(".labelFields").css({left:u,top:g,width:s-10,height:a}),g+=a;var c=(i-3*(a+10))/3,v=(s-5)/2;t.fields.css({left:u,top:g,background:"white"}),t.fields.jqxListBox({width:s,height:c,allowDrop:!0,allowDrag:!0}),g+=10+c,e.find(".labelFilters").css({left:u,top:g,width:v,height:a}),e.find(".labelColumns").css({left:u+v+5,top:g,width:v,height:a}),g+=a,t.filters.css({left:u,top:g}),t.filters.jqxListBox({width:v,height:c}),t.columns.css({left:u+v+5,top:g}),t.columns.jqxListBox({width:v,height:c}),g+=10+c,e.find(".labelRows").css({left:u,top:g,width:v,height:a}),e.find(".labelValues").css({left:u+v+5,top:g,width:v,height:a}),g+=a,e.find(".divRows").css({left:u,top:g}),e.find(".divRows").jqxListBox({width:v,height:c}),e.find(".divValues").css({left:u+v+5,top:g}),e.find(".divValues").jqxListBox({width:v,height:c})},_setupListBoxes:function(){var s=this,e=(s.host,s._listBoxes);for(var t in e){var i=e[t];i.off(),i.jqxListBox({allowDrag:!0,allowDrop:!0,renderer:function(t,e,i){return s._getCustomRendererElement(e,s._listBoxes.fields[0]!=this.host[0])}}).on("dragStart",function(t){e.rows.jqxListBox({dropAction:"copy"}),e.columns.jqxListBox({dropAction:"copy"}),e.filters.jqxListBox({dropAction:"copy"}),e.values.jqxListBox({dropAction:"copy"}),e.fields.jqxListBox({dropAction:"copy"})}).on("dragEnd",function(t){s._moveElement($(this),t.args.dropTargetElement,t.args.index,t.args.value)})}},_moveElement:function(t,e,i,s){var n=this,a=n._listBoxes;if(e){if(t[0]!=a.fields[0]&&t.jqxListBox("removeAt",i),e==a.fields[0])a.fields.jqxListBox("clear"),n._populateListBox(a.fields,n._allFields,"all");else{if(t[0]==a.fields[0]&&e==a.values[0]||(a.rows[0]!=e&&n._removeItem(a.rows,s),a.columns[0]!=e&&n._removeItem(a.columns,s)),e==a.values[0]){for(var o=a.values.jqxListBox("getItems"),l=0;l<o.length;l++)a.values.jqxListBox("updateAt",{label:o[l].label,value:$.extend({},o[l].value)},l);n._autoAssignAggregationFunctions()}n._removeDuplicates(a.rows),n._removeDuplicates(a.columns),n._removeDuplicates(a.filters)}n._updateCurrentSettings(),n._updateListBoxLabels();var r=$(e).jqxListBox("width");$(e).jqxListBox("width",r+1),$(e).jqxListBox("width",r-1);r=t.jqxListBox("width");t.jqxListBox("width",r+1),t.jqxListBox("width",r-1),n._updateListBoxLabels(),n._refreshPivotGrid(n._targetCurrentSettings)}},refresh:function(){var t=this;t.target&&(t.target._pivotDesigner=this),t._readPivotSettings(),t._setupListBoxes(),t._resize(),t._updateListBoxLabels()},_updateCurrentSettings:function(){var t=this,e=t._listBoxes,i=$.extend({},t._targetCurrentSettings),s={},n=["rows","columns","values","filters"];for(var a in n){if(l=i[n[a]])for(var o=0;o<l.length;o++){s[c=l[o].dataField+"_"+(l[o].function||"")]=$.extend({},l[o]),delete s[c].dataField,delete s[c].text}}for(var a in i=$.extend({},t._targetInitSettings),n){if(l=i[n[a]])for(o=0;o<l.length;o++){s[c=l[o].dataField+"_"+(l[o].function||"")]=$.extend(s[c]||{},l[o]),delete s[c].dataField,delete s[c].text}}for(var a in e){var l=e[a].jqxListBox("getItems");i[a]=[];for(o=0;o<l.length;o++){var r=l[o].value.dataField,d=l[o].value.text,u="values"==a?l[o].value.function:void 0,g={dataField:r,text:d||r};u&&(g.function=u),g.text=t._getFieldLabel(u,r);var c,v=s[c=g.dataField+"_"+(u||"")];v&&$.extend(g,v),i[a].push(g)}}t._targetCurrentSettings=i},_refreshPivotGrid:function(t){var e=new $.jqx.pivot(this.target.source.dataAdapter,t);$(this.target.element).jqxPivotGrid({source:e});var i=$(this.target.element).jqxPivotGrid("getInstance");i._pivotRows.autoResize(),i._pivotColumns.autoResize(),i.refresh(),this._targetCurrentSettings=t},_autoAssignAggregationFunctions:function(){for(var t=this.host.find(".divValues").jqxListBox("getItems"),e={},i=0;i<t.length;i++)t[i].value.function&&(e[t[i].value.dataField]||(e[t[i].value.dataField]={}),e[t[i].value.dataField][t[i].value.function]=!0);for(var s=this.target.source.getFunctions(),i=0;i<t.length;i++){var n=!1;if(!t[i].value.function){for(var a in e[t[i].value.dataField]||(e[t[i].value.dataField]={}),s)if(!e[t[i].value.dataField][a]){e[t[i].value.dataField][a]=!0,t[i].value.function=a,n=!0;break}if(!n)for(var a in s){t[i].value.function=a;break}}}},_updateListBoxLabels:function(){var a=this;a.host.find(".pivot-designer-item-button").off();var o=a._listBoxes;for(var t in o){var e=o[t],i=e.jqxListBox("getItems");if(i)for(var s=0;s<i.length;s++){var n=void 0;if("values"==t&&!(n=i[s].value.function))throw"Unspecified pivot aggregation function";i[s].label=a._getFieldLabel(n,i[s].value.dataField),e.jqxListBox("updateAt",{label:i[s].label,value:i[s].value},s)}}a.host.find(".pivot-designer-item-button").off(),a.host.find(".pivot-designer-item-button").on("click",function(t){for(var e in o)for(var i=o[e].jqxListBox("getItems"),s=0;s<i.length;s++){var n=$(i[s].element).find(".pivot-designer-item-button");if(0<n.length&&n[0]==this)return void a._showDesignerItemContextMenu(e,s)}})},_showDesignerItemContextMenu:function(t,e){var i=this;if(!i._isWindowOpen()){var s=i._listBoxes,n={moveOperations:{}};for(var a in s)a!=t&&(n.moveOperations[i._getLocalizedString("move")+" "+i._getLocalizedString("to")+" "+i._getLocalizedString(a)]={dropTarget:a});if("values"==t){var o=i.target.source.getFunctions(),l={};for(var a in o)l[i._getLocalizedString(a)]={function:a};n.functions=l}i._windowData={type:t,itemIndex:e,fieldSettings:n},"filters"==t?(this._filtersWindow||this._createFiltersWindow(),this._filtersWindow.jqxWindow("open"),this._updateFiltersWindowData()):(this._settingsWindow||this._createSettingsWindow(),this._settingsWindow.jqxWindow("open"),this._updateWindowData())}},_isWindowOpen:function(){return this._settingsWindow&&this._settingsWindow.jqxWindow("isOpen")||this._filtersWindow&&this._filtersWindow.jqxWindow("isOpen")},_getFieldLabel:function(t,e){if(t)return this._getValueFieldLabel(t,e);var i=this._targetInitSettings;for(var s in i)if("values"!=s){var n=i[s];for(var a in n)if(n[a].dataField==e&&n[a].text)return n[a].text}return e},_getValueFieldLabel:function(t,e){var i=this._getLocalizedString(t)||t,s=void 0,n=this._targetInitSettings;if(n.values)for(var a in n.values)if(n.values[a].dataField==e&&n.values[a].function==t&&null!=(s=n.values[a].text))break;return s||i+" "+this._getLocalizedString("of")+" "+e},_removeItem:function(t,e){for(var i=t.jqxListBox("getItems"),s=0,n=0;n<i.length;n++){t.jqxListBox("getItem",n).value.dataField==e.dataField&&(t.jqxListBox("removeAt",n-s),s++)}},_getCustomRendererElement:function(t,e){return e?"<div><div style='width: 16px;height: 16px; float:left; margin-top: 1px;' class='pivot-designer-item-button jqx-pivotgrid-settings-icon'></div><div>"+t+"</div></div>":"<div><div style='height: 16px; float:left; margin-top: 2px;'></div><div>"+t+"</div></div>"},_readPivotSettings:function(){var t,e,i,s,n,a,o=this;function l(t,e,i){if(Array.isArray(t))for(var s=0;s<t.length;s++){var n=t[s].name||t[s].dataField;n&&0!=n.length&&(e[n]||(e[n]={text:n,dataField:n}),null!=t[s].text&&"values"!=i&&(e[n].text=t[s].text),e[n].function=t[s].function)}}!o.target||(t=o.target.source)&&(!(e=t.dataAdapter)||(i=e._source)&&(o._targetCurrentSettings=$.extend({},o.target.source._initSettings),o._targetInitSettings=$.extend({},o.target.source._initSettings),s={},n={dataFields:this.dataFields,adapterDataFields:i.datafields,rows:o.target.source.rows,columns:o.target.source.columns,values:o.target.source.values,filters:o.target.source.filters},Array.isArray(n.dataFields)?l(n.dataFields,s):l(n.adapterDataFields,s),l(n.filters,s,"filters"),l(n.rows,s,"rows"),l(n.columns,s,"columns"),l(n.values,s,"values"),this._allFields=s,o.host,a=o._listBoxes,o._populateListBox(a.fields,s,"all"),o._populateListBox(a.filters,n.filters,"filters"),o._populateListBox(a.rows,n.rows,"rows"),o._populateListBox(a.columns,n.columns,"columns"),o._populateListBox(a.values,n.values,"values")))},_populateListBox:function(t,e,i){var s=[],n=0;for(var a in e){var o=e[a].dataField,l=e[a].text||this._allFields[o].text||o;s[n]={text:l,value:{text:l,dataField:o,function:e[a].function||void 0}},"values"!=i&&(s[n].value.function=void 0),n++}t.jqxListBox({source:s,displayMember:"text",valueMember:"value"})},_removeDuplicates:function(t){for(var e=t.jqxListBox("getItems"),i={},s=0;s<e.length;s++){var n=e[s].label;null!=i[n]?(t.jqxListBox("removeAt",s),e.splice(s,1),s--):i[n]=!0}},_createSettingsWindow:function(){var i=this,t="<div id='pivotFieldSettingsWindow' style='width: 300px; height: 200px'><table style='width: 100%;'><tr><td style='height: 30px;'>"+i._getLocalizedString("move")+" "+i._getLocalizedString("to")+"</td><td><div style='width: 100%;' class='lbPivotFieldMoveTo'></div></td></tr><tr><td style='height: 30px;'>"+i._getLocalizedString("alignment")+"</td><td><div style='width: 100%;' class='lbAlignment'></div></td></tr><tr class='valueField'><td style='height: 30px;'>"+i._getLocalizedString("calculation")+"</td><td><div style='width: 100%;' class='lbCalculation'></div></td></tr><tr class='valueField'><td style='height: 30px;'>"+i._getLocalizedString("numberformat")+"</td><td></td></tr><tr class='valueField'><td style='height: 30px;'>"+i._getLocalizedString("cellalignment")+"</td><td><div style='width: 100%;' class='lbCellsAlignment'></div></td></tr><tr class='valueField'><td style='height: 30px;'>"+i._getLocalizedString("prefix")+"</td><td><input type='text' style='width: 100%;' class='txtPrefix'></input></td></tr><tr class='valueField'><td style='height: 30px;'>"+i._getLocalizedString("decimalplacestext")+"</td><td><input type='text' style='width: 100%;' class='txtDecimalPlaces'></input></td></tr><tr class='valueField'><td style='height: 30px;'>"+i._getLocalizedString("thousandsseparatortext")+"</td><td><input type='text' style='width: 100%;' class='txtThousandsSeparator'></input></td></tr><tr class='valueField'><td style='height: 30px;'>"+i._getLocalizedString("decimalseparatortext")+"</td><td><input type='text' style='width: 100%;' class='txtDecimalSeparator'></input></td></tr><tr class='valueField'><td style='height: 30px;'>"+i._getLocalizedString("nagativebracketstext")+"</td><td><div style='width: 100%;' class='checkBoxNagativeWithBrackets'></input></td></tr><tr><td style='height: 30px;' colspan=2 align=middle><input class='btnOk' type='button' value='"+i._getLocalizedString("ok")+"'></input><input class='btnCancel' style='margin-left: 10px;' type='button' value='"+i._getLocalizedString("cancel")+"'></input></td></tr></table>";i.host.append(t);i._settingsWindow=i.host.find("#pivotFieldSettingsWindow").jqxWindow({title:i._getLocalizedString("fieldsettings"),position:{x:0,y:0},showCollapseButton:!0,autoOpen:!1,minWidth:380,maxWidth:380,width:380,height:360,initContent:function(){i._updateWindowData();var t=i._settingsWindow.find(".btnCancel").jqxButton({width:80}),e=i._settingsWindow.find(".btnOk").jqxButton({width:80});t.on("click",function(){i._settingsWindow.jqxWindow("close")}),e.on("click",function(){i._applySettingsWindowChanges(),i._settingsWindow.jqxWindow("close")})}})},_applySettingsWindowChanges:function(){var t=this,e=t._windowData.itemIndex,i=t._windowData.type,s=t._listBoxes[i],n=s.jqxListBox("getItem",e),a=t._settingsWindow.find(".lbPivotFieldMoveTo").jqxDropDownList("selectedIndex");if(-1!=a){var o=void 0;for(var l in t._windowData.fieldSettings.moveOperations)if(o=t._windowData.fieldSettings.moveOperations[l].dropTarget,-1==--a)break;var r=t._listBoxes[o],d=n.value;return r!=t._listBoxes.fields&&r.jqxListBox("addItem",{label:n.label,value:d}),void t._moveElement(s,r[0],e,d)}var u,g,c,v,h,f,x=t._settingsWindow.find(".lbAlignment").jqxDropDownList("getSelectedItem");t._targetCurrentSettings[i][e].align=x.value,delete t._targetCurrentSettings[i][e].function,"values"==i&&(x=t._settingsWindow.find(".lbCalculation").jqxDropDownList("getSelectedItem"),t._targetCurrentSettings[i][e].text=n.value.text=n.label=t._getFieldLabel(x.value,n.value.dataField),t._targetCurrentSettings[i][e].function=n.value.function=x.value,s.jqxListBox("updateAt",{label:n.value.text,value:n.value},e),t._updateListBoxLabels()),"values"==i&&(x=t._settingsWindow.find(".lbCellsAlignment").jqxDropDownList("getSelectedItem"),(f=t._targetCurrentSettings[i][e].formatSettings||{}).align=x.value,t._targetCurrentSettings[i][e].formatSettings=f),"values"==i&&(u=t._settingsWindow.find(".txtPrefix"),(f=t._targetCurrentSettings[i][e].formatSettings||{}).prefix=u.val(),t._targetCurrentSettings[i][e].formatSettings=f),"values"==i&&(g=t._settingsWindow.find(".txtDecimalPlaces"),(f=t._targetCurrentSettings[i][e].formatSettings||{}).decimalPlaces=g.val(),t._targetCurrentSettings[i][e].formatSettings=f),"values"==i&&(c=t._settingsWindow.find(".txtThousandsSeparator"),(f=t._targetCurrentSettings[i][e].formatSettings||{}).thousandsSeparator=c.val(),t._targetCurrentSettings[i][e].formatSettings=f),"values"==i&&(v=t._settingsWindow.find(".txtDecimalSeparator"),(f=t._targetCurrentSettings[i][e].formatSettings||{}).decimalSeparator=v.val(),t._targetCurrentSettings[i][e].formatSettings=f),"values"==i&&(h=t._settingsWindow.find(".checkBoxNagativeWithBrackets"),(f=t._targetCurrentSettings[i][e].formatSettings||{}).negativeWithBrackets=h.val(),t._targetCurrentSettings[i][e].formatSettings=f),t._refreshPivotGrid(t._targetCurrentSettings)},_updateWindowData:function(){for(var t=this,e=t._windowData.fieldSettings,i=t._listBoxes[t._windowData.type].jqxListBox("getItem",t._windowData.itemIndex).value,s=t.target.source[t._windowData.type],n=void 0,a=0;a<s.length;a++)if(s[a].dataField==i.dataField&&s[a].function==i.function){n=s[a];break}var o=[];for(var a in e.moveOperations)o.push({text:a,value:e.moveOperations[a]});t._settingsWindow.find(".lbPivotFieldMoveTo").jqxDropDownList({source:o,displayMember:"text",selectedIndex:-1,valueMember:"value",autoDropDownHeight:!0});var l=o=[{text:t._getLocalizedString("left"),value:"left"},{text:t._getLocalizedString("center"),value:"center"},{text:t._getLocalizedString("right"),value:"right"}],r=0;if(n)for(var d=0;d<o.length;d++)if(o[d].value==n.align){r=d;break}t._settingsWindow.find(".lbAlignment").jqxDropDownList({source:o,selectedIndex:r,displayMember:"text",valueMember:"value",autoDropDownHeight:!0});var u=390;if(e.functions){var g=i.function;t._settingsWindow.find(".valueField").show(),o=[],r=-1;var c=0;for(var a in e.functions){var v=e.functions[a].function;o.push({text:a,value:v}),g==v&&(r=c),c++}t._settingsWindow.find(".lbCalculation").jqxDropDownList({source:o,displayMember:"text",valueMember:"value",autoDropDownHeight:!0,selectedIndex:r}),o=l;var r=2,h="right";if(n){n.formatSettings&&n.formatSettings.align&&(h=n.formatSettings.align);for(d=0;d<o.length;d++)if(o[d].value==h){r=d;break}}t._settingsWindow.find(".lbCellsAlignment").jqxDropDownList({source:o,selectedIndex:r,displayMember:"text",valueMember:"value",autoDropDownHeight:!0});var f="";n&&n.formatSettings&&null!=n.formatSettings.prefix&&(f=n.formatSettings.prefix),t._settingsWindow.find(".txtPrefix").jqxInput({value:f,height:23,width:195});var x=2;try{n&&n.formatSettings&&null!=n.formatSettings.decimalPlaces&&(x=parseInt(n.formatSettings.decimalPlaces))}catch(t){x=2}t._settingsWindow.find(".txtDecimalPlaces").jqxInput({value:x,height:23,width:195});var p=t._getLocalizedString("thousandsseparator");n&&n.formatSettings&&null!=n.formatSettings.thousandsSeparator&&(p=n.formatSettings.thousandsSeparator),t._settingsWindow.find(".txtThousandsSeparator").jqxInput({value:p,height:23,width:195});var w=t._getLocalizedString("decimalseparator");n&&n.formatSettings&&null!=n.formatSettings.decimalSeparator&&(w=n.formatSettings.decimalSeparator),t._settingsWindow.find(".txtDecimalSeparator").jqxInput({value:w,height:23,width:195});var m=!1;n&&n.formatSettings&&null!=n.formatSettings.negativeWithBrackets&&(m=1==n.formatSettings.negativeWithBrackets),t._settingsWindow.find(".checkBoxNagativeWithBrackets").jqxCheckBox({checked:m})}else u=160,t._settingsWindow.find(".valueField").hide();t._settingsWindow.jqxWindow({height:u})},_createFiltersWindow:function(){var i=this,t="<div id='pivotFieldFiltersWindow' style='width: 300px; height: 340px;'><div style='padding: 5; margin: 5; width: 100%; height: 100%;'><table style='width: 100%; height: 100%; margin:0; padding:0;' cellspacing=0; cellpadding=0><tr style='height: auto;'><td style='height: 100%;'><div style='padding: 0px; margin: 0px; display:inline-block;position:relative;' class='listBoxFilters'></div></td></tr><tr style='height: 5px;'><td></td></tr><tr style='height: 30px;'><td colspan=2 align=middle><input class='btnOk' type='button' value='"+i._getLocalizedString("ok")+"'></input><input class='btnCancel' style='margin-left: 10px;' type='button' value='"+i._getLocalizedString("cancel")+"'></input></td></tr></div></table>";i.host.append(t);i._filtersWindow=i.host.find("#pivotFieldFiltersWindow").jqxWindow({title:i._getLocalizedString("fieldsettings"),position:{x:0,y:0},showCollapseButton:!0,autoOpen:!1,minWidth:300,maxWidth:300,width:300,height:360,initContent:function(){i._updateFiltersWindowData();var t=i._filtersWindow.find(".btnCancel").jqxButton({width:80}),e=i._filtersWindow.find(".btnOk").jqxButton({width:80});t.on("click",function(){i._filtersWindow.jqxWindow("close")}),e.on("click",function(){i._applyFiltersWindowChanges(),i._filtersWindow.jqxWindow("close")})}})},_updateFiltersWindowData:function(){for(var t=this,e=t._windowData.fieldSettings,i=t._listBoxes[t._windowData.type].jqxListBox("getItem",t._windowData.itemIndex).value,s=t.target.source[t._windowData.type],n=void 0,a=0;a<s.length;a++)if(s[a].dataField==i.dataField&&s[a].function==i.function){n=s[a];break}var o=[];for(var a in e.moveOperations)o.push({text:a,value:e.moveOperations[a]});o=[];var l=t.target.source.getItemsFilterStatus(n.dataField);for(var a in l)o.push({label:a,value:l[a]});var r=t._filtersWindow.find(".listBoxFilters");r.jqxListBox({source:o,checkBoxes:!0,displayMember:"label",selectedIndex:-1,valueMember:"value",width:"100%",height:"100%"}),r.jqxListBox("beginUpdate"),r.jqxListBox("checkAll");for(a=0;a<o.length;a++)o[a].value&&r.jqxListBox("uncheckIndex",a);r.jqxListBox("endUpdate")},_applyFiltersWindowChanges:function(){for(var self=this,lbFilters=self._filtersWindow.find(".listBoxFilters"),items=lbFilters.jqxListBox("getItems"),uncheckedItems=[],i=0;i<items.length;i++)items[i].checked||uncheckedItems.push(items[i].label);for(var fn="filterFunction = function(value) {",i=0;i<uncheckedItems.length;i++)fn+="if (value == '"+uncheckedItems[i]+"') return true;";fn+="return false;",fn+="}";for(var itemIndex=self._windowData.itemIndex,itemType=self._windowData.type,source=self._listBoxes[itemType],item=source.jqxListBox("getItem",itemIndex),targetCurrentSettings=self._targetCurrentSettings,i=0;i<targetCurrentSettings.filters.length;i++)targetCurrentSettings.filters[i].dataField==item.value.dataField&&(targetCurrentSettings.filters[i].filterFunction=eval(fn));self._refreshPivotGrid(self._targetCurrentSettings)}})}(jqxBaseFramework);