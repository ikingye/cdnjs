define(function(e,t,n){var v=e("./synthetic");!function e(){var t;document.body?(t=document.createElement("div"),document.body.appendChild(t),v.helpers.extend(t.style,{width:"100px",height:"10000px",backgroundColor:"blue",position:"absolute",top:"10px",left:"0px",zIndex:19999}),document.body.scrollTop=11,document.elementFromPoint&&(document.elementFromPoint(3,1)===t?v.support.elementFromClient=!0:v.support.elementFromPage=!0,document.body.removeChild(t),document.body.scrollTop=0)):v.schedule(e,1)}();function Y(e,t){var n,o,r=e.clientX,p=e.clientY,i=v.helpers.getWindow(t);return v.support.elementFromPage&&(r+=(o=v.helpers.scrollOffset(i)).left,p+=o.top),(n=i.document.elementFromPoint?i.document.elementFromPoint(r,p):t)===i.document.documentElement&&(e.clientY<0||e.clientX<0)?t:n}function d(e,t,n){var o=Y(t,n);return v.trigger(o||n,e,t),o}function x(e,t,n){var o,r=Y(e,t);return n!==r&&r&&n&&((o=v.helpers.extend({},e)).relatedTarget=r,v.support.pointerEvents&&v.trigger(n,"pointerout",o),v.trigger(n,"mouseout",o),o.relatedTarget=n,v.support.pointerEvents&&v.trigger(r,"pointerover",o),v.trigger(r,"mouseover",o)),v.support.pointerEvents&&v.trigger(r||t,"pointermove",e),v.support.touchEvents&&v.trigger(r||t,"touchmove",e),v.trigger(r||t,"mousemove",e),r}function a(r,p,i,l,s){function c(){var e=new Date,t=v.helpers.scrollOffset(m),n=(0===h?0:e-u)/i,o={clientX:d*n+r.clientX,clientY:a*n+r.clientY};h++,n<1?(v.helpers.extend(f.style,{left:o.clientX+t.left+2+"px",top:o.clientY+t.top+2+"px"}),g=x(o,l,g),v.schedule(c,15)):(g=x(p,l,g),m.document.body.removeChild(f),s())}var u=new Date,d=p.clientX-r.clientX,a=p.clientY-r.clientY,m=v.helpers.getWindow(l),g=Y(r,l),f=m.document.createElement("div"),h=0;v.helpers.extend(f.style,{height:"5px",width:"5px",backgroundColor:"red",position:"absolute",zIndex:19999,fontSize:"1px"}),m.document.body.appendChild(f),c()}function c(e){var t=v.jquery()(e),n=t.offset();return{pageX:n.left+t.outerWidth()/2,pageY:n.top+t.outerHeight()/2}}function m(e,t,n){var o,r,p,i=/(\d+)[x ](\d+)/,l=/(\d+)X(\d+)/,s=/([+-]\d+)[xX ]([+-]\d+)/;return"string"==typeof e&&s.test(e)&&n&&(o=c(n),r=e.match(s),e={pageX:o.pageX+parseInt(r[1]),pageY:o.pageY+parseInt(r[2])}),"string"==typeof e&&i.test(e)&&(r=e.match(i),e={pageX:parseInt(r[1]),pageY:parseInt(r[2])}),"string"==typeof e&&l.test(e)&&(r=e.match(l),e={clientX:parseInt(r[1]),clientY:parseInt(r[2])}),"string"==typeof e&&(e=v.jquery()(e,t.document)[0]),e.nodeName&&(e=c(e)),null!=e.pageX&&(p=v.helpers.scrollOffset(t),e={clientX:e.pageX-p.left,clientY:e.pageY-p.top}),e}function g(e,t,n){var o,r,p;e.clientY<0&&(p=(r=(o=v.helpers.scrollOffset(n)).top+e.clientY-100)-o.top,0<r||(r=0,p=-o.top),e.clientY=e.clientY-p,t.clientY=t.clientY-p,v.helpers.scrollOffset(n,{top:r,left:o.left}))}v.helpers.extend(v.init.prototype,{_move:function(e,t,n){var o=v.helpers.getWindow(e),r=m(t.from||e,o,e),p=m(t.to||t,o,e);!1!==t.adjust&&g(r,p,o),a(r,p,t.duration||500,e,n)},_drag:function(e,t,n){var o,r,p,i,l,s=v.helpers.getWindow(e),c=m(t.from||e,s,e),u=m(t.to||t,s,e);!1!==t.adjust&&g(c,u,s),o=c,r=u,p=t.duration||500,i=e,l=n,v.support.pointerEvents&&d("pointerdown",o,i),v.support.touchEvents&&d("touchstart",o,i),d("mousedown",o,i),a(o,r,p,i,function(){v.support.pointerEvents&&d("pointerup",r,i),v.support.touchEvents&&d("touchend",r,i),d("mouseup",r,i),l()})}})});