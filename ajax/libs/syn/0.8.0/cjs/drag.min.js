var syn=require("./synthetic.js");!function e(){var t;document.body?(t=document.createElement("div"),document.body.appendChild(t),syn.helpers.extend(t.style,{width:"100px",height:"10000px",backgroundColor:"blue",position:"absolute",top:"10px",left:"0px",zIndex:19999}),document.body.scrollTop=11,document.elementFromPoint&&(document.elementFromPoint(3,1)===t?syn.support.elementFromClient=!0:syn.support.elementFromPage=!0,document.body.removeChild(t),document.body.scrollTop=0)):syn.schedule(e,1)}();var elementFromPoint=function(e,t){var n,o,r=e.clientX,s=e.clientY,i=syn.helpers.getWindow(t);return syn.support.elementFromPage&&(r+=(o=syn.helpers.scrollOffset(i)).left,s+=o.top),(n=i.document.elementFromPoint?i.document.elementFromPoint(r,s):t)===i.document.documentElement&&(e.clientY<0||e.clientX<0)?t:n},createEventAtPoint=function(e,t,n){var o=elementFromPoint(t,n);return syn.trigger(o||n,e,t),o},mouseMove=function(e,t,n){var o,r=elementFromPoint(e,t);return n!==r&&r&&n&&((o=syn.helpers.extend({},e)).relatedTarget=r,syn.support.pointerEvents&&syn.trigger(n,"pointerout",o),syn.trigger(n,"mouseout",o),o.relatedTarget=n,syn.support.pointerEvents&&syn.trigger(r,"pointerover",o),syn.trigger(r,"mouseover",o)),syn.support.pointerEvents&&syn.trigger(r||t,"pointermove",e),syn.support.touchEvents&&syn.trigger(r||t,"touchmove",e),syn.trigger(r||t,"mousemove",e),r},startMove=function(r,s,i,p,l){function c(){var e=new Date,t=syn.helpers.scrollOffset(m),n=(0===g?0:e-u)/i,o={clientX:a*n+r.clientX,clientY:d*n+r.clientY};g++,n<1?(syn.helpers.extend(v.style,{left:o.clientX+t.left+2+"px",top:o.clientY+t.top+2+"px"}),y=mouseMove(o,p,y),syn.schedule(c,15)):(y=mouseMove(s,p,y),m.document.body.removeChild(v),l())}var u=new Date,a=s.clientX-r.clientX,d=s.clientY-r.clientY,m=syn.helpers.getWindow(p),y=elementFromPoint(r,p),v=m.document.createElement("div"),g=0;syn.helpers.extend(v.style,{height:"5px",width:"5px",backgroundColor:"red",position:"absolute",zIndex:19999,fontSize:"1px"}),m.document.body.appendChild(v),c()},startDrag=function(e,t,n,o,r){syn.support.pointerEvents&&createEventAtPoint("pointerdown",e,o),syn.support.touchEvents&&createEventAtPoint("touchstart",e,o),createEventAtPoint("mousedown",e,o),startMove(e,t,n,o,function(){syn.support.pointerEvents&&createEventAtPoint("pointerup",t,o),syn.support.touchEvents&&createEventAtPoint("touchend",t,o),createEventAtPoint("mouseup",t,o),r()})},center=function(e){var t=syn.jquery()(e),n=t.offset();return{pageX:n.left+t.outerWidth()/2,pageY:n.top+t.outerHeight()/2}},convertOption=function(e,t,n){var o,r,s,i=/(\d+)[x ](\d+)/,p=/(\d+)X(\d+)/,l=/([+-]\d+)[xX ]([+-]\d+)/;return"string"==typeof e&&l.test(e)&&n&&(o=center(n),r=e.match(l),e={pageX:o.pageX+parseInt(r[1]),pageY:o.pageY+parseInt(r[2])}),"string"==typeof e&&i.test(e)&&(r=e.match(i),e={pageX:parseInt(r[1]),pageY:parseInt(r[2])}),"string"==typeof e&&p.test(e)&&(r=e.match(p),e={clientX:parseInt(r[1]),clientY:parseInt(r[2])}),"string"==typeof e&&(e=syn.jquery()(e,t.document)[0]),e.nodeName&&(e=center(e)),null!=e.pageX&&(s=syn.helpers.scrollOffset(t),e={clientX:e.pageX-s.left,clientY:e.pageY-s.top}),e},adjust=function(e,t,n){var o,r,s;e.clientY<0&&(s=(r=(o=syn.helpers.scrollOffset(n)).top+e.clientY-100)-o.top,0<r||(r=0,s=-o.top),e.clientY=e.clientY-s,t.clientY=t.clientY-s,syn.helpers.scrollOffset(n,{top:r,left:o.left}))};syn.helpers.extend(syn.init.prototype,{_move:function(e,t,n){var o=syn.helpers.getWindow(e),r=convertOption(t.from||e,o,e),s=convertOption(t.to||t,o,e);!1!==t.adjust&&adjust(r,s,o),startMove(r,s,t.duration||500,e,n)},_drag:function(e,t,n){var o=syn.helpers.getWindow(e),r=convertOption(t.from||e,o,e),s=convertOption(t.to||t,o,e);!1!==t.adjust&&adjust(r,s,o),startDrag(r,s,t.duration||500,e,n)}});