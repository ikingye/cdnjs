"use strict";function _inheritsLoose(t,i){t.prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i}import Animation from"./Animation";import{shouldUseNativeDriver}from"../NativeAnimatedHelper";var DecayAnimation=function(t){function i(i){var e,n,a,o;return(o=t.call(this)||this)._deceleration=null!==(e=i.deceleration)&&void 0!==e?e:.998,o._velocity=i.velocity,o._useNativeDriver=shouldUseNativeDriver(i),o.__isInteraction=null!==(n=i.isInteraction)&&void 0!==n?n:!o._useNativeDriver,o.__iterations=null!==(a=i.iterations)&&void 0!==a?a:1,o}_inheritsLoose(i,t);var e=i.prototype;return e.__getNativeAnimationConfig=function(){return{type:"decay",deceleration:this._deceleration,velocity:this._velocity,iterations:this.__iterations}},e.start=function(t,i,e,n,a){this.__active=!0,this._lastValue=t,this._fromValue=t,this._onUpdate=i,this.__onEnd=e,this._startTime=Date.now(),this._useNativeDriver?this.__startNativeAnimation(a):this._animationFrame=requestAnimationFrame(this.onUpdate.bind(this))},e.onUpdate=function(){var t=Date.now(),i=this._fromValue+this._velocity/(1-this._deceleration)*(1-Math.exp(-(1-this._deceleration)*(t-this._startTime)));this._onUpdate(i),Math.abs(this._lastValue-i)<.1?this.__debouncedOnEnd({finished:!0}):(this._lastValue=i,this.__active&&(this._animationFrame=requestAnimationFrame(this.onUpdate.bind(this))))},e.stop=function(){t.prototype.stop.call(this),this.__active=!1,global.cancelAnimationFrame(this._animationFrame),this.__debouncedOnEnd({finished:!1})},i}(Animation);export default DecayAnimation;