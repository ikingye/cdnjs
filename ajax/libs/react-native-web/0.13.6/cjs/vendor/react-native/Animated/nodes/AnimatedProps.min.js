"use strict";exports.__esModule=!0,exports.default=void 0;var _AnimatedEvent=require("../AnimatedEvent"),_AnimatedNode2=_interopRequireDefault(require("./AnimatedNode")),_AnimatedStyle=_interopRequireDefault(require("./AnimatedStyle")),_NativeAnimatedHelper=_interopRequireDefault(require("../NativeAnimatedHelper")),_findNodeHandle=_interopRequireDefault(require("../../../../exports/findNodeHandle")),_invariant=_interopRequireDefault(require("fbjs/lib/invariant"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ownKeys(t,e){var i,n=Object.keys(t);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(t),e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)),n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(i),!0).forEach(function(e){_defineProperty(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}var AnimatedProps=function(n){function e(e,t){var i=n.call(this)||this;return e.style&&(e=_objectSpread({},e,{style:new _AnimatedStyle.default(e.style)})),i._props=e,i._callback=t,i.__attach(),i}_inheritsLoose(e,n);var t=e.prototype;return t.__getValue=function(){var e={};for(var t in this._props){var i=this._props[t];i instanceof _AnimatedNode2.default?(!i.__isNative||i instanceof _AnimatedStyle.default)&&(e[t]=i.__getValue()):i instanceof _AnimatedEvent.AnimatedEvent?e[t]=i.__getHandler():e[t]=i}return e},t.__getAnimatedValue=function(){var e={};for(var t in this._props){var i=this._props[t];i instanceof _AnimatedNode2.default&&(e[t]=i.__getAnimatedValue())}return e},t.__attach=function(){for(var e in this._props){var t=this._props[e];t instanceof _AnimatedNode2.default&&t.__addChild(this)}},t.__detach=function(){for(var e in this.__isNative&&this._animatedView&&this.__disconnectAnimatedView(),this._props){var t=this._props[e];t instanceof _AnimatedNode2.default&&t.__removeChild(this)}n.prototype.__detach.call(this)},t.update=function(){this._callback()},t.__makeNative=function(){if(!this.__isNative){for(var e in this.__isNative=!0,this._props){var t=this._props[e];t instanceof _AnimatedNode2.default&&t.__makeNative()}this._animatedView&&this.__connectAnimatedView()}},t.setNativeView=function(e){this._animatedView!==e&&(this._animatedView=e,this.__isNative&&this.__connectAnimatedView())},t.__connectAnimatedView=function(){(0,_invariant.default)(this.__isNative,'Expected node to be marked as "native"');var e=(0,_findNodeHandle.default)(this._animatedView);(0,_invariant.default)(null!=e,"Unable to locate attached view in the native tree"),_NativeAnimatedHelper.default.API.connectAnimatedNodeToView(this.__getNativeTag(),e)},t.__disconnectAnimatedView=function(){(0,_invariant.default)(this.__isNative,'Expected node to be marked as "native"');var e=(0,_findNodeHandle.default)(this._animatedView);(0,_invariant.default)(null!=e,"Unable to locate attached view in the native tree"),_NativeAnimatedHelper.default.API.disconnectAnimatedNodeFromView(this.__getNativeTag(),e)},t.__getNativeConfig=function(){var e={};for(var t in this._props){var i=this._props[t];i instanceof _AnimatedNode2.default&&(i.__makeNative(),e[t]=i.__getNativeTag())}return{type:"props",props:e}},e}(_AnimatedNode2.default),_default=AnimatedProps;exports.default=AnimatedProps,module.exports=exports.default;