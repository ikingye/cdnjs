"use strict";exports.__esModule=!0,exports.default=void 0;var _EmitterSubscription=_interopRequireDefault(require("./EmitterSubscription")),_EventSubscriptionVendor=_interopRequireDefault(require("./EventSubscriptionVendor")),_invariant=_interopRequireDefault(require("fbjs/lib/invariant"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var sparseFilterPredicate=function(){return!0},EventEmitter=function(){function e(e){this._subscriber=e||new _EventSubscriptionVendor.default}var r=e.prototype;return r.addListener=function(e,r,t){return this._subscriber.addSubscription(e,new _EmitterSubscription.default(this,this._subscriber,r,t))},r.once=function(e,i,n){var s=this;return this.addListener(e,function(){s.removeCurrentListener();for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];i.apply(n,r)})},r.removeAllListeners=function(e){this._subscriber.removeAllSubscriptions(e)},r.removeCurrentListener=function(){(0,_invariant.default)(!!this._currentSubscription,"Not in an emitting cycle; there is no current subscription"),this.removeSubscription(this._currentSubscription)},r.removeSubscription=function(e){(0,_invariant.default)(e.emitter===this,"Subscription does not belong to this emitter."),this._subscriber.removeSubscription(e)},r.listeners=function(e){var r=this._subscriber.getSubscriptionsForType(e);return r?r.filter(sparseFilterPredicate).map(function(e){return e.listener}):[]},r.emit=function(e){var r=this._subscriber.getSubscriptionsForType(e);if(r){for(var t=0,i=r.length;t<i;t++){var n=r[t];n&&n.listener&&(this._currentSubscription=n).listener.apply(n.context,Array.prototype.slice.call(arguments,1))}this._currentSubscription=null}},r.removeListener=function(e,r){var t=this._subscriber.getSubscriptionsForType(e);if(t)for(var i=0,n=t.length;i<n;i++){var s=t[i];s&&s.listener===r&&s.remove()}},e}(),_default=EventEmitter;exports.default=EventEmitter,module.exports=exports.default;