import{canUseDOM}from"fbjs/lib/ExecutionEnvironment";import{MONOSPACE_FONT_STACK,SYSTEM_FONT_STACK,STYLE_SHORT_FORM_EXPANSIONS}from"./constants";import normalizeValueWithProperty from"./normalizeValueWithProperty";var emptyObject={},supportsCSS3TextDecoration=!canUseDOM||null!=window.CSS&&null!=window.CSS.supports&&(window.CSS.supports("text-decoration-line","none")||window.CSS.supports("-webkit-text-decoration-line","none")),mapTransform=function(r){var e=Object.keys(r)[0];return e+"("+normalizeValueWithProperty(r[e],e)+")"},convertTransformMatrix=function(r){return"matrix3d("+r.join(",")+")"},resolveTransform=function(r,e){var t=e.transform;Array.isArray(e.transform)?t=e.transform.map(mapTransform).join(" "):e.transformMatrix&&(t=convertTransformMatrix(e.transformMatrix)),r.transform=t},createReactDOMStyle=function(r){if(!r)return emptyObject;var e={};return Object.keys(r).sort().forEach(function(t){var a=normalizeValueWithProperty(r[t],t);if(null!=a)switch(t){case"aspectRatio":case"elevation":case"overlayColor":case"resizeMode":case"tintColor":break;case"backgroundClip":"text"===a&&(e.backgroundClip=a,e.WebkitBackgroundClip=a);break;case"flex":a>0?(e.flexGrow=a,e.flexShrink=1):0===a?(e.flexGrow=0,e.flexShrink=0):-1===a&&(e.flexGrow=0,e.flexShrink=1);break;case"font":e[t]=a.replace("System",SYSTEM_FONT_STACK);break;case"fontFamily":if(a.indexOf("System")>-1){var o=a.split(/,\s*/);o[o.indexOf("System")]=SYSTEM_FONT_STACK,e[t]=o.join(",")}else e[t]="monospace"===a?MONOSPACE_FONT_STACK:a;break;case"fontVariant":Array.isArray(a)&&a.length>0&&(e.fontVariant=a.join(" "));break;case"textAlignVertical":e.verticalAlign="center"===a?"middle":a;break;case"textDecorationLine":supportsCSS3TextDecoration?e.textDecorationLine=a:e.textDecoration=a;break;case"transform":case"transformMatrix":resolveTransform(e,r);break;case"writingDirection":e.direction=a;break;default:var n=STYLE_SHORT_FORM_EXPANSIONS[t];n?n.forEach(function(t,o){void 0===r[t]&&(e[t]=a)}):e[t]=Array.isArray(a)?a.join(","):a}}),e};export default createReactDOMStyle;