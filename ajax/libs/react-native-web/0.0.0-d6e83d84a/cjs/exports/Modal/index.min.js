"use strict";exports.__esModule=!0,exports.default=void 0;var _react=_interopRequireWildcard(require("react")),_ModalPortal=_interopRequireDefault(require("./ModalPortal")),_ModalAnimation=_interopRequireDefault(require("./ModalAnimation")),_ModalContent=_interopRequireDefault(require("./ModalContent")),_ModalFocusTrap=_interopRequireDefault(require("./ModalFocusTrap"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _getRequireWildcardCache=function(){return e},e}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache();if(t&&t.has(e))return t.get(e);var a,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e){Object.prototype.hasOwnProperty.call(e,i)&&((a=o?Object.getOwnPropertyDescriptor(e,i):null)&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i])}return r.default=e,t&&t.set(e,r),r}var uniqueModalIdentifier=0,activeModalStack=[],activeModalListeners={};function notifyActiveModalListeners(){var t;0<activeModalStack.length&&(t=activeModalStack[activeModalStack.length-1],activeModalStack.forEach(function(e){null!=activeModalListeners[e]&&activeModalListeners[e](e===t)}))}function addActiveModal(e,t){removeActiveModal(e),activeModalStack.push(e),activeModalListeners[e]=t,notifyActiveModalListeners()}function removeActiveModal(e){null!=activeModalListeners[e]&&(activeModalListeners[e](!1),delete activeModalListeners[e]);var t=activeModalStack.indexOf(e);-1!==t&&(activeModalStack.splice(t,1),notifyActiveModalListeners())}var Modal=(0,_react.forwardRef)(function(e,t){var a=e.visible,r=void 0!==a&&a,o=e.animationType,i=void 0===o?"none":o,n=e.transparent,l=void 0!==n&&n,c=e.children,u=e.onShow,d=e.onDismiss,s=e.onRequestClose,f=(0,_react.useState)(!1),M=f[0],v=f[1],_=(0,_react.useMemo)(function(){return uniqueModalIdentifier++},[]),p=(0,_react.useCallback)(function(){removeActiveModal(_),d&&d()},[_,d]),q=(0,_react.useCallback)(function(){addActiveModal(_,v),u&&u()},[_,u]);return(0,_react.useEffect)(function(){return function(){return removeActiveModal(_)}},[_]),_react.default.createElement(_ModalPortal.default,null,_react.default.createElement(_ModalAnimation.default,{animationType:i,onDismiss:p,onShow:q,visible:r},_react.default.createElement(_ModalFocusTrap.default,{active:M},_react.default.createElement(_ModalContent.default,{active:M,onRequestClose:s,ref:t,transparent:l},c))))}),_default=Modal;exports.default=Modal,module.exports=exports.default;