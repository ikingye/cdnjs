"use strict";exports.__esModule=!0,exports.default=void 0;var _AnimatedEvent=require("./AnimatedEvent"),_AnimatedAddition=_interopRequireDefault(require("./nodes/AnimatedAddition")),_AnimatedDiffClamp=_interopRequireDefault(require("./nodes/AnimatedDiffClamp")),_AnimatedDivision=_interopRequireDefault(require("./nodes/AnimatedDivision")),_AnimatedInterpolation=_interopRequireDefault(require("./nodes/AnimatedInterpolation")),_AnimatedModulo=_interopRequireDefault(require("./nodes/AnimatedModulo")),_AnimatedMultiplication=_interopRequireDefault(require("./nodes/AnimatedMultiplication")),_AnimatedNode=_interopRequireDefault(require("./nodes/AnimatedNode")),_AnimatedProps=_interopRequireDefault(require("./nodes/AnimatedProps")),_AnimatedSubtraction=_interopRequireDefault(require("./nodes/AnimatedSubtraction")),_AnimatedTracking=_interopRequireDefault(require("./nodes/AnimatedTracking")),_AnimatedValue=_interopRequireDefault(require("./nodes/AnimatedValue")),_AnimatedValueXY=_interopRequireDefault(require("./nodes/AnimatedValueXY")),_DecayAnimation=_interopRequireDefault(require("./animations/DecayAnimation")),_SpringAnimation=_interopRequireDefault(require("./animations/SpringAnimation")),_TimingAnimation=_interopRequireDefault(require("./animations/TimingAnimation")),_createAnimatedComponent=_interopRequireDefault(require("./createAnimatedComponent"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ownKeys(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var add=function(e,t){return new _AnimatedAddition.default(e,t)},subtract=function(e,t){return new _AnimatedSubtraction.default(e,t)},divide=function(e,t){return new _AnimatedDivision.default(e,t)},multiply=function(e,t){return new _AnimatedMultiplication.default(e,t)},modulo=function(e,t){return new _AnimatedModulo.default(e,t)},diffClamp=function(e,t,n){return new _AnimatedDiffClamp.default(e,t,n)},_combineCallbacks=function(e,t){return e&&t.onComplete?function(){t.onComplete&&t.onComplete.apply(t,arguments),e&&e.apply(void 0,arguments)}:e||t.onComplete},maybeVectorAnim=function(e,t,n){if(e instanceof _AnimatedValueXY.default){var i=_objectSpread({},t),r=_objectSpread({},t);for(var a in t){var o=t[a],u=o.x,d=o.y;void 0!==u&&void 0!==d&&(i[a]=u,r[a]=d)}var f=n(e.x,i),s=n(e.y,r);return parallel([f,s],{stopTogether:!1})}return null},spring=function e(n,i){function r(e,t,n){n=_combineCallbacks(n,t);var i=e,r=t;i.stopTracking(),t.toValue instanceof _AnimatedNode.default?i.track(new _AnimatedTracking.default(i,t.toValue,_SpringAnimation.default,r,n)):i.animate(new _SpringAnimation.default(r),n)}return maybeVectorAnim(n,i,e)||{start:function(e){r(n,i,e)},stop:function(){n.stopAnimation()},reset:function(){n.resetAnimation()},_startNativeLoop:function(e){var t=_objectSpread({},i,{iterations:e});r(n,t)},_isUsingNativeDriver:function(){return i.useNativeDriver||!1}}},timing=function e(n,i){function r(e,t,n){n=_combineCallbacks(n,t);var i=e,r=t;i.stopTracking(),t.toValue instanceof _AnimatedNode.default?i.track(new _AnimatedTracking.default(i,t.toValue,_TimingAnimation.default,r,n)):i.animate(new _TimingAnimation.default(r),n)}return maybeVectorAnim(n,i,e)||{start:function(e){r(n,i,e)},stop:function(){n.stopAnimation()},reset:function(){n.resetAnimation()},_startNativeLoop:function(e){var t=_objectSpread({},i,{iterations:e});r(n,t)},_isUsingNativeDriver:function(){return i.useNativeDriver||!1}}},decay=function e(n,i){function r(e,t,n){n=_combineCallbacks(n,t);var i=e,r=t;i.stopTracking(),i.animate(new _DecayAnimation.default(r),n)}return maybeVectorAnim(n,i,e)||{start:function(e){r(n,i,e)},stop:function(){n.stopAnimation()},reset:function(){n.resetAnimation()},_startNativeLoop:function(e){var t=_objectSpread({},i,{iterations:e});r(n,t)},_isUsingNativeDriver:function(){return i.useNativeDriver||!1}}},sequence=function(i){var r=0;return{start:function(n){0===i.length?n&&n({finished:!0}):i[r].start(function e(t){t.finished&&++r!==i.length?i[r].start(e):n&&n(t)})},stop:function(){r<i.length&&i[r].stop()},reset:function(){i.forEach(function(e,t){t<=r&&e.reset()}),r=0},_startNativeLoop:function(){throw new Error("Loops run using the native driver cannot contain Animated.sequence animations")},_isUsingNativeDriver:function(){return!1}}},parallel=function(r,e){var a=0,o={},u=!(e&&!1===e.stopTogether),d={start:function(i){a!==r.length?r.forEach(function(e,t){function n(e){if(o[t]=!0,++a===r.length)return a=0,void(i&&i(e));!e.finished&&u&&d.stop()}e?e.start(n):n({finished:!0})}):i&&i({finished:!0})},stop:function(){r.forEach(function(e,t){o[t]||e.stop(),o[t]=!0})},reset:function(){r.forEach(function(e,t){e.reset(),o[t]=!1,a=0})},_startNativeLoop:function(){throw new Error("Loops run using the native driver cannot contain Animated.parallel animations")},_isUsingNativeDriver:function(){return!1}};return d},delay=function(e){return timing(new _AnimatedValue.default(0),{toValue:0,delay:e,duration:0})},stagger=function(n,e){return parallel(e.map(function(e,t){return sequence([delay(n*t),e])}))},loop=function(i,e){var t=void 0===e?{}:e,n=t.iterations,r=void 0===n?-1:n,a=t.resetBeforeIteration,o=void 0===a||a,u=!1,d=0;return{start:function(n){i&&0!==r?i._isUsingNativeDriver()?i._startNativeLoop(r):function e(t){void 0===t&&(t={finished:!0}),u||d===r||!1===t.finished?n&&n(t):(d++,o&&i.reset(),i.start(e))}():n&&n({finished:!0})},stop:function(){u=!0,i.stop()},reset:function(){d=0,u=!1,i.reset()},_startNativeLoop:function(){throw new Error("Loops run using the native driver cannot contain Animated.loop animations")},_isUsingNativeDriver:function(){return i._isUsingNativeDriver()}}};function forkEvent(e,t){return e?e instanceof _AnimatedEvent.AnimatedEvent?(e.__addListener(t),e):function(){"function"==typeof e&&e.apply(void 0,arguments),t.apply(void 0,arguments)}:t}function unforkEvent(e,t){e&&e instanceof _AnimatedEvent.AnimatedEvent&&e.__removeListener(t)}var event=function(e,t){var n=new _AnimatedEvent.AnimatedEvent(e,t);return n.__isNative?n:n.__getHandler()},AnimatedImplementation={Value:_AnimatedValue.default,ValueXY:_AnimatedValueXY.default,Interpolation:_AnimatedInterpolation.default,Node:_AnimatedNode.default,decay:decay,timing:timing,spring:spring,add:add,subtract:subtract,divide:divide,multiply:multiply,modulo:modulo,diffClamp:diffClamp,delay:delay,sequence:sequence,parallel:parallel,stagger:stagger,loop:loop,event:event,createAnimatedComponent:_createAnimatedComponent.default,attachNativeEvent:_AnimatedEvent.attachNativeEvent,forkEvent:forkEvent,unforkEvent:unforkEvent,Event:_AnimatedEvent.AnimatedEvent,__PropsOnlyForTests:_AnimatedProps.default},_default=AnimatedImplementation;exports.default=AnimatedImplementation,module.exports=exports.default;