"use strict";exports.__esModule=!0,exports.default=useElementLayout;var _ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),_useLayoutEffect=_interopRequireDefault(require("./useLayoutEffect")),_UIManager=_interopRequireDefault(require("../exports/UIManager"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var DOM_LAYOUT_HANDLER_NAME="__reactLayoutHandler",didWarn=!1,resizeObserver=null;function getResizeObserver(){return _ExecutionEnvironment.canUseDOM&&void 0!==window.ResizeObserver?null==resizeObserver&&(resizeObserver=new window.ResizeObserver(function(e){e.forEach(function(s){var e=s.target,a=e[DOM_LAYOUT_HANDLER_NAME];"function"==typeof a&&_UIManager.default.measure(e,function(e,r,t,n,u,o){var i={nativeEvent:{layout:{x:e,y:r,width:t,height:n,left:u,top:o}},timeStamp:Date.now()};Object.defineProperty(i.nativeEvent,"target",{enumerable:!0,get:function(){return s.target}}),a(i)})})})):didWarn||"production"!==process.env.NODE_ENV&&"test"!==process.env.NODE_ENV&&(console.warn("onLayout relies on ResizeObserver which is not supported by your browser. Please include a polyfill, e.g., https://github.com/que-etc/resize-observer-polyfill."),didWarn=!0),resizeObserver}function useElementLayout(r,t){var n=getResizeObserver();(0,_useLayoutEffect.default)(function(){var e=r.current;null!=e&&(e[DOM_LAYOUT_HANDLER_NAME]=t)},[r,t]),(0,_useLayoutEffect.default)(function(){var e=r.current;return null!=e&&null!=n&&("function"==typeof e[DOM_LAYOUT_HANDLER_NAME]?n.observe(e):n.unobserve(e)),function(){null!=e&&null!=n&&n.unobserve(e)}},[r,n])}module.exports=exports.default;