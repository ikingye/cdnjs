"use strict";exports.__esModule=!0,exports.default=void 0;var _infoLog=_interopRequireDefault(require("../infoLog")),_performanceNow=_interopRequireDefault(require("fbjs/lib/performanceNow"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var JSEventLoopWatchdog={getStats:function(){return{stallCount:stallCount,totalStallTime:totalStallTime,longestStall:longestStall,acceptableBusyTime:acceptableBusyTime}},reset:function(){(0,_infoLog.default)("JSEventLoopWatchdog: reset"),lastInterval=(longestStall=stallCount=totalStallTime=0,_performanceNow.default)()},addHandler:function(t){handlers.push(t)},install:function(t){var n=t.thresholdMS;acceptableBusyTime=n,installed||(installed=!0,lastInterval=(0,_performanceNow.default)(),function t(){var e,l,a=(0,_performanceNow.default)(),o=a-lastInterval;n<=o&&(stallCount++,totalStallTime+=e=o-n,longestStall=Math.max(longestStall,e),l="JSEventLoopWatchdog: JS thread busy for "+o+"ms. "+totalStallTime+"ms in "+stallCount+" stalls so far. ",handlers.forEach(function(t){l+=t.onStall({lastInterval:lastInterval,busyTime:o})||""}),(0,_infoLog.default)(l)),handlers.forEach(function(t){t.onIterate&&t.onIterate()}),lastInterval=a,setTimeout(t,n/5)}())}},acceptableBusyTime=0,installed=!1,totalStallTime=0,stallCount=0,longestStall=0,lastInterval=0,handlers=[],_default=JSEventLoopWatchdog;exports.default=JSEventLoopWatchdog,module.exports=exports.default;