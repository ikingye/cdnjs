"use strict";exports.__esModule=!0,exports.default=void 0;var _invariant=_interopRequireDefault(require("fbjs/lib/invariant")),_unmountComponentAtNode=_interopRequireDefault(require("../unmountComponentAtNode")),_renderApplication=_interopRequireWildcard(require("./renderApplication"));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _getRequireWildcardCache=function(){return e},e}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=_getRequireWildcardCache();if(n&&n.has(e))return n.get(e);var r,t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e){Object.prototype.hasOwnProperty.call(e,i)&&((r=o?Object.getOwnPropertyDescriptor(e,i):null)&&(r.get||r.set)?Object.defineProperty(t,i,r):t[i]=e[i])}return t.default=e,n&&n.set(e,t),t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ownKeys(n,e){var r,t=Object.keys(n);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(n),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)),t}function _objectSpread(n){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach(function(e){_defineProperty(n,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))})}return n}function _defineProperty(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}var wrapperComponentProvider,emptyObject={},runnables={},componentProviderInstrumentationHook=function(e){return e()},AppRegistry=function(){function o(){}return o.getAppKeys=function(){return Object.keys(runnables)},o.getApplication=function(e,n){return(0,_invariant.default)(runnables[e]&&runnables[e].getApplication,"Application "+e+" has not been registered. This is either due to an import error during initialization or failure to call AppRegistry.registerComponent."),runnables[e].getApplication(n)},o.registerComponent=function(e,n){return runnables[e]={getApplication:function(e){return(0,_renderApplication.getApplication)(componentProviderInstrumentationHook(n),e?e.initialProps:emptyObject,wrapperComponentProvider&&wrapperComponentProvider(e))},run:function(e){return(0,_renderApplication.default)(componentProviderInstrumentationHook(n),wrapperComponentProvider&&wrapperComponentProvider(e),e.callback,{hydrate:e.hydrate||!1,initialProps:e.initialProps||emptyObject,rootTag:e.rootTag})}},e},o.registerConfig=function(e){e.forEach(function(e){var n=e.appKey,r=e.component,t=e.run;t?o.registerRunnable(n,t):((0,_invariant.default)(r,"No component provider passed in"),o.registerComponent(n,r))})},o.registerRunnable=function(e,n){return runnables[e]={run:n},e},o.runApplication=function(e,n){var r,t="production"!==process.env.NODE_ENV&&"test"!==process.env.NODE_ENV;t&&((r=_objectSpread({},n)).rootTag="#"+r.rootTag.id,console.log('Running application "'+e+'" with appParams:\n',r,"\nDevelopment-level warnings: "+(t?"ON":"OFF")+".\nPerformance optimizations: "+(t?"OFF":"ON")+".")),(0,_invariant.default)(runnables[e]&&runnables[e].run,'Application "'+e+'" has not been registered. This is either due to an import error during initialization or failure to call AppRegistry.registerComponent.'),runnables[e].run(n)},o.setComponentProviderInstrumentationHook=function(e){componentProviderInstrumentationHook=e},o.setWrapperComponentProvider=function(e){wrapperComponentProvider=e},o.unmountApplicationComponentAtRootTag=function(e){(0,_unmountComponentAtNode.default)(e)},o}();exports.default=AppRegistry,module.exports=exports.default;