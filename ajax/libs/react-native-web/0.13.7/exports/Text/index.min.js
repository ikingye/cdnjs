import*as React from"react";import{forwardRef,useContext,useRef}from"react";import createElement from"../createElement";import css from"../StyleSheet/css";import pick from"../../modules/pick";import setAndForwardRef from"../../modules/setAndForwardRef";import useElementLayout from"../../hooks/useElementLayout";import usePlatformMethods from"../../hooks/usePlatformMethods";import useResponderEvents from"../../hooks/useResponderEvents";import StyleSheet from"../StyleSheet";import TextAncestorContext from"./TextAncestorContext";var forwardPropsList={accessibilityLabel:!0,accessibilityLiveRegion:!0,accessibilityRole:!0,accessibilityState:!0,accessibilityValue:!0,accessible:!0,children:!0,classList:!0,dir:!0,importantForAccessibility:!0,lang:!0,nativeID:!0,onBlur:!0,onClick:!0,onClickCapture:!0,onContextMenu:!0,onFocus:!0,onKeyDown:!0,onKeyUp:!0,onTouchCancel:!0,onTouchCancelCapture:!0,onTouchEnd:!0,onTouchEndCapture:!0,onTouchMove:!0,onTouchMoveCapture:!0,onTouchStart:!0,onTouchStartCapture:!0,pointerEvents:!0,ref:!0,style:!0,testID:!0,dataSet:!0,onMouseDown:!0,onMouseEnter:!0,onMouseLeave:!0,onMouseMove:!0,onMouseOver:!0,onMouseOut:!0,onMouseUp:!0,onScroll:!0,onWheel:!0,href:!0,rel:!0,target:!0},pickProps=function(e){return pick(e,forwardPropsList)},Text=forwardRef(function(e,o){var t=e.dir,n=e.numberOfLines,r=e.onClick,s=e.onLayout,l=e.onPress,a=e.onMoveShouldSetResponder,i=e.onMoveShouldSetResponderCapture,d=e.onResponderEnd,p=e.onResponderGrant,u=e.onResponderMove,c=e.onResponderReject,S=e.onResponderRelease,R=e.onResponderStart,h=e.onResponderTerminate,m=e.onResponderTerminationRequest,f=e.onScrollShouldSetResponder,x=e.onScrollShouldSetResponderCapture,v=e.onSelectionChangeShouldSetResponder,C=e.onSelectionChangeShouldSetResponderCapture,y=e.onStartShouldSetResponder,b=e.onStartShouldSetResponderCapture,w=e.selectable,M=useContext(TextAncestorContext),T=useRef(null),k=setAndForwardRef({getForwardedRef:function(){return o},setLocalRef:function(e){T.current=e}}),L=[classes.text,!0===M&&classes.textHasAncestor,1===n&&classes.textOneLine,null!=n&&n>1&&classes.textMultiLine],E=[e.style,null!=n&&n>1&&{WebkitLineClamp:n},!1===w&&styles.notSelectable,l&&styles.pressable];useElementLayout(T,s),useResponderEvents(T,{onMoveShouldSetResponder:a,onMoveShouldSetResponderCapture:i,onResponderEnd:d,onResponderGrant:p,onResponderMove:u,onResponderReject:c,onResponderRelease:S,onResponderStart:R,onResponderTerminate:h,onResponderTerminationRequest:m,onScrollShouldSetResponder:f,onScrollShouldSetResponderCapture:x,onSelectionChangeShouldSetResponder:v,onSelectionChangeShouldSetResponderCapture:C,onStartShouldSetResponder:y,onStartShouldSetResponderCapture:b});var g=M?"span":"div",A=pickProps(e);A.classList=L,A.dir=void 0!==t?t:"auto",A.onClick=function(e){null!=r&&r(e),null==r&&null!=l&&(e.stopPropagation(),l(e))},A.ref=k,A.style=E,usePlatformMethods(T,A);var P=createElement(g,A);return M?P:React.createElement(TextAncestorContext.Provider,{value:!0},P)});Text.displayName="Text";var classes=css.create({text:{border:"0 solid black",boxSizing:"border-box",color:"black",display:"inline",font:"14px System",margin:0,padding:0,whiteSpace:"pre-wrap",wordWrap:"break-word"},textHasAncestor:{color:"inherit",font:"inherit",whiteSpace:"inherit"},textOneLine:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},textMultiLine:{display:"-webkit-box",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",WebkitBoxOrient:"vertical"}}),styles=StyleSheet.create({notSelectable:{userSelect:"none"},pressable:{cursor:"pointer"}});export default Text;