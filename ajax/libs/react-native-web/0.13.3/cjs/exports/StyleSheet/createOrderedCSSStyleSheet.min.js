"use strict";exports.__esModule=!0,exports.default=createOrderedCSSStyleSheet;var slice=Array.prototype.slice;function createOrderedCSSStyleSheet(l){var n,p={},s={};function o(e,t,r){var u=getOrderedGroups(p),n=u.indexOf(t)+1,l=u[n],s=null!=l&&null!=p[l].start?p[l].start:e.cssRules.length,o=insertRuleAt(e,r,s);if(o){null==p[t].start&&(p[t].start=s);for(var c=n;c<u.length;c+=1){var a=u[c],i=p[a].start;p[a].start=i+1}}return o}return null!=l&&slice.call(l.cssRules).forEach(function(e,t){var r,u=e.cssText;-1<u.indexOf("stylesheet-group")?(n=decodeGroupRule(e),p[n]={start:t,rules:[u]}):null!=(r=getSelectorText(u))&&(s[r]=!0,p[n].rules.push(u))}),{getTextContent:function(){return getOrderedGroups(p).map(function(e){return p[e].rules.join("\n")}).join("\n")},insert:function(e,t){var r,u=Number(t);null==p[u]&&(r=encodeGroupRule(u),p[u]={start:null,rules:[r]},null!=l&&o(l,u,r));var n=getSelectorText(e);null!=n&&null==s[n]&&(s[n]=!0,p[u].rules.push(e),null!=l&&(o(l,u,e)||p[u].rules.pop()))}}}function encodeGroupRule(e){return'[stylesheet-group="'+e+'"]{}'}function decodeGroupRule(e){return Number(e.selectorText.split(/["']/)[1])}function getOrderedGroups(e){return Object.keys(e).map(Number).sort(function(e,t){return t<e?1:-1})}var pattern=/\s*([,])\s*/g;function getSelectorText(e){var t=e.split("{")[0].trim();return""!==t?t.replace(pattern,"$1"):null}function insertRuleAt(e,t,r){try{return e.insertRule(t,r),!0}catch(e){return!1}}module.exports=exports.default;