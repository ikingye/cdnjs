"use strict";exports.__esModule=!0,exports.default=void 0;var _NativeAnimatedHelper=_interopRequireDefault(require("../NativeAnimatedHelper")),_invariant=_interopRequireDefault(require("fbjs/lib/invariant"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var NativeAnimatedAPI=_NativeAnimatedHelper.default.API,_uniqueId=1,AnimatedNode=function(){var e=t.prototype;function t(){this._listeners={}}return e.__attach=function(){},e.__detach=function(){this.__isNative&&null!=this.__nativeTag&&(_NativeAnimatedHelper.default.API.dropAnimatedNode(this.__nativeTag),this.__nativeTag=void 0)},e.__getValue=function(){},e.__getAnimatedValue=function(){return this.__getValue()},e.__addChild=function(){},e.__removeChild=function(){},e.__getChildren=function(){return[]},e.__makeNative=function(){if(!this.__isNative)throw new Error('This node cannot be made a "native" animated node');this.hasListeners()&&this._startListeningToNativeValueUpdates()},e.addListener=function(e){var t=String(_uniqueId++);return this._listeners[t]=e,this.__isNative&&this._startListeningToNativeValueUpdates(),t},e.removeListener=function(e){delete this._listeners[e],this.__isNative&&!this.hasListeners()&&this._stopListeningForNativeValueUpdates()},e.removeAllListeners=function(){this._listeners={},this.__isNative&&this._stopListeningForNativeValueUpdates()},e.hasListeners=function(){return!!Object.keys(this._listeners).length},e._startListeningToNativeValueUpdates=function(){var t=this;this.__nativeAnimatedValueListener&&!this.__shouldUpdateListenersForNewNativeTag||(this.__shouldUpdateListenersForNewNativeTag&&(this.__shouldUpdateListenersForNewNativeTag=!1,this._stopListeningForNativeValueUpdates()),NativeAnimatedAPI.startListeningToAnimatedNodeValue(this.__getNativeTag()),this.__nativeAnimatedValueListener=_NativeAnimatedHelper.default.nativeEventEmitter.addListener("onAnimatedValueUpdate",function(e){e.tag===t.__getNativeTag()&&t._onAnimatedValueUpdateReceived(e.value)}))},e._onAnimatedValueUpdateReceived=function(e){this.__callListeners(e)},e.__callListeners=function(e){for(var t in this._listeners)this._listeners[t]({value:e})},e._stopListeningForNativeValueUpdates=function(){this.__nativeAnimatedValueListener&&(this.__nativeAnimatedValueListener.remove(),this.__nativeAnimatedValueListener=null,NativeAnimatedAPI.stopListeningToAnimatedNodeValue(this.__getNativeTag()))},e.__getNativeTag=function(){var e;return _NativeAnimatedHelper.default.assertNativeAnimatedModule(),(0,_invariant.default)(this.__isNative,'Attempt to get native tag from node not marked as "native"'),null==this.__nativeTag&&(e=_NativeAnimatedHelper.default.generateNewNodeTag(),this.__nativeTag=e,_NativeAnimatedHelper.default.API.createAnimatedNode(e,this.__getNativeConfig()),this.__shouldUpdateListenersForNewNativeTag=!0),this.__nativeTag},e.__getNativeConfig=function(){throw new Error("This JS animated node type cannot be used as native animated node")},e.toJSON=function(){return this.__getValue()},t}(),_default=AnimatedNode;exports.default=AnimatedNode,module.exports=exports.default;