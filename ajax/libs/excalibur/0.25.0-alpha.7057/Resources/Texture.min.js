var __extends=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();import{Resource}from"./Resource";import{Promise}from"../Promises";import{Sprite}from"../Drawing/Sprite";var Texture=function(t){function e(e,i){void 0===i&&(i=!0);var r=t.call(this,e,"blob",i)||this;return r.path=e,r.bustCache=i,r.loaded=new Promise,r._isLoaded=!1,r._sprite=null,r._sprite=new Sprite(r,0,0,0,0),r}return __extends(e,t),e.prototype.isLoaded=function(){return this._isLoaded},e.prototype.load=function(){var e=this,i=new Promise;this.path.indexOf("data:image/")>-1?(this.image=new Image,this.image.addEventListener("load",function(){e.oncomplete(),e._isLoaded=!0,e.width=e._sprite.width=e.image.naturalWidth,e.height=e._sprite.height=e.image.naturalHeight,e._sprite=new Sprite(e,0,0,e.width,e.height),e.loaded.resolve(e.image),i.resolve(e.image)}),this.image.src=this.path):t.prototype.load.call(this).then(function(){e.image=new Image,e.image.addEventListener("load",function(){e._isLoaded=!0,e.width=e._sprite.width=e.image.naturalWidth,e.height=e._sprite.height=e.image.naturalHeight,e.loaded.resolve(e.image),i.resolve(e.image)}),e.image.src=t.prototype.getData.call(e)},function(){i.reject("Error loading texture.")});return i},e.prototype.asSprite=function(){return this._sprite},e}(Resource);export{Texture};