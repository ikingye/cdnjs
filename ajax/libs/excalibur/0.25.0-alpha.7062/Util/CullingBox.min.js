import{Vector}from"../Algebra";import{Color}from"../Drawing/Color";var CullingBox=function(){function t(){this._topLeft=new Vector(0,0),this._topRight=new Vector(0,0),this._bottomLeft=new Vector(0,0),this._bottomRight=new Vector(0,0)}return t.prototype.isSpriteOffScreen=function(t,o){var i=t.currentDrawing.drawWidth,e=t.currentDrawing.drawHeight,h=t.rotation,r=t.center,s=t.getWorldPos();this._topLeft.x=s.x-i/2,this._topLeft.y=s.y-e/2,this._topLeft=this._topLeft.rotate(h,r),this._topRight.x=s.x+i/2,this._topRight.y=s.y-e/2,this._topRight=this._topRight.rotate(h,r),this._bottomLeft.x=s.x-i/2,this._bottomLeft.y=s.y+e/2,this._bottomLeft=this._bottomLeft.rotate(h,r),this._bottomRight.x=s.x+i/2,this._bottomRight.y=s.y+e/2,this._bottomRight=this._bottomRight.rotate(h,r);var n=o.worldToScreenCoordinates(this._topLeft),a=o.worldToScreenCoordinates(this._topRight),l=o.worldToScreenCoordinates(this._bottomLeft),_=o.worldToScreenCoordinates(this._bottomRight);this._xCoords=[],this._yCoords=[],this._xCoords.push(n.x,a.x,l.x,_.x),this._yCoords.push(n.y,a.y,l.y,_.y),this._xMin=Math.min.apply(null,this._xCoords),this._yMin=Math.min.apply(null,this._yCoords),this._xMax=Math.max.apply(null,this._xCoords),this._yMax=Math.max.apply(null,this._yCoords);var x=o.screenToWorldCoordinates(new Vector(this._xMin,this._yMin)),y=o.screenToWorldCoordinates(new Vector(this._xMax,this._yMax));this._xMinWorld=x.x,this._yMinWorld=x.y,this._xMaxWorld=y.x,this._yMaxWorld=y.y;var c=[new Vector(this._xMin,this._yMin),new Vector(this._xMax,this._yMin),new Vector(this._xMin,this._yMax),new Vector(this._xMax,this._yMax)];if(c[0].x<0&&c[1].x>o.canvas.clientWidth&&(c[0].y>0||c[2].y<o.canvas.clientHeight))return!1;if(c[0].y<0&&c[2].y>o.canvas.clientHeight&&(c[1].x>0||c[0].x<o.canvas.clientWidth))return!1;for(var g=0;g<c.length;g++)if(c[g].x>0&&c[g].y>0&&c[g].x<o.canvas.clientWidth&&c[g].y<o.canvas.clientHeight)return!1;return!0},t.prototype.debugDraw=function(t){t.beginPath(),t.strokeStyle=Color.White.toString(),t.rect(this._xMinWorld,this._yMinWorld,this._xMaxWorld-this._xMinWorld,this._yMaxWorld-this._yMinWorld),t.stroke(),t.fillStyle=Color.Red.toString(),t.beginPath(),t.arc(this._topLeft.x,this._topLeft.y,5,0,2*Math.PI),t.closePath(),t.fill(),t.fillStyle=Color.Green.toString(),t.beginPath(),t.arc(this._topRight.x,this._topRight.y,5,0,2*Math.PI),t.closePath(),t.fill(),t.fillStyle=Color.Blue.toString(),t.beginPath(),t.arc(this._bottomLeft.x,this._bottomLeft.y,5,0,2*Math.PI),t.closePath(),t.fill(),t.fillStyle=Color.Magenta.toString(),t.beginPath(),t.arc(this._bottomRight.x,this._bottomRight.y,5,0,2*Math.PI),t.closePath(),t.fill()},t}();export{CullingBox};