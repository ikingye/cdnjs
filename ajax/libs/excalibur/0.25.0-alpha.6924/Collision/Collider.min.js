import{Color}from"../Drawing/Color";import*as DrawUtil from"../Util/DrawUtil";import{Vector}from"../Algebra";import{Physics}from"../Physics";import{BoundingBox}from"./BoundingBox";import{CollisionType}from"./CollisionType";import{CollisionGroup}from"./CollisionGroup";import{EventDispatcher}from"../EventDispatcher";import{Pair}from"./Pair";export function isCollider(e){return e instanceof Collider};var Collider=function(){function e(e){var t=e.body,o=e.type,i=e.group,r=e.shape,s=e.offset,n=e.useShapeInertia,p=void 0===n||n;this._events=new EventDispatcher(this),this.type=CollisionType.PreventCollision,this.group=CollisionGroup.All,this.mass=1,this.inertia=1e3,this.friction=.99,this.bounciness=.2,t&&t.collider&&!r?this._shape=t.collider.shape:(this._shape=r,this.body=t),this.useShapeInertia=p,this._shape.collider=this,this.type=o||this.type,this.group=i||this.group,this.offset=s||Vector.Zero}return e.prototype.clone=function(){return new e({body:null,type:this.type,shape:this._shape.clone(),group:this.group,offset:this.offset})},Object.defineProperty(e.prototype,"id",{get:function(){return this.body?this.body.id:-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shape",{get:function(){return this._shape},set:function(e){this._shape=e,this._shape.collider=this,this.useShapeInertia&&(this.inertia=isNaN(this._shape.inertia)?this.inertia:this._shape.inertia)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){return this.bounds.center},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){return this.body.active},enumerable:!1,configurable:!0}),e.prototype.collide=function(e){return this.shape.collide(e.shape)},e.prototype.getClosestLineBetween=function(e){return this.shape.getClosestLineBetween(e.shape)},Object.defineProperty(e.prototype,"offset",{get:function(){return this.shape.offset.clone()},set:function(e){this.shape.offset=e.clone()},enumerable:!1,configurable:!0}),e.prototype.touching=function(e){var t=new Pair(this,e);return t.collide(),!!t.collision},Object.defineProperty(e.prototype,"bounds",{get:function(){return this.shape?this.shape.bounds:this.body?(new BoundingBox).translate(this.body.pos):new BoundingBox},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localBounds",{get:function(){return this.shape?this.shape.localBounds:new BoundingBox},enumerable:!1,configurable:!0}),e.prototype.update=function(){this.shape&&this.shape.recalc()},e.prototype.emit=function(e,t){this._events.emit(e,t)},e.prototype.on=function(e,t){this._events.on(e,t)},e.prototype.off=function(e,t){this._events.off(e,t)},e.prototype.once=function(e,t){this._events.once(e,t)},e.prototype.clear=function(){this._events.clear()},e.prototype.debugDraw=function(e){Physics.showMotionVectors&&(DrawUtil.vector(e,Color.Yellow,this.body.pos,this.body.acc.add(Physics.acc)),DrawUtil.vector(e,Color.Red,this.body.pos,this.body.vel),DrawUtil.point(e,Color.Red,this.body.pos)),Physics.showBounds&&this.bounds.debugDraw(e,Color.Yellow),Physics.showArea&&this.shape.debugDraw(e,Color.Green)},e}();export{Collider};