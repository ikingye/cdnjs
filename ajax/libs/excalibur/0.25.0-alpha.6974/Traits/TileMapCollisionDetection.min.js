import{Side}from"../Collision/Side";import{PreCollisionEvent,PostCollisionEvent}from"../Events";import{CollisionType}from"../Collision/CollisionType";import{BoundingBox}from"../Collision/Index";var TileMapCollisionDetection=function(){function o(){}return o.prototype.update=function(o,e){var i=o.eventDispatcher;if(o.body.collider.type!==CollisionType.PreventCollision&&e.currentScene&&e.currentScene.tileMaps)for(var n=0;n<e.currentScene.tileMaps.length;n++)for(var l=e.currentScene.tileMaps[n],t=void 0,r=Side.None,s=2;(t=l.collides(o))&&!(s--<0);)r=BoundingBox.getSideFromIntersection(t),i.emit("precollision",new PreCollisionEvent(o,null,r,t)),o.body.collider.type===CollisionType.Active&&(o.pos.y+=t.y,o.pos.x+=t.x,i.emit("postcollision",new PostCollisionEvent(o,null,r,t)))},o}();export{TileMapCollisionDetection};