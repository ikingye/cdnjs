var __extends=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();import{Resource}from"./Resource";import{Promise}from"../Promises";import{Sprite}from"../Drawing/Sprite";var Texture=function(e){function t(t,i){void 0===i&&(i=!0);var r=e.call(this,t,"blob",i)||this;return r.path=t,r.bustCache=i,r.loaded=new Promise,r._isLoaded=!1,r._sprite=null,r._sprite=new Sprite(r,0,0,0,0),r}return __extends(t,e),t.prototype.isLoaded=function(){return this._isLoaded},t.prototype.load=function(){var t=this,i=new Promise;this.path.indexOf("data:image/")>-1?(this.image=new Image,this.image.addEventListener("load",function(){t.oncomplete(),t._isLoaded=!0,t.width=t._sprite.width=t.image.naturalWidth,t.height=t._sprite.height=t.image.naturalHeight,t._sprite=new Sprite(t,0,0,t.width,t.height),t.loaded.resolve(t.image),i.resolve(t.image)}),this.image.src=this.path):e.prototype.load.call(this).then(function(){t.image=new Image,t.image.addEventListener("load",function(){t._isLoaded=!0,t.width=t._sprite.width=t.image.naturalWidth,t.height=t._sprite.height=t.image.naturalHeight,t.loaded.resolve(t.image),i.resolve(t.image)}),t.image.src=e.prototype.getData.call(t)},function(){i.reject("Error loading texture.")});return i},t.prototype.asSprite=function(){return this._sprite},t}(Resource);export{Texture};