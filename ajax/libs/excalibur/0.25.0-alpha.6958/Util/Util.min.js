import{Vector}from"../Algebra";import{Random}from"../Math/Random";import{Side}from"../Collision/Side";export var TwoPI=2*Math.PI;export function extend(){var t={},r=!1,n=0,e=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(r=arguments[0],n++);var o="function"==typeof Object.assign,i=null;for(i=o?Object.assign:function(n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(r&&"[object Object]"===Object.prototype.toString.call(n[e])?t[e]=extend(!0,t[e],n[e]):t[e]=n[e])};n<e;n++){var a=arguments[n];o?i(t,a):i(a)}return t};export function base64Encode(t){for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="",e=0;e<t.length;){var o=255&t.charCodeAt(e++),i=255&t.charCodeAt(e++),a=255&t.charCodeAt(e++),c=o>>2,f=(3&o)<<4|i>>4,u=void 0,h=void 0;isNaN(i)?u=h=64:(u=(15&i)<<2|a>>6,h=isNaN(a)?64:63&a),n+=r.charAt(c)+r.charAt(f)+r.charAt(u)+r.charAt(h)}return n};export function nullish(t,r){return null!=t?t:r};export function clamp(t,r,n){return Math.min(Math.max(r,t),n)};export function randomInRange(t,r,n){return void 0===n&&(n=new Random),n?n.floating(t,r):t+Math.random()*(r-t)};export function randomIntInRange(t,r,n){return void 0===n&&(n=new Random),n?n.integer(t,r):Math.round(randomInRange(t,r))};export function canonicalizeAngle(t){var r=t;if(t>TwoPI)for(;r>TwoPI;)r-=TwoPI;if(t<0)for(;r<0;)r+=TwoPI;return r};export function toDegrees(t){return 180/Math.PI*t};export function toRadians(t){return t/180*Math.PI};export function getPosition(t){var r=0,n=0,e=function(t){r+=t.offsetLeft,t.offsetParent&&e(t.offsetParent)},o=function(t){n+=t.offsetTop,t.offsetParent&&o(t.offsetParent)};return e(t),o(t),new Vector(r,n)};export function addItemToArray(t,r){return-1===r.indexOf(t)&&(r.push(t),!0)};export function removeItemFromArray(t,r){var n;return(n=r.indexOf(t))>-1&&(r.splice(n,1),!0)};export function contains(t,r){for(var n=0;n<t.length;n++)if(t[n]===r)return!0;return!1};export function getOppositeSide(t){return t===Side.Top?Side.Bottom:t===Side.Bottom?Side.Top:t===Side.Left?Side.Right:t===Side.Right?Side.Left:Side.None};export function getSideFromDirection(t){for(var r=[Vector.Left,Vector.Right,Vector.Up,Vector.Down],n=[Side.Left,Side.Right,Side.Top,Side.Bottom],e=-Number.MAX_VALUE,o=-1,i=0;i<r.length;i++)r[i].dot(t)>e&&(e=r[i].dot(t),o=i);return n[o]};var Collection=function(){function t(r){void 0===r&&(r=t.DefaultSize),this._internalArray=null,this._endPointer=0,this._internalArray=new Array(r)}return t.prototype._resize=function(){for(var t=2*this._internalArray.length,r=new Array(t),n=this.count(),e=0;e<n;e++)r[e]=this._internalArray[e];delete this._internalArray,this._internalArray=r},t.prototype.push=function(t){return this._endPointer===this._internalArray.length&&this._resize(),this._internalArray[this._endPointer++]=t},t.prototype.pop=function(){return this._endPointer=this._endPointer-1<0?0:this._endPointer-1,this._internalArray[this._endPointer]},t.prototype.count=function(){return this._endPointer},t.prototype.clear=function(){this._endPointer=0},t.prototype.internalSize=function(){return this._internalArray.length},t.prototype.elementAt=function(t){if(t>=this.count())throw new Error("Invalid index "+t);return this._internalArray[t]},t.prototype.insert=function(t,r){return t>=this.count()&&this._resize(),this._internalArray[t]=r},t.prototype.remove=function(t){var r=this.count();if(0===r)throw new Error("Invalid parameter "+t);for(var n=this._internalArray[t],e=t;e<r;e++)this._internalArray[e]=this._internalArray[e+1];return this._endPointer--,n},t.prototype.removeElement=function(t){var r=this._internalArray.indexOf(t);this.remove(r)},t.prototype.toArray=function(){return this._internalArray.slice(0,this._endPointer)},t.prototype.forEach=function(t){for(var r=0,n=this.count();r<n;r++)t.call(this,this._internalArray[r],r)},t.prototype.map=function(t){for(var r=this.count(),n=0;n<r;n++)this._internalArray[n]=t.call(this,this._internalArray[n],n)},t.DefaultSize=200,t}();export{Collection};export function fail(t){throw new Error(t)};