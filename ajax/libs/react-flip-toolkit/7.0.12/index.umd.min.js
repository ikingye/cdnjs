!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("prop-types"),require("react"),require("flip-toolkit")):"function"==typeof define&&define.amd?define(["exports","prop-types","react","flip-toolkit"],t):t(e.ReactFlipToolkit={},e.PropTypes,e.React,e.FlipToolkit)}(this,function(e,t,a,u){t=t&&t.hasOwnProperty("default")?t.default:t;var n,h="default"in a?a.default:a,m=a.createContext({}),y=a.createContext("portal"),i=((n=a.Component)&&(r.__proto__=n),((r.prototype=Object.create(n&&n.prototype)).constructor=r).prototype.getSnapshotBeforeUpdate=function(e){return e.flipKey!==this.props.flipKey&&this.el?u.getFlippedElementPositionsBeforeUpdate({element:this.el,flipCallbacks:this.flipCallbacks,inProgressAnimations:this.inProgressAnimations,portalKey:this.props.portalKey}):null},r.prototype.componentDidUpdate=function(e,t,n){this.props.flipKey!==e.flipKey&&this.el&&u.onFlipKeyUpdate({flippedElementPositionsBeforeUpdate:n.flippedElementPositions,cachedOrderedFlipIds:n.cachedOrderedFlipIds,containerEl:this.el,inProgressAnimations:this.inProgressAnimations,flipCallbacks:this.flipCallbacks,applyTransformOrigin:this.props.applyTransformOrigin,spring:this.props.spring,debug:this.props.debug,portalKey:this.props.portalKey,staggerConfig:this.props.staggerConfig,handleEnterUpdateDelete:this.props.handleEnterUpdateDelete,decisionData:{previous:e.decisionData,current:this.props.decisionData},onComplete:this.props.onComplete,onStart:this.props.onStart})},r.prototype.render=function(){var t=this,e=this.props,n=e.portalKey,i=h.createElement(m.Provider,{value:this.flipCallbacks},h.createElement(e.element,{className:e.className,ref:function(e){return t.el=e}},this.props.children));return n&&(i=h.createElement(y.Provider,{value:n},i)),i},r);function r(){n.apply(this,arguments),this.inProgressAnimations={},this.flipCallbacks={},this.el=void 0}function g(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&-1===t.indexOf(i)&&(n[i]=e[i]);return n}i.defaultProps={applyTransformOrigin:!0,element:"div"};function E(e){var t=e.children,n=e.flipId,i=e.inverseFlipId,r=e.portalKey,o=g(e,["children","flipId","inverseFlipId","portalKey"]),p=t,l="function"==typeof p;if(!l)try{p=a.Children.only(t)}catch(e){throw new Error("Each Flipped component must wrap a single child")}o.scale||o.translate||o.opacity||u.utilities.assign(o,{translate:!0,scale:!0,opacity:!0});var s={};return s[u.constants.DATA_FLIP_CONFIG]=JSON.stringify(o),n?s[u.constants.DATA_FLIP_ID]=String(n):i&&(s[u.constants.DATA_INVERSE_FLIP_ID]=String(i)),r&&(s[u.constants.DATA_PORTAL_KEY]=r),l?p(s):a.cloneElement(p,s)}function o(e){var n=e.children,i=e.flipId,r=e.shouldFlip,o=e.shouldInvert,p=e.onAppear,l=e.onStart,s=e.onStartImmediate,a=e.onComplete,c=e.onExit,d=e.onSpringUpdate,f=g(e,["children","flipId","shouldFlip","shouldInvert","onAppear","onStart","onStartImmediate","onComplete","onExit","onSpringUpdate"]);return n?f.inverseFlipId?h.createElement(E,Object.assign({},f),n):h.createElement(y.Consumer,null,function(t){return h.createElement(m.Consumer,null,function(e){return u.utilities.isObject(e)&&i&&(e[i]={shouldFlip:r,shouldInvert:o,onAppear:p,onStart:l,onStartImmediate:s,onComplete:a,onExit:c,onSpringUpdate:d}),h.createElement(E,Object.assign({flipId:i},f,{portalKey:t}),n)})}):null}o.displayName="Flipped",e.Flipper=i,e.Flipped=o,e.ExitContainer=function(e){var t;return a.cloneElement(e.children,((t={})[u.constants.DATA_EXIT_CONTAINER]=!0,t))},e.spring=u.spring});