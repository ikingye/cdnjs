import _defineProperty from"@babel/runtime/helpers/esm/defineProperty";import _extends from"@babel/runtime/helpers/esm/extends";import _slicedToArray from"@babel/runtime/helpers/esm/slicedToArray";import _objectWithoutProperties from"@babel/runtime/helpers/esm/objectWithoutProperties";import*as React from"react";import clsx from"clsx";import PropTypes from"prop-types";import{Transition}from"react-transition-group";import withStyles from"../styles/withStyles";import{duration}from"../styles/transitions";import{getTransitionProps}from"../transitions/utils";import useTheme from"../styles/useTheme";import{useForkRef}from"../utils";export var styles=function(e){return{container:{height:0,overflow:"hidden",transition:e.transitions.create("height"),"&$horizontal":{height:"auto",width:0,transition:e.transitions.create("width")}},horizontal:{},entered:{height:"auto",overflow:"visible","&$horizontal":{width:"auto"}},hidden:{visibility:"hidden"},wrapper:{display:"flex",width:"100%","&$horizontal":{width:"auto",height:"100%"}},wrapperInner:{width:"100%","&$horizontal":{width:"auto",height:"100%"}}}};var Collapse=React.forwardRef(function(e,t){var o=e.children,n=e.classes,r=e.className,i=e.collapsedSize,s=void 0===i?"0px":i,a=e.component,p=void 0===a?"div":a,l=e.disableStrictModeCompat,c=void 0!==l&&l,u=e.in,d=e.onEnter,m=e.onEntered,y=e.onEntering,f=e.onExit,h=e.onExited,T=e.onExiting,P=e.orientation,x=void 0===P?"vertical":P,E=e.style,v=e.timeout,g=void 0===v?duration.standard:v,b=e.TransitionComponent,R=void 0===b?Transition:b,w=_objectWithoutProperties(e,["children","classes","className","collapsedSize","component","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"]),z=useTheme(),_=React.useRef(),C=React.useRef(null),S=React.useRef(),N="number"==typeof s?"".concat(s,"px"):s,D="vertical"!==x,A=D?"width":"height";React.useEffect(function(){return function(){clearTimeout(_.current)}},[]);var j=z.unstable_strictMode&&!c,M=React.useRef(null),O=useForkRef(t,j?M:void 0),W=function(e){return function(t,o){if(e){var n=j?[M.current,t]:[t,o],r=_slicedToArray(n,2),i=r[0],s=r[1];void 0===s?e(i):e(i,s)}}},H=function(){return C.current?C.current[D?"clientWidth":"clientHeight"]:0},$=W(function(e,t){C.current&&(C.current.style.position="absolute"),e.style[A]=N,d&&d(e,t)}),k=W(function(e,t){var o=H();C.current&&(C.current.style.position="");var n=getTransitionProps({style:E,timeout:g},{mode:"enter"}).duration;if("auto"===g){var r=z.transitions.getAutoHeightDuration(o);e.style.transitionDuration="".concat(r,"ms"),S.current=r}else e.style.transitionDuration="string"==typeof n?n:"".concat(n,"ms");e.style[A]="".concat(o,"px"),y&&y(e,t)}),F=W(function(e,t){e.style[A]="auto",m&&m(e,t)}),I=W(function(e){e.style[A]="".concat(H(),"px"),f&&f(e)}),L=W(h),V=W(function(e){var t=H(),o=getTransitionProps({style:E,timeout:g},{mode:"exit"}).duration;if("auto"===g){var n=z.transitions.getAutoHeightDuration(t);e.style.transitionDuration="".concat(n,"ms"),S.current=n}else e.style.transitionDuration="string"==typeof o?o:"".concat(o,"ms");e.style[A]=N,T&&T(e)});return React.createElement(R,_extends({in:u,onEnter:$,onEntered:F,onEntering:k,onExit:I,onExited:L,onExiting:V,addEndListener:function(e,t){var o=j?e:t;"auto"===g&&(_.current=setTimeout(o,S.current||0))},nodeRef:j?M:void 0,timeout:"auto"===g?null:g},w),function(e,t){return React.createElement(p,_extends({className:clsx(n.container,r,D&&n.horizontal,{entered:n.entered,exited:!u&&"0px"===N&&n.hidden}[e]),style:_extends(_defineProperty({},D?"minWidth":"minHeight",N),E),ref:O},t),React.createElement("div",{className:clsx(n.wrapper,D&&n.horizontal),ref:C},React.createElement("div",{className:clsx(n.wrapperInner,D&&n.horizontal)},o)))})});"production"!==process.env.NODE_ENV&&(Collapse.propTypes={children:PropTypes.node,classes:PropTypes.object,className:PropTypes.string,collapsedSize:PropTypes.oneOfType([PropTypes.number,PropTypes.string]),component:PropTypes.elementType,disableStrictModeCompat:PropTypes.bool,in:PropTypes.bool,onEnter:PropTypes.func,onEntered:PropTypes.func,onEntering:PropTypes.func,onExit:PropTypes.func,onExited:PropTypes.func,onExiting:PropTypes.func,orientation:PropTypes.oneOf(["horizontal","vertical"]),style:PropTypes.object,timeout:PropTypes.oneOfType([PropTypes.oneOf(["auto"]),PropTypes.number,PropTypes.shape({appear:PropTypes.number,enter:PropTypes.number,exit:PropTypes.number})])}),Collapse.muiSupportAuto=!0;export default withStyles(styles,{name:"MuiCollapse"})(Collapse);