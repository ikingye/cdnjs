import _extends from"@babel/runtime/helpers/esm/extends";import _objectWithoutProperties from"@babel/runtime/helpers/esm/objectWithoutProperties";import _toConsumableArray from"@babel/runtime/helpers/esm/toConsumableArray";import*as React from"react";import PropTypes from"prop-types";import clsx from"clsx";import debounce from"../utils/debounce";import withStyles from"../styles/withStyles";import isMuiElement from"../utils/isMuiElement";import{ownerWindow}from"../utils";export var styles={root:{boxSizing:"border-box",flexShrink:0},tile:{position:"relative",display:"block",height:"100%",overflow:"hidden"},imgFullHeight:{height:"100%",transform:"translateX(-50%)",position:"relative",left:"50%"},imgFullWidth:{width:"100%",position:"relative",transform:"translateY(-50%)",top:"50%"}};var fit=function(e,t){var r,o,s,i;e&&e.complete&&(e.width/e.height>e.parentElement.offsetWidth/e.parentElement.offsetHeight?((r=e.classList).remove.apply(r,_toConsumableArray(t.imgFullWidth.split(" "))),(o=e.classList).add.apply(o,_toConsumableArray(t.imgFullHeight.split(" ")))):((s=e.classList).remove.apply(s,_toConsumableArray(t.imgFullHeight.split(" "))),(i=e.classList).add.apply(i,_toConsumableArray(t.imgFullWidth.split(" ")))))},ImageListItem=React.forwardRef(function(e,t){var r=e.children,o=e.classes,s=e.className,i=(e.cols,e.component),l=void 0===i?"li":i,n=(e.rows,_objectWithoutProperties(e,["children","classes","className","cols","component","rows"])),a=React.useRef(null);return React.useEffect(function(){var e,t=a.current;if(t)return t.complete?fit(t,o):(e=function(){fit(t,o)},t.addEventListener("load",e)),function(){e&&t.removeEventListener("load",e)}}),React.useEffect(function(){var e=debounce(function(){fit(a.current,o)}),t=ownerWindow(a.current);return t.addEventListener("resize",e),function(){e.clear(),t.removeEventListener("resize",e)}},[o]),React.createElement(l,_extends({className:clsx(o.root,s),ref:t},n),React.createElement("div",{className:o.tile},React.Children.map(r,function(e){return React.isValidElement(e)?"img"===e.type||isMuiElement(e,["Image"])?React.cloneElement(e,{ref:a}):e:null})))});"production"!==process.env.NODE_ENV&&(ImageListItem.propTypes={children:PropTypes.node,classes:PropTypes.object,className:PropTypes.string,cols:PropTypes.number,component:PropTypes.elementType,rows:PropTypes.number});export default withStyles(styles,{name:"MuiImageListItem"})(ImageListItem);