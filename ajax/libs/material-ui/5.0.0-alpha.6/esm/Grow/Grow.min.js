import _extends from"@babel/runtime/helpers/esm/extends";import _objectWithoutProperties from"@babel/runtime/helpers/esm/objectWithoutProperties";import*as React from"react";import PropTypes from"prop-types";import{elementAcceptingRef}from"@material-ui/utils";import{Transition}from"react-transition-group";import useTheme from"../styles/useTheme";import{reflow,getTransitionProps}from"../transitions/utils";import useForkRef from"../utils/useForkRef";function getScale(e){return"scale(".concat(e,", ").concat(Math.pow(e,2),")")}var styles={entering:{opacity:1,transform:getScale(1)},entered:{opacity:1,transform:"none"}},Grow=React.forwardRef(function(e,t){var n=e.children,o=e.in,r=e.onEnter,i=e.onEntered,s=e.onEntering,a=e.onExit,u=e.onExited,p=e.onExiting,c=e.style,f=e.timeout,l=void 0===f?"auto":f,m=e.TransitionComponent,y=void 0===m?Transition:m,d=_objectWithoutProperties(e,["children","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),E=React.useRef(),T=React.useRef(),g=useTheme(),P=React.useRef(null),x=useForkRef(n.ref,t),R=useForkRef(P,x),h=function(e){return function(t){if(e){var n=P.current;void 0===t?e(n):e(n,t)}}},b=h(s),v=h(function(e,t){reflow(e);var n,o=getTransitionProps({style:c,timeout:l},{mode:"enter"}),i=o.duration,s=o.delay;"auto"===l?(n=g.transitions.getAutoHeightDuration(e.clientHeight),T.current=n):n=i,e.style.transition=[g.transitions.create("opacity",{duration:n,delay:s}),g.transitions.create("transform",{duration:.666*n,delay:s})].join(","),r&&r(e,t)}),w=h(i),_=h(p),j=h(function(e){var t,n=getTransitionProps({style:c,timeout:l},{mode:"exit"}),o=n.duration,r=n.delay;"auto"===l?(t=g.transitions.getAutoHeightDuration(e.clientHeight),T.current=t):t=o,e.style.transition=[g.transitions.create("opacity",{duration:t,delay:r}),g.transitions.create("transform",{duration:.666*t,delay:r||.333*t})].join(","),e.style.opacity="0",e.style.transform=getScale(.75),a&&a(e)}),A=h(u);return React.useEffect(function(){return function(){clearTimeout(E.current)}},[]),React.createElement(y,_extends({appear:!0,in:o,nodeRef:P,onEnter:v,onEntered:w,onEntering:b,onExit:j,onExited:A,onExiting:_,addEndListener:function(e){"auto"===l&&(E.current=setTimeout(e,T.current||0))},timeout:"auto"===l?null:l},d),function(e,t){return React.cloneElement(n,_extends({style:_extends({opacity:0,transform:getScale(.75),visibility:"exited"!==e||o?void 0:"hidden"},styles[e],c,n.props.style),ref:R},t))})});"production"!==process.env.NODE_ENV&&(Grow.propTypes={children:elementAcceptingRef,in:PropTypes.bool,onEnter:PropTypes.func,onEntered:PropTypes.func,onEntering:PropTypes.func,onExit:PropTypes.func,onExited:PropTypes.func,onExiting:PropTypes.func,style:PropTypes.object,timeout:PropTypes.oneOfType([PropTypes.oneOf(["auto"]),PropTypes.number,PropTypes.shape({appear:PropTypes.number,enter:PropTypes.number,exit:PropTypes.number})])}),Grow.muiSupportAuto=!0;export default Grow;