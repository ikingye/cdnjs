import*as React from"react";var hadKeyboardEvent=!0,hadFocusVisibleRecently=!1,hadFocusVisibleRecentlyTimeout=null,inputTypesWhitelist={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function focusTriggersKeyboardModality(e){var n=e.type,t=e.tagName;return!("INPUT"!==t||!inputTypesWhitelist[n]||e.readOnly)||("TEXTAREA"===t&&!e.readOnly||!!e.isContentEditable)}function handleKeyDown(e){e.metaKey||e.altKey||e.ctrlKey||(hadKeyboardEvent=!0)}function handlePointerDown(){hadKeyboardEvent=!1}function handleVisibilityChange(){"hidden"===this.visibilityState&&hadFocusVisibleRecently&&(hadKeyboardEvent=!0)}function prepare(e){e.addEventListener("keydown",handleKeyDown,!0),e.addEventListener("mousedown",handlePointerDown,!0),e.addEventListener("pointerdown",handlePointerDown,!0),e.addEventListener("touchstart",handlePointerDown,!0),e.addEventListener("visibilitychange",handleVisibilityChange,!0)}export function teardown(e){e.removeEventListener("keydown",handleKeyDown,!0),e.removeEventListener("mousedown",handlePointerDown,!0),e.removeEventListener("pointerdown",handlePointerDown,!0),e.removeEventListener("touchstart",handlePointerDown,!0),e.removeEventListener("visibilitychange",handleVisibilityChange,!0)};function isFocusVisible(e){var n=e.target;try{return n.matches(":focus-visible")}catch(e){}return hadKeyboardEvent||focusTriggersKeyboardModality(n)}export default function useIsFocusVisible(){var e=React.useCallback(function(e){null!=e&&prepare(e.ownerDocument)},[]),n=React.useRef(!1);return{isFocusVisibleRef:n,onFocus:function(e){return!!isFocusVisible(e)&&(n.current=!0,!0)},onBlur:function(){return!!n.current&&(hadFocusVisibleRecently=!0,window.clearTimeout(hadFocusVisibleRecentlyTimeout),hadFocusVisibleRecentlyTimeout=window.setTimeout(function(){hadFocusVisibleRecently=!1},100),n.current=!1,!0)},ref:e}};