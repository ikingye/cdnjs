import _extends from"@babel/runtime/helpers/esm/extends";import _objectWithoutProperties from"@babel/runtime/helpers/esm/objectWithoutProperties";import*as React from"react";import PropTypes from"prop-types";import clsx from"clsx";import{useThemeVariants}from"@material-ui/styles";import withStyles from"../styles/withStyles";import Person from"../internal/svg-icons/Person";export var styles=function(e){return{root:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},colorDefault:{color:e.palette.background.default,backgroundColor:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[600]},circular:{},rounded:{borderRadius:e.shape.borderRadius},square:{borderRadius:0},img:{width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4},fallback:{width:"75%",height:"75%"}}};function useLoaded(e){var r=e.src,t=e.srcSet,s=React.useState(!1),o=s[0],a=s[1];return React.useEffect(function(){if(r||t){a(!1);var e=!0,s=new Image;return s.src=r,s.srcSet=t,s.onload=function(){e&&a("loaded")},s.onerror=function(){e&&a("error")},function(){e=!1}}},[r,t]),o}var Avatar=React.forwardRef(function(e,r){var t=e.alt,s=e.children,o=e.classes,a=e.className,n=e.component,i=void 0===n?"div":n,c=e.imgProps,l=e.sizes,p=e.src,m=e.srcSet,u=e.variant,d=void 0===u?"circular":u,f=_objectWithoutProperties(e,["alt","children","classes","className","component","imgProps","sizes","src","srcSet","variant"]),y=useThemeVariants(_extends({},e,{component:i,variant:d}),"MuiAvatar"),h=null,g=useLoaded({src:p,srcSet:m}),v=p||m,P=v&&"error"!==g;return h=P?React.createElement("img",_extends({alt:t,src:p,srcSet:m,sizes:l,className:o.img},c)):null!=s?s:v&&t?t[0]:React.createElement(Person,{className:o.fallback}),React.createElement(i,_extends({className:clsx(o.root,o.system,o[d],y,a,!P&&o.colorDefault),ref:r},f),h)});"production"!==process.env.NODE_ENV&&(Avatar.propTypes={alt:PropTypes.string,children:PropTypes.node,classes:PropTypes.object,className:PropTypes.string,component:PropTypes.elementType,imgProps:PropTypes.object,sizes:PropTypes.string,src:PropTypes.string,srcSet:PropTypes.string,variant:PropTypes.oneOfType([PropTypes.oneOf(["circular","rounded","square"]),PropTypes.string])});export default withStyles(styles,{name:"MuiAvatar"})(Avatar);