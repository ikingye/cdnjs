import _extends from"@babel/runtime/helpers/esm/extends";import _objectWithoutPropertiesLoose from"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose";import*as React from"react";import PropTypes from"prop-types";import clsx from"clsx";import{useThemeVariants}from"@material-ui/styles";import withStyles from"../styles/withStyles";import Person from"../internal/svg-icons/Person";export const styles=e=>({root:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},colorDefault:{color:e.palette.background.default,backgroundColor:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[600]},circular:{},rounded:{borderRadius:e.shape.borderRadius},square:{borderRadius:0},img:{width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4},fallback:{width:"75%",height:"75%"}});function useLoaded({src:e,srcSet:t}){const[r,s]=React.useState(!1);return React.useEffect(()=>{if(!e&&!t)return;s(!1);let r=!0;const o=new Image;return o.src=e,o.srcSet=t,o.onload=(()=>{r&&s("loaded")}),o.onerror=(()=>{r&&s("error")}),()=>{r=!1}},[e,t]),r}const Avatar=React.forwardRef(function(e,t){const{alt:r,children:s,classes:o,className:a,component:n="div",imgProps:i,sizes:c,src:l,srcSet:p,variant:m="circular"}=e,d=_objectWithoutPropertiesLoose(e,["alt","children","classes","className","component","imgProps","sizes","src","srcSet","variant"]),u=useThemeVariants(_extends({},e,{component:n,variant:m}),"MuiAvatar");let y=null;const f=useLoaded({src:l,srcSet:p}),h=l||p,g=h&&"error"!==f;return y=g?React.createElement("img",_extends({alt:r,src:l,srcSet:p,sizes:c,className:o.img},i)):null!=s?s:h&&r?r[0]:React.createElement(Person,{className:o.fallback}),React.createElement(n,_extends({className:clsx(o.root,o.system,o[m],u,a,!g&&o.colorDefault),ref:t},d),y)});"production"!==process.env.NODE_ENV&&(Avatar.propTypes={alt:PropTypes.string,children:PropTypes.node,classes:PropTypes.object,className:PropTypes.string,component:PropTypes.elementType,imgProps:PropTypes.object,sizes:PropTypes.string,src:PropTypes.string,srcSet:PropTypes.string,variant:PropTypes.oneOfType([PropTypes.oneOf(["circular","rounded","square"]),PropTypes.string])});export default withStyles(styles,{name:"MuiAvatar"})(Avatar);