var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};import{PROP_TYPES_LIST,CONTEXT_TYPES_LIST}from"../../constants";import{isPerc,isPx}from"../../lib";function validatePropDefinitions(e){if(e.props&&"object"!==_typeof(e.props))throw new Error("Expected options.props to be an object");if(e.props)for(var t=0,o=Object.keys(e.props),r=null==o?0:o.length;t<r;t++){var n=o[t],i=e.props[n];if(!i||"object"!==(void 0===i?"undefined":_typeof(i)))throw new Error("Expected options.props."+n+" to be an object");if(!i.type)throw new Error("Expected prop.type");if(-1===PROP_TYPES_LIST.indexOf(i.type))throw new Error("Expected prop.type to be one of "+PROP_TYPES_LIST.join(", "));if(i.required&&i.def)throw new Error("Required prop can not have a default value")}}export function validate(e){if(!e)throw new Error("Expecred options to be passed");if(!e.tag||!e.tag.match(/^[a-z0-9-]+$/))throw new Error("Invalid options.tag: "+e.tag);if(validatePropDefinitions(e),e.dimensions){if(e.dimensions&&!isPx(e.dimensions.width)&&!isPerc(e.dimensions.width))throw new Error("Expected options.dimensions.width to be a px or % string value");if(e.dimensions&&!isPx(e.dimensions.height)&&!isPerc(e.dimensions.height))throw new Error("Expected options.dimensions.height to be a px or % string value")}if(e.contexts){if(e.contexts.popup&&!__ZOID__.__POPUP_SUPPORT__)throw new Error("Popups not supported in this build -- please use the full zoid.js build");for(var t=!1,o=0,r=Object.keys(e.contexts),n=null==r?0:r.length;o<n;o++){var i=r[o];if(-1===CONTEXT_TYPES_LIST.indexOf(i))throw new Error("Unsupported context type: "+i);(e.contexts&&e.contexts[i]||e.contexts&&void 0===e.contexts[i])&&(t=!0)}if(!t)throw new Error("No context type is enabled")}if(e.defaultContext){if(-1===CONTEXT_TYPES_LIST.indexOf(e.defaultContext))throw new Error("Unsupported context type: "+(e.defaultContext||"unknown"));if(e.contexts&&e.defaultContext&&!e.contexts[e.defaultContext])throw new Error("Disallowed default context type: "+(e.defaultContext||"unknown"))}if(e.url&&e.buildUrl)throw new Error("Can not pass both options.url and options.buildUrl");if(e.defaultEnv){if("string"!=typeof e.defaultEnv)throw new TypeError("Expected options.defaultEnv to be a string");if(!e.buildUrl&&"object"!==_typeof(e.url))throw new Error("Expected options.url to be an object mapping env->url");if(e.url&&"object"===_typeof(e.url)&&!e.url[e.defaultEnv])throw new Error("No url found for default env: "+e.defaultEnv)}if(e.url&&"object"===_typeof(e.url)){if(!e.defaultEnv)throw new Error("Must pass options.defaultEnv with env->url mapping");for(var p=0,f=Object.keys(e.url),s=null==f?0:f.length;p<s;p++){var l=f[p];if(!e.url[l])throw new Error("No url specified for env: "+l)}}if(e.prerenderTemplate&&"function"!=typeof e.prerenderTemplate)throw new Error("Expected options.prerenderTemplate to be a function");if(e.containerTemplate&&"function"!=typeof e.containerTemplate)throw new Error("Expected options.containerTemplate to be a function")};