var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};import{WeakMap}from"cross-domain-safe-weakmap/src";export function urlEncode(e){return e.replace(/\?/g,"%3F").replace(/&/g,"%26").replace(/#/g,"%23").replace(/\+/g,"%2B")};export function camelToDasherize(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})};export function dasherizeToCamel(e){return e.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})};export function extend(e,t){if(!t)return e;for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e};export function values(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(e[r]);return t};export function uniqueID(){var e="0123456789abcdef";return"xxxxxxxxxx".replace(/./g,function(){return e.charAt(Math.floor(Math.random()*e.length))})};export function stringifyWithFunctions(e){return JSON.stringify(e,function(e,t){return"function"==typeof t?t.toString():t})};export function safeGet(e,t){var r=void 0;try{r=e[t]}catch(e){}return r};export function capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()};export function get(e,t,r){if(!t)return r;for(var n=t.split("."),o=0;o<n.length;o++){if("object"!==(void 0===e?"undefined":_typeof(e))||null===e)return r;e=e[n[o]]}return void 0===e?r:e};export function safeInterval(e,t){var r=void 0;return r=setTimeout(function n(){r=setTimeout(n,t),e.call()},t),{cancel:function(){clearTimeout(r)}}};export function safeTimeout(e,t){var r=safeInterval(function(){(t-=100)<=0&&(r.cancel(),e())},100)};export function each(e,t){if(e)if(Array.isArray(e))for(var r=e.length,n=0;n<r;n++)t(e[n],n);else if("object"===(void 0===e?"undefined":_typeof(e)))for(var o=Object.keys(e),i=o.length,f=0;f<i;f++){var u=o[f];t(e[u],u)}};export function replaceObject(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(Array.isArray(e)){var n=function(){for(var n=e.length,o=[],i=function(n){Object.defineProperty(o,n,{configurable:!0,enumerable:!0,get:function(){var i=r?r+"."+n:""+n,f=e[n],u=void 0===f?"undefined":_typeof(f),c=t[u];if(c){var a=c(f,n,i);if(void 0!==a)return o[n]=a,o[n]}return"object"===(void 0===f?"undefined":_typeof(f))&&null!==f?(o[n]=replaceObject(f,t,i),o[n]):(o[n]=f,o[n])},set:function(e){delete o[n],o[n]=e}})},f=0;f<n;f++)i(f);return{v:o}}();if("object"===(void 0===n?"undefined":_typeof(n)))return n.v}else{if("object"!==(void 0===e?"undefined":_typeof(e))||null===e)throw new Error("Pass an object or array");var o=function(){var n={},o=function(o){if(!e.hasOwnProperty(o))return"continue";Object.defineProperty(n,o,{configurable:!0,enumerable:!0,get:function(){var i=r?r+"."+o:""+o,f=e[o],u=void 0===f?"undefined":_typeof(f),c=t[u];if(c){var a=c(f,o,i);if(void 0!==a)return n[o]=a,n[o]}return"object"===(void 0===f?"undefined":_typeof(f))&&null!==f?(n[o]=replaceObject(f,t,i),n[o]):(n[o]=f,n[o])},set:function(e){delete n[o],n[o]=e}})};for(var i in e)o(i);return{v:n}}();if("object"===(void 0===o?"undefined":_typeof(o)))return o.v}};export function copyProp(e,t,r,n){if(e.hasOwnProperty(r)){var o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,o)}else t[r]=n};export function dotify(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(var n in t=t?t+".":t,e)void 0!==e[n]&&null!==e[n]&&"function"!=typeof e[n]&&(e[n]&&Array.isArray(e[n])&&e[n].length&&e[n].every(function(e){return"object"!==(void 0===e?"undefined":_typeof(e))})?r[""+t+n]=e[n].join(","):e[n]&&"object"===_typeof(e[n])?r=dotify(e[n],""+t+n,r):r[""+t+n]=e[n].toString());return r};var objectIDs=new WeakMap;export function getObjectID(e){if(null==e||"object"!==(void 0===e?"undefined":_typeof(e))&&"function"!=typeof e)throw new Error("Invalid object");var t=objectIDs.get(e);return t||(t=(void 0===e?"undefined":_typeof(e))+":"+uniqueID(),objectIDs.set(e,t)),t};export function regex(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;"string"==typeof e&&(e=new RegExp(e));var n=t.slice(r).match(e);if(n){var o=n.index,i=n[0];return{text:i,groups:n.slice(1),start:r+o,end:r+o+i.length,length:i.length,replace:function(e){return i?""+i.slice(0,r+o)+e+i.slice(o+i.length):""}}}};export function regexAll(e,t){for(var r=[],n=0;;){var o=regex(e,t,n);if(!o)break;r.push(o),n=o.end}return r};export function count(e,t){for(var r=0,n=0;;){var o=e.indexOf(t,r);if(-1===o)break;r=o,n+=1}return n};export function stringify(e){return"string"==typeof e?e:e&&"function"==typeof e.toString?e.toString():Object.prototype.toString.call(e)};export function stringifyError(e){if(e){var t=e.stack,r=e.message;if("string"==typeof t)return t;if("string"==typeof r)return r}return stringify(e)};export function eventEmitter(){var e={},t={};return{on:function(e,r){var n=t[e]=t[e]||[];n.push(r);var o=!1;return{cancel:function(){o||(o=!0,n.splice(n.indexOf(r),1))}}},once:function(e,t){var r=this.on(e,function(){r.cancel(),t()});return r},trigger:function(e){var r=t[e];if(r)for(var n=0,o=null==r?0:r.length;n<o;n++){(0,r[n])()}},triggerOnce:function(t){e[t]||(e[t]=!0,this.trigger(t))}}};