{"version":3,"file":"Typeahead.js","sources":["../src/utils/objectUtils.js","../src/utils/httpUtils.js","../src/utils/domUtils.js","../src/components/dropdown/Dropdown.vue","../src/components/typeahead/Typeahead.vue"],"sourcesContent":["export function isExist (obj) {\n  return typeof obj !== 'undefined' && obj !== null\n}\n\nexport function isFunction (obj) {\n  return typeof obj === 'function'\n}\n\nexport function isNumber (obj) {\n  return typeof obj === 'number'\n}\n\nexport function isString (obj) {\n  return typeof obj === 'string'\n}\n\nexport function isBoolean (obj) {\n  return typeof obj === 'boolean'\n}\n\nexport function isPromiseSupported () {\n  return typeof window !== 'undefined' && isExist(window.Promise)\n}\n","import {isFunction, isExist} from './objectUtils'\n\nexport function getRequest (url) {\n  let request = new window.XMLHttpRequest()\n  let data = {}\n  let p = {\n    then: (fn1, fn2) => p.done(fn1).fail(fn2),\n    catch: (fn) => p.fail(fn),\n    always: (fn) => p.done(fn).fail(fn)\n  }\n  let statuses = ['done', 'fail']\n  statuses.forEach(name => {\n    data[name] = []\n    p[name] = (fn) => {\n      if (fn instanceof Function) data[name].push(fn)\n      return p\n    }\n  })\n  p.done(JSON.parse)\n  request.onreadystatechange = () => {\n    if (request.readyState === 4) {\n      let e = {status: request.status}\n      if (request.status === 200) {\n        let response = request.responseText\n        for (let i in data.done) {\n          if (data.done.hasOwnProperty(i) && isFunction(data.done[i])) {\n            let value = data.done[i](response)\n            if (isExist(value)) {\n              response = value\n            }\n          }\n        }\n      } else {\n        data.fail.forEach(fail => fail(e))\n      }\n    }\n  }\n  request.open('GET', url)\n  request.setRequestHeader('Accept', 'application/json')\n  request.send()\n  return p\n}\n","import {isExist, isString, isFunction} from './objectUtils'\n\nexport const EVENTS = {\n  MOUSE_ENTER: 'mouseenter',\n  MOUSE_LEAVE: 'mouseleave',\n  MOUSE_DOWN: 'mousedown',\n  MOUSE_UP: 'mouseup',\n  FOCUS: 'focus',\n  BLUR: 'blur',\n  CLICK: 'click',\n  INPUT: 'input',\n  KEY_DOWN: 'keydown',\n  KEY_UP: 'keyup',\n  KEY_PRESS: 'keypress',\n  RESIZE: 'resize',\n  SCROLL: 'scroll',\n  TOUCH_START: 'touchstart',\n  TOUCH_END: 'touchend'\n}\n\nexport const TRIGGERS = {\n  CLICK: 'click',\n  HOVER: 'hover',\n  FOCUS: 'focus',\n  HOVER_FOCUS: 'hover-focus',\n  OUTSIDE_CLICK: 'outside-click',\n  MANUAL: 'manual'\n}\n\nexport const PLACEMENTS = {\n  TOP: 'top',\n  RIGHT: 'right',\n  BOTTOM: 'bottom',\n  LEFT: 'left'\n}\n\nexport function isIE11 () {\n  return !!window.MSInputMethodContext && !!document.documentMode\n}\n\nexport function isIE10 () {\n  return window.navigator.appVersion.indexOf('MSIE 10') !== -1\n}\n\nexport function getComputedStyle (el) {\n  return window.getComputedStyle(el)\n}\n\nexport function getViewportSize () {\n  let width = Math.max(document.documentElement.clientWidth, window.innerWidth || 0)\n  let height = Math.max(document.documentElement.clientHeight, window.innerHeight || 0)\n  return {width, height}\n}\n\nlet scrollbarWidth = null\nlet savedScreenSize = null\n\nexport function getScrollbarWidth (recalculate = false) {\n  let screenSize = getViewportSize()\n  // return directly when already calculated & not force recalculate & screen size not changed\n  if (scrollbarWidth !== null && !recalculate &&\n    screenSize.height === savedScreenSize.height && screenSize.width === savedScreenSize.width) {\n    return scrollbarWidth\n  }\n  if (document.readyState === 'loading') {\n    return null\n  }\n  const div1 = document.createElement('div')\n  const div2 = document.createElement('div')\n  div1.style.width = div2.style.width = div1.style.height = div2.style.height = '100px'\n  div1.style.overflow = 'scroll'\n  div2.style.overflow = 'hidden'\n  document.body.appendChild(div1)\n  document.body.appendChild(div2)\n  scrollbarWidth = Math.abs(div1.scrollHeight - div2.scrollHeight)\n  document.body.removeChild(div1)\n  document.body.removeChild(div2)\n  // save new screen size\n  savedScreenSize = screenSize\n  return scrollbarWidth\n}\n\nexport function on (element, event, handler) {\n  element.addEventListener(event, handler)\n}\n\nexport function off (element, event, handler) {\n  element.removeEventListener(event, handler)\n}\n\nexport function isElement (el) {\n  return el && el.nodeType === Node.ELEMENT_NODE\n}\n\nexport function removeFromDom (el) {\n  isElement(el) && isElement(el.parentNode) && el.parentNode.removeChild(el)\n}\n\nexport function ensureElementMatchesFunction () {\n  if (!Element.prototype.matches) {\n    Element.prototype.matches =\n      Element.prototype.matchesSelector ||\n      Element.prototype.mozMatchesSelector ||\n      Element.prototype.msMatchesSelector ||\n      Element.prototype.oMatchesSelector ||\n      Element.prototype.webkitMatchesSelector ||\n      function (s) {\n        let matches = (this.document || this.ownerDocument).querySelectorAll(s)\n        let i = matches.length\n        while (--i >= 0 && matches.item(i) !== this) {\n        }\n        return i > -1\n      }\n  }\n}\n\nexport function addClass (el, className) {\n  if (!isElement(el)) {\n    return\n  }\n  if (el.className) {\n    let classes = el.className.split(' ')\n    if (classes.indexOf(className) < 0) {\n      classes.push(className)\n      el.className = classes.join(' ')\n    }\n  } else {\n    el.className = className\n  }\n}\n\nexport function removeClass (el, className) {\n  if (!isElement(el)) {\n    return\n  }\n  if (el.className) {\n    let classes = el.className.split(' ')\n    let newClasses = []\n    for (let i = 0, l = classes.length; i < l; i++) {\n      if (classes[i] !== className) {\n        newClasses.push(classes[i])\n      }\n    }\n    el.className = newClasses.join(' ')\n  }\n}\n\nexport function hasClass (el, className) {\n  if (!isElement(el)) {\n    return false\n  }\n  let classes = el.className.split(' ')\n  for (let i = 0, l = classes.length; i < l; i++) {\n    if (classes[i] === className) {\n      return true\n    }\n  }\n  return false\n}\n\nexport function setDropdownPosition (dropdown, trigger, options = {}) {\n  let doc = document.documentElement\n  let containerScrollLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0)\n  let containerScrollTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0)\n  let rect = trigger.getBoundingClientRect()\n  let dropdownRect = dropdown.getBoundingClientRect()\n  dropdown.style.right = 'auto'\n  dropdown.style.bottom = 'auto'\n  if (options.menuRight) {\n    dropdown.style.left = containerScrollLeft + rect.left + rect.width - dropdownRect.width + 'px'\n  } else {\n    dropdown.style.left = containerScrollLeft + rect.left + 'px'\n  }\n  if (options.dropup) {\n    dropdown.style.top = containerScrollTop + rect.top - dropdownRect.height - 4 + 'px'\n  } else {\n    dropdown.style.top = containerScrollTop + rect.top + rect.height + 'px'\n  }\n}\n\nexport function isAvailableAtPosition (trigger, popup, placement) {\n  let triggerRect = trigger.getBoundingClientRect()\n  let popupRect = popup.getBoundingClientRect()\n  let viewPortSize = getViewportSize()\n  let top = true\n  let right = true\n  let bottom = true\n  let left = true\n  switch (placement) {\n    case PLACEMENTS.TOP:\n      top = triggerRect.top >= popupRect.height\n      left = triggerRect.left + triggerRect.width / 2 >= popupRect.width / 2\n      right = triggerRect.right - triggerRect.width / 2 + popupRect.width / 2 <= viewPortSize.width\n      break\n    case PLACEMENTS.BOTTOM:\n      bottom = triggerRect.bottom + popupRect.height <= viewPortSize.height\n      left = triggerRect.left + triggerRect.width / 2 >= popupRect.width / 2\n      right = triggerRect.right - triggerRect.width / 2 + popupRect.width / 2 <= viewPortSize.width\n      break\n    case PLACEMENTS.RIGHT:\n      right = triggerRect.right + popupRect.width <= viewPortSize.width\n      top = triggerRect.top + triggerRect.height / 2 >= popupRect.height / 2\n      bottom = triggerRect.bottom - triggerRect.height / 2 + popupRect.height / 2 <= viewPortSize.height\n      break\n    case PLACEMENTS.LEFT:\n      left = triggerRect.left >= popupRect.width\n      top = triggerRect.top + triggerRect.height / 2 >= popupRect.height / 2\n      bottom = triggerRect.bottom - triggerRect.height / 2 + popupRect.height / 2 <= viewPortSize.height\n      break\n  }\n  return top && right && bottom && left\n}\n\nexport function setTooltipPosition (tooltip, trigger, placement, auto, appendToSelector, viewport) {\n  if (!isElement(tooltip) || !isElement(trigger)) {\n    return\n  }\n  const isPopover = tooltip && tooltip.className && tooltip.className.indexOf('popover') >= 0\n  let containerScrollTop\n  let containerScrollLeft\n  if (!isExist(appendToSelector) || appendToSelector === 'body') {\n    const doc = document.documentElement\n    containerScrollLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0)\n    containerScrollTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0)\n  } else {\n    const container = document.querySelector(appendToSelector)\n    containerScrollLeft = container.scrollLeft\n    containerScrollTop = container.scrollTop\n  }\n  // auto adjust placement\n  if (auto) {\n    // Try: right -> bottom -> left -> top\n    // Cause the default placement is top\n    let placements = [PLACEMENTS.RIGHT, PLACEMENTS.BOTTOM, PLACEMENTS.LEFT, PLACEMENTS.TOP]\n    // The class switch helper function\n    const changePlacementClass = (placement) => {\n      // console.log(placement)\n      placements.forEach(placement => {\n        removeClass(tooltip, placement)\n      })\n      addClass(tooltip, placement)\n    }\n    // No need to adjust if the default placement fits\n    if (!isAvailableAtPosition(trigger, tooltip, placement)) {\n      for (let i = 0, l = placements.length; i < l; i++) {\n        // Re-assign placement class\n        changePlacementClass(placements[i])\n        // Break if new placement fits\n        if (isAvailableAtPosition(trigger, tooltip, placements[i])) {\n          placement = placements[i]\n          break\n        }\n      }\n      changePlacementClass(placement)\n    }\n  }\n  // fix left and top for tooltip\n  let rect = trigger.getBoundingClientRect()\n  let tooltipRect = tooltip.getBoundingClientRect()\n  let top\n  let left\n  if (placement === PLACEMENTS.BOTTOM) {\n    top = containerScrollTop + rect.top + rect.height\n    left = containerScrollLeft + rect.left + rect.width / 2 - tooltipRect.width / 2\n  } else if (placement === PLACEMENTS.LEFT) {\n    top = containerScrollTop + rect.top + rect.height / 2 - tooltipRect.height / 2\n    left = containerScrollLeft + rect.left - tooltipRect.width\n  } else if (placement === PLACEMENTS.RIGHT) {\n    top = containerScrollTop + rect.top + rect.height / 2 - tooltipRect.height / 2\n    // https://github.com/wxsms/uiv/issues/272\n    // add 1px to fix above issue\n    left = containerScrollLeft + rect.left + rect.width + 1\n  } else {\n    top = containerScrollTop + rect.top - tooltipRect.height\n    left = containerScrollLeft + rect.left + rect.width / 2 - tooltipRect.width / 2\n  }\n  let viewportEl\n  // viewport option\n  if (isString(viewport)) {\n    viewportEl = document.querySelector(viewport)\n  } else if (isFunction(viewport)) {\n    viewportEl = viewport(trigger)\n  }\n  if (isElement(viewportEl)) {\n    const popoverFix = isPopover ? 11 : 0\n    const viewportReact = viewportEl.getBoundingClientRect()\n    const viewportTop = containerScrollTop + viewportReact.top\n    const viewportLeft = containerScrollLeft + viewportReact.left\n    const viewportBottom = viewportTop + viewportReact.height\n    const viewportRight = viewportLeft + viewportReact.width\n    // fix top\n    if (top < viewportTop) {\n      top = viewportTop\n    } else if (top + tooltipRect.height > viewportBottom) {\n      top = viewportBottom - tooltipRect.height\n    }\n    // fix left\n    if (left < viewportLeft) {\n      left = viewportLeft\n    } else if (left + tooltipRect.width > viewportRight) {\n      left = viewportRight - tooltipRect.width\n    }\n    // fix for popover pointer\n    if (placement === PLACEMENTS.BOTTOM) {\n      top -= popoverFix\n    } else if (placement === PLACEMENTS.LEFT) {\n      left += popoverFix\n    } else if (placement === PLACEMENTS.RIGHT) {\n      left -= popoverFix\n    } else {\n      top += popoverFix\n    }\n  }\n  // set position finally\n  tooltip.style.top = `${top}px`\n  tooltip.style.left = `${left}px`\n}\n\nexport function hasScrollbar (el) {\n  const SCROLL = 'scroll'\n  const hasVScroll = el.scrollHeight > el.clientHeight\n  const style = getComputedStyle(el)\n  return hasVScroll || style.overflow === SCROLL || style.overflowY === SCROLL\n}\n\nexport function toggleBodyOverflow (enable) {\n  const MODAL_OPEN = 'modal-open'\n  const body = document.body\n  if (enable) {\n    removeClass(body, MODAL_OPEN)\n    body.style.paddingRight = null\n  } else {\n    const browsersWithFloatingScrollbar = isIE10() || isIE11()\n    const documentHasScrollbar = hasScrollbar(document.documentElement) || hasScrollbar(document.body)\n    if (documentHasScrollbar && !browsersWithFloatingScrollbar) {\n      body.style.paddingRight = `${getScrollbarWidth()}px`\n    }\n    addClass(body, MODAL_OPEN)\n  }\n}\n\nexport function getClosest (el, selector) {\n  ensureElementMatchesFunction()\n  let parent\n  let _el = el\n  while (_el) {\n    parent = _el.parentElement\n    if (parent && parent.matches(selector)) {\n      return parent\n    }\n    _el = parent\n  }\n  return null\n}\n\nexport function getParents (el, selector, until = null) {\n  ensureElementMatchesFunction()\n  let parents = []\n  let parent = el.parentElement\n  while (parent) {\n    if (parent.matches(selector)) {\n      parents.push(parent)\n    } else if (until && (until === parent || parent.matches(until))) {\n      break\n    }\n    parent = parent.parentElement\n  }\n  return parents\n}\n\nexport function focus (el) {\n  if (!isElement(el)) {\n    return\n  }\n  el.getAttribute('tabindex') ? null : el.setAttribute('tabindex', '-1')\n  el.focus()\n}\n","<script>\n  import {setDropdownPosition, on, off, EVENTS, focus} from '../../utils/domUtils'\n  import {isBoolean} from '../../utils/objectUtils'\n\n  const DEFAULT_TAG = 'div'\n\n  export default {\n    render (h) {\n      return h(\n        this.tag,\n        {\n          class: {\n            'btn-group': this.tag === DEFAULT_TAG,\n            dropdown: !this.dropup,\n            dropup: this.dropup,\n            open: this.show\n          }\n        },\n        [\n          this.$slots.default,\n          h(\n            'ul',\n            {\n              class: {\n                'dropdown-menu': true,\n                'dropdown-menu-right': this.menuRight\n              },\n              ref: 'dropdown'\n            },\n            [this.$slots.dropdown]\n          )\n        ]\n      )\n    },\n    props: {\n      tag: {\n        type: String,\n        default: DEFAULT_TAG\n      },\n      appendToBody: {\n        type: Boolean,\n        default: false\n      },\n      value: Boolean,\n      dropup: {\n        type: Boolean,\n        default: false\n      },\n      menuRight: {\n        type: Boolean,\n        default: false\n      },\n      disabled: {\n        type: Boolean,\n        default: false\n      },\n      notCloseElements: Array,\n      positionElement: null\n    },\n    data () {\n      return {\n        show: false,\n        triggerEl: undefined\n      }\n    },\n    watch: {\n      value (v) {\n        this.toggle(v)\n      }\n    },\n    mounted () {\n      this.initTrigger()\n      if (this.triggerEl) {\n        on(this.triggerEl, EVENTS.CLICK, this.toggle)\n        on(this.triggerEl, EVENTS.KEY_DOWN, this.onKeyPress)\n      }\n      on(this.$refs.dropdown, EVENTS.KEY_DOWN, this.onKeyPress)\n      on(window, EVENTS.CLICK, this.windowClicked)\n      on(window, EVENTS.TOUCH_END, this.windowClicked)\n      if (this.value) {\n        this.toggle(true)\n      }\n    },\n    beforeDestroy () {\n      this.removeDropdownFromBody()\n      if (this.triggerEl) {\n        off(this.triggerEl, EVENTS.CLICK, this.toggle)\n        off(this.triggerEl, EVENTS.KEY_DOWN, this.onKeyPress)\n      }\n      off(this.$refs.dropdown, EVENTS.KEY_DOWN, this.onKeyPress)\n      off(window, EVENTS.CLICK, this.windowClicked)\n      off(window, EVENTS.TOUCH_END, this.windowClicked)\n    },\n    methods: {\n      onKeyPress (event) {\n        if (this.show) {\n          const dropdownEl = this.$refs.dropdown\n          const keyCode = event.keyCode || event.which\n          if (keyCode === 27) {\n            this.toggle(false)\n            this.triggerEl && this.triggerEl.focus()\n          } else if (keyCode === 13) {\n            const currentFocus = dropdownEl.querySelector('li > a:focus')\n            currentFocus && currentFocus.click()\n          } else if (keyCode === 38 || keyCode === 40) {\n            event.preventDefault()\n            event.stopPropagation()\n            const currentFocus = dropdownEl.querySelector('li > a:focus')\n            const items = dropdownEl.querySelectorAll('li:not(.disabled) > a')\n            if (!currentFocus) {\n              focus(items[0])\n            } else {\n              for (let i = 0; i < items.length; i++) {\n                if (currentFocus === items[i]) {\n                  if (keyCode === 38 && i < items.length > 0) {\n                    focus(items[i - 1])\n                  } else if (keyCode === 40 && i < items.length - 1) {\n                    focus(items[i + 1])\n                  }\n                  break\n                }\n              }\n            }\n          }\n        }\n      },\n      initTrigger () {\n        const trigger = this.$el.querySelector('[data-role=\"trigger\"]') || this.$el.querySelector('.dropdown-toggle') || this.$el.firstChild\n        this.triggerEl = trigger && trigger !== this.$refs.dropdown ? trigger : null\n      },\n      toggle (show) {\n        if (this.disabled) {\n          return\n        }\n        if (isBoolean(show)) {\n          this.show = show\n        } else {\n          this.show = !this.show\n        }\n        if (this.appendToBody) {\n          this.show ? this.appendDropdownToBody() : this.removeDropdownFromBody()\n        }\n        this.$emit('input', this.show)\n      },\n      windowClicked (event) {\n        let target = event.target\n        if (this.show && target) {\n          let targetInNotCloseElements = false\n          if (this.notCloseElements) {\n            for (let i = 0, l = this.notCloseElements.length; i < l; i++) {\n              const isTargetInElement = this.notCloseElements[i].contains(target)\n              let shouldBreak = isTargetInElement\n              if (this.appendToBody) {\n                const isTargetInDropdown = this.$refs.dropdown.contains(target)\n                const isElInElements = this.notCloseElements.indexOf(this.$el) >= 0\n                shouldBreak = isTargetInElement || (isTargetInDropdown && isElInElements)\n              }\n              if (shouldBreak) {\n                targetInNotCloseElements = true\n                break\n              }\n            }\n          }\n          const targetInDropdownBody = this.$refs.dropdown.contains(target)\n          const targetInTrigger = this.$el.contains(target) && !targetInDropdownBody\n          // normally, a dropdown select event is handled by @click that trigger after @touchend\n          // then @touchend event have to be ignore in this case\n          const targetInDropdownAndIsTouchEvent = targetInDropdownBody && event.type === 'touchend'\n          if (!targetInTrigger && !targetInNotCloseElements && !targetInDropdownAndIsTouchEvent) {\n            this.toggle(false)\n          }\n        }\n      },\n      appendDropdownToBody () {\n        try {\n          let el = this.$refs.dropdown\n          el.style.display = 'block'\n          document.body.appendChild(el)\n          let positionElement = this.positionElement || this.$el\n          setDropdownPosition(el, positionElement, this)\n        } catch (e) {\n          // Silent\n        }\n      },\n      removeDropdownFromBody () {\n        try {\n          let el = this.$refs.dropdown\n          el.removeAttribute('style')\n          this.$el.appendChild(el)\n        } catch (e) {\n          // Silent\n        }\n      }\n    }\n  }\n</script>\n","<template>\n  <dropdown ref=\"dropdown\"\n            v-model=\"open\"\n            tag=\"section\"\n            :append-to-body=\"appendToBody\"\n            :not-close-elements=\"elements\"\n            :position-element=\"inputEl\">\n    <template slot=\"dropdown\">\n      <slot name=\"item\" :items=\"items\" :active-index=\"activeIndex\" :select=\"selectItem\" :highlight=\"highlight\">\n        <li v-for=\"(item,index) in items\" :class=\"{active:activeIndex===index}\">\n          <a href=\"#\" @click.prevent=\"selectItem(item)\">\n            <span v-html=\"highlight(item)\"></span>\n          </a>\n        </li>\n      </slot>\n      <slot name=\"empty\" v-if=\"!items || items.length === 0\"/>\n    </template>\n  </dropdown>\n</template>\n\n<script>\n  import {getRequest} from '../../utils/httpUtils'\n  import {isString} from '../../utils/objectUtils'\n  import {\n    isElement,\n    on,\n    off,\n    ensureElementMatchesFunction,\n    EVENTS\n  } from '../../utils/domUtils'\n  import Dropdown from './../dropdown/Dropdown.vue'\n\n  export default {\n    components: {Dropdown},\n    props: {\n      value: {\n        required: true\n      },\n      data: Array,\n      itemKey: String,\n      appendToBody: {\n        type: Boolean,\n        default: false\n      },\n      ignoreCase: {\n        type: Boolean,\n        default: true\n      },\n      matchStart: {\n        type: Boolean,\n        default: false\n      },\n      forceSelect: {\n        type: Boolean,\n        default: false\n      },\n      forceClear: {\n        type: Boolean,\n        default: false\n      },\n      limit: {\n        type: Number,\n        default: 10\n      },\n      asyncSrc: String,\n      asyncKey: String,\n      asyncFunction: Function,\n      debounce: {\n        type: Number,\n        default: 200\n      },\n      openOnFocus: {\n        type: Boolean,\n        default: true\n      },\n      openOnEmpty: {\n        type: Boolean,\n        default: false\n      },\n      target: {\n        required: true\n      },\n      preselect: {\n        type: Boolean,\n        default: true\n      }\n    },\n    data () {\n      return {\n        inputEl: null,\n        items: [],\n        activeIndex: 0,\n        timeoutID: 0,\n        elements: [],\n        open: false,\n        dropdownMenuEl: null\n      }\n    },\n    computed: {\n      regexOptions () {\n        let options = ''\n        if (this.ignoreCase) {\n          options += 'i'\n        }\n        if (!this.matchStart) {\n          options += 'g'\n        }\n        return options\n      }\n    },\n    mounted () {\n      ensureElementMatchesFunction()\n      this.$nextTick(() => {\n        this.initInputElByTarget(this.target)\n        this.initListeners()\n        this.dropdownMenuEl = this.$refs.dropdown.$el.querySelector('.dropdown-menu')\n        // set input text if v-model not empty\n        if (this.value) {\n          this.setInputTextByValue(this.value)\n        }\n      })\n    },\n    beforeDestroy () {\n      this.removeListeners()\n    },\n    watch: {\n      target (el) {\n        this.removeListeners()\n        this.initInputElByTarget(el)\n        this.initListeners()\n      },\n      value (value) {\n        this.setInputTextByValue(value)\n      }\n    },\n    methods: {\n      setInputTextByValue (value) {\n        if (isString(value)) {\n          // direct\n          this.inputEl.value = value\n        } else if (value) {\n          // is object\n          this.inputEl.value = this.itemKey ? value[this.itemKey] : value\n        } else if (value === null) {\n          // is null or undefined or something else not valid\n          this.inputEl.value = ''\n        }\n      },\n      hasEmptySlot () {\n        return !!this.$slots['empty'] || !!this.$scopedSlots['empty']\n      },\n      initInputElByTarget (target) {\n        if (!target) {\n          return\n        }\n        if (isString(target)) { // is selector\n          this.inputEl = document.querySelector(target)\n        } else if (isElement(target)) { // is element\n          this.inputEl = target\n        } else if (isElement(target.$el)) { // is component\n          this.inputEl = target.$el\n        }\n      },\n      initListeners () {\n        if (this.inputEl) {\n          this.elements = [this.inputEl]\n          on(this.inputEl, EVENTS.FOCUS, this.inputFocused)\n          on(this.inputEl, EVENTS.BLUR, this.inputBlured)\n          on(this.inputEl, EVENTS.INPUT, this.inputChanged)\n          on(this.inputEl, EVENTS.KEY_DOWN, this.inputKeyPressed)\n        }\n      },\n      removeListeners () {\n        this.elements = []\n        if (this.inputEl) {\n          off(this.inputEl, EVENTS.FOCUS, this.inputFocused)\n          off(this.inputEl, EVENTS.BLUR, this.inputBlured)\n          off(this.inputEl, EVENTS.INPUT, this.inputChanged)\n          off(this.inputEl, EVENTS.KEY_DOWN, this.inputKeyPressed)\n        }\n      },\n      prepareItems (data, disableFilters = false) {\n        if (disableFilters) {\n          this.items = data.slice(0, this.limit)\n          return\n        }\n        this.items = []\n        this.activeIndex = this.preselect ? 0 : -1\n        for (let i = 0, l = data.length; i < l; i++) {\n          let item = data[i]\n          let key = this.itemKey ? item[this.itemKey] : item\n          key = key.toString()\n          let index = -1\n          if (this.ignoreCase) {\n            index = key.toLowerCase().indexOf(this.inputEl.value.toLowerCase())\n          } else {\n            index = key.indexOf(this.inputEl.value)\n          }\n          if (this.matchStart ? index === 0 : index >= 0) {\n            this.items.push(item)\n          }\n          if (this.items.length >= this.limit) {\n            break\n          }\n        }\n      },\n      fetchItems (value, debounce) {\n        clearTimeout(this.timeoutID)\n        if (value === '' && !this.openOnEmpty) {\n          this.open = false\n        } else if (this.data) {\n          this.prepareItems(this.data)\n          this.open = this.hasEmptySlot() || Boolean(this.items.length)\n        } else if (this.asyncSrc) {\n          this.timeoutID = setTimeout(() => {\n            this.$emit('loading')\n            getRequest(this.asyncSrc + encodeURIComponent(value))\n              .then(data => {\n                if (this.inputEl.matches(':focus')) {\n                  this.prepareItems(this.asyncKey ? data[this.asyncKey] : data, true)\n                  this.open = this.hasEmptySlot() || Boolean(this.items.length)\n                }\n                this.$emit('loaded')\n              })\n              .catch(err => {\n                console.error(err)\n                this.$emit('loaded-error')\n              })\n          }, debounce)\n        } else if (this.asyncFunction) {\n          const cb = (data) => {\n            if (this.inputEl.matches(':focus')) {\n              this.prepareItems(data, true)\n              this.open = this.hasEmptySlot() || Boolean(this.items.length)\n            }\n            this.$emit('loaded')\n          }\n          this.timeoutID = setTimeout(() => {\n            this.$emit('loading')\n            this.asyncFunction(value, cb)\n          }, debounce)\n        }\n      },\n      inputChanged () {\n        let value = this.inputEl.value\n        this.fetchItems(value, this.debounce)\n        this.$emit('input', this.forceSelect ? undefined : value)\n      },\n      inputFocused () {\n        if (this.openOnFocus) {\n          let value = this.inputEl.value\n          this.fetchItems(value, 0)\n        }\n      },\n      inputBlured () {\n        if (!this.dropdownMenuEl.matches(':hover')) {\n          this.open = false\n        }\n        if (this.inputEl && this.forceClear) {\n          this.$nextTick(() => {\n            if (typeof this.value === 'undefined') {\n              this.inputEl.value = ''\n            }\n          })\n        }\n      },\n      inputKeyPressed (event) {\n        event.stopPropagation()\n        if (this.open) {\n          switch (event.keyCode) {\n            case 13:\n              if (this.activeIndex >= 0) {\n                this.selectItem(this.items[this.activeIndex])\n              } else {\n                this.open = false\n              }\n              event.preventDefault()\n              break\n            case 27:\n              this.open = false\n              break\n            case 38:\n              this.activeIndex = this.activeIndex > 0 ? this.activeIndex - 1 : 0\n              break\n            case 40:\n              let maxIndex = this.items.length - 1\n              this.activeIndex = this.activeIndex < maxIndex ? this.activeIndex + 1 : maxIndex\n              break\n          }\n        }\n      },\n      selectItem (item) {\n        this.$emit('input', item)\n        this.open = false\n      },\n      highlight (item) {\n        let value = this.itemKey ? item[this.itemKey] : item\n        let inputValue = this.inputEl.value.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&')\n        return value.replace(new RegExp(`${inputValue}`, this.regexOptions), '<b>$&</b>')\n      }\n    }\n  }\n</script>\n"],"names":["isExist","obj","isFunction","isString","isBoolean","getRequest","url","request","window","XMLHttpRequest","data","p","fn1","fn2","done","fail","fn","statuses","forEach","name","Function","push","JSON","parse","onreadystatechange","readyState","e","status","response","responseText","i","hasOwnProperty","value","open","setRequestHeader","send","EVENTS","on","element","event","handler","addEventListener","off","removeEventListener","isElement","el","nodeType","Node","ELEMENT_NODE","ensureElementMatchesFunction","Element","prototype","matches","matchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","s","document","ownerDocument","querySelectorAll","length","item","setDropdownPosition","dropdown","trigger","options","doc","documentElement","containerScrollLeft","pageXOffset","scrollLeft","clientLeft","containerScrollTop","pageYOffset","scrollTop","clientTop","rect","getBoundingClientRect","dropdownRect","style","right","bottom","menuRight","left","width","dropup","top","height","focus","getAttribute","setAttribute","DEFAULT_TAG","h","tag","show","$slots","default","String","Boolean","Array","undefined","v","toggle","initTrigger","triggerEl","CLICK","KEY_DOWN","onKeyPress","$refs","windowClicked","TOUCH_END","removeDropdownFromBody","dropdownEl","keyCode","which","currentFocus","querySelector","click","preventDefault","stopPropagation","items","$el","firstChild","disabled","appendToBody","appendDropdownToBody","$emit","target","targetInNotCloseElements","notCloseElements","l","isTargetInElement","contains","shouldBreak","isTargetInDropdown","isElInElements","indexOf","targetInDropdownBody","targetInTrigger","targetInDropdownAndIsTouchEvent","type","display","body","appendChild","positionElement","removeAttribute","render","Dropdown","Number","ignoreCase","matchStart","$nextTick","initInputElByTarget","initListeners","dropdownMenuEl","setInputTextByValue","removeListeners","inputEl","itemKey","$scopedSlots","elements","FOCUS","inputFocused","BLUR","inputBlured","INPUT","inputChanged","inputKeyPressed","disableFilters","slice","limit","activeIndex","preselect","key","toString","index","toLowerCase","debounce","timeoutID","openOnEmpty","prepareItems","hasEmptySlot","asyncSrc","setTimeout","encodeURIComponent","then","asyncKey","catch","error","err","asyncFunction","cb","fetchItems","forceSelect","openOnFocus","forceClear","selectItem","maxIndex","inputValue","replace","RegExp","regexOptions"],"mappings":"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"}