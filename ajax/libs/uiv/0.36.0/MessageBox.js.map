{"version":3,"file":"MessageBox.js","sources":["../src/services/messagebox/constants.js","../src/utils/objectUtils.js","../src/utils/domUtils.js","../src/utils/arrayUtils.js","../src/locale/lang/en-US.js","../src/locale/index.js","../src/mixins/localeMixin.js","../node_modules/vue-functional-data-merge/dist/lib.esm.js","../src/mixins/linkMixin.js","../src/components/button/BtnGroup.js","../src/components/button/Btn.js","../src/components/modal/Modal.vue","../src/services/messagebox/MessageBox.vue","../src/services/messagebox/MessageBox.js"],"sourcesContent":["export const TYPES = {\n  ALERT: 0,\n  CONFIRM: 1,\n  PROMPT: 2\n}\n","export function isExist (obj) {\n  return typeof obj !== 'undefined' && obj !== null\n}\n\nexport function isFunction (obj) {\n  return typeof obj === 'function'\n}\n\nexport function isNumber (obj) {\n  return typeof obj === 'number'\n}\n\nexport function isString (obj) {\n  return typeof obj === 'string'\n}\n\nexport function isBoolean (obj) {\n  return typeof obj === 'boolean'\n}\n\nexport function isPromiseSupported () {\n  return typeof window !== 'undefined' && isExist(window.Promise)\n}\n","import {isExist, isString, isFunction} from './objectUtils'\n\nexport const EVENTS = {\n  MOUSE_ENTER: 'mouseenter',\n  MOUSE_LEAVE: 'mouseleave',\n  MOUSE_DOWN: 'mousedown',\n  MOUSE_UP: 'mouseup',\n  FOCUS: 'focus',\n  BLUR: 'blur',\n  CLICK: 'click',\n  INPUT: 'input',\n  KEY_DOWN: 'keydown',\n  KEY_UP: 'keyup',\n  KEY_PRESS: 'keypress',\n  RESIZE: 'resize',\n  SCROLL: 'scroll',\n  TOUCH_START: 'touchstart',\n  TOUCH_END: 'touchend'\n}\n\nexport const TRIGGERS = {\n  CLICK: 'click',\n  HOVER: 'hover',\n  FOCUS: 'focus',\n  HOVER_FOCUS: 'hover-focus',\n  OUTSIDE_CLICK: 'outside-click',\n  MANUAL: 'manual'\n}\n\nexport const PLACEMENTS = {\n  TOP: 'top',\n  RIGHT: 'right',\n  BOTTOM: 'bottom',\n  LEFT: 'left'\n}\n\nexport function isIE11 () {\n  return !!window.MSInputMethodContext && !!document.documentMode\n}\n\nexport function isIE10 () {\n  return window.navigator.appVersion.indexOf('MSIE 10') !== -1\n}\n\nexport function getComputedStyle (el) {\n  return window.getComputedStyle(el)\n}\n\nexport function getViewportSize () {\n  let width = Math.max(document.documentElement.clientWidth, window.innerWidth || 0)\n  let height = Math.max(document.documentElement.clientHeight, window.innerHeight || 0)\n  return {width, height}\n}\n\nlet scrollbarWidth = null\nlet savedScreenSize = null\n\nexport function getScrollbarWidth (recalculate = false) {\n  let screenSize = getViewportSize()\n  // return directly when already calculated & not force recalculate & screen size not changed\n  if (scrollbarWidth !== null && !recalculate &&\n    screenSize.height === savedScreenSize.height && screenSize.width === savedScreenSize.width) {\n    return scrollbarWidth\n  }\n  if (document.readyState === 'loading') {\n    return null\n  }\n  const div1 = document.createElement('div')\n  const div2 = document.createElement('div')\n  div1.style.width = div2.style.width = div1.style.height = div2.style.height = '100px'\n  div1.style.overflow = 'scroll'\n  div2.style.overflow = 'hidden'\n  document.body.appendChild(div1)\n  document.body.appendChild(div2)\n  scrollbarWidth = Math.abs(div1.scrollHeight - div2.scrollHeight)\n  document.body.removeChild(div1)\n  document.body.removeChild(div2)\n  // save new screen size\n  savedScreenSize = screenSize\n  return scrollbarWidth\n}\n\nexport function on (element, event, handler) {\n  element.addEventListener(event, handler)\n}\n\nexport function off (element, event, handler) {\n  element.removeEventListener(event, handler)\n}\n\nexport function isElement (el) {\n  return el && el.nodeType === Node.ELEMENT_NODE\n}\n\nexport function removeFromDom (el) {\n  isElement(el) && isElement(el.parentNode) && el.parentNode.removeChild(el)\n}\n\nexport function ensureElementMatchesFunction () {\n  if (!Element.prototype.matches) {\n    Element.prototype.matches =\n      Element.prototype.matchesSelector ||\n      Element.prototype.mozMatchesSelector ||\n      Element.prototype.msMatchesSelector ||\n      Element.prototype.oMatchesSelector ||\n      Element.prototype.webkitMatchesSelector ||\n      function (s) {\n        let matches = (this.document || this.ownerDocument).querySelectorAll(s)\n        let i = matches.length\n        while (--i >= 0 && matches.item(i) !== this) {\n        }\n        return i > -1\n      }\n  }\n}\n\nexport function addClass (el, className) {\n  if (!isElement(el)) {\n    return\n  }\n  if (el.className) {\n    let classes = el.className.split(' ')\n    if (classes.indexOf(className) < 0) {\n      classes.push(className)\n      el.className = classes.join(' ')\n    }\n  } else {\n    el.className = className\n  }\n}\n\nexport function removeClass (el, className) {\n  if (!isElement(el)) {\n    return\n  }\n  if (el.className) {\n    let classes = el.className.split(' ')\n    let newClasses = []\n    for (let i = 0, l = classes.length; i < l; i++) {\n      if (classes[i] !== className) {\n        newClasses.push(classes[i])\n      }\n    }\n    el.className = newClasses.join(' ')\n  }\n}\n\nexport function hasClass (el, className) {\n  if (!isElement(el)) {\n    return false\n  }\n  let classes = el.className.split(' ')\n  for (let i = 0, l = classes.length; i < l; i++) {\n    if (classes[i] === className) {\n      return true\n    }\n  }\n  return false\n}\n\nexport function setDropdownPosition (dropdown, trigger, options = {}) {\n  let doc = document.documentElement\n  let containerScrollLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0)\n  let containerScrollTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0)\n  let rect = trigger.getBoundingClientRect()\n  let dropdownRect = dropdown.getBoundingClientRect()\n  dropdown.style.right = 'auto'\n  dropdown.style.bottom = 'auto'\n  if (options.menuRight) {\n    dropdown.style.left = containerScrollLeft + rect.left + rect.width - dropdownRect.width + 'px'\n  } else {\n    dropdown.style.left = containerScrollLeft + rect.left + 'px'\n  }\n  if (options.dropup) {\n    dropdown.style.top = containerScrollTop + rect.top - dropdownRect.height - 4 + 'px'\n  } else {\n    dropdown.style.top = containerScrollTop + rect.top + rect.height + 'px'\n  }\n}\n\nexport function isAvailableAtPosition (trigger, popup, placement) {\n  let triggerRect = trigger.getBoundingClientRect()\n  let popupRect = popup.getBoundingClientRect()\n  let viewPortSize = getViewportSize()\n  let top = true\n  let right = true\n  let bottom = true\n  let left = true\n  switch (placement) {\n    case PLACEMENTS.TOP:\n      top = triggerRect.top >= popupRect.height\n      left = triggerRect.left + triggerRect.width / 2 >= popupRect.width / 2\n      right = triggerRect.right - triggerRect.width / 2 + popupRect.width / 2 <= viewPortSize.width\n      break\n    case PLACEMENTS.BOTTOM:\n      bottom = triggerRect.bottom + popupRect.height <= viewPortSize.height\n      left = triggerRect.left + triggerRect.width / 2 >= popupRect.width / 2\n      right = triggerRect.right - triggerRect.width / 2 + popupRect.width / 2 <= viewPortSize.width\n      break\n    case PLACEMENTS.RIGHT:\n      right = triggerRect.right + popupRect.width <= viewPortSize.width\n      top = triggerRect.top + triggerRect.height / 2 >= popupRect.height / 2\n      bottom = triggerRect.bottom - triggerRect.height / 2 + popupRect.height / 2 <= viewPortSize.height\n      break\n    case PLACEMENTS.LEFT:\n      left = triggerRect.left >= popupRect.width\n      top = triggerRect.top + triggerRect.height / 2 >= popupRect.height / 2\n      bottom = triggerRect.bottom - triggerRect.height / 2 + popupRect.height / 2 <= viewPortSize.height\n      break\n  }\n  return top && right && bottom && left\n}\n\nexport function setTooltipPosition (tooltip, trigger, placement, auto, appendToSelector, viewport) {\n  if (!isElement(tooltip) || !isElement(trigger)) {\n    return\n  }\n  const isPopover = tooltip && tooltip.className && tooltip.className.indexOf('popover') >= 0\n  let containerScrollTop\n  let containerScrollLeft\n  if (!isExist(appendToSelector) || appendToSelector === 'body') {\n    const doc = document.documentElement\n    containerScrollLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0)\n    containerScrollTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0)\n  } else {\n    const container = document.querySelector(appendToSelector)\n    containerScrollLeft = container.scrollLeft\n    containerScrollTop = container.scrollTop\n  }\n  // auto adjust placement\n  if (auto) {\n    // Try: right -> bottom -> left -> top\n    // Cause the default placement is top\n    let placements = [PLACEMENTS.RIGHT, PLACEMENTS.BOTTOM, PLACEMENTS.LEFT, PLACEMENTS.TOP]\n    // The class switch helper function\n    const changePlacementClass = (placement) => {\n      // console.log(placement)\n      placements.forEach(placement => {\n        removeClass(tooltip, placement)\n      })\n      addClass(tooltip, placement)\n    }\n    // No need to adjust if the default placement fits\n    if (!isAvailableAtPosition(trigger, tooltip, placement)) {\n      for (let i = 0, l = placements.length; i < l; i++) {\n        // Re-assign placement class\n        changePlacementClass(placements[i])\n        // Break if new placement fits\n        if (isAvailableAtPosition(trigger, tooltip, placements[i])) {\n          placement = placements[i]\n          break\n        }\n      }\n      changePlacementClass(placement)\n    }\n  }\n  // fix left and top for tooltip\n  let rect = trigger.getBoundingClientRect()\n  let tooltipRect = tooltip.getBoundingClientRect()\n  let top\n  let left\n  if (placement === PLACEMENTS.BOTTOM) {\n    top = containerScrollTop + rect.top + rect.height\n    left = containerScrollLeft + rect.left + rect.width / 2 - tooltipRect.width / 2\n  } else if (placement === PLACEMENTS.LEFT) {\n    top = containerScrollTop + rect.top + rect.height / 2 - tooltipRect.height / 2\n    left = containerScrollLeft + rect.left - tooltipRect.width\n  } else if (placement === PLACEMENTS.RIGHT) {\n    top = containerScrollTop + rect.top + rect.height / 2 - tooltipRect.height / 2\n    // https://github.com/wxsms/uiv/issues/272\n    // add 1px to fix above issue\n    left = containerScrollLeft + rect.left + rect.width + 1\n  } else {\n    top = containerScrollTop + rect.top - tooltipRect.height\n    left = containerScrollLeft + rect.left + rect.width / 2 - tooltipRect.width / 2\n  }\n  let viewportEl\n  // viewport option\n  if (isString(viewport)) {\n    viewportEl = document.querySelector(viewport)\n  } else if (isFunction(viewport)) {\n    viewportEl = viewport(trigger)\n  }\n  if (isElement(viewportEl)) {\n    const popoverFix = isPopover ? 11 : 0\n    const viewportReact = viewportEl.getBoundingClientRect()\n    const viewportTop = containerScrollTop + viewportReact.top\n    const viewportLeft = containerScrollLeft + viewportReact.left\n    const viewportBottom = viewportTop + viewportReact.height\n    const viewportRight = viewportLeft + viewportReact.width\n    // fix top\n    if (top < viewportTop) {\n      top = viewportTop\n    } else if (top + tooltipRect.height > viewportBottom) {\n      top = viewportBottom - tooltipRect.height\n    }\n    // fix left\n    if (left < viewportLeft) {\n      left = viewportLeft\n    } else if (left + tooltipRect.width > viewportRight) {\n      left = viewportRight - tooltipRect.width\n    }\n    // fix for popover pointer\n    if (placement === PLACEMENTS.BOTTOM) {\n      top -= popoverFix\n    } else if (placement === PLACEMENTS.LEFT) {\n      left += popoverFix\n    } else if (placement === PLACEMENTS.RIGHT) {\n      left -= popoverFix\n    } else {\n      top += popoverFix\n    }\n  }\n  // set position finally\n  tooltip.style.top = `${top}px`\n  tooltip.style.left = `${left}px`\n}\n\nexport function hasScrollbar (el) {\n  const SCROLL = 'scroll'\n  const hasVScroll = el.scrollHeight > el.clientHeight\n  const style = getComputedStyle(el)\n  return hasVScroll || style.overflow === SCROLL || style.overflowY === SCROLL\n}\n\nexport function toggleBodyOverflow (enable) {\n  const MODAL_OPEN = 'modal-open'\n  const body = document.body\n  if (enable) {\n    removeClass(body, MODAL_OPEN)\n    body.style.paddingRight = null\n  } else {\n    const browsersWithFloatingScrollbar = isIE10() || isIE11()\n    const documentHasScrollbar = hasScrollbar(document.documentElement) || hasScrollbar(document.body)\n    if (documentHasScrollbar && !browsersWithFloatingScrollbar) {\n      body.style.paddingRight = `${getScrollbarWidth()}px`\n    }\n    addClass(body, MODAL_OPEN)\n  }\n}\n\nexport function getClosest (el, selector) {\n  ensureElementMatchesFunction()\n  let parent\n  let _el = el\n  while (_el) {\n    parent = _el.parentElement\n    if (parent && parent.matches(selector)) {\n      return parent\n    }\n    _el = parent\n  }\n  return null\n}\n\nexport function getParents (el, selector, until = null) {\n  ensureElementMatchesFunction()\n  let parents = []\n  let parent = el.parentElement\n  while (parent) {\n    if (parent.matches(selector)) {\n      parents.push(parent)\n    } else if (until && (until === parent || parent.matches(until))) {\n      break\n    }\n    parent = parent.parentElement\n  }\n  return parents\n}\n\nexport function focus (el) {\n  if (!isElement(el)) {\n    return\n  }\n  el.getAttribute('tabindex') ? null : el.setAttribute('tabindex', '-1')\n  el.focus()\n}\n","export function spliceIfExist (arr, item) {\n  if (Array.isArray(arr)) {\n    const index = arr.indexOf(item)\n    if (index >= 0) {\n      arr.splice(index, 1)\n    }\n  }\n}\n\nexport function range (end, start = 0, step = 1) {\n  let arr = []\n  for (let i = start; i < end; i += step) {\n    arr.push(i)\n  }\n  return arr\n}\n\nexport function nodeListToArray (nodeList) {\n  return Array.prototype.slice.call(nodeList || [])\n}\n\nexport function onlyUnique (value, index, self) {\n  return self.indexOf(value) === index\n}\n","export default {\n  uiv: {\n    datePicker: {\n      clear: 'Clear',\n      today: 'Today',\n      month: 'Month',\n      month1: 'January',\n      month2: 'February',\n      month3: 'March',\n      month4: 'April',\n      month5: 'May',\n      month6: 'June',\n      month7: 'July',\n      month8: 'August',\n      month9: 'September',\n      month10: 'October',\n      month11: 'November',\n      month12: 'December',\n      year: 'Year',\n      week1: 'Mon',\n      week2: 'Tue',\n      week3: 'Wed',\n      week4: 'Thu',\n      week5: 'Fri',\n      week6: 'Sat',\n      week7: 'Sun'\n    },\n    timePicker: {\n      am: 'AM',\n      pm: 'PM'\n    },\n    modal: {\n      cancel: 'Cancel',\n      ok: 'OK'\n    },\n    multiSelect: {\n      placeholder: 'Select...',\n      filterPlaceholder: 'Search...'\n    }\n  }\n}\n","// https://github.com/ElemeFE/element/blob/dev/src/locale/index.js\nimport {isFunction, isExist} from '../utils/objectUtils'\nimport defaultLang from './lang/en-US'\n\nlet lang = defaultLang\n\nlet i18nHandler = function () {\n  const vuei18n = Object.getPrototypeOf(this).$t\n  if (isFunction(vuei18n)) {\n    try {\n      return vuei18n.apply(this, arguments)\n    } catch (err) {\n      //  vuei18n.apply doesn't work with 7.3.3 of vue-i18n\n      return this.$t(...arguments)\n    }\n  }\n}\n\nexport const t = function (path, options) {\n  options = options || {}\n\n  let value = i18nHandler.apply(this, arguments)\n  if (isExist(value) && !options.$$locale) {\n    return value\n  }\n  const array = path.split('.')\n  let current = options.$$locale || lang\n\n  for (let i = 0, j = array.length; i < j; i++) {\n    const property = array[i]\n    value = current[property]\n    if (i === j - 1) return value\n    if (!value) return ''\n    current = value\n  }\n  return ''\n}\n\nexport const use = function (l) {\n  lang = l || lang\n}\n\nexport const i18n = function (fn) {\n  i18nHandler = fn || i18nHandler\n}\n\nexport default {use, t, i18n}\n","import {t} from '../locale'\n\nexport default {\n  methods: {\n    t (...args) {\n      args[1] = Object.assign({ $$locale: this.locale }, args[1])\n      return t.apply(this, args)\n    }\n  },\n  props: {\n    locale: Object\n  }\n}\n","function mergeData(){for(var e,a,s={},t=arguments.length;t--;)for(var r=0,c=Object.keys(arguments[t]);r<c.length;r++)switch(e=c[r]){case\"class\":case\"style\":case\"directives\":Array.isArray(s[e])||(s[e]=[]),s[e]=s[e].concat(arguments[t][e]);break;case\"staticClass\":if(!arguments[t][e])break;void 0===s[e]&&(s[e]=\"\"),s[e]&&(s[e]+=\" \"),s[e]+=arguments[t][e].trim();break;case\"on\":case\"nativeOn\":s[e]||(s[e]={});for(var o=0,n=Object.keys(arguments[t][e]);o<n.length;o++)a=n[o],s[e][a]?s[e][a]=[].concat(s[e][a],arguments[t][e][a]):s[e][a]=arguments[t][e][a];break;case\"attrs\":case\"props\":case\"domProps\":case\"scopedSlots\":case\"staticStyle\":case\"hook\":case\"transition\":s[e]||(s[e]={}),s[e]=__assign({},arguments[t][e],s[e]);break;case\"slot\":case\"key\":case\"ref\":case\"tag\":case\"show\":case\"keepAlive\":default:s[e]||(s[e]=arguments[t][e])}return s}var __assign=Object.assign||function(e){for(var a,s=1,t=arguments.length;s<t;s++){a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};export{mergeData};\n//# sourceMappingURL=lib.esm.js.map\n","export default {\n  props: {\n    // <a> props\n    href: String,\n    target: String,\n    // <router-link> props\n    to: null,\n    replace: {\n      type: Boolean,\n      default: false\n    },\n    append: {\n      type: Boolean,\n      default: false\n    },\n    exact: {\n      type: Boolean,\n      default: false\n    }\n  }\n}\n","import {mergeData} from 'vue-functional-data-merge'\n\nexport default {\n  functional: true,\n  render (h, {props, children, data}) {\n    return h(\n      'div',\n      mergeData(data, {\n        class: {\n          'btn-group': !props.vertical,\n          'btn-group-vertical': props.vertical,\n          'btn-group-justified': props.justified,\n          [`btn-group-${props.size}`]: props.size\n        },\n        attrs: {\n          role: 'group',\n          'data-toggle': 'buttons'\n        }\n      }),\n      children\n    )\n  },\n  props: {\n    size: String,\n    vertical: {\n      type: Boolean,\n      default: false\n    },\n    justified: {\n      type: Boolean,\n      default: false\n    }\n  }\n}\n","import {mergeData} from 'vue-functional-data-merge'\nimport linkMixin from '../../mixins/linkMixin'\nimport BtnGroup from './BtnGroup'\n\nconst INPUT_TYPE_CHECKBOX = 'checkbox'\nconst INPUT_TYPE_RADIO = 'radio'\n\nexport default {\n  functional: true,\n  mixins: [linkMixin],\n  render (h, {children, props, data}) {\n    // event listeners\n    const listeners = data.on || {}\n    // checkbox: model contain inputValue\n    // radio: model === inputValue\n    const isInputActive = props.inputType === INPUT_TYPE_CHECKBOX ? props.value.indexOf(props.inputValue) >= 0 : props.value === props.inputValue\n    // button class\n    const classes = {\n      btn: true,\n      active: props.inputType ? isInputActive : props.active,\n      disabled: props.disabled,\n      'btn-block': props.block,\n      [`btn-${props.type}`]: Boolean(props.type),\n      [`btn-${props.size}`]: Boolean(props.size)\n    }\n    // prevent event for disabled links\n    const on = {\n      click (e) {\n        if (props.disabled && e instanceof Event) {\n          e.preventDefault()\n          e.stopPropagation()\n        }\n      }\n    }\n    // render params\n    let tag, options, slot\n\n    if (props.href) {\n      // is native link\n      tag = 'a'\n      slot = children\n      options = mergeData(data, {\n        on,\n        class: classes,\n        attrs: {\n          role: 'button',\n          href: props.href,\n          target: props.target\n        }\n      })\n    } else if (props.to) {\n      // is vue router link\n      tag = 'router-link'\n      slot = children\n      options = mergeData(data, {\n        nativeOn: on,\n        class: classes,\n        props: {\n          event: props.disabled ? '' : 'click', // prevent nav while disabled\n          to: props.to,\n          replace: props.replace,\n          append: props.append,\n          exact: props.exact\n        },\n        attrs: {\n          role: 'button'\n        }\n      })\n    } else if (props.inputType) {\n      // is input checkbox or radio\n      tag = 'label'\n      options = mergeData(data, {\n        on,\n        class: classes\n      })\n      slot = [\n        h('input', {\n          attrs: {\n            autocomplete: 'off',\n            type: props.inputType,\n            checked: isInputActive ? 'checked' : null,\n            disabled: props.disabled\n          },\n          domProps: {\n            checked: isInputActive // required\n          },\n          on: {\n            input (evt) {\n              evt.stopPropagation()\n            },\n            change () {\n              if (props.inputType === INPUT_TYPE_CHECKBOX) {\n                const valueCopied = props.value.slice()\n                if (isInputActive) {\n                  valueCopied.splice(valueCopied.indexOf(props.inputValue), 1)\n                } else {\n                  valueCopied.push(props.inputValue)\n                }\n                listeners['input'](valueCopied)\n              } else {\n                listeners['input'](props.inputValue)\n              }\n            }\n          }\n        }),\n        children\n      ]\n    } else if (props.justified) {\n      // is in justified btn-group\n      tag = BtnGroup\n      options = {}\n      slot = [\n        h('button', mergeData(data, {\n          on,\n          class: classes,\n          attrs: {\n            type: props.nativeType,\n            disabled: props.disabled\n          }\n        }), children)\n      ]\n    } else {\n      // is button\n      tag = 'button'\n      slot = children\n      options = mergeData(data, {\n        on,\n        class: classes,\n        attrs: {\n          type: props.nativeType,\n          disabled: props.disabled\n        }\n      })\n    }\n\n    return h(tag, options, slot)\n  },\n  props: {\n    justified: {\n      type: Boolean,\n      default: false\n    },\n    type: {\n      type: String,\n      default: 'default'\n    },\n    nativeType: {\n      type: String,\n      default: 'button'\n    },\n    size: String,\n    block: {\n      type: Boolean,\n      default: false\n    },\n    active: {\n      type: Boolean,\n      default: false\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    // <input> props\n    value: null,\n    inputValue: null,\n    inputType: {\n      type: String,\n      validator (value) {\n        return value === INPUT_TYPE_CHECKBOX || value === INPUT_TYPE_RADIO\n      }\n    }\n  }\n}\n","<template>\n  <div tabindex=\"-1\" role=\"dialog\" class=\"modal\" :class=\"{fade:transitionDuration>0}\" @click.self=\"backdropClicked\">\n    <div ref=\"dialog\" class=\"modal-dialog\" :class=\"modalSizeClass\" role=\"document\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\" v-if=\"header\">\n          <slot name=\"header\">\n            <button\n              type=\"button\"\n              class=\"close\"\n              aria-label=\"Close\"\n              @click=\"toggle(false)\"\n              style=\"position: relative;z-index: 1060\"\n              v-if=\"dismissBtn\">\n              <!-- 1060 is bigger than dialog z-index 1050 because it got cover by title sometimes -->\n              <span aria-hidden=\"true\">×</span>\n            </button>\n            <h4 class=\"modal-title\">\n              <slot name=\"title\">{{title}}</slot>\n            </h4>\n          </slot>\n        </div>\n        <div class=\"modal-body\">\n          <slot/>\n        </div>\n        <div class=\"modal-footer\" v-if=\"footer\">\n          <slot name=\"footer\">\n            <btn :type=\"cancelType\" @click=\"toggle(false,'cancel')\">\n              <span>{{cancelText || t('uiv.modal.cancel')}}</span>\n            </btn>\n            <btn :type=\"okType\" @click=\"toggle(false,'ok')\" data-action=\"auto-focus\">\n              <span>{{okText || t('uiv.modal.ok')}}</span>\n            </btn>\n          </slot>\n        </div>\n      </div>\n    </div>\n    <div ref=\"backdrop\" class=\"modal-backdrop\" :class=\"{fade:transitionDuration>0}\"></div>\n  </div>\n</template>\n\n<script>\n  import Local from '../../mixins/localeMixin'\n  import Btn from './../button/Btn'\n  import {\n    EVENTS,\n    on,\n    off,\n    removeFromDom,\n    toggleBodyOverflow,\n    addClass,\n    removeClass,\n    getComputedStyle\n  } from '../../utils/domUtils'\n  import { isFunction, isPromiseSupported } from '../../utils/objectUtils'\n\n  const MODAL_BACKDROP = 'modal-backdrop'\n  const IN = 'in'\n  const getOpenModals = () => document.querySelectorAll(`.${MODAL_BACKDROP}`)\n  const getOpenModalNum = () => getOpenModals().length\n\n  export default {\n    mixins: [Local],\n    components: { Btn },\n    props: {\n      value: {\n        type: Boolean,\n        default: false\n      },\n      title: String,\n      size: String,\n      backdrop: {\n        type: Boolean,\n        default: true\n      },\n      footer: {\n        type: Boolean,\n        default: true\n      },\n      header: {\n        type: Boolean,\n        default: true\n      },\n      cancelText: String,\n      cancelType: {\n        type: String,\n        default: 'default'\n      },\n      okText: String,\n      okType: {\n        type: String,\n        default: 'primary'\n      },\n      dismissBtn: {\n        type: Boolean,\n        default: true\n      },\n      transitionDuration: {\n        type: Number,\n        default: 150\n      },\n      autoFocus: {\n        type: Boolean,\n        default: false\n      },\n      keyboard: {\n        type: Boolean,\n        default: true\n      },\n      beforeClose: Function,\n      zOffset: {\n        type: Number,\n        default: 20\n      },\n      appendToBody: {\n        type: Boolean,\n        default: false\n      },\n      displayStyle: {\n        type: String,\n        default: 'block'\n      }\n    },\n    data () {\n      return {\n        msg: ''\n      }\n    },\n    computed: {\n      modalSizeClass () {\n        return {\n          [`modal-${this.size}`]: Boolean(this.size)\n        }\n      }\n    },\n    watch: {\n      value (v) {\n        this.$toggle(v)\n      }\n    },\n    mounted () {\n      removeFromDom(this.$refs.backdrop)\n      on(window, EVENTS.MOUSE_DOWN, this.suppressBackgroundClose)\n      on(window, EVENTS.KEY_UP, this.onKeyPress)\n      if (this.value) {\n        this.$toggle(true)\n      }\n    },\n    beforeDestroy () {\n      clearTimeout(this.timeoutId)\n      removeFromDom(this.$refs.backdrop)\n      removeFromDom(this.$el)\n      if (getOpenModalNum() === 0) {\n        toggleBodyOverflow(true)\n      }\n      off(window, EVENTS.MOUSE_DOWN, this.suppressBackgroundClose)\n      off(window, EVENTS.MOUSE_UP, this.unsuppressBackgroundClose)\n      off(window, EVENTS.KEY_UP, this.onKeyPress)\n    },\n    methods: {\n      onKeyPress (event) {\n        if (this.keyboard && this.value && event.keyCode === 27) {\n          const thisModal = this.$refs.backdrop\n          let thisZIndex = thisModal.style.zIndex\n          thisZIndex = thisZIndex && thisZIndex !== 'auto' ? parseInt(thisZIndex) : 0\n          // Find out if this modal is the top most one.\n          const modals = getOpenModals()\n          const modalsLength = modals.length\n          for (let i = 0; i < modalsLength; i++) {\n            if (modals[i] !== thisModal) {\n              let zIndex = modals[i].style.zIndex\n              zIndex = zIndex && zIndex !== 'auto' ? parseInt(zIndex) : 0\n              // if any existing modal has higher zIndex, ignore\n              if (zIndex > thisZIndex) {\n                return\n              }\n            }\n          }\n          this.toggle(false)\n        }\n      },\n      toggle (show, msg) {\n        let shouldClose = true\n        if (isFunction(this.beforeClose)) {\n          shouldClose = this.beforeClose(msg)\n        }\n\n        if (isPromiseSupported()) {\n          // Skip the hiding when beforeClose returning falsely value or returned Promise resolves to falsely value\n          // Use Promise.resolve to accept both Boolean values and Promises\n          Promise.resolve(shouldClose).then((shouldClose) => {\n            // Skip the hiding while show===false\n            if (!show && shouldClose) {\n              this.msg = msg\n              this.$emit('input', show)\n            }\n          })\n        } else {\n          // Fallback to old version if promise is not supported\n          // skip the hiding while show===false & beforeClose returning falsely value\n          if (!show && !shouldClose) {\n            return\n          }\n\n          this.msg = msg\n          this.$emit('input', show)\n        }\n      },\n      $toggle (show) {\n        const modal = this.$el\n        const backdrop = this.$refs.backdrop\n        clearTimeout(this.timeoutId)\n        if (show) {\n          const alreadyOpenModalNum = getOpenModalNum()\n          document.body.appendChild(backdrop)\n          if (this.appendToBody) {\n            document.body.appendChild(modal)\n          }\n          modal.style.display = this.displayStyle\n          modal.scrollTop = 0\n          backdrop.offsetHeight // force repaint\n          toggleBodyOverflow(false)\n          addClass(backdrop, IN)\n          addClass(modal, IN)\n          // fix z-index for nested modals\n          // no need to calculate if no modal is already open\n          if (alreadyOpenModalNum > 0) {\n            const modalBaseZ = parseInt(getComputedStyle(modal).zIndex) || 1050 // 1050 is default modal z-Index\n            const backdropBaseZ = parseInt(getComputedStyle(backdrop).zIndex) || 1040 // 1040 is default backdrop z-Index\n            const offset = alreadyOpenModalNum * this.zOffset\n            modal.style.zIndex = `${modalBaseZ + offset}`\n            backdrop.style.zIndex = `${backdropBaseZ + offset}`\n          }\n          // z-index fix end\n          this.timeoutId = setTimeout(() => {\n            if (this.autoFocus) {\n              let btn = this.$el.querySelector('[data-action=\"auto-focus\"]')\n              if (btn) {\n                btn.focus()\n              }\n            }\n            this.$emit('show')\n            this.timeoutId = 0\n          }, this.transitionDuration)\n        } else {\n          removeClass(backdrop, IN)\n          removeClass(modal, IN)\n          this.timeoutId = setTimeout(() => {\n            modal.style.display = 'none'\n            removeFromDom(backdrop)\n            if (this.appendToBody) {\n              removeFromDom(modal)\n            }\n            if (getOpenModalNum() === 0) {\n              toggleBodyOverflow(true)\n            }\n            this.$emit('hide', this.msg || 'dismiss')\n            this.msg = ''\n            this.timeoutId = 0\n            // restore z-index for nested modals\n            modal.style.zIndex = ''\n            backdrop.style.zIndex = ''\n            // z-index fix end\n          }, this.transitionDuration)\n        }\n      },\n      suppressBackgroundClose: function (event) {\n        if (event && event.target === this.$el) {\n          return\n        }\n\n        this.isCloseSuppressed = true\n        on(window, 'mouseup', this.unsuppressBackgroundClose)\n      },\n      unsuppressBackgroundClose: function () {\n        if (this.isCloseSuppressed) {\n          off(window, 'mouseup', this.unsuppressBackgroundClose)\n          setTimeout(() => {\n            this.isCloseSuppressed = false\n          }, 1)\n        }\n      },\n      backdropClicked (event) {\n        if (this.backdrop && !this.isCloseSuppressed) {\n          this.toggle(false)\n        }\n      }\n    }\n  }\n</script>\n","<template>\n  <modal\n    ref=\"modal\"\n    auto-focus\n    v-model=\"show\"\n    :size=\"size\"\n    :title=\"title\"\n    :header=\"!!title\"\n    :backdrop=\"closeOnBackdropClick\"\n    :cancel-text=\"cancelText\"\n    :ok-text=\"okText\"\n    :class=\"customClass\"\n    @hide=\"cb\">\n    <div v-if=\"html\" v-html=\"content\"></div>\n    <p v-else>{{content}}</p>\n    <div v-if=\"type===TYPES.PROMPT\">\n      <div class=\"form-group\" :class=\"{'has-error':inputNotValid}\">\n        <input\n          ref=\"input\"\n          :type=\"inputType\"\n          v-model=\"input\"\n          class=\"form-control\"\n          required\n          data-action=\"auto-focus\"\n          @change=\"dirty=true\"\n          @keyup.enter=\"validate\"/>\n        <span class=\"help-block\" v-show=\"inputNotValid\">{{inputError}}</span>\n      </div>\n    </div>\n    <template slot=\"footer\" v-if=\"type===TYPES.ALERT\">\n      <btn\n        :type=\"okType\"\n        @click=\"toggle(false,'ok')\"\n        :data-action=\"autoFocus === 'ok' ? 'auto-focus' : ''\"\n        v-text=\"okBtnText\"\n      />\n    </template>\n    <template slot=\"footer\" v-else>\n      <template v-if=\"reverseButtons\">\n        <btn\n          :type=\"okType\"\n          v-if=\"type===TYPES.CONFIRM\"\n          @click=\"toggle(false,'ok')\"\n          :data-action=\"autoFocus === 'ok' ? 'auto-focus' : ''\"\n          v-text=\"okBtnText\"\n        />\n        <btn\n          :type=\"okType\"\n          v-else\n          @click=\"validate\"\n          v-text=\"okBtnText\"\n        />\n        <btn\n          :type=\"cancelType\"\n          @click=\"toggle(false,'cancel')\"\n          :data-action=\"autoFocus === 'cancel' ? 'auto-focus' : ''\"\n          v-text=\"cancelBtnText\"\n        />\n      </template>\n      <template v-else>\n        <btn\n          :type=\"cancelType\"\n          @click=\"toggle(false,'cancel')\"\n          :data-action=\"autoFocus === 'cancel' ? 'auto-focus' : ''\"\n          v-text=\"cancelBtnText\"\n        />\n        <btn\n          :type=\"okType\"\n          v-if=\"type===TYPES.CONFIRM\"\n          @click=\"toggle(false,'ok')\"\n          :data-action=\"autoFocus === 'ok' ? 'auto-focus' : ''\"\n          v-text=\"okBtnText\"\n        />\n        <btn\n          :type=\"okType\"\n          v-else\n          @click=\"validate\"\n          v-text=\"okBtnText\"\n        />\n      </template>\n    </template>\n  </modal>\n</template>\n\n<script>\n  import { TYPES } from './constants'\n  import Local from '../../mixins/localeMixin'\n  import Modal from '../../components/modal/Modal.vue'\n  import Btn from '../../components/button/Btn'\n  import { isExist } from '../../utils/objectUtils'\n\n  export default {\n    mixins: [Local],\n    components: { Modal, Btn },\n    props: {\n      backdrop: null,\n      title: String,\n      content: String,\n      html: {\n        type: Boolean,\n        default: false\n      },\n      okText: String,\n      okType: {\n        type: String,\n        default: 'primary'\n      },\n      cancelText: String,\n      cancelType: {\n        type: String,\n        default: 'default'\n      },\n      type: {\n        type: Number,\n        default: TYPES.ALERT\n      },\n      size: {\n        type: String,\n        default: 'sm'\n      },\n      cb: {\n        type: Function,\n        required: true\n      },\n      validator: {\n        type: Function,\n        default: () => null\n      },\n      customClass: null,\n      defaultValue: String,\n      inputType: {\n        type: String,\n        default: 'text'\n      },\n      autoFocus: {\n        type: String,\n        default: 'ok'\n      },\n      reverseButtons: {\n        type: Boolean,\n        default: false\n      }\n    },\n    data () {\n      return {\n        TYPES,\n        show: false,\n        input: '',\n        dirty: false\n      }\n    },\n    mounted () {\n      if (this.defaultValue) {\n        this.input = this.defaultValue\n      }\n    },\n    computed: {\n      closeOnBackdropClick () {\n        // use backdrop prop if exist\n        // otherwise, only not available if render as alert\n        return isExist(this.backdrop) ? Boolean(this.backdrop) : (this.type !== TYPES.ALERT)\n      },\n      inputError () {\n        return this.validator(this.input)\n      },\n      inputNotValid () {\n        return this.dirty && this.inputError\n      },\n      okBtnText () {\n        return this.okText || this.t('uiv.modal.ok')\n      },\n      cancelBtnText () {\n        return this.cancelText || this.t('uiv.modal.cancel')\n      }\n    },\n    methods: {\n      toggle (show, msg) {\n        this.$refs.modal.toggle(show, msg)\n      },\n      validate () {\n        this.dirty = true\n        if (!isExist(this.inputError)) {\n          this.toggle(false, { value: this.input })\n        }\n      }\n    }\n  }\n</script>\n","import {TYPES} from './constants'\nimport {removeFromDom} from '../../utils/domUtils'\nimport {spliceIfExist} from '../../utils/arrayUtils'\nimport {isFunction, isExist, isString, isPromiseSupported} from '../../utils/objectUtils'\nimport MessageBox from './MessageBox.vue'\nimport Vue from 'vue'\n\nconst queue = []\n\nconst destroy = (instance) => {\n  // console.log('destroyModal')\n  removeFromDom(instance.$el)\n  instance.$destroy()\n  spliceIfExist(queue, instance)\n}\n\n// handel cancel or ok for confirm & prompt\nconst shallResolve = (type, msg) => {\n  if (type === TYPES.CONFIRM) {\n    // is confirm\n    return msg === 'ok'\n  } else {\n    // is prompt\n    return isExist(msg) && isString(msg.value)\n  }\n}\n\nconst init = function (type, options, cb, resolve = null, reject = null) {\n  const i18n = this.$i18n\n  const instance = new Vue({\n    extends: MessageBox,\n    i18n,\n    propsData: {\n      type,\n      ...options,\n      cb (msg) {\n        destroy(instance)\n        if (isFunction(cb)) {\n          if (type === TYPES.CONFIRM) {\n            shallResolve(type, msg) ? cb(null, msg) : cb(msg)\n          } else if (type === TYPES.PROMPT) {\n            shallResolve(type, msg) ? cb(null, msg.value) : cb(msg)\n          } else {\n            cb(msg)\n          }\n        } else if (resolve && reject) {\n          if (type === TYPES.CONFIRM) {\n            shallResolve(type, msg) ? resolve(msg) : reject(msg)\n          } else if (type === TYPES.PROMPT) {\n            shallResolve(type, msg) ? resolve(msg.value) : reject(msg)\n          } else {\n            resolve(msg)\n          }\n        }\n      }\n    }\n  })\n  instance.$mount()\n  document.body.appendChild(instance.$el)\n  instance.show = true\n  queue.push(instance)\n}\n\nconst initModal = function (type, options = {}, cb) {\n  if (isPromiseSupported()) {\n    return new Promise((resolve, reject) => {\n      init.apply(this, [type, options, cb, resolve, reject])\n    })\n  } else {\n    init.apply(this, [type, options, cb])\n  }\n}\n\nconst alert = function (options, cb) {\n  return initModal.apply(this, [TYPES.ALERT, options, cb])\n}\n\nconst confirm = function (options, cb) {\n  return initModal.apply(this, [TYPES.CONFIRM, options, cb])\n}\n\nconst prompt = function (options, cb) {\n  return initModal.apply(this, [TYPES.PROMPT, options, cb])\n}\n\nexport default {alert, confirm, prompt}\n"],"names":["TYPES","isExist","obj","isFunction","isString","isPromiseSupported","window","Promise","EVENTS","isIE11","MSInputMethodContext","document","documentMode","isIE10","navigator","appVersion","indexOf","getComputedStyle","el","getViewportSize","width","Math","max","documentElement","clientWidth","innerWidth","height","clientHeight","innerHeight","scrollbarWidth","savedScreenSize","getScrollbarWidth","recalculate","screenSize","readyState","div1","createElement","div2","style","overflow","body","appendChild","abs","scrollHeight","removeChild","on","element","event","handler","addEventListener","off","removeEventListener","isElement","nodeType","Node","ELEMENT_NODE","removeFromDom","parentNode","addClass","className","classes","split","push","join","removeClass","newClasses","i","l","length","hasScrollbar","SCROLL","hasVScroll","overflowY","toggleBodyOverflow","enable","MODAL_OPEN","paddingRight","browsersWithFloatingScrollbar","documentHasScrollbar","spliceIfExist","arr","item","Array","isArray","index","splice","lang","defaultLang","i18nHandler","vuei18n","Object","getPrototypeOf","$t","apply","arguments","err","t","path","options","value","$$locale","array","current","j","property","args","babelHelpers.extends","locale","mergeData","e","a","s","r","c","keys","concat","trim","o","n","__assign","assign","prototype","hasOwnProperty","call","String","Boolean","h","props","children","data","vertical","justified","size","INPUT_TYPE_CHECKBOX","INPUT_TYPE_RADIO","linkMixin","listeners","isInputActive","inputType","inputValue","active","disabled","block","type","Event","preventDefault","stopPropagation","tag","slot","href","target","to","replace","append","exact","evt","valueCopied","slice","BtnGroup","nativeType","MODAL_BACKDROP","IN","getOpenModals","querySelectorAll","getOpenModalNum","render","Local","Btn","Number","Function","v","$toggle","$refs","backdrop","MOUSE_DOWN","suppressBackgroundClose","KEY_UP","onKeyPress","timeoutId","$el","MOUSE_UP","unsuppressBackgroundClose","keyboard","keyCode","thisModal","thisZIndex","zIndex","parseInt","modals","modalsLength","toggle","show","msg","shouldClose","beforeClose","resolve","then","$emit","modal","alreadyOpenModalNum","appendToBody","display","displayStyle","scrollTop","offsetHeight","modalBaseZ","backdropBaseZ","offset","zOffset","setTimeout","autoFocus","btn","querySelector","focus","transitionDuration","isCloseSuppressed","Modal","ALERT","defaultValue","input","validator","dirty","inputError","okText","cancelText","queue","destroy","instance","$destroy","shallResolve","CONFIRM","init","cb","reject","i18n","$i18n","Vue","MessageBox","PROMPT","$mount","initModal","alert","confirm","prompt"],"mappings":"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"}