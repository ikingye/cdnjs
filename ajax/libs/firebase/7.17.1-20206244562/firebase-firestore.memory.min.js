!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("@firebase/app")):"function"==typeof define&&define.amd?define(["@firebase/app"],e):e((t=t||self).firebase)}(this,function(nf){"use strict";try{(function(){nf=nf&&Object.prototype.hasOwnProperty.call(nf,"default")?nf.default:nf;var t,p,e,r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function n(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function d(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{o(u.next(t))}catch(t){e(t)}}function i(t){try{o(u.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,i)}o((u=u.apply(t,s||[])).next())})}function y(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function v(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function s(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function i(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=u[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,s(["["+i+"]  "+t.name+":"],n))}}(e=p=p||{})[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT";var o={debug:p.DEBUG,verbose:p.VERBOSE,info:p.INFO,warn:p.WARN,error:p.ERROR,silent:p.SILENT},a=p.INFO,u=((t={})[p.DEBUG]="log",t[p.VERBOSE]="log",t[p.INFO]="info",t[p.WARN]="warn",t[p.ERROR]="error",t),h=(Object.defineProperty(c.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in p))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),c.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?o[t]:t},Object.defineProperty(c.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),c.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,s([this,p.DEBUG],t)),this._logHandler.apply(this,s([this,p.DEBUG],t))},c.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,s([this,p.VERBOSE],t)),this._logHandler.apply(this,s([this,p.VERBOSE],t))},c.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,s([this,p.INFO],t)),this._logHandler.apply(this,s([this,p.INFO],t))},c.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,s([this,p.WARN],t)),this._logHandler.apply(this,s([this,p.WARN],t))},c.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,s([this,p.ERROR],t)),this._logHandler.apply(this,s([this,p.ERROR],t))},c);function c(t){this.name=t,this._logLevel=a,this._logHandler=i,this._userLogHandler=null}function g(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var l,m=(n(f,l=Error),f);function f(t,e){var n=l.call(this,e)||this;return n.code=t,n.name="FirebaseError",Object.setPrototypeOf(n,f.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,w.prototype.create),n}var w=(b.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r,i=e[0]||{},o=this.service+"/"+t,s=this.errors[t],a=s?(r=i,s.replace(E,function(t,e){var n=r[e];return null!=n?String(n):"<"+e+"?>"})):"Error",u=this.serviceName+": "+a+" ("+o+").",h=new m(o,u),c=0,l=Object.keys(i);c<l.length;c++){var f=l[c];"_"!==f.slice(-1)&&(f in h&&console.warn('Overwriting FirebaseError base field "'+f+'" can cause unexpected behavior.'),h[f]=i[f])}return h},b);function b(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var E=/\{\$([^}]+)}/g;function I(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var T,N="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},A=A||{},_=N||self;function S(){}function R(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function D(t){var e=R(t);return"array"==e||"object"==e&&"number"==typeof t.length}function L(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var O="closure_uid_"+(1e9*Math.random()>>>0),P=0;function k(t,e,n){return t.call.apply(t.bind,arguments)}function V(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function C(t,e,n){return(C=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?k:V).apply(null,arguments)}function U(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var M=Date.now||function(){return+new Date};function x(t,e){function n(){}n.prototype=e.prototype,t.M=e.prototype,t.prototype=new n,t.prototype.constructor=t}function F(){this.j=this.j,this.i=this.i}F.prototype.j=!1,F.prototype.da=function(){!this.j&&(this.j=!0,this.C(),0)&&(Object.prototype.hasOwnProperty.call(this,O)&&this[O]||(this[O]=++P))},F.prototype.C=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var j=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},q=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function B(t){return Array.prototype.concat.apply([],arguments)}function G(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function W(t){return/^[\s\xa0]*$/.test(t)}var H,z=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Y(t,e){return-1!=t.indexOf(e)}function $(t,e){return t<e?-1:e<t?1:0}t:{var X=_.navigator;if(X){var Q=X.userAgent;if(Q){H=Q;break t}}H=""}function K(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function J(t){var e={};for(var n in t)e[n]=t[n];return e}var Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function tt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Z.length;o++)n=Z[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function et(t){return et[" "](t),t}et[" "]=S;var nt,rt,it=Y(H,"Opera"),ot=Y(H,"Trident")||Y(H,"MSIE"),st=Y(H,"Edge"),at=st||ot,ut=Y(H,"Gecko")&&!(Y(H.toLowerCase(),"webkit")&&!Y(H,"Edge"))&&!(Y(H,"Trident")||Y(H,"MSIE"))&&!Y(H,"Edge"),ht=Y(H.toLowerCase(),"webkit")&&!Y(H,"Edge");function ct(){var t=_.document;return t?t.documentMode:void 0}t:{var lt="",ft=(rt=H,ut?/rv:([^\);]+)(\)|;)/.exec(rt):st?/Edge\/([\d\.]+)/.exec(rt):ot?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(rt):ht?/WebKit\/(\S+)/.exec(rt):it?/(?:Version)[ \/]?(\S+)/.exec(rt):void 0);if(ft&&(lt=ft?ft[1]:""),ot){var pt=ct();if(null!=pt&&pt>parseFloat(lt)){nt=String(pt);break t}}nt=lt}var dt={};function yt(a){return t=a,e=function(){for(var t=0,e=z(String(nt)).split("."),n=z(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=$(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||$(0==o[2].length,0==s[2].length)||$(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t},n=dt,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e();var t,e,n}var vt=_.document&&ot&&(ct()||parseInt(nt,10))||void 0,gt=!ot||9<=Number(vt),mt=ot&&!yt("9"),wt=function(){if(!_.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{_.addEventListener("test",S,e),_.removeEventListener("test",S,e)}catch(t){}return t}();function bt(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Et(t,e){if(bt.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(ut){t:{try{et(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:It[t.pointerType]||"",(this.c=t).defaultPrevented&&this.b()}}bt.prototype.b=function(){this.defaultPrevented=!0},x(Et,bt);var It={2:"touch",3:"pen",4:"mouse"};Et.prototype.b=function(){Et.M.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,mt)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var Tt="closure_listenable_"+(1e6*Math.random()|0),Nt=0;function At(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.aa=i,this.key=++Nt,this.V=this.X=!1}function _t(t){t.V=!0,t.listener=null,t.proxy=null,t.src=null,t.aa=null}function St(t){this.src=t,this.a={},this.b=0}function Rt(t,e){var n,r,i,o=e.type;o in t.a&&(r=t.a[o],(n=0<=(i=j(r,e)))&&Array.prototype.splice.call(r,i,1),n&&(_t(e),0==t.a[o].length&&(delete t.a[o],t.b--)))}function Dt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.V&&o.listener==e&&o.capture==!!n&&o.aa==r)return i}return-1}St.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Dt(t,e,r,i);return-1<s?(e=t[s],n||(e.X=!1)):((e=new At(e,this.src,o,!!r,i)).X=n,t.push(e)),e};var Lt="closure_lm_"+(1e6*Math.random()|0),Ot={};function Pt(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=jt(r),e&&e[Tt]?e.sa(n,r,L(i)?!!i.capture:!!i,o):kt(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Pt(t,e[o],n,r,i);return null}return n=jt(n),t&&t[Tt]?t.ra(e,n,L(r)?!!r.capture:!!r,i):kt(t,e,n,!1,r,i)}function kt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=L(i)?!!i.capture:!!i;if(s&&!gt)return null;var a,u,h=xt(t);if(h||(t[Lt]=h=new St(t)),(n=h.add(e,n,r,s,o)).proxy)return n;if(a=Mt,r=u=gt?function(t){return a.call(u.src,u.listener,t)}:function(t){if(!(t=a.call(u.src,u.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)wt||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Ct(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Vt(t){var e,n,r;"number"!=typeof t&&t&&!t.V&&((e=t.src)&&e[Tt]?Rt(e.c,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Ct(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=xt(e))?(Rt(n,t),0==n.b&&(n.src=null,e[Lt]=null)):_t(t)))}function Ct(t){return t in Ot?Ot[t]:Ot[t]="on"+t}function Ut(t,e){var n=t.listener,r=t.aa||t.src;return t.X&&Vt(t),n.call(r,e)}function Mt(t,e){if(t.V)return!0;if(gt)return Ut(t,new Et(e,this));if(!e)t:{e=["window","event"];for(var n=_,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Ut(t,e=new Et(e,this))}function xt(t){return(t=t[Lt])instanceof St?t:null}var Ft="__closure_events_fn_"+(1e9*Math.random()>>>0);function jt(e){return"function"==R(e)?e:(e[Ft]||(e[Ft]=function(t){return e.handleEvent(t)}),e[Ft])}function qt(){F.call(this),this.c=new St(this),(this.J=this).A=null}function Bt(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,a,u=e[o];u&&!u.V&&u.capture==n&&(s=u.listener,a=u.aa||u.src,u.X&&Rt(t.c,u),i=!1!==s.call(a,r)&&i)}return i&&!r.defaultPrevented}x(qt,F),qt.prototype[Tt]=!0,(T=qt.prototype).addEventListener=function(t,e,n,r){Pt(this,t,e,n,r)},T.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=L(i)?!!i.capture:!!i,r=jt(r),e&&e[Tt]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=Dt(s=e.a[n],r,i,o))&&(_t(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):(e=e&&xt(e))&&(n=e.a[n.toString()],e=-1,n&&(e=Dt(n,r,i,o)),(r=-1<e?n[e]:null)&&Vt(r))}(this,t,e,n,r)},T.dispatchEvent=function(t){var e,n=this.A;if(n)for(e=[];n;n=n.A)e.push(n);n=this.J;var r=t.type||t;if("string"==typeof t?t=new bt(t,n):t instanceof bt?t.target=t.target||n:(s=t,tt(t=new bt(r,n),s)),s=!0,e)for(var i=e.length-1;0<=i;i--)var o=t.a=e[i],s=Bt(o,r,!0,t)&&s;if(s=Bt(o=t.a=n,r,!0,t)&&s,s=Bt(o,r,!1,t)&&s,e)for(i=0;i<e.length;i++)s=Bt(o=t.a=e[i],r,!1,t)&&s;return s},T.C=function(){if(qt.M.C.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)_t(n[r]);delete e.a[t],e.b--}}this.A=null},T.ra=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},T.sa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Gt=_.JSON.stringify;function Wt(){this.b=this.a=null}var Ht,zt=(Yt.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},new Yt(function(){return new $t},function(t){t.reset()},100));function Yt(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}function $t(){this.next=this.b=this.a=null}function Xt(t){_.setTimeout(function(){throw t},0)}function Qt(t,e){var n;Ht||(n=_.Promise.resolve(void 0),Ht=function(){n.then(Zt)}),Kt||(Ht(),Kt=!0),Jt.add(t,e)}Wt.prototype.add=function(t,e){var n=zt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},$t.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var Kt=!($t.prototype.reset=function(){this.next=this.b=this.a=null}),Jt=new Wt;function Zt(){for(var t,e,n;n=e=void 0,n=null,(e=Jt).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){Xt(t)}var r=zt;r.g(t),r.b<r.f&&(r.b++,t.next=r.a,r.a=t)}Kt=!1}function te(t,e){qt.call(this),this.b=t||1,this.a=e||_,this.f=C(this.Ua,this),this.g=M()}function ee(t){t.Z=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function ne(t,e,n){if("function"==R(t))n&&(t=C(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=C(t.handleEvent,t)}return 2147483647<Number(e)?-1:_.setTimeout(t,e||0)}function re(t,e,n){F.call(this),this.f=null!=n?C(t,n):t,this.c=e,this.b=C(this.Pa,this),this.a=[]}function ie(t){t.T=ne(t.b,t.c),t.f.apply(null,t.a)}function oe(t){F.call(this),this.b=t,this.a={}}x(te,qt),(T=te.prototype).Z=!1,T.L=null,T.Ua=function(){var t;this.Z&&(0<(t=M()-this.g)&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.Z&&(ee(this),this.start())))},T.start=function(){this.Z=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=M())},T.C=function(){te.M.C.call(this),ee(this),delete this.a},x(re,F),(T=re.prototype).ba=!1,T.T=null,T.Ia=function(t){this.a=arguments,this.T?this.ba=!0:ie(this)},T.C=function(){re.M.C.call(this),this.T&&(_.clearTimeout(this.T),this.T=null,this.ba=!1,this.a=[])},T.Pa=function(){this.T=null,this.ba&&(this.ba=!1,ie(this))},x(oe,F);var se=[];function ae(t,e,n,r){Array.isArray(n)||(n&&(se[0]=n.toString()),n=se);for(var i=0;i<n.length;i++){var o=Pt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function ue(t){K(t.a,function(t,e){this.a.hasOwnProperty(e)&&Vt(t)},t),t.a={}}function he(){}oe.prototype.C=function(){oe.M.C.call(this),ue(this)},oe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ce=null;function le(){return ce=ce||new qt}function fe(t){bt.call(this,"serverreachability",t)}function pe(){var t=le();t.dispatchEvent(new fe(t))}function de(t){bt.call(this,"statevent",t)}function ye(){var t=le();t.dispatchEvent(new de(t))}function ve(t){bt.call(this,"timingevent",t)}function ge(t,e){if("function"!=R(t))throw Error("Fn must not be null and must be a function");return _.setTimeout(function(){t()},e)}x(fe,bt),x(de,bt),x(ve,bt);var me={NO_ERROR:0,Va:1,bb:2,ab:3,Ya:4,$a:5,cb:6,za:7,TIMEOUT:8,gb:9},we={Xa:"complete",kb:"success",Aa:"error",za:"abort",ib:"ready",jb:"readystatechange",TIMEOUT:"timeout",eb:"incrementaldata",hb:"progress",Za:"downloadprogress",lb:"uploadprogress"};function be(){}function Ee(t){var e;return(e=t.a)||(e=t.a={}),e}function Ie(){}be.prototype.a=null;var Te,Ne={OPEN:"a",Wa:"b",Aa:"c",fb:"d"};function Ae(){bt.call(this,"d")}function _e(){bt.call(this,"c")}function Se(){}function Re(t,e,n){this.g=t,this.W=e,this.U=n||1,this.G=new oe(this),this.N=De,t=at?125:void 0,this.O=new te(t),this.m=null,this.b=!1,this.j=this.A=this.f=this.B=this.s=this.P=this.h=null,this.i=[],this.a=null,this.w=0,this.c=this.v=null,this.H=-1,this.l=!1,this.J=0,this.D=null,this.o=this.R=this.F=!1}x(Ae,bt),x(_e,bt),x(Se,be),Te=new Se;var De=45e3,Le={},Oe={};function Pe(t,e,n){t.B=1,t.f=Ze(Ye(e)),t.j=n,t.F=!0,ke(t,null)}function ke(t,e){t.s=M(),Ce(t),t.A=Ye(t.f);var n=t.A,r=t.U;Array.isArray(r)||(r=[String(r)]),pn(n.b,"t",r),t.w=0,t.a=ir(t.g,t.g.w?e:null),0<t.J&&(t.D=new re(C(t.ya,t,t.a),t.J)),ae(t.G,t.a,"readystatechange",t.Sa),e=t.m?J(t.m):{},t.j?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.$(t.A,t.v,t.j,e)):(t.v="GET",t.a.$(t.A,t.v,null,e)),pe()}function Ve(t,e,n){for(var r,i,o,s,a=!0;!t.l&&t.w<n.length;){var u=(i=n,s=o=void 0,o=(r=t).w,-1==(s=i.indexOf("\n",o))?Oe:(o=Number(i.substring(o,s)),isNaN(o)?Le:(s+=1)+o>i.length?Oe:(i=i.substr(s,o),r.w=s+o,i)));if(u==Oe){4==e&&(t.c=4,ye(),a=!1);break}if(u==Le){t.c=4,ye(),a=!1;break}je(t,u)}4==e&&0==n.length&&(t.c=1,ye(),a=!1),t.b=t.b&&a,a||(Fe(t),xe(t))}function Ce(t){t.P=M()+t.N,Ue(t,t.N)}function Ue(t,e){if(null!=t.h)throw Error("WatchDog timer not null");t.h=ge(C(t.Qa,t),e)}function Me(t){t.h&&(_.clearTimeout(t.h),t.h=null)}function xe(t){0==t.g.u||t.l||Zn(t.g,t)}function Fe(t){Me(t);var e=t.D;e&&"function"==typeof e.da&&e.da(),t.D=null,ee(t.O),ue(t.G),t.a&&(e=t.a,t.a=null,e.abort(),e.da())}function je(t,e){try{var n,r,i,o,s,a,u,h,c,l,f=t.g;if(0!=f.u&&(f.a==t||bn(f.b,t)))if(f.A=t.H,!t.o&&bn(f.b,t)&&3==f.u){try{var p=f.ja.a.parse(e)}catch(t){p=null}if(Array.isArray(p)&&3==p.length){var d=p;if(0==d[0]){t:if(!f.i){if(f.a){if(!(f.a.s+3e3<t.s))break t;Jn(f),f.a.cancel(),f.a=null}Kn(f),ye()}}else f.ia=d[1],0<f.ia-f.G&&d[2]<37500&&f.U&&0==f.m&&!f.l&&(f.l=ge(C(f.Na,f),6e3));if(wn(f.b)<=1&&f.O){try{f.O()}catch(t){}f.O=void 0}}else er(f,11)}else if(!t.o&&f.a!=t||Jn(f),!W(e))for(e=p=f.ja.a.parse(e),p=0;p<e.length;p++){d=e[p],f.G=d[0],d=d[1],2==f.u?"c"==d[0]?(f.B=d[1],f.R=d[2],null!=(n=d[3])&&(f.oa=n),null!=(r=d[5])&&"number"==typeof r&&0<r&&(f.D=1.5*r),i=f,(o=t.a)&&(!(s=o.a?o.a.getResponseHeader("X-Client-Wire-Protocol"):null)||!(a=i.b).a&&(Y(s,"spdy")||Y(s,"quic")||Y(s,"h2"))&&(a.f=a.g,a.a=new Set,a.b&&(En(a,a.b),a.b=null)),!i.s||(u=o.a?o.a.getResponseHeader("X-HTTP-Session-Id"):null)&&(i.ha=u,Je(i.v,i.s,u))),f.u=3,f.c&&f.c.na(),h=t,(i=f).ea=rr(i,i.w?i.R:null,i.P),h.o?(In(i.b,h),c=h,(l=i.D)&&c.setTimeout(l),c.h&&(Me(c),Ce(c)),i.a=h):Qn(i),0<f.f.length&&zn(f)):"stop"!=d[0]&&"close"!=d[0]||er(f,7):3==f.u&&("stop"==d[0]||"close"==d[0]?"stop"==d[0]?er(f,7):Gn(f):"noop"!=d[0]&&f.c&&f.c.ma(d),f.m=0)}pe()}catch(t){}}function qe(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(D(t)||"string"==typeof t)q(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.I&&"function"==typeof t.I)n=void 0;else if(D(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.I&&"function"==typeof t.I)return t.I();if("string"==typeof t)return t.split("");if(D(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Be(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Be)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ge(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];We(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)We(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function We(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(T=Re.prototype).setTimeout=function(t){this.N=t},T.Sa=function(t){t=t.target;var e=this.D;e&&3==Fn(t)?e.Ia():this.ya(t)},T.ya=function(t){try{if(t==this.a)t:{var e=Fn(this.a),n=this.a.qa();this.a.S();if(!(e<3||3==e&&!at&&!this.a.Y())){this.l||4!=e||7==n||pe(),Me(this);var r=this.a.S();this.H=r;var i=this.a.Y();if(this.b=200==r){if(this.R&&!this.o){e:{if(this.a){var o,s=this.a;if((o=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(o)){var a=o;break e}}a=null}if(!a){this.b=!1,this.c=3,ye(),Fe(this),xe(this);break t}this.o=!0,je(this,a)}this.F?(Ve(this,e,i),at&&this.b&&3==e&&(ae(this.G,this.O,"tick",this.Ra),this.O.start())):je(this,i),4==e&&Fe(this),this.b&&!this.l&&(4==e?Zn(this.g,this):(this.b=!1,Ce(this)))}else 400==r&&0<i.indexOf("Unknown SID")?this.c=3:this.c=0,ye(),Fe(this),xe(this)}}}catch(t){}},T.Ra=function(){var t,e;this.a&&(t=Fn(this.a),e=this.a.Y(),this.w<e.length&&(Me(this),Ve(this,t,e),this.b&&4!=t&&Ce(this)))},T.cancel=function(){this.l=!0,Fe(this)},T.Qa=function(){this.h=null;var t=M();0<=t-this.P?(2!=this.B&&(pe(),ye()),Fe(this),this.c=2,xe(this)):Ue(this,this.P-t)},(T=Be.prototype).I=function(){Ge(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},T.K=function(){return Ge(this),this.a.concat()},T.get=function(t,e){return We(this.b,t)?this.b[t]:e},T.set=function(t,e){We(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},T.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var He=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ze(t,e){var n;this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof ze?(this.a=void 0!==e?e:t.a,$e(this,t.f),this.j=t.j,Xe(this,t.c),Qe(this,t.h),this.g=t.g,e=t.b,(n=new hn).c=e.c,e.a&&(n.a=new Be(e.a),n.b=e.b),Ke(this,n),this.i=t.i):t&&(n=String(t).match(He))?(this.a=!!e,$e(this,n[1]||"",!0),this.j=tn(n[2]||""),Xe(this,n[3]||"",!0),Qe(this,n[4]),this.g=tn(n[5]||"",!0),Ke(this,n[6]||"",!0),this.i=tn(n[7]||"")):(this.a=!!e,this.b=new hn(null,this.a))}function Ye(t){return new ze(t)}function $e(t,e,n){t.f=n?tn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Xe(t,e,n){t.c=n?tn(e,!0):e}function Qe(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Ke(t,e,n){var r,i;e instanceof hn?(t.b=e,r=t.b,(i=t.a)&&!r.f&&(cn(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(ln(this,e),pn(this,n,t))},r)),r.f=i):(n||(e=en(e,an)),t.b=new hn(e,t.a))}function Je(t,e,n){t.b.set(e,n)}function Ze(t){return Je(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^M()).toString(36)),t}function tn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function en(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,nn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function nn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ze.prototype.toString=function(){var t=[],e=this.f;e&&t.push(en(e,rn,!0),":");var n=this.c;return!n&&"file"!=e||(t.push("//"),(e=this.j)&&t.push(en(e,rn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(en(n,"/"==n.charAt(0)?sn:on,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",en(n,un)),t.join("")};var rn=/[#\/\?@]/g,on=/[#\?:]/g,sn=/[#\?]/g,an=/[#\?@]/g,un=/#/g;function hn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function cn(a){a.a||(a.a=new Be,a.b=0,a.c&&function(t){if(t){t=t.split("&");for(var e=0;e<t.length;e++){var n,r=t[e].indexOf("="),i=null;0<=r?(n=t[e].substring(0,r),i=t[e].substring(r+1)):n=t[e],o=n,s=i?decodeURIComponent(i.replace(/\+/g," ")):"",a.add(decodeURIComponent(o.replace(/\+/g," ")),s)}}var o,s}(a.c))}function ln(t,e){cn(t),e=dn(t,e),We(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,We((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ge(t)))}function fn(t,e){return cn(t),e=dn(t,e),We(t.a.b,e)}function pn(t,e,n){ln(t,e),0<n.length&&(t.c=null,t.a.set(dn(t,e),G(n)),t.b+=n.length)}function dn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function yn(t,e){this.b=t,this.a=e}function vn(t){this.g=t||gn,t=_.PerformanceNavigationTiming?0<(t=_.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(_.ca&&_.ca.ua&&_.ca.ua()&&_.ca.ua().mb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(T=hn.prototype).add=function(t,e){cn(this),this.c=null,t=dn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},T.forEach=function(n,r){cn(this),this.a.forEach(function(t,e){q(t,function(t){n.call(r,t,e,this)},this)},this)},T.K=function(){cn(this);for(var t=this.a.I(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},T.I=function(t){cn(this);var e=[];if("string"==typeof t)fn(this,t)&&(e=B(e,this.a.get(dn(this,t))));else{t=this.a.I();for(var n=0;n<t.length;n++)e=B(e,t[n])}return e},T.set=function(t,e){return cn(this),this.c=null,fn(this,t=dn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},T.get=function(t,e){return t&&0<(t=this.I(t)).length?String(t[0]):e},T.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.I(r),o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.c=t.join("&")};var gn=10;function mn(t){return t.b||t.a&&t.a.size>=t.f}function wn(t){return t.b?1:t.a?t.a.size:0}function bn(t,e){return t.b?t.b==e:t.a&&t.a.has(e)}function En(t,e){t.a?t.a.add(e):t.b=e}function In(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Tn(t){var e,n;if(null!=t.b)return t.c.concat(t.b.i);if(null==t.a||0===t.a.size)return G(t.c);var r=t.c;try{for(var i=I(t.a.values()),o=i.next();!o.done;o=i.next())var s=o.value,r=r.concat(s.i)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Nn(){}function An(){this.a=new Nn}function _n(t,r,e){var i=e||"";try{qe(t,function(t,e){var n=t;L(t)&&(n=Gt(t)),r.push(i+e+"="+encodeURIComponent(n))})}catch(t){throw r.push(i+"type="+encodeURIComponent("_badmap")),t}}function Sn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}vn.prototype.cancel=function(){var t,e;if(this.c=Tn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=I(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Nn.prototype.stringify=function(t){return _.JSON.stringify(t,void 0)},Nn.prototype.parse=function(t){return _.JSON.parse(t,void 0)};var Rn=_.JSON.parse;function Dn(t){qt.call(this),this.headers=new Be,this.G=t||null,this.b=!1,this.s=this.a=null,this.D="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.H=Ln,this.B=this.F=!1}x(Dn,qt);var Ln="",On=/^https?$/i,Pn=["POST","PUT"];function kn(t){return"content-type"==t.toLowerCase()}function Vn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Cn(t),Mn(t)}function Cn(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Un(t){if(t.b&&void 0!==A&&(!t.s[1]||4!=Fn(t)||2!=t.S()))if(t.l&&4==Fn(t))ne(t.va,0,t);else if(t.dispatchEvent("readystatechange"),4==Fn(t)){t.b=!1;try{var e,n,r,i,o=t.S();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}if((e=s)||((n=0===o)&&(!(i=String(t.D).match(He)[1]||null)&&_.self&&_.self.location&&(i=(r=_.self.location.protocol).substr(0,r.length-1)),n=!On.test(i?i.toLowerCase():"")),e=n),e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var a=2<Fn(t)?t.a.statusText:""}catch(t){a=""}t.f=a+" ["+t.S()+"]",Cn(t)}}finally{Mn(t)}}}function Mn(t,e){if(t.a){xn(t);var n=t.a,r=t.s[0]?S:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function xn(t){t.a&&t.B&&(t.a.ontimeout=null),t.m&&(_.clearTimeout(t.m),t.m=null)}function Fn(t){return t.a?t.a.readyState:0}function jn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}var i;r||(i="",K(n,function(t,e){i+=e,i+=":",i+=t,i+="\r\n"}),n=i,"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Je(t,e,n))}function qn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Bn(t){this.f=[],this.R=this.ea=this.v=this.P=this.a=this.ha=this.s=this.N=this.h=this.F=this.j=null,this.Fa=this.H=0,this.Ca=qn("failFast",!1,t),this.U=this.l=this.i=this.g=this.c=null,this.W=!0,this.A=this.ia=this.G=-1,this.J=this.m=this.o=0,this.Ba=qn("baseRetryDelayMs",5e3,t),this.Ga=qn("retryDelaySeedMs",1e4,t),this.Da=qn("forwardChannelMaxRetries",2,t),this.ga=qn("forwardChannelRequestTimeoutMs",2e4,t),this.Ea=t&&t.nb||void 0,this.D=void 0,this.w=t&&t.supportsCrossDomainXhr||!1,this.B="",this.b=new vn(t&&t.concurrentRequestLimit),this.ja=new An,this.fa=t&&t.fastHandshake||!1,t&&t.forceLongPolling&&(this.W=!1),this.O=void 0}function Gn(t){var e,n;Wn(t),3==t.u&&(e=t.H++,Je(n=Ye(t.v),"SID",t.B),Je(n,"RID",e),Je(n,"TYPE","terminate"),$n(t,n),(e=new Re(t,e,void 0)).B=2,e.f=Ze(Ye(n)),n=!1,_.navigator&&_.navigator.sendBeacon&&(n=_.navigator.sendBeacon(e.f.toString(),"")),!n&&_.Image&&((new Image).src=e.f,n=!0),n||(e.a=ir(e.g,null),e.a.$(e.f)),e.s=M(),Ce(e)),nr(t)}function Wn(t){t.a&&(t.a.cancel(),t.a=null),t.i&&(_.clearTimeout(t.i),t.i=null),Jn(t),t.b.cancel(),t.g&&("number"==typeof t.g&&_.clearTimeout(t.g),t.g=null)}function Hn(t,e){t.f.push(new yn(t.Fa++,e)),3==t.u&&zn(t)}function zn(t){mn(t.b)||t.g||(t.g=!0,Qt(t.xa,t),t.o=0)}function Yn(t,e){var n=e?e.W:t.H++,r=Ye(t.v);Je(r,"SID",t.B),Je(r,"RID",n),Je(r,"AID",t.G),$n(t,r),t.h&&t.j&&jn(r,t.h,t.j),n=new Re(t,n,t.o+1),null===t.h&&(n.m=t.j),e&&(t.f=e.i.concat(t.f)),e=Xn(t,n,1e3),n.setTimeout(Math.round(.5*t.ga)+Math.round(.5*t.ga*Math.random())),En(t.b,n),Pe(n,r,e)}function $n(t,n){t.c&&qe({},function(t,e){Je(n,e,t)})}function Xn(t,e,n){n=Math.min(t.f.length,n);var r=t.c?C(t.c.Ha,t.c,t):null;t:for(var i=t.f,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var h=i[u].b,c=i[u].a;if((h-=o)<0)o=Math.max(0,i[u].b-100),a=!1;else try{_n(c,s,"req"+h+"_")}catch(t){r&&r(c)}}if(a){r=s.join("&");break t}}return t=t.f.splice(0,n),e.i=t,r}function Qn(t){t.a||t.i||(t.J=1,Qt(t.wa,t),t.m=0)}function Kn(t){return!(t.a||t.i||3<=t.m)&&(t.J++,t.i=ge(C(t.wa,t),tr(t,t.m)),t.m++,1)}function Jn(t){null!=t.l&&(_.clearTimeout(t.l),t.l=null)}function Zn(t,e){var n,r=null;if(t.a==e){Jn(t),t.a=null;var i=2}else{if(!bn(t.b,e))return;r=e.i,In(t.b,e),i=1}if(t.A=e.H,0!=t.u)if(e.b){1==i?(r=e.j?e.j.length:0,e=M()-e.s,n=t.o,(i=le()).dispatchEvent(new ve(i)),zn(t)):Qn(t)}else if(3==(n=e.c)||0==n&&0<t.A||!(1==i&&function(t,e){if(!(wn(t.b)>=t.b.f-(t.g?1:0))){if(t.g)return t.f=e.i.concat(t.f),1;if(!(1==t.u||2==t.u||t.o>=(t.Ca?0:t.Da)))return t.g=ge(C(t.xa,t,e),tr(t,t.o)),t.o++,1}}(t,e)||2==i&&Kn(t)))switch(r&&0<r.length&&(e=t.b,e.c=e.c.concat(r)),n){case 1:er(t,5);break;case 4:er(t,10);break;case 3:er(t,6);break;default:er(t,2)}}function tr(t,e){var n=t.Ba+Math.floor(Math.random()*t.Ga);return t.c||(n*=2),n*e}function er(t,e){var n,r,i,o,s,a;2==e?(n=null,t.c&&(n=null),r=C(t.Ta,t),n||(n=new ze("//www.google.com/images/cleardot.gif"),_.location&&"http"==_.location.protocol||$e(n,"https"),Ze(n)),i=n.toString(),o=r,a=new he,_.Image?((s=new Image).onload=U(Sn,a,s,"TestLoadImage: loaded",!0,o),s.onerror=U(Sn,a,s,"TestLoadImage: error",!1,o),s.onabort=U(Sn,a,s,"TestLoadImage: abort",!1,o),s.ontimeout=U(Sn,a,s,"TestLoadImage: timeout",!1,o),_.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i):o(!1)):ye(),t.u=0,t.c&&t.c.la(e),nr(t),Wn(t)}function nr(t){t.u=0,t.A=-1,t.c&&(0==Tn(t.b).length&&0==t.f.length||(t.b.c.length=0,G(t.f),t.f.length=0),t.c.ka())}function rr(t,e,n){var r,i,o,s,a,u,h,c=(r=n)instanceof ze?Ye(r):new ze(r,void 0);return""!=c.c?(e&&Xe(c,e+"."+c.c),Qe(c,c.h)):(o=(i=_.location).protocol,s=e?e+"."+i.hostname:i.hostname,a=+i.port,u=n,h=new ze(null,void 0),o&&$e(h,o),s&&Xe(h,s),a&&Qe(h,a),u&&(h.g=u),c=h),t.N&&K(t.N,function(t,e){Je(c,e,t)}),e=t.s,n=t.ha,e&&n&&Je(c,e,n),Je(c,"VER",t.oa),$n(t,c),c}function ir(t,e){if(e&&!t.w)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Dn(t.Ea)).F=t.w,e}function or(){}function sr(){if(ot&&!(10<=Number(vt)))throw Error("Environmental error: no available transport.")}function ar(t,e){qt.call(this),this.a=new Bn(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.j=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.pa&&(t?t["X-WebChannel-Client-Profile"]=e.pa:t={"X-WebChannel-Client-Profile":e.pa}),this.a.F=t,(t=e&&e.httpHeadersOverwriteParam)&&!W(t)&&(this.a.h=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!W(e)&&(this.a.s=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new cr(this)}function ur(t){Ae.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function hr(){_e.call(this),this.status=1}function cr(t){this.a=t}(T=Dn.prototype).$=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);e=e?e.toUpperCase():"GET",this.D=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.G?Ee(this.G):Ee(Te),this.a.onreadystatechange=C(this.va,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(t){return void Vn(this,t)}t=n||"";var i,o=new Be(this.headers);r&&qe(r,function(t,e){o.set(e,t)}),r=function(t){t:{for(var e=kn,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(o.K()),n=_.FormData&&t instanceof _.FormData,0<=j(Pn,e)&&!r&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.H&&(this.a.responseType=this.H),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{xn(this),0<this.o&&((this.B=(i=this.a,ot&&yt(9)&&"number"==typeof i.timeout&&void 0!==i.ontimeout))?(this.a.timeout=this.o,this.a.ontimeout=C(this.ta,this)):this.m=ne(this.ta,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Vn(this,t)}},T.ta=function(){void 0!==A&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},T.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Mn(this))},T.C=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Mn(this,!0)),Dn.M.C.call(this)},T.va=function(){this.j||(this.w||this.l||this.g?Un(this):this.Oa())},T.Oa=function(){Un(this)},T.S=function(){try{return 2<Fn(this)?this.a.status:-1}catch(t){return-1}},T.Y=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},T.Ja=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Rn(e)}},T.qa=function(){return this.h},T.Ma=function(){return"string"==typeof this.f?this.f:String(this.f)},(T=Bn.prototype).oa=8,T.u=1,T.xa=function(t){if(this.g)if(this.g=null,1==this.u){if(!t){this.H=Math.floor(1e5*Math.random()),t=this.H++;var e,n=new Re(this,t,void 0),r=this.j;if(this.F&&(r?tt(r=J(r),this.F):r=this.F),null===this.h&&(n.m=r),this.fa)t:{for(var i=e=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.f.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Xn(this,n,e),Je(i=Ye(this.v),"RID",t),Je(i,"CVER",22),this.s&&Je(i,"X-HTTP-Session-Id",this.s),$n(this,i),this.h&&r&&jn(i,this.h,r),En(this.b,n),this.fa?(Je(i,"$req",e),Je(i,"SID","null"),n.R=!0,Pe(n,i,null)):Pe(n,i,e),this.u=2}}else 3==this.u&&(t?Yn(this,t):0==this.f.length||mn(this.b)||Yn(this))},T.wa=function(){this.i=null,this.a=new Re(this,"rpc",this.J),null===this.h&&(this.a.m=this.j),this.a.J=0;var t=Ye(this.ea);Je(t,"RID","rpc"),Je(t,"SID",this.B),Je(t,"CI",this.U?"0":"1"),Je(t,"AID",this.G),$n(this,t),Je(t,"TYPE","xmlhttp"),this.h&&this.j&&jn(t,this.h,this.j),this.D&&this.a.setTimeout(this.D);var e=this.a,n=this.R;e.B=1,e.f=Ze(Ye(t)),e.j=null,e.F=!0,ke(e,n)},T.Na=function(){null!=this.l&&(this.l=null,this.a.cancel(),this.a=null,Kn(this),ye())},T.Ta=function(t){ye()},(T=or.prototype).na=function(){},T.ma=function(){},T.la=function(){},T.ka=function(){},T.Ha=function(){},sr.prototype.a=function(t,e){return new ar(t,e)},x(ar,qt),(T=ar.prototype).addEventListener=function(t,e,n,r){ar.M.addEventListener.call(this,t,e,n,r)},T.removeEventListener=function(t,e,n,r){ar.M.removeEventListener.call(this,t,e,n,r)},T.Ka=function(){this.a.c=this.f,this.h&&(this.a.w=!0);var t=this.a,e=this.l,n=this.b||void 0;ye(),t.P=e,t.N=n||{},t.U=t.W,t.v=rr(t,null,t.P),zn(t)},T.close=function(){Gn(this.a)},T.La=function(t){var e;"string"==typeof t?((e={}).__data__=t,Hn(this.a,e)):this.g?((e={}).__data__=Gt(t),Hn(this.a,e)):Hn(this.a,t)},T.C=function(){this.a.c=null,delete this.f,Gn(this.a),delete this.a,ar.M.C.call(this)},x(ur,Ae),x(hr,_e),x(cr,or),cr.prototype.na=function(){this.a.dispatchEvent("a")},cr.prototype.ma=function(t){this.a.dispatchEvent(new ur(t))},cr.prototype.la=function(t){this.a.dispatchEvent(new hr)},cr.prototype.ka=function(){this.a.dispatchEvent("b")},sr.prototype.createWebChannel=sr.prototype.a,ar.prototype.send=ar.prototype.La,ar.prototype.open=ar.prototype.Ka,ar.prototype.close=ar.prototype.close,me.NO_ERROR=0,me.TIMEOUT=8,me.HTTP_ERROR=6,we.COMPLETE="complete",(Ie.EventType=Ne).OPEN="a",Ne.CLOSE="b",Ne.ERROR="c",Ne.MESSAGE="d",qt.prototype.listen=qt.prototype.ra,Dn.prototype.listenOnce=Dn.prototype.sa,Dn.prototype.getLastError=Dn.prototype.Ma,Dn.prototype.getLastErrorCode=Dn.prototype.qa,Dn.prototype.getStatus=Dn.prototype.S,Dn.prototype.getResponseJson=Dn.prototype.Ja,Dn.prototype.getResponseText=Dn.prototype.Y,Dn.prototype.send=Dn.prototype.$;var lr={createWebChannelTransport:function(){return new sr},ErrorCode:me,EventType:we,WebChannel:Ie,XhrIo:Dn},fr=lr.createWebChannelTransport,pr=lr.ErrorCode,dr=lr.EventType,yr=lr.WebChannel,vr=lr.XhrIo,gr=(mr.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},mr.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},mr.prototype.setServiceProps=function(t){return this.serviceProps=t,this},mr);function mr(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var wr="7.17.1-20206244562",br=new h("@firebase/firestore");function Er(){return br.logLevel}function Ir(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];br.logLevel<=p.DEBUG&&(e=n.map(Nr),br.debug.apply(br,v(["Firestore ("+wr+"): "+t],e)))}function Tr(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];br.logLevel<=p.ERROR&&(e=n.map(Nr),br.error.apply(br,v(["Firestore ("+wr+"): "+t],e)))}function Nr(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function Ar(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE ("+wr+") INTERNAL ASSERTION FAILED: "+t;throw Tr(e),new Error(e)}function _r(t){t||Ar()}function Sr(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Rr=(Dr.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Sr(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},Dr);function Dr(){}function Lr(t,e){return t<e?-1:e<t?1:0}function Or(t,n,r){return t.length===n.length&&t.every(function(t,e){return r(t,n[e])})}function Pr(t,e,n,r,i){this.s=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i}var kr=(Object.defineProperty(Vr.prototype,"i",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),Vr.prototype.isEqual=function(t){return t instanceof Vr&&t.projectId===this.projectId&&t.database===this.database},Vr.prototype.o=function(t){return Lr(this.projectId,t.projectId)||Lr(this.database,t.database)},Vr);function Vr(t,e){this.projectId=t,this.database=e||"(default)"}function Cr(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ur(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Mr(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var xr,Fr,jr,qr=(ii.prototype.get=function(t){var e=this.h(t),n=this.l[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.u(s,t))return a}},ii.prototype.has=function(t){return void 0!==this.get(t)},ii.prototype.set=function(t,e){var n=this.h(t),r=this.l[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.u(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.l[n]=[[t,e]]},ii.prototype.delete=function(t){var e=this.h(t),n=this.l[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.u(n[r][0],t))return 1===n.length?delete this.l[e]:n.splice(r,1),!0;return!1},ii.prototype.forEach=function(a){Ur(this.l,function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],s=i[1];a(o,s)}})},ii.prototype._=function(){return Mr(this.l)},ii),Br={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Gr=(n(ri,jr=Error),ri),Wr=(ni.now=function(){return ni.fromMillis(Date.now())},ni.fromDate=function(t){return ni.fromMillis(t.getTime())},ni.fromMillis=function(t){var e=Math.floor(t/1e3);return new ni(e,1e6*(t-1e3*e))},ni.prototype.toDate=function(){return new Date(this.toMillis())},ni.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},ni.prototype.T=function(t){return this.seconds===t.seconds?Lr(this.nanoseconds,t.nanoseconds):Lr(this.seconds,t.seconds)},ni.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},ni.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},ni.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},ni),Hr=(ei.m=function(t){return new ei(t)},ei.min=function(){return new ei(new Wr(0,0))},ei.prototype.o=function(t){return this.timestamp.T(t.timestamp)},ei.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},ei.prototype.I=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},ei.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},ei.prototype.R=function(){return this.timestamp},ei),zr=(Object.defineProperty(ti.prototype,"length",{get:function(){return this.A},enumerable:!1,configurable:!0}),ti.prototype.isEqual=function(t){return 0===ti.P(this,t)},ti.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof ti?t.forEach(function(t){e.push(t)}):e.push(t),this.V(e)},ti.prototype.limit=function(){return this.offset+this.length},ti.prototype.p=function(t){return t=void 0===t?1:t,this.V(this.segments,this.offset+t,this.length-t)},ti.prototype.g=function(){return this.V(this.segments,this.offset,this.length-1)},ti.prototype.v=function(){return this.segments[this.offset]},ti.prototype.S=function(){return this.get(this.length-1)},ti.prototype.get=function(t){return this.segments[this.offset+t]},ti.prototype._=function(){return 0===this.length},ti.prototype.C=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},ti.prototype.D=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},ti.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},ti.prototype.F=function(){return this.segments.slice(this.offset,this.limit())},ti.P=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0},ti),Yr=(n(Zr,Fr=zr),Zr.prototype.V=function(t,e,n){return new Zr(t,e,n)},Zr.prototype.$=function(){return this.F().join("/")},Zr.prototype.toString=function(){return this.$()},Zr.N=function(t){if(0<=t.indexOf("//"))throw new Gr(Br.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new Zr(t.split("/").filter(function(t){return 0<t.length}))},Zr.k=function(){return new Zr([])},Zr),$r=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Xr=(n(Jr,xr=zr),Jr.prototype.V=function(t,e,n){return new Jr(t,e,n)},Jr.O=function(t){return $r.test(t)},Jr.prototype.$=function(){return this.F().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),Jr.O(t)||(t="`"+t+"`"),t}).join(".")},Jr.prototype.toString=function(){return this.$()},Jr.prototype.L=function(){return 1===this.length&&"__name__"===this.get(0)},Jr.M=function(){return new Jr(["__name__"])},Jr.q=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new Gr(Br.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var s=t[r];if("\\"===s){if(r+1===t.length)throw new Gr(Br.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[r+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new Gr(Br.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=a,r+=2}else"`"===s?o=!o:"."!==s||o?n+=s:i(),r++}if(i(),o)throw new Gr(Br.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Jr(e)},Jr.k=function(){return new Jr([])},Jr),Qr=(Kr.U=function(t){return new Kr(Yr.N(t).p(5))},Kr.prototype.B=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},Kr.prototype.isEqual=function(t){return null!==t&&0===Yr.P(this.path,t.path)},Kr.prototype.toString=function(){return this.path.toString()},Kr.P=function(t,e){return Yr.P(t.path,e.path)},Kr.W=function(t){return t.length%2==0},Kr.j=function(t){return new Kr(new Yr(t.slice()))},Kr);function Kr(t){this.path=t}function Jr(){return null!==xr&&xr.apply(this,arguments)||this}function Zr(){return null!==Fr&&Fr.apply(this,arguments)||this}function ti(t,e,n){void 0===e?e=0:e>t.length&&Ar(),void 0===n?n=t.length-e:n>t.length-e&&Ar(),this.segments=t,this.offset=e,this.A=n}function ei(t){this.timestamp=t}function ni(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new Gr(Br.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new Gr(Br.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Gr(Br.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new Gr(Br.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}function ri(t,e){var n=this;return(n=jr.call(this,e)||this).code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function ii(t,e){this.h=t,this.u=e,this.l={}}function oi(t){return null==t}function si(t){return-0===t&&1/t==-1/0}var ai=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.G=null};function ui(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new ai(t,e,n,r,i,o,s)}function hi(t){var e,n=t;return null===n.G&&(e=n.path.$(),null!==n.collectionGroup&&(e+="|cg:"+n.collectionGroup),e+="|f:",e+=n.filters.map(function(t){return(e=t).field.$()+e.op.toString()+lo(e.value);var e}).join(","),e+="|ob:",e+=n.orderBy.map(function(t){return(e=t).field.$()+e.dir;var e}).join(","),oi(n.limit)||(e+="|l:",e+=n.limit),n.startAt&&(e+="|lb:",e+=Ra(n.startAt)),n.endAt&&(e+="|ub:",e+=Ra(n.endAt)),n.G=e),n.G}function ci(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n,r,i,o,s=0;s<t.orderBy.length;s++)if(n=t.orderBy[s],r=e.orderBy[s],n.dir!==r.dir||!n.field.isEqual(r.field))return!1;if(t.filters.length!==e.filters.length)return!1;for(var a=0;a<t.filters.length;a++)if(i=t.filters[a],o=e.filters[a],!(i instanceof ca&&o instanceof ca&&i.op===o.op&&i.field.isEqual(o.field)&&ao(i.value,o.value)))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!La(t.startAt,e.startAt)&&La(t.endAt,e.endAt)}function li(t){return Qr.W(t.path)&&null===t.collectionGroup&&0===t.filters.length}var fi=(pi.fromBase64String=function(t){return new pi(atob(t))},pi.fromUint8Array=function(t){return new pi(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t))},pi.prototype.toBase64=function(){return t=this.K,btoa(t);var t},pi.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.K)},pi.prototype.H=function(){return 2*this.K.length},pi.prototype.o=function(t){return Lr(this.K,t.K)},pi.prototype.isEqual=function(t){return this.K===t.K},pi);function pi(t){this.K=t}function di(t){this.count=t}fi.Y=new fi("");var yi,vi,gi=(mi.prototype.Z=function(t){return new mi(this.target,this.targetId,this.X,t,this.J,this.lastLimboFreeSnapshotVersion,this.resumeToken)},mi.prototype.tt=function(t,e){return new mi(this.target,this.targetId,this.X,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},mi.prototype.et=function(t){return new mi(this.target,this.targetId,this.X,this.sequenceNumber,this.J,t,this.resumeToken)},mi);function mi(t,e,n,r,i,o,s){void 0===i&&(i=Hr.min()),void 0===o&&(o=Hr.min()),void 0===s&&(s=fi.Y),this.target=t,this.targetId=e,this.X=n,this.sequenceNumber=r,this.J=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}function wi(t){switch(t){case Br.OK:return Ar();case Br.CANCELLED:case Br.UNKNOWN:case Br.DEADLINE_EXCEEDED:case Br.RESOURCE_EXHAUSTED:case Br.INTERNAL:case Br.UNAVAILABLE:case Br.UNAUTHENTICATED:return;case Br.INVALID_ARGUMENT:case Br.NOT_FOUND:case Br.ALREADY_EXISTS:case Br.PERMISSION_DENIED:case Br.FAILED_PRECONDITION:case Br.ABORTED:case Br.OUT_OF_RANGE:case Br.UNIMPLEMENTED:case Br.DATA_LOSS:return 1;default:return Ar()}}function bi(t){if(void 0===t)return Tr("GRPC error has no .code"),Br.UNKNOWN;switch(t){case yi.OK:return Br.OK;case yi.CANCELLED:return Br.CANCELLED;case yi.UNKNOWN:return Br.UNKNOWN;case yi.DEADLINE_EXCEEDED:return Br.DEADLINE_EXCEEDED;case yi.RESOURCE_EXHAUSTED:return Br.RESOURCE_EXHAUSTED;case yi.INTERNAL:return Br.INTERNAL;case yi.UNAVAILABLE:return Br.UNAVAILABLE;case yi.UNAUTHENTICATED:return Br.UNAUTHENTICATED;case yi.INVALID_ARGUMENT:return Br.INVALID_ARGUMENT;case yi.NOT_FOUND:return Br.NOT_FOUND;case yi.ALREADY_EXISTS:return Br.ALREADY_EXISTS;case yi.PERMISSION_DENIED:return Br.PERMISSION_DENIED;case yi.FAILED_PRECONDITION:return Br.FAILED_PRECONDITION;case yi.ABORTED:return Br.ABORTED;case yi.OUT_OF_RANGE:return Br.OUT_OF_RANGE;case yi.UNIMPLEMENTED:return Br.UNIMPLEMENTED;case yi.DATA_LOSS:return Br.DATA_LOSS;default:return Ar()}}(vi=yi=yi||{})[vi.OK=0]="OK",vi[vi.CANCELLED=1]="CANCELLED",vi[vi.UNKNOWN=2]="UNKNOWN",vi[vi.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vi[vi.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vi[vi.NOT_FOUND=5]="NOT_FOUND",vi[vi.ALREADY_EXISTS=6]="ALREADY_EXISTS",vi[vi.PERMISSION_DENIED=7]="PERMISSION_DENIED",vi[vi.UNAUTHENTICATED=16]="UNAUTHENTICATED",vi[vi.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vi[vi.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vi[vi.ABORTED=10]="ABORTED",vi[vi.OUT_OF_RANGE=11]="OUT_OF_RANGE",vi[vi.UNIMPLEMENTED=12]="UNIMPLEMENTED",vi[vi.INTERNAL=13]="INTERNAL",vi[vi.UNAVAILABLE=14]="UNAVAILABLE",vi[vi.DATA_LOSS=15]="DATA_LOSS";var Ei=(_i.prototype.nt=function(t,e){return new _i(this.P,this.root.nt(t,e,this.P).copy(null,null,Ti.st,null,null))},_i.prototype.remove=function(t){return new _i(this.P,this.root.remove(t,this.P).copy(null,null,Ti.st,null,null))},_i.prototype.get=function(t){for(var e=this.root;!e._();){var n=this.P(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},_i.prototype.indexOf=function(t){for(var e=0,n=this.root;!n._();){var r=this.P(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},_i.prototype._=function(){return this.root._()},Object.defineProperty(_i.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),_i.prototype.it=function(){return this.root.it()},_i.prototype.rt=function(){return this.root.rt()},_i.prototype.ot=function(t){return this.root.ot(t)},_i.prototype.forEach=function(n){this.ot(function(t,e){return n(t,e),!1})},_i.prototype.toString=function(){var n=[];return this.ot(function(t,e){return n.push(t+":"+e),!1}),"{"+n.join(", ")+"}"},_i.prototype.ht=function(t){return this.root.ht(t)},_i.prototype.at=function(){return new Ii(this.root,null,this.P,!1)},_i.prototype.ut=function(t){return new Ii(this.root,t,this.P,!1)},_i.prototype.ct=function(){return new Ii(this.root,null,this.P,!0)},_i.prototype.lt=function(t){return new Ii(this.root,t,this.P,!0)},_i),Ii=(Ai.prototype.dt=function(){var t=this.ft.pop(),e={key:t.key,value:t.value};if(this._t)for(t=t.left;!t._();)this.ft.push(t),t=t.right;else for(t=t.right;!t._();)this.ft.push(t),t=t.left;return e},Ai.prototype.wt=function(){return 0<this.ft.length},Ai.prototype.Tt=function(){if(0===this.ft.length)return null;var t=this.ft[this.ft.length-1];return{key:t.key,value:t.value}},Ai),Ti=(Ni.prototype.copy=function(t,e,n,r,i){return new Ni(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Ni.prototype._=function(){return!1},Ni.prototype.ot=function(t){return this.left.ot(t)||t(this.key,this.value)||this.right.ot(t)},Ni.prototype.ht=function(t){return this.right.ht(t)||t(this.key,this.value)||this.left.ht(t)},Ni.prototype.min=function(){return this.left._()?this:this.left.min()},Ni.prototype.it=function(){return this.min().key},Ni.prototype.rt=function(){return this.right._()?this.key:this.right.rt()},Ni.prototype.nt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.nt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.nt(t,e,n))).Et()},Ni.prototype.It=function(){if(this.left._())return Ni.EMPTY;var t=this;return t.left.Rt()||t.left.left.Rt()||(t=t.At()),(t=t.copy(null,null,null,t.left.It(),null)).Et()},Ni.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left._()||r.left.Rt()||r.left.left.Rt()||(r=r.At()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.Rt()&&(r=r.Pt()),r.right._()||r.right.Rt()||r.right.left.Rt()||(r=r.Vt()),0===e(t,r.key)){if(r.right._())return Ni.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.It())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.Et()},Ni.prototype.Rt=function(){return this.color},Ni.prototype.Et=function(){var t=this;return t.right.Rt()&&!t.left.Rt()&&(t=t.pt()),t.left.Rt()&&t.left.left.Rt()&&(t=t.Pt()),t.left.Rt()&&t.right.Rt()&&(t=t.yt()),t},Ni.prototype.At=function(){var t=this.yt();return t.right.left.Rt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.Pt())).pt()).yt()),t},Ni.prototype.Vt=function(){var t=this.yt();return t.left.left.Rt()&&(t=(t=t.Pt()).yt()),t},Ni.prototype.pt=function(){var t=this.copy(null,null,Ni.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},Ni.prototype.Pt=function(){var t=this.copy(null,null,Ni.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},Ni.prototype.yt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},Ni.prototype.gt=function(){var t=this.vt();return Math.pow(2,t)<=this.size+1},Ni.prototype.vt=function(){if(this.Rt()&&this.left.Rt())throw Ar();if(this.right.Rt())throw Ar();var t=this.left.vt();if(t!==this.right.vt())throw Ar();return t+(this.Rt()?0:1)},Ni);function Ni(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Ni.RED,this.left=null!=r?r:Ni.EMPTY,this.right=null!=i?i:Ni.EMPTY,this.size=this.left.size+1+this.right.size}function Ai(t,e,n,r){this._t=r,this.ft=[];for(var i=1;!t._();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this._t?t.left:t.right;else{if(0===i){this.ft.push(t);break}this.ft.push(t),t=this._t?t.right:t.left}}function _i(t,e){this.P=t,this.root=e||Ti.EMPTY}function Si(){this.size=0}Ti.EMPTY=null,Ti.RED=!0,Ti.st=!1,Ti.EMPTY=(Object.defineProperty(Si.prototype,"key",{get:function(){throw Ar()},enumerable:!1,configurable:!0}),Object.defineProperty(Si.prototype,"value",{get:function(){throw Ar()},enumerable:!1,configurable:!0}),Object.defineProperty(Si.prototype,"color",{get:function(){throw Ar()},enumerable:!1,configurable:!0}),Object.defineProperty(Si.prototype,"left",{get:function(){throw Ar()},enumerable:!1,configurable:!0}),Object.defineProperty(Si.prototype,"right",{get:function(){throw Ar()},enumerable:!1,configurable:!0}),Si.prototype.copy=function(t,e,n,r,i){return this},Si.prototype.nt=function(t,e,n){return new Ti(t,e)},Si.prototype.remove=function(t,e){return this},Si.prototype._=function(){return!0},Si.prototype.ot=function(t){return!1},Si.prototype.ht=function(t){return!1},Si.prototype.it=function(){return null},Si.prototype.rt=function(){return null},Si.prototype.Rt=function(){return!1},Si.prototype.gt=function(){return!0},Si.prototype.vt=function(){return 0},new Si);var Ri=(Pi.prototype.has=function(t){return null!==this.data.get(t)},Pi.prototype.first=function(){return this.data.it()},Pi.prototype.last=function(){return this.data.rt()},Object.defineProperty(Pi.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),Pi.prototype.indexOf=function(t){return this.data.indexOf(t)},Pi.prototype.forEach=function(n){this.data.ot(function(t,e){return n(t),!1})},Pi.prototype.bt=function(t,e){for(var n=this.data.ut(t[0]);n.wt();){var r=n.dt();if(0<=this.P(r.key,t[1]))return;e(r.key)}},Pi.prototype.St=function(t,e){for(var n=void 0!==e?this.data.ut(e):this.data.at();n.wt();)if(!t(n.dt().key))return},Pi.prototype.Ct=function(t){var e=this.data.ut(t);return e.wt()?e.dt().key:null},Pi.prototype.at=function(){return new Di(this.data.at())},Pi.prototype.ut=function(t){return new Di(this.data.ut(t))},Pi.prototype.add=function(t){return this.copy(this.data.remove(t).nt(t,!0))},Pi.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},Pi.prototype._=function(){return this.data._()},Pi.prototype.Dt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},Pi.prototype.isEqual=function(t){if(!(t instanceof Pi))return!1;if(this.size!==t.size)return!1;for(var e=this.data.at(),n=t.data.at();e.wt();){var r=e.dt().key,i=n.dt().key;if(0!==this.P(r,i))return!1}return!0},Pi.prototype.F=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},Pi.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},Pi.prototype.copy=function(t){var e=new Pi(this.P);return e.data=t,e},Pi),Di=(Oi.prototype.dt=function(){return this.Ft.dt().key},Oi.prototype.wt=function(){return this.Ft.wt()},Oi),Li=new Ei(Qr.P);function Oi(t){this.Ft=t}function Pi(t){this.P=t,this.data=new Ei(this.P)}var ki=new Ei(Qr.P);var Vi=new Ei(Qr.P),Ci=new Ri(Qr.P);function Ui(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Ci,r=0,i=t;r<i.length;r++)var o=i[r],n=n.add(o);return n}var Mi=new Ri(Lr);function xi(t,e,n,r){this.Zt=t,this.removedTargetIds=e,this.key=n,this.te=r}function Fi(t,e){this.targetId=t,this.ee=e}function ji(t,e,n,r){void 0===n&&(n=fi.Y),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}var qi=(to.kt=function(t){return new to(t.P)},to.prototype.has=function(t){return null!=this.$t.get(t)},to.prototype.get=function(t){return this.$t.get(t)},to.prototype.first=function(){return this.Nt.it()},to.prototype.last=function(){return this.Nt.rt()},to.prototype._=function(){return this.Nt._()},to.prototype.indexOf=function(t){var e=this.$t.get(t);return e?this.Nt.indexOf(e):-1},Object.defineProperty(to.prototype,"size",{get:function(){return this.Nt.size},enumerable:!1,configurable:!0}),to.prototype.forEach=function(n){this.Nt.ot(function(t,e){return n(t),!1})},to.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.$t.nt(t.key,t),e.Nt.nt(t,null))},to.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.$t.remove(t),this.Nt.remove(e)):this},to.prototype.isEqual=function(t){if(!(t instanceof to))return!1;if(this.size!==t.size)return!1;for(var e=this.Nt.at(),n=t.Nt.at();e.wt();){var r=e.dt().key,i=n.dt().key;if(!r.isEqual(i))return!1}return!0},to.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},to.prototype.copy=function(t,e){var n=new to;return n.P=this.P,n.$t=t,n.Nt=e,n},to),Bi=(Zi.prototype.track=function(t){var e=t.doc.key,n=this.xt.get(e);!n||0!==t.type&&3===n.type?this.xt=this.xt.nt(e,t):3===t.type&&1!==n.type?this.xt=this.xt.nt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.xt=this.xt.nt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.xt=this.xt.nt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.xt=this.xt.remove(e):1===t.type&&2===n.type?this.xt=this.xt.nt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.xt=this.xt.nt(e,{type:2,doc:t.doc}):Ar()},Zi.prototype.Ot=function(){var n=[];return this.xt.ot(function(t,e){n.push(e)}),n},Zi),Gi=(Ji.Bt=function(t,e,n,r){var i=[];return e.forEach(function(t){i.push({type:0,doc:t})}),new Ji(t,e,qi.kt(e),i,n,r,!0,!1)},Object.defineProperty(Ji.prototype,"hasPendingWrites",{get:function(){return!this.Mt._()},enumerable:!1,configurable:!0}),Ji.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.qt===t.qt&&this.Mt.isEqual(t.Mt)&&ia(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Lt.isEqual(t.Lt)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},Ji),Wi=(Ki.Kt=function(t,e){var n=new Map;return n.set(t,Hi.zt(t,e)),new Ki(Hr.min(),n,Mi,Li,Ui())},Ki),Hi=(Qi.zt=function(t,e){return new Qi(fi.Y,e,Ui(),Ui(),Ui())},Qi),zi=(Object.defineProperty(Xi.prototype,"Ht",{get:function(){return this.re},enumerable:!1,configurable:!0}),Object.defineProperty(Xi.prototype,"resumeToken",{get:function(){return this.ie},enumerable:!1,configurable:!0}),Object.defineProperty(Xi.prototype,"he",{get:function(){return 0!==this.ne},enumerable:!1,configurable:!0}),Object.defineProperty(Xi.prototype,"ae",{get:function(){return this.oe},enumerable:!1,configurable:!0}),Xi.prototype.ue=function(t){0<t.H()&&(this.oe=!0,this.ie=t)},Xi.prototype.ce=function(){var n=Ui(),r=Ui(),i=Ui();return this.se.forEach(function(t,e){switch(e){case 0:n=n.add(t);break;case 2:r=r.add(t);break;case 1:i=i.add(t);break;default:Ar()}}),new Hi(this.ie,this.re,n,r,i)},Xi.prototype.le=function(){this.oe=!1,this.se=no()},Xi.prototype._e=function(t,e){this.oe=!0,this.se=this.se.nt(t,e)},Xi.prototype.fe=function(t){this.oe=!0,this.se=this.se.remove(t)},Xi.prototype.de=function(){this.ne+=1},Xi.prototype.we=function(){--this.ne},Xi.prototype.Te=function(){this.oe=!0,this.re=!0},Xi),Yi=($i.prototype.Pe=function(t){for(var e=0,n=t.Zt;e<n.length;e++){var r=n[e];t.te instanceof Bs?this.Ve(r,t.te):t.te instanceof Gs&&this.pe(r,t.key,t.te)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s=o[i];this.pe(s,t.key,t.te)}},$i.prototype.ye=function(n){var r=this;this.ge(n,function(t){var e=r.ve(t);switch(n.state){case 0:r.be(t)&&e.ue(n.resumeToken);break;case 1:e.we(),e.he||e.le(),e.ue(n.resumeToken);break;case 2:e.we(),e.he||r.removeTarget(t);break;case 3:r.be(t)&&(e.Te(),e.ue(n.resumeToken));break;case 4:r.be(t)&&(r.Se(t),e.ue(n.resumeToken));break;default:Ar()}})},$i.prototype.ge=function(t,n){var r=this;0<t.targetIds.length?t.targetIds.forEach(n):this.me.forEach(function(t,e){r.be(e)&&n(e)})},$i.prototype.Ce=function(t){var e,n,r=t.targetId,i=t.ee.count,o=this.De(r);o&&(li(e=o.target)?0===i?(n=new Qr(e.path),this.pe(r,n,new Gs(n,Hr.min()))):_r(1===i):this.Fe(r)!==i&&(this.Se(r),this.Ae=this.Ae.add(r)))},$i.prototype.$e=function(i){var o=this,s=new Map;this.me.forEach(function(t,e){var n,r=o.De(e);r&&(t.Ht&&li(r.target)&&(n=new Qr(r.target.path),null!==o.Ie.get(n)||o.Ne(e,n)||o.pe(e,n,new Gs(n,i))),t.ae&&(s.set(e,t.ce()),t.le()))});var r=Ui();this.Re.forEach(function(t,e){var n=!0;e.St(function(t){var e=o.De(t);return!e||2===e.X||(n=!1)}),n&&(r=r.add(t))});var t=new Wi(i,s,this.Ae,this.Ie,r);return this.Ie=Li,this.Re=eo(),this.Ae=new Ri(Lr),t},$i.prototype.Ve=function(t,e){var n;this.be(t)&&(n=this.Ne(t,e.key)?2:0,this.ve(t)._e(e.key,n),this.Ie=this.Ie.nt(e.key,e),this.Re=this.Re.nt(e.key,this.ke(e.key).add(t)))},$i.prototype.pe=function(t,e,n){var r;this.be(t)&&(r=this.ve(t),this.Ne(t,e)?r._e(e,1):r.fe(e),this.Re=this.Re.nt(e,this.ke(e).delete(t)),n&&(this.Ie=this.Ie.nt(e,n)))},$i.prototype.removeTarget=function(t){this.me.delete(t)},$i.prototype.Fe=function(t){var e=this.ve(t).ce();return this.Ee.xe(t).size+e.Yt.size-e.Jt.size},$i.prototype.de=function(t){this.ve(t).de()},$i.prototype.ve=function(t){var e=this.me.get(t);return e||(e=new zi,this.me.set(t,e)),e},$i.prototype.ke=function(t){var e=this.Re.get(t);return e||(e=new Ri(Lr),this.Re=this.Re.nt(t,e)),e},$i.prototype.be=function(t){var e=null!==this.De(t);return e||Ir("WatchChangeAggregator","Detected inactive target",t),e},$i.prototype.De=function(t){var e=this.me.get(t);return e&&e.he?null:this.Ee.Oe(t)},$i.prototype.Se=function(e){var n=this;this.me.set(e,new zi),this.Ee.xe(e).forEach(function(t){n.pe(e,t,null)})},$i.prototype.Ne=function(t,e){return this.Ee.xe(t).has(e)},$i);function $i(t){this.Ee=t,this.me=new Map,this.Ie=Li,this.Re=eo(),this.Ae=new Ri(Lr)}function Xi(){this.ne=0,this.se=no(),this.ie=fi.Y,this.re=!1,this.oe=!0}function Qi(t,e,n,r,i){this.resumeToken=t,this.Ht=e,this.Yt=n,this.Xt=r,this.Jt=i}function Ki(t,e,n,r,i){this.J=t,this.Wt=e,this.Qt=n,this.jt=r,this.Gt=i}function Ji(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Lt=n,this.docChanges=r,this.Mt=i,this.fromCache=o,this.qt=s,this.Ut=a}function Zi(){this.xt=new Ei(Qr.P)}function to(n){this.P=n?function(t,e){return n(t,e)||Qr.P(t.key,e.key)}:function(t,e){return Qr.P(t.key,e.key)},this.$t=ki,this.Nt=new Ei(this.P)}function eo(){return new Ei(Qr.P)}function no(){return new Ei(Qr.P)}function ro(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function io(t){var e=fo(t.mapValue.fields.__local_write_time__.timestampValue);return new Wr(e.seconds,e.nanos)}var oo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function so(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ro(t)?4:10:Ar()}function ao(r,i){var t,e,n,o=so(r);if(o!==so(i))return!1;switch(o){case 0:return!0;case 1:return r.booleanValue===i.booleanValue;case 4:return io(r).isEqual(io(i));case 3:return function(t){if("string"==typeof r.timestampValue&&"string"==typeof t.timestampValue&&r.timestampValue.length===t.timestampValue.length)return r.timestampValue===t.timestampValue;var e=fo(r.timestampValue),n=fo(t.timestampValue);return e.seconds===n.seconds&&e.nanos===n.nanos}(i);case 5:return r.stringValue===i.stringValue;case 6:return n=i,yo(r.bytesValue).isEqual(yo(n.bytesValue));case 7:return r.referenceValue===i.referenceValue;case 8:return e=i,po((t=r).geoPointValue.latitude)===po(e.geoPointValue.latitude)&&po(t.geoPointValue.longitude)===po(e.geoPointValue.longitude);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return po(t.integerValue)===po(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=po(t.doubleValue),r=po(e.doubleValue);return n===r?si(n)===si(r):isNaN(n)&&isNaN(r)}return!1}(r,i);case 9:return Or(r.arrayValue.values||[],i.arrayValue.values||[],ao);case 10:return function(){var t=r.mapValue.fields||{},e=i.mapValue.fields||{};if(Cr(t)!==Cr(e))return!1;for(var n in t)if(t.hasOwnProperty(n)&&(void 0===e[n]||!ao(t[n],e[n])))return!1;return!0}();default:return Ar()}}function uo(t,e){return void 0!==(t.values||[]).find(function(t){return ao(t,e)})}function ho(t,e){var n,r,i,o,s,a,u,h,c,l,f=so(t),p=so(e);if(f!==p)return Lr(f,p);switch(f){case 0:return 0;case 1:return Lr(t.booleanValue,e.booleanValue);case 2:return h=e,(c=po(t.integerValue||t.doubleValue))<(l=po(h.integerValue||h.doubleValue))?-1:l<c?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1;case 3:return co(t.timestampValue,e.timestampValue);case 4:return co(io(t),io(e));case 5:return Lr(t.stringValue,e.stringValue);case 6:return o=t.bytesValue,s=e.bytesValue,a=yo(o),u=yo(s),a.o(u);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Lr(n[i],r[i]);if(0!==o)return o}return Lr(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return n=t.geoPointValue,r=e.geoPointValue,0!==(i=Lr(po(n.latitude),po(r.latitude)))?i:Lr(po(n.longitude),po(r.longitude));case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=ho(n[i],r[i]);if(o)return o}return Lr(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Lr(r[s],o[s]);if(0!==a)return a;var u=ho(n[r[s]],i[o[s]]);if(0!==u)return u}return Lr(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Ar()}}function co(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Lr(t,e);var n=fo(t),r=fo(e),i=Lr(n.seconds,r.seconds);return 0!==i?i:Lr(n.nanos,r.nanos)}function lo(t){return function s(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?"time("+(t=fo(i.timestampValue)).seconds+","+t.nanos+")":"stringValue"in i?i.stringValue:"bytesValue"in i?yo(i.bytesValue).toBase64():"referenceValue"in i?(n=i.referenceValue,Qr.U(n).toString()):"geoPointValue"in i?"geo("+(e=i.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in i?function(){for(var t="[",e=!0,n=0,r=i.arrayValue.values||[];n<r.length;n++)e?e=!1:t+=",",t+=s(r[n]);return t+"]"}():"mapValue"in i?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+s(t.fields[o])}return e+"}"}(i.mapValue):Ar();var t,e,n}(t)}function fo(t){if(_r(!!t),"string"!=typeof t)return{seconds:po(t.seconds),nanos:po(t.nanos)};var e,n=0,r=oo.exec(t);_r(!!r),r[1]&&(e=((e=r[1])+"000000000").substr(0,9),n=Number(e));var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:n}}function po(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function yo(t){return"string"==typeof t?fi.fromBase64String(t):fi.fromUint8Array(t)}function vo(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.$()}}function go(t){return t&&"integerValue"in t}function mo(t){return!!t&&"arrayValue"in t}function wo(t){return t&&"nullValue"in t}function bo(t){return t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Eo(t){return t&&"mapValue"in t}var Io={asc:"ASCENDING",desc:"DESCENDING"},To={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","array-contains-any":"ARRAY_CONTAINS_ANY"},No=function(t,e){this.s=t,this.Le=e};function Ao(t){return{integerValue:""+t}}function _o(t,e){if(t.Le){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:si(e)?"-0":e}}function So(t,e){return"number"==typeof(n=e)&&Number.isInteger(n)&&!si(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER?Ao(e):_o(t,e);var n}function Ro(t,e){return t.Le?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Do(t,e){return t.Le?e.toBase64():e.toUint8Array()}function Lo(t){return _r(!!t),Hr.m((e=fo(t),new Wr(e.seconds,e.nanos)));var e}function Oo(t,e){return new Yr(["projects",t.projectId,"databases",t.database]).child("documents").child(e).$()}function Po(t,e){return Oo(t.s,e.path)}function ko(t,e){var n,r,i=(_r(jo(r=Yr.N(e))),r);return _r(i.get(1)===t.s.projectId),_r(!i.get(3)&&!t.s.database||i.get(3)===t.s.database),new Qr((_r(4<(n=i).length&&"documents"===n.get(4)),n.p(5)))}function Vo(t,e){return Oo(t.s,e)}function Co(t){return new Yr(["projects",t.s.projectId,"databases",t.s.database]).$()}function Uo(t,e,n){return{name:Po(t,e),fields:n.proto.mapValue.fields}}function Mo(t,e){var n,r,i,o;if(e instanceof ms)n={update:Uo(t,e.key,e.value)};else if(e instanceof Ds)n={delete:Po(t,e.key)};else if(e instanceof ws)n={update:Uo(t,e.key,e.data),updateMask:(r=e.Me,i=[],r.fields.forEach(function(t){return i.push(t.$())}),{fieldPaths:i})};else if(e instanceof Ns)n={transform:{document:Po(t,e.key),fieldTransforms:e.fieldTransforms.map(function(t){var e=t.transform;if(e instanceof Ho)return{fieldPath:t.field.$(),setToServerValue:"REQUEST_TIME"};if(e instanceof zo)return{fieldPath:t.field.$(),appendMissingElements:{values:e.elements}};if(e instanceof Ko)return{fieldPath:t.field.$(),removeAllFromArray:{values:e.elements}};if(e instanceof es)return{fieldPath:t.field.$(),increment:e.qe};throw Ar()})}};else{if(!(e instanceof Ls))return Ar();n={verify:Po(t,e.key)}}return e.Be.Ue||(n.currentDocument=void 0!==(o=e.Be).updateTime?{updateTime:Ro(t,o.updateTime.R())}:void 0!==o.exists?{exists:o.exists}:Ar()),n}function xo(t){return{before:t.before,values:t.position}}function Fo(t){return{fieldPath:t.$()}}function jo(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)}function qo(){this.We=void 0}function Bo(t,e){return t instanceof es?go(n=e)||n&&"doubleValue"in n?e:{integerValue:0}:null;var n}var Go,Wo,Ho=(n($o,Wo=qo),$o),zo=(n(Yo,Go=qo),Yo);function Yo(t){var e=this;return(e=Go.call(this)||this).elements=t,e}function $o(){return null!==Wo&&Wo.apply(this,arguments)||this}function Xo(t,e){for(var n=is(e),r=function(e){n.some(function(t){return ao(t,e)})||n.push(e)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Qo,Ko=(n(Jo,Qo=qo),Jo);function Jo(t){var e=this;return(e=Qo.call(this)||this).elements=t,e}function Zo(t,e){for(var n=is(e),r=function(e){n=n.filter(function(t){return!ao(t,e)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ts,es=(n(ns,ts=qo),ns);function ns(t,e){var n=this;return(n=ts.call(this)||this).serializer=t,n.qe=e,n}function rs(t){return po(t.integerValue||t.doubleValue)}function is(t){return mo(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function os(t,e){this.field=t,this.transform=e}var ss=(as.prototype.Qe=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].C(t))return!0;return!1},as.prototype.isEqual=function(t){return Or(this.fields,t.fields,function(t,e){return t.isEqual(e)})},as);function as(t){(this.fields=t).sort(Xr.P)}function us(t,e){this.version=t,this.transformResults=e}var hs=(cs.je=function(){return new cs},cs.exists=function(t){return new cs(void 0,t)},cs.updateTime=function(t){return new cs(t)},Object.defineProperty(cs.prototype,"Ue",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),cs.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},cs);function cs(t,e){this.updateTime=t,this.exists=e}function ls(t,e){return void 0!==t.updateTime?e instanceof Bs&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Bs}function fs(){}function ps(t,e,n,r){return t instanceof ms?function(t,e){if(!ls(t.Be,e))return e;var n=ys(e);return new Bs(t.key,n,t.value,{Ge:!0})}(t,e):t instanceof ws?function(t,e){if(!ls(t.Be,e))return e;var n=ys(e),r=Is(t,e);return new Bs(t.key,n,r,{Ge:!0})}(t,e):t instanceof Ns?function(t,e,n,r){if(!ls(t.Be,e))return e;var i=e,o=function(t,e,n,r){for(var i,o,s,a,u,h,c=[],l=0,f=t;l<f.length;l++){var p=f[l],d=p.transform,y=null;n instanceof Bs&&(y=n.field(p.field)),null===y&&r instanceof Bs&&(y=r.field(p.field)),c.push((o=y,h=u=a=s=void 0,(i=d)instanceof Ho?(h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}},o&&(h.fields.__previous_value__=o),{mapValue:h}):i instanceof zo?Xo(i,o):i instanceof Ko?Zo(i,o):(u=rs(a=Bo(s=i,o))+rs(s.qe),go(a)&&go(s.qe)?Ao(u):_o(s.serializer,u))))}return c}(t.fieldTransforms,n,e,r),s=_s(t,i.data(),o);return new Bs(t.key,i.version,s,{Ge:!0})}(t,e,r,n):(o=e,ls((i=t).Be,o)?new Gs(i.key,Hr.min()):o);var i,o}function ds(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Be.isEqual(e.Be)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.Me.isEqual(e.Me):2!==t.type||Or(t.fieldTransforms,t.fieldTransforms,function(t,e){return r=e,(n=t).field.isEqual(r.field)&&(i=n.transform,o=r.transform,i instanceof zo&&o instanceof zo||i instanceof Ko&&o instanceof Ko?Or(i.elements,o.elements,ao):i instanceof es&&o instanceof es?ao(i.qe,o.qe):i instanceof Ho&&o instanceof Ho);var n,r,i,o}))}function ys(t){return t instanceof Bs?t.version:Hr.min()}var vs,gs,ms=(n(Es,gs=fs),Es),ws=(n(bs,vs=fs),bs);function bs(t,e,n,r){var i=this;return(i=vs.call(this)||this).key=t,i.data=e,i.Me=n,i.Be=r,i.type=1,i}function Es(t,e,n){var r=this;return(r=gs.call(this)||this).key=t,r.value=e,r.Be=n,r.type=0,r}function Is(t,e){return n=t,r=e instanceof Bs?e.data():Os.empty(),i=new Ps(r),n.Me.fields.forEach(function(t){var e;t._()||(null!==(e=n.data.field(t))?i.set(t,e):i.delete(t))}),i.Ke();var n,r,i}var Ts,Ns=(n(As,Ts=fs),As);function As(t,e){var n=this;return(n=Ts.call(this)||this).key=t,n.fieldTransforms=e,n.type=2,n.Be=hs.exists(!0),n}function _s(t,e,n){for(var r=new Ps(e),i=0;i<t.fieldTransforms.length;i++){var o=t.fieldTransforms[i];r.set(o.field,n[i])}return r.Ke()}var Ss,Rs,Ds=(n(Us,Rs=fs),Us),Ls=(n(Cs,Ss=fs),Cs),Os=(Vs.empty=function(){return new Vs({mapValue:{}})},Vs.prototype.field=function(t){if(t._())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Eo(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.S()])||null},Vs.prototype.isEqual=function(t){return ao(this.proto,t.proto)},Vs),Ps=(ks.prototype.set=function(t,e){return this.Ye(t,e),this},ks.prototype.delete=function(t){return this.Ye(t,null),this},ks.prototype.Ye=function(t,e){for(var n=this.He,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map||(o=o&&10===so(o)?new Map(Object.entries(o.mapValue.fields||{})):new Map,n.set(i,o)),n=o}n.set(t.S(),e)},ks.prototype.Ke=function(){var t=this.Xe(Xr.k(),this.He);return null!=t?new Os(t):this.ze},ks.prototype.Xe=function(r,t){var i=this,o=!1,e=this.ze.field(r),s=Eo(e)?Object.assign({},e.mapValue.fields):{};return t.forEach(function(t,e){var n;t instanceof Map?null!=(n=i.Xe(r.child(e),t))&&(s[e]=n,o=!0):null!==t?(s[e]=t,o=!0):s.hasOwnProperty(e)&&(delete s[e],o=!0)}),o?{mapValue:{fields:s}}:null},ks);function ks(t){void 0===t&&(t=Os.empty()),this.ze=t,this.He=new Map}function Vs(t){this.proto=t}function Cs(t,e){var n=this;return(n=Ss.call(this)||this).key=t,n.Be=e,n.type=4,n}function Us(t,e){var n=this;return(n=Rs.call(this)||this).key=t,n.Be=e,n.type=3,n}function Ms(t){var a=[];return Ur(t.fields||{},function(t,e){var n=new Xr([t]);if(Eo(e)){var r=Ms(e.mapValue).fields;if(0===r.length)a.push(n);else for(var i=0,o=r;i<o.length;i++){var s=o[i];a.push(n.child(s))}}else a.push(n)}),new ss(a)}function xs(t,e){this.key=t,this.version=e}var Fs,js,qs,Bs=(n(Ys,qs=xs),Ys.prototype.field=function(t){return this.Je.field(t)},Ys.prototype.data=function(){return this.Je},Ys.prototype.Ze=function(){return this.Je.proto},Ys.prototype.isEqual=function(t){return t instanceof Ys&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Ge===t.Ge&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Je.isEqual(t.Je)},Ys.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Je.toString()+", {hasLocalMutations: "+this.Ge+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(Ys.prototype,"hasPendingWrites",{get:function(){return this.Ge||this.hasCommittedMutations},enumerable:!1,configurable:!0}),Ys),Gs=(n(zs,js=xs),zs.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(zs.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),zs.prototype.isEqual=function(t){return t instanceof zs&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},zs),Ws=(n(Hs,Fs=xs),Hs.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(Hs.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),Hs.prototype.isEqual=function(t){return t instanceof Hs&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},Hs);function Hs(){return null!==Fs&&Fs.apply(this,arguments)||this}function zs(t,e,n){var r=this;return(r=js.call(this,t,e)||this).hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}function Ys(t,e,n,r){var i=this;return(i=qs.call(this,t,e)||this).Je=n,i.Ge=!!r.Ge,i.hasCommittedMutations=!!r.hasCommittedMutations,i}function $s(t,e){if(!(t instanceof e))throw e.name===t.constructor.name?new Gr(Br.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass '"+e.name+"' from a different Firestore SDK?"):new Gr(Br.INVALID_ARGUMENT,"Expected type '"+e.name+"', but was '"+t.constructor.name+"'");return t}var Xs=(Qs.prototype.rn=function(t){return new Qs(t,null,this.tn.slice(),this.filters.slice(),this.limit,this.en,this.startAt,this.endAt)},Qs.prototype.on=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.tn.length||1===this.tn.length&&this.tn[0].field.L())},Qs.prototype.hn=function(){return!oi(this.limit)&&"F"===this.en},Qs.prototype.an=function(){return!oi(this.limit)&&"L"===this.en},Qs.prototype.un=function(){return 0<this.tn.length?this.tn[0].field:null},Qs.prototype.cn=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n.ln())return n.field}return null},Qs.prototype._n=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(0<=t.indexOf(r.op))return r.op}return null},Qs);function Qs(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.tn=n,this.filters=r,this.limit=i,this.en=o,this.startAt=s,this.endAt=a,this.nn=null,this.sn=null,this.startAt,this.endAt}function Ks(t){return new Xs(t)}function Js(t){return null!==t.collectionGroup}function Zs(t){var e=$s(t,Xs);if(null===e.nn){e.nn=[];var n=e.cn(),r=e.un();if(null!==n&&null===r)n.L()||e.nn.push(new Oa(n)),e.nn.push(new Oa(Xr.M(),"asc"));else{for(var i,o=!1,s=0,a=e.tn;s<a.length;s++){var u=a[s];e.nn.push(u),u.field.L()&&(o=!0)}o||(i=0<e.tn.length?e.tn[e.tn.length-1].dir:"asc",e.nn.push(new Oa(Xr.M(),i)))}}return e.nn}function ta(t){var e=$s(t,Xs);if(!e.sn)if("F"===e.en)e.sn=ui(e.path,e.collectionGroup,Zs(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Zs(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Oa(o.field,s))}var a=e.endAt?new Ia(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Ia(e.startAt.position,!e.startAt.before):null;e.sn=ui(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.sn}function ea(t,e,n){return new Xs(t.path,t.collectionGroup,t.tn.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function na(t,e){return new Xs(t.path,t.collectionGroup,t.tn.slice(),t.filters.slice(),t.limit,t.en,e,t.endAt)}function ra(t,e){return new Xs(t.path,t.collectionGroup,t.tn.slice(),t.filters.slice(),t.limit,t.en,t.startAt,e)}function ia(t,e){return ci(ta(t),ta(e))&&t.en===e.en}function oa(t){return hi(ta(t))+"|lt:"+t.en}function sa(t){return"Query(target="+(n=(e=ta(t)).path.$(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),0<e.filters.length&&(n+=", filters: ["+e.filters.map(function(t){return(e=t).field.$()+" "+e.op+" "+lo(e.value);var e}).join(", ")+"]"),oi(e.limit)||(n+=", limit: "+e.limit),0<e.orderBy.length&&(n+=", orderBy: ["+e.orderBy.map(function(t){return(e=t).field.$()+" ("+e.dir+")";var e}).join(", ")+"]"),e.startAt&&(n+=", startAt: "+Ra(e.startAt)),e.endAt&&(n+=", endAt: "+Ra(e.endAt)),"Target("+n+")")+"; limitType="+t.en+")";var e,n}function aa(i,t){return r=i,o=t.key.path,(null!==r.collectionGroup?t.key.B(r.collectionGroup)&&r.path.C(o):Qr.W(r.path)?r.path.isEqual(o):r.path.D(o))&&function(t){for(var e=0,n=i.tn;e<n.length;e++){var r=n[e];if(!r.field.L()&&null===t.field(r.field))return}return 1}(t)&&function(t){for(var e=0,n=i.filters;e<n.length;e++)if(!n[e].matches(t))return;return 1}(t)&&(n=t,(!(e=i).startAt||Da(e.startAt,Zs(e),n))&&(!e.endAt||!Da(e.endAt,Zs(e),n)));var e,n,r,o}function ua(a){return function(t,e){for(var n=!1,r=0,i=Zs(a);r<i.length;r++){var o=i[r],s=Pa(o,t,e);if(0!==s)return s;n=n||o.field.L()}return 0}}var ha,ca=(n(la,ha=function(){}),la.create=function(t,e,n){if(t.L())return"in"===e?new ma(t,n):new ga(t,e,n);if(wo(n)){if("=="!==e)throw new Gr(Br.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new la(t,e,n)}if(bo(n)){if("=="!==e)throw new Gr(Br.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new la(t,e,n)}return"array-contains"===e?new wa(t,n):"in"===e?new ba(t,n):"array-contains-any"===e?new Ea(t,n):new la(t,e,n)},la.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&so(this.value)===so(e)&&this.fn(ho(e,this.value))},la.prototype.fn=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case">":return 0<t;case">=":return 0<=t;default:return Ar()}},la.prototype.ln=function(){return 0<=["<","<=",">",">="].indexOf(this.op)},la);function la(t,e,n){var r=this;return(r=ha.call(this)||this).field=t,r.op=e,r.value=n,r}var fa,pa,da,ya,va,ga=(n(Sa,va=ca),Sa.prototype.matches=function(t){var e=Qr.P(t.key,this.key);return this.fn(e)},Sa),ma=(n(_a,ya=ca),_a.prototype.matches=function(e){return this.keys.some(function(t){return t.isEqual(e.key)})},_a),wa=(n(Aa,da=ca),Aa.prototype.matches=function(t){var e=t.field(this.field);return mo(e)&&uo(e.arrayValue,this.value)},Aa),ba=(n(Na,pa=ca),Na.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&uo(this.value.arrayValue,e)},Na),Ea=(n(Ta,fa=ca),Ta.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!mo(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return uo(e.value.arrayValue,t)})},Ta),Ia=function(t,e){this.position=t,this.before=e};function Ta(t,e){return fa.call(this,t,"array-contains-any",e)||this}function Na(t,e){return pa.call(this,t,"in",e)||this}function Aa(t,e){return da.call(this,t,"array-contains",e)||this}function _a(t,e){var n=this;return(n=ya.call(this,t,"in",e)||this).keys=(e.arrayValue.values||[]).map(function(t){return Qr.U(t.referenceValue)}),n}function Sa(t,e,n){var r=this;return(r=va.call(this,t,e,n)||this).key=Qr.U(n.referenceValue),r}function Ra(t){return(t.before?"b":"a")+":"+t.position.map(lo).join(",")}function Da(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i],r=o.field.L()?Qr.P(Qr.U(s.referenceValue),n.key):ho(s,n.field(o.field));if("desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function La(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!ao(t.position[n],e.position[n]))return!1;return!0}var Oa=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Pa(t,e,n){var r,i,o,s,a=t.field.L()?Qr.P(e.key,n.key):(r=t.field,i=n,o=e.field(r),s=i.field(r),null!==o&&null!==s?ho(o,s):Ar());switch(t.dir){case"asc":return a;case"desc":return-1*a;default:return Ar()}}var ka=(Wa.prototype.wn=function(t,e,n){for(var r,i,o,s=n.Tn,a=0;a<this.mutations.length;a++){var u=this.mutations[a];u.key.isEqual(t)&&(r=u,i=e,o=s[a],e=r instanceof ms?new Bs(r.key,o.version,r.value,{hasCommittedMutations:!0}):r instanceof ws?function(t,e,n){if(!ls(t.Be,e))return new Ws(t.key,n.version);var r=Is(t,e);return new Bs(t.key,n.version,r,{hasCommittedMutations:!0})}(r,i,o):r instanceof Ns?function(t,e,n){if(_r(null!=n.transformResults),!ls(t.Be,e))return new Ws(t.key,n.version);var r=e,i=function(t,e,n){var r,i,o,s=[];_r(t.length===n.length);for(var a=0;a<n.length;a++){var u=t[a],h=u.transform,c=null;e instanceof Bs&&(c=e.field(u.field)),s.push((r=h,i=c,o=n[a],r instanceof zo?Xo(r,i):r instanceof Ko?Zo(r,i):o))}return s}(t.fieldTransforms,e,n.transformResults),o=n.version,s=_s(t,r.data(),i);return new Bs(t.key,o,s,{hasCommittedMutations:!0})}(r,i,o):new Gs(r.key,o.version,{hasCommittedMutations:!0}))}return e},Wa.prototype.En=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=ps(i,e,e,this.dn))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=ps(u,e,o,this.dn))}return e},Wa.prototype.mn=function(n){var r=this,i=n;return this.mutations.forEach(function(t){var e=r.En(t.key,n.get(t.key));e&&(i=i.nt(t.key,e))}),i},Wa.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Ui())},Wa.prototype.isEqual=function(t){return this.batchId===t.batchId&&Or(this.mutations,t.mutations,ds)&&Or(this.baseMutations,t.baseMutations,ds)},Wa),Va=(Ga.from=function(t,e,n){_r(t.mutations.length===n.length);for(var r=Vi,i=t.mutations,o=0;o<i.length;o++)r=r.nt(i[o].key,n[o].version);return new Ga(t,e,n,r)},Ga),Ca=(Ba.prototype.catch=function(t){return this.next(void 0,t)},Ba.prototype.next=function(r,i){var o=this;return this.pn&&Ar(),this.pn=!0,this.Vn?this.error?this.yn(i,this.error):this.gn(r,this.result):new Ba(function(e,n){o.An=function(t){o.gn(r,t).next(e,n)},o.Pn=function(t){o.yn(i,t).next(e,n)}})},Ba.prototype.vn=function(){var n=this;return new Promise(function(t,e){n.next(t,e)})},Ba.prototype.bn=function(t){try{var e=t();return e instanceof Ba?e:Ba.resolve(e)}catch(t){return Ba.reject(t)}},Ba.prototype.gn=function(t,e){return t?this.bn(function(){return t(e)}):Ba.resolve(e)},Ba.prototype.yn=function(t,e){return t?this.bn(function(){return t(e)}):Ba.reject(e)},Ba.resolve=function(n){return new Ba(function(t,e){t(n)})},Ba.reject=function(n){return new Ba(function(t,e){e(n)})},Ba.Sn=function(t){return new Ba(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(t){return n(t)})}),o=!0,i===r&&e()})},Ba.Cn=function(t){for(var n=Ba.resolve(!1),e=function(e){n=n.next(function(t){return t?Ba.resolve(t):e()})},r=0,i=t;r<i.length;r++)e(i[r]);return n},Ba.forEach=function(t,n){var r=this,i=[];return t.forEach(function(t,e){i.push(n.call(r,t,e))}),this.Sn(i)},Ba),Ua=(qa.prototype.Nn=function(e,n){var r=this;return this.Fn.kn(e,n).next(function(t){return r.xn(e,n,t)})},qa.prototype.xn=function(t,r,i){return this.Dn.On(t,r).next(function(t){for(var e=0,n=i;e<n.length;e++)t=n[e].En(r,t);return t})},qa.prototype.Ln=function(t,e,i){var o=Li;return e.forEach(function(t,e){for(var n=0,r=i;n<r.length;n++)e=r[n].En(t,e);o=o.nt(t,e)}),o},qa.prototype.Mn=function(e,t){var n=this;return this.Dn.getEntries(e,t).next(function(t){return n.qn(e,t)})},qa.prototype.qn=function(r,i){var o=this;return this.Fn.Un(r,i).next(function(t){var e=o.Ln(r,i,t),n=Li;return e.forEach(function(t,e){e=e||new Gs(t,Hr.min()),n=n.nt(t,e)}),n})},qa.prototype.Bn=function(t,e,n){return r=e,Qr.W(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.Wn(t,e.path):Js(e)?this.Qn(t,e,n):this.jn(t,e,n);var r},qa.prototype.Wn=function(t,e){return this.Nn(t,new Qr(e)).next(function(t){var e=ki;return t instanceof Bs&&(e=e.nt(t.key,t)),e})},qa.prototype.Qn=function(n,r,i){var o=this,s=r.collectionGroup,a=ki;return this.$n.Gn(n,s).next(function(t){return Ca.forEach(t,function(t){var e=r.rn(t.child(s));return o.jn(n,e,i).next(function(t){t.forEach(function(t,e){a=a.nt(t,e)})})}).next(function(){return a})})},qa.prototype.jn=function(e,n,t){var c,l,r=this;return this.Dn.Bn(e,n,t).next(function(t){return c=t,r.Fn.Kn(e,n)}).next(function(t){return l=t,r.zn(e,l,c).next(function(t){c=t;for(var e=0,n=l;e<n.length;e++)for(var r=n[e],i=0,o=r.mutations;i<o.length;i++){var s=o[i],a=s.key,u=c.get(a),h=ps(s,u,u,r.dn);c=h instanceof Bs?c.nt(a,h):c.remove(a)}})}).next(function(){return c.forEach(function(t,e){aa(n,e)||(c=c.remove(t))}),c})},qa.prototype.zn=function(t,e,n){for(var r=Ui(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof ws&&null===n.get(u.key)&&(r=r.add(u.key))}var h=n;return this.Dn.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof Bs&&(h=h.nt(t,e))}),h})},qa),Ma=(ja.Xn=function(t,e){for(var n=Ui(),r=Ui(),i=0,o=e.docChanges;i<o.length;i++){var s=o[i];switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}}return new ja(t,e.fromCache,n,r)},ja),xa=(Fa.prototype.Zn=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},Fa.prototype.next=function(){var t=++this.previousValue;return this.ts&&this.ts(t),t},Fa);function Fa(t,e){var n=this;this.previousValue=t,e&&(e.Jn=function(t){return n.Zn(t)},this.ts=function(t){return e.es(t)})}function ja(t,e,n,r){this.targetId=t,this.fromCache=e,this.Hn=n,this.Yn=r}function qa(t,e,n){this.Dn=t,this.Fn=e,this.$n=n}function Ba(t){var e=this;this.An=null,this.Pn=null,this.result=void 0,this.error=void 0,this.Vn=!1,this.pn=!1,t(function(t){e.Vn=!0,e.result=t,e.An&&e.An(t)},function(t){e.Vn=!0,e.error=t,e.Pn&&e.Pn(t)})}function Ga(t,e,n,r){this.batch=t,this.In=e,this.Tn=n,this.Rn=r}function Wa(t,e,n,r){this.batchId=t,this.dn=e,this.baseMutations=n,this.mutations=r}function Ha(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}xa.ns=-1;var za=(Za.prototype.reset=function(){this.us=0},Za.prototype._s=function(){this.us=this.as},Za.prototype.fs=function(t){var e=this;this.cancel();var n=Math.floor(this.us+this.ds()),r=Math.max(0,Date.now()-this.ls),i=Math.max(0,n-r);0<i&&Ir("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.us+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.cs=this.ss.ws(this.rs,i,function(){return e.ls=Date.now(),t()}),this.us*=this.hs,this.us<this.os&&(this.us=this.os),this.us>this.as&&(this.us=this.as)},Za.prototype.Ts=function(){null!==this.cs&&(this.cs.Es(),this.cs=null)},Za.prototype.cancel=function(){null!==this.cs&&(this.cs.cancel(),this.cs=null)},Za.prototype.ds=function(){return(Math.random()-.5)*this.us},Za),Ya=(Ja.prototype.Is=function(t,e){return this.ms.add(e),Ca.resolve()},Ja.prototype.Gn=function(t,e){return Ca.resolve(this.ms.getEntries(e))},Ja),$a=(Ka.prototype.add=function(t){var e=t.S(),n=t.g(),r=this.index[e]||new Ri(Yr.P),i=!r.has(n);return this.index[e]=r.add(n),i},Ka.prototype.has=function(t){var e=t.S(),n=t.g(),r=this.index[e];return r&&r.has(n)},Ka.prototype.getEntries=function(t){return(this.index[t]||new Ri(Yr.P)).F()},Ka),Xa=(Qa.prototype.next=function(){return this.Rs+=2,this.Rs},Qa.As=function(){return new Qa(0)},Qa.Ps=function(){return new Qa(-1)},Qa);function Qa(t){this.Rs=t}function Ka(){this.index={}}function Ja(){this.ms=new $a}function Za(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.ss=t,this.rs=e,this.os=n,this.hs=r,this.as=i,this.us=0,this.cs=null,this.ls=Date.now(),this.reset()}function tu(t){return"IndexedDbTransactionError"===t.name}function eu(){return"undefined"!=typeof window?window:null}var nu=(ou.vs=function(t,e,n,r,i){var o=new ou(t,e,Date.now()+n,r,i);return o.start(n),o},ou.prototype.start=function(t){var e=this;this.bs=setTimeout(function(){return e.Ss()},t)},ou.prototype.Es=function(){return this.Ss()},ou.prototype.cancel=function(t){null!==this.bs&&(this.clearTimeout(),this.gs.reject(new Gr(Br.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},ou.prototype.Ss=function(){var e=this;this.Vs.Cs(function(){return null!==e.bs?(e.clearTimeout(),e.op().then(function(t){return e.gs.resolve(t)})):Promise.resolve()})},ou.prototype.clearTimeout=function(){null!==this.bs&&(this.ys(this),clearTimeout(this.bs),this.bs=null)},ou),ru=(Object.defineProperty(iu.prototype,"qs",{get:function(){return this.$s},enumerable:!1,configurable:!0}),iu.prototype.Cs=function(t){this.enqueue(t)},iu.prototype.Us=function(t){this.Bs(),this.Ws(t)},iu.prototype.Qs=function(t){return this.Bs(),this.Ws(t)},iu.prototype.js=function(n){return d(this,void 0,void 0,function(){var e;return y(this,function(t){switch(t.label){case 0:return this.Bs(),this.$s?[3,2]:(this.$s=!0,(e=eu())&&e.removeEventListener("visibilitychange",this.Ms),[4,this.Qs(n)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},iu.prototype.enqueue=function(t){return this.Bs(),this.$s?new Promise(function(t){}):this.Ws(t)},iu.prototype.Gs=function(t){var e=this;this.Fs.push(t),this.Cs(function(){return e.Ks()})},iu.prototype.Ks=function(){return d(this,void 0,void 0,function(){var e,n=this;return y(this,function(t){switch(t.label){case 0:if(0===this.Fs.length)return[3,5];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.Fs[0]()];case 2:return t.sent(),this.Fs.shift(),this.Ls.reset(),[3,4];case 3:if(!tu(e=t.sent()))throw e;return Ir("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:0<this.Fs.length&&this.Ls.fs(function(){return n.Ks()}),t.label=5;case 5:return[2]}})})},iu.prototype.Ws=function(t){var r=this,e=this.Ds.then(function(){return r.xs=!0,t().catch(function(t){throw r.ks=t,r.xs=!1,Tr("INTERNAL UNHANDLED ERROR: ",(n=(e=t).message||"",e.stack&&(n=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),n)),t;var e,n}).then(function(t){return r.xs=!1,t})});return this.Ds=e},iu.prototype.ws=function(t,e,n){var r=this;this.Bs(),-1<this.Os.indexOf(t)&&(e=0);var i=nu.vs(this,t,e,n,function(t){return r.zs(t)});return this.Ns.push(i),i},iu.prototype.Bs=function(){this.ks&&Ar()},iu.prototype.Hs=function(){},iu.prototype.Ys=function(){return d(this,void 0,void 0,function(){var e;return y(this,function(t){switch(t.label){case 0:return[4,e=this.Ds];case 1:t.sent(),t.label=2;case 2:if(e!==this.Ds)return[3,0];t.label=3;case 3:return[2]}})})},iu.prototype.Xs=function(t){for(var e=0,n=this.Ns;e<n.length;e++)if(n[e].rs===t)return!0;return!1},iu.prototype.Js=function(r){var i=this;return this.Ys().then(function(){i.Ns.sort(function(t,e){return t.ps-e.ps});for(var t=0,e=i.Ns;t<e.length;t++){var n=e[t];if(n.Es(),"all"!==r&&n.rs===r)break}return i.Ys()})},iu.prototype.Zs=function(t){this.Os.push(t)},iu.prototype.zs=function(t){var e=this.Ns.indexOf(t);this.Ns.splice(e,1)},iu);function iu(){var t=this;this.Ds=Promise.resolve(),this.Fs=[],this.$s=!1,this.Ns=[],this.ks=null,this.xs=!1,this.Os=[],this.Ls=new za(this,"async_queue_retry"),this.Ms=function(){return t.Ls.Ts()};var e=eu();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ms)}function ou(t,e,n,r,i){this.Vs=t,this.rs=e,this.ps=n,this.op=r,this.ys=i,this.gs=new Ha,this.then=this.gs.promise.then.bind(this.gs.promise),this.gs.promise.catch(function(t){})}function su(t,e){if(Tr("AsyncQueue",e+": "+t),tu(t))return new Gr(Br.UNAVAILABLE,e+": "+t);throw t}var au=(uu.si=function(t){return new uu(t,uu.ii,uu.ri)},uu);function uu(t,e,n){this.ti=t,this.ei=e,this.ni=n}au.oi=-1,au.hi=1048576,au.ai=41943040,au.ii=10,au.ri=1e3,au.ui=new au(au.ai,au.ii,au.ri),au.ci=new au(au.oi,0,0);var hu=(cu.prototype.Vi=function(i){return d(this,void 0,void 0,function(){var e,m,n,r=this;return y(this,function(t){switch(t.label){case 0:return e=this.Fn,m=this.Ri,[4,this.persistence.runTransaction("Handle user change","readonly",function(v){var g;return r.Fn.pi(v).next(function(t){return g=t,e=r.persistence.wi(i),m=new Ua(r.Ti,e,r.persistence.Ai()),e.pi(v)}).next(function(t){for(var e=[],n=[],r=Ui(),i=0,o=g;i<o.length;i++){var s=o[i];e.push(s.batchId);for(var a=0,u=s.mutations;a<u.length;a++)var h=u[a],r=r.add(h.key)}for(var c=0,l=t;c<l.length;c++){var f=l[c];n.push(f.batchId);for(var p=0,d=f.mutations;p<d.length;p++){var y=d[p];r=r.add(y.key)}}return m.Mn(v,r).next(function(t){return{yi:t,gi:e,vi:n}})})})];case 1:return n=t.sent(),[2,(this.Fn=e,this.Ri=m,this.li.Pi(this.Ri),n)]}})})},cu.prototype.bi=function(h){var c,l=this,f=Wr.now(),t=h.reduce(function(t,e){return t.add(e.key)},Ui());return this.persistence.runTransaction("Locally write mutations","readwrite",function(u){return l.Ri.Mn(u,t).next(function(t){c=t;for(var a,e,n=[],r=0,i=h;r<i.length;r++){var o=i[r],s=(a=o,e=c.get(o.key),a instanceof Ns?function(t){for(var e=null,n=0,r=a.fieldTransforms;n<r.length;n++){var i=r[n],o=t instanceof Bs?t.field(i.field):void 0,s=Bo(i.transform,o||null);null!=s&&(e=null==e?(new Ps).set(i.field,s):e.set(i.field,s))}return e?e.Ke():null}(e):null);null!=s&&n.push(new ws(o.key,s,Ms(s.proto.mapValue),hs.exists(!0)))}return l.Fn.Si(u,f,n,h)})}).then(function(t){var e=t.mn(c);return{batchId:t.batchId,Ci:e}})},cu.prototype.Di=function(r){var i=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var e=r.batch.keys(),n=i.Ti.Fi({$i:!0});return i.Ni(t,r,n).next(function(){return n.apply(t)}).next(function(){return i.Fn.ki(t)}).next(function(){return i.Ri.Mn(t,e)})})},cu.prototype.xi=function(t){var r=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",function(e){var n;return r.Fn.Oi(e,t).next(function(t){return _r(null!==t),n=t.keys(),r.Fn.Li(e,t)}).next(function(){return r.Fn.ki(e)}).next(function(){return r.Ri.Mn(e,n)})})},cu.prototype.Mi=function(){var e=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.Fn.Mi(t)})},cu.prototype.qi=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.mi.qi(t)})},cu.prototype.Ui=function(u){var h=this,c=u.J,l=this._i;return this.persistence.runTransaction("Apply remote event","readwrite-primary",function(o){var i=h.Ti.Fi({$i:!0});l=h._i;var s=[];u.Wt.forEach(function(t,e){var n,r,i=l.get(e);i&&(s.push(h.mi.Bi(o,t.Jt,e).next(function(){return h.mi.Wi(o,t.Yt,e)})),0<(n=t.resumeToken).H()&&(r=i.tt(n,c).Z(o.Qi),l=l.nt(e,r),cu.ji(i,r,t)&&s.push(h.mi.Gi(o,r))))});var t,a=Li,n=Ui();return u.jt.forEach(function(t,e){n=n.add(t)}),s.push(i.getEntries(o,n).next(function(r){u.jt.forEach(function(t,e){var n=r.get(t);e instanceof Gs&&e.version.isEqual(Hr.min())?(i.Ki(t,c),a=a.nt(t,e)):null==n||0<e.version.o(n.version)||0===e.version.o(n.version)&&n.hasPendingWrites?(i.zi(e,c),a=a.nt(t,e)):Ir("LocalStore","Ignoring outdated watch update for ",t,". Current version:",n.version," Watch version:",e.version),u.Gt.has(t)&&s.push(h.persistence.Yi.Hi(o,t))})})),c.isEqual(Hr.min())||(t=h.mi.qi(o).next(function(t){return h.mi.Xi(o,o.Qi,c)}),s.push(t)),Ca.Sn(s).next(function(){return i.apply(o)}).next(function(){return h.Ri.qn(o,a)})}).then(function(t){return h._i=l,t})},cu.ji=function(t,e,n){return _r(0<e.resumeToken.H()),0===t.resumeToken.H()||e.J.I()-t.J.I()>=this.Ji||0<n.Yt.size+n.Xt.size+n.Jt.size},cu.prototype.Zi=function(c){return d(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,h=this;return y(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return Ca.forEach(c,function(e){return Ca.forEach(e.Hn,function(t){return h.persistence.Yi.tr(n,e.targetId,t)}).next(function(){return Ca.forEach(e.Yn,function(t){return h.persistence.Yi.er(n,e.targetId,t)})})})})];case 1:return t.sent(),[3,3];case 2:if(!tu(e=t.sent()))throw e;return Ir("LocalStore","Failed to update sequence numbers: "+e),[3,3];case 3:for(n=0,r=c;n<r.length;n++)i=r[n],o=i.targetId,i.fromCache||(s=this._i.get(o),a=s.J,u=s.et(a),this._i=this._i.nt(o,u));return[2]}})})},cu.prototype.nr=function(e){var n=this;return this.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.Fn.sr(t,e)})},cu.prototype.ir=function(e){var n=this;return this.persistence.runTransaction("read document","readonly",function(t){return n.Ri.Nn(t,e)})},cu.prototype.rr=function(r){var i=this;return this.persistence.runTransaction("Allocate target","readwrite",function(e){var n;return i.mi.or(e,r).next(function(t){return t?(n=t,Ca.resolve(n)):i.mi.hr(e).next(function(t){return n=new gi(r,t,0,e.Qi),i.mi.ar(e,n).next(function(){return n})})})}).then(function(t){var e=i._i.get(t.targetId);return(null===e||0<t.J.o(e.J))&&(i._i=i._i.nt(t.targetId,t),i.fi.set(r,t.targetId)),t})},cu.prototype.or=function(t,e){var n=this.fi.get(e);return void 0!==n?Ca.resolve(this._i.get(n)):this.mi.or(t,e)},cu.prototype.ur=function(o,s){return d(this,void 0,void 0,function(){var e,n,r,i=this;return y(this,function(t){switch(t.label){case 0:e=this._i.get(o),n=s?"readwrite":"readwrite-primary",t.label=1;case 1:return t.trys.push([1,4,,5]),s?[3,3]:[4,this.persistence.runTransaction("Release target",n,function(t){return i.persistence.Yi.removeTarget(t,e)})];case 2:t.sent(),t.label=3;case 3:return[3,5];case 4:if(!tu(r=t.sent()))throw r;return Ir("LocalStore","Failed to update sequence numbers for target "+o+": "+r),[3,5];case 5:return this._i=this._i.remove(o),this.fi.delete(e.target),[2]}})})},cu.prototype.cr=function(t,n){var r=this,i=Hr.min(),o=Ui();return this.persistence.runTransaction("Execute query","readonly",function(e){return r.or(e,ta(t)).next(function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.mi.lr(e,t.targetId).next(function(t){o=t})}).next(function(){return r.li.Bn(e,t,n?i:Hr.min(),n?o:Ui())}).next(function(t){return{documents:t,_r:o}})})},cu.prototype.Ni=function(t,i,o){var e=this,s=i.batch,n=s.keys(),a=Ca.resolve();return n.forEach(function(r){a=a.next(function(){return o.On(t,r)}).next(function(t){var e=t,n=i.Rn.get(r);_r(null!==n),(!e||e.version.o(n)<0)&&(e=s.wn(r,e,i))&&o.zi(e,i.In)})}),a.next(function(){return e.Fn.Li(t,s)})},cu.prototype.dr=function(e){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(t){return e.wr(t,n._i)})},cu);function cu(t,e,n){this.persistence=t,this.li=e,this._i=new Ei(Lr),this.fi=new qr(hi,ci),this.di=Hr.min(),this.Fn=t.wi(n),this.Ti=t.Ei(),this.mi=t.Ii(),this.Ri=new Ua(this.Ti,this.Fn,this.persistence.Ai()),this.li.Pi(this.Ri)}function lu(e){return d(this,void 0,void 0,function(){return y(this,function(t){if(e.code!==Br.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;return Ir("LocalStore","Unexpectedly lost primary lease"),[2]})})}hu.Ji=3e8;var fu=(yu.prototype._=function(){return this.Tr._()},yu.prototype.tr=function(t,e){var n=new pu(t,e);this.Tr=this.Tr.add(n),this.mr=this.mr.add(n)},yu.prototype.Rr=function(t,e){var n=this;t.forEach(function(t){return n.tr(t,e)})},yu.prototype.er=function(t,e){this.Ar(new pu(t,e))},yu.prototype.Pr=function(t,e){var n=this;t.forEach(function(t){return n.er(t,e)})},yu.prototype.Vr=function(t){var e=this,n=new Qr(new Yr([])),r=new pu(n,t),i=new pu(n,t+1),o=[];return this.mr.bt([r,i],function(t){e.Ar(t),o.push(t.key)}),o},yu.prototype.pr=function(){var e=this;this.Tr.forEach(function(t){return e.Ar(t)})},yu.prototype.Ar=function(t){this.Tr=this.Tr.delete(t),this.mr=this.mr.delete(t)},yu.prototype.yr=function(t){var e=new Qr(new Yr([])),n=new pu(e,t),r=new pu(e,t+1),i=Ui();return this.mr.bt([n,r],function(t){i=i.add(t.key)}),i},yu.prototype.gr=function(t){var e=new pu(t,0),n=this.Tr.Ct(e);return null!==n&&t.isEqual(n.key)},yu),pu=(du.Er=function(t,e){return Qr.P(t.key,e.key)||Lr(t.vr,e.vr)},du.Ir=function(t,e){return Lr(t.vr,e.vr)||Qr.P(t.key,e.key)},du);function du(t,e){this.key=t,this.vr=e}function yu(){this.Tr=new Ri(pu.Er),this.mr=new Ri(pu.Ir)}function vu(t,e){if(0!==e.length)throw new Gr(Br.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+Vu(e.length,"argument")+".")}function gu(t,e,n){if(e.length!==n)throw new Gr(Br.INVALID_ARGUMENT,"Function "+t+"() requires "+Vu(n,"argument")+", but was called with "+Vu(e.length,"argument")+".")}function mu(t,e,n){if(e.length<n)throw new Gr(Br.INVALID_ARGUMENT,"Function "+t+"() requires at least "+Vu(n,"argument")+", but was called with "+Vu(e.length,"argument")+".")}function wu(t,e,n,r){if(e.length<n||e.length>r)throw new Gr(Br.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+Vu(e.length,"argument")+".")}function bu(t,e,n,r){_u(t,e,ku(n)+" argument",r)}function Eu(t,e,n,r){void 0!==r&&bu(t,e,n,r)}function Iu(t,e,n,r){_u(t,e,n+" option",r)}function Tu(t,e,n,r){void 0!==r&&Iu(t,e,n,r)}function Nu(t,e,n,r,u){void 0!==r&&function(t,e,n){for(var r=[],i=0,o=u;i<o.length;i++){var s=o[i];if(s===n)return;r.push(Ru(s))}var a=Ru(n);throw new Gr(Br.INVALID_ARGUMENT,"Invalid value "+a+" provided to function "+t+'() for option "'+e+'". Acceptable values: '+r.join(", "))}(t,n,r)}function Au(t,e,n,r){if(!e.some(function(t){return t===r}))throw new Gr(Br.INVALID_ARGUMENT,"Invalid value "+Ru(r)+" provided to function "+t+"() for its "+ku(n)+" argument. Acceptable values: "+e.join(", "));return r}function _u(t,e,n,r){if(!("object"===e?Su(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=Ru(r);throw new Gr(Br.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function Su(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function Ru(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":Ar();if(e instanceof Array)return"an array";var t=function(){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}();return t?"a custom "+t+" object":"an object"}function Du(t,e,n){if(void 0===n)throw new Gr(Br.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+ku(e)+" argument, but it was undefined.")}function Lu(n,t,r){Ur(t,function(t,e){if(r.indexOf(t)<0)throw new Gr(Br.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+n+"(). Available options: "+r.join(", "))})}function Ou(t,e,n,r){var i=Ru(r);return new Gr(Br.INVALID_ARGUMENT,"Function "+t+"() requires its "+ku(n)+" argument to be a "+e+", but it was: "+i)}function Pu(t,e,n){if(n<=0)throw new Gr(Br.INVALID_ARGUMENT,"Function "+t+"() requires its "+ku(e)+" argument to be a positive number, but it was: "+n+".")}function ku(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function Vu(t,e){return t+" "+e+(1===t?"":"s")}function Cu(){if("undefined"==typeof Uint8Array)throw new Gr(Br.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Uu(){if("undefined"==typeof atob)throw new Gr(Br.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Mu,xu,Fu=(Yu.fromBase64String=function(t){gu("Blob.fromBase64String",arguments,1),bu("Blob.fromBase64String","string",1,t),Uu();try{return new Yu(fi.fromBase64String(t))}catch(t){throw new Gr(Br.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},Yu.fromUint8Array=function(t){if(gu("Blob.fromUint8Array",arguments,1),Cu(),!(t instanceof Uint8Array))throw Ou("Blob.fromUint8Array","Uint8Array",1,t);return new Yu(fi.fromUint8Array(t))},Yu.prototype.toBase64=function(){return gu("Blob.toBase64",arguments,0),Uu(),this.br.toBase64()},Yu.prototype.toUint8Array=function(){return gu("Blob.toUint8Array",arguments,0),Cu(),this.br.toUint8Array()},Yu.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},Yu.prototype.isEqual=function(t){return this.br.isEqual(t.br)},Yu),ju=function(t){!function(){if(!(t instanceof Array)||t.length<1)throw new Gr(Br.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least 1 element.")}();for(var e=0;e<t.length;++e)if(bu("FieldPath","string",e,t[e]),0===t[e].length)throw new Gr(Br.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.Sr=new Xr(t)},qu=(n(zu,xu=ju),zu.documentId=function(){return new zu(Xr.M().$())},zu.prototype.isEqual=function(t){if(!(t instanceof zu))throw Ou("isEqual","FieldPath",1,t);return this.Sr.isEqual(t.Sr)},zu),Bu=new RegExp("[~\\*/\\[\\]]"),Gu=function(){this.Cr=this},Wu=(n(Hu,Mu=Gu),Hu.prototype.Fr=function(t){if(2!==t.$r)throw 1===t.$r?t.Nr(this.Dr+"() can only appear at the top level of your update data"):t.Nr(this.Dr+"() cannot be used with set() unless you pass {merge:true}");return t.Me.push(t.path),null},Hu.prototype.isEqual=function(t){return t instanceof Hu},Hu);function Hu(t){var e=this;return(e=Mu.call(this)||this).Dr=t,e}function zu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return xu.call(this,t)||this}function Yu(t){Uu(),this.br=t}function $u(t,e,n){return new Th({$r:3,kr:e.settings.kr,methodName:t.Dr,xr:n},e.s,e.serializer,e.ignoreUndefinedProperties)}var Xu,Qu,Ku,Ju,Zu,th,eh=(n(dh,th=Gu),dh.prototype.Fr=function(t){return new os(t.path,new Ho)},dh.prototype.isEqual=function(t){return t instanceof dh},dh),nh=(n(ph,Zu=Gu),ph.prototype.Fr=function(t){var e=$u(this,t,!0),n=this.Or.map(function(t){return Oh(t,e)}),r=new zo(n);return new os(t.path,r)},ph.prototype.isEqual=function(t){return this===t},ph),rh=(n(fh,Ju=Gu),fh.prototype.Fr=function(t){var e=$u(this,t,!0),n=this.Or.map(function(t){return Oh(t,e)}),r=new Ko(n);return new os(t.path,r)},fh.prototype.isEqual=function(t){return this===t},fh),ih=(n(lh,Ku=Gu),lh.prototype.Fr=function(t){var e=new es(t.serializer,So(t.serializer,this.Lr));return new os(t.path,e)},lh.prototype.isEqual=function(t){return this===t},lh),oh=(n(ch,Qu=Gu),ch.delete=function(){return vu("FieldValue.delete",arguments),new sh(new Wu("FieldValue.delete"))},ch.serverTimestamp=function(){return vu("FieldValue.serverTimestamp",arguments),new sh(new eh("FieldValue.serverTimestamp"))},ch.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return mu("FieldValue.arrayUnion",arguments,1),new sh(new nh("FieldValue.arrayUnion",t))},ch.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return mu("FieldValue.arrayRemove",arguments,1),new sh(new rh("FieldValue.arrayRemove",t))},ch.increment=function(t){return bu("FieldValue.increment","number",1,t),gu("FieldValue.increment",arguments,1),new sh(new ih("FieldValue.increment",t))},ch),sh=(n(hh,Xu=oh),hh.prototype.Fr=function(t){return this.Cr.Fr(t)},hh.prototype.isEqual=function(t){return t instanceof hh&&this.Cr.isEqual(t.Cr)},hh),ah=(Object.defineProperty(uh.prototype,"latitude",{get:function(){return this.Mr},enumerable:!1,configurable:!0}),Object.defineProperty(uh.prototype,"longitude",{get:function(){return this.qr},enumerable:!1,configurable:!0}),uh.prototype.isEqual=function(t){return this.Mr===t.Mr&&this.qr===t.qr},uh.prototype.T=function(t){return Lr(this.Mr,t.Mr)||Lr(this.qr,t.qr)},uh);function uh(t,e){if(gu("GeoPoint",arguments,2),bu("GeoPoint","number",1,t),bu("GeoPoint","number",2,e),!isFinite(t)||t<-90||90<t)throw new Gr(Br.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new Gr(Br.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.Mr=t,this.qr=e}function hh(t){var e=this;return(e=Xu.call(this)||this).Cr=t,e.Dr=t.Dr,e}function ch(){return Qu.call(this)||this}function lh(t,e){var n=this;return(n=Ku.call(this)||this).Dr=t,n.Lr=e,n}function fh(t,e){var n=this;return(n=Ju.call(this)||this).Dr=t,n.Or=e,n}function ph(t,e){var n=this;return(n=Zu.call(this)||this).Dr=t,n.Or=e,n}function dh(t){var e=this;return(e=th.call(this)||this).Dr=t,e}function yh(t){return new No(t,!0)}var vh=/^__.*__$/,gh=function(t,e,n){this.Ur=t,this.Br=e,this.Wr=n},mh=(Eh.prototype.Qr=function(t,e){var n=[];return null!==this.Me?n.push(new ws(t,this.data,this.Me,e)):n.push(new ms(t,this.data,e)),0<this.fieldTransforms.length&&n.push(new Ns(t,this.fieldTransforms)),n},Eh),wh=(bh.prototype.Qr=function(t,e){var n=[new ws(t,this.data,this.Me,e)];return 0<this.fieldTransforms.length&&n.push(new Ns(t,this.fieldTransforms)),n},bh);function bh(t,e,n){this.data=t,this.Me=e,this.fieldTransforms=n}function Eh(t,e,n){this.data=t,this.Me=e,this.fieldTransforms=n}function Ih(t){switch(t){case 0:case 2:case 1:return 1;case 3:case 4:return;default:throw Ar()}}var Th=(Object.defineProperty(_h.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(_h.prototype,"$r",{get:function(){return this.settings.$r},enumerable:!1,configurable:!0}),_h.prototype.Gr=function(t){return new _h(Object.assign(Object.assign({},this.settings),t),this.s,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.Me)},_h.prototype.Kr=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Gr({path:n,xr:!1});return r.zr(t),r},_h.prototype.Hr=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Gr({path:n,xr:!1});return r.jr(),r},_h.prototype.Yr=function(t){return this.Gr({path:void 0,xr:!0})},_h.prototype.Nr=function(t){return Mh(t,this.settings.methodName,this.settings.Xr||!1,this.path,this.settings.kr)},_h.prototype.contains=function(e){return void 0!==this.Me.find(function(t){return e.C(t)})||void 0!==this.fieldTransforms.find(function(t){return e.C(t.field)})},_h.prototype.jr=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.zr(this.path.get(t))},_h.prototype.zr=function(t){if(0===t.length)throw this.Nr("Document fields must not be empty");if(Ih(this.$r)&&vh.test(t))throw this.Nr('Document fields cannot begin and end with "__"')},_h),Nh=(Ah.prototype.Jr=function(t,e,n,r){return void 0===r&&(r=!1),new Th({$r:t,methodName:e,kr:n,path:Xr.k(),xr:!1,Xr:r},this.s,this.serializer,this.ignoreUndefinedProperties)},Ah);function Ah(t,e,n){this.s=t,this.ignoreUndefinedProperties=e,this.serializer=n||yh(t)}function _h(t,e,n,r,i,o){this.settings=t,this.s=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.jr(),this.fieldTransforms=i||[],this.Me=o||[]}function Sh(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Jr(o.merge||o.mergeFields?2:0,e,n,i);Vh("Data must be an object, but it was:",s,r);var a,u,h=Ph(r,s);if(o.merge)a=new ss(s.Me),u=s.fieldTransforms;else if(o.mergeFields){for(var c=[],l=0,f=o.mergeFields;l<f.length;l++){var p=f[l],d=void 0;if(p instanceof ju)d=p.Sr;else{if("string"!=typeof p)throw Ar();d=Uh(e,p,n)}if(!s.contains(d))throw new Gr(Br.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");xh(c,d)||c.push(d)}a=new ss(c),u=s.fieldTransforms.filter(function(t){return a.Qe(t.field)})}else a=null,u=s.fieldTransforms;return new mh(new Os(h),a,u)}function Rh(t,o,s,e){var a=t.Jr(1,o,s);Vh("Data must be an object, but it was:",a,e);var u=[],h=new Ps;Ur(e,function(t,e){var n,r=Uh(o,t,s),i=a.Hr(r);e instanceof Gu&&e.Cr instanceof Wu?u.push(r):null!=(n=Oh(e,i))&&(u.push(r),h.set(r,n))});var n=new ss(u);return new wh(h.Ke(),n,a.fieldTransforms)}function Dh(t,e,n,r,i,o){var s=t.Jr(1,e,n),a=[Ch(e,r,n)],u=[i];if(o.length%2!=0)throw new Gr(Br.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var h=0;h<o.length;h+=2)a.push(Ch(e,o[h])),u.push(o[h+1]);for(var c,l,f,p,d=[],y=new Ps,v=a.length-1;0<=v;--v){xh(d,a[v])||(c=a[v],l=u[v],f=s.Hr(c),l instanceof Gu&&l.Cr instanceof Wu?d.push(c):null!=(p=Oh(l,f))&&(d.push(c),y.set(c,p)))}var g=new ss(d);return new wh(y.Ke(),g,s.fieldTransforms)}function Lh(t,e,n,r){return void 0===r&&(r=!1),Oh(n,t.Jr(r?4:3,e))}function Oh(s,t){if(kh(s))return Vh("Unsupported field value:",t,s),Ph(s,t);if(s instanceof Gu)return function(t,e){if(!Ih(e.$r))throw e.Nr(t.Dr+"() can only be used with update() and set()");if(!e.path)throw e.Nr(t.Dr+"() is not currently supported inside arrays");var n=t.Fr(e);n&&e.fieldTransforms.push(n)}(s,t),null;if(t.path&&t.Me.push(t.path),s instanceof Array){if(t.settings.xr&&4!==t.$r)throw t.Nr("Nested arrays are not supported");return function(t){for(var e=[],n=0,r=0,i=s;r<i.length;r++){var o=Oh(i[r],t.Yr(n));null==o&&(o={nullValue:"NULL_VALUE"}),e.push(o),n++}return{arrayValue:{values:e}}}(t)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return So(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Wr.fromDate(t);return{timestampValue:Ro(e.serializer,n)}}if(t instanceof Wr){var r=new Wr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ro(e.serializer,r)}}if(t instanceof ah)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Fu)return{bytesValue:Do(e.serializer,t)};if(t instanceof gh){var i=e.s,o=t.Ur;if(!o.isEqual(i))throw e.Nr("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:Oo(t.Ur||e.s,t.Br.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.Nr("Unsupported field value: "+Ru(t))}(s,t)}function Ph(t,r){var i={};return Mr(t)?r.path&&0<r.path.length&&r.Me.push(r.path):Ur(t,function(t,e){var n=Oh(e,r.Kr(t));null!=n&&(i[t]=n)}),{mapValue:{fields:i}}}function kh(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Wr||t instanceof ah||t instanceof Fu||t instanceof gh||t instanceof Gu)}function Vh(t,e,n){if(!kh(n)||!Su(n)){var r=Ru(n);throw"an object"===r?e.Nr(t+" a custom object"):e.Nr(t+" "+r)}}function Ch(t,e,n){if(e instanceof ju)return e.Sr;if("string"==typeof e)return Uh(t,e);throw Mh("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}function Uh(t,e,n){try{return function(e){if(0<=e.search(Bu))throw new Gr(Br.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(qu.bind.apply(qu,v([void 0],e.split("."))))}catch(t){throw new Gr(Br.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).Sr}catch(e){throw Mh(e instanceof Error?e.message:e.toString(),t,!1,void 0,n)}}function Mh(t,e,n,r,i){var o=r&&!r._(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Gr(Br.INVALID_ARGUMENT,(a+=". ")+t+u)}function xh(t,e){return t.some(function(t){return t.isEqual(e)})}var Fh=(jh.prototype.Zr=function(){return null!=this.uid},jh.prototype.to=function(){return this.Zr()?"uid:"+this.uid:"anonymous-user"},jh.prototype.isEqual=function(t){return t.uid===this.uid},jh);function jh(t){this.uid=t}function qh(t,e){this.user=e,this.type="OAuth",this.so={},this.so.Authorization="Bearer "+t}function Bh(t){this.key=t}function Gh(t){this.key=t}function Wh(t,e,n){this.query=t,this.targetId=e,this.view=n}function Hh(t){this.key=t,this.Qa=!1}function zh(){this.Vu=void 0,this.listeners=[]}Fh.UNAUTHENTICATED=new Fh(null),Fh.eo=new Fh("google-credentials-uid"),Fh.no=new Fh("first-party-uid");var Yh,$h,Xh,Qh,Kh=(xc.prototype.getToken=function(){return Promise.resolve(null)},xc.prototype.ro=function(){},xc.prototype.oo=function(t){(this.io=t)(Fh.UNAUTHENTICATED)},xc.prototype.ho=function(){this.io=null},xc),Jh=(Mc.prototype.getToken=function(){var e=this,n=this.co,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(function(t){return e.co!==n?(Ir("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):t?(_r("string"==typeof t.accessToken),new qh(t.accessToken,e.currentUser)):null}):Promise.resolve(null)},Mc.prototype.ro=function(){this.forceRefresh=!0},Mc.prototype.oo=function(t){this.io=t,this.uo&&t(this.currentUser)},Mc.prototype.ho=function(){this.auth&&this.auth.removeAuthTokenListener(this.ao),this.ao=null,this.io=null},Mc.prototype.lo=function(){var t=this.auth&&this.auth.getUid();return _r(null===t||"string"==typeof t),new Fh(t)},Mc),Zh=(Object.defineProperty(Uc.prototype,"so",{get:function(){var t={"X-Goog-AuthUser":this.fo},e=this._o.auth.do([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),Uc),tc=(Cc.prototype.getToken=function(){return Promise.resolve(new Zh(this._o,this.fo))},Cc.prototype.oo=function(t){t(Fh.no)},Cc.prototype.ho=function(){},Cc.prototype.ro=function(){},Cc),ec=(Vc.prototype.Ro=function(){return 1===this.state||2===this.state||4===this.state},Vc.prototype.Ao=function(){return 2===this.state},Vc.prototype.start=function(){3!==this.state?this.auth():this.Po()},Vc.prototype.stop=function(){return d(this,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return this.Ro()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},Vc.prototype.Vo=function(){this.state=0,this.Ls.reset()},Vc.prototype.po=function(){var t=this;this.Ao()&&null===this.Io&&(this.Io=this.ss.ws(this.wo,6e4,function(){return t.yo()}))},Vc.prototype.vo=function(t){this.bo(),this.stream.send(t)},Vc.prototype.yo=function(){return d(this,void 0,void 0,function(){return y(this,function(t){return this.Ao()?[2,this.close(0)]:[2]})})},Vc.prototype.bo=function(){this.Io&&(this.Io.cancel(),this.Io=null)},Vc.prototype.close=function(e,n){return d(this,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return this.bo(),this.Ls.cancel(),this.mo++,3!==e?this.Ls.reset():n&&n.code===Br.RESOURCE_EXHAUSTED?(Tr(n.toString()),Tr("Using maximum backoff delay to prevent overloading the backend."),this.Ls._s()):n&&n.code===Br.UNAUTHENTICATED&&this.Eo.ro(),null!==this.stream&&(this.So(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Co(n)];case 1:return t.sent(),[2]}})})},Vc.prototype.So=function(){},Vc.prototype.auth=function(){var n=this;this.state=1;var t=this.Do(this.mo),e=this.mo;this.Eo.getToken().then(function(t){n.mo===e&&n.Fo(t)},function(e){t(function(){var t=new Gr(Br.UNKNOWN,"Fetching auth token failed: "+e.message);return n.$o(t)})})},Vc.prototype.Fo=function(t){var e=this,n=this.Do(this.mo);this.stream=this.No(t),this.stream.ko(function(){n(function(){return e.state=2,e.listener.ko()})}),this.stream.Co(function(t){n(function(){return e.$o(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},Vc.prototype.Po=function(){var t=this;this.state=4,this.Ls.fs(function(){return d(t,void 0,void 0,function(){return y(this,function(t){return this.state=0,this.start(),[2]})})})},Vc.prototype.$o=function(t){return Ir("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},Vc.prototype.Do=function(e){var n=this;return function(t){n.ss.Cs(function(){return n.mo===e?t():(Ir("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},Vc),nc=(n(kc,Xh=ec),kc.prototype.No=function(t){return this.To.xo("Listen",t)},kc.prototype.onMessage=function(t){this.Ls.reset();var e=function(t,e){var n,r,i,o;if("targetChange"in e){e.targetChange;var s="NO_CHANGE"===(o=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===o?1:"REMOVE"===o?2:"CURRENT"===o?3:"RESET"===o?4:Ar(),a=e.targetChange.targetIds||[],u=(i=e.targetChange.resumeToken,t.Le?(_r(void 0===i||"string"==typeof i),fi.fromBase64String(i||"")):(_r(void 0===i||i instanceof Uint8Array),fi.fromUint8Array(i||new Uint8Array))),h=e.targetChange.cause,c=new ji(s,a,u,h&&(r=void 0===(n=h).code?Br.UNKNOWN:bi(n.code),new Gr(r,n.message||""))||null)}else if("documentChange"in e){e.documentChange;var l=e.documentChange;l.document,l.document.name,l.document.updateTime;var f=ko(t,l.document.name),p=Lo(l.document.updateTime),d=new Os({mapValue:{fields:l.document.fields}}),y=new Bs(f,p,d,{});c=new xi(l.targetIds||[],l.removedTargetIds||[],y.key,y)}else if("documentDelete"in e){e.documentDelete;var v=e.documentDelete;v.document;var g=ko(t,v.document),m=v.readTime?Lo(v.readTime):Hr.min(),w=new Gs(g,m);c=new xi([],v.removedTargetIds||[],w.key,w)}else if("documentRemove"in e){e.documentRemove;var b=e.documentRemove;b.document;var E=ko(t,b.document);c=new xi([],b.removedTargetIds||[],E,null)}else{if(!("filter"in e))return Ar();e.filter;var I=e.filter;I.targetId;var T=new di(I.count||0);c=new Fi(I.targetId,T)}return c}(this.serializer,t),n=function(t){if(!("targetChange"in t))return Hr.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length||!e.readTime?Hr.min():Lo(e.readTime)}(t);return this.listener.Oo(e,n)},kc.prototype.Lo=function(t){var e,n,r,i,o={};o.database=Co(this.serializer),o.addTarget=(e=this.serializer,(r=li(i=(n=t).target)?{documents:{documents:[Vo(e,i.path)]}}:{query:function(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Vo(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Vo(t,r.g()),n.structuredQuery.from=[{collectionId:r.S()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return t instanceof ca?function(t){if("=="===t.op){if(bo(t.value))return{unaryFilter:{field:Fo(t.field),op:"IS_NAN"}};if(wo(t.value))return{unaryFilter:{field:Fo(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:Fo(t.field),op:(e=t.op,To[e]),value:t.value}};var e}(t):Ar()});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return{field:Fo((e=t).field),direction:(n=e.dir,Io[n])};var e,n})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s,a=(s=e.limit,t.Le||oi(s)?s:{value:s});return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=xo(e.startAt)),e.endAt&&(n.structuredQuery.endAt=xo(e.endAt)),n}(e,i)}).targetId=n.targetId,0<n.resumeToken.H()&&(r.resumeToken=Do(e,n.resumeToken)),r);var s,a,u=(this.serializer,s=t,null==(a=function(){switch(s.X){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ar()}}())?null:{"goog-listen-tags":a});u&&(o.labels=u),this.vo(o)},kc.prototype.Mo=function(t){var e={};e.database=Co(this.serializer),e.removeTarget=t,this.vo(e)},kc),rc=(n(Pc,$h=ec),Object.defineProperty(Pc.prototype,"Uo",{get:function(){return this.qo},enumerable:!1,configurable:!0}),Pc.prototype.start=function(){this.qo=!1,this.lastStreamToken=void 0,$h.prototype.start.call(this)},Pc.prototype.So=function(){this.qo&&this.Bo([])},Pc.prototype.No=function(t){return this.To.xo("Write",t)},Pc.prototype.onMessage=function(t){if(_r(!!t.streamToken),this.lastStreamToken=t.streamToken,this.qo){this.Ls.reset();var e=(r=t.writeResults,i=t.commitTime,r&&0<r.length?(_r(void 0!==i),r.map(function(t){return function(t,e){var n=t.updateTime?Lo(t.updateTime):Lo(e);n.isEqual(Hr.min())&&(n=Lo(e));var r=null;return t.transformResults&&0<t.transformResults.length&&(r=t.transformResults),new us(n,r)}(t,i)})):[]),n=Lo(t.commitTime);return this.listener.Wo(n,e)}var r,i;return _r(!t.writeResults||0===t.writeResults.length),this.qo=!0,this.listener.Qo()},Pc.prototype.jo=function(){var t={};t.database=Co(this.serializer),this.vo(t)},Pc.prototype.Bo=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return Mo(e.serializer,t)})};this.vo(n)},Pc),ic=(n(Oc,Yh=function(){}),Oc.prototype.Ko=function(){if(this.Go)throw new Gr(Br.FAILED_PRECONDITION,"The client has already been terminated.")},Oc.prototype.start=function(t){this.To=t},Oc.prototype.zo=function(e,n){var r=this;return this.Ko(),this.credentials.getToken().then(function(t){return r.To.zo(e,n,t)}).catch(function(t){throw t.code===Br.UNAUTHENTICATED&&r.credentials.ro(),t})},Oc.prototype.Ho=function(e,n){var r=this;return this.Ko(),this.credentials.getToken().then(function(t){return r.To.Ho(e,n,t)}).catch(function(t){throw t.code===Br.UNAUTHENTICATED&&r.credentials.ro(),t})},Oc),oc=(Lc.prototype.eh=function(r){return d(this,void 0,void 0,function(){var e,n=this;return y(this,function(t){switch(t.label){case 0:if(this.nh(),0<this.mutations.length)throw new Gr(Br.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(s,a){return d(this,void 0,void 0,function(){var i,e,n,o,r;return y(this,function(t){switch(t.label){case 0:return e={database:Co((i=s).serializer),documents:a.map(function(t){return Po(i.serializer,t)})},[4,i.Ho("BatchGetDocuments",e)];case 1:return n=t.sent(),o=new Map,n.forEach(function(t){var e,n,r=(e=i.serializer,"found"in(n=t)?function(t,e){_r(!!e.found),e.found.name,e.found.updateTime;var n=ko(t,e.found.name),r=Lo(e.found.updateTime),i=new Os({mapValue:{fields:e.found.fields}});return new Bs(n,r,i,{})}(e,n):"missing"in n?function(t,e){_r(!!e.missing),_r(!!e.readTime);var n=ko(t,e.missing),r=Lo(e.readTime);return new Gs(n,r)}(e,n):Ar());o.set(r.key.toString(),r)}),r=[],[2,(a.forEach(function(t){var e=o.get(t.toString());_r(!!e),r.push(e)}),r)]}})})}(this.Yo,r)];case 1:return[2,((e=t.sent()).forEach(function(t){t instanceof Gs||t instanceof Bs?n.sh(t):Ar()}),e)]}})})},Lc.prototype.set=function(t,e){this.write(e.Qr(t,this.Be(t))),this.th.add(t)},Lc.prototype.update=function(t,e){try{this.write(e.Qr(t,this.ih(t)))}catch(t){this.Zo=t}this.th.add(t)},Lc.prototype.delete=function(t){this.write([new Ds(t,this.Be(t))]),this.th.add(t)},Lc.prototype.commit=function(){return d(this,void 0,void 0,function(){var e,r=this;return y(this,function(t){switch(t.label){case 0:if(this.nh(),this.Zo)throw this.Zo;return e=this.Xo,this.mutations.forEach(function(t){e.delete(t.key.toString())}),e.forEach(function(t,e){var n=new Qr(Yr.N(e));r.mutations.push(new Ls(n,r.Be(n)))}),[4,function(r,i){return d(this,void 0,void 0,function(){var e,n;return y(this,function(t){switch(t.label){case 0:return n={database:Co((e=r).serializer),writes:i.map(function(t){return Mo(e.serializer,t)})},[4,e.zo("Commit",n)];case 1:return t.sent(),[2]}})})}(this.Yo,this.mutations)];case 1:return t.sent(),this.Jo=!0,[2]}})})},Lc.prototype.sh=function(t){var e;if(t instanceof Bs)e=t.version;else{if(!(t instanceof Gs))throw Ar();e=Hr.min()}var n=this.Xo.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Gr(Br.ABORTED,"Document version changed between two reads.")}else this.Xo.set(t.key.toString(),e)},Lc.prototype.Be=function(t){var e=this.Xo.get(t.toString());return!this.th.has(t)&&e?hs.updateTime(e):hs.je()},Lc.prototype.ih=function(t){var e=this.Xo.get(t.toString());if(this.th.has(t)||!e)return hs.exists(!0);if(e.isEqual(Hr.min()))throw new Gr(Br.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return hs.updateTime(e)},Lc.prototype.write=function(t){this.nh(),this.mutations=this.mutations.concat(t)},Lc.prototype.nh=function(){},Lc),sc=(Dc.prototype.uh=function(){var t=this;0===this.oh&&(this.lh("Unknown"),this.hh=this.Vs.ws("online_state_timeout",1e4,function(){return t.hh=null,t._h("Backend didn't respond within 10 seconds."),t.lh("Offline"),Promise.resolve()}))},Dc.prototype.fh=function(t){"Online"===this.state?this.lh("Unknown"):(this.oh++,1<=this.oh&&(this.dh(),this._h("Connection failed 1 times. Most recent error: "+t.toString()),this.lh("Offline")))},Dc.prototype.set=function(t){this.dh(),this.oh=0,"Online"===t&&(this.ah=!1),this.lh(t)},Dc.prototype.lh=function(t){t!==this.state&&(this.state=t,this.rh(t))},Dc.prototype._h=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.ah?(Tr(e),this.ah=!1):Ir("OnlineStateTracker",e)},Dc.prototype.dh=function(){null!==this.hh&&(this.hh.cancel(),this.hh=null)},Dc),ac=(Rc.prototype.start=function(){return this.enableNetwork()},Rc.prototype.enableNetwork=function(){return this.Ih.delete(0),this.$h()},Rc.prototype.$h=function(){return d(this,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return this.Ph()?(this.Nh()?this.kh():this.ph.set("Unknown"),[4,this.xh()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},Rc.prototype.disableNetwork=function(){return d(this,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return this.Ih.add(0),[4,this.Oh()];case 1:return t.sent(),this.ph.set("Offline"),[2]}})})},Rc.prototype.Oh=function(){return d(this,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return[4,this.Sh.stop()];case 1:return t.sent(),[4,this.yh.stop()];case 2:return t.sent(),0<this.Th.length&&(Ir("RemoteStore","Stopping write stream with "+this.Th.length+" pending writes"),this.Th=[]),this.Lh(),[2]}})})},Rc.prototype.Mh=function(){return d(this,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return Ir("RemoteStore","RemoteStore shutting down."),this.Ih.add(5),[4,this.Oh()];case 1:return t.sent(),this.Rh.Mh(),this.ph.set("Unknown"),[2]}})})},Rc.prototype.listen=function(t){this.Eh.has(t.targetId)||(this.Eh.set(t.targetId,t),this.Nh()?this.kh():this.yh.Ao()&&this.qh(t))},Rc.prototype.Uh=function(t){this.Eh.delete(t),this.yh.Ao()&&this.Bh(t),0===this.Eh.size&&(this.yh.Ao()?this.yh.po():this.Ph()&&this.ph.set("Unknown"))},Rc.prototype.Oe=function(t){return this.Eh.get(t)||null},Rc.prototype.xe=function(t){return this.Wh.xe(t)},Rc.prototype.qh=function(t){this.mh.de(t.targetId),this.yh.Lo(t)},Rc.prototype.Bh=function(t){this.mh.de(t),this.yh.Mo(t)},Rc.prototype.kh=function(){this.mh=new Yi(this),this.yh.start(),this.ph.uh()},Rc.prototype.Nh=function(){return this.Ph()&&!this.yh.Ro()&&0<this.Eh.size},Rc.prototype.Ph=function(){return 0===this.Ih.size},Rc.prototype.Lh=function(){this.mh=null},Rc.prototype.gh=function(){return d(this,void 0,void 0,function(){var n=this;return y(this,function(t){return this.Eh.forEach(function(t,e){n.qh(t)}),[2]})})},Rc.prototype.vh=function(e){return d(this,void 0,void 0,function(){return y(this,function(t){return this.Lh(),this.Nh()?(this.ph.fh(e),this.kh()):this.ph.set("Unknown"),[2]})})},Rc.prototype.bh=function(i,o){return d(this,void 0,void 0,function(){var e,n,r;return y(this,function(t){switch(t.label){case 0:if(this.ph.set("Online"),!(i instanceof ji&&2===i.state&&i.cause))return[3,6];t.label=1;case 1:return t.trys.push([1,3,,5]),[4,this.Qh(i)];case 2:return t.sent(),[3,5];case 3:return e=t.sent(),Ir("RemoteStore","Failed to remove targets %s: %s ",i.targetIds.join(","),e),[4,this.jh(e)];case 4:return t.sent(),[3,5];case 5:return[3,13];case 6:if(i instanceof xi?this.mh.Pe(i):i instanceof Fi?this.mh.Ce(i):this.mh.ye(i),o.isEqual(Hr.min()))return[3,13];t.label=7;case 7:return t.trys.push([7,11,,13]),[4,this.wh.qi()];case 8:return n=t.sent(),0<=o.o(n)?[4,this.Gh(o)]:[3,10];case 9:t.sent(),t.label=10;case 10:return[3,13];case 11:return Ir("RemoteStore","Failed to raise snapshot:",r=t.sent()),[4,this.jh(r)];case 12:return t.sent(),[3,13];case 13:return[2]}})})},Rc.prototype.jh=function(n,r){return d(this,void 0,void 0,function(){var e=this;return y(this,function(t){switch(t.label){case 0:if(!tu(n))throw n;return this.Ih.add(1),[4,this.Oh()];case 1:return t.sent(),this.ph.set("Offline"),r=r||function(){return e.wh.qi()},this.Vs.Gs(function(){return d(e,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return Ir("RemoteStore","Retrying IndexedDB access"),[4,r()];case 1:return t.sent(),this.Ih.delete(1),[4,this.$h()];case 2:return t.sent(),[2]}})})}),[2]}})})},Rc.prototype.Kh=function(e){var n=this;return e().catch(function(t){return n.jh(t,e)})},Rc.prototype.Gh=function(r){var i=this,t=this.mh.$e(r);return t.Wt.forEach(function(t,e){var n;0<t.resumeToken.H()&&((n=i.Eh.get(e))&&i.Eh.set(e,n.tt(t.resumeToken,r)))}),t.Qt.forEach(function(t){var e,n=i.Eh.get(t);n&&(i.Eh.set(t,n.tt(fi.Y,n.J)),i.Bh(t),e=new gi(n.target,t,1,n.sequenceNumber),i.qh(e))}),this.Wh.Ui(t)},Rc.prototype.Qh=function(o){return d(this,void 0,void 0,function(){var e,n,r,i;return y(this,function(t){switch(t.label){case 0:e=o.cause,n=0,r=o.targetIds,t.label=1;case 1:return n<r.length?(i=r[n],this.Eh.has(i)?[4,this.Wh.zh(i,e)]:[3,3]):[3,5];case 2:t.sent(),this.Eh.delete(i),this.mh.removeTarget(i),t.label=3;case 3:t.label=4;case 4:return n++,[3,1];case 5:return[2]}})})},Rc.prototype.xh=function(){return d(this,void 0,void 0,function(){var e,n,r;return y(this,function(t){switch(t.label){case 0:e=0<this.Th.length?this.Th[this.Th.length-1].batchId:-1,t.label=1;case 1:if(!this.Hh())return[3,7];t.label=2;case 2:return t.trys.push([2,4,,6]),[4,this.wh.nr(e)];case 3:return null===(n=t.sent())?(0===this.Th.length&&this.Sh.po(),[3,7]):(e=n.batchId,this.Yh(n),[3,6]);case 4:return r=t.sent(),[4,this.jh(r)];case 5:return t.sent(),[3,6];case 6:return[3,1];case 7:return this.Xh()&&this.Jh(),[2]}})})},Rc.prototype.Hh=function(){return this.Ph()&&this.Th.length<10},Rc.prototype.Zh=function(){return this.Th.length},Rc.prototype.Yh=function(t){this.Th.push(t),this.Sh.Ao()&&this.Sh.Uo&&this.Sh.Bo(t.mutations)},Rc.prototype.Xh=function(){return this.Ph()&&!this.Sh.Ro()&&0<this.Th.length},Rc.prototype.Jh=function(){this.Sh.start()},Rc.prototype.Ch=function(){return d(this,void 0,void 0,function(){return y(this,function(t){return this.Sh.jo(),[2]})})},Rc.prototype.Fh=function(){return d(this,void 0,void 0,function(){var e,n,r;return y(this,function(t){for(e=0,n=this.Th;e<n.length;e++)r=n[e],this.Sh.Bo(r.mutations);return[2]})})},Rc.prototype.Wo=function(i,o){return d(this,void 0,void 0,function(){var e,n,r=this;return y(this,function(t){switch(t.label){case 0:return e=this.Th.shift(),n=Va.from(e,i,o),[4,this.Kh(function(){return r.Wh.ta(n)})];case 1:return t.sent(),[4,this.xh()];case 2:return t.sent(),[2]}})})},Rc.prototype.Dh=function(e){return d(this,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return e&&this.Sh.Uo?[4,this.ea(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.Xh()&&this.Jh(),[2]}})})},Rc.prototype.ea=function(i){return d(this,void 0,void 0,function(){var e,n,r=this;return y(this,function(t){switch(t.label){case 0:return wi(n=i.code)&&n!==Br.ABORTED?(e=this.Th.shift(),this.Sh.Vo(),[4,this.Kh(function(){return r.Wh.na(e.batchId,i)})]):[3,3];case 1:return t.sent(),[4,this.xh()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},Rc.prototype.sa=function(){return new oc(this.Yo)},Rc.prototype.Vh=function(){return d(this,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return this.Ih.add(4),[4,this.Oh()];case 1:return t.sent(),this.ph.set("Unknown"),this.Sh.Vo(),this.yh.Vo(),this.Ih.delete(4),[4,this.$h()];case 2:return t.sent(),[2]}})})},Rc.prototype.ia=function(e){return d(this,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return this.Vs.Hs(),Ir("RemoteStore","RemoteStore received new credentials"),this.Ih.add(3),[4,this.Oh()];case 1:return t.sent(),this.ph.set("Unknown"),[4,this.Wh.ia(e)];case 2:return t.sent(),this.Ih.delete(3),[4,this.$h()];case 3:return t.sent(),[2]}})})},Rc.prototype.ra=function(e){return d(this,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return e?(this.Ih.delete(2),[4,this.$h()]):[3,2];case 1:return t.sent(),[3,5];case 2:return e?[3,4]:(this.Ih.add(2),[4,this.Oh()]);case 3:t.sent(),this.ph.set("Unknown"),t.label=4;case 4:t.label=5;case 5:return[2]}})})},Rc),uc=(Sc.prototype.oa=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},Sc.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},Sc.prototype.aa=function(){var t={activeTargetIds:this.activeTargetIds.F(),updateTimeMs:Date.now()};return JSON.stringify(t)},Sc),hc=(_c.prototype.la=function(t){},_c.prototype._a=function(t,e,n){},_c.prototype.fa=function(t){return this.ua.oa(t),this.ca[t]||"not-current"},_c.prototype.da=function(t,e,n){this.ca[t]=e},_c.prototype.wa=function(t){this.ua.ha(t)},_c.prototype.Ta=function(t){return this.ua.activeTargetIds.has(t)},_c.prototype.Ea=function(t){delete this.ca[t]},_c.prototype.ma=function(){return this.ua.activeTargetIds},_c.prototype.Ia=function(t){return this.ua.activeTargetIds.has(t)},_c.prototype.start=function(){return this.ua=new uc,Promise.resolve()},_c.prototype.Vi=function(t,e,n){},_c.prototype.Ra=function(t){},_c.prototype.Mh=function(){},_c.prototype.es=function(t){},_c),cc=(Object.defineProperty(Ac.prototype,"ga",{get:function(){return this.Aa},enumerable:!1,configurable:!0}),Ac.prototype.va=function(t,e){var a=this,u=e?e.ba:new Bi,h=e?e.ya:this.ya,c=e?e.Mt:this.Mt,l=h,f=!1,p=this.query.hn()&&h.size===this.query.limit?h.last():null,d=this.query.an()&&h.size===this.query.limit?h.first():null;if(t.ot(function(t,e){var n=h.get(t),r=(r=e instanceof Bs?e:null)&&(aa(a.query,r)?r:null),i=!!n&&a.Mt.has(n.key),o=!!r&&(r.Ge||a.Mt.has(r.key)&&r.hasCommittedMutations),s=!1;n&&r?n.data().isEqual(r.data())?i!==o&&(u.track({type:3,doc:r}),s=!0):a.Sa(n,r)||(u.track({type:2,doc:r}),s=!0,(p&&0<a.pa(r,p)||d&&a.pa(r,d)<0)&&(f=!0)):!n&&r?(u.track({type:0,doc:r}),s=!0):n&&!r&&(u.track({type:1,doc:n}),s=!0,(p||d)&&(f=!0)),s&&(c=r?(l=l.add(r),o?c.add(t):c.delete(t)):(l=l.delete(t),c.delete(t)))}),this.query.hn()||this.query.an())for(;l.size>this.query.limit;){var n=this.query.hn()?l.last():l.first(),l=l.delete(n.key),c=c.delete(n.key);u.track({type:1,doc:n})}return{ya:l,ba:u,Ca:f,Mt:c}},Ac.prototype.Sa=function(t,e){return t.Ge&&e.hasCommittedMutations&&!e.Ge},Ac.prototype.Da=function(t,e,n){var o=this,r=this.ya;this.ya=t.ya,this.Mt=t.Mt;var i=t.ba.Ot();i.sort(function(t,e){return r=t.type,i=e.type,n(r)-n(i)||o.pa(t.doc,e.doc);function n(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ar()}}var r,i}),this.Fa(n);var s=e?this.$a():[],a=0===this.Va.size&&this.Ht?1:0,u=a!==this.Pa;return this.Pa=a,0!==i.length||u?{snapshot:new Gi(this.query,t.ya,r,i,t.Mt,0==a,u,!1),Na:s}:{Na:s}},Ac.prototype.ka=function(t){return this.Ht&&"Offline"===t?(this.Ht=!1,this.Da({ya:this.ya,ba:new Bi,Mt:this.Mt,Ca:!1},!1)):{Na:[]}},Ac.prototype.xa=function(t){return!this.Aa.has(t)&&!!this.ya.has(t)&&!this.ya.get(t).Ge},Ac.prototype.Fa=function(t){var e=this;t&&(t.Yt.forEach(function(t){return e.Aa=e.Aa.add(t)}),t.Xt.forEach(function(t){}),t.Jt.forEach(function(t){return e.Aa=e.Aa.delete(t)}),this.Ht=t.Ht)},Ac.prototype.$a=function(){var e=this;if(!this.Ht)return[];var n=this.Va;this.Va=Ui(),this.ya.forEach(function(t){e.xa(t.key)&&(e.Va=e.Va.add(t.key))});var r=[];return n.forEach(function(t){e.Va.has(t)||r.push(new Gh(t))}),this.Va.forEach(function(t){n.has(t)||r.push(new Bh(t))}),r},Ac.prototype.Oa=function(t){this.Aa=t._r,this.Va=Ui();var e=this.va(t.documents);return this.Da(e,!0)},Ac.prototype.La=function(){return Gi.Bt(this.query,this.ya,this.Mt,0===this.Pa)},Ac),lc=(Nc.prototype.run=function(){this.qa()},Nc.prototype.qa=function(){var t=this;this.Ls.fs(function(){return d(t,void 0,void 0,function(){var e,n,r=this;return y(this,function(t){return e=new oc(this.Yo),(n=this.Ua(e))&&n.then(function(t){r.Vs.Cs(function(){return e.commit().then(function(){r.gs.resolve(t)}).catch(function(t){r.Ba(t)})})}).catch(function(t){r.Ba(t)}),[2]})})})},Nc.prototype.Ua=function(t){try{var e=this.updateFunction(t);return!oi(e)&&e.catch&&e.then?e:(this.gs.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.gs.reject(t),null}},Nc.prototype.Ba=function(t){var e=this;0<this.Ma&&this.Wa(t)?(--this.Ma,this.Vs.Cs(function(){return e.qa(),Promise.resolve()})):this.gs.reject(t)},Nc.prototype.Wa=function(t){if("FirebaseError"!==t.name)return!1;var e=t.code;return"aborted"===e||"failed-precondition"===e||!wi(e)},Nc),fc=(Object.defineProperty(Tc.prototype,"ru",{get:function(){return!0===this.iu},enumerable:!1,configurable:!0}),Tc.prototype.subscribe=function(t){this.za=t},Tc.prototype.listen=function(s){return d(this,void 0,void 0,function(){var e,n,r,i,o;return y(this,function(t){switch(t.label){case 0:return this.ou("listen()"),(r=this.Ha.get(s))?(e=r.targetId,this.Ga.fa(e),n=r.view.La(),[3,4]):[3,1];case 1:return[4,this.wh.rr(ta(s))];case 2:return i=t.sent(),o=this.Ga.fa(i.targetId),e=i.targetId,[4,this.hu(s,e,"current"===o)];case 3:n=t.sent(),this.ru&&this.ja.listen(i),t.label=4;case 4:return[2,n]}})})},Tc.prototype.hu=function(a,u,h){return d(this,void 0,void 0,function(){var e,n,r,i,o,s;return y(this,function(t){switch(t.label){case 0:return[4,this.wh.cr(a,!0)];case 1:return e=t.sent(),n=new cc(a,e._r),r=n.va(e.documents),i=Hi.zt(u,h&&"Offline"!==this.onlineState),o=n.Da(r,this.ru,i),this.au(u,o.Na),s=new Wh(a,u,n),[2,(this.Ha.set(a,s),this.Ya.has(u)?this.Ya.get(u).push(a):this.Ya.set(u,[a]),o.snapshot)]}})})},Tc.prototype.Uh=function(i){return d(this,void 0,void 0,function(){var e,n,r=this;return y(this,function(t){switch(t.label){case 0:return this.ou("unlisten()"),e=this.Ha.get(i),1<(n=this.Ya.get(e.targetId)).length?[2,(this.Ya.set(e.targetId,n.filter(function(t){return!ia(t,i)})),void this.Ha.delete(i))]:this.ru?(this.Ga.wa(e.targetId),this.Ga.Ia(e.targetId)?[3,2]:[4,this.wh.ur(e.targetId,!1).then(function(){r.Ga.Ea(e.targetId),r.ja.Uh(e.targetId),r.uu(e.targetId)}).catch(lu)]):[3,3];case 1:t.sent(),t.label=2;case 2:return[3,5];case 3:return this.uu(e.targetId),[4,this.wh.ur(e.targetId,!0)];case 4:t.sent(),t.label=5;case 5:return[2]}})})},Tc.prototype.write=function(i,o){return d(this,void 0,void 0,function(){var e,n,r;return y(this,function(t){switch(t.label){case 0:this.ou("write()"),t.label=1;case 1:return t.trys.push([1,5,,6]),[4,this.wh.bi(i)];case 2:return e=t.sent(),this.Ga.la(e.batchId),this.cu(e.batchId,o),[4,this.lu(e.Ci)];case 3:return t.sent(),[4,this.ja.xh()];case 4:return t.sent(),[3,6];case 5:return n=t.sent(),r=su(n,"Failed to persist write"),o.reject(r),[3,6];case 6:return[2]}})})},Tc.prototype.runTransaction=function(t,e,n){new lc(t,this.Yo,e,n).run()},Tc.prototype.Ui=function(n){return d(this,void 0,void 0,function(){var e,r=this;return y(this,function(t){switch(t.label){case 0:this.ou("applyRemoteEvent()"),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.wh.Ui(n)];case 2:return e=t.sent(),n.Wt.forEach(function(t,e){var n=r.Za.get(e);n&&(_r(t.Yt.size+t.Xt.size+t.Jt.size<=1),0<t.Yt.size?n.Qa=!0:0<t.Xt.size?_r(n.Qa):0<t.Jt.size&&(_r(n.Qa),n.Qa=!1))}),[4,this.lu(e,n)];case 3:return t.sent(),[3,6];case 4:return[4,lu(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},Tc.prototype.ka=function(r,t){var i;(this.ru&&0===t||!this.ru&&1===t)&&(this.ou("applyOnlineStateChange()"),i=[],this.Ha.forEach(function(t,e){var n=e.view.ka(r);n.snapshot&&i.push(n.snapshot)}),this.za._u(r),this.za.Oo(i),this.onlineState=r,this.ru&&this.Ga.Ra(r))},Tc.prototype.zh=function(a,u){return d(this,void 0,void 0,function(){var e,n,r,i,o,s=this;return y(this,function(t){switch(t.label){case 0:return this.ou("rejectListens()"),this.Ga.da(a,"rejected",u),e=this.Za.get(a),(n=e&&e.key)?(r=(r=new Ei(Qr.P)).nt(n,new Gs(n,Hr.min())),i=Ui().add(n),o=new Wi(Hr.min(),new Map,new Ri(Lr),r,i),[4,this.Ui(o)]):[3,2];case 1:return t.sent(),this.Ja=this.Ja.remove(n),this.Za.delete(a),this.fu(),[3,4];case 2:return[4,this.wh.ur(a,!1).then(function(){return s.uu(a,u)}).catch(lu)];case 3:t.sent(),t.label=4;case 4:return[2]}})})},Tc.prototype.ta=function(r){return d(this,void 0,void 0,function(){var e,n;return y(this,function(t){switch(t.label){case 0:this.ou("applySuccessfulWrite()"),e=r.batch.batchId,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.wh.Di(r)];case 2:return n=t.sent(),this.du(e,null),this.wu(e),this.Ga._a(e,"acknowledged"),[4,this.lu(n)];case 3:return t.sent(),[3,6];case 4:return[4,lu(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},Tc.prototype.na=function(n,r){return d(this,void 0,void 0,function(){var e;return y(this,function(t){switch(t.label){case 0:this.ou("rejectFailedWrite()"),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.wh.xi(n)];case 2:return e=t.sent(),this.du(n,r),this.wu(n),this.Ga._a(n,"rejected",r),[4,this.lu(e)];case 3:return t.sent(),[3,6];case 4:return[4,lu(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},Tc.prototype.Tu=function(o){return d(this,void 0,void 0,function(){var e,n,r,i;return y(this,function(t){switch(t.label){case 0:this.ja.Ph()||Ir("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.wh.Mi()];case 2:return-1===(e=t.sent())?[2,void o.resolve()]:((n=this.nu.get(e)||[]).push(o),this.nu.set(e,n),[3,4]);case 3:return r=t.sent(),i=su(r,"Initialization of waitForPendingWrites() operation failed"),o.reject(i),[3,4];case 4:return[2]}})})},Tc.prototype.wu=function(t){(this.nu.get(t)||[]).forEach(function(t){t.resolve()}),this.nu.delete(t)},Tc.prototype.Eu=function(e){this.nu.forEach(function(t){t.forEach(function(t){t.reject(new Gr(Br.CANCELLED,e))})}),this.nu.clear()},Tc.prototype.cu=function(t,e){var n=(n=(n=this.eu[this.currentUser.to()])||new Ei(Lr)).nt(t,e);this.eu[this.currentUser.to()]=n},Tc.prototype.du=function(t,e){var n,r=this.eu[this.currentUser.to()];r&&((n=r.get(t))&&(e?n.reject(e):n.resolve(),r=r.remove(t)),this.eu[this.currentUser.to()]=r)},Tc.prototype.uu=function(t,e){var n=this;void 0===e&&(e=null),this.Ga.wa(t);for(var r=0,i=this.Ya.get(t);r<i.length;r++){var o=i[r];this.Ha.delete(o),e&&this.za.mu(o,e)}this.Ya.delete(t),this.ru&&this.tu.Vr(t).forEach(function(t){n.tu.gr(t)||n.Iu(t)})},Tc.prototype.Iu=function(t){var e=this.Ja.get(t);null!==e&&(this.ja.Uh(e),this.Ja=this.Ja.remove(t),this.Za.delete(e),this.fu())},Tc.prototype.au=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof Bh?(this.tu.tr(i.key,t),this.Ru(i)):i instanceof Gh?(Ir("SyncEngine","Document no longer in limbo: "+i.key),this.tu.er(i.key,t),this.tu.gr(i.key)||this.Iu(i.key)):Ar()}},Tc.prototype.Ru=function(t){var e=t.key;this.Ja.get(e)||(Ir("SyncEngine","New document in limbo: "+e),this.Xa.push(e),this.fu())},Tc.prototype.fu=function(){for(;0<this.Xa.length&&this.Ja.size<this.Ka;){var t=this.Xa.shift(),e=this.su.next();this.Za.set(e,new Hh(t)),this.Ja=this.Ja.nt(t,e),this.ja.listen(new gi(ta(Ks(t.path)),e,2,xa.ns))}},Tc.prototype.Au=function(){return this.Ja},Tc.prototype.Pu=function(){return this.Xa},Tc.prototype.lu=function(r,u){return d(this,void 0,void 0,function(){var o,s,e,a=this;return y(this,function(t){switch(t.label){case 0:return o=[],s=[],e=[],this.Ha.forEach(function(t,i){e.push(Promise.resolve().then(function(){var n=i.view.va(r);return n.Ca?a.wh.cr(i.query,!1).then(function(t){var e=t.documents;return i.view.va(e,n)}):n}).then(function(t){var e,n=u&&u.Wt.get(i.targetId),r=i.view.Da(t,a.ru,n);a.au(i.targetId,r.Na),r.snapshot&&(a.ru&&a.Ga.da(i.targetId,r.snapshot.fromCache?"not-current":"current"),o.push(r.snapshot),e=Ma.Xn(i.targetId,r.snapshot),s.push(e))}))}),[4,Promise.all(e)];case 1:return t.sent(),this.za.Oo(o),[4,this.wh.Zi(s)];case 2:return t.sent(),[2]}})})},Tc.prototype.ou=function(t){},Tc.prototype.ia=function(n){return d(this,void 0,void 0,function(){var e;return y(this,function(t){switch(t.label){case 0:return this.currentUser.isEqual(n)?[3,3]:(Ir("SyncEngine","User change. New user:",n.to()),[4,this.wh.Vi(n)]);case 1:return e=t.sent(),this.currentUser=n,this.Eu("'waitForPendingWrites' promise is rejected due to a user change."),this.Ga.Vi(n,e.gi,e.vi),[4,this.lu(e.yi)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},Tc.prototype.xe=function(t){var e=this.Za.get(t);if(e&&e.Qa)return Ui().add(e.key);var n=Ui(),r=this.Ya.get(t);if(!r)return n;for(var i=0,o=r;i<o.length;i++)var s=o[i],a=this.Ha.get(s),n=n.Dt(a.view.ga);return n},Tc),pc=(Ic.prototype.listen=function(a){return d(this,void 0,void 0,function(){var e,n,r,i,o,s;return y(this,function(t){switch(t.label){case 0:if(e=a.query,n=!1,(r=this.pu.get(e))||(n=!0,r=new zh),!n)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),i=r,[4,this.Wh.listen(e)];case 2:return i.Vu=t.sent(),[3,4];case 3:return o=t.sent(),s=su(o,"Initialization of query '"+sa(a.query)+"' failed"),[2,void a.onError(s)];case 4:return this.pu.set(e,r),r.listeners.push(a),a.ka(this.onlineState),r.Vu&&a.gu(r.Vu)&&this.vu(),[2]}})})},Ic.prototype.Uh=function(o){return d(this,void 0,void 0,function(){var e,n,r,i;return y(this,function(t){return e=o.query,n=!1,(r=this.pu.get(e))&&0<=(i=r.listeners.indexOf(o))&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?[2,(this.pu.delete(e),this.Wh.Uh(e))]:[2]})})},Ic.prototype.Oo=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],o=i.query,s=this.pu.get(o);if(s){for(var a=0,u=s.listeners;a<u.length;a++)u[a].gu(i)&&(e=!0);s.Vu=i}}e&&this.vu()},Ic.prototype.mu=function(t,e){var n=this.pu.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(e);this.pu.delete(t)},Ic.prototype._u=function(i){this.onlineState=i;var o=!1;this.pu.forEach(function(t,e){for(var n=0,r=e.listeners;n<r.length;n++)r[n].ka(i)&&(o=!0)}),o&&this.vu()},Ic.prototype.bu=function(t){this.yu.add(t),t.next()},Ic.prototype.Su=function(t){this.yu.delete(t)},Ic.prototype.vu=function(){this.yu.forEach(function(t){t.next()})},Ic),dc=(Ec.prototype.gu=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Gi(t.query,t.docs,t.Lt,e,t.Mt,t.fromCache,t.qt,!0)}var o=!1;return this.Du?this.$u(t)&&(this.Cu.next(t),o=!0):this.Nu(t,this.onlineState)&&(this.ku(t),o=!0),this.Fu=t,o},Ec.prototype.onError=function(t){this.Cu.error(t)},Ec.prototype.ka=function(t){this.onlineState=t;var e=!1;return this.Fu&&!this.Du&&this.Nu(this.Fu,t)&&(this.ku(this.Fu),e=!0),e},Ec.prototype.Nu=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.xu&&n||t.docs._()&&"Offline"!==e)},Ec.prototype.$u=function(t){if(0<t.docChanges.length)return!0;var e=this.Fu&&this.Fu.hasPendingWrites!==t.hasPendingWrites;return!(!t.qt&&!e)&&!0===this.options.includeMetadataChanges},Ec.prototype.ku=function(t){t=Gi.Bt(t.query,t.docs,t.Mt,t.fromCache),this.Du=!0,this.Cu.next(t)},Ec),yc=(bc.prototype.Pi=function(t){this.Ou=t},bc.prototype.Bn=function(e,r,i,o){var s=this;return r.on()||i.isEqual(Hr.min())?this.Lu(e,r):this.Ou.Mn(e,o).next(function(t){var n=s.Mu(r,t);return(r.hn()||r.an())&&s.Ca(r.en,n,o,i)?s.Lu(e,r):(Er()<=p.DEBUG&&Ir("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),sa(r)),s.Ou.Bn(e,r,i).next(function(e){return n.forEach(function(t){e=e.nt(t.key,t)}),e}))})},bc.prototype.Mu=function(n,t){var r=new Ri(ua(n));return t.forEach(function(t,e){e instanceof Bs&&aa(n,e)&&(r=r.add(e))}),r},bc.prototype.Ca=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||0<i.version.o(r))},bc.prototype.Lu=function(t,e){return Er()<=p.DEBUG&&Ir("IndexFreeQueryEngine","Using full collection scan to execute query:",sa(e)),this.Ou.Bn(t,e,Hr.min())},bc),vc=(wc.prototype.Bu=function(t){return Ca.resolve(0===this.Fn.length)},wc.prototype.Si=function(t,e,n,r){var i=this.qu;this.qu++,0<this.Fn.length&&this.Fn[this.Fn.length-1];var o=new ka(i,e,n,r);this.Fn.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.Uu=this.Uu.add(new pu(u.key,i)),this.$n.Is(t,u.key.path.g())}return Ca.resolve(o)},wc.prototype.Oi=function(t,e){return Ca.resolve(this.Wu(e))},wc.prototype.sr=function(t,e){var n=e+1,r=this.Qu(n),i=r<0?0:r;return Ca.resolve(this.Fn.length>i?this.Fn[i]:null)},wc.prototype.Mi=function(){return Ca.resolve(0===this.Fn.length?-1:this.qu-1)},wc.prototype.pi=function(t){return Ca.resolve(this.Fn.slice())},wc.prototype.kn=function(t,e){var n=this,r=new pu(e,0),i=new pu(e,Number.POSITIVE_INFINITY),o=[];return this.Uu.bt([r,i],function(t){var e=n.Wu(t.vr);o.push(e)}),Ca.resolve(o)},wc.prototype.Un=function(t,e){var r=this,i=new Ri(Lr);return e.forEach(function(t){var e=new pu(t,0),n=new pu(t,Number.POSITIVE_INFINITY);r.Uu.bt([e,n],function(t){i=i.add(t.vr)})}),Ca.resolve(this.ju(i))},wc.prototype.Kn=function(t,e){var n=e.path,r=n.length+1,i=n;Qr.W(i)||(i=i.child(""));var o=new pu(new Qr(i),0),s=new Ri(Lr);return this.Uu.St(function(t){var e=t.key.path;return!!n.C(e)&&(e.length===r&&(s=s.add(t.vr)),!0)},o),Ca.resolve(this.ju(s))},wc.prototype.ju=function(t){var n=this,r=[];return t.forEach(function(t){var e=n.Wu(t);null!==e&&r.push(e)}),r},wc.prototype.Li=function(n,r){var i=this;_r(0===this.Gu(r.batchId,"removed")),this.Fn.shift();var o=this.Uu;return Ca.forEach(r.mutations,function(t){var e=new pu(t.key,r.batchId);return o=o.delete(e),i.Yi.Ku(n,t.key)}).next(function(){i.Uu=o})},wc.prototype.zu=function(t){},wc.prototype.gr=function(t,e){var n=new pu(e,0),r=this.Uu.Ct(n);return Ca.resolve(e.isEqual(r&&r.key))},wc.prototype.ki=function(t){return this.Fn.length,Ca.resolve()},wc.prototype.Gu=function(t,e){return this.Qu(t)},wc.prototype.Qu=function(t){return 0===this.Fn.length?0:t-this.Fn[0].batchId},wc.prototype.Wu=function(t){var e=this.Qu(t);return e<0||e>=this.Fn.length?null:this.Fn[e]},wc),gc=(mc.prototype.zi=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.Hu(e);return this.docs=this.docs.nt(r,{Yu:e,size:s,readTime:n}),this.size+=s-o,this.$n.Is(t,r.path.g())},mc.prototype.Ki=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},mc.prototype.On=function(t,e){var n=this.docs.get(e);return Ca.resolve(n?n.Yu:null)},mc.prototype.getEntries=function(t,e){var n=this,r=Li;return e.forEach(function(t){var e=n.docs.get(t);r=r.nt(t,e?e.Yu:null)}),Ca.resolve(r)},mc.prototype.Bn=function(t,e,n){for(var r=ki,i=new Qr(e.path.child("")),o=this.docs.ut(i);o.wt();){var s=o.dt(),a=s.key,u=s.value,h=u.Yu,c=u.readTime;if(!e.path.C(a.path))break;c.o(n)<=0||h instanceof Bs&&aa(e,h)&&(r=r.nt(h.key,h))}return Ca.resolve(r)},mc.prototype.Xu=function(t,e){return Ca.forEach(this.docs,function(t){return e(t)})},mc.prototype.Fi=function(t){return new mc.Ju(this)},mc.prototype.Zu=function(t){return Ca.resolve(this.size)},mc);function mc(t,e){this.$n=t,this.Hu=e,this.docs=new Ei(Qr.P),this.size=0}function wc(t,e){this.$n=t,this.Yi=e,this.Fn=[],this.qu=1,this.Uu=new Ri(pu.Er)}function bc(){}function Ec(t,e,n){this.query=t,this.Cu=e,this.Du=!1,this.Fu=null,this.onlineState="Unknown",this.options=n||{}}function Ic(t){this.Wh=t,this.pu=new qr(oa,ia),this.onlineState="Unknown",this.yu=new Set,this.Wh.subscribe(this)}function Tc(t,e,n,r,i,o){this.wh=t,this.ja=e,this.Yo=n,this.Ga=r,this.currentUser=i,this.Ka=o,this.za=null,this.Ha=new qr(oa,ia),this.Ya=new Map,this.Xa=[],this.Ja=new Ei(Qr.P),this.Za=new Map,this.tu=new fu,this.eu={},this.nu=new Map,this.su=Xa.Ps(),this.onlineState="Unknown",this.iu=void 0}function Nc(t,e,n,r){this.Vs=t,this.Yo=e,this.updateFunction=n,this.gs=r,this.Ma=5,this.Ls=new za(this.Vs,"transaction_retry")}function Ac(t,e){this.query=t,this.Aa=e,this.Pa=null,this.Ht=!1,this.Va=Ui(),this.Mt=Ui(),this.pa=ua(t),this.ya=new qi(this.pa)}function _c(){this.ua=new uc,this.ca={},this.rh=null,this.Jn=null}function Sc(){this.activeTargetIds=Mi}function Rc(t,e,n,r,i){var o,s,a,u,h,c,l,f,p=this;this.wh=t,this.Yo=e,this.Vs=n,this.Th=[],this.Eh=new Map,this.mh=null,this.Ih=new Set,this.Rh=i,this.Rh.Ah(function(t){n.Cs(function(){return d(p,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return this.Ph()?(Ir("RemoteStore","Restarting streams for network reachability change."),[4,this.Vh()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.ph=new sc(n,r),this.yh=(h=this.Yo,c=n,l={ko:this.gh.bind(this),Co:this.vh.bind(this),Oo:this.bh.bind(this)},(f=h).Ko(),new nc(c,f.To,f.credentials,f.serializer,l)),this.Sh=(o=this.Yo,s=n,a={ko:this.Ch.bind(this),Co:this.Dh.bind(this),Qo:this.Fh.bind(this),Wo:this.Wo.bind(this)},(u=o).Ko(),new rc(s,u.To,u.credentials,u.serializer,a))}function Dc(t,e){this.Vs=t,this.rh=e,this.state="Unknown",this.oh=0,this.hh=null,this.ah=!0}function Lc(t){this.Yo=t,this.Xo=new Map,this.mutations=[],this.Jo=!1,this.Zo=null,this.th=new Set}function Oc(t,e){var n=this;return(n=Yh.call(this)||this).credentials=t,n.serializer=e,n.Go=!1,n}function Pc(t,e,n,r,i){var o=this;return(o=$h.call(this,t,"write_stream_connection_backoff","write_stream_idle",e,n,i)||this).serializer=r,o.qo=!1,o}function kc(t,e,n,r,i){var o=this;return(o=Xh.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",e,n,i)||this).serializer=r,o}function Vc(t,e,n,r,i,o){this.ss=t,this.wo=n,this.To=r,this.Eo=i,this.listener=o,this.state=0,this.mo=0,this.Io=null,this.stream=null,this.Ls=new za(t,e)}function Cc(t,e){this._o=t,this.fo=e}function Uc(t,e){this._o=t,this.fo=e,this.type="FirstParty",this.user=Fh.no}function Mc(t){var e=this;this.ao=null,this.currentUser=Fh.UNAUTHENTICATED,this.uo=!1,this.co=0,this.io=null,this.forceRefresh=!1,this.ao=function(){e.co++,e.currentUser=e.lo(),e.uo=!0,e.io&&e.io(e.currentUser)},this.co=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.ao):(this.ao(null),t.get().then(function(t){e.auth=t,e.ao&&e.auth.addAuthTokenListener(e.ao)},function(){}))}function xc(){this.io=null}function Fc(t){var e=this;return(e=Qh.call(this)||this).rc=t,e}function jc(){this.Ci=new qr(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.tc=!1}gc.Ju=(Object.defineProperty(jc.prototype,"readTime",{get:function(){return this.ec},set:function(t){this.ec=t},enumerable:!1,configurable:!0}),jc.prototype.zi=function(t,e){this.nc(),this.readTime=e,this.Ci.set(t.key,t)},jc.prototype.Ki=function(t,e){this.nc(),e&&(this.readTime=e),this.Ci.set(t,null)},jc.prototype.On=function(t,e){this.nc();var n=this.Ci.get(e);return void 0!==n?Ca.resolve(n):this.sc(t,e)},jc.prototype.getEntries=function(t,e){return this.ic(t,e)},jc.prototype.apply=function(t){return this.nc(),this.tc=!0,this.Da(t)},jc.prototype.nc=function(){},n(Fc,Qh=jc),Fc.prototype.Da=function(n){var r=this,i=[];return this.Ci.forEach(function(t,e){e?i.push(r.rc.zi(n,e,r.readTime)):r.rc.Ki(t)}),Ca.Sn(i)},Fc.prototype.sc=function(t,e){return this.rc.On(t,e)},Fc.prototype.ic=function(t,e){return this.rc.getEntries(t,e)},Fc);var qc,Bc=(fl.prototype.ge=function(t,n){return this.oc.forEach(function(t,e){return n(e)}),Ca.resolve()},fl.prototype.qi=function(t){return Ca.resolve(this.lastRemoteSnapshotVersion)},fl.prototype.cc=function(t){return Ca.resolve(this.hc)},fl.prototype.hr=function(t){return this.highestTargetId=this.uc.next(),Ca.resolve(this.highestTargetId)},fl.prototype.Xi=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.hc&&(this.hc=e),Ca.resolve()},fl.prototype.lc=function(t){this.oc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.uc=new Xa(e),this.highestTargetId=e),t.sequenceNumber>this.hc&&(this.hc=t.sequenceNumber)},fl.prototype.ar=function(t,e){return this.lc(e),this.targetCount+=1,Ca.resolve()},fl.prototype.Gi=function(t,e){return this.lc(e),Ca.resolve()},fl.prototype._c=function(t,e){return this.oc.delete(e.target),this.ac.Vr(e.targetId),--this.targetCount,Ca.resolve()},fl.prototype.fc=function(n,r,i){var o=this,s=0,a=[];return this.oc.forEach(function(t,e){e.sequenceNumber<=r&&null===i.get(e.targetId)&&(o.oc.delete(t),a.push(o.dc(n,e.targetId)),s++)}),Ca.Sn(a).next(function(){return s})},fl.prototype.wc=function(t){return Ca.resolve(this.targetCount)},fl.prototype.or=function(t,e){var n=this.oc.get(e)||null;return Ca.resolve(n)},fl.prototype.Wi=function(t,e,n){return this.ac.Rr(e,n),Ca.resolve()},fl.prototype.Bi=function(e,t,n){this.ac.Pr(t,n);var r=this.persistence.Yi,i=[];return r&&t.forEach(function(t){i.push(r.Ku(e,t))}),Ca.Sn(i)},fl.prototype.dc=function(t,e){return this.ac.Vr(e),Ca.resolve()},fl.prototype.lr=function(t,e){var n=this.ac.yr(e);return Ca.resolve(n)},fl.prototype.gr=function(t,e){return Ca.resolve(this.ac.gr(e))},fl),Gc=(ll.prototype.start=function(){return Promise.resolve()},ll.prototype.Mh=function(){return this.mc=!1,Promise.resolve()},Object.defineProperty(ll.prototype,"Rc",{get:function(){return this.mc},enumerable:!1,configurable:!0}),ll.prototype.Ac=function(){},ll.prototype.Pc=function(){},ll.prototype.Ai=function(){return this.$n},ll.prototype.wi=function(t){var e=this.Tc[t.to()];return e||(e=new vc(this.$n,this.Yi),this.Tc[t.to()]=e),e},ll.prototype.Ii=function(){return this.mi},ll.prototype.Ei=function(){return this.Dn},ll.prototype.runTransaction=function(t,e,n){var r=this;Ir("MemoryPersistence","Starting transaction:",t);var i=new Wc(this.Ec.next());return this.Yi.Vc(),n(i).next(function(t){return r.Yi.pc(i).next(function(){return t})}).vn().then(function(t){return i.yc(),t})},ll.prototype.gc=function(e,n){return Ca.Cn(Object.values(this.Tc).map(function(t){return function(){return t.gr(e,n)}}))},ll),Wc=(cl.prototype.bc=function(t){this.vc.push(t)},cl.prototype.yc=function(){this.vc.forEach(function(t){return t()})},n(hl,qc=cl),hl),Hc=(ul.Dc=function(t){return new ul(t)},Object.defineProperty(ul.prototype,"Fc",{get:function(){if(this.Cc)return this.Cc;throw Ar()},enumerable:!1,configurable:!0}),ul.prototype.tr=function(t,e,n){return this.Sc.tr(n,e),this.Fc.delete(n),Ca.resolve()},ul.prototype.er=function(t,e,n){return this.Sc.er(n,e),this.Fc.add(n),Ca.resolve()},ul.prototype.Ku=function(t,e){return this.Fc.add(e),Ca.resolve()},ul.prototype.removeTarget=function(t,e){var n=this;this.Sc.Vr(e.targetId).forEach(function(t){return n.Fc.add(t)});var r=this.persistence.Ii();return r.lr(t,e.targetId).next(function(t){t.forEach(function(t){return n.Fc.add(t)})}).next(function(){return r._c(t,e)})},ul.prototype.Vc=function(){this.Cc=new Set},ul.prototype.pc=function(t){var n=this,r=this.persistence.Ei().Fi();return Ca.forEach(this.Fc,function(e){return n.$c(t,e).next(function(t){t||r.Ki(e)})}).next(function(){return n.Cc=null,r.apply(t)})},ul.prototype.Hi=function(t,e){var n=this;return this.$c(t,e).next(function(t){t?n.Fc.delete(e):n.Fc.add(e)})},ul.prototype.Ic=function(t){return 0},ul.prototype.$c=function(t,e){var n=this;return Ca.Cn([function(){return Ca.resolve(n.Sc.gr(e))},function(){return n.persistence.Ii().gr(t,e)},function(){return n.persistence.gc(t,e)}])},ul),zc=(al.prototype.ko=function(t){this.xc=t},al.prototype.Co=function(t){this.Oc=t},al.prototype.onMessage=function(t){this.Lc=t},al.prototype.close=function(){this.kc()},al.prototype.send=function(t){this.Nc(t)},al.prototype.Mc=function(){this.xc()},al.prototype.qc=function(t){this.Oc(t)},al.prototype.Uc=function(t){this.Lc(t)},al),Yc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},$c=(sl.prototype.Wc=function(t,e){if(e)for(var n in e.so)e.so.hasOwnProperty(n)&&(t[n]=e.so[n]);t["X-Goog-Api-Client"]="gl-js/ fire/7.17.1-20206244562"},sl.prototype.zo=function(u,r,i){var h=this,c=this.Qc(u);return new Promise(function(o,s){var a=new vr;a.listenOnce(dr.COMPLETE,function(){try{switch(a.getLastErrorCode()){case pr.NO_ERROR:var t=a.getResponseJson();Ir("Connection","XHR received:",JSON.stringify(t)),o(t);break;case pr.TIMEOUT:Ir("Connection",'RPC "'+u+'" timed out'),s(new Gr(Br.DEADLINE_EXCEEDED,"Request time out"));break;case pr.HTTP_ERROR:var e,n,r=a.getStatus();Ir("Connection",'RPC "'+u+'" failed with status:',r,"response text:",a.getResponseText()),0<r?(e=a.getResponseJson().error)&&e.status&&e.message?(i=e.status.toLowerCase().replace("_","-"),n=0<=Object.values(Br).indexOf(i)?i:Br.UNKNOWN,s(new Gr(n,e.message))):s(new Gr(Br.UNKNOWN,"Server responded with status "+a.getStatus())):(Ir("Connection",'RPC "'+u+'" failed'),s(new Gr(Br.UNAVAILABLE,"Connection failed.")));break;default:Ar()}}finally{Ir("Connection",'RPC "'+u+'" completed.')}var i});var t=Object.assign({},r);delete t.database;var e=JSON.stringify(t);Ir("Connection","XHR sending: ",c+" "+e);var n={"Content-Type":"text/plain"};h.Wc(n,i),a.send(c,"POST",e,n,15)})},sl.prototype.Ho=function(t,e,n){return this.zo(t,e,n)},sl.prototype.xo=function(t,e){var n,r,i=[this.Bc,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=fr(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.s.projectId+"/databases/"+this.s.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.Wc(s.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())||"object"==typeof navigator&&"ReactNative"===navigator.product||0<=g().indexOf("Electron/")||0<=(r=g()).indexOf("MSIE ")||0<=r.indexOf("Trident/")||0<=g().indexOf("MSAppHost/")||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(s.httpHeadersOverwriteParam="$httpHeaders");var a=i.join("");function u(t,e){h.listen(t,function(t){try{e(t)}catch(t){setTimeout(function(){throw t},0)}})}Ir("Connection","Creating WebChannel: "+a+" "+s);var h=o.createWebChannel(a,s),c=!1,l=!1,f=new zc({Nc:function(t){l?Ir("Connection","Not sending because WebChannel is closed:",t):(c||(Ir("Connection","Opening WebChannel transport."),h.open(),c=!0),Ir("Connection","WebChannel sending:",t),h.send(t))},kc:function(){return h.close()}});return u(yr.EventType.OPEN,function(){l||Ir("Connection","WebChannel transport opened.")}),u(yr.EventType.CLOSE,function(){l||(l=!0,Ir("Connection","WebChannel transport closed"),f.qc())}),u(yr.EventType.ERROR,function(t){l||(l=!0,function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];br.logLevel<=p.WARN&&(e=n.map(Nr),br.warn.apply(br,v(["Firestore ("+wr+"): Connection"],e)))}("Connection","WebChannel transport errored:",t),f.qc(new Gr(Br.UNAVAILABLE,"The operation could not be completed")))}),u(yr.EventType.MESSAGE,function(t){var e,n,r,i,o,s;l||(_r(!!(n=t.data[0])),(r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error))?(Ir("Connection","WebChannel received error:",r),i=r.status,o=function(){var t=yi[i];if(void 0!==t)return bi(t)}(),s=r.message,void 0===o&&(o=Br.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),l=!0,f.qc(new Gr(o,s)),h.close()):(Ir("Connection","WebChannel received:",n),f.Uc(n)))}),setTimeout(function(){f.Mc()},0),f},sl.prototype.Qc=function(t){var e=Yc[t];return this.Bc+"/v1/projects/"+this.s.projectId+"/databases/"+this.s.database+"/documents:"+e},sl),Xc=(ol.prototype.Ah=function(t){this.Hc.push(t)},ol.prototype.Mh=function(){window.removeEventListener("online",this.jc),window.removeEventListener("offline",this.Kc)},ol.prototype.Yc=function(){window.addEventListener("online",this.jc),window.addEventListener("offline",this.Kc)},ol.prototype.Gc=function(){Ir("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Hc;t<e.length;t++)(0,e[t])(0)},ol.prototype.zc=function(){Ir("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Hc;t<e.length;t++)(0,e[t])(1)},ol.Xc=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},ol),Qc=(il.prototype.Ah=function(t){},il.prototype.Mh=function(){},il),Kc="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",Jc=(rl.prototype.initialize=function(r){return d(this,void 0,void 0,function(){var e,n=this;return y(this,function(t){switch(t.label){case 0:return this.Ga=this.Jc(r),this.persistence=this.Zc(r),[4,this.persistence.start()];case 1:return t.sent(),this.tl=this.el(r),this.wh=this.nl(r),this.Yo=this.sl(r),[4,this.il(r)];case 2:return e=t.sent(),this.Yo.start(e),this.ja=this.rl(r),this.Wh=this.ol(r),this.hl=this.al(r),this.Ga.rh=function(t){return n.Wh.ka(t,1)},this.ja.Wh=this.Wh,[4,this.Ga.start()];case 3:return t.sent(),[4,this.ja.start()];case 4:return t.sent(),[4,this.ja.ra(this.Wh.ru)];case 5:return t.sent(),[2]}})})},rl.prototype.il=function(t){return e=t.ul,Promise.resolve(new $c(e));var e},rl.prototype.al=function(t){return new pc(this.Wh)},rl.prototype.el=function(t){return null},rl.prototype.nl=function(t){return e=this.persistence,n=new yc,r=t.cl,new hu(e,n,r);var e,n,r},rl.prototype.Zc=function(t){if(t._l.ll)throw new Gr(Br.FAILED_PRECONDITION,Kc);return new Gc(Hc.Dc)},rl.prototype.sl=function(t){var e=yh(t.ul.s),n=t.credentials;return new ic(n,e)},rl.prototype.rl=function(t){var e=this;return new ac(this.wh,this.Yo,t.Vs,function(t){return e.Wh.ka(t,0)},new(Xc.Xc()?Xc:Qc))},rl.prototype.Jc=function(t){return new hc},rl.prototype.ol=function(t){return e=this.wh,n=this.ja,r=this.Yo,i=this.Ga,o=t.cl,s=t.Ka,(a=new fc(e,n,r,i,o,s)).iu=!0,a;var e,n,r,i,o,s,a},rl.prototype.clearPersistence=function(t,e){throw new Gr(Br.FAILED_PRECONDITION,Kc)},rl),Zc=(nl.prototype.start=function(t,e,n){var r=this;this.fl(),this.ul=t;var i=new Ha,o=new Ha,s=!1;return this.credentials.oo(function(t){if(!s)return s=!0,Ir("FirestoreClient","Initializing. user=",t.uid),r.dl(e,n,t,o).then(i.resolve,i.reject);r.Vs.Gs(function(){return r.ja.ia(t)})}),this.Vs.Cs(function(){return i.promise}),o.promise},nl.prototype.enableNetwork=function(){var t=this;return this.fl(),this.Vs.enqueue(function(){return t.persistence.Pc(!0),t.ja.enableNetwork()})},nl.prototype.dl=function(r,i,o,s){return d(this,void 0,void 0,function(){var e,n=this;return y(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,r.initialize({Vs:this.Vs,ul:this.ul,clientId:this.clientId,credentials:this.credentials,cl:o,Ka:100,_l:i})];case 1:return t.sent(),this.persistence=r.persistence,this.Ga=r.Ga,this.wh=r.wh,this.ja=r.ja,this.Wh=r.Wh,this.tl=r.tl,this.wl=r.hl,this.persistence.Ac(function(){return d(n,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}})})}),s.resolve(),[3,3];case 2:if(e=t.sent(),s.reject(e),!this.Tl(e))throw e;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),this.dl(new Jc,{ll:!1},o,s))];case 3:return[2]}})})},nl.prototype.Tl=function(t){return"FirebaseError"===t.name?t.code===Br.FAILED_PRECONDITION||t.code===Br.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},nl.prototype.fl=function(){if(this.Vs.qs)throw new Gr(Br.FAILED_PRECONDITION,"The client has already been terminated.")},nl.prototype.disableNetwork=function(){var t=this;return this.fl(),this.Vs.enqueue(function(){return t.persistence.Pc(!1),t.ja.disableNetwork()})},nl.prototype.terminate=function(){var t=this;return this.Vs.js(function(){return d(t,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return this.tl&&this.tl.stop(),[4,this.ja.Mh()];case 1:return t.sent(),[4,this.Ga.Mh()];case 2:return t.sent(),[4,this.persistence.Mh()];case 3:return t.sent(),this.credentials.ho(),[2]}})})})},nl.prototype.waitForPendingWrites=function(){var t=this;this.fl();var e=new Ha;return this.Vs.Cs(function(){return t.Wh.Tu(e)}),e.promise},nl.prototype.listen=function(t,e,n){var r=this;this.fl();var i=new dc(t,e,n);return this.Vs.Cs(function(){return r.wl.listen(i)}),i},nl.prototype.Uh=function(t){var e=this;this.El||this.Vs.Cs(function(){return e.wl.Uh(t)})},nl.prototype.ml=function(o){return d(this,void 0,void 0,function(){var i,e=this;return y(this,function(t){switch(t.label){case 0:return this.fl(),i=new Ha,[4,this.Vs.enqueue(function(){return d(e,void 0,void 0,function(){var e,n,r;return y(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.wh.ir(o)];case 1:return(e=t.sent())instanceof Bs?i.resolve(e):e instanceof Gs?i.resolve(null):i.reject(new Gr(Br.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return n=t.sent(),r=su(n,"Failed to get document '"+o+" from cache"),i.reject(r),[3,3];case 3:return[2]}})})})];case 1:return[2,(t.sent(),i.promise)]}})})},nl.prototype.Il=function(u){return d(this,void 0,void 0,function(){var a,e=this;return y(this,function(t){switch(t.label){case 0:return this.fl(),a=new Ha,[4,this.Vs.enqueue(function(){return d(e,void 0,void 0,function(){var e,n,r,i,o,s;return y(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.wh.cr(u,!0)];case 1:return e=t.sent(),n=new cc(u,e._r),r=n.va(e.documents),i=n.Da(r,!1),a.resolve(i.snapshot),[3,3];case 2:return o=t.sent(),s=su(o,"Failed to execute query '"+u+" against cache"),a.reject(s),[3,3];case 3:return[2]}})})})];case 1:return[2,(t.sent(),a.promise)]}})})},nl.prototype.write=function(t){var e=this;this.fl();var n=new Ha;return this.Vs.Cs(function(){return e.Wh.write(t,n)}),n.promise},nl.prototype.s=function(){return this.ul.s},nl.prototype.bu=function(t){var e=this;this.fl(),this.Vs.Cs(function(){return e.wl.bu(t),Promise.resolve()})},nl.prototype.Su=function(t){var e=this;this.El||this.Vs.Cs(function(){return e.wl.Su(t),Promise.resolve()})},Object.defineProperty(nl.prototype,"El",{get:function(){return this.Vs.qs},enumerable:!1,configurable:!0}),nl.prototype.transaction=function(t){var e=this;this.fl();var n=new Ha;return this.Vs.Cs(function(){return e.Wh.runTransaction(e.Vs,t,n),Promise.resolve()}),n.promise},nl),tl=(el.prototype.next=function(t){this.Rl(this.observer.next,t)},el.prototype.error=function(t){this.Rl(this.observer.error,t)},el.prototype.Al=function(){this.muted=!0},el.prototype.Rl=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},el);function el(t){this.observer=t,this.muted=!1}function nl(t,e){this.credentials=t,this.Vs=e,this.clientId=Rr.t()}function rl(){}function il(){}function ol(){var t=this;this.jc=function(){return t.Gc()},this.Kc=function(){return t.zc()},this.Hc=[],this.Yc()}function sl(t){this.s=t.s;var e=t.ssl?"https":"http";this.Bc=e+"://"+t.host,this.forceLongPolling=t.forceLongPolling}function al(t){this.Nc=t.Nc,this.kc=t.kc}function ul(t){this.persistence=t,this.Sc=new fu,this.Cc=null}function hl(t){var e=this;return(e=qc.call(this)||this).Qi=t,e}function cl(){this.vc=[]}function ll(t){var e=this;this.Tc={},this.Ec=new xa(0),this.mc=!1,this.mc=!0,this.Yi=t(this),this.mi=new Bc(this),this.$n=new Ya,this.Dn=new gc(this.$n,function(t){return e.Yi.Ic(t)})}function fl(t){this.persistence=t,this.oc=new qr(hi,ci),this.lastRemoteSnapshotVersion=Hr.min(),this.highestTargetId=0,this.hc=0,this.ac=new fu,this.targetCount=0,this.uc=Xa.As()}function pl(i){return function(){if("object"==typeof i&&null!==i)for(var t=i,e=0,n=["next","error","complete"];e<n.length;e++){var r=n[e];if(r in t&&"function"==typeof t[r])return 1}}()}var dl=(bl.prototype.pl=function(t){switch(so(t)){case 0:return null;case 1:return t.booleanValue;case 2:return po(t.integerValue||t.doubleValue);case 3:return this.yl(t.timestampValue);case 4:return this.gl(t);case 5:return t.stringValue;case 6:return new Fu(yo(t.bytesValue));case 7:return this.vl(t.referenceValue);case 8:return this.bl(t.geoPointValue);case 9:return this.Sl(t.arrayValue);case 10:return this.Cl(t.mapValue);default:throw Ar()}},bl.prototype.Cl=function(t){var n=this,r={};return Ur(t.fields||{},function(t,e){r[t]=n.pl(e)}),r},bl.prototype.bl=function(t){return new ah(po(t.latitude),po(t.longitude))},bl.prototype.Sl=function(t){var e=this;return(t.values||[]).map(function(t){return e.pl(t)})},bl.prototype.gl=function(t){switch(this.Pl){case"previous":var e=function t(e){var n=e.mapValue.fields.__previous_value__;return ro(n)?t(n):n}(t);return null==e?null:this.pl(e);case"estimate":return this.yl(io(t));default:return null}},bl.prototype.yl=function(t){var e=fo(t),n=new Wr(e.seconds,e.nanos);return this.timestampsInSnapshots?n:n.toDate()},bl.prototype.vl=function(t){var e=Yr.N(t);_r(jo(e));var n=new kr(e.get(1),e.get(3)),r=new Qr(e.p(5));return n.isEqual(this.s)||Tr("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this.s.projectId+"/"+this.s.database+") instead."),this.Vl(r)},bl),yl=au.oi,vl=(wl.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},wl),gl=(Object.defineProperty(ml.prototype,"ql",{get:function(){return this.Ul||(this.Ul=new Nh(this.Ur,this.Ml.ignoreUndefinedProperties)),this.Ul},enumerable:!1,configurable:!0}),ml.prototype.settings=function(t){gu("Firestore.settings",arguments,1),bu("Firestore.settings","object",1,t);var e=new vl(t);if(this.Nl&&!this.Ml.isEqual(e))throw new Gr(Br.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");void 0!==(this.Ml=e).credentials&&(this.Ol=function(t){if(!t)return new Kh;switch(t.type){case"gapi":var e=t.Bl;return _r(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new tc(e,t.fo||"0");case"provider":return t.Bl;default:throw new Gr(Br.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},ml.prototype.enableNetwork=function(){return this.$l(),this.Nl.enableNetwork()},ml.prototype.disableNetwork=function(){return this.$l(),this.Nl.disableNetwork()},ml.prototype.enablePersistence=function(t){var e,n;if(this.Nl)throw new Gr(Br.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var r=!1,i=!1;if(t&&(void 0!==t.experimentalTabSynchronization&&Tr("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),r=null!==(n=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==n&&n,i=!!t.experimentalForceOwningTab&&t.experimentalForceOwningTab,r&&i))throw new Gr(Br.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.Wl(this.Ll,{ll:!0,cacheSizeBytes:this.Ml.cacheSizeBytes,synchronizeTabs:r,Ql:i})},ml.prototype.clearPersistence=function(){return d(this,void 0,void 0,function(){var n,e=this;return y(this,function(t){if(void 0!==this.Nl&&!this.Nl.El)throw new Gr(Br.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");return n=new Ha,[2,(this.Fl.Us(function(){return d(e,void 0,void 0,function(){var e;return y(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.Ll.clearPersistence(this.Ur,this.xl)];case 1:return t.sent(),n.resolve(),[3,3];case 2:return e=t.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise)]})})},ml.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(ml.prototype,"jl",{get:function(){return this.$l(),this.Nl.El},enumerable:!1,configurable:!0}),ml.prototype.waitForPendingWrites=function(){return this.$l(),this.Nl.waitForPendingWrites()},ml.prototype.onSnapshotsInSync=function(t){if(this.$l(),pl(t))return El(this.Nl,t);bu("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return El(this.Nl,e)},ml.prototype.$l=function(){return this.Nl||this.Wl(new Jc,{ll:!1}),this.Nl},ml.prototype.Gl=function(){return new Pr(this.Ur,this.xl,this.Ml.host,this.Ml.ssl,this.Ml.forceLongPolling)},ml.prototype.Wl=function(t,e){var n=this.Gl();return this.Nl=new Zc(this.Ol,this.Fl),this.Nl.start(n,t,e)},ml.kl=function(t){if(e=t.options,!Object.prototype.hasOwnProperty.call(e,"projectId"))throw new Gr(Br.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e,n=t.options.projectId;if(!n||"string"!=typeof n)throw new Gr(Br.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new kr(n)},Object.defineProperty(ml.prototype,"app",{get:function(){if(!this.Dl)throw new Gr(Br.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Dl},enumerable:!1,configurable:!0}),ml.prototype.collection=function(t){return gu("Firestore.collection",arguments,1),bu("Firestore.collection","non-empty string",1,t),this.$l(),new zl(Yr.N(t),this,null)},ml.prototype.doc=function(t){return gu("Firestore.doc",arguments,1),bu("Firestore.doc","non-empty string",1,t),this.$l(),Al.Kl(Yr.N(t),this,null)},ml.prototype.collectionGroup=function(t){if(gu("Firestore.collectionGroup",arguments,1),bu("Firestore.collectionGroup","non-empty string",1,t),0<=t.indexOf("/"))throw new Gr(Br.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.$l(),new ql((e=t,new Xs(Yr.k(),e)),this,null);var e},ml.prototype.runTransaction=function(e){var n=this;return gu("Firestore.runTransaction",arguments,1),bu("Firestore.runTransaction","function",1,e),this.$l().transaction(function(t){return e(new Tl(n,t))})},ml.prototype.batch=function(){return this.$l(),new Nl(this)},Object.defineProperty(ml,"logLevel",{get:function(){switch(Er()){case p.DEBUG:return"debug";case p.ERROR:return"error";case p.SILENT:return"silent";case p.WARN:return"warn";case p.INFO:return"info";case p.VERBOSE:return"verbose";default:return"error"}},enumerable:!1,configurable:!0}),ml.setLogLevel=function(t){gu("Firestore.setLogLevel",arguments,1),Au("setLogLevel",["debug","error","silent","warn","info","verbose"],1,t),br.setLogLevel(t)},ml.prototype.zl=function(){return this.Ml.timestampsInSnapshots},ml);function ml(t,e,n){var r=this;if(void 0===n&&(n=new Jc),this.Dl=null,this.Fl=new ru,this.INTERNAL={delete:function(){return d(r,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return this.$l(),[4,this.Nl.terminate()];case 1:return t.sent(),[2]}})})}},"object"==typeof t.options){var i=t;this.Dl=i,this.Ur=ml.kl(i),this.xl=i.name,this.Ol=new Jh(e)}else{var o=t;if(!o.projectId)throw new Gr(Br.INVALID_ARGUMENT,"Must provide projectId");this.Ur=new kr(o.projectId,o.database),this.xl="[DEFAULT]",this.Ol=new Kh}this.Ll=n,this.Ml=new vl({})}function wl(t){var e,n,r,i;if(void 0===t.host){if(void 0!==t.ssl)throw new Gr(Br.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else Iu("settings","non-empty string","host",t.host),this.host=t.host,Tu("settings","boolean","ssl",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if(Lu("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling","ignoreUndefinedProperties"]),Tu("settings","object","credentials",t.credentials),this.credentials=t.credentials,Tu("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),Tu("settings","boolean","ignoreUndefinedProperties",t.ignoreUndefinedProperties),!0===t.timestampsInSnapshots?Tr("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===t.timestampsInSnapshots&&Tr("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(n=t.timestampsInSnapshots)||void 0===n||n,this.ignoreUndefinedProperties=null!==(r=t.ignoreUndefinedProperties)&&void 0!==r&&r,Tu("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=au.ai;else{if(t.cacheSizeBytes!==yl&&t.cacheSizeBytes<au.hi)throw new Gr(Br.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+au.hi);this.cacheSizeBytes=t.cacheSizeBytes}Tu("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=null!==(i=t.experimentalForceLongPolling)&&void 0!==i&&i}function bl(t,e,n,r){this.s=t,this.timestampsInSnapshots=e,this.Pl=n,this.Vl=r}function El(t,e){var n=new tl({next:function(){e.next&&e.next()},error:function(t){throw Ar()}});return t.bu(n),function(){n.Al(),t.Su(n)}}var Il,Tl=(Rl.prototype.get=function(t){var n=this;gu("Transaction.get",arguments,1);var r=Jl("Transaction.get",t,this.Hl);return this.Yl.eh([r.Br]).then(function(t){if(!t||1!==t.length)return Ar();var e=t[0];if(e instanceof Gs)return new Pl(n.Hl,r.Br,null,!1,!1,r.Wr);if(e instanceof Bs)return new Pl(n.Hl,r.Br,e,!1,!1,r.Wr);throw Ar()})},Rl.prototype.set=function(t,e,n){wu("Transaction.set",arguments,2,3);var r=Jl("Transaction.set",t,this.Hl);n=Xl("Transaction.set",n);var i=Zl(r.Wr,e,n),o=Sh(this.Hl.ql,"Transaction.set",r.Br,i,null!==r.Wr,n);return this.Yl.set(r.Br,o),this},Rl.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return i="string"==typeof e||e instanceof qu?(mu("Transaction.update",arguments,3),r=Jl("Transaction.update",t,this.Hl),Dh(this.Hl.ql,"Transaction.update",r.Br,e,n,o)):(gu("Transaction.update",arguments,2),r=Jl("Transaction.update",t,this.Hl),Rh(this.Hl.ql,"Transaction.update",r.Br,e)),this.Yl.update(r.Br,i),this},Rl.prototype.delete=function(t){gu("Transaction.delete",arguments,1);var e=Jl("Transaction.delete",t,this.Hl);return this.Yl.delete(e.Br),this},Rl),Nl=(Sl.prototype.set=function(t,e,n){wu("WriteBatch.set",arguments,2,3),this.Zl();var r=Jl("WriteBatch.set",t,this.Hl);n=Xl("WriteBatch.set",n);var i=Zl(r.Wr,e,n),o=Sh(this.Hl.ql,"WriteBatch.set",r.Br,i,null!==r.Wr,n);return this.Xl=this.Xl.concat(o.Qr(r.Br,hs.je())),this},Sl.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.Zl(),i="string"==typeof e||e instanceof qu?(mu("WriteBatch.update",arguments,3),r=Jl("WriteBatch.update",t,this.Hl),Dh(this.Hl.ql,"WriteBatch.update",r.Br,e,n,o)):(gu("WriteBatch.update",arguments,2),r=Jl("WriteBatch.update",t,this.Hl),Rh(this.Hl.ql,"WriteBatch.update",r.Br,e)),this.Xl=this.Xl.concat(i.Qr(r.Br,hs.exists(!0))),this},Sl.prototype.delete=function(t){gu("WriteBatch.delete",arguments,1),this.Zl();var e=Jl("WriteBatch.delete",t,this.Hl);return this.Xl=this.Xl.concat(new Ds(e.Br,hs.je())),this},Sl.prototype.commit=function(){return this.Zl(),this.Jl=!0,0<this.Xl.length?this.Hl.$l().write(this.Xl):Promise.resolve()},Sl.prototype.Zl=function(){if(this.Jl)throw new Gr(Br.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},Sl),Al=(n(_l,Il=gh),_l.Kl=function(t,e,n){if(t.length%2!=0)throw new Gr(Br.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.$()+" has "+t.length);return new _l(new Qr(t),e,n)},Object.defineProperty(_l.prototype,"id",{get:function(){return this.Br.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(_l.prototype,"parent",{get:function(){return new zl(this.Br.path.g(),this.firestore,this.Wr)},enumerable:!1,configurable:!0}),Object.defineProperty(_l.prototype,"path",{get:function(){return this.Br.path.$()},enumerable:!1,configurable:!0}),_l.prototype.collection=function(t){if(gu("DocumentReference.collection",arguments,1),bu("DocumentReference.collection","non-empty string",1,t),!t)throw new Gr(Br.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=Yr.N(t);return new zl(this.Br.path.child(e),this.firestore,null)},_l.prototype.isEqual=function(t){if(!(t instanceof _l))throw Ou("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this.Br.isEqual(t.Br)&&this.Wr===t.Wr},_l.prototype.set=function(t,e){wu("DocumentReference.set",arguments,1,2),e=Xl("DocumentReference.set",e);var n=Zl(this.Wr,t,e),r=Sh(this.firestore.ql,"DocumentReference.set",this.Br,n,null!==this.Wr,e);return this.Nl.write(r.Qr(this.Br,hs.je()))},_l.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n="string"==typeof t||t instanceof qu?(mu("DocumentReference.update",arguments,2),Dh(this.firestore.ql,"DocumentReference.update",this.Br,t,e,r)):(gu("DocumentReference.update",arguments,1),Rh(this.firestore.ql,"DocumentReference.update",this.Br,t)),this.Nl.write(n.Qr(this.Br,hs.exists(!0)))},_l.prototype.delete=function(){return gu("DocumentReference.delete",arguments,0),this.Nl.write([new Ds(this.Br,hs.je())])},_l.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];wu("DocumentReference.onSnapshot",arguments,1,4);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||pl(i[a])||(Lu("DocumentReference.onSnapshot",s=i[a],["includeMetadataChanges"]),Tu("DocumentReference.onSnapshot","boolean","includeMetadataChanges",s.includeMetadataChanges),a++);var u,h={includeMetadataChanges:s.includeMetadataChanges};pl(i[a])?(u=i[a],i[a]=null===(t=u.next)||void 0===t?void 0:t.bind(u),i[a+1]=null===(e=u.error)||void 0===e?void 0:e.bind(u),i[a+2]=null===(n=u.complete)||void 0===n?void 0:n.bind(u)):(bu("DocumentReference.onSnapshot","function",a,i[a]),Eu("DocumentReference.onSnapshot","function",a+1,i[a+1]),Eu("DocumentReference.onSnapshot","function",a+2,i[a+2]));var c={next:function(t){i[a]&&i[a](r.t_(t))},error:i[a+1],complete:i[a+2]};return Dl(this.Nl,this.Br,h,c)},_l.prototype.get=function(t){var e,n,r,i,o,s=this;return wu("DocumentReference.get",arguments,0,1),Kl("DocumentReference.get",t),t&&"cache"===t.source?this.firestore.$l().ml(this.Br).then(function(t){return new Pl(s.firestore,s.Br,t,!0,t instanceof Bs&&t.Ge,s.Wr)}):(e=this.Nl,n=this.Br,r=t,i=new Ha,o=Dl(e,n,{includeMetadataChanges:!0,xu:!0},{next:function(t){o();var e=t.docs.has(n);!e&&t.fromCache?i.reject(new Gr(Br.UNAVAILABLE,"Failed to get document because the client is offline.")):e&&t.fromCache&&r&&"server"===r.source?i.reject(new Gr(Br.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(t)},error:function(t){return i.reject(t)}}),i.promise.then(function(t){return s.t_(t)}))},_l.prototype.withConverter=function(t){return new _l(this.Br,this.firestore,t)},_l.prototype.t_=function(t){var e=t.docs.get(this.Br);return new Pl(this.firestore,this.Br,e,t.fromCache,t.hasPendingWrites,this.Wr)},_l);function _l(t,e,n){var r=this;return(r=Il.call(this,e.Ur,t,n)||this).Br=t,r.firestore=e,r.Wr=n,r.Nl=r.firestore.$l(),r}function Sl(t){this.Hl=t,this.Xl=[],this.Jl=!1}function Rl(t,e){this.Hl=t,this.Yl=e}function Dl(t,e,n,r){var i=function(t){console.error("Uncaught Error in onSnapshot:",t)};r.error&&(i=r.error.bind(r));var o=new tl({next:function(t){r.next&&r.next(t)},error:i}),s=t.listen(Ks(e.path),o,n);return function(){o.Al(),t.Uh(s)}}var Ll,Ol=(Ul.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},Ul),Pl=(Cl.prototype.data=function(t){var e=this;if(wu("DocumentSnapshot.data",arguments,0,1),t=Ql("DocumentSnapshot.data",t),this.e_){if(this.Wr){var n=new kl(this.Hl,this.Br,this.e_,this.n_,this.s_,null);return this.Wr.fromFirestore(n,t)}return new dl(this.Hl.Ur,this.Hl.zl(),t.serverTimestamps||"none",function(t){return new Al(t,e.Hl,null)}).pl(this.e_.Ze())}},Cl.prototype.get=function(t,e){var n=this;if(wu("DocumentSnapshot.get",arguments,1,2),e=Ql("DocumentSnapshot.get",e),this.e_){var r=this.e_.data().field(Ch("DocumentSnapshot.get",t,this.Br));if(null!==r)return new dl(this.Hl.Ur,this.Hl.zl(),e.serverTimestamps||"none",function(t){return new Al(t,n.Hl,n.Wr)}).pl(r)}},Object.defineProperty(Cl.prototype,"id",{get:function(){return this.Br.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(Cl.prototype,"ref",{get:function(){return new Al(this.Br,this.Hl,this.Wr)},enumerable:!1,configurable:!0}),Object.defineProperty(Cl.prototype,"exists",{get:function(){return null!==this.e_},enumerable:!1,configurable:!0}),Object.defineProperty(Cl.prototype,"metadata",{get:function(){return new Ol(this.s_,this.n_)},enumerable:!1,configurable:!0}),Cl.prototype.isEqual=function(t){if(!(t instanceof Cl))throw Ou("isEqual","DocumentSnapshot",1,t);return this.Hl===t.Hl&&this.n_===t.n_&&this.Br.isEqual(t.Br)&&(null===this.e_?null===t.e_:this.e_.isEqual(t.e_))&&this.Wr===t.Wr},Cl),kl=(n(Vl,Ll=Pl),Vl.prototype.data=function(t){return Ll.prototype.data.call(this,t)},Vl);function Vl(){return null!==Ll&&Ll.apply(this,arguments)||this}function Cl(t,e,n,r,i,o){this.Hl=t,this.Br=e,this.e_=n,this.n_=r,this.s_=i,this.Wr=o}function Ul(t,e){this.hasPendingWrites=t,this.fromCache=e}function Ml(t,e,n){if("string"==typeof n){if(""===n)throw new Gr(Br.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Js(e)&&-1!==n.indexOf("/"))throw new Gr(Br.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Yr.N(n));if(!Qr.W(r))throw new Gr(Br.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return vo(t,new Qr(r))}if(n instanceof gh)return vo(t,n.Br);throw new Gr(Br.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Ru(n)+".")}function xl(t,e){if(!Array.isArray(t)||0===t.length)throw new Gr(Br.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new Gr(Br.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(0<=t.indexOf(null))throw new Gr(Br.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(0<t.filter(function(t){return Number.isNaN(t)}).length)throw new Gr(Br.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")}function Fl(t,e,n){if(!n.isEqual(e))throw new Gr(Br.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function jl(t){if(t.an()&&0===t.tn.length)throw new Gr(Br.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ql=(Bl.prototype.where=function(t,e,n){gu("Query.where",arguments,3),Du("Query.where",3,n);var r,i,o=Au("Query.where",["<","<=","==",">=",">","array-contains","in","array-contains-any"],2,e),s=Ch("Query.where",t),a=function(t,e,n,r,i,o){var s;if(r.L()){if("array-contains"===i||"array-contains-any"===i)throw new Gr(Br.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+i+"' queries on FieldPath.documentId().");if("in"===i){xl(o,i);for(var a=[],u=0,h=o;u<h.length;u++){var c=h[u];a.push(Ml(n,t,c))}s={arrayValue:{values:a}}}else s=Ml(n,t,o)}else"in"!==i&&"array-contains-any"!==i||xl(o,i),s=Lh(e,"Query.where",o,"in"===i);var l=ca.create(r,i,s);return function(t,e){if(e instanceof ca){var n=["array-contains","array-contains-any"],r=["in","array-contains-any"],i=0<=n.indexOf(e.op),o=0<=r.indexOf(e.op);if(e.ln()){var s=t.cn();if(null!==s&&!s.isEqual(e.field))throw new Gr(Br.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+s.toString()+"' and '"+e.field.toString()+"'");var a=t.un();null!==a&&Fl(0,e.field,a)}else if(o||i){var u=null;if(o&&(u=t._n(r)),null===u&&i&&(u=t._n(n)),null!==u)throw u===e.op?new Gr(Br.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Gr(Br.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+u.toString()+"' filters.")}}}(t,l),l}(this.i_,this.firestore.ql,this.firestore.Ur,s,o,n);return new Bl((i=(r=this.i_).filters.concat([a]),new Xs(r.path,r.collectionGroup,r.tn.slice(),i,r.limit,r.en,r.startAt,r.endAt)),this.firestore,this.Wr)},Bl.prototype.orderBy=function(t,e){var n;if(wu("Query.orderBy",arguments,1,2),Eu("Query.orderBy","non-empty string",2,e),void 0===e||"asc"===e)n="asc";else{if("desc"!==e)throw new Gr(Br.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+e+"', expected 'asc' or 'desc'.");n="desc"}var r,i,o=Ch("Query.orderBy",t),s=function(t,e,n){if(null!==t.startAt)throw new Gr(Br.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Gr(Br.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r,i,o,s=new Oa(e,n);return i=s,null!==(r=t).un()||null!==(o=r.cn())&&Fl(0,o,i.field),s}(this.i_,o,n);return new Bl((i=(r=this.i_).tn.concat([s]),new Xs(r.path,r.collectionGroup,i,r.filters.slice(),r.limit,r.en,r.startAt,r.endAt)),this.firestore,this.Wr)},Bl.prototype.limit=function(t){return gu("Query.limit",arguments,1),bu("Query.limit","number",1,t),Pu("Query.limit",1,t),new Bl(ea(this.i_,t,"F"),this.firestore,this.Wr)},Bl.prototype.limitToLast=function(t){return gu("Query.limitToLast",arguments,1),bu("Query.limitToLast","number",1,t),Pu("Query.limitToLast",1,t),new Bl(ea(this.i_,t,"L"),this.firestore,this.Wr)},Bl.prototype.startAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];mu("Query.startAt",arguments,1);var r=this.r_("Query.startAt",t,e,!0);return new Bl(na(this.i_,r),this.firestore,this.Wr)},Bl.prototype.startAfter=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];mu("Query.startAfter",arguments,1);var r=this.r_("Query.startAfter",t,e,!1);return new Bl(na(this.i_,r),this.firestore,this.Wr)},Bl.prototype.endBefore=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];mu("Query.endBefore",arguments,1);var r=this.r_("Query.endBefore",t,e,!0);return new Bl(ra(this.i_,r),this.firestore,this.Wr)},Bl.prototype.endAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];mu("Query.endAt",arguments,1);var r=this.r_("Query.endAt",t,e,!1);return new Bl(ra(this.i_,r),this.firestore,this.Wr)},Bl.prototype.isEqual=function(t){if(!(t instanceof Bl))throw Ou("isEqual","Query",1,t);return this.firestore===t.firestore&&ia(this.i_,t.i_)&&this.Wr===t.Wr},Bl.prototype.withConverter=function(t){return new Bl(this.i_,this.firestore,t)},Bl.prototype.r_=function(c,t,e,n){if(Du(c,1,t),t instanceof Pl)return gu(c,v([t],e),1),function(t,e,n,r){if(!n)throw new Gr(Br.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+c+"().");for(var i=[],o=0,s=Zs(t);o<s.length;o++){var a=s[o];if(a.field.L())i.push(vo(e,n.key));else{var u=n.field(a.field);if(ro(u))throw new Gr(Br.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===u){var h=a.field.$();throw new Gr(Br.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}i.push(u)}}return new Ia(i,r)}(this.i_,this.firestore.Ur,t.e_,n);var r=[t].concat(e);return function(t,e,n,r,i,o){var s=t.tn;if(i.length>s.length)throw new Gr(Br.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var h=i[u];if(s[u].field.L()){if("string"!=typeof h)throw new Gr(Br.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof h);if(!Js(t)&&-1!==h.indexOf("/"))throw new Gr(Br.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+h+"' contains a slash.");var c=t.path.child(Yr.N(h));if(!Qr.W(c))throw new Gr(Br.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+c+"' is not because it contains an odd number of segments.");var l=new Qr(c);a.push(vo(e,l))}else{var f=Lh(n,r,h);a.push(f)}}return new Ia(a,o)}(this.i_,this.firestore.Ur,this.firestore.ql,c,r,n)},Bl.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];wu("Query.onSnapshot",arguments,1,4);var s,a={},u=0;"object"!=typeof i[u]||pl(i[u])||(Lu("Query.onSnapshot",a=i[u],["includeMetadataChanges"]),Tu("Query.onSnapshot","boolean","includeMetadataChanges",a.includeMetadataChanges),u++),pl(i[u])?(s=i[u],i[u]=null===(t=s.next)||void 0===t?void 0:t.bind(s),i[u+1]=null===(e=s.error)||void 0===e?void 0:e.bind(s),i[u+2]=null===(n=s.complete)||void 0===n?void 0:n.bind(s)):(bu("Query.onSnapshot","function",u,i[u]),Eu("Query.onSnapshot","function",u+1,i[u+1]),Eu("Query.onSnapshot","function",u+2,i[u+2]));var h={next:function(t){i[u]&&i[u](new Hl(r.firestore,r.i_,t,r.Wr))},error:i[u+1],complete:i[u+2]};return jl(this.i_),Gl(this.firestore.$l(),this.i_,a,h)},Bl.prototype.get=function(t){var e=this;wu("Query.get",arguments,0,1),Kl("Query.get",t),jl(this.i_);var n,r,i,o,s,a=this.firestore.$l();return(t&&"cache"===t.source?a.Il(this.i_):(n=a,r=this.i_,i=t,o=new Ha,s=Gl(n,r,{includeMetadataChanges:!0,xu:!0},{next:function(t){s(),t.fromCache&&i&&"server"===i.source?o.reject(new Gr(Br.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):o.resolve(t)},error:function(t){return o.reject(t)}}),o.promise)).then(function(t){return new Hl(e.firestore,e.i_,t,e.Wr)})},Bl);function Bl(t,e,n){this.i_=t,this.firestore=e,this.Wr=n}function Gl(t,e,n,r){var i=function(t){console.error("Uncaught Error in onSnapshot:",t)};r.error&&(i=r.error.bind(r));var o=new tl({next:function(t){r.next&&r.next(t)},error:i}),s=t.listen(e,o,n);return function(){o.Al(),t.Uh(s)}}var Wl,Hl=(Object.defineProperty($l.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!1,configurable:!0}),Object.defineProperty($l.prototype,"empty",{get:function(){return this.h_.docs._()},enumerable:!1,configurable:!0}),Object.defineProperty($l.prototype,"size",{get:function(){return this.h_.docs.size},enumerable:!1,configurable:!0}),$l.prototype.forEach=function(e,n){var r=this;wu("QuerySnapshot.forEach",arguments,1,2),bu("QuerySnapshot.forEach","function",1,e),this.h_.docs.forEach(function(t){e.call(n,r.c_(t,r.metadata.fromCache,r.h_.Mt.has(t.key)))})},Object.defineProperty($l.prototype,"query",{get:function(){return new ql(this.o_,this.Hl,this.Wr)},enumerable:!1,configurable:!0}),$l.prototype.docChanges=function(t){t&&(Lu("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),Tu("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.h_.Ut)throw new Gr(Br.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.a_&&this.u_===e||(this.a_=function(i,e,o){if(i.Lt._()){var n=0;return i.docChanges.map(function(t){var e=o(t.doc,i.fromCache,i.Mt.has(t.doc.key));return t.doc,{type:"added",doc:e,oldIndex:-1,newIndex:n++}})}var s=i.Lt;return i.docChanges.filter(function(t){return e||3!==t.type}).map(function(t){var e=o(t.doc,i.fromCache,i.Mt.has(t.doc.key)),n=-1,r=-1;return 0!==t.type&&(n=s.indexOf(t.doc.key),s=s.delete(t.doc.key)),1!==t.type&&(r=(s=s.add(t.doc)).indexOf(t.doc.key)),{type:function(){switch(t.type){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ar()}}(),doc:e,oldIndex:n,newIndex:r}})}(this.h_,e,this.c_.bind(this)),this.u_=e),this.a_},$l.prototype.isEqual=function(t){if(!(t instanceof $l))throw Ou("isEqual","QuerySnapshot",1,t);return this.Hl===t.Hl&&ia(this.o_,t.o_)&&this.h_.isEqual(t.h_)&&this.Wr===t.Wr},$l.prototype.c_=function(t,e,n){return new kl(this.Hl,t.key,t,e,n,this.Wr)},$l),zl=(n(Yl,Wl=ql),Object.defineProperty(Yl.prototype,"id",{get:function(){return this.i_.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(Yl.prototype,"parent",{get:function(){var t=this.i_.path.g();return t._()?null:new Al(new Qr(t),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(Yl.prototype,"path",{get:function(){return this.i_.path.$()},enumerable:!1,configurable:!0}),Yl.prototype.doc=function(t){wu("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=Rr.t()),bu("CollectionReference.doc","non-empty string",1,t);var e=Yr.N(t);return Al.Kl(this.i_.path.child(e),this.firestore,this.Wr)},Yl.prototype.add=function(t){gu("CollectionReference.add",arguments,1),bu("CollectionReference.add","object",1,this.Wr?this.Wr.toFirestore(t):t);var e=this.doc();return e.set(t).then(function(){return e})},Yl.prototype.withConverter=function(t){return new Yl(this.l_,this.firestore,t)},Yl);function Yl(t,e,n){var r=this;if(((r=Wl.call(this,Ks(t),e,n)||this).l_=t).length%2!=1)throw new Gr(Br.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.$()+" has "+t.length);return r}function $l(t,e,n,r){this.Hl=t,this.o_=e,this.h_=n,this.Wr=r,this.a_=null,this.u_=null,this.metadata=new Ol(n.hasPendingWrites,n.fromCache)}function Xl(t,e){if(void 0===e)return{merge:!1};if(Lu(t,e,["merge","mergeFields"]),Tu(t,"boolean","merge",e.merge),void 0!==(n=e.mergeFields)&&function(t,e,n){if(!(n instanceof Array))throw new Gr(Br.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+Ru(n));for(var r,i=0;i<n.length;++i)if(!("string"==typeof(r=n[i])||r instanceof qu))throw new Gr(Br.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+i+" was: "+Ru(n[i]))}(t,"mergeFields",n),void 0!==e.mergeFields&&void 0!==e.merge)throw new Gr(Br.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');var n;return e}function Ql(t,e){return void 0===e?{}:(Lu(t,e,["serverTimestamps"]),Nu(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function Kl(t,e){Eu(t,"object",1,e),e&&(Lu(t,e,["source"]),Nu(t,0,"source",e.source,["default","server","cache"]))}function Jl(t,e,n){if(e instanceof gh){if(e.firestore!==n)throw new Gr(Br.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw Ou(t,"DocumentReference",1,e)}function Zl(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var tf,ef={Firestore:gl,GeoPoint:ah,Timestamp:Wr,Blob:Fu,Transaction:Tl,WriteBatch:Nl,DocumentReference:Al,DocumentSnapshot:Pl,Query:ql,QueryDocumentSnapshot:kl,QuerySnapshot:Hl,CollectionReference:zl,FieldPath:qu,FieldValue:oh,setLogLevel:gl.setLogLevel,CACHE_SIZE_UNLIMITED:yl};(tf=nf).INTERNAL.registerComponent(new gr("firestore",function(t){return e=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),new gl(e,n,new Jc);var e,n},"PUBLIC").setServiceProps(Object.assign({},ef))),tf.registerVersion("@firebase/firestore","1.16.2-20206244562")}).apply(this,arguments)}catch(t){throw console.error(t),new Error("Cannot instantiate firebase-firestore.memory.js - be sure to load firebase-app.js first.")}});