!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).firebase=e()}(this,function(){"use strict";function r(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function i(t){return"string"!=typeof t&&(t=String(t)),t}function t(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return d&&(t[Symbol.iterator]=function(){return t}),t}function s(e){this.map={},e instanceof s?e.forEach(function(t,e){this.append(e,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function a(n){return new Promise(function(t,e){n.onload=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function e(t){var e=new FileReader,n=a(e);return e.readAsArrayBuffer(t),n}function n(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function u(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t)if("string"==typeof t)this._bodyText=t;else if(v&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(y&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(p&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(g&&v&&b(t))this._bodyArrayBuffer=n(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!g||!ArrayBuffer.prototype.isPrototypeOf(t)&&!w(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=n(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):p&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},v&&(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(e)}),this.text=function(){var t,e,n,r=o(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,n=a(e=new FileReader),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},y&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function c(t,e){var n,r,i=(e=e||{}).body;if(t instanceof c){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new s(t.headers)),this.method=t.method,this.mode=t.mode,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new s(e.headers)),this.method=(r=(n=e.method||this.method||"GET").toUpperCase(),-1<_.indexOf(r)?r:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function h(t){var i=new FormData;return t.trim().split("&").forEach(function(t){var e,n,r;t&&(n=(e=t.split("=")).shift().replace(/\+/g," "),r=e.join("=").replace(/\+/g," "),i.append(decodeURIComponent(n),decodeURIComponent(r)))}),i}function l(t,e){e=e||{},this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new s(e.headers),this.url=e.url||"",this._initBody(t)}var f,p,d,v,y,g,m,b,w,_,E;(f="undefined"!=typeof self?self:void 0).fetch||(p="URLSearchParams"in f,d="Symbol"in f&&"iterator"in Symbol,v="FileReader"in f&&"Blob"in f&&function(){try{return new Blob,!0}catch(t){return!1}}(),y="FormData"in f,(g="ArrayBuffer"in f)&&(m=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],b=function(t){return t&&DataView.prototype.isPrototypeOf(t)},w=ArrayBuffer.isView||function(t){return t&&-1<m.indexOf(Object.prototype.toString.call(t))}),s.prototype.append=function(t,e){t=r(t),e=i(e);var n=this.map[t];this.map[t]=n?n+","+e:e},s.prototype.delete=function(t){delete this.map[r(t)]},s.prototype.get=function(t){return t=r(t),this.has(t)?this.map[t]:null},s.prototype.has=function(t){return this.map.hasOwnProperty(r(t))},s.prototype.set=function(t,e){this.map[r(t)]=i(e)},s.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},s.prototype.keys=function(){var n=[];return this.forEach(function(t,e){n.push(e)}),t(n)},s.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),t(e)},s.prototype.entries=function(){var n=[];return this.forEach(function(t,e){n.push([e,t])}),t(n)},d&&(s.prototype[Symbol.iterator]=s.prototype.entries),_=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],c.prototype.clone=function(){return new c(this,{body:this._bodyInit})},u.call(c.prototype),u.call(l.prototype),l.prototype.clone=function(){return new l(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new s(this.headers),url:this.url})},l.error=function(){var t=new l(null,{status:0,statusText:""});return t.type="error",t},E=[301,302,303,307,308],l.redirect=function(t,e){if(-1===E.indexOf(e))throw new RangeError("Invalid status code");return new l(null,{status:e,headers:{location:t}})},f.Headers=s,f.Request=c,f.Response=l,f.fetch=function(n,i){return new Promise(function(r,t){var e=new c(n,i),o=new XMLHttpRequest;o.onload=function(){var t,i,e={status:o.status,statusText:o.statusText,headers:(t=o.getAllResponseHeaders()||"",i=new s,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var e,n=t.split(":"),r=n.shift().trim();r&&(e=n.join(":").trim(),i.append(r,e))}),i)};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var n="response"in o?o.response:o.responseText;r(new l(n,e))},o.onerror=function(){t(new TypeError("Network request failed"))},o.ontimeout=function(){t(new TypeError("Network request failed"))},o.open(e.method,e.url,!0),"include"===e.credentials?o.withCredentials=!0:"omit"===e.credentials&&(o.withCredentials=!1),"responseType"in o&&v&&(o.responseType="blob"),e.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),o.send(void 0===e._bodyInit?null:e._bodyInit)})},f.fetch.polyfill=!0);var I="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function T(t,e){return t(e={exports:{}},e.exports),e.exports}function S(t){return t&&t.Math==Math&&t}function C(t){try{return!!t()}catch(t){return!0}}function N(t){return"object"==typeof t?null!==t:"function"==typeof t}function A(t){return V?j.createElement(t):{}}function k(t){if(!N(t))throw TypeError(String(t)+" is not an object");return t}function O(t,e){if(!N(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!N(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!N(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!N(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}function P(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function R(e,n){try{H(M,e,n)}catch(t){M[e]=n}return n}function D(t,e){return Q.call(t,e)}function x(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++X+Y).toString(36)}function L(t){return D(Z,t)||(J&&D(tt,t)?Z[t]=tt[t]:Z[t]=et("Symbol."+t)),Z[t]}var M=S("object"==typeof globalThis&&globalThis)||S("object"==typeof window&&window)||S("object"==typeof self&&self)||S("object"==typeof I&&I)||Function("return this")(),F=!1,U=!C(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),j=M.document,V=N(j)&&N(j.createElement),q=!U&&!C(function(){return 7!=Object.defineProperty(A("div"),"a",{get:function(){return 7}}).a}),B=Object.defineProperty,W={f:U?B:function(t,e,n){if(k(t),e=O(e,!0),k(n),q)try{return B(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},H=U?function(t,e,n){return W.f(t,e,P(1,n))}:function(t,e,n){return t[e]=n,t},K="__core-js_shared__",G=M[K]||R(K,{}),z=T(function(t){(t.exports=function(t,e){return G[t]||(G[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})}),Q={}.hasOwnProperty,X=0,Y=Math.random(),J=!!Object.getOwnPropertySymbols&&!C(function(){return!String(Symbol())}),$=J&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Z=z("wks"),tt=M.Symbol,et=$?tt:tt&&tt.withoutSetter||x,nt={};nt[L("toStringTag")]="z";var rt="[object z]"===String(nt),it=Function.toString;function ot(t){return gt[t]||(gt[t]=x(t))}"function"!=typeof G.inspectSource&&(G.inspectSource=function(t){return it.call(t)});var st,at,ut,ct,ht,lt,ft,pt,dt=G.inspectSource,vt=M.WeakMap,yt="function"==typeof vt&&/native code/.test(dt(vt)),gt=z("keys"),mt={},bt=M.WeakMap;function wt(t){return It.call(t).slice(8,-1)}ft=yt?(st=new bt,at=st.get,ut=st.has,ct=st.set,ht=function(t,e){return ct.call(st,t,e),e},lt=function(t){return at.call(st,t)||{}},function(t){return ut.call(st,t)}):(pt=ot("state"),mt[pt]=!0,ht=function(t,e){return H(t,pt,e),e},lt=function(t){return D(t,pt)?t[pt]:{}},function(t){return D(t,pt)});var _t={set:ht,get:lt,has:ft,enforce:function(t){return ft(t)?lt(t):ht(t,{})},getterFor:function(n){return function(t){var e;if(!N(t)||(e=lt(t)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return e}}},Et=T(function(t){var e=_t.get,a=_t.enforce,u=String(String).split("String");(t.exports=function(t,e,n,r){var i=!!r&&!!r.unsafe,o=!!r&&!!r.enumerable,s=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof e||D(n,"name")||H(n,"name",e),a(n).source=u.join("string"==typeof e?e:"")),t!==M?(i?!s&&t[e]&&(o=!0):delete t[e],o?t[e]=n:H(t,e,n)):o?t[e]=n:R(e,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||dt(this)})}),It={}.toString,Tt=L("toStringTag"),St="Arguments"==wt(function(){return arguments}()),Ct=rt?wt:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Tt))?n:St?wt(e):"Object"==(r=wt(e))&&"function"==typeof e.callee?"Arguments":r},Nt=rt?{}.toString:function(){return"[object "+Ct(this)+"]"};function At(t){return isNaN(t=+t)?0:(0<t?Kt:Ht)(t)}function kt(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function Ot(a){return function(t,e){var n,r,i=String(kt(t)),o=At(e),s=i.length;return o<0||s<=o?a?"":void 0:(n=i.charCodeAt(o))<55296||56319<n||o+1===s||(r=i.charCodeAt(o+1))<56320||57343<r?a?i.charAt(o):n:a?i.slice(o,o+2):r-56320+(n-55296<<10)+65536}}function Pt(t){return Jt(kt(t))}function Rt(t){return"function"==typeof t?t:void 0}function Dt(t,e){return arguments.length<2?Rt(te[t])||Rt(M[t]):te[t]&&te[t][e]||M[t]&&M[t][e]}function xt(t){return 0<t?ee(At(t),9007199254740991):0}function Lt(c){return function(t,e,n){var r,i,o,s=Pt(t),a=xt(s.length),u=(r=a,(i=At(n))<0?ne(i+r,0):re(i,r));if(c&&e!=e){for(;u<a;)if((o=s[u++])!=o)return!0}else for(;u<a;u++)if((c||u in s)&&s[u]===e)return c||u||0;return!c&&-1}}function Mt(t,e){var n,r=Pt(t),i=0,o=[];for(n in r)!D(mt,n)&&D(r,n)&&o.push(n);for(;e.length>i;)D(r,n=e[i++])&&(~ie(o,n)||o.push(n));return o}function Ft(t,e){for(var n=ce(e),r=W.f,i=Zt.f,o=0;o<n.length;o++){var s=n[o];D(t,s)||r(t,s,i(e,s))}}function Ut(t,e){var n=fe[le(t)];return n==de||n!=pe&&("function"==typeof e?C(e):!!e)}function jt(t,e){var n,r,i,o,s,a=t.target,u=t.global,c=t.stat;if(n=u?M:c?M[a]||R(a,{}):(M[a]||{}).prototype)for(r in e){if(o=e[r],i=t.noTargetGet?(s=ye(n,r))&&s.value:n[r],!ve(u?r:a+(c?".":"#")+r,t.forced)&&void 0!==i){if(typeof o==typeof i)continue;Ft(o,i)}(t.sham||i&&i.sham)&&H(o,"sham",!0),Et(n,r,o,t)}}function Vt(t){return Object(kt(t))}rt||Et(Object.prototype,"toString",Nt,{unsafe:!0});var qt,Bt,Wt,Ht=Math.ceil,Kt=Math.floor,Gt={codeAt:Ot(!1),charAt:Ot(!0)},zt={}.propertyIsEnumerable,Qt=Object.getOwnPropertyDescriptor,Xt={f:Qt&&!zt.call({1:2},1)?function(t){var e=Qt(this,t);return!!e&&e.enumerable}:zt},Yt="".split,Jt=C(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==wt(t)?Yt.call(t,""):Object(t)}:Object,$t=Object.getOwnPropertyDescriptor,Zt={f:U?$t:function(t,e){if(t=Pt(t),e=O(e,!0),q)try{return $t(t,e)}catch(t){}if(D(t,e))return P(!Xt.f.call(t,e),t[e])}},te=M,ee=Math.min,ne=Math.max,re=Math.min,ie=(Lt(!0),Lt(!1)),oe=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],se=oe.concat("length","prototype"),ae={f:Object.getOwnPropertyNames||function(t){return Mt(t,se)}},ue={f:Object.getOwnPropertySymbols},ce=Dt("Reflect","ownKeys")||function(t){var e=ae.f(k(t)),n=ue.f;return n?e.concat(n(t)):e},he=/#|\.prototype\./,le=Ut.normalize=function(t){return String(t).replace(he,".").toLowerCase()},fe=Ut.data={},pe=Ut.NATIVE="N",de=Ut.POLYFILL="P",ve=Ut,ye=Zt.f,ge=!C(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),me=ot("IE_PROTO"),be=Object.prototype,we=ge?Object.getPrototypeOf:function(t){return D(t=Vt(t),me)?t[me]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?be:null},_e=L("iterator"),Ee=!1;function Ie(){}function Te(t){return"<script>"+t+"<\/script>"}[].keys&&("next"in(Wt=[].keys())?(Bt=we(we(Wt)))!==Object.prototype&&(qt=Bt):Ee=!0),null==qt&&(qt={}),D(qt,_e)||H(qt,_e,function(){return this});var Se,Ce={IteratorPrototype:qt,BUGGY_SAFARI_ITERATORS:Ee},Ne=Object.keys||function(t){return Mt(t,oe)},Ae=U?Object.defineProperties:function(t,e){k(t);for(var n,r=Ne(e),i=r.length,o=0;o<i;)W.f(t,n=r[o++],e[n]);return t},ke=Dt("document","documentElement"),Oe="prototype",Pe=ot("IE_PROTO"),Re=function(){try{Se=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;Re=Se?function(t){t.write(Te("")),t.close();var e=t.parentWindow.Object;return t=null,e}(Se):((e=A("iframe")).style.display="none",ke.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Te("document.F=Object")),t.close(),t.F);for(var n=oe.length;n--;)delete Re[Oe][oe[n]];return Re()};function De(t,e,n){t&&!D(t=n?t:t.prototype,je)&&Ue(t,je,{configurable:!0,value:e})}function xe(){return this}function Le(){return this}function Me(t,e,n,r,i,o,s){var a,u;function c(t){if(t===i&&g)return g;if(!He&&t in v)return v[t];switch(t){case"keys":case Ge:case ze:return function(){return new n(this,t)}}return function(){return new n(this)}}u=e+" Iterator",(a=n).prototype=Fe(qe,{next:P(1,r)}),De(a,u,!1),Ve[u]=xe;var h,l,f,p=e+" Iterator",d=!1,v=t.prototype,y=v[Ke]||v["@@iterator"]||i&&v[i],g=!He&&y||c(i),m="Array"==e&&v.entries||y;if(m&&(h=we(m.call(new t)),We!==Object.prototype&&h.next&&(we(h)!==We&&(Be?Be(h,We):"function"!=typeof h[Ke]&&H(h,Ke,Le)),De(h,p,!0))),i==Ge&&y&&y.name!==Ge&&(d=!0,g=function(){return y.call(this)}),v[Ke]!==g&&H(v,Ke,g),Ve[e]=g,i)if(l={values:c(Ge),keys:o?g:c("keys"),entries:c(ze)},s)for(f in l)!He&&!d&&f in v||Et(v,f,l[f]);else jt({target:e,proto:!0,forced:He||d},l);return l}mt[Pe]=!0;var Fe=Object.create||function(t,e){var n;return null!==t?(Ie[Oe]=k(t),n=new Ie,Ie[Oe]=null,n[Pe]=t):n=Re(),void 0===e?n:Ae(n,e)},Ue=W.f,je=L("toStringTag"),Ve={},qe=Ce.IteratorPrototype,Be=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,t={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(t,[]),r=t instanceof Array}catch(t){}return function(t,e){return k(t),function(){if(!N(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(),r?n.call(t,e):t.__proto__=e,t}}():void 0),We=Ce.IteratorPrototype,He=Ce.BUGGY_SAFARI_ITERATORS,Ke=L("iterator"),Ge="values",ze="entries",Qe=Gt.charAt,Xe="String Iterator",Ye=_t.set,Je=_t.getterFor(Xe);Me(String,"String",function(t){Ye(this,{type:Xe,string:String(t),index:0})},function(){var t,e=Je(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=Qe(n,r),e.index+=t.length,{value:t,done:!1})});var $e={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Ze=L("unscopables"),tn=Array.prototype;function en(t){tn[Ze][t]=!0}null==tn[Ze]&&W.f(tn,Ze,{configurable:!0,value:Fe(null)});var nn="Array Iterator",rn=_t.set,on=_t.getterFor(nn),sn=Me(Array,"Array",function(t,e){rn(this,{type:nn,target:Pt(t),index:0,kind:e})},function(){var t=on(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values");Ve.Arguments=Ve.Array,en("keys"),en("values"),en("entries");var an=L("iterator"),un=L("toStringTag"),cn=sn.values;for(var hn in $e){var ln=M[hn],fn=ln&&ln.prototype;if(fn){if(fn[an]!==cn)try{H(fn,an,cn)}catch(wu){fn[an]=cn}if(fn[un]||H(fn,un,hn),$e[hn])for(var pn in sn)if(fn[pn]!==sn[pn])try{H(fn,pn,sn[pn])}catch(wu){fn[pn]=sn[pn]}}}function dn(t,e,n){for(var r in e)Et(t,r,e[r],n);return t}function vn(t){var e=Dt(t),n=W.f;U&&e&&!e[In]&&n(e,In,{configurable:!0,get:function(){return this}})}function yn(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}function gn(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}function mn(t){return void 0!==t&&(Ve.Array===t||Sn[Tn]===t)}function bn(r,i,t){if(yn(r),void 0===i)return r;switch(t){case 0:return function(){return r.call(i)};case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}}function wn(t){if(null!=t)return t[Cn]||t["@@iterator"]||Ve[Ct(t)]}function _n(t,e,n,r){try{return r?e(k(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&k(i.call(t)),e}}var En=M.Promise,In=L("species"),Tn=L("iterator"),Sn=Array.prototype,Cn=L("iterator"),Nn=T(function(t){function p(t,e){this.stopped=t,this.result=e}(t.exports=function(t,e,n,r,i){var o,s,a,u,c,h,l,f=bn(e,n,r?2:1);if(i)o=t;else{if("function"!=typeof(s=wn(t)))throw TypeError("Target is not iterable");if(mn(s)){for(a=0,u=xt(t.length);a<u;a++)if((c=r?f(k(l=t[a])[0],l[1]):f(t[a]))&&c instanceof p)return c;return new p(!1)}o=s.call(t)}for(h=o.next;!(l=h.call(o)).done;)if("object"==typeof(c=_n(o,f,l.value,r))&&c&&c instanceof p)return c;return new p(!1)}).stop=function(t){return new p(!0,t)}}),An=L("iterator"),kn=!1;try{var On=0,Pn={next:function(){return{done:!!On++}},return:function(){kn=!0}};Pn[An]=function(){return this},Array.from(Pn,function(){throw 2})}catch(wu){}function Rn(t,e){if(!e&&!kn)return!1;var n=!1;try{var r={};r[An]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}function Dn(t,e){var n,r=k(t).constructor;return void 0===r||null==(n=k(r)[qn])?e:yn(n)}function xn(t){var e;Jn.hasOwnProperty(t)&&(e=Jn[t],delete Jn[t],e())}function Ln(t){return function(){xn(t)}}function Mn(t){xn(t.data)}function Fn(t){M.postMessage(t+"",Hn.protocol+"//"+Hn.host)}var Un,jn,Vn,qn=L("species"),Bn=Dt("navigator","userAgent")||"",Wn=/(iphone|ipod|ipad).*applewebkit/i.test(Bn),Hn=M.location,Kn=M.setImmediate,Gn=M.clearImmediate,zn=M.process,Qn=M.MessageChannel,Xn=M.Dispatch,Yn=0,Jn={},$n="onreadystatechange";Kn&&Gn||(Kn=function(t){for(var e=[],n=1;n<arguments.length;)e.push(arguments[n++]);return Jn[++Yn]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},Un(Yn),Yn},Gn=function(t){delete Jn[t]},"process"==wt(zn)?Un=function(t){zn.nextTick(Ln(t))}:Xn&&Xn.now?Un=function(t){Xn.now(Ln(t))}:Qn&&!Wn?(Vn=(jn=new Qn).port2,jn.port1.onmessage=Mn,Un=bn(Vn.postMessage,Vn,1)):!M.addEventListener||"function"!=typeof postMessage||M.importScripts||C(Fn)||"file:"===Hn.protocol?Un=$n in A("script")?function(t){ke.appendChild(A("script"))[$n]=function(){ke.removeChild(this),xn(t)}}:function(t){setTimeout(Ln(t),0)}:(Un=Fn,M.addEventListener("message",Mn,!1)));var Zn,tr,er,nr,rr,ir,or,sr,ar={set:Kn,clear:Gn},ur=Zt.f,cr=ar.set,hr=M.MutationObserver||M.WebKitMutationObserver,lr=M.process,fr=M.Promise,pr="process"==wt(lr),dr=ur(M,"queueMicrotask"),vr=dr&&dr.value;function yr(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=yn(n),this.reject=yn(r)}function gr(t,e){if(k(t),N(e)&&e.constructor===t)return e;var n=Er.f(t);return(0,n.resolve)(e),n.promise}function mr(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}vr||(Zn=function(){var t,e;for(pr&&(t=lr.domain)&&t.exit();tr;){e=tr.fn,tr=tr.next;try{e()}catch(t){throw tr?nr():er=void 0,t}}er=void 0,t&&t.enter()},nr=pr?function(){lr.nextTick(Zn)}:hr&&!Wn?(rr=!0,ir=document.createTextNode(""),new hr(Zn).observe(ir,{characterData:!0}),function(){ir.data=rr=!rr}):fr&&fr.resolve?(or=fr.resolve(void 0),sr=or.then,function(){sr.call(or,Zn)}):function(){cr.call(M,Zn)});var br,wr,_r=vr||function(t){var e={fn:t,next:void 0};er&&(er.next=e),tr||(tr=e,nr()),er=e},Er={f:function(t){return new yr(t)}},Ir=M.process,Tr=Ir&&Ir.versions,Sr=Tr&&Tr.v8;function Cr(t){var e;return!(!N(t)||"function"!=typeof(e=t.then))&&e}function Nr(l,f,p){var d;f.notified||(f.notified=!0,d=f.reactions,_r(function(){for(var t=f.value,e=1==f.state,n=0;d.length>n;){var r,i,o,s=d[n++],a=e?s.ok:s.fail,u=s.resolve,c=s.reject,h=s.domain;try{a?(e||(2===f.rejection&&ni(l,f),f.rejection=1),!0===a?r=t:(h&&h.enter(),r=a(t),h&&(h.exit(),o=!0)),r===s.promise?c(Wr("Promise-chain cycle")):(i=Cr(r))?i.call(r,u,c):u(r)):c(t)}catch(t){h&&!o&&h.exit(),c(t)}}f.reactions=[],f.notified=!1,p&&!f.rejection&&ti(l,f)}))}function Ar(t,e,n){var r,i;Yr?((r=Hr.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),M.dispatchEvent(r)):r={promise:e,reason:n},(i=M["on"+t])?i(r):t===Jr&&function(t,e){var n=M.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)}function kr(e,n,r,i){return function(t){e(n,r,t,i)}}function Or(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=2,Nr(t,e,!0))}Sr?wr=(br=Sr.split("."))[0]+br[1]:Bn&&(!(br=Bn.match(/Edge\/(\d+)/))||74<=br[1])&&(br=Bn.match(/Chrome\/(\d+)/))&&(wr=br[1]);var Pr,Rr,Dr,xr,Lr=wr&&+wr,Mr=ar.set,Fr=L("species"),Ur="Promise",jr=_t.get,Vr=_t.set,qr=_t.getterFor(Ur),Br=En,Wr=M.TypeError,Hr=M.document,Kr=M.process,Gr=Dt("fetch"),zr=Er.f,Qr=zr,Xr="process"==wt(Kr),Yr=!!(Hr&&Hr.createEvent&&M.dispatchEvent),Jr="unhandledrejection",$r=ve(Ur,function(){if(dt(Br)===String(Br)){if(66===Lr)return!0;if(!Xr&&"function"!=typeof PromiseRejectionEvent)return!0}if(51<=Lr&&/native code/.test(Br))return!1;function t(t){t(function(){},function(){})}var e=Br.resolve(1);return(e.constructor={})[Fr]=t,!(e.then(function(){})instanceof t)}),Zr=$r||!Rn(function(t){Br.all(t).catch(function(){})}),ti=function(n,r){Mr.call(M,function(){var t,e=r.value;if(ei(r)&&(t=mr(function(){Xr?Kr.emit("unhandledRejection",e,n):Ar(Jr,n,e)}),r.rejection=Xr||ei(r)?2:1,t.error))throw t.value})},ei=function(t){return 1!==t.rejection&&!t.parent},ni=function(t,e){Mr.call(M,function(){Xr?Kr.emit("rejectionHandled",t):Ar("rejectionhandled",t,e.value)})},ri=function(n,r,t,e){if(!r.done){r.done=!0,e&&(r=e);try{if(n===t)throw Wr("Promise can't be resolved itself");var i=Cr(t);i?_r(function(){var e={done:!1};try{i.call(t,kr(ri,n,e,r),kr(Or,n,e,r))}catch(t){Or(n,e,t,r)}}):(r.value=t,r.state=1,Nr(n,r,!1))}catch(t){Or(n,{done:!1},t,r)}}};$r&&(Br=function(t){gn(this,Br,Ur),yn(t),Pr.call(this);var e=jr(this);try{t(kr(ri,this,e),kr(Or,this,e))}catch(t){Or(this,e,t)}},(Pr=function(){Vr(this,{type:Ur,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=dn(Br.prototype,{then:function(t,e){var n=qr(this),r=zr(Dn(this,Br));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Xr?Kr.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Nr(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),Rr=function(){var t=new Pr,e=jr(t);this.promise=t,this.resolve=kr(ri,t,e),this.reject=kr(Or,t,e)},Er.f=zr=function(t){return t===Br||t===Dr?new Rr:Qr(t)},"function"==typeof En&&(xr=En.prototype.then,Et(En.prototype,"then",function(t,e){var n=this;return new Br(function(t,e){xr.call(n,t,e)}).then(t,e)},{unsafe:!0}),"function"==typeof Gr&&jt({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return gr(Br,Gr.apply(M,arguments))}}))),jt({global:!0,wrap:!0,forced:$r},{Promise:Br}),De(Br,Ur,!1),vn(Ur),Dr=Dt(Ur),jt({target:Ur,stat:!0,forced:$r},{reject:function(t){var e=zr(this);return e.reject.call(void 0,t),e.promise}}),jt({target:Ur,stat:!0,forced:$r},{resolve:function(t){return gr(this,t)}}),jt({target:Ur,stat:!0,forced:Zr},{all:function(t){var a=this,e=zr(a),u=e.resolve,c=e.reject,n=mr(function(){var r=yn(a.resolve),i=[],o=0,s=1;Nn(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(a,t).then(function(t){n||(n=!0,i[e]=t,--s||u(i))},c)}),--s||u(i)});return n.error&&c(n.value),e.promise},race:function(t){var n=this,r=zr(n),i=r.reject,e=mr(function(){var e=yn(n.resolve);Nn(t,function(t){e.call(n,t).then(r.resolve,i)})});return e.error&&i(e.value),r.promise}}),jt({target:"Promise",stat:!0},{allSettled:function(t){var a=this,e=Er.f(a),u=e.resolve,n=e.reject,r=mr(function(){var r=yn(a.resolve),i=[],o=0,s=1;Nn(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(a,t).then(function(t){n||(n=!0,i[e]={status:"fulfilled",value:t},--s||u(i))},function(t){n||(n=!0,i[e]={status:"rejected",reason:t},--s||u(i))})}),--s||u(i)});return r.error&&n(r.value),e.promise}}),jt({target:"Promise",proto:!0,real:!0,forced:!!En&&C(function(){En.prototype.finally.call({then:function(){}},function(){})})},{finally:function(e){var n=Dn(this,Dt("Promise")),t="function"==typeof e;return this.then(t?function(t){return gr(n,e()).then(function(){return t})}:e,t?function(t){return gr(n,e()).then(function(){throw t})}:e)}}),"function"!=typeof En||En.prototype.finally||Et(En.prototype,"finally",Dt("Promise").prototype.finally),te.Promise;var ii=_t.set,oi=_t.getterFor("AggregateError"),si=function(t,e){var n=this;if(!(n instanceof si))return new si(t,e);Be&&(n=Be(new Error(e),we(n)));var r=[];return Nn(t,r.push,r),U?ii(n,{errors:r,type:"AggregateError"}):n.errors=r,void 0!==e&&H(n,"message",String(e)),n};si.prototype=Fe(Error.prototype,{constructor:P(5,si),message:P(5,""),name:P(5,"AggregateError")}),U&&W.f(si.prototype,"errors",{get:function(){return oi(this).errors},configurable:!0}),jt({global:!0},{AggregateError:si}),jt({target:"Promise",stat:!0},{try:function(t){var e=Er.f(this),n=mr(t);return(n.error?e.reject:e.resolve)(n.value),e.promise}});var ai="No one promise resolved";function ui(t,e){var n;return fi(t)&&("function"==typeof(n=t.constructor)&&(n===Array||fi(n.prototype))||N(n)&&null===(n=n[pi]))&&(n=void 0),new(void 0===n?Array:n)(0===e?0:e)}function ci(p){var d=1==p,v=2==p,y=3==p,g=4==p,m=6==p,b=5==p||m;return function(t,e,n,r){for(var i,o,s=Vt(t),a=Jt(s),u=bn(e,n,3),c=xt(a.length),h=0,l=r||ui,f=d?l(t,c):v?l(t,0):void 0;h<c;h++)if((b||h in a)&&(o=u(i=a[h],h,s),p))if(d)f[h]=o;else if(o)switch(p){case 3:return!0;case 5:return i;case 6:return h;case 2:di.call(f,i)}else if(g)return!1;return m?-1:y||g?g:f}}function hi(t){throw t}function li(t,e){if(D(gi,t))return gi[t];var n=[][t],r=!!D(e=e||{},"ACCESSORS")&&e.ACCESSORS,i=D(e,0)?e[0]:hi,o=D(e,1)?e[1]:void 0;return gi[t]=!!n&&!C(function(){if(r&&!U)return 1;var t={length:-1};r?yi(t,1,{enumerable:!0,get:hi}):t[1]=1,n.call(t,i,o)})}jt({target:"Promise",stat:!0},{any:function(t){var u=this,e=Er.f(u),c=e.resolve,h=e.reject,n=mr(function(){var r=yn(u.resolve),i=[],o=0,s=1,a=!1;Nn(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(u,t).then(function(t){n||a||(a=!0,c(t))},function(t){n||a||(n=!0,i[e]=t,--s||h(new(Dt("AggregateError"))(i,ai)))})}),--s||h(new(Dt("AggregateError"))(i,ai))});return n.error&&h(n.value),e.promise}});var fi=Array.isArray||function(t){return"Array"==wt(t)},pi=L("species"),di=[].push,vi={forEach:ci(0),map:ci(1),filter:ci(2),some:ci(3),every:ci(4),find:ci(5),findIndex:ci(6)},yi=Object.defineProperty,gi={},mi=vi.find,bi="find",wi=!0,_i=li(bi);function Ei(t,e,n){return bn(Ii,M[t].prototype[e],n)}bi in[]&&Array(1)[bi](function(){wi=!1}),jt({target:"Array",proto:!0,forced:wi||!_i},{find:function(t,e){return mi(this,t,1<arguments.length?e:void 0)}}),en(bi);var Ii=Function.call,Ti=(Ei("Array","find"),vi.findIndex),Si="findIndex",Ci=!0,Ni=li(Si);function Ai(t,e,n){var r=O(e);r in t?W.f(t,r,P(0,n)):t[r]=n}Si in[]&&Array(1)[Si](function(){Ci=!1}),jt({target:"Array",proto:!0,forced:Ci||!Ni},{findIndex:function(t,e){return Ti(this,t,1<arguments.length?e:void 0)}}),en(Si),Ei("Array","findIndex"),jt({target:"Array",stat:!0,forced:!Rn(function(t){Array.from(t)})},{from:function(t,e,n){var r,i,o,s,a,u=Vt(t),c="function"==typeof this?this:Array,h=arguments.length,l=1<h?e:void 0,f=void 0!==l,p=wn(u),d=0;if(f&&(l=bn(l,2<h?n:void 0,2)),null==p||c==Array&&mn(p))for(i=new c(r=xt(u.length));d<r;d++)Ai(i,d,f?l(u[d],d):u[d]);else for(a=(s=p.call(u)).next,i=new c;!(o=a.call(s)).done;d++)Ai(i,d,f?_n(s,l,[o.value,d],!0):o.value);return i.length=d,i}}),te.Array.from;var ki,Oi=vi.some,Pi=!!(ki=[].some)&&C(function(){ki.call(null,function(){throw 1},1)}),Ri=li("some");jt({target:"Array",proto:!0,forced:!Pi||!Ri},{some:function(t,e){return Oi(this,t,1<arguments.length?e:void 0)}}),Ei("Array","some");var Di,xi="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,Li=W.f,Mi=M.Int8Array,Fi=Mi&&Mi.prototype,Ui=M.Uint8ClampedArray,ji=Ui&&Ui.prototype,Vi=Mi&&we(Mi),qi=Fi&&we(Fi),Bi=Object.prototype,Wi=(Bi.isPrototypeOf,L("toStringTag")),Hi=x("TYPED_ARRAY_TAG"),Ki=xi&&!!Be&&"Opera"!==Ct(M.opera),Gi={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(Di in Gi)M[Di]||(Ki=!1);if((!Ki||"function"!=typeof Vi||Vi===Function.prototype)&&(Vi=function(){throw TypeError("Incorrect invocation")},Ki))for(Di in Gi)M[Di]&&Be(M[Di],Vi);if((!Ki||!qi||qi===Bi)&&(qi=Vi.prototype,Ki))for(Di in Gi)M[Di]&&Be(M[Di].prototype,qi);if(Ki&&we(ji)!==qi&&Be(ji,qi),U&&!D(qi,Wi))for(Di in Li(qi,Wi,{get:function(){return N(this)?this[Hi]:void 0}}),Gi)M[Di]&&H(M[Di],Hi,Di);function zi(){return Yi.call(Zi(this))}var Qi=L("iterator"),Xi=M.Uint8Array,Yi=sn.values,Ji=sn.keys,$i=sn.entries,Zi=function(t){if(N(e=t)&&D(Gi,Ct(e)))return t;var e;throw TypeError("Target is not a typed array")},to=function(t,e,n){if(U){if(n)for(var r in Gi){var i=M[r];i&&D(i.prototype,t)&&delete i.prototype[t]}qi[t]&&!n||Et(qi,t,!n&&Ki&&Fi[t]||e)}},eo=Xi&&Xi.prototype[Qi],no=!!eo&&("values"==eo.name||null==eo.name);to("entries",function(){return $i.call(Zi(this))}),to("keys",function(){return Ji.call(Zi(this))}),to("values",zi,!no),to(Qi,zi,!no);var ro=Object.assign,io=Object.defineProperty,oo=!ro||C(function(){if(U&&1!==ro({b:1},ro(io({},"a",{enumerable:!0,get:function(){io(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return 1;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=ro({},t)[n]||Ne(ro({},e)).join("")!=r})?function(t,e){for(var n=Vt(t),r=arguments.length,i=1,o=ue.f,s=Xt.f;i<r;)for(var a,u=Jt(arguments[i++]),c=o?Ne(u).concat(o(u)):Ne(u),h=c.length,l=0;l<h;)a=c[l++],U&&!s.call(u,a)||(n[a]=u[a]);return n}:ro;function so(a){return function(t){for(var e,n=Pt(t),r=Ne(n),i=r.length,o=0,s=[];o<i;)e=r[o++],U&&!ao.call(n,e)||s.push(a?[e,n[e]]:n[e]);return s}}jt({target:"Object",stat:!0,forced:Object.assign!==oo},{assign:oo}),te.Object.assign;var ao=Xt.f,uo={entries:so(!0),values:so(!1)},co=uo.entries;jt({target:"Object",stat:!0},{entries:function(t){return co(t)}}),te.Object.entries;var ho=uo.values;function lo(t){if(N(e=t)&&(void 0!==(n=e[po])?n:"RegExp"==wt(e)))throw TypeError("The method doesn't accept regular expressions");var e,n;return t}function fo(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[vo]=!1,"/./"[e](n)}catch(t){}}return!1}jt({target:"Object",stat:!0},{values:function(t){return ho(t)}}),te.Object.values;var po=L("match"),vo=L("match");jt({target:"String",proto:!0,forced:!fo("includes")},{includes:function(t,e){return!!~String(kt(this)).indexOf(lo(t),1<arguments.length?e:void 0)}}),Ei("String","includes");var yo,go=Zt.f,mo="".startsWith,bo=Math.min,wo=fo("startsWith");function _o(t){if(N(t)){var e=t[Io];return void 0!==e?e:fi(t)}}jt({target:"String",proto:!0,forced:!!(wo||!(yo=go(String.prototype,"startsWith"))||yo.writable)&&!wo},{startsWith:function(t,e){var n=String(kt(this));lo(t);var r=xt(bo(1<arguments.length?e:void 0,n.length)),i=String(t);return mo?mo.call(n,i,r):n.slice(r,r+i.length)===i}}),Ei("String","startsWith"),jt({target:"String",proto:!0},{repeat:"".repeat||function(t){var e=String(kt(this)),n="",r=At(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;0<r;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}}),Ei("String","repeat");var Eo=L("species"),Io=L("isConcatSpreadable"),To=9007199254740991,So="Maximum allowed index exceeded",Co=51<=Lr||!C(function(){var t=[];return t[Io]=!1,t.concat()[0]!==t}),No=51<=Lr||!C(function(){var t=[];return(t.constructor={})[Eo]=function(){return{foo:1}},1!==t.concat(Boolean).foo});function Ao(t){var e=te.Symbol||(te.Symbol={});D(e,t)||Vo(e,t,{value:jo.f(t)})}function ko(t,e){var n=es[t]=Fe(Xo[Ho]);return Go(n,{type:Wo,tag:t,description:e}),U||(n.description=e),n}function Oo(e,t){k(e);var n=Pt(t),r=Ne(n).concat(xo(n));return qo(r,function(t){U&&!Do.call(n,t)||hs(e,t,n[t])}),e}function Po(t,e){var n=Pt(t),r=O(e,!0);if(n!==Qo||!D(es,r)||D(ns,r)){var i=Jo(n,r);return!i||!D(es,r)||D(n,Bo)&&n[Bo][r]||(i.enumerable=!0),i}}function Ro(t){var e=Zo(Pt(t)),n=[];return qo(e,function(t){D(es,t)||D(mt,t)||n.push(t)}),n}jt({target:"Array",proto:!0,forced:!Co||!No},{concat:function(t){for(var e,n,r,i=Vt(this),o=ui(i,0),s=0,a=-1,u=arguments.length;a<u;a++)if(_o(r=-1===a?i:arguments[a])){if(n=xt(r.length),To<s+n)throw TypeError(So);for(e=0;e<n;e++,s++)e in r&&Ai(o,s,r[e])}else{if(To<=s)throw TypeError(So);Ai(o,s++,r)}return o.length=s,o}});function Do(t){var e=O(t,!0),n=ts.call(this,e);return!(this===Qo&&D(es,e)&&!D(ns,e))&&(!(n||!D(this,e)||!D(es,e)||D(this,Bo)&&this[Bo][e])||n)}function xo(t){var e=t===Qo,n=Zo(e?ns:Pt(t)),r=[];return qo(n,function(t){!D(es,t)||e&&!D(Qo,t)||r.push(es[t])}),r}var Lo=ae.f,Mo={}.toString,Fo="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Uo={f:function(t){return Fo&&"[object Window]"==Mo.call(t)?function(t){try{return Lo(t)}catch(t){return Fo.slice()}}(t):Lo(Pt(t))}},jo={f:L},Vo=W.f,qo=vi.forEach,Bo=ot("hidden"),Wo="Symbol",Ho="prototype",Ko=L("toPrimitive"),Go=_t.set,zo=_t.getterFor(Wo),Qo=Object[Ho],Xo=M.Symbol,Yo=Dt("JSON","stringify"),Jo=Zt.f,$o=W.f,Zo=Uo.f,ts=Xt.f,es=z("symbols"),ns=z("op-symbols"),rs=z("string-to-symbol-registry"),is=z("symbol-to-string-registry"),os=z("wks"),ss=M.QObject,as=!ss||!ss[Ho]||!ss[Ho].findChild,us=U&&C(function(){return 7!=Fe($o({},"a",{get:function(){return $o(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=Jo(Qo,e);r&&delete Qo[e],$o(t,e,n),r&&t!==Qo&&$o(Qo,e,r)}:$o,cs=$?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof Xo},hs=function(t,e,n){t===Qo&&hs(ns,e,n),k(t);var r=O(e,!0);return k(n),D(es,r)?(n.enumerable?(D(t,Bo)&&t[Bo][r]&&(t[Bo][r]=!1),n=Fe(n,{enumerable:P(0,!1)})):(D(t,Bo)||$o(t,Bo,P(1,{})),t[Bo][r]=!0),us(t,r,n)):$o(t,r,n)};J||(Et((Xo=function(t){if(this instanceof Xo)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==t?String(t):void 0,n=x(e),r=function(t){this===Qo&&r.call(ns,t),D(this,Bo)&&D(this[Bo],n)&&(this[Bo][n]=!1),us(this,n,P(1,t))};return U&&as&&us(Qo,n,{configurable:!0,set:r}),ko(n,e)})[Ho],"toString",function(){return zo(this).tag}),Et(Xo,"withoutSetter",function(t){return ko(x(t),t)}),Xt.f=Do,W.f=hs,Zt.f=Po,ae.f=Uo.f=Ro,ue.f=xo,jo.f=function(t){return ko(L(t),t)},U&&($o(Xo[Ho],"description",{configurable:!0,get:function(){return zo(this).description}}),Et(Qo,"propertyIsEnumerable",Do,{unsafe:!0}))),jt({global:!0,wrap:!0,forced:!J,sham:!J},{Symbol:Xo}),qo(Ne(os),function(t){Ao(t)}),jt({target:Wo,stat:!0,forced:!J},{for:function(t){var e=String(t);if(D(rs,e))return rs[e];var n=Xo(e);return rs[e]=n,is[n]=e,n},keyFor:function(t){if(!cs(t))throw TypeError(t+" is not a symbol");if(D(is,t))return is[t]},useSetter:function(){as=!0},useSimple:function(){as=!1}}),jt({target:"Object",stat:!0,forced:!J,sham:!U},{create:function(t,e){return void 0===e?Fe(t):Oo(Fe(t),e)},defineProperty:hs,defineProperties:Oo,getOwnPropertyDescriptor:Po}),jt({target:"Object",stat:!0,forced:!J},{getOwnPropertyNames:Ro,getOwnPropertySymbols:xo}),jt({target:"Object",stat:!0,forced:C(function(){ue.f(1)})},{getOwnPropertySymbols:function(t){return ue.f(Vt(t))}}),Yo&&jt({target:"JSON",stat:!0,forced:!J||C(function(){var t=Xo();return"[null]"!=Yo([t])||"{}"!=Yo({a:t})||"{}"!=Yo(Object(t))})},{stringify:function(t,e,n){for(var r,i=[t],o=1;o<arguments.length;)i.push(arguments[o++]);if((N(r=e)||void 0!==t)&&!cs(t))return fi(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!cs(e))return e}),i[1]=e,Yo.apply(null,i)}}),Xo[Ho][Ko]||H(Xo[Ho],Ko,Xo[Ho].valueOf),De(Xo,Wo),mt[Bo]=!0,Ao("asyncIterator");var ls,fs,ps,ds,vs,ys,gs=W.f,ms=M.Symbol;function bs(s,t,e){function n(t){var n=p[t];Et(p,t,"add"==t?function(t){return n.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(h&&!N(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return h&&!N(t)?void 0:n.call(this,0===t?0:t)}:"has"==t?function(t){return!(h&&!N(t))&&n.call(this,0===t?0:t)}:function(t,e){return n.call(this,0===t?0:t,e),this})}var r,i,o,a,u,c=-1!==s.indexOf("Map"),h=-1!==s.indexOf("Weak"),l=c?"set":"add",f=M[s],p=f&&f.prototype,d=f,v={};return ve(s,"function"!=typeof f||!(h||p.forEach&&!C(function(){(new f).entries().next()})))?(d=e.getConstructor(t,s,c,l),Es.REQUIRED=!0):ve(s,!0)&&(i=(r=new d)[l](h?{}:-0,1)!=r,o=C(function(){r.has(1)}),a=Rn(function(t){new f(t)}),u=!h&&C(function(){for(var t=new f,e=5;e--;)t[l](e,e);return!t.has(-0)}),a||(((d=t(function(t,e){gn(t,d,s);var n,r,i,o=(n=new f,Be&&"function"==typeof(r=t.constructor)&&r!==d&&N(i=r.prototype)&&i!==d.prototype&&Be(n,i),n);return null!=e&&Nn(e,o[l],o,c),o})).prototype=p).constructor=d),(o||u)&&(n("delete"),n("has"),c&&n("get")),(u||i)&&n(l),h&&p.clear&&delete p.clear),jt({global:!0,forced:(v[s]=d)!=f},v),De(d,s),h||e.setStrong(d,s,c),d}function ws(t,e,n){var r,i,o,s,a=arguments.length,u=1<a?e:void 0;return yn(this),(r=void 0!==u)&&yn(u),null==t?new this:(i=[],r?(o=0,s=bn(u,2<a?n:void 0,2),Nn(t,function(t){i.push(s(t,o++))})):Nn(t,i.push,i),new this(i))}!U||"function"!=typeof ms||"description"in ms.prototype&&void 0===ms().description||(ls={},Ft(fs=function(t){var e=arguments.length<1||void 0===t?void 0:String(t),n=this instanceof fs?new ms(e):void 0===e?ms():ms(e);return""===e&&(ls[n]=!0),n},ms),(ps=fs.prototype=ms.prototype).constructor=fs,ds=ps.toString,vs="Symbol(test)"==String(ms("test")),ys=/^Symbol\((.*)\)[^)]+$/,gs(ps,"description",{configurable:!0,get:function(){var t=N(this)?this.valueOf():this,e=ds.call(t);if(D(ls,t))return"";var n=vs?e.slice(7,-1):e.replace(ys,"$1");return""===n?void 0:n}}),jt({global:!0,forced:!0},{Symbol:fs})),Ao("hasInstance"),Ao("isConcatSpreadable"),Ao("iterator"),Ao("match"),Ao("matchAll"),Ao("replace"),Ao("search"),Ao("species"),Ao("split"),Ao("toPrimitive"),Ao("toStringTag"),Ao("unscopables"),De(Math,"Math",!0),De(M.JSON,"JSON",!0),te.Symbol,Ao("asyncDispose"),Ao("dispose"),Ao("observable"),Ao("patternMatch"),Ao("replaceAll"),jo.f("iterator");var _s=!C(function(){return Object.isExtensible(Object.preventExtensions({}))}),Es=T(function(t){function n(t){e(t,r,{value:{objectID:"O"+ ++i,weakData:{}}})}var e=W.f,r=x("meta"),i=0,o=Object.isExtensible||function(){return!0},s=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!N(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!D(t,r)){if(!o(t))return"F";if(!e)return"E";n(t)}return t[r].objectID},getWeakData:function(t,e){if(!D(t,r)){if(!o(t))return!0;if(!e)return!1;n(t)}return t[r].weakData},onFreeze:function(t){return _s&&s.REQUIRED&&o(t)&&!D(t,r)&&n(t),t}};mt[r]=!0}),Is=(Es.REQUIRED,Es.fastKey,Es.getWeakData,Es.onFreeze,W.f),Ts=Es.fastKey,Ss=_t.set,Cs=_t.getterFor,Ns={getConstructor:function(t,n,r,i){function o(t,e,n){var r,i,o=u(t),s=a(t,e);return s?s.value=n:(o.last=s={index:i=Ts(e,!0),key:e,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=s),r&&(r.next=s),U?o.size++:t.size++,"F"!==i&&(o.index[i]=s)),t}function a(t,e){var n,r=u(t),i=Ts(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==e)return n}var s=t(function(t,e){gn(t,s,n),Ss(t,{type:n,index:Fe(null),first:void 0,last:void 0,size:0}),U||(t.size=0),null!=e&&Nn(e,t[i],t,r)}),u=Cs(n);return dn(s.prototype,{clear:function(){for(var t=u(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,U?t.size=0:this.size=0},delete:function(t){var e,n,r=u(this),i=a(this,t);return i&&(e=i.next,n=i.previous,delete r.index[i.index],i.removed=!0,n&&(n.next=e),e&&(e.previous=n),r.first==i&&(r.first=e),r.last==i&&(r.last=n),U?r.size--:this.size--),!!i},forEach:function(t,e){for(var n,r=u(this),i=bn(t,1<arguments.length?e:void 0,3);n=n?n.next:r.first;)for(i(n.value,n.key,this);n&&n.removed;)n=n.previous},has:function(t){return!!a(this,t)}}),dn(s.prototype,r?{get:function(t){var e=a(this,t);return e&&e.value},set:function(t,e){return o(this,0===t?0:t,e)}}:{add:function(t){return o(this,t=0===t?0:t,t)}}),U&&Is(s.prototype,"size",{get:function(){return u(this).size}}),s},setStrong:function(t,e,n){var r=e+" Iterator",i=Cs(e),o=Cs(r);Me(t,e,function(t,e){Ss(this,{type:r,target:t,state:i(t),kind:e,last:void 0})},function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:t.target=void 0,done:!0}},n?"entries":"values",!n,!0),vn(e)}};function As(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}function ks(){for(var t,e=k(this),n=yn(e.delete),r=!0,i=0,o=arguments.length;i<o;i++)t=n.call(e,arguments[i]),r=r&&t;return!!r}function Os(t){return Map.prototype.entries.call(t)}function Ps(t,e,n){var r,i=k(this),o=2<arguments.length?n:void 0;if("function"!=typeof e&&"function"!=typeof o)throw TypeError("At least one callback required");return i.has(t)?(r=i.get(t),"function"==typeof e&&(r=e(r),i.set(t,r))):"function"==typeof o&&(r=o(),i.set(t,r)),r}function Rs(t){return Set.prototype.values.call(t)}bs("Map",function(e){return function(t){return e(this,arguments.length?t:void 0)}},Ns),te.Map,jt({target:"Map",stat:!0},{from:ws}),jt({target:"Map",stat:!0},{of:As}),jt({target:"Map",proto:!0,real:!0,forced:F},{deleteAll:function(){return ks.apply(this,arguments)}}),jt({target:"Map",proto:!0,real:!0,forced:F},{every:function(t,e){var n=k(this),r=Os(n),i=bn(t,1<arguments.length?e:void 0,3);return!Nn(r,function(t,e){if(!i(e,t,n))return Nn.stop()},void 0,!0,!0).stopped}}),jt({target:"Map",proto:!0,real:!0,forced:F},{filter:function(t,e){var n=k(this),r=Os(n),i=bn(t,1<arguments.length?e:void 0,3),o=new(Dn(n,Dt("Map"))),s=yn(o.set);return Nn(r,function(t,e){i(e,t,n)&&s.call(o,t,e)},void 0,!0,!0),o}}),jt({target:"Map",proto:!0,real:!0,forced:F},{find:function(t,e){var n=k(this),r=Os(n),i=bn(t,1<arguments.length?e:void 0,3);return Nn(r,function(t,e){if(i(e,t,n))return Nn.stop(e)},void 0,!0,!0).result}}),jt({target:"Map",proto:!0,real:!0,forced:F},{findKey:function(t,e){var n=k(this),r=Os(n),i=bn(t,1<arguments.length?e:void 0,3);return Nn(r,function(t,e){if(i(e,t,n))return Nn.stop(t)},void 0,!0,!0).result}}),jt({target:"Map",stat:!0},{groupBy:function(t,n){var r=new this;yn(n);var i=yn(r.has),o=yn(r.get),s=yn(r.set);return Nn(t,function(t){var e=n(t);i.call(r,e)?o.call(r,e).push(t):s.call(r,e,[t])}),r}}),jt({target:"Map",proto:!0,real:!0,forced:F},{includes:function(n){return Nn(Os(k(this)),function(t,e){if(e===n||e!=e&&n!=n)return Nn.stop()},void 0,!0,!0).stopped}}),jt({target:"Map",stat:!0},{keyBy:function(t,e){var n=new this;yn(e);var r=yn(n.set);return Nn(t,function(t){r.call(n,e(t),t)}),n}}),jt({target:"Map",proto:!0,real:!0,forced:F},{keyOf:function(n){return Nn(Os(k(this)),function(t,e){if(e===n)return Nn.stop(t)},void 0,!0,!0).result}}),jt({target:"Map",proto:!0,real:!0,forced:F},{mapKeys:function(t,e){var n=k(this),r=Os(n),i=bn(t,1<arguments.length?e:void 0,3),o=new(Dn(n,Dt("Map"))),s=yn(o.set);return Nn(r,function(t,e){s.call(o,i(e,t,n),e)},void 0,!0,!0),o}}),jt({target:"Map",proto:!0,real:!0,forced:F},{mapValues:function(t,e){var n=k(this),r=Os(n),i=bn(t,1<arguments.length?e:void 0,3),o=new(Dn(n,Dt("Map"))),s=yn(o.set);return Nn(r,function(t,e){s.call(o,t,i(e,t,n))},void 0,!0,!0),o}}),jt({target:"Map",proto:!0,real:!0,forced:F},{merge:function(t){for(var e=k(this),n=yn(e.set),r=0;r<arguments.length;)Nn(arguments[r++],n,e,!0);return e}}),jt({target:"Map",proto:!0,real:!0,forced:F},{reduce:function(n,t){var r=k(this),e=Os(r),i=arguments.length<2,o=i?void 0:t;if(yn(n),Nn(e,function(t,e){o=i?(i=!1,e):n(o,e,t,r)},void 0,!0,!0),i)throw TypeError("Reduce of empty map with no initial value");return o}}),jt({target:"Map",proto:!0,real:!0,forced:F},{some:function(t,e){var n=k(this),r=Os(n),i=bn(t,1<arguments.length?e:void 0,3);return Nn(r,function(t,e){if(i(e,t,n))return Nn.stop()},void 0,!0,!0).stopped}}),jt({target:"Map",proto:!0,real:!0,forced:F},{update:function(t,e,n){var r=k(this),i=arguments.length;yn(e);var o=r.has(t);if(!o&&i<3)throw TypeError("Updating absent value");var s=o?r.get(t):yn(2<i?n:void 0)(t,r);return r.set(t,e(s,t,r)),r}}),jt({target:"Map",proto:!0,real:!0,forced:F},{upsert:Ps}),jt({target:"Map",proto:!0,real:!0,forced:F},{updateOrInsert:Ps}),bs("Set",function(e){return function(t){return e(this,arguments.length?t:void 0)}},Ns),te.Set,jt({target:"Set",stat:!0},{from:ws}),jt({target:"Set",stat:!0},{of:As}),jt({target:"Set",proto:!0,real:!0,forced:F},{addAll:function(){return function(){for(var t=k(this),e=yn(t.add),n=0,r=arguments.length;n<r;n++)e.call(t,arguments[n]);return t}.apply(this,arguments)}}),jt({target:"Set",proto:!0,real:!0,forced:F},{deleteAll:function(){return ks.apply(this,arguments)}}),jt({target:"Set",proto:!0,real:!0,forced:F},{every:function(t,e){var n=k(this),r=Rs(n),i=bn(t,1<arguments.length?e:void 0,3);return!Nn(r,function(t){if(!i(t,t,n))return Nn.stop()},void 0,!1,!0).stopped}}),jt({target:"Set",proto:!0,real:!0,forced:F},{difference:function(t){var e=k(this),n=new(Dn(e,Dt("Set")))(e),r=yn(n.delete);return Nn(t,function(t){r.call(n,t)}),n}}),jt({target:"Set",proto:!0,real:!0,forced:F},{filter:function(t,e){var n=k(this),r=Rs(n),i=bn(t,1<arguments.length?e:void 0,3),o=new(Dn(n,Dt("Set"))),s=yn(o.add);return Nn(r,function(t){i(t,t,n)&&s.call(o,t)},void 0,!1,!0),o}}),jt({target:"Set",proto:!0,real:!0,forced:F},{find:function(t,e){var n=k(this),r=Rs(n),i=bn(t,1<arguments.length?e:void 0,3);return Nn(r,function(t){if(i(t,t,n))return Nn.stop(t)},void 0,!1,!0).result}}),jt({target:"Set",proto:!0,real:!0,forced:F},{intersection:function(t){var e=k(this),n=new(Dn(e,Dt("Set"))),r=yn(e.has),i=yn(n.add);return Nn(t,function(t){r.call(e,t)&&i.call(n,t)}),n}}),jt({target:"Set",proto:!0,real:!0,forced:F},{isDisjointFrom:function(t){var e=k(this),n=yn(e.has);return!Nn(t,function(t){if(!0===n.call(e,t))return Nn.stop()}).stopped}}),jt({target:"Set",proto:!0,real:!0,forced:F},{isSubsetOf:function(t){var e=function(t){var e=wn(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return k(e.call(t))}(this),n=k(t),r=n.has;return"function"!=typeof r&&(n=new(Dt("Set"))(t),r=yn(n.has)),!Nn(e,function(t){if(!1===r.call(n,t))return Nn.stop()},void 0,!1,!0).stopped}}),jt({target:"Set",proto:!0,real:!0,forced:F},{isSupersetOf:function(t){var e=k(this),n=yn(e.has);return!Nn(t,function(t){if(!1===n.call(e,t))return Nn.stop()}).stopped}}),jt({target:"Set",proto:!0,real:!0,forced:F},{join:function(t){var e=Rs(k(this)),n=void 0===t?",":String(t),r=[];return Nn(e,r.push,r,!1,!0),r.join(n)}}),jt({target:"Set",proto:!0,real:!0,forced:F},{map:function(t,e){var n=k(this),r=Rs(n),i=bn(t,1<arguments.length?e:void 0,3),o=new(Dn(n,Dt("Set"))),s=yn(o.add);return Nn(r,function(t){s.call(o,i(t,t,n))},void 0,!1,!0),o}}),jt({target:"Set",proto:!0,real:!0,forced:F},{reduce:function(e,t){var n=k(this),r=Rs(n),i=arguments.length<2,o=i?void 0:t;if(yn(e),Nn(r,function(t){o=i?(i=!1,t):e(o,t,t,n)},void 0,!1,!0),i)throw TypeError("Reduce of empty set with no initial value");return o}}),jt({target:"Set",proto:!0,real:!0,forced:F},{some:function(t,e){var n=k(this),r=Rs(n),i=bn(t,1<arguments.length?e:void 0,3);return Nn(r,function(t){if(i(t,t,n))return Nn.stop()},void 0,!1,!0).stopped}}),jt({target:"Set",proto:!0,real:!0,forced:F},{symmetricDifference:function(t){var e=k(this),n=new(Dn(e,Dt("Set")))(e),r=yn(n.delete),i=yn(n.add);return Nn(t,function(t){r.call(n,t)||i.call(n,t)}),n}}),jt({target:"Set",proto:!0,real:!0,forced:F},{union:function(t){var e=k(this),n=new(Dn(e,Dt("Set")))(e);return Nn(t,yn(n.add),n),n}});var Ds=Math.floor;jt({target:"Number",stat:!0},{isInteger:function(t){return!N(t)&&isFinite(t)&&Ds(t)===t}}),te.Number.isInteger,jt({target:"Number",stat:!0},{isNaN:function(t){return t!=t}}),te.Number.isNaN;var xs=function(t,e){return(xs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Ls(t,e){function n(){this.constructor=t}xs(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Ms=function(){return(Ms=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Fs(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{o(u.next(t))}catch(t){e(t)}}function i(t){try{o(u.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,i)}o((u=u.apply(t,s||[])).next())})}function Us(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function js(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Vs(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function qs(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Vs(arguments[e]));return t}function Bs(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function Ws(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128):e[n++]=i>>12|224,e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}function Hs(t){try{return Qs.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}var Ks={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},Gs=function(t,e){if(!t)throw zs(e)},zs=function(t){return new Error("Firebase Database ("+Ks.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},Qs={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[h],n[l],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ws(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i,o,s,a=t[n++];a<128?e[r++]=String.fromCharCode(a):191<a&&a<224?(i=t[n++],e[r++]=String.fromCharCode((31&a)<<6|63&i)):239<a&&a<365?(o=((7&a)<<18|(63&(i=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536,e[r++]=String.fromCharCode(55296+(o>>10)),e[r++]=String.fromCharCode(56320+(1023&o))):(i=t[n++],s=t[n++],e[r++]=String.fromCharCode((15&a)<<12|(63&i)<<6|63&s))}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c,h,l=o<<2|s>>4;r.push(l),64!==a&&(c=s<<4&240|a>>2,r.push(c),64!==u&&(h=a<<6&192|u,r.push(h)))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function Xs(t){return Ys(void 0,t)}function Ys(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=Ys(t[n],e[n]));return t}var Js=($s.prototype.wrapCallback=function(n){var r=this;return function(t,e){t?r.reject(t):r.resolve(e),"function"==typeof n&&(r.promise.catch(function(){}),1===n.length?n(t):n(t,e))}},$s);function $s(){var n=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}function Zs(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ta(){return"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zs())}function ea(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function na(){return!0===Ks.NODE_ADMIN}function ra(){return"indexedDB"in window&&null!==indexedDB}function ia(){return new Promise(function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}})}function oa(){return navigator&&navigator.cookieEnabled}var sa,aa=(Ls(ua,sa=Error),ua);function ua(t,e){var n=sa.call(this,e)||this;return n.code=t,n.name="FirebaseError",Object.setPrototypeOf(n,ua.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,ca.prototype.create),n}var ca=(ha.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r,i=e[0]||{},o=this.service+"/"+t,s=this.errors[t],a=s?(r=i,s.replace(la,function(t,e){var n=r[e];return null!=n?String(n):"<"+e+"?>"})):"Error",u=this.serviceName+": "+a+" ("+o+").",c=new aa(o,u),h=0,l=Object.keys(i);h<l.length;h++){var f=l[h];"_"!==f.slice(-1)&&(f in c&&console.warn('Overwriting FirebaseError base field "'+f+'" can cause unexpected behavior.'),c[f]=i[f])}return c},ha);function ha(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var la=/\{\$([^}]+)}/g;function fa(t){return JSON.parse(t)}function pa(t){return JSON.stringify(t)}function da(t){var e={},n={},r={},i="";try{var o=t.split("."),e=fa(Hs(o[0])||""),n=fa(Hs(o[1])||""),i=o[2],r=n.d||{};delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}}function va(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ya(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function ga(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ma(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}var ba=(wa.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},wa.prototype.compress_=function(t,e){e=e||0;var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}for(var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4],r=0;r<80;r++)s=r<40?r<20?(o=h^u&(c^h),1518500249):(o=u^c^h,1859775393):r<60?(o=u&c|h&(u|c),2400959708):(o=u^c^h,3395469782),i=(a<<5|a>>>27)+o+l+s+n[r]&4294967295,l=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i;this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},wa.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},wa.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);for(var r=0,n=0;n<5;n++)for(var i=24;0<=i;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},wa);function wa(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}function _a(t,e){var n=new Ea(t,e);return n.subscribe.bind(n)}var Ea=(Ia.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},Ia.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},Ia.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},Ia.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t){if("object"==typeof t&&null!==t)for(var e=0,n=["next","error","complete"];e<n.length;e++){var r=n[e];if(r in t&&"function"==typeof t[r])return 1}}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=Ta),void 0===r.error&&(r.error=Ta),void 0===r.complete&&(r.complete=Ta);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},Ia.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],--this.observerCount,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},Ia.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},Ia.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},Ia.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},Ia);function Ia(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}function Ta(){}function Sa(t,e,n,r){var i;if(r<e?i="at least "+e:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}function Ca(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+(r+" argument ")}function Na(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(Ca(t,e,r)+"must be a valid function.")}function Aa(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(Ca(t,e,r)+"must be a valid context object.")}function ka(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:55296<=r&&r<=56319?(e+=4,n++):e+=3}return e}var Oa=(Pa.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},Pa.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},Pa.prototype.setServiceProps=function(t){return this.serviceProps=t,this},Pa);function Pa(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var Ra="[DEFAULT]",Da=(xa.prototype.get=function(t){void 0===t&&(t=Ra);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new Js;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},xa.prototype.getImmediate=function(t){var e=Ms({identifier:Ra,optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(o)return o;if(r)return null;throw Error("Service "+this.name+" is not available")}catch(t){if(r)return null;throw t}},xa.prototype.getComponent=function(){return this.component},xa.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if("EAGER"===(this.component=t).instantiationMode)try{this.getOrInitializeService(Ra)}catch(t){}try{for(var r=js(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=Vs(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(u);a.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},xa.prototype.clearInstance=function(t){void 0===t&&(t=Ra),this.instancesDeferred.delete(t),this.instances.delete(t)},xa.prototype.delete=function(){return Fs(this,void 0,void 0,function(){var e;return Us(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(e.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))];case 1:return t.sent(),[2]}})})},xa.prototype.isComponentSet=function(){return null!=this.component},xa.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,t===Ra?void 0:t),this.instances.set(t,e)),e||null},xa.prototype.normalizeInstanceIdentifier=function(t){return!this.component||this.component.multipleInstances?t:Ra},xa);function xa(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}var La,Ma=(Fa.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},Fa.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},Fa.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new Da(t,this);return this.providers.set(t,e),e},Fa.prototype.getProviders=function(){return Array.from(this.providers.values())},Fa);function Fa(t){this.name=t,this.providers=new Map}function Ua(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var ja,Va,qa=[];function Ba(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=Ga[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,Ua(["["+i+"]  "+t.name+":"],n))}}(Va=ja=ja||{})[Va.DEBUG=0]="DEBUG",Va[Va.VERBOSE=1]="VERBOSE",Va[Va.INFO=2]="INFO",Va[Va.WARN=3]="WARN",Va[Va.ERROR=4]="ERROR",Va[Va.SILENT=5]="SILENT";var Wa,Ha={debug:ja.DEBUG,verbose:ja.VERBOSE,info:ja.INFO,warn:ja.WARN,error:ja.ERROR,silent:ja.SILENT},Ka=ja.INFO,Ga=((La={})[ja.DEBUG]="log",La[ja.VERBOSE]="log",La[ja.INFO]="info",La[ja.WARN]="warn",La[ja.ERROR]="error",La),za=(Object.defineProperty(Qa.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in ja))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),Qa.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?Ha[t]:t},Object.defineProperty(Qa.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(Qa.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),Qa.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Ua([this,ja.DEBUG],t)),this._logHandler.apply(this,Ua([this,ja.DEBUG],t))},Qa.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Ua([this,ja.VERBOSE],t)),this._logHandler.apply(this,Ua([this,ja.VERBOSE],t))},Qa.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Ua([this,ja.INFO],t)),this._logHandler.apply(this,Ua([this,ja.INFO],t))},Qa.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Ua([this,ja.WARN],t)),this._logHandler.apply(this,Ua([this,ja.WARN],t))},Qa.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Ua([this,ja.ERROR],t)),this._logHandler.apply(this,Ua([this,ja.ERROR],t))},Qa);function Qa(t){this.name=t,this._logLevel=Ka,this._logHandler=Ba,this._userLogHandler=null,qa.push(this)}function Xa(e){qa.forEach(function(t){t.setLogLevel(e)})}var Ya,Ja=((Wa={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Wa["bad-app-name"]="Illegal App name: '{$appName}",Wa["duplicate-app"]="Firebase App named '{$appName}' already exists",Wa["app-deleted"]="Firebase App named '{$appName}' already deleted",Wa["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Wa["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Wa),$a=new ca("app","Firebase",Ja),Za="@firebase/app",tu="[DEFAULT]",eu=((Ya={})[Za]="fire-core",Ya["@firebase/analytics"]="fire-analytics",Ya["@firebase/auth"]="fire-auth",Ya["@firebase/database"]="fire-rtdb",Ya["@firebase/functions"]="fire-fn",Ya["@firebase/installations"]="fire-iid",Ya["@firebase/messaging"]="fire-fcm",Ya["@firebase/performance"]="fire-perf",Ya["@firebase/remote-config"]="fire-rc",Ya["@firebase/storage"]="fire-gcs",Ya["@firebase/firestore"]="fire-fst",Ya["fire-js"]="fire-js",Ya["firebase-wrapper"]="fire-js-all",Ya),nu=new za("@firebase/app"),ru=(Object.defineProperty(iu.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(iu.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(iu.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),iu.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map(function(t){return t.delete()}))}).then(function(){e.isDeleted_=!0})},iu.prototype._getService=function(t,e){return void 0===e&&(e=tu),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},iu.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=tu),this.container.getProvider(t).clearInstance(e)},iu.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){nu.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},iu.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},iu.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw $a.create("app-deleted",{appName:this.name_})},iu);function iu(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Xs(t),this.container=new Ma(e.name),this._addComponent(new Oa("app",function(){return o},"PUBLIC"));try{for(var s=js(this.firebase_.INTERNAL.components.values()),a=s.next();!a.done;a=s.next()){var u=a.value;this._addComponent(u)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}ru.prototype.name&&ru.prototype.options||ru.prototype.delete||console.log("dc");var ou,su=function t(){var u,c,h,l,e=(u=ru,c={},h=new Map,(l={__esModule:!0,initializeApp:function(t,e){void 0===e&&(e={}),"object"==typeof e&&null!==e||(e={name:e});var n=e;void 0===n.name&&(n.name=tu);var r=n.name;if("string"!=typeof r||!r)throw $a.create("bad-app-name",{appName:String(r)});if(va(c,r))throw $a.create("duplicate-app",{appName:r});var i=new u(t,n,l);return c[r]=i},app:f,registerVersion:function(t,e,n){var r,i=null!==(r=eu[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var a=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&a.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&a.push("and"),s&&a.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void nu.warn(a.join(" "))}p(new Oa(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:Xa,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw $a.create("invalid-log-argument",{appName:name});!function(s,e){for(var t=function(t){var o=null;e&&e.level&&(o=Ha[e.level]),t.userLogHandler=null===s?null:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}}).filter(function(t){return t}).join(" ");e>=(null!=o?o:t.logLevel)&&s({level:ja[e].toLowerCase(),message:i,args:n,type:t.name})}},n=0,r=qa;n<r.length;n++)t(r[n])}(t,e)},apps:null,SDK_VERSION:"7.17.1-20206244562",INTERNAL:{registerComponent:p,removeApp:function(t){delete c[t]},components:h,useAsService:function(t,e){return"serverAuth"!==e?e:null}}}).default=l,Object.defineProperty(l,"apps",{get:function(){return Object.keys(c).map(function(t){return c[t]})}}),f.App=u,l);function f(t){if(!va(c,t=t||tu))throw $a.create("no-app",{appName:t});return c[t]}function p(n){var t,e,r,i=n.name;if(h.has(i))return nu.debug("There were multiple attempts to register component "+i+"."),"PUBLIC"===n.type?l[i]:null;h.set(i,n),"PUBLIC"===n.type&&(r=function(t){if(void 0===t&&(t=f()),"function"!=typeof t[i])throw $a.create("invalid-app-argument",{appName:i});return t[i]()},void 0!==n.serviceProps&&Ys(r,n.serviceProps),l[i]=r,u.prototype[i]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,i).apply(this,n.multipleInstances?t:[])});try{for(var o=js(Object.keys(c)),s=o.next();!s.done;s=o.next()){var a=s.value;c[a]._addComponent(n)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return"PUBLIC"===n.type?l[i]:null}return e.INTERNAL=Ms(Ms({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Ys(e,t)},createSubscribe:_a,ErrorFactory:ca,deepExtend:Ys}),e}(),au=(uu.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if("VERSION"!==(null==(e=t.getComponent())?void 0:e.type))return null;var e,n=t.getImmediate();return n.library+"/"+n.version}).filter(function(t){return t}).join(" ")},uu);function uu(t){this.container=t}"object"==typeof self&&self.self===self&&void 0!==self.firebase&&(nu.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  "),(ou=self.firebase.SDK_VERSION)&&0<=ou.indexOf("LITE")&&nu.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    "));var cu=su.initializeApp;su.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return}}()&&nu.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),cu.apply(void 0,t)};var hu,Fl=su;(hu=Fl).INTERNAL.registerComponent(new Oa("platform-logger",function(t){return new au(t)},"PRIVATE")),hu.registerVersion(Za,"0.6.9-20206244562",void 0),hu.registerVersion("fire-js",""),Fl.registerVersion("firebase","7.17.1-20206244562","app"),function(){var t,o="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},s=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function c(t){var e,n,r="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return r?r.call(t):{next:(e=t,n=0,function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}})}}!function(t,e){if(e){var n=s;t=t.split(".");for(var r=0;r<t.length-1;r++){var i=t[r];i in n||(n[i]={}),n=n[i]}(e=e(r=n[t=t[t.length-1]]))!=r&&null!=e&&o(n,t,{configurable:!0,writable:!0,value:e})}}("Promise",function(t){function a(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function e(){this.a=null}function u(e){return e instanceof a?e:new a(function(t){t(e)})}if(t)return t;e.prototype.b=function(t){var e;null==this.a&&(this.a=[],(e=this).c(function(){e.g()})),this.a.push(t)};var n=s.setTimeout;e.prototype.c=function(t){n(t,0)},e.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},e.prototype.f=function(t){this.c(function(){throw t})},a.prototype.f=function(){function t(e){return function(t){r||(r=!0,e.call(n,t))}}var n=this,r=!1;return{resolve:t(this.m),reject:t(this.g)}},a.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof a)this.s(t);else{t:switch(typeof t){case"object":var e=null!=t;break t;case"function":e=!0;break t;default:e=!1}e?this.u(t):this.h(t)}},a.prototype.u=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.w(e,t):this.h(t)},a.prototype.g=function(t){this.i(2,t)},a.prototype.h=function(t){this.i(1,t)},a.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},a.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)i.b(this.a[t]);this.a=null}};var i=new e;return a.prototype.s=function(t){var e=this.f();t.Oa(e.resolve,e.reject)},a.prototype.w=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},a.prototype.then=function(t,e){function n(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(t){i(t)}}:t}var r,i,o=new a(function(t,e){r=t,i=e});return this.Oa(n(t,r),n(e,i)),o},a.prototype.catch=function(t){return this.then(void 0,t)},a.prototype.Oa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?i.b(n):this.a.push(n)},a.resolve=u,a.reject=function(n){return new a(function(t,e){e(n)})},a.race=function(i){return new a(function(t,e){for(var n=c(i),r=n.next();!r.done;r=n.next())u(r.value).Oa(t,e)})},a.all=function(t){var o=c(t),s=o.next();return s.done?u([]):new a(function(n,t){function e(e){return function(t){r[e]=t,0==--i&&n(r)}}for(var r=[],i=0;r.push(void 0),i++,u(s.value).Oa(e(r.length-1),t),!(s=o.next()).done;);})},a});var u=u||{},l=this||self,f=/^[\w+/_-]+[=]{0,2}$/,p=null;function a(){}function n(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function h(t){var e=n(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==n(t)}function v(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var r="closure_uid_"+(1e9*Math.random()>>>0),i=0;function y(t,e,n){return t.call.apply(t.bind,arguments)}function g(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function m(t,e,n){return(m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:g).apply(null,arguments)}function b(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var w=Date.now||function(){return+new Date};function e(t,e){function n(){}n.prototype=e.prototype,t.Za=e.prototype,t.prototype=new n,t.prototype.constructor=t}function _(t,e,n){this.code=T+t,this.message=e||S[t]||"",this.a=n||null}function E(t){var e=t&&t.code;return e?new _(e.substring(T.length),t.message,t.serverResponse):null}e(_,Error),_.prototype.v=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},_.prototype.toJSON=function(){return this.v()};var I,T="auth/",S={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},C={hd:{Ra:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},pd:{Ra:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://securetoken.googleapis.com/v1/token",Ua:"https://identitytoolkit.googleapis.com/v2/",id:"p"},rd:{Ra:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},sd:{Ra:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Xa:"https://test-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function N(t){for(var e in C)if(C[e].id===t)return{firebaseEndpoint:(t=C[e]).Ra,secureTokenEndpoint:t.Xa,identityPlatformEndpoint:t.Ua};return null}function A(t){if(t)try{return t.$goog_Thenable}catch(t){return}}function k(t){var e;Error.captureStackTrace?Error.captureStackTrace(this,k):(e=Error().stack)&&(this.stack=e),t&&(this.message=String(t))}function O(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");k.call(this,n+t[r])}function P(t,e){throw new O("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function R(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function D(t,e){t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}function x(){this.b=this.a=null}I=N("__EID__")?"__EID__":void 0,e(k,Error),k.prototype.name="CustomError",e(O,k),O.prototype.name="AssertionError",R.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t};var L=new R(function(){return new M},function(t){t.reset()});function M(){this.next=this.b=this.a=null}x.prototype.add=function(t,e){var n=L.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},M.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},M.prototype.reset=function(){this.next=this.b=this.a=null};var F=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},U=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},j=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n,r=t.length,i=[],o=0,s="string"==typeof t?t.split(""):t,a=0;a<r;a++){a in s&&(n=s[a],e.call(void 0,n,a,t)&&(i[o++]=n))}return i},V=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},q=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function B(t,e){return 0<=F(t,e)}function W(t,e){var n;return(n=0<=(e=F(t,e)))&&Array.prototype.splice.call(t,e,1),n}function H(n,r){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(n,function(t,e){r.call(void 0,t,e,n)&&Array.prototype.splice.call(n,e,1).length})}function K(t){return Array.prototype.concat.apply([],arguments)}function G(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var z,Q=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},X=/&/g,Y=/</g,J=/>/g,$=/"/g,Z=/'/g,tt=/\x00/g,et=/[\x00&<>"']/;function nt(t,e){return-1!=t.indexOf(e)}function rt(t,e){return t<e?-1:e<t?1:0}t:{var it=l.navigator;if(it){var ot=it.userAgent;if(ot){z=ot;break t}}z=""}function st(t){return nt(z,t)}function at(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ut(t){for(var e in t)return;return 1}function ct(t){var e,n={};for(e in t)n[e]=t[e];return n}var ht="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<ht.length;o++)n=ht[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ft(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||l).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(v(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;P("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function pt(t,e){this.a=t===yt&&e||"",this.b=vt}function dt(t){return t instanceof pt&&t.constructor===pt&&t.b===vt?t.a:(P("expected object of type Const, got '"+t+"'"),"type_error:Const")}pt.prototype.ra=!0,pt.prototype.qa=function(){return this.a},pt.prototype.toString=function(){return"Const{"+this.a+"}"};var vt={},yt={},gt=new pt(yt,"");function mt(t,e){this.a=t===Tt&&e||"",this.b=It}function bt(t){return t instanceof mt&&t.constructor===mt&&t.b===It?t.a:(P("expected object of type TrustedResourceUrl, got '"+t+"' of type "+n(t)),"type_error:TrustedResourceUrl")}function wt(t,n){var r=dt(t);if(!Et.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return t=r.replace(_t,function(t,e){if(!Object.prototype.hasOwnProperty.call(n,e))throw Error('Found marker, "'+e+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(n));return(t=n[e])instanceof pt?dt(t):encodeURIComponent(String(t))}),new mt(Tt,t)}mt.prototype.ra=!0,mt.prototype.qa=function(){return this.a.toString()},mt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var _t=/%{(\w+)}/g,Et=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,It={},Tt={};function St(t,e){this.a=t===Ot&&e||"",this.b=kt}function Ct(t){return t instanceof St&&t.constructor===St&&t.b===kt?t.a:(P("expected object of type SafeUrl, got '"+t+"' of type "+n(t)),"type_error:SafeUrl")}St.prototype.ra=!0,St.prototype.qa=function(){return this.a.toString()},St.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Nt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function At(t){return t instanceof St?t:(t="object"==typeof t&&t.ra?t.qa():String(t),Nt.test(t)||(t="about:invalid#zClosurez"),new St(Ot,t))}var kt={},Ot={};function Pt(){this.a="",this.b=Dt}function Rt(t){return t instanceof Pt&&t.constructor===Pt&&t.b===Dt?t.a:(P("expected object of type SafeHtml, got '"+t+"' of type "+n(t)),"type_error:SafeHtml")}Pt.prototype.ra=!0,Pt.prototype.qa=function(){return this.a.toString()},Pt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Dt={};function xt(t){var e=new Pt;return e.a=t,e}xt("<!DOCTYPE html>");var Lt=xt("");function Mt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Ft(t){return et.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(X,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(Y,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(J,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace($,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(Z,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(tt,"&#0;"))),t}function Ut(t){return Ut[" "](t),t}xt("<br>"),Ut[" "]=a;var jt,Vt,qt=st("Opera"),Bt=st("Trident")||st("MSIE"),Wt=st("Edge"),Ht=Wt||Bt,Kt=st("Gecko")&&!(nt(z.toLowerCase(),"webkit")&&!st("Edge"))&&!(st("Trident")||st("MSIE"))&&!st("Edge"),Gt=nt(z.toLowerCase(),"webkit")&&!st("Edge");function zt(){var t=l.document;return t?t.documentMode:void 0}t:{var Qt="",Xt=(Vt=z,Kt?/rv:([^\);]+)(\)|;)/.exec(Vt):Wt?/Edge\/([\d\.]+)/.exec(Vt):Bt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Vt):Gt?/WebKit\/(\S+)/.exec(Vt):qt?/(?:Version)[ \/]?(\S+)/.exec(Vt):void 0);if(Xt&&(Qt=Xt?Xt[1]:""),Bt){var Yt=zt();if(null!=Yt&&Yt>parseFloat(Qt)){jt=String(Yt);break t}}jt=Qt}var Jt,$t={};function Zt(a){return t=a,e=function(){for(var t=0,e=Q(String(jt)).split("."),n=Q(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=rt(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||rt(0==o[2].length,0==s[2].length)||rt(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t},n=$t,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e();var t,e,n}Jt=l.document&&Bt?zt():void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(t){}var te=!Bt||9<=Number(Jt);function ee(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ne(n,t){at(t,function(t,e){t&&"object"==typeof t&&t.ra&&(t=t.qa()),"style"==e?n.style.cssText=t:"class"==e?n.className=t:"for"==e?n.htmlFor=t:oe.hasOwnProperty(e)?n.setAttribute(oe[e],t):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?n.setAttribute(e,t):n[e]=t})}var re,ie,oe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function se(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ae(t){if(t&&"number"==typeof t.length){if(v(t))return"function"==typeof t.item||"string"==typeof t.item;if(d(t))return"function"==typeof t.item}}function ue(t){l.setTimeout(function(){throw t},0)}function ce(t,e){var n;ie=ie||(l.Promise&&l.Promise.resolve?(n=l.Promise.resolve(void 0),function(){n.then(fe)}):function(){var t=fe;!d(l.setImmediate)||l.Window&&l.Window.prototype&&!st("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(re=re||function(){var t=l.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!st("Presto")&&(t=function(){var t,e;(o=se(document,"IFRAME")).style.display="none",t=o,e=new mt(Tt,dt(gt)),ft(t,"HTMLIFrameElement"),t.src=bt(e).toString(),document.documentElement.appendChild(o);var n=o.contentWindow;(o=n.document).open(),o.write(Rt(Lt)),o.close();var r="callImmediate"+Math.random(),i="file:"==n.location.protocol?"*":n.location.protocol+"//"+n.location.host,o=m(function(t){"*"!=i&&t.origin!=i||t.data!=r||this.port1.onmessage()},this);n.addEventListener("message",o,!1),this.port1={},this.port2={postMessage:function(){n.postMessage(r,i)}}}),void 0===t||st("Trident")||st("MSIE"))return function(t){l.setTimeout(t,0)};var e=new t,n={},r=n;return e.port1.onmessage=function(){var t;void 0!==n.next&&(t=(n=n.next).Db,n.Db=null,t())},function(t){r.next={Db:t},r=r.next,e.port2.postMessage(0)}}())(t):l.setImmediate(t)}),he||(ie(),he=!0),le.add(t,e)}var he=!1,le=new x;function fe(){for(var t,e,n;n=e=void 0,n=null,(e=le).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){ue(t)}D(L,t)}he=!1}function pe(t,e){if(this.a=de,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=a)try{var n=this;t.call(e,function(t){Ce(n,ve,t)},function(t){if(!(t instanceof De))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Ce(n,ye,t)})}catch(t){Ce(this,ye,t)}}var de=0,ve=2,ye=3;function ge(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}ge.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var me=new R(function(){return new ge},function(t){t.reset()});function be(t,e,n){var r=me.get();return r.g=t,r.b=e,r.f=n,r}function we(t){if(t instanceof pe)return t;var e=new pe(a);return Ce(e,ve,t),e}function _e(n){return new pe(function(t,e){e(n)})}function Ee(t,e,n){Ne(t,e,n,null)||ce(b(e,t))}function Ie(n){return new pe(function(r){var i=n.length,o=[];if(i)for(var t=function(t,e,n){i--,o[t]=e?{Mb:!0,value:n}:{Mb:!1,reason:n},0==i&&r(o)},e=0;e<n.length;e++)Ee(n[e],b(t,e,!0),b(t,e,!1));else r(o)})}function Te(t,e){t.b||t.a!=ve&&t.a!=ye||Ae(t),t.f?t.f.next=e:t.b=e,t.f=e}function Se(t,i,o,s){var e=be(null,null,null);return e.a=new pe(function(n,r){e.g=i?function(t){try{var e=i.call(s,t);n(e)}catch(t){r(t)}}:n,e.b=o?function(t){try{var e=o.call(s,t);void 0===e&&t instanceof De?r(t):n(e)}catch(t){r(t)}}:r}),Te(e.a.c=t,e),e.a}function Ce(t,e,n){var r,i;t.a==de&&(t===n&&(e=ye,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Ne(n,t.Yc,t.Zc,t)||(t.i=n,t.a=e,t.c=null,Ae(t),e!=ye||n instanceof De||(i=n,(r=t).g=!0,ce(function(){r.g&&Re.call(null,i)}))))}function Ne(t,e,n,r){if(t instanceof pe)return Te(t,be(e||a,n||null,r)),1;if(A(t))return t.then(e,n,r),1;if(v(t))try{var i=t.then;if(d(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,function(t){s||(s=!0,n.call(i,t))},o)}catch(t){o(t)}}(t,i,e,n,r),1}catch(t){return n.call(r,t),1}}function Ae(t){t.h||(t.h=!0,ce(t.ec,t))}function ke(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Oe(t,e,n,r){if(n==ye&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Pe(e,n,r);else try{e.c?e.g.call(e.f):Pe(e,n,r)}catch(t){Re.call(null,t)}D(me,e)}function Pe(t,e,n){e==ve?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}pe.prototype.then=function(t,e,n){return Se(this,d(t)?t:null,d(e)?e:null,n)},pe.prototype.$goog_Thenable=!0,(t=pe.prototype).ma=function(t,e){return(t=be(t,t,e)).c=!0,Te(this,t),this},t.o=function(t,e){return Se(this,null,t,e)},t.cancel=function(t){var e;this.a==de&&(e=new De(t),ce(function(){!function t(e,n){if(e.a==de)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,a.a==e&&(o=a),!(o&&1<i)));a=a.next)o||(s=a);o&&(r.a==de&&1==i?t(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):ke(r),Oe(r,o,ye,n)))}e.c=null}else Ce(e,ye,n)}(this,e)},this))},t.Yc=function(t){this.a=de,Ce(this,ve,t)},t.Zc=function(t){this.a=de,Ce(this,ye,t)},t.ec=function(){for(var t;t=ke(this);)Oe(this,t,this.a,this.i);this.h=!1};var Re=ue;function De(t){k.call(this,t)}function xe(){this.wa=this.wa,this.na=this.na}e(De,k);var Le=0;function Me(t){var e;t.wa||(t.wa=!0,t.Ba(),0==Le)||(e=t,Object.prototype.hasOwnProperty.call(e,r)&&e[r]||(e[r]=++i))}xe.prototype.wa=!(De.prototype.name="cancel"),xe.prototype.Ba=function(){if(this.na)for(;this.na.length;)this.na.shift()()};var Fe=Object.freeze||function(t){return t},Ue=!Bt||9<=Number(Jt),je=Bt&&!Zt("9"),Ve=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{l.addEventListener("test",a,e),l.removeEventListener("test",a,e)}catch(t){}return t}();function qe(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Be(t,e){if(qe.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Kt){t:{try{Ut(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:We[t.pointerType]||"",(this.a=t).defaultPrevented&&this.preventDefault()}}qe.prototype.preventDefault=function(){this.defaultPrevented=!0},e(Be,qe);var We=Fe({2:"touch",3:"pen",4:"mouse"});Be.prototype.preventDefault=function(){Be.Za.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,je)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}},Be.prototype.f=function(){return this.a};var He="closure_listenable_"+(1e6*Math.random()|0),Ke=0;function Ge(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ta=i,this.key=++Ke,this.ua=this.Na=!1}function ze(t){t.ua=!0,t.listener=null,t.proxy=null,t.src=null,t.Ta=null}function Qe(t){this.src=t,this.a={},this.b=0}function Xe(t,e){var n=e.type;n in t.a&&W(t.a[n],e)&&(ze(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function Ye(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ua&&o.listener==e&&o.capture==!!n&&o.Ta==r)return i}return-1}Qe.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Ye(t,e,r,i);return-1<s?(e=t[s],n||(e.Na=!1)):((e=new Ge(e,this.src,o,!!r,i)).Na=n,t.push(e)),e};var Je="closure_lm_"+(1e6*Math.random()|0),$e={};function Ze(t,e,n,r,i){if(r&&r.once)en(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)Ze(t,e[o],n,r,i);else n=ln(n),t&&t[He]?pn(t,e,n,v(r)?!!r.capture:!!r,i):tn(t,e,n,!1,r,i)}function tn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s,a,u=v(i)?!!i.capture:!!i,c=cn(t);if(c||(t[Je]=c=new Qe(t)),!(n=c.add(e,n,r,u,o)).proxy)if(s=un,r=a=Ue?function(t){return s.call(a.src,a.listener,t)}:function(t){if(!(t=s.call(a.src,a.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)Ve||(i=u),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(on(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function en(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)en(t,e[o],n,r,i);else n=ln(n),t&&t[He]?dn(t,e,n,v(r)?!!r.capture:!!r,i):tn(t,e,n,!0,r,i)}function nn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)nn(t,e[o],n,r,i);else r=v(r)?!!r.capture:!!r,n=ln(n),t&&t[He]?(t=t.u,(e=String(e).toString())in t.a&&-1<(n=Ye(o=t.a[e],n,r,i))&&(ze(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):(t=t&&cn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Ye(e,n,r,i)),(n=-1<t?e[t]:null)&&rn(n))}function rn(t){var e,n,r;"number"!=typeof t&&t&&!t.ua&&((e=t.src)&&e[He]?Xe(e.u,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(on(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=cn(e))?(Xe(n,t),0==n.b&&(n.src=null,e[Je]=null)):ze(t)))}function on(t){return t in $e?$e[t]:$e[t]="on"+t}function sn(t,e,n,r){var i=!0;if((t=cn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.ua&&(o=an(o,r),i=i&&!1!==o)}return i}function an(t,e){var n=t.listener,r=t.Ta||t.src;return t.Na&&rn(t),n.call(r,e)}function un(t,e){if(t.ua)return!0;if(Ue)return an(t,new Be(e,this));if(!e)t:{e=["window","event"];for(var n=l,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Be(r=e,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}!i&&null!=r.returnValue||(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=sn(r[i],t,!0,e),n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=sn(r[i],t,!1,e),n=n&&o}return n}function cn(t){return(t=t[Je])instanceof Qe?t:null}var hn="__closure_events_fn_"+(1e9*Math.random()>>>0);function ln(e){return d(e)?e:(e[hn]||(e[hn]=function(t){return e.handleEvent(t)}),e[hn])}function fn(){xe.call(this),this.u=new Qe(this),(this.Yb=this).eb=null}function pn(t,e,n,r,i){t.u.add(String(e),n,!1,r,i)}function dn(t,e,n,r,i){t.u.add(String(e),n,!0,r,i)}function vn(t,e,n,r){if(!(e=t.u.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,a,u=e[o];u&&!u.ua&&u.capture==n&&(s=u.listener,a=u.Ta||u.src,u.Na&&Xe(t.u,u),i=!1!==s.call(a,r)&&i)}return i&&!r.defaultPrevented}function yn(t,e,n){if(d(t))n&&(t=m(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=m(t.handleEvent,t)}return 2147483647<Number(e)?-1:l.setTimeout(t,e||0)}function gn(n){var r=null;return new pe(function(t,e){-1==(r=yn(function(){t(void 0)},n))&&e(Error("Failed to schedule timer."))}).o(function(t){throw l.clearTimeout(r),t})}function mn(t){if(t.V&&"function"==typeof t.V)return t.V();if("string"==typeof t)return t.split("");if(h(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function bn(t){if(t.X&&"function"==typeof t.X)return t.X();if(!t.V||"function"!=typeof t.V){if(h(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function wn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof wn)for(n=t.X(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function _n(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];En(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)En(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function En(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e(fn,xe),fn.prototype[He]=!0,fn.prototype.addEventListener=function(t,e,n,r){Ze(this,t,e,n,r)},fn.prototype.removeEventListener=function(t,e,n,r){nn(this,t,e,n,r)},fn.prototype.dispatchEvent=function(t){var e,n=this.eb;if(n)for(e=[];n;n=n.eb)e.push(n);n=this.Yb;var r=t.type||t;if("string"==typeof t?t=new qe(t,n):t instanceof qe?t.target=t.target||n:(s=t,lt(t=new qe(r,n),s)),s=!0,e)for(var i=e.length-1;0<=i;i--)var o=t.b=e[i],s=vn(o,r,!0,t)&&s;if(s=vn(o=t.b=n,r,!0,t)&&s,s=vn(o,r,!1,t)&&s,e)for(i=0;i<e.length;i++)s=vn(o=t.b=e[i],r,!1,t)&&s;return s},fn.prototype.Ba=function(){if(fn.Za.Ba.call(this),this.u){var t,e=this.u;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ze(n[r]);delete e.a[t],e.b--}}this.eb=null},(t=wn.prototype).V=function(){_n(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.X=function(){return _n(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return En(this.b,t)?this.b[t]:e},t.set=function(t,e){En(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.X(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var In=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/\\#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Tn(t,e){var n;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,t instanceof Tn?(this.h=void 0!==e?e:t.h,Sn(this,t.f),this.i=t.i,this.b=t.b,Cn(this,t.l),this.c=t.c,Nn(this,Gn(t.a)),this.g=t.g):t&&(n=String(t).match(In))?(this.h=!!e,Sn(this,n[1]||"",!0),this.i=Rn(n[2]||""),this.b=Rn(n[3]||"",!0),Cn(this,n[4]),this.c=Rn(n[5]||"",!0),Nn(this,n[6]||"",!0),this.g=Rn(n[7]||"")):(this.h=!!e,this.a=new Vn(null,this.h))}function Sn(t,e,n){t.f=n?Rn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Cn(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.l=e}else t.l=null}function Nn(t,e,n){var r,i;e instanceof Vn?(t.a=e,r=t.a,(i=t.h)&&!r.f&&(qn(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Wn(this,e),Kn(this,n,t))},r)),r.f=i):(n||(e=Dn(e,Un)),t.a=new Vn(e,t.h))}function An(t,e,n){t.a.set(e,n)}function kn(t,e){return t.a.get(e)}function On(t){return t instanceof Tn?new Tn(t):new Tn(t,void 0)}function Pn(t,e){var n=new Tn(null,void 0);return Sn(n,"https"),t&&(n.b=t),e&&(n.c=e),n}function Rn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Dn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,xn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function xn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Tn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Dn(e,Ln,!0),":");var n=this.b;return!n&&"file"!=e||(t.push("//"),(e=this.i)&&t.push(Dn(e,Ln,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.l)&&t.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(Dn(n,"/"==n.charAt(0)?Fn:Mn,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.g)&&t.push("#",Dn(n,jn)),t.join("")},Tn.prototype.resolve=function(t){var e=new Tn(this),n=!!t.f;n?Sn(e,t.f):n=!!t.i,n?e.i=t.i:n=!!t.b,n?e.b=t.b:n=null!=t.l;var r,i=t.c;if(n)Cn(e,t.l);else if(n=!!t.c){if("/"!=i.charAt(0)&&(this.b&&!this.c?i="/"+i:-1!=(r=e.c.lastIndexOf("/"))&&(i=e.c.substr(0,r+1)+i)),".."==(r=i)||"."==r)i="";else if(nt(r,"./")||nt(r,"/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var o=[],s=0;s<r.length;){var a=r[s++];"."==a?i&&s==r.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),i&&s==r.length&&o.push("")):(o.push(a),i=!0)}i=o.join("/")}else i=r}return n?e.c=i:n=""!==t.a.toString(),n?Nn(e,Gn(t.a)):n=!!t.g,n&&(e.g=t.g),e};var Ln=/[#\/\?@]/g,Mn=/[#\?:]/g,Fn=/[#\?]/g,Un=/[#\?@]/g,jn=/#/g;function Vn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function qn(a){a.a||(a.a=new wn,a.b=0,a.c&&function(t){if(t){t=t.split("&");for(var e=0;e<t.length;e++){var n,r=t[e].indexOf("="),i=null;0<=r?(n=t[e].substring(0,r),i=t[e].substring(r+1)):n=t[e],o=n,s=i?decodeURIComponent(i.replace(/\+/g," ")):"",a.add(decodeURIComponent(o.replace(/\+/g," ")),s)}}var o,s}(a.c))}function Bn(t){var e=bn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Vn(null,void 0);t=mn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Kn(n,i,o):n.add(i,o)}return n}function Wn(t,e){qn(t),e=zn(t,e),En(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,En((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&_n(t)))}function Hn(t,e){return qn(t),e=zn(t,e),En(t.a.b,e)}function Kn(t,e,n){Wn(t,e),0<n.length&&(t.c=null,t.a.set(zn(t,e),G(n)),t.b+=n.length)}function Gn(t){var e=new Vn;return e.c=t.c,t.a&&(e.a=new wn(t.a),e.b=t.b),e}function zn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Qn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),t(e,i[s],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(s=n[i])&&(r.push(o),$n(i,r),r.push(":"),t(e,s,r),o=",");return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":$n(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Xn,t,e),e.join("")}function Xn(){}(t=Vn.prototype).add=function(t,e){qn(this),this.c=null,t=zn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(n,r){qn(this),this.a.forEach(function(t,e){U(t,function(t){n.call(r,t,e,this)},this)},this)},t.X=function(){qn(this);for(var t=this.a.V(),e=this.a.X(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.V=function(t){qn(this);var e=[];if("string"==typeof t)Hn(this,t)&&(e=K(e,this.a.get(zn(this,t))));else{t=this.a.V();for(var n=0;n<t.length;n++)e=K(e,t[n])}return e},t.set=function(t,e){return qn(this),this.c=null,Hn(this,t=zn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.X(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.V(r),o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.c=t.join("&")};var Yn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Jn=/\uffff/.test("ï¿¿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function $n(t,e){e.push('"',t.replace(Jn,function(t){var e=Yn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Yn[t]=e),e}),'"')}function Zn(){var t=mr();return Bt&&Jt&&11==Jt||/Edge\/\d+/.test(t)}function tr(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function er(t,e){e=e||l.window;var n="about:blank";t&&(n=Ct(At(t))),e.location.href=n}function nr(t){return!!((t=(t||mr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function rr(t){t=t||l.window;try{t.close()}catch(t){}}function ir(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=mr().toLowerCase(),r&&(e.target=r,nt(n,"crios/")&&(e.target="_blank")),vr(mr())==pr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof St?n:At(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((st("iPhone")&&!st("iPod")&&!st("iPad")||st("iPad")||st("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(ft(s=se(document,"A"),"HTMLAnchorElement"),e instanceof St||e instanceof St||(e="object"==typeof e&&e.ra?e.qa():String(e),Nt.test(e)||(e="about:invalid#zClosurez"),e=new St(Ot,e)),s.href=Ct(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=r.open("",n,s),t=Ct(e),s&&(Ht&&nt(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t=xt('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ft(t)+'">'),r=s.document)&&(r.write(Rt(t)),r.close())):(s=r.open(Ct(e),n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var or=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sr=/^[^@]+@[^@]+$/;function ar(){var e=null;return new pe(function(t){"complete"==l.document.readyState?t():(e=function(){t()},en(window,"load",e))}).o(function(t){throw nn(window,"load",e),t})}function ur(t){return t=t||mr(),!("file:"!==Ir()&&"ionic:"!==Ir()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function cr(){var t=l.window;try{return t&&t!=t.top}catch(t){return}}function hr(){return void 0!==l.WorkerGlobalScope&&"function"==typeof l.importScripts}function lr(){return Fl.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Fl.INTERNAL.hasOwnProperty("node")?"Node":hr()?"Worker":"Browser"}function fr(){var t=lr();return"ReactNative"===t||"Node"===t}var pr="Firefox",dr="Chrome";function vr(t){var e=t.toLowerCase();return nt(e,"opera/")||nt(e,"opr/")||nt(e,"opios/")?"Opera":nt(e,"iemobile")?"IEMobile":nt(e,"msie")||nt(e,"trident/")?"IE":nt(e,"edge/")?"Edge":nt(e,"firefox/")?pr:nt(e,"silk/")?"Silk":nt(e,"blackberry")?"Blackberry":nt(e,"webos")?"Webos":!nt(e,"safari/")||nt(e,"chrome/")||nt(e,"crios/")||nt(e,"android")?!nt(e,"chrome/")&&!nt(e,"crios/")||nt(e,"edge/")?nt(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":dr:"Safari"}var yr={jd:"FirebaseCore-web",ld:"FirebaseUI-web"};function gr(t,e){e=e||[];var n,r=[],i={};for(n in yr)i[yr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=lr())?r=vr(i=mr()):"Worker"===r&&(r=vr(i=mr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function mr(){return l.navigator&&l.navigator.userAgent||""}function br(t,e){t=t.split("."),e=e||l;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function wr(){try{var t=l.localStorage,e=Ar();if(t)return t.setItem(e,"1"),t.removeItem(e),!Zn()||!!l.indexedDB}catch(t){return hr()&&!!l.indexedDB}return!1}function _r(){return(Er()||"chrome-extension:"===Ir()||ur())&&!fr()&&wr()&&!hr()}function Er(){return"http:"===Ir()||"https:"===Ir()}function Ir(){return l.location&&l.location.protocol||null}function Tr(t){return!nr(t=t||mr())&&vr(t)!=pr}function Sr(t){return void 0===t?null:Qn(t)}function Cr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Nr(t){if(null!==t)return JSON.parse(t)}function Ar(t){return t||Math.floor(1e9*Math.random()).toString()}function kr(t){return"Safari"!=vr(t=t||mr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Or(){var t=l.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Pr(t,e){if(e<t)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=mr(),e=lr(),this.b=nr(t)||"ReactNative"===e}function Rr(){var t=l.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Dr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function xr(){return br("fireauth.oauthhelper",l)||br("fireauth.iframe",l)}Pr.prototype.get=function(){var t=l.navigator;return!t||"boolean"!=typeof t.onLine||!Er()&&"chrome-extension:"!==Ir()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Lr,Mr={};function Fr(t){Mr[t]||(Mr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Ur={};Object.defineProperty(Ur,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Ur,"abcd",{configurable:!0,enumerable:!0,value:2}),Lr=2==Ur.abcd}catch(t){Lr=!1}function jr(t,e,n){Lr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Vr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&jr(t,n,e[n])}function qr(t){var e={};return Vr(e,t),e}function Br(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)jr(e,n,Br(t[n]));return e}function Wr(t){var e=t&&(t[Qr]?"phone":null);if(!(e&&t&&t[zr]))throw new _("internal-error","Internal assert: invalid MultiFactorInfo object");jr(this,"uid",t[zr]),jr(this,"displayName",t[Kr]||null);var n=null;t[Gr]&&(n=new Date(t[Gr]).toUTCString()),jr(this,"enrollmentTime",n),jr(this,"factorId",e)}function Hr(t){try{var e=new Xr(t)}catch(t){e=null}return e}Wr.prototype.v=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Kr="displayName",Gr="enrolledAt",zr="mfaEnrollmentId",Qr="phoneInfo";function Xr(t){Wr.call(this,t),jr(this,"phoneNumber",t[Qr])}function Yr(t){var e={},n=t[ti],r=t[ni],i=t[ri];if(t=Hr(t[ei]),!i||i!=$r&&i!=Zr&&!n||i==Zr&&!r||i==Jr&&!t)throw Error("Invalid checkActionCode response!");i==Zr?(e[oi]=n||null,e[ai]=n||null,e[ii]=r):(e[oi]=r||null,e[ai]=r||null,e[ii]=n||null),e[si]=t||null,jr(this,ci,i),jr(this,ui,Br(e))}e(Xr,Wr),Xr.prototype.v=function(){var t=Xr.Za.v.call(this);return t.phoneNumber=this.phoneNumber,t};var Jr="REVERT_SECOND_FACTOR_ADDITION",$r="EMAIL_SIGNIN",Zr="VERIFY_AND_CHANGE_EMAIL",ti="email",ei="mfaInfo",ni="newEmail",ri="requestType",ii="email",oi="fromEmail",si="multiFactorInfo",ai="previousEmail",ui="data",ci="operation";function hi(t){var e=kn(t=On(t),li)||null,n=kn(t,fi)||null,r=(r=kn(t,vi)||null)&&gi[r]||null;if(!e||!n||!r)throw new _("argument-error",li+", "+fi+"and "+vi+" are required in a valid action code URL.");Vr(this,{apiKey:e,operation:r,code:n,continueUrl:kn(t,pi)||null,languageCode:kn(t,di)||null,tenantId:kn(t,yi)||null})}var li="apiKey",fi="oobCode",pi="continueUrl",di="languageCode",vi="mode",yi="tenantId",gi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Jr,signIn:$r,verifyAndChangeEmail:Zr,verifyEmail:"VERIFY_EMAIL"};function mi(t){try{return new hi(t)}catch(t){return null}}function bi(t){var e=t[Ti];if(void 0===e)throw new _("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new _("invalid-continue-uri");if(this.h=e,this.b=this.a=null,this.g=!1,(r=t[wi])&&"object"==typeof r){e=r[Ni];var n=r[Si],r=r[Ci];if("string"==typeof e&&e.length){if(this.a=e,void 0!==n&&"boolean"!=typeof n)throw new _("argument-error",Si+" property must be a boolean when specified.");if(this.g=!!n,void 0!==r&&("string"!=typeof r||"string"==typeof r&&!r.length))throw new _("argument-error",Ci+" property must be a non empty string when specified.");this.b=r||null}else{if(void 0!==e)throw new _("argument-error",Ni+" property must be a non empty string when specified.");if(void 0!==n||void 0!==r)throw new _("missing-android-pkg-name")}}else if(void 0!==r)throw new _("argument-error",wi+" property must be a non null object when specified.");if(this.f=null,(e=t[Ii])&&"object"==typeof e){if("string"==typeof(e=e[Ai])&&e.length)this.f=e;else if(void 0!==e)throw new _("argument-error",Ai+" property must be a non empty string when specified.")}else if(void 0!==e)throw new _("argument-error",Ii+" property must be a non null object when specified.");if(void 0!==(e=t[Ei])&&"boolean"!=typeof e)throw new _("argument-error",Ei+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[_i])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new _("argument-error",_i+" property must be a non empty string when specified.");this.i=t||null}var wi="android",_i="dynamicLinkDomain",Ei="handleCodeInApp",Ii="iOS",Ti="url",Si="installApp",Ci="minimumVersion",Ni="packageName",Ai="bundleId";function ki(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Oi=null;function Pi(t){var e=Di(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.g=t,this.c=e.exp,this.h=e.sub,this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function Ri(t){try{return new Pi(t)}catch(t){return null}}function Di(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e,n=(4-(t=t[1]).length%4)%4,r=0;r<n;r++)t+=".";try{return JSON.parse((e="",function(r,t){function e(t){for(;i<r.length;){var e=r.charAt(i++),n=Oi[e];if(null!=n)return n;if(!/^[\s\xa0]*$/.test(e))throw Error("Unknown base64 encoding at char: "+e)}return t}!function(){if(!Oi){Oi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;n<5;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Oi[o]&&(Oi[o]=i)}}}();for(var i=0;;){var n=e(-1),o=e(0),s=e(64),a=e(64);if(64===a&&-1===n)break;t(n<<2|o>>4),64!=s&&(t(o<<4&240|s>>2),64!=a&&t(s<<6&192|a))}}(t,function(t){e+=String.fromCharCode(t)}),e))}catch(t){}return null}Pi.prototype.S=function(){return this.f},Pi.prototype.i=function(){return this.b},Pi.prototype.toString=function(){return this.g};var xi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Li=["client_id","response_type","scope","redirect_uri","state"],Mi={kd:{Ha:"locale",ta:700,sa:600,ea:"facebook.com",Va:Li},md:{Ha:null,ta:500,sa:750,ea:"github.com",Va:Li},nd:{Ha:"hl",ta:515,sa:680,ea:"google.com",Va:Li},td:{Ha:"lang",ta:485,sa:705,ea:"twitter.com",Va:xi},gd:{Ha:"locale",ta:640,sa:600,ea:"apple.com",Va:[]}};function Fi(t){for(var e in Mi)if(Mi[e].ea==t)return Mi[e];return null}function Ui(t){var e={};e["facebook.com"]=Wi,e["google.com"]=Ki,e["github.com"]=Hi,e["twitter.com"]=Gi;var n=t&&t[Vi];try{if(n)return e[n]?new e[n](t):new Bi(t);if(void 0!==t[ji])return new qi(t)}catch(t){}return null}var ji="idToken",Vi="providerId";function qi(t){var e,n=t[Vi];if(n||!t[ji]||(e=Ri(t[ji]))&&e.a&&(n=e.a),!n)throw Error("Invalid additional user info!");"anonymous"!=n&&"custom"!=n||(n=null),e=!1,void 0!==t.isNewUser?e=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(e=!0),jr(this,"providerId",n),jr(this,"isNewUser",e)}function Bi(t){qi.call(this,t),jr(this,"profile",Br((t=Nr(t.rawUserInfo||"{}"))||{}))}function Wi(t){if(Bi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Hi(t){if(Bi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");jr(this,"username",this.profile&&this.profile.login||null)}function Ki(t){if(Bi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Gi(t){if(Bi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");jr(this,"username",t.screenName||null)}function zi(t){var e=kn(r=On(t),"link"),n=kn(On(e),"link"),r=kn(r,"deep_link_id");return kn(On(r),"link")||r||n||e||t}function Qi(t,e){if(!t&&!e)throw new _("internal-error","Internal assert: no raw session string available");if(t&&e)throw new _("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?Xi:Yi}e(Bi,qi),e(Wi,Bi),e(Hi,Bi),e(Ki,Bi),e(Gi,Bi);var Xi="enroll",Yi="signin";function Ji(){}function $i(t,n){return t.then(function(t){if(t[Vs]){var e=Ri(t[Vs]);if(!e||n!=e.h)throw new _("user-mismatch");return t}throw new _("user-mismatch")}).o(function(t){throw t&&t.code&&t.code==T+"user-not-found"?new _("user-mismatch"):t})}function Zi(t,e){if(!e)throw new _("internal-error","failed to construct a credential");this.a=e,jr(this,"providerId",t),jr(this,"signInMethod",t)}function to(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function eo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new Zi(t.providerId,t.pendingToken)}catch(t){}return null}function no(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&jr(this,"idToken",e.idToken),e.accessToken&&jr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&jr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new _("internal-error","failed to construct a credential");jr(this,"accessToken",e.oauthToken),jr(this,"secret",e.oauthTokenSecret)}jr(this,"providerId",t),jr(this,"signInMethod",n)}function ro(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Bn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function io(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new no(t.providerId,e,t.signInMethod)}catch(t){}}return null}function oo(t,e){this.Oc=e||[],Vr(this,{providerId:t,isOAuthProvider:!0}),this.Fb={},this.lb=(Fi(t)||{}).Ha||null,this.kb=null}function so(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new _("argument-error",'SAML provider IDs must be prefixed with "saml."');oo.call(this,t,[])}function ao(t){oo.call(this,t,Li),this.a=[]}function uo(){ao.call(this,"facebook.com")}function co(t){if(!t)throw new _("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new uo).credential({accessToken:e})}function ho(){ao.call(this,"github.com")}function lo(t){if(!t)throw new _("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new ho).credential({accessToken:e})}function fo(){ao.call(this,"google.com"),this.Aa("profile")}function po(t,e){var n=t;return v(t)&&(n=t.idToken,e=t.accessToken),(new fo).credential({idToken:n,accessToken:e})}function vo(){oo.call(this,"twitter.com",xi)}function yo(t,e){var n=t;if(v(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new _("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new no("twitter.com",n,"twitter.com")}function go(t,e,n){this.a=t,this.f=e,jr(this,"providerId","password"),jr(this,"signInMethod",n===bo.EMAIL_LINK_SIGN_IN_METHOD?bo.EMAIL_LINK_SIGN_IN_METHOD:bo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function mo(t){return t&&t.email&&t.password?new go(t.email,t.password,t.signInMethod):null}function bo(){Vr(this,{providerId:"password",isOAuthProvider:!1})}function wo(t,e){if(!(e=_o(e)))throw new _("argument-error","Invalid email link!");return new go(t,e.code,bo.EMAIL_LINK_SIGN_IN_METHOD)}function _o(t){return(t=mi(t=zi(t)))&&t.operation===$r?t:null}function Eo(t){if(!(t.bb&&t.ab||t.Ja&&t.da))throw new _("internal-error");this.a=t,jr(this,"providerId","phone"),this.ea="phone",jr(this,"signInMethod","phone")}function Io(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var n={};return U(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(t){e[t]&&(n[t]=e[t])}),new Eo(n)}return null}function To(t){return t.a.Ja&&t.a.da?{temporaryProof:t.a.Ja,phoneNumber:t.a.da}:{sessionInfo:t.a.bb,code:t.a.ab}}function So(t){try{this.a=t||Fl.auth()}catch(t){throw new _("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Vr(this,{providerId:"phone",isOAuthProvider:!1})}function Co(t,e){if(!t)throw new _("missing-verification-id");if(!e)throw new _("missing-verification-code");return new Eo({bb:t,ab:e})}function No(t){if(t.temporaryProof&&t.phoneNumber)return new Eo({Ja:t.temporaryProof,da:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return po(o,n);case"facebook.com":return co(n);case"github.com":return lo(n);case"twitter.com":return yo(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new Zi(e,s):new no(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new ao(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Ao(t){if(!t.isOAuthProvider)throw new _("invalid-oauth-provider")}function ko(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new _("invalid-auth-event");if(this.g&&this.a)throw new _("invalid-auth-event");if(this.g&&!this.f)throw new _("invalid-auth-event")}function Oo(t){return(t=t||{}).type?new ko(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&E(t.error),t.postBody,t.tenantId):null}function Po(){this.b=null,this.a=[]}Qi.prototype.Fa=function(){return this.a?we(this.a):we(this.b)},Qi.prototype.v=function(){return this.type==Xi?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},Ji.prototype.ia=function(){},Ji.prototype.b=function(){},Ji.prototype.c=function(){},Ji.prototype.v=function(){},Zi.prototype.ia=function(t){return oa(t,to(this))},Zi.prototype.b=function(t,e){var n=to(this);return n.idToken=e,sa(t,n)},Zi.prototype.c=function(t,e){return $i(aa(t,to(this)),e)},Zi.prototype.v=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},no.prototype.ia=function(t){return oa(t,ro(this))},no.prototype.b=function(t,e){var n=ro(this);return n.idToken=e,sa(t,n)},no.prototype.c=function(t,e){return $i(aa(t,ro(this)),e)},no.prototype.v=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},oo.prototype.Ia=function(t){return this.Fb=ct(t),this},e(so,oo),e(ao,oo),ao.prototype.Aa=function(t){return B(this.a,t)||this.a.push(t),this},ao.prototype.Nb=function(){return G(this.a)},ao.prototype.credential=function(t,e){var n;if(!(n=v(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new _("argument-error","credential failed: must provide the ID token and/or the access token.");return new no(this.providerId,n,this.providerId)},e(uo,ao),jr(uo,"PROVIDER_ID","facebook.com"),jr(uo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),e(ho,ao),jr(ho,"PROVIDER_ID","github.com"),jr(ho,"GITHUB_SIGN_IN_METHOD","github.com"),e(fo,ao),jr(fo,"PROVIDER_ID","google.com"),jr(fo,"GOOGLE_SIGN_IN_METHOD","google.com"),e(vo,oo),jr(vo,"PROVIDER_ID","twitter.com"),jr(vo,"TWITTER_SIGN_IN_METHOD","twitter.com"),go.prototype.ia=function(t){return this.signInMethod==bo.EMAIL_LINK_SIGN_IN_METHOD?Ba(t,va,{email:this.a,oobCode:this.f}):Ba(t,Fa,{email:this.a,password:this.f})},go.prototype.b=function(t,e){return this.signInMethod==bo.EMAIL_LINK_SIGN_IN_METHOD?Ba(t,ya,{idToken:e,email:this.a,oobCode:this.f}):Ba(t,ka,{idToken:e,email:this.a,password:this.f})},go.prototype.c=function(t,e){return $i(this.ia(t),e)},go.prototype.v=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Vr(bo,{PROVIDER_ID:"password"}),Vr(bo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Vr(bo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Eo.prototype.ia=function(t){return t.cb(To(this))},Eo.prototype.b=function(t,e){var n=To(this);return n.idToken=e,Ba(t,ja,n)},Eo.prototype.c=function(t,e){var n=To(this);return n.operation="REAUTH",$i(t=Ba(t,Va,n),e)},Eo.prototype.v=function(){var t={providerId:"phone"};return this.a.bb&&(t.verificationId=this.a.bb),this.a.ab&&(t.verificationCode=this.a.ab),this.a.Ja&&(t.temporaryProof=this.a.Ja),this.a.da&&(t.phoneNumber=this.a.da),t},So.prototype.cb=function(r,i){var o=this.a.b;return we(i.verify()).then(function(n){if("string"!=typeof n)throw new _("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(i.type){case"recaptcha":var t=v(r)?r.session:null,e=v(r)?r.phoneNumber:r;return(t&&t.type==Xi?t.Fa().then(function(t){return Ba(o,Pa,{idToken:t,phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:n}}).then(function(t){return t.phoneSessionInfo.sessionInfo})}):t&&t.type==Yi?t.Fa().then(function(t){return e={mfaPendingCredential:t,mfaEnrollmentId:r.multiFactorHint&&r.multiFactorHint.uid||r.multiFactorUid,phoneSignInInfo:{recaptchaToken:n}},Ba(o,Ra,e).then(function(t){return t.phoneResponseInfo.sessionInfo});var e}):Ba(o,Na,{phoneNumber:e,recaptchaToken:n})).then(function(t){return"function"==typeof i.reset&&i.reset(),t},function(t){throw"function"==typeof i.reset&&i.reset(),t});default:throw new _("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Vr(So,{PROVIDER_ID:"phone"}),Vr(So,{PHONE_SIGN_IN_METHOD:"phone"}),ko.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},ko.prototype.S=function(){return this.h},ko.prototype.v=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.v()}};var Ro,Do=null;function xo(t){var e="unauthorized-domain",n=void 0,r=On(t);t=r.b,"chrome-extension"==(r=r.f)?n=Mt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Mt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",_.call(this,e,n)}function Lo(t,e,n){_.call(this,t,n),(t=e||{}).Gb&&jr(this,"email",t.Gb),t.da&&jr(this,"phoneNumber",t.da),t.credential&&jr(this,"credential",t.credential),t.Wb&&jr(this,"tenantId",t.Wb)}function Mo(t){if(t.code){var e=t.code||"";0==e.indexOf(T)&&(e=e.substring(T.length));var n={credential:No(t),Wb:t.tenantId};if(t.email)n.Gb=t.email;else if(t.phoneNumber)n.da=t.phoneNumber;else if(!n.credential)return new _(e,t.message||void 0);return new Lo(e,n,t.message)}return null}function Fo(){}function Uo(t){return t.c||(t.c=t.b())}function jo(){}function Vo(t){if(t.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return t.f;for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function qo(){}function Bo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=m(this.oc,this),this.a.onerror=m(this.Pb,this),this.a.onprogress=m(this.pc,this),this.a.ontimeout=m(this.tc,this)}function Wo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Ho(t,e,n){this.reset(t,e,n,void 0,void 0)}function Ko(t){this.f=t,this.b=this.c=this.a=null}function Go(t,e){this.name=t,this.value=e}e(xo,_),e(Lo,_),Lo.prototype.v=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.v();return e&&lt(t,e),t},Lo.prototype.toJSON=function(){return this.v()},Fo.prototype.c=null,e(jo,Fo),jo.prototype.a=function(){var t=Vo(this);return t?new ActiveXObject(t):new XMLHttpRequest},jo.prototype.b=function(){var t={};return Vo(this)&&(t[0]=!0,t[1]=!0),t},Ro=new jo,e(qo,Fo),qo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Bo;throw Error("Unsupported browser")},qo.prototype.b=function(){return{}},(t=Bo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.oc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Wo(this,4)},t.Pb=function(){this.status=500,this.response=this.responseText="",Wo(this,4)},t.tc=function(){this.Pb()},t.pc=function(){this.status=200,Wo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Ho.prototype.a=null,Ho.prototype.reset=function(t,e,n,r,i){delete this.a},Go.prototype.toString=function(){return this.name};var zo=new Go("SEVERE",1e3),Qo=new Go("WARNING",900),Xo=new Go("CONFIG",700),Yo=new Go("FINE",500);Ko.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(P("Root logger has no level set."),null)}(this).value)for(d(e)&&(e=e()),t=new Ho(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Jo,$o={},Zo=null;function ts(t){var e,n,r;return Zo||(Zo=new Ko(""),($o[""]=Zo).c=Xo),(e=$o[t])||(e=new Ko(t),n=t.lastIndexOf("."),r=t.substr(n+1),(n=ts(t.substr(0,n))).b||(n.b={}),(n.b[r]=e).a=n,$o[t]=e),e}function es(t,e){t&&t.log(Yo,e,void 0)}function ns(t){this.f=t}function rs(t){fn.call(this),this.s=t,this.readyState=is,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=ts("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}e(ns,Fo),ns.prototype.a=function(){return new rs(this.f)},ns.prototype.b=(Jo={},function(){return Jo}),e(rs,fn);var is=0;function os(t){t.c.read().then(t.nc.bind(t)).catch(t.Sa.bind(t))}function ss(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,as(t)}function as(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function us(t){fn.call(this),this.headers=new wn,this.D=t||null,this.c=!1,this.B=this.a=null,this.h=this.P=this.l="",this.f=this.O=this.i=this.N=!1,this.g=0,this.s=null,this.m=cs,this.w=this.R=!1}(t=rs.prototype).open=function(t,e){if(this.readyState!=is)throw this.abort(),Error("Error reopening a connection");this.m=t,this.g=e,this.readyState=1,as(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.m,credentials:void 0,cache:void 0};t&&(e.body=t),this.s.fetch(new Request(this.g,e)).then(this.sc.bind(this),this.Sa.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ss(this,!1)),this.readyState=is},t.sc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,as(this)),this.a&&(this.readyState=3,as(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.qc.bind(this),this.Sa.bind(this)):void 0!==l.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,os(this)):t.text().then(this.rc.bind(this),this.Sa.bind(this)))))},t.nc=function(t){var e;this.a&&((e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done}))&&(this.response=this.responseText+=e),t.done?ss(this,!0):as(this),3==this.readyState&&os(this))},t.rc=function(t){this.a&&(this.response=this.responseText=t,ss(this,!0))},t.qc=function(t){this.a&&(this.response=t,ss(this,!0))},t.Sa=function(t){var e=this.h;e&&e.log(Qo,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&ss(this,!0)},t.setRequestHeader=function(t,e){this.i.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(Qo,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(Qo,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},e(us,fn);var cs="";us.prototype.b=ts("goog.net.XhrIo");var hs=/^https?$/i,ls=["POST","PUT"];function fs(t){return"content-type"==t.toLowerCase()}function ps(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,ds(t),ys(t)}function ds(t){t.N||(t.N=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function vs(t){if(t.c&&void 0!==u)if(t.B[1]&&4==ms(t)&&2==bs(t))es(t.b,ws(t,"Local request error detected and ignored"));else if(t.i&&4==ms(t))yn(t.Sb,0,t);else if(t.dispatchEvent("readystatechange"),4==ms(t)){es(t.b,ws(t,"Request complete")),t.c=!1;try{var e,n,r,i,o=bs(t);t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}if((e=s)||((n=0===o)&&(!(i=String(t.l).match(In)[1]||null)&&l.self&&l.self.location&&(i=(r=l.self.location.protocol).substr(0,r.length-1)),n=!hs.test(i?i.toLowerCase():"")),e=n),e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var a=2<ms(t)?t.a.statusText:""}catch(e){es(t.b,"Can not get status: "+e.message),a=""}t.h=a+" ["+bs(t)+"]",ds(t)}}finally{ys(t)}}}function ys(t,e){if(t.a){gs(t);var n=t.a,r=t.B[0]?a:null;t.a=null,t.B=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(zo,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function gs(t){t.a&&t.w&&(t.a.ontimeout=null),t.s&&(l.clearTimeout(t.s),t.s=null)}function ms(t){return t.a?t.a.readyState:0}function bs(t){try{return 2<ms(t)?t.a.status:-1}catch(t){return-1}}function ws(t,e){return e+" ["+t.P+" "+t.l+" "+bs(t)+"]"}function _s(t){var e=Rs;this.g=[],this.w=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.u=this.B=this.i=!1,this.h=0,this.b=null,this.l=0}function Es(t,e,n){t.a=!0,t.c=n,t.f=!e,Cs(t)}function Is(t){if(t.a){if(!t.u)throw new Ns;t.u=!1}}function Ts(t,e,n,r){t.g.push([e,n,r]),t.a&&Cs(t)}function Ss(t){return q(t.g,function(t){return d(t[1])})}function Cs(t){var e,n;t.h&&t.a&&Ss(t)&&(e=t.h,(n=Os[e])&&(l.clearTimeout(n.a),delete Os[e]),t.h=0),t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=(s=t.g.shift())[0],o=s[1],s=s[2];if(i=t.f?o:i)try{var a=i.call(s||t.s,e);void 0!==a&&(t.f=t.f&&(a==e||a instanceof Error),t.c=e=a),(A(e)||"function"==typeof l.Promise&&e instanceof l.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,Ss(t)||(n=!0)}}t.c=e,r&&(a=m(t.m,t,!0),r=m(t.m,t,!1),e instanceof _s?(Ts(e,a,r),e.B=!0):e.then(a,r)),n&&(e=new ks(e),Os[e.a]=e,t.h=e.a)}function Ns(){k.call(this)}function As(){k.call(this)}function ks(t){this.a=l.setTimeout(m(this.c,this),0),this.b=t}(t=us.prototype).Ka=function(){void 0!==u&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",es(this.b,ws(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(es(this.b,ws(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ys(this))},t.Ba=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),ys(this,!0)),us.Za.Ba.call(this)},t.Sb=function(){this.wa||(this.O||this.i||this.f?vs(this):this.Hc())},t.Hc=function(){vs(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case cs:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(zo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return es(this.b,"Can not get response: "+t.message),null}},_s.prototype.cancel=function(t){var e;this.a?this.c instanceof _s&&this.c.cancel():(this.b&&(e=this.b,delete this.b,t?e.cancel(t):(e.l--,e.l<=0&&e.cancel())),this.w?this.w.call(this.s,this):this.u=!0,this.a||(t=new As,Is(this),Es(this,!1,t)))},_s.prototype.m=function(t,e){this.i=!1,Es(this,t,e)},_s.prototype.then=function(t,e,n){var r,i,o=new pe(function(t,e){r=t,i=e});return Ts(this,r,function(t){t instanceof As?o.cancel():i(t)}),o.then(t,e,n)},_s.prototype.$goog_Thenable=!0,e(Ns,k),Ns.prototype.message="Deferred has already fired",Ns.prototype.name="AlreadyCalledError",e(As,k),As.prototype.message="Deferred was canceled",As.prototype.name="CanceledError",ks.prototype.c=function(){throw delete Os[this.a],this.b};var Os={};function Ps(t){var e,n,r,i,o=document,s=bt(t).toString(),a=se(document,"SCRIPT"),u={Tb:a,Ka:void 0},c=new _s(u),h=window.setTimeout(function(){Ds(a,!0);var t=new Ms(Ls,"Timeout reached for loading script "+s);Is(c),Es(c,!1,t)},5e3);return u.Ka=h,a.onload=a.onreadystatechange=function(){a.readyState&&"loaded"!=a.readyState&&"complete"!=a.readyState||(Ds(a,!1,h),Is(c),Es(c,!0,null))},a.onerror=function(){Ds(a,!0,h);var t=new Ms(xs,"Error while loading script "+s);Is(c),Es(c,!1,t)},lt(u={},{type:"text/javascript",charset:"UTF-8"}),ne(a,u),n=t,ft(e=a,"HTMLScriptElement"),e.src=bt(n),null===p&&(p=(n=(n=l.document).querySelector&&n.querySelector("script[nonce]"))&&(n=n.nonce||n.getAttribute("nonce"))&&f.test(n)?n:""),(n=p)&&e.setAttribute("nonce",n),((i=((r=o)||document).getElementsByTagName("HEAD"))&&0!=i.length?i[0]:r.documentElement).appendChild(a),c}function Rs(){var t;this&&this.Tb&&((t=this.Tb)&&"SCRIPT"==t.tagName&&Ds(t,!0,this.Ka))}function Ds(t,e,n){null!=n&&l.clearTimeout(n),t.onload=a,t.onerror=a,t.onreadystatechange=a,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var xs=0,Ls=1;function Ms(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),k.call(this,n),this.code=t}function Fs(t){this.f=t}function Us(t,e,n){if(this.c=t,t=e||{},this.u=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||qs,this.g=ct(t.secureTokenHeaders||Bs),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.l=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.i=t.firebaseTimeout||Ws,this.a=ct(t.firebaseHeaders||Hs),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==lr(),!(n=l.XMLHttpRequest||n&&Fl.INTERNAL.node&&Fl.INTERNAL.node.XMLHttpRequest)&&!hr())throw new _("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,hr()?this.f=new ns(self):fr()?this.f=new Fs(n):this.f=new qo,this.b=null}e(Ms,k),e(Fs,Fo),Fs.prototype.a=function(){return new this.f},Fs.prototype.b=function(){return{}};var js,Vs="idToken",qs=new Pr(3e4,6e4),Bs={"Content-Type":"application/x-www-form-urlencoded"},Ws=new Pr(3e4,6e4),Hs={"Content-Type":"application/json"};function Ks(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Gs(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function zs(t,e,n,r,i,o,s){var a;(t=!((a=vr(a=mr())==dr&&(a=a.match(/\sChrome\/(\d+)/i))&&2==a.length?parseInt(a[1],10):null)&&a<30||Bt&&Jt&&!(9<Jt))||hr()?m(t.w,t):(js=js||new pe(function(t,e){var n,r;n=t,r=e,((window.gapi||{}).client||{}).request?n():(l[Xs]=function(){((window.gapi||{}).client||{}).request?n():r(Error("CORS_UNSUPPORTED"))},Ts(Ps(wt(Qs,{onload:Xs})),null,function(){r(Error("CORS_UNSUPPORTED"))},void 0))}),m(t.s,t)))(e,n,r,i,o,s)}Us.prototype.S=function(){return this.b},Us.prototype.w=function(t,n,e,r,i,o){if(hr()&&(void 0===l.fetch||void 0===l.Headers||void 0===l.Request))throw new _("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s,a=new us(this.f);o&&(a.g=Math.max(0,o),s=setTimeout(function(){a.dispatchEvent("timeout")},o)),pn(a,"complete",function(){s&&clearTimeout(s);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return es(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){e=null}n&&n(e)}),dn(a,"ready",function(){s&&clearTimeout(s),Me(this)}),dn(a,"timeout",function(){s&&clearTimeout(s),Me(this),n&&n(null)}),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.N=!1,t.c=!0,t.a=t.D?t.D.a():Ro.a(),t.B=t.D?Uo(t.D):Uo(Ro),t.a.onreadystatechange=m(t.Sb,t);try{es(t.b,ws(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(e){return es(t.b,ws(t,"Error opening Xhr: "+e.message)),ps(t,e)}e=r||"";var o,s=new wn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(h(t)||"string"==typeof t)U(t,e,void 0);else for(var n=bn(t),r=mn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){s.set(e,t)}),i=function(t){t:{for(var e=fs,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(s.X()),r=l.FormData&&e instanceof l.FormData,!B(ls,n)||i||r||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.R&&(t.a.withCredentials=t.R);try{gs(t),0<t.g&&(t.w=(o=t.a,Bt&&Zt(9)&&"number"==typeof o.timeout&&void 0!==o.ontimeout),es(t.b,ws(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.w)),t.w?(t.a.timeout=t.g,t.a.ontimeout=m(t.Ka,t)):t.s=yn(t.Ka,t.g,t)),es(t.b,ws(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){es(t.b,ws(t,"Send error: "+e.message)),ps(t,e)}}(a,t,e,r,i)};var Qs=new pt(yt,"https://apis.google.com/js/client.js?onload=%{onload}"),Xs="__fcb"+Math.floor(1e6*Math.random()).toString();function Ys(t){if("string"!=typeof(t=t.email)||!sr.test(t))throw new _("invalid-email")}function Js(t){"email"in t&&Ys(t)}function $s(t){if(!t[Vs]){if(t.mfaPendingCredential)throw new _("multi-factor-auth-required",null,ct(t));throw new _("internal-error")}}function Zs(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new _("internal-error")}else{if(!t.sessionInfo)throw new _("missing-verification-id");if(!t.code)throw new _("missing-verification-code")}}Us.prototype.s=function(t,n,r,i,o){var s=this;js.then(function(){window.gapi.client.setApiKey(s.c);var e=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:r,body:i,headers:o,authType:"none",callback:function(t){window.gapi.auth.setToken(e),n&&n(t)}})}).o(function(t){n&&n({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},Us.prototype.vb=function(){return Ba(this,Oa,{})},Us.prototype.xb=function(t,e){return Ba(this,Aa,{idToken:t,email:e})},Us.prototype.yb=function(t,e){return Ba(this,ka,{idToken:t,password:e})};var ta={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ea(t){if(!t.phoneVerificationInfo)throw new _("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new _("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new _("missing-verification-code")}function na(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new _("internal-error")}function ra(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&Hn(t=new Vn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function ia(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Mo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Mo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Mo(t)):t.errorMessage&&(e=Wa(t.errorMessage)),e)throw e;$s(t)}function oa(t,e){return e.returnIdpCredential=!0,Ba(t,Da,e)}function sa(t,e){return e.returnIdpCredential=!0,Ba(t,La,e)}function aa(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Ba(t,xa,e)}function ua(t){if(!t.oobCode)throw new _("invalid-action-code")}(t=Us.prototype).zb=function(t,r){var i={idToken:t},o=[];return at(ta,function(t,e){var n=r[e];null===n?o.push(t):e in r&&(i[e]=n)}),o.length&&(i.deleteAttribute=o),Ba(this,Aa,i)},t.rb=function(t,e){return lt(t={requestType:"PASSWORD_RESET",email:t},e),Ba(this,Ia,t)},t.sb=function(t,e){return lt(t={requestType:"EMAIL_SIGNIN",email:t},e),Ba(this,wa,t)},t.qb=function(t,e){return lt(t={requestType:"VERIFY_EMAIL",idToken:t},e),Ba(this,_a,t)},t.Ab=function(t,e,n){return lt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),Ba(this,Ea,t)},t.cb=function(t){return Ba(this,Ua,t)},t.jb=function(t,e){return Ba(this,Ca,{oobCode:t,newPassword:e})},t.Pa=function(t){return Ba(this,ha,{oobCode:t})},t.fb=function(t){return Ba(this,ca,{oobCode:t})};var ca={endpoint:"setAccountInfo",A:ua,Y:"email",C:!0},ha={endpoint:"resetPassword",A:ua,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new _("internal-error")},C:!0},la={endpoint:"signupNewUser",A:function(t){if(Ys(t),!t.password)throw new _("weak-password")},G:$s,U:!0,C:!0},fa={endpoint:"createAuthUri",C:!0},pa={endpoint:"deleteAccount",M:["idToken"]},da={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],A:function(t){if("array"!=n(t.deleteProvider))throw new _("internal-error")}},va={endpoint:"emailLinkSignin",M:["email","oobCode"],A:Ys,G:$s,U:!0,C:!0},ya={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],A:Ys,G:$s,U:!0},ga={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],A:ea,G:$s,C:!0,La:!0},ma={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],A:ea,G:$s,C:!0,La:!0},ba={endpoint:"getAccountInfo"},wa={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new _("internal-error");Ys(t)},Y:"email",C:!0},_a={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new _("internal-error")},Y:"email",C:!0},Ea={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new _("internal-error")},Y:"email",C:!0},Ia={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new _("internal-error");Ys(t)},Y:"email",C:!0},Ta={hb:!0,endpoint:"getProjectConfig",Rb:"GET"},Sa={hb:!0,endpoint:"getRecaptchaParam",Rb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new _("internal-error")}},Ca={endpoint:"resetPassword",A:ua,Y:"email",C:!0},Na={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Y:"sessionInfo",C:!0},Aa={endpoint:"setAccountInfo",M:["idToken"],A:Js,U:!0},ka={endpoint:"setAccountInfo",M:["idToken"],A:function(t){if(Js(t),!t.password)throw new _("weak-password")},G:$s,U:!0},Oa={endpoint:"signupNewUser",G:$s,U:!0,C:!0},Pa={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new _("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new _("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new _("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new _("internal-error")},C:!0,La:!0},Ra={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new _("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new _("internal-error")},C:!0,La:!0},Da={endpoint:"verifyAssertion",A:na,Wa:ra,G:ia,U:!0,C:!0},xa={endpoint:"verifyAssertion",A:na,Wa:ra,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new _("user-not-found");if(t.errorMessage)throw Wa(t.errorMessage);$s(t)},U:!0,C:!0},La={endpoint:"verifyAssertion",A:function(t){if(na(t),!t.idToken)throw new _("internal-error")},Wa:ra,G:ia,U:!0},Ma={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new _("invalid-custom-token")},G:$s,U:!0,C:!0},Fa={endpoint:"verifyPassword",A:function(t){if(Ys(t),!t.password)throw new _("wrong-password")},G:$s,U:!0,C:!0},Ua={endpoint:"verifyPhoneNumber",A:Zs,G:$s,C:!0},ja={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new _("internal-error");Zs(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Mo(t);$s(t)}},Va={Eb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:Zs,G:$s,C:!0},qa={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Vs]^!!t.refreshToken)throw new _("internal-error")},C:!0,La:!0};function Ba(t,e,n){if(!function(t,e){if(!e||!e.length)return 1;if(t){for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return}return 1}}(n,e.M))return _e(new _("internal-error"));var r,i=!!e.La,o=e.Rb||"POST";return we(n).then(e.A).then(function(){return e.U&&(n.returnSecureToken=!0),e.C&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,s){var a=On(e+n);An(a,"key",t.c),s&&An(a,"cb",w().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&An(a,c,i[c]);return new pe(function(e,n){zs(t,a.toString(),function(t){t?t.error?n(Ha(t,o||{})):e(t):n(new _("network-request-failed"))},r,u?void 0:Qn(Cr(i)),t.a,t.i.get())})}(t,i?t.l:t.h,e.endpoint,o,n,e.Eb,e.hb||!1)}).then(function(t){return r=t,e.Wa?e.Wa(n,r):r}).then(e.G).then(function(){if(!e.Y)return r;if(!(e.Y in r))throw new _("internal-error");return r[e.Y]})}function Wa(t){return Ha({error:{errors:[{message:t}],code:400,message:t}})}function Ha(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new _(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",lt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new _(r[i],e);return!e&&t&&(e=Sr(t)),new _("internal-error",e)}function Ka(t){var o;this.b=t,this.a=null,this.nb=(o=this,(Xa=Xa||new pe(function(t,e){function n(){Or(),br("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Or(),e(Error("Network Error"))},timeout:za.get()})}var r;br("gapi.iframes.Iframe")?t():br("gapi.load")?n():(r="__iframefcb"+Math.floor(1e6*Math.random()).toString(),l[r]=function(){br("gapi.load")?n():e(Error("Network Error"))},we(Ps(r=wt(Ga,{onload:r}))).o(function(){e(Error("Network Error"))}))}).o(function(t){throw Xa=null,t})).then(function(){return new pe(function(r,i){br("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:br("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(t){function e(){clearTimeout(n),r()}o.a=t,o.a.restyle({setHideOnLeave:!1});var n=setTimeout(function(){i(Error("Network Error"))},Qa.get());t.ping(e).then(e,function(){i(Error("Network Error"))})})})}))}var Ga=new pt(yt,"https://apis.google.com/js/api.js?onload=%{onload}"),za=new Pr(3e4,6e4),Qa=new Pr(5e3,15e3),Xa=null;function Ya(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=Pn(this.i,"/__/auth/iframe"),An(this.a,"apiKey",this.g),An(this.a,"appName",this.h),this.b=null,this.c=[]}function Ja(t,e,n,r,i){this.s=t,this.m=e,this.c=n,this.u=r,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function $a(t){try{return Fl.app(t).auth().Ea()}catch(t){return[]}}function Za(t,e,n,r,i){this.u=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.m=this.s=this.w=null,this.g=[],this.l=this.a=null}function tu(t){var a=tr();return Ba(t,Ta,{}).then(function(t){return t.authorizedDomains||[]}).then(function(t){t:{for(var e=(n=On(a)).f,n=n.b,r=0;r<t.length;r++){var i=t[r],o=n,s=e;if(o=0==i.indexOf("chrome-extension://")?On(i).b==o&&"chrome-extension"==s:("http"==s||"https"==s)&&(or.test(i)?o==i:(i=i.split(".").join("\\."),new RegExp("^(.+\\."+i+"|"+i+")$","i").test(o)))){t=!0;break t}}t=!1}if(!t)throw new xo(tr())})}function eu(i){return i.l||(i.l=ar().then(function(){var t,e,n,r;i.s||(t=i.c,e=i.h,n=$a(i.b),(r=new Ya(i.u,i.f,i.b)).f=t,r.b=e,r.c=G(n||[]),i.s=r.toString()),i.i=new Ka(i.s),function(r){if(!r.i)throw Error("IfcHandler must be initialized!");var t,e;t=r.i,e=function(t){var e={};if(t&&t.authEvent){var n=!1;for(t=Oo(t.authEvent),e=0;e<r.g.length;e++)n=r.g[e](t)||n;return(e={}).status=n?"ACK":"ERROR",we(e)}return e.status="ERROR",we(e)},t.nb.then(function(){t.a.register("authEvent",e,br("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(i)})),i.l}function nu(t){return t.m||(t.w=t.c?gr(t.c,$a(t.b)):null,t.m=new Us(t.f,N(t.h),t.w)),t.m}function ru(t,e,n,r,i,o,s,a,u,c,h){return(t=new Ja(t,e,n,r,i)).l=o,t.g=s,t.i=a,t.b=ct(u||null),t.f=c,t.ub(h).toString()}function iu(t){if(this.a=t||Fl.INTERNAL.reactNative&&Fl.INTERNAL.reactNative.AsyncStorage,!this.a)throw new _("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function ou(t){this.b=t,this.a={},this.f=m(this.c,this)}Ya.prototype.toString=function(){return this.f?An(this.a,"v",this.f):Wn(this.a.a,"v"),this.b?An(this.a,"eid",this.b):Wn(this.a.a,"eid"),this.c.length?An(this.a,"fw",this.c.join(",")):Wn(this.a.a,"fw"),this.a.toString()},Ja.prototype.ub=function(t){return this.h=t,this},Ja.prototype.toString=function(){var t=Pn(this.s,"/__/auth/handler");if(An(t,"apiKey",this.m),An(t,"appName",this.c),An(t,"authType",this.u),this.a.isOAuthProvider){var e=this.a;try{var n=Fl.app(this.c).auth().ja()}catch(t){n=null}for(var r in e.kb=n,An(t,"providerId",this.a.providerId),n=Cr((e=this.a).Fb))n[r]=n[r].toString();r=e.Oc,n=ct(n);for(var i=0;i<r.length;i++){var o=r[i];o in n&&delete n[o]}e.lb&&e.kb&&!n[e.lb]&&(n[e.lb]=e.kb),ut(n)||An(t,"customParameters",Sr(n))}if("function"==typeof this.a.Nb&&(e=this.a.Nb()).length&&An(t,"scopes",e.join(",")),this.l?An(t,"redirectUrl",this.l):Wn(t.a,"redirectUrl"),this.g?An(t,"eventId",this.g):Wn(t.a,"eventId"),this.i?An(t,"v",this.i):Wn(t.a,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!kn(t,s)&&An(t,s,this.b[s]);return this.h?An(t,"tid",this.h):Wn(t.a,"tid"),this.f?An(t,"eid",this.f):Wn(t.a,"eid"),(s=$a(this.c)).length&&An(t,"fw",s.join(",")),t.toString()},(t=Za.prototype).Lb=function(e,n,t){var r=new _("popup-closed-by-user"),i=new _("web-storage-unsupported"),o=this,s=!1;return this.ka().then(function(){var t,r={type:"webStorageSupport"};eu(t=o).then(function(){return e=t.i,n=r,e.nb.then(function(){return new pe(function(t){e.a.send(n.type,n,t,br("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})});var e,n}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}).then(function(t){t||(e&&rr(e),n(i),s=!0)})}).o(function(){}).then(function(){if(!s)return n=e,new pe(function(e){return function t(){gn(2e3).then(function(){if(n&&!n.closed)return t();e()})}()});var n}).then(function(){if(!s)return gn(t).then(function(){n(r)})})},t.Ub=function(){var t=mr();return!Tr(t)&&!kr(t)},t.Qb=function(){return!1},t.Jb=function(e,t,n,r,i,o,s,a){if(!e)return _e(new _("popup-blocked"));if(s&&!Tr())return this.ka().o(function(t){rr(e),i(t)}),r(),we();this.a||(this.a=tu(nu(this)));var u=this;return this.a.then(function(){var t=u.ka().o(function(t){throw rr(e),i(t),t});return r(),t}).then(function(){Ao(n),s||er(ru(u.u,u.f,u.b,t,n,null,o,u.c,void 0,u.h,a),e)}).o(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},t.Kb=function(t,e,n,r){this.a||(this.a=tu(nu(this)));var i=this;return this.a.then(function(){Ao(e),er(ru(i.u,i.f,i.b,t,e,tr(),n,i.c,void 0,i.h,r))}).o(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.ka=function(){var t=this;return eu(this).then(function(){return t.i.nb}).o(function(){throw t.a=null,new _("network-request-failed")})},t.Xb=function(){return!0},t.Ca=function(t){this.g.push(t)},t.Qa=function(e){H(this.g,function(t){return t==e})},(t=iu.prototype).get=function(t){return we(this.a.getItem(t)).then(function(t){return t&&Nr(t)})},t.set=function(t,e){return we(this.a.setItem(t,Sr(e)))},t.T=function(t){return we(this.a.removeItem(t))},t.ba=function(){},t.ha=function(){};var su,au=[];function uu(t,e,n){ut(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function cu(t){this.a=t}function hu(t){this.c=t,this.b=!1,this.a=[]}function lu(r,t,e,n){var i,o,s,a,u=e||{},c=null;if(r.b)return _e(Error("connection_unavailable"));var h=n?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new pe(function(e,n){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),s=setTimeout(function(){n(Error("unsupported_event"))},h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout(function(){n(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?e(t.data.response):n(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),n(Error("invalid_response"))))}},r.a.push(c),l.port1.addEventListener("message",o),r.c.postMessage({eventType:t,eventId:i,data:u},[l.port2])):n(Error("connection_unavailable"))}).then(function(t){return fu(r,c),t}).o(function(t){throw fu(r,c),t})}function fu(t,e){var n,r;e&&(n=e.messageChannel,r=e.onMessage,n&&(n.port1.removeEventListener("message",r),n.port1.close()),H(t.a,function(t){return t==e}))}function pu(){if(!vu())throw new _("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=l.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.s=!1,this.h=null;var t,e,n,r=this;hr()&&self?(this.l=(n=hr()?self:null,U(au,function(t){t.b==n&&(e=t)}),e||(e=new ou(n),au.push(e)),e),uu(this.l,"keyChanged",function(t,n){return wu(r).then(function(e){return 0<e.length&&U(r.a,function(t){t(e)}),{keyProcessed:B(e,n.key)}})}),uu(this.l,"ping",function(){return we(["keyChanged"])})):((t=l.navigator)&&t.serviceWorker?we().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).o(function(){return null}):we(null)).then(function(t){(r.h=t)&&(r.g=new hu(new cu(t)),lu(r.g,"ping",null,!0).then(function(t){t[0].fulfilled&&B(t[0].value,"keyChanged")&&(r.s=!0)}).o(function(){}))})}function du(t){return t.m||(t.m=function i(o){return new pe(function(e,n){var t=o.u.open("firebaseLocalStorageDb",1);t.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},t.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},t.onsuccess=function(t){var r;(t=t.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(t):(r=o,new pe(function(t,e){var n=r.u.deleteDatabase("firebaseLocalStorageDb");n.onsuccess=function(){t()},n.onerror=function(t){e(Error(t.target.error))}}).then(function(){return i(o)}).then(function(t){e(t)}).o(function(t){n(t)}))}})}(t)),t.m}function vu(){try{return l.indexedDB}catch(t){return}}function yu(t){return t.objectStore("firebaseLocalStorage")}function gu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function mu(t){return new pe(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function bu(t,e){return t.g&&t.h&&((n=l.navigator)&&n.serviceWorker&&n.serviceWorker.controller||null)===t.h?lu(t.g,"keyChanged",{key:e},t.s).then(function(){}).o(function(){}):we();var n}function wu(r){return du(r).then(function(t){var i=yu(gu(t,!1));return i.getAll?mu(i.getAll()):new pe(function(e,n){var r=[],t=i.openCursor();t.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},t.onerror=function(t){n(t.target.error)}})}).then(function(t){var e={},n=[];if(0==r.b){for(n=0;n<t.length;n++)e[t[n].fbase_key]=t[n].value;n=function t(e,n){var r,i=[];for(r in e)r in n&&typeof e[r]==typeof n[r]?"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(r.c,e),r.c=e}return n})}function _u(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Eu(t){var r=this,i=null;this.a=[],this.type="indexedDB",this.c=t,this.b=we().then(function(){if(vu()){var e=Ar(),n="__sak"+e;return su=su||new pu,(i=su).set(n,e).then(function(){return i.get(n)}).then(function(t){if(t!==e)throw Error("indexedDB not supported!");return i.T(n)}).then(function(){return i}).o(function(){return r.c})}return r.c}).then(function(t){return r.type=t.type,t.ba(function(e){U(r.a,function(t){t(e)})}),t})}function Iu(){this.a={},this.type="inMemory"}function Tu(){if(!function(){var t="Node"==lr();if(t=Su()||t&&Fl.INTERNAL.node&&Fl.INTERNAL.node.localStorage)try{return t.setItem("__sak","1"),t.removeItem("__sak"),1}catch(t){return}}()){if("Node"==lr())throw new _("internal-error","The LocalStorage compatibility library was not found.");throw new _("web-storage-unsupported")}this.a=Su()||Fl.INTERNAL.node.localStorage,this.type="localStorage"}function Su(){try{var t=l.localStorage,e=Ar();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Cu(){this.type="nullStorage"}function Nu(){if(!function(){var t="Node"==lr();if(t=Au()||t&&Fl.INTERNAL.node&&Fl.INTERNAL.node.sessionStorage)try{return t.setItem("__sak","1"),t.removeItem("__sak"),1}catch(t){return}}()){if("Node"==lr())throw new _("internal-error","The SessionStorage compatibility library was not found.");throw new _("web-storage-unsupported")}this.a=Au()||Fl.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Au(){try{var t=l.sessionStorage,e=Ar();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function ku(){var t={};t.Browser=Ru,t.Node=Du,t.ReactNative=xu,t.Worker=Lu,this.a=t[lr()]}ou.prototype.c=function(n){var e,r=n.data.eventType,i=n.data.eventId,t=this.a[r];t&&0<t.length&&(n.ports[0].postMessage({status:"ack",eventId:i,eventType:r,response:null}),e=[],U(t,function(t){e.push(we().then(function(){return t(n.origin,n.data.data)}))}),Ie(e).then(function(t){var e=[];U(t,function(t){e.push({fulfilled:t.Mb,value:t.value,reason:t.reason?t.reason.message:void 0})}),U(e,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:e})}))},cu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},hu.prototype.close=function(){for(;0<this.a.length;)fu(this,this.a[0]);this.b=!0},(t=pu.prototype).set=function(n,r){var i,o=!1,s=this;return du(this).then(function(t){return mu((t=yu(gu(i=t,!0))).get(n))}).then(function(t){var e=yu(gu(i,!0));return t?(t.value=r,mu(e.put(t))):(s.b++,o=!0,(t={}).fbase_key=n,t.value=r,mu(e.add(t)))}).then(function(){return s.c[n]=r,bu(s,n)}).ma(function(){o&&s.b--})},t.get=function(e){return du(this).then(function(t){return mu(yu(gu(t,!1)).get(e))}).then(function(t){return t&&t.value})},t.T=function(e){var n=!1,r=this;return du(this).then(function(t){return n=!0,r.b++,mu(yu(gu(t,!0)).delete(e))}).then(function(){return delete r.c[e],bu(r,e)}).ma(function(){n&&r.b--})},t.ba=function(t){var n;0==this.a.length&&(_u(n=this),function e(){n.f=setTimeout(function(){n.i=wu(n).then(function(e){0<e.length&&U(n.a,function(t){t(e)})}).then(function(){e()}).o(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()),this.a.push(t)},t.ha=function(e){H(this.a,function(t){return t==e}),0==this.a.length&&_u(this)},(t=Eu.prototype).get=function(e){return this.b.then(function(t){return t.get(e)})},t.set=function(e,n){return this.b.then(function(t){return t.set(e,n)})},t.T=function(e){return this.b.then(function(t){return t.T(e)})},t.ba=function(t){this.a.push(t)},t.ha=function(e){H(this.a,function(t){return t==e})},(t=Iu.prototype).get=function(t){return we(this.a[t])},t.set=function(t,e){return this.a[t]=e,we()},t.T=function(t){return delete this.a[t],we()},t.ba=function(){},t.ha=function(){},(t=Tu.prototype).get=function(t){var e=this;return we().then(function(){return Nr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return we().then(function(){var t=Sr(n);null===t?r.T(e):r.a.setItem(e,t)})},t.T=function(t){var e=this;return we().then(function(){e.a.removeItem(t)})},t.ba=function(t){l.window&&Ze(l.window,"storage",t)},t.ha=function(t){l.window&&nn(l.window,"storage",t)},(t=Cu.prototype).get=function(){return we(null)},t.set=function(){return we()},t.T=function(){return we()},t.ba=function(){},t.ha=function(){},(t=Nu.prototype).get=function(t){var e=this;return we().then(function(){return Nr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return we().then(function(){var t=Sr(n);null===t?r.T(e):r.a.setItem(e,t)})},t.T=function(t){var e=this;return we().then(function(){e.a.removeItem(t)})},t.ba=function(){},t.ha=function(){};var Ou,Pu,Ru={F:Tu,$a:Nu},Du={F:Tu,$a:Nu},xu={F:iu,$a:Cu},Lu={F:Tu,$a:Cu},Mu={od:"local",NONE:"none",qd:"session"};function Fu(){var t=!(kr(mr())||!cr()),e=Tr(),n=wr();this.m=t,this.h=e,this.l=n,this.a={},t=Ou=Ou||new ku;try{this.g=!Zn()&&xr()||!l.indexedDB?new t.a.F:new Eu(hr()?new Iu:new t.a.F)}catch(t){this.g=new Iu,this.h=!0}try{this.i=new t.a.$a}catch(t){this.i=new Iu}this.u=new Iu,this.f=m(this.Vb,this),this.b={}}function Uu(){return Pu=Pu||new Fu}function ju(t,e){switch(e){case"session":return t.i;case"none":return t.u;default:return t.g}}function Vu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function qu(t,e,n){return n=Vu(e,n),"local"==e.F&&(t.b[n]=null),ju(t,e.F).T(n)}function Bu(t){t.c&&(clearInterval(t.c),t.c=null)}function Wu(t){this.a=t,this.b=Uu()}(t=Fu.prototype).get=function(t,e){return ju(this,t.F).get(Vu(t,e))},t.set=function(e,t,n){var r=Vu(e,n),i=this,o=ju(this,e.F);return o.set(r,t).then(function(){return o.get(r)}).then(function(t){"local"==e.F&&(i.b[r]=t)})},t.addListener=function(t,e,n){var r;t=Vu(t,e),this.l&&(this.b[t]=l.localStorage.getItem(t)),ut(this.a)&&(ju(this,"local").ba(this.f),this.h||(Zn()||!xr())&&l.indexedDB||!this.l||(Bu(r=this),r.c=setInterval(function(){for(var t in r.a){var e=l.localStorage.getItem(t),n=r.b[t];e!=n&&(r.b[t]=e,e=new Be({type:"storage",key:t,target:window,oldValue:n,newValue:e,a:!0}),r.Vb(e))}},1e3))),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=Vu(t,e),this.a[t]&&(H(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),ut(this.a)&&(ju(this,"local").ha(this.f),Bu(this))},t.Vb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=l.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.ib(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?ju(this,"local").ha(this.f):Bu(this),this.m)if(n=l.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?l.localStorage.setItem(e,r):l.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this,n=function(){void 0===t.a.a&&o.b[e]===l.localStorage.getItem(e)||(o.b[e]=l.localStorage.getItem(e),o.ib(e))};Bt&&Jt&&10==Jt&&l.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else U(t,m(this.ib,this))},t.ib=function(t){this.a[t]&&U(this.a[t],function(t){t()})};var Hu,Ku={name:"authEvent",F:"local"};function Gu(){this.a=Uu()}function zu(t,e){this.b=Qu,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=l.Int32Array?new Int32Array(64):Array(64),void 0===Hu&&(Hu=l.Int32Array?new Int32Array(ec):ec),this.reset()}e(zu,function(){this.b=-1});for(var Qu=64,Xu=Qu-1,Yu=[],Ju=0;Ju<Xu;Ju++)Yu[Ju]=0;var $u=K(128,Yu);function Zu(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;e<64;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;e<64;e++)var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0,s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&l)+(0|Hu[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0;t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function tc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(Zu(t),i=0);else{if(!h(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(Zu(t),i=0)}}t.c=i,t.g+=n}zu.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):G(this.h)};var ec=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function nc(){zu.call(this,8,rc)}e(nc,zu);var rc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function ic(t,e,n,r,i){this.u=t,this.i=e,this.l=n,this.m=r||null,this.s=i||null,this.h=e+":"+n,this.w=new Gu,this.g=new Wu(this.h),this.f=null,this.b=[],this.a=this.c=null}function oc(t){return new _("invalid-cordova-configuration",t)}function sc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function ac(c){return c.f||(c.f=c.ka().then(function(){return new pe(function(n){function e(r){t=!0,s&&s.cancel(),uc(i).then(function(t){var e,n=o;t&&r&&r.url&&(e=null,-1!=(n=zi(r.url)).indexOf("/__/auth/callback")&&(e=(e="object"==typeof(e=Nr(kn(e=On(n),"firebaseError")||null))?E(e):null)?new ko(t.c,t.b,null,null,e,null,t.S()):new ko(t.c,t.b,n,t.f,null,null,t.S())),n=e||o),sc(i,n)})}var i,o,t,s,r,a,u;c.Ca(function t(e){return n(e),c.Qa(t),!1}),i=c,o=new ko("unknown",null,null,null,new _("no-auth-event")),t=!1,s=gn(500).then(function(){return uc(i).then(function(){t||sc(i,o)})}),r=l.handleOpenURL,l.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(br("BuildInfo.packageName",l).toLowerCase()+"://")&&e({url:t}),"function"==typeof r)try{r(t)}catch(t){console.error(t)}},Do=Do||new Po,a=e,(u=Do).a.push(a),u.b||(u.b=function(t){for(var e=0;e<u.a.length;e++)u.a[e](t)},"function"==typeof(a=br("universalLinks.subscribe",l))&&a(null,u.b))})})),c.f}function uc(e){var t,n=null;return(t=e.g).b.get(Ku,t.a).then(Oo).then(function(t){return n=t,qu((t=e.g).b,Ku,t.a)}).then(function(){return n})}function cc(t){this.a=t,this.b=Uu()}(t=ic.prototype).ka=function(){return this.Ga?this.Ga:this.Ga=(ur(void 0)?ar().then(function(){return new pe(function(t,e){var n=l.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):_e(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof br("universalLinks.subscribe",l))throw oc("cordova-universal-links-plugin-fix is not installed");if(void 0===br("BuildInfo.packageName",l))throw oc("cordova-plugin-buildinfo is not installed");if("function"!=typeof br("cordova.plugins.browsertab.openUrl",l))throw oc("cordova-plugin-browsertab is not installed");if("function"!=typeof br("cordova.InAppBrowser.open",l))throw oc("cordova-plugin-inappbrowser is not installed")},function(){throw new _("cordova-not-ready")})},t.Lb=function(t,e){return e(new _("operation-not-supported-in-this-environment")),we()},t.Jb=function(){return _e(new _("operation-not-supported-in-this-environment"))},t.Xb=function(){return!1},t.Ub=function(){return!0},t.Qb=function(){return!0},t.Kb=function(t,e,n,r){if(this.c)return _e(new _("redirect-operation-pending"));var i=this,o=l.document,s=null,a=null,u=null,c=null;return this.c=we().then(function(){return Ao(e),ac(i)}).then(function(){return function(n,t,e,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new ko(t,r,null,o,new _("no-auth-event"),null,i),a=br("BuildInfo.packageName",l);if("string"!=typeof a)throw new _("invalid-cordova-configuration");var u=br("BuildInfo.displayName",l),c={};if(mr().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=a;else{if(!mr().toLowerCase().match(/android/))return _e(new _("operation-not-supported-in-this-environment"));c.apn=a}u&&(c.appDisplayName=u),o=function(t){var e=new nc;tc(e,t),t=[];var n=8*e.g;e.c<56?tc(e,$u,56-e.c):tc(e,$u,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(Zu(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return V(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(o),c.sessionId=o;var h=ru(n.u,n.i,n.l,t,e,null,r,n.m,c,n.s,i);return n.ka().then(function(){var t=n.h;return n.w.a.set(Ku,s.v(),t)}).then(function(){var t=br("cordova.plugins.browsertab.isAvailable",l);if("function"!=typeof t)throw new _("invalid-cordova-configuration");var e=null;t(function(t){if(t){if("function"!=typeof(e=br("cordova.plugins.browsertab.openUrl",l)))throw new _("invalid-cordova-configuration");e(h)}else{if("function"!=typeof(e=br("cordova.InAppBrowser.open",l)))throw new _("invalid-cordova-configuration");t=mr(),n.a=e(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new pe(function(e,t){a=function(){var t=br("cordova.plugins.browsertab.close",l);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ca(a),u=function(){s=s||gn(2e3).then(function(){t(new _("redirect-cancelled-by-user"))})},c=function(){Rr()&&u()},o.addEventListener("resume",u,!1),mr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)}).o(function(t){return uc(i).then(function(){throw t})})}).ma(function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),s&&s.cancel(),a&&i.Qa(a),i.c=null})},t.Ca=function(e){this.b.push(e),ac(this).o(function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new ko("unknown",null,null,null,new _("no-auth-event")),e(t))})},t.Qa=function(e){H(this.b,function(t){return t==e})};var hc={name:"pendingRedirect",F:"session"};function lc(t){return qu(t.b,hc,t.a)}function fc(t,e,n){this.i={},this.w=0,this.D=t,this.u=e,this.m=n,this.h=[],this.f=!1,this.l=m(this.s,this),this.b=new Cc,this.B=new Pc,this.g=new cc(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.B,this.c.linkViaPopup=this.B,this.c.reauthViaPopup=this.B,this.a=pc(this.D,this.u,this.m,I)}function pc(t,e,n,r){var i=Fl.SDK_VERSION||null;return new(ur()?ic:Za)(t,e,n,i,r)}function dc(e){e.f||(e.f=!0,e.a.Ca(e.l));var n=e.a;return e.a.ka().o(function(t){throw e.a==n&&e.reset(),t})}function vc(n){n.a.Ub()&&dc(n).o(function(t){var e=new ko("unknown",null,null,null,new _("operation-not-supported-in-this-environment"));_c(t)&&n.s(e)}),n.a.Qb()||Nc(n.b)}function yc(n,t){var e;B(n.h,t)||n.h.push(t),n.f||(e=n.g).b.get(hc,e.a).then(function(t){return"pending"==t}).then(function(t){t?lc(n.g).then(function(){dc(n).o(function(t){var e=new ko("unknown",null,null,null,new _("operation-not-supported-in-this-environment"));_c(t)&&n.s(e)})}):vc(n)}).o(function(){vc(n)})}function gc(t,e){H(t.h,function(t){return t==e})}fc.prototype.reset=function(){this.f=!1,this.a.Qa(this.l),this.a=pc(this.D,this.u,this.m),this.i={}},fc.prototype.s=function(t){if(!t)throw new _("invalid-auth-event");if(6e5<=w()-this.w&&(this.i={},this.w=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Cb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.w=w())),e=!0;break}}return Nc(this.b),e};var mc=new Pr(2e3,1e4),bc=new Pr(3e4,6e4);function wc(t,e,n,r,i,o,s){return t.a.Jb(e,n,r,function(){t.f||(t.f=!0,t.a.Ca(t.l))},function(){t.reset()},i,o,s)}function _c(t){return t&&"auth/cordova-not-ready"==t.code}function Ec(e,t,n,r,i){var o,s;return(s=e.g).b.set(hc,"pending",s.a).then(function(){return e.a.Kb(t,n,r,i).o(function(t){if(_c(t))throw new _("operation-not-supported-in-this-environment");return o=t,lc(e.g).then(function(){throw o})}).then(function(){return e.a.Xb()?new pe(function(){}):lc(e.g).then(function(){return e.pa()}).then(function(){}).o(function(){})})})}function Ic(t,e,n,r,i){return t.a.Lb(r,function(t){e.la(n,null,t,i)},mc.get())}fc.prototype.pa=function(){return this.b.pa()};var Tc={};function Sc(t,e,n){var r=e+":"+n;return Tc[r]||(Tc[r]=new fc(t,e,n)),Tc[r]}function Cc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Nc(t){t.g||(t.g=!0,Oc(t,!1,null,null))}function Ac(t){t.g&&!t.i&&Oc(t,!1,null,null)}function kc(t,e){if(t.b=function(){return we(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Oc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return _e(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):kc(t,n):kc(t,{user:null}),t.f=[],t.c=[]}function Pc(){}function Rc(){this.Bb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.Bb},set:function(t){this.Bb=t},enumerable:!1})}function Dc(t,e){this.a=e,jr(this,"verificationId",t)}function xc(t,e,n,r){return new So(t).cb(e,n).then(function(t){return new Dc(t,r)})}function Lc(t){var e=Di(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new _("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Vr(this,{token:t,expirationTime:Dr(1e3*e.exp),authTime:Dr(1e3*e.auth_time),issuedAtTime:Dr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Mc(t,e,n){var r=e&&e[Uc];if(!r)throw new _("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=ct(e),this.g=n,this.c=new Qi(null,r),this.b=[];var i=this;U(e[Fc]||[],function(t){(t=Hr(t))&&i.b.push(t)}),jr(this,"auth",this.a),jr(this,"session",this.c),jr(this,"hints",this.b)}Cc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Cc.prototype.h=function(t,e){var n,r,i,o;t?(this.reset(),this.g=!0,n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code,this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Oc(this,!0,null,t.a),we()):e.Da(n,r)?function(e,t,n){n=n.Da(t.c,t.b);var r=t.g,i=t.f,o=t.i,s=t.S(),a=!!t.c.match(/Redirect$/);n(r,i,s,o).then(function(t){Oc(e,a,t,null)}).o(function(t){Oc(e,a,null,t)})}(this,t,e):_e(new _("invalid-auth-event")):(Oc(this,!1,null,null),we())):_e(new _("invalid-auth-event"))},Cc.prototype.pa=function(){var i=this;return new pe(function(t,e){var n,r;i.b?i.b().then(t,e):(i.f.push(t),i.c.push(e),n=i,r=new _("timeout"),n.a&&n.a.cancel(),n.a=gn(bc.get()).then(function(){n.b||(n.g=!0,Oc(n,!0,null,r))}))})},Pc.prototype.h=function(t,e){var n,r,i,o,s,a;t?(n=t.c,r=t.b,t.a?(e.la(t.c,null,t.a,t.b),we()):e.Da(n,r)?(o=e,s=(i=t).b,a=i.c,o.Da(a,s)(i.g,i.f,i.S(),i.i).then(function(t){o.la(a,t,null,s)}).o(function(t){o.la(a,null,t,s)})):_e(new _("invalid-auth-event"))):_e(new _("invalid-auth-event"))},Dc.prototype.confirm=function(t){return t=Co(this.verificationId,t),this.a(t)};var Fc="mfaInfo",Uc="mfaPendingCredential";function jc(t,e,n,r){_.call(this,"multi-factor-auth-required",r,e),this.b=new Mc(t,e,n),jr(this,"resolver",this.b)}function Vc(t,e,n){if(t&&v(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new jc(e,t.serverResponse,n,t.message)}catch(t){}return null}function qc(){}function Bc(t){jr(this,"factorId",t.ea),this.a=t}function Wc(t){if(Bc.call(this,t),this.a.ea!=So.PROVIDER_ID)throw new _("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function Hc(t,e){for(var n in qe.call(this,t),e)this[n]=e[n]}function Kc(t,e){this.a=t,this.b=[],this.c=m(this.wc,this),Ze(this.a,"userReloaded",this.c);var r=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&U(e.multiFactor.enrolledFactors,function(t){var e=null,n={};if(t){t.uid&&(n[zr]=t.uid),t.displayName&&(n[Kr]=t.displayName),t.enrollmentTime&&(n[Gr]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(n[Qr]=t.phoneNumber);try{e=new Xr(n)}catch(t){}t=e}else t=null;t&&r.push(t)}),Gc(this,r)}function Gc(t,e){t.b=e,jr(t,"enrolledFactors",e)}function zc(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Qc(t){this.c=t,this.b=this.a=null}function Xc(t){return t.b&&1e3*t.b.c||0}function Yc(t,e){var n=e.refreshToken;t.b=Ri(e[Vs]||""),t.a=n}function Jc(t,e){this.a=t||null,this.b=e||null,Vr(this,{lastSignInTime:Dr(e||null),creationTime:Dr(t||null)})}function $c(t,e,n,r,i,o){Vr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function Zc(t,e,n){var r;this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null,t=Fl.SDK_VERSION?gr(Fl.SDK_VERSION):null,this.a=new Us(this.l,N(I),t),this.b=new Qc(this.a),sh(this,e[Vs]),Yc(this.b,e),jr(this,"refreshToken",this.b.a),ch(this,n||{}),fn.call(this),this.P=!1,this.s&&_r()&&(this.i=Sc(this.s,this.l,this.m)),this.R=[],this.h=null,this.B=(r=this,new zc(function(){return r.I(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var t=Xc(r.b)-w()-3e5;return 0<t?t:0})),this.Z=m(this.Ma,this);var i=this;this.oa=null,this.za=function(t){i.va(t.g)},this.aa=null,this.W=[],this.ya=function(t){eh(i,t.c)},this.$=null,this.O=new Kc(this,n),jr(this,"multiFactor",this.O)}function th(t,e){t.aa&&nn(t.aa,"languageCodeChanged",t.za),(t.aa=e)&&Ze(e,"languageCodeChanged",t.za)}function eh(t,e){t.W=e,Gs(t.a,Fl.SDK_VERSION?gr(Fl.SDK_VERSION,t.W):null)}function nh(t,e){t.$&&nn(t.$,"frameworkChanged",t.ya),(t.$=e)&&Ze(e,"frameworkChanged",t.ya)}function rh(e){try{return Fl.app(e.m).auth()}catch(t){throw new _("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function ih(t){t.D||t.B.b||(t.B.start(),nn(t,"tokenChanged",t.Z),Ze(t,"tokenChanged",t.Z))}function oh(t){nn(t,"tokenChanged",t.Z),t.B.stop()}function sh(t,e){t.xa=e,jr(t,"_lat",e)}function ah(t){for(var e=[],n=0;n<t.R.length;n++)e.push(t.R[n](t));return Ie(e).then(function(){return t})}function uh(t){t.i&&!t.P&&(t.P=!0,yc(t.i,t))}function ch(t,e){Vr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new Jc(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function hh(){}function lh(t){return we().then(function(){if(t.D)throw new _("app-deleted")})}function fh(t){return V(t.providerData,function(t){return t.providerId})}function ph(t,e){e&&(dh(t,e.providerId),t.providerData.push(e))}function dh(t,e){H(t.providerData,function(t){return t.providerId==e})}function vh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&jr(t,e,n)}function yh(e,t){var n,r,i;e!=t&&(Vr(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?jr(e,"metadata",new Jc((i=t.metadata).a,i.b)):jr(e,"metadata",new Jc),U(t.providerData,function(t){ph(e,t)}),n=e.b,r=t.b,n.b=r.b,n.a=r.a,jr(e,"refreshToken",e.b.a),Gc(e.O,t.O.b))}function gh(r){return r.I().then(function(t){var e,n=r.isAnonymous;return Ba((e=r).a,ba,{idToken:t}).then(m(e.Ic,e)).then(function(){return n||vh(r,"isAnonymous",!1),t})})}function mh(t,e){e[Vs]&&t.xa!=e[Vs]&&(Yc(t.b,e),t.dispatchEvent(new Hc("tokenChanged")),sh(t,e[Vs]),vh(t,"refreshToken",t.b.a))}function bh(t,e){return gh(t).then(function(){if(B(fh(t),e))return ah(t).then(function(){throw new _("provider-already-linked")})})}function wh(t,e,n){return qr({user:t,credential:No(e),additionalUserInfo:e=Ui(e),operationType:n})}function _h(t,e){return mh(t,e),t.reload().then(function(){return t})}function Eh(n,r,t,e,i){if(!_r())return _e(new _("operation-not-supported-in-this-environment"));if(n.h&&!i)return _e(n.h);var o=Fi(t.providerId),s=Ar(n.uid+":::"),a=null;(!Tr()||cr())&&n.s&&t.isOAuthProvider&&(a=ru(n.s,n.l,n.m,r,t,null,s,Fl.SDK_VERSION||null,null,null,n.tenantId));var u=ir(a,o&&o.ta,o&&o.sa);return e=e().then(function(){if(Th(n),!i)return n.I().then(function(){})}).then(function(){return wc(n.i,u,r,t,s,!!a,n.tenantId)}).then(function(){return new pe(function(t,e){n.la(r,null,new _("cancelled-popup-request"),n.g||null),n.f=t,n.w=e,n.g=s,n.c=Ic(n.i,n,r,u,s)})}).then(function(t){return u&&rr(u),t?qr(t):null}).o(function(t){throw u&&rr(u),t}),Sh(n,e,i)}function Ih(e,t,n,r,i){if(!_r())return _e(new _("operation-not-supported-in-this-environment"));if(e.h&&!i)return _e(e.h);var o=null,s=Ar(e.uid+":::");return r=r().then(function(){if(Th(e),!i)return e.I().then(function(){})}).then(function(){return e.fa=s,ah(e)}).then(function(t){return e.ga&&(t=(t=e.ga).b.set(Ah,e.v(),t.a)),t}).then(function(){return Ec(e.i,t,n,s,e.tenantId)}).o(function(t){if(o=t,e.ga)return kh(e.ga);throw o}).then(function(){if(o)throw o}),Sh(e,r,i)}function Th(t){if(!t.i||!t.P){if(t.i&&!t.P)throw new _("internal-error");throw new _("auth-domain-config-required")}}function Sh(n,t,e){var r,i,o=(i=t,(r=n).h&&!e?(i.cancel(),_e(r.h)):i.o(function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(r.h||r.dispatchEvent(new Hc("userInvalidated")),r.h=t),t}));return n.N.push(o),o.ma(function(){W(n.N,o)}),o.o(function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=Vc(t.v(),rh(n),m(n.hc,n))),e||t})}function Ch(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Vs]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=new Zc(e,n,t);return t.providerData&&U(t.providerData,function(t){t&&ph(r,qr(t))}),t.redirectEventId&&(r.fa=t.redirectEventId),r}function Nh(t){this.a=t,this.b=Uu()}Mc.prototype.Pc=function(t){var n=this;return t.ob(this.a.b,this.c).then(function(t){var e=ct(n.f);return delete e[Fc],delete e[Uc],lt(e,t),n.g(e)})},e(jc,_),qc.prototype.ob=function(t,e,n){return e.type==Xi?(o=this,s=t,a=n,e.Fa().then(function(t){return t={idToken:t},void 0!==a&&(t.displayName=a),lt(t,{phoneVerificationInfo:To(o.a)}),Ba(s,ga,t)})):(r=this,i=t,e.Fa().then(function(t){return lt(t={mfaPendingCredential:t},{phoneVerificationInfo:To(r.a)}),Ba(i,ma,t)}));var r,i,o,s,a},e(Bc,qc),e(Wc,Bc),e(Hc,qe),(t=Kc.prototype).wc=function(t){var e,n;Gc(this,(e=t.ed,n=[],U(e.mfaInfo||[],function(t){(t=Hr(t))&&n.push(t)}),n))},t.Ob=function(){return this.a.I().then(function(t){return new Qi(t,null)})},t.dc=function(e,n){var r=this,i=this.a.a;return this.Ob().then(function(t){return e.ob(i,t,n)}).then(function(t){return mh(r.a,t),r.a.reload()})},t.$c=function(t){var n=this,r="string"==typeof t?t:t.uid,e=this.a.a;return this.a.I().then(function(t){return Ba(e,qa,{idToken:t,mfaEnrollmentId:r})}).then(function(t){var e=j(n.b,function(t){return t.uid!=r});return Gc(n,e),mh(n.a,t),n.a.reload().o(function(t){if("auth/user-token-expired"!=t.code)throw t})})},t.v=function(){return{multiFactor:{enrolledFactors:V(this.b,function(t){return t.v()})}}},zc.prototype.start=function(){this.a=this.c,function e(n,t){var r,i;n.stop(),n.b=gn((r=n,(i=t)?(r.a=r.c,r.g()):(i=r.a,r.a*=2,r.a>r.f&&(r.a=r.f),i))).then(function(){return e=l.document,n=null,Rr()||!e?we():new pe(function(t){n=function(){Rr()&&(e.removeEventListener("visibilitychange",n,!1),t())},e.addEventListener("visibilitychange",n,!1)}).o(function(t){throw e.removeEventListener("visibilitychange",n,!1),t});var e,n}).then(function(){return n.h()}).then(function(){e(n,!0)}).o(function(t){n.i(t)&&e(n,!1)})}(this,!0)},zc.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Qc.prototype.v=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:Xc(this)}},Qc.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?_e(new _("user-token-expired")):t||!this.b||w()>Xc(this)-3e4?this.a?(n={grant_type:"refresh_token",refresh_token:(e=this).a},r=e.c,i=n,new pe(function(e,n){"refresh_token"==i.grant_type&&i.refresh_token||"authorization_code"==i.grant_type&&i.code?zs(r,r.u+"?key="+encodeURIComponent(r.c),function(t){t?t.error?n(Ha(t)):t.access_token&&t.refresh_token?e(t):n(new _("internal-error")):n(new _("network-request-failed"))},"POST",Bn(i).toString(),r.g,r.m.get()):n(new _("internal-error"))}).then(function(t){return e.b=Ri(t.access_token),e.a=t.refresh_token,{accessToken:e.b.toString(),refreshToken:e.a}}).o(function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t})):we(null):we({accessToken:this.b.toString(),refreshToken:this.a});var e,n,r,i},Jc.prototype.v=function(){return{lastLoginAt:this.b,createdAt:this.a}},e(Zc,fn),Zc.prototype.va=function(t){this.oa=t,Ks(this.a,t)},Zc.prototype.ja=function(){return this.oa},Zc.prototype.Ea=function(){return G(this.W)},Zc.prototype.Ma=function(){this.B.b&&(this.B.stop(),this.B.start())},jr(Zc.prototype,"providerId","firebase"),(t=Zc.prototype).reload=function(){var t=this;return Sh(this,lh(this).then(function(){return gh(t).then(function(){return ah(t)}).then(hh)}))},t.mc=function(t){return this.I(t).then(function(t){return new Lc(t)})},t.I=function(t){var e=this;return Sh(this,lh(this).then(function(){return e.b.getToken(t)}).then(function(t){if(!t)throw new _("internal-error");return t.accessToken!=e.xa&&(sh(e,t.accessToken),e.dispatchEvent(new Hc("tokenChanged"))),vh(e,"refreshToken",t.refreshToken),t.accessToken}))},t.Ic=function(t){if(!(t=t.users)||!t.length)throw new _("internal-error");ch(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e,n=(e=(e=t).providerUserInfo)&&e.length?V(e,function(t){return new $c(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[],r=0;r<n.length;r++)ph(this,n[r]);vh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new Hc("userReloaded",{ed:t}))},t.Jc=function(t){return Fr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.pb(t)},t.pb=function(t){var e=this,n=null;return Sh(this,t.c(this.a,this.uid).then(function(t){return mh(e,t),n=wh(e,t,"reauthenticate"),e.h=null,e.reload()}).then(function(){return n}),!0)},t.Ac=function(t){return Fr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.mb(t)},t.mb=function(e){var n=this,r=null;return Sh(this,bh(this,e.providerId).then(function(){return n.I()}).then(function(t){return e.b(n.a,t)}).then(function(t){return r=wh(n,t,"link"),_h(n,t)}).then(function(){return r}))},t.Bc=function(t,e){var n=this;return Sh(this,bh(this,"phone").then(function(){return xc(rh(n),t,e,m(n.mb,n))}))},t.Kc=function(t,e){var n=this;return Sh(this,we().then(function(){return xc(rh(n),t,e,m(n.pb,n))}),!0)},t.xb=function(e){var n=this;return Sh(this,this.I().then(function(t){return n.a.xb(t,e)}).then(function(t){return mh(n,t),n.reload()}))},t.cd=function(e){var n=this;return Sh(this,this.I().then(function(t){return e.b(n.a,t)}).then(function(t){return mh(n,t),n.reload()}))},t.yb=function(e){var n=this;return Sh(this,this.I().then(function(t){return n.a.yb(t,e)}).then(function(t){return mh(n,t),n.reload()}))},t.zb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return lh(this);var n=this;return Sh(this,this.I().then(function(t){return n.a.zb(t,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(t){return mh(n,t),vh(n,"displayName",t.displayName||null),vh(n,"photoURL",t.photoUrl||null),U(n.providerData,function(t){"password"===t.providerId&&(jr(t,"displayName",n.displayName),jr(t,"photoURL",n.photoURL))}),ah(n)}).then(hh))},t.ad=function(e){var n=this;return Sh(this,gh(this).then(function(t){return B(fh(n),e)?Ba(n.a,da,{idToken:t,deleteProvider:[e]}).then(function(t){var e={};return U(t.providerUserInfo||[],function(t){e[t.providerId]=!0}),U(fh(n),function(t){e[t]||dh(n,t)}),e[So.PROVIDER_ID]||jr(n,"phoneNumber",null),ah(n)}):ah(n).then(function(){throw new _("no-such-provider")})}))},t.delete=function(){var e=this;return Sh(this,this.I().then(function(t){return Ba(e.a,pa,{idToken:t})}).then(function(){e.dispatchEvent(new Hc("userDeleted"))})).then(function(){for(var t=0;t<e.N.length;t++)e.N[t].cancel("app-deleted");th(e,null),nh(e,null),e.N=[],e.D=!0,oh(e),jr(e,"refreshToken",null),e.i&&gc(e.i,e)})},t.Cb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.fa||null)==e||"reauthViaRedirect"==t&&(this.fa||null)==e)},t.la=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},t.Da=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?m(this.Hb,this):"reauthViaPopup"==t&&e==(this.g||null)?m(this.Ib,this):"linkViaRedirect"==t&&(this.fa||null)==e?m(this.Hb,this):"reauthViaRedirect"==t&&(this.fa||null)==e?m(this.Ib,this):null},t.Cc=function(t){var e=this;return Eh(this,"linkViaPopup",t,function(){return bh(e,t.providerId).then(function(){return ah(e)})},!1)},t.Lc=function(t){return Eh(this,"reauthViaPopup",t,function(){return we()},!0)},t.Dc=function(t){var e=this;return Ih(this,"linkViaRedirect",t,function(){return bh(e,t.providerId)},!1)},t.Mc=function(t){return Ih(this,"reauthViaRedirect",t,function(){return we()},!0)},t.Hb=function(e,n,t,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return t=this.I().then(function(t){return sa(i.a,{requestUri:e,postBody:r,sessionId:n,idToken:t})}).then(function(t){return o=wh(i,t,"link"),_h(i,t)}).then(function(){return o}),Sh(this,t)},t.Ib=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Sh(this,we().then(function(){return $i(aa(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=wh(i,t,"reauthenticate"),mh(i,t),i.h=null,i.reload()}).then(function(){return o}),!0)},t.qb=function(e){var n=this,r=null;return Sh(this,this.I().then(function(t){return r=t,void 0===e||ut(e)?{}:ki(new bi(e))}).then(function(t){return n.a.qb(r,t)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.Ab=function(e,n){var r=this,i=null;return Sh(this,this.I().then(function(t){return i=t,void 0===n||ut(n)?{}:ki(new bi(n))}).then(function(t){return r.a.Ab(i,e,t)}).then(function(t){if(r.email!=t)return r.reload()}).then(function(){}))},t.hc=function(t){var e=null,n=this;return Sh(this,t=$i(we(t),n.uid).then(function(t){return e=wh(n,t,"reauthenticate"),mh(n,t),n.h=null,n.reload()}).then(function(){return e}),!0)},t.toJSON=function(){return this.v()},t.v=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.v(),redirectEventId:this.fa||null};return this.metadata&&lt(e,this.metadata.v()),U(this.providerData,function(t){e.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(t))}),lt(e,this.O.v()),e};var Ah={name:"redirectUser",F:"session"};function kh(t){return qu(t.b,Ah,t.a)}function Oh(t){var e,n,r,i,o,s,a,u,c;this.a=t,this.b=Uu(),this.c=null,this.f=(n=Dh("local"),r=Dh("session"),i=Dh("none"),o=(e=this).b,s=n,a=e.a,u=Vu(s,a),c=ju(o,s.F),o.get(s,a).then(function(t){var e=null;try{e=Nr(l.localStorage.getItem(u))}catch(t){}if(e&&!t)return l.localStorage.removeItem(u),o.set(s,e,a);e&&t&&"localStorage"!=c.type&&l.localStorage.removeItem(u)}).then(function(){return e.b.get(r,e.a)}).then(function(t){return t?r:e.b.get(i,e.a).then(function(t){return t?i:e.b.get(n,e.a).then(function(t){return t?n:e.b.get(Rh,e.a).then(function(t){return t?Dh(t):n})})})}).then(function(t){return e.c=t,Ph(e,t.F)}).o(function(){e.c||(e.c=n)})),this.b.addListener(Dh("local"),this.a,m(this.g,this))}function Ph(t,e){var n,a,r=[];for(n in Mu)Mu[n]!==e&&r.push(qu(t.b,Dh(Mu[n]),t.a));return r.push(qu(t.b,Rh,t.a)),a=r,new pe(function(n,e){var r=a.length,i=[];if(r)for(var t=function(t,e){r--,i[t]=e,0==r&&n(i)},o=function(t){e(t)},s=0;s<a.length;s++)Ee(a[s],b(t,s),o);else n(i)})}Oh.prototype.g=function(){var e=this,n=Dh("local");Fh(this,function(){return we().then(function(){return e.c&&"local"!=e.c.F?e.b.get(n,e.a):null}).then(function(t){if(t)return Ph(e,"local").then(function(){e.c=n})})})};var Rh={name:"persistence",F:"session"};function Dh(t){return{name:"authUser",F:t}}function xh(t,e){return Fh(t,function(){return t.b.set(t.c,e.v(),t.a)})}function Lh(t){return Fh(t,function(){return qu(t.b,t.c,t.a)})}function Mh(t,e){return Fh(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),Ch(t||{})})})}function Fh(t,e){return t.f=t.f.then(e,e),t.f}function Uh(t){if(this.l=!1,jr(this,"settings",new Rc),jr(this,"app",t),!Kh(this).options||!Kh(this).options.apiKey)throw new _("invalid-api-key");var n,e,r,i,o,s,a,u,c,h,l;t=Fl.SDK_VERSION?gr(Fl.SDK_VERSION):null,this.b=new Us(Kh(this).options&&Kh(this).options.apiKey,N(I),t),this.P=[],this.m=[],this.O=[],this.$b=Fl.INTERNAL.createSubscribe(m(this.xc,this)),this.W=void 0,this.ac=Fl.INTERNAL.createSubscribe(m(this.yc,this)),Wh(this,null),this.i=new Oh(Kh(this).options.apiKey+":"+Kh(this).name),this.B=new Nh(Kh(this).options.apiKey+":"+Kh(this).name),this.Z=Xh(this,(e=Kh(n=this).options.authDomain,c=(u=n).B,h=Kh(u).options.authDomain,l=c.b.get(Ah,c.a).then(function(t){return t&&h&&(t.authDomain=h),Ch(t||{})}).then(function(t){return(u.D=t)&&(t.ga=u.B),kh(u.B)}),r=Xh(u,l).then(function(){return Mh(n.i,e)}).then(function(e){return e?(e.ga=n.B,n.D&&(n.D.fa||null)==(e.fa||null)?e:e.reload().then(function(){return xh(n.i,e).then(function(){return e})}).o(function(t){return"auth/network-request-failed"==t.code?e:Lh(n.i)})):null}).then(function(t){Wh(n,t||null)}),Xh(n,r))),this.h=Xh(this,(i=this).Z.then(function(){return Bh(i)}).o(function(){}).then(function(){if(!i.l)return i.oa()}).o(function(){}).then(function(){var t;i.l||(i.aa=!0,(t=i.i).b.addListener(Dh("local"),t.a,i.oa))})),this.aa=!1,this.oa=m(this.Xc,this),this.Ma=m(this.ca,this),this.xa=m(this.jc,this),this.ya=m(this.uc,this),this.za=m(this.vc,this),this.a=null,s=Kh(o=this).options.authDomain,a=Kh(o).options.apiKey,s&&_r()&&(o.Zb=o.Z.then(function(){var t;if(!o.l)return o.a=Sc(s,a,Kh(o).name),yc(o.a,o),Gh(o)&&uh(Gh(o)),o.D&&(uh(o.D),(t=o.D).va(o.ja()),th(t,o),eh(t=o.D,o.N),nh(t,o),o.D=null),o.a})),this.INTERNAL={},this.INTERNAL.delete=m(this.delete,this),this.INTERNAL.logFramework=m(this.Ec,this),this.s=0,fn.call(this),Object.defineProperty(this,"lc",{get:function(){return this.ja()},set:function(t){this.va(t)},enumerable:!1}),this.$=null,Object.defineProperty(this,"ti",{get:function(){return this.S()},set:function(t){this.ub(t)},enumerable:!1}),this.R=null,this.N=[]}function jh(t){qe.call(this,"languageCodeChanged"),this.g=t}function Vh(t){qe.call(this,"frameworkChanged"),this.c=t}function qh(t){return t.Zb||_e(new _("auth-domain-config-required"))}function Bh(t){if(!_r())return _e(new _("operation-not-supported-in-this-environment"));var e=qh(t).then(function(){return t.a.pa()}).then(function(t){return t?qr(t):null});return Xh(t,e)}function Wh(t,e){var n,r;Gh(t)&&(n=Gh(t),r=t.Ma,H(n.R,function(t){return t==r}),nn(Gh(t),"tokenChanged",t.xa),nn(Gh(t),"userDeleted",t.ya),nn(Gh(t),"userInvalidated",t.za),oh(Gh(t))),e&&(e.R.push(t.Ma),Ze(e,"tokenChanged",t.xa),Ze(e,"userDeleted",t.ya),Ze(e,"userInvalidated",t.za),0<t.s&&ih(e)),jr(t,"currentUser",e),e&&(e.va(t.ja()),th(e,t),eh(e,t.N),nh(e,t))}function Hh(n,t){var e=null,r=null;return Xh(n,t.then(function(t){return e=No(t),r=Ui(t),s=t,(a={}).apiKey=Kh(o=n).options.apiKey,a.authDomain=Kh(o).options.authDomain,a.appName=Kh(o).name,o.Z.then(function(){return t=a,e=s,n=o.B,r=o.Ea(),i=new Zc(t,e),n&&(i.ga=n),r&&eh(i,r),i.reload().then(function(){return i});var t,e,n,r,i}).then(function(t){return Gh(o)&&t.uid==Gh(o).uid?yh(Gh(o),t):(Wh(o,t),uh(t)),o.ca(t)}).then(function(){Qh(o)});var o,s,a},function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=Vc(t.v(),n,m(n.ic,n))),e||t}).then(function(){return qr({user:Gh(n),credential:e,additionalUserInfo:r,operationType:"signIn"})}))}function Kh(t){return t.app}function Gh(t){return t.currentUser}function zh(t){return Gh(t)&&Gh(t)._lat||null}function Qh(t){if(t.aa){for(var e=0;e<t.m.length;e++)t.m[e]&&t.m[e](zh(t));if(t.W!==t.getUid()&&t.O.length)for(t.W=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](zh(t))}}function Xh(t,e){return t.P.push(e),e.ma(function(){W(t.P,e)}),e}function Yh(){}function Jh(){this.a={},this.b=1e12}Oh.prototype.tb=function(e){var n=null,r=this;return function(t){var e=new _("invalid-persistence-type"),n=new _("unsupported-persistence-type");t:{for(r in Mu)if(Mu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(lr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!vu()&&"none"!==t)throw n;break;default:if(!wr()&&"none"!==t)throw n}}(e),Fh(this,function(){return e!=r.c.F?r.b.get(r.c,r.a).then(function(t){return n=t,Ph(r,e)}).then(function(){if(r.c=Dh(e),n)return r.b.set(r.c,n,r.a)}):we()})},e(Uh,fn),e(jh,qe),e(Vh,qe),(t=Uh.prototype).tb=function(t){return t=this.i.tb(t),Xh(this,t)},t.va=function(t){this.$===t||this.l||(this.$=t,Ks(this.b,this.$),this.dispatchEvent(new jh(this.ja())))},t.ja=function(){return this.$},t.dd=function(){var t=l.navigator;this.va(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.Ec=function(t){this.N.push(t),Gs(this.b,Fl.SDK_VERSION?gr(Fl.SDK_VERSION,this.N):null),this.dispatchEvent(new Vh(this.N))},t.Ea=function(){return G(this.N)},t.ub=function(t){this.R===t||this.l||(this.R=t,this.b.b=this.R)},t.S=function(){return this.R},t.toJSON=function(){return{apiKey:Kh(this).options.apiKey,authDomain:Kh(this).options.authDomain,appName:Kh(this).name,currentUser:Gh(this)&&Gh(this).v()}},t.Cb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.la=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},t.Da=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?m(this.gc,this):null},t.gc=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.Z.then(function(){return Hh(i,oa(i.b,o))})},t.Vc=function(e){if(!_r())return _e(new _("operation-not-supported-in-this-environment"));var n=this,t=Fi(e.providerId),r=Ar(),i=null;(!Tr()||cr())&&Kh(this).options.authDomain&&e.isOAuthProvider&&(i=ru(Kh(this).options.authDomain,Kh(this).options.apiKey,Kh(this).name,"signInViaPopup",e,null,r,Fl.SDK_VERSION||null,null,null,this.S()));var o=ir(i,t&&t.ta,t&&t.sa);return Xh(this,t=qh(this).then(function(t){return wc(t,o,"signInViaPopup",e,r,!!i,n.S())}).then(function(){return new pe(function(t,e){n.la("signInViaPopup",null,new _("cancelled-popup-request"),n.g),n.f=t,n.w=e,n.g=r,n.c=Ic(n.a,n,"signInViaPopup",o,r)})}).then(function(t){return o&&rr(o),t?qr(t):null}).o(function(t){throw o&&rr(o),t}))},t.Wc=function(t){if(!_r())return _e(new _("operation-not-supported-in-this-environment"));var e=this;return Xh(this,qh(this).then(function(){return Fh(t=e.i,function(){return t.b.set(Rh,t.c.F,t.a)});var t}).then(function(){return Ec(e.a,"signInViaRedirect",t,void 0,e.S())}))},t.pa=function(){var e=this;return Bh(this).then(function(t){return e.a&&Ac(e.a.b),t}).o(function(t){throw e.a&&Ac(e.a.b),t})},t.bd=function(t){if(!t)return _e(new _("null-user"));if(this.R!=t.tenantId)return _e(new _("tenant-id-mismatch"));var e=this,n={};n.apiKey=Kh(this).options.apiKey,n.authDomain=Kh(this).options.authDomain,n.appName=Kh(this).name;var r,i,o,s,a,u,c=(r=t,i=n,o=e.B,s=e.Ea(),a=r.b,(u={})[Vs]=a.b&&a.b.toString(),u.refreshToken=a.a,i=new Zc(i||{apiKey:r.l,authDomain:r.s,appName:r.m},u),o&&(i.ga=o),s&&eh(i,s),yh(i,r),i);return Xh(this,this.h.then(function(){if(Kh(e).options.apiKey!=t.l)return c.reload()}).then(function(){return Gh(e)&&t.uid==Gh(e).uid?(yh(Gh(e),t),e.ca(t)):(Wh(e,c),uh(c),e.ca(c))}).then(function(){Qh(e)}))},t.wb=function(){var t=this,e=this.h.then(function(){return t.a&&Ac(t.a.b),Gh(t)?(Wh(t,null),Lh(t.i).then(function(){Qh(t)})):we()});return Xh(this,e)},t.Xc=function(){var r=this;return Mh(this.i,Kh(this).options.authDomain).then(function(t){if(!r.l){var e,n;if((n=Gh(r)&&t)&&(n=Gh(r).uid,e=t.uid,n=null!=n&&""!==n&&null!=e&&""!==e&&n==e),n)return yh(Gh(r),t),Gh(r).I();(Gh(r)||t)&&(Wh(r,t),t&&(uh(t),t.ga=r.B),r.a&&yc(r.a,r),Qh(r))}})},t.ca=function(t){return xh(this.i,t)},t.jc=function(){Qh(this),this.ca(Gh(this))},t.uc=function(){this.wb()},t.vc=function(){this.wb()},t.ic=function(t){var e=this;return this.h.then(function(){return Hh(e,we(t))})},t.xc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(Gh(e))})},t.yc=function(t){function e(){t.next(Gh(r))}var n,r=this;(n=this).O.push(e),Xh(n,n.h.then(function(){!n.l&&B(n.O,e)&&n.W!==n.getUid()&&(n.W=n.getUid(),e(zh(n)))}))},t.Gc=function(t,e,n){var r=this;return this.aa&&Promise.resolve().then(function(){"function"==typeof t?t(Gh(r)):"function"==typeof t.next&&t.next(Gh(r))}),this.$b(t,e,n)},t.Fc=function(t,e,n){var r=this;return this.aa&&Promise.resolve().then(function(){r.W=r.getUid(),"function"==typeof t?t(Gh(r)):"function"==typeof t.next&&t.next(Gh(r))}),this.ac(t,e,n)},t.kc=function(t){var e=this,n=this.h.then(function(){return Gh(e)?Gh(e).I(t).then(function(t){return{accessToken:t}}):null});return Xh(this,n)},t.Rc=function(t){var n=this;return this.h.then(function(){return Hh(n,Ba(n.b,Ma,{token:t}))}).then(function(t){var e=t.user;return vh(e,"isAnonymous",!1),n.ca(e),t})},t.Sc=function(t,e){var n=this;return this.h.then(function(){return Hh(n,Ba(n.b,Fa,{email:t,password:e}))})},t.cc=function(t,e){var n=this;return this.h.then(function(){return Hh(n,Ba(n.b,la,{email:t,password:e}))})},t.Ya=function(t){var e=this;return this.h.then(function(){return Hh(e,t.ia(e.b))})},t.Qc=function(t){return Fr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Ya(t)},t.vb=function(){var n=this;return this.h.then(function(){var t=Gh(n);if(t&&t.isAnonymous){var e=qr({providerId:null,isNewUser:!1});return qr({user:t,credential:null,additionalUserInfo:e,operationType:"signIn"})}return Hh(n,n.b.vb()).then(function(t){var e=t.user;return vh(e,"isAnonymous",!0),n.ca(e),t})})},t.getUid=function(){return Gh(this)&&Gh(this).uid||null},t.bc=function(t){this.addAuthTokenListener(t),this.s++,0<this.s&&Gh(this)&&ih(Gh(this))},t.Nc=function(e){var n=this;U(this.m,function(t){t==e&&n.s--}),this.s<0&&(this.s=0),0==this.s&&Gh(this)&&oh(Gh(this)),this.removeAuthTokenListener(e)},t.addAuthTokenListener=function(t){var e=this;this.m.push(t),Xh(this,this.h.then(function(){e.l||B(e.m,t)&&t(zh(e))}))},t.removeAuthTokenListener=function(e){H(this.m,function(t){return t==e})},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(Dh("local"),t.a,this.oa),this.a&&(gc(this.a,this),Ac(this.a.b)),Promise.resolve()},t.fc=function(t){return Xh(this,Ba(this.b,fa,{identifier:t,continueUri:Er()?tr():"http://localhost"}).then(function(t){return t.signinMethods||[]}))},t.zc=function(t){return!!_o(t)},t.sb=function(e,n){var r=this;return Xh(this,we().then(function(){var t=new bi(n);if(!t.c)throw new _("argument-error",Ei+" must be true when sending sign in link to email");return ki(t)}).then(function(t){return r.b.sb(e,t)}).then(function(){}))},t.fd=function(t){return this.Pa(t).then(function(t){return t.data.email})},t.jb=function(t,e){return Xh(this,this.b.jb(t,e).then(function(){}))},t.Pa=function(t){return Xh(this,this.b.Pa(t).then(function(t){return new Yr(t)}))},t.fb=function(t){return Xh(this,this.b.fb(t).then(function(){}))},t.rb=function(e,t){var n=this;return Xh(this,we().then(function(){return void 0===t||ut(t)?{}:ki(new bi(t))}).then(function(t){return n.b.rb(e,t)}).then(function(){}))},t.Uc=function(t,e){return Xh(this,xc(this,t,e,m(this.Ya,this)))},t.Tc=function(n,r){var i=this;return Xh(this,we().then(function(){var t=r||tr(),e=wo(n,t);if(!(t=_o(t)))throw new _("argument-error","Invalid email link!");if(t.tenantId!==i.S())throw new _("tenant-id-mismatch");return i.Ya(e)}))},Yh.prototype.render=function(){},Yh.prototype.reset=function(){},Yh.prototype.getResponse=function(){},Yh.prototype.execute=function(){};var $h=null;function Zh(t,e){return(e=tl(e))&&t.a[e]||null}function tl(t){return(t=void 0===t?1e12:t)?t.toString():null}function el(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ee(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():Ze(this.f,"click",this.i)}function nl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function rl(){}function il(){}Jh.prototype.render=function(t,e){return this.a[this.b.toString()]=new el(t,e),this.b++},Jh.prototype.reset=function(t){var e=Zh(this,t);t=tl(t),e&&t&&(e.delete(),delete this.a[t])},Jh.prototype.getResponse=function(t){return(t=Zh(this,t))?t.getResponse():null},Jh.prototype.execute=function(t){(t=Zh(this,t))&&t.execute()},el.prototype.getResponse=function(){return nl(this),this.b},el.prototype.execute=function(){nl(this);var n=this;this.a||(this.a=setTimeout(function(){n.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var t=n.c.callback,e=n.c["expired-callback"];if(t)try{t(n.b)}catch(t){}n.a=setTimeout(function(){if(n.a=null,n.b=null,e)try{e()}catch(t){}n.h&&n.execute()},6e4)},500))},el.prototype.delete=function(){nl(this),this.g=!0,clearTimeout(this.a),this.a=null,nn(this.f,"click",this.i)},jr(rl,"FACTOR_ID","phone"),il.prototype.g=function(){return we($h=$h||new Jh)},il.prototype.c=function(){};var ol=null;function sl(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var al=new pt(yt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),ul=new Pr(3e4,6e4);sl.prototype.g=function(i){var o=this;return new pe(function(t,e){var r=setTimeout(function(){e(new _("network-request-failed"))},ul.get());!l.grecaptcha||i!==o.f&&!o.b?(l[o.a]=function(){var n;l.grecaptcha?(o.f=i,n=l.grecaptcha.render,l.grecaptcha.render=function(t,e){return t=n(t,e),o.b++,t},clearTimeout(r),t(l.grecaptcha)):(clearTimeout(r),e(new _("internal-error"))),delete l[o.a]},we(Ps(wt(al,{onload:o.a,hl:i||""}))).o(function(){clearTimeout(r),e(new _("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(r),t(l.grecaptcha))})},sl.prototype.c=function(){this.b--};var cl=null;function hl(t,e,n,r,i,o,s){if(jr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.u=e,this.g=null,s=s?ol=ol||new il:cl=cl||new sl,this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[pl])throw new _("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[dl],!l.document)throw new _("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ee(e)||!this.i&&ee(e).hasChildNodes())throw new _("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Us(t,o||null,i||null),this.w=r||function(){return null};var a=this;this.l=[];var u=this.a[ll];this.a[ll]=function(t){var e;vl(a,t),"function"==typeof u?u(t):"string"!=typeof u||"function"==typeof(e=br(u,l))&&e(t)};var c=this.a[fl];this.a[fl]=function(){var t;vl(a,null),"function"==typeof c?c():"string"!=typeof c||"function"==typeof(t=br(c,l))&&t()}}var ll="callback",fl="expired-callback",pl="sitekey",dl="size";function vl(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function yl(t,e){return t.h.push(e),e.ma(function(){W(t.h,e)}),e}function gl(t){if(t.D)throw new _("internal-error","RecaptchaVerifier instance has been destroyed.")}function ml(t,e,n){var r=!1;try{this.b=n||Fl.app()}catch(t){throw new _("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new _("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ea()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Fl.SDK_VERSION?gr(Fl.SDK_VERSION,o):null,hl.call(this,n,t,e,function(){try{var e=i.b.auth().ja()}catch(t){e=null}return e},o,N(I),r)}function bl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new _("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].K(n[i])&&!o){if(e=e[i],i<0||i>=wl.length)throw new _("internal-error","Argument validator received an unsupported number of arguments.");n=wl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.J+".";break t}r=null}}if(r)throw new _("argument-error",t+" failed: "+r)}(t=hl.prototype).Ga=function(){var e=this;return this.f?this.f:this.f=yl(this,we().then(function(){if(Er()&&!hr())return ar();throw new _("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return e.m.g(e.w())}).then(function(t){return e.g=t,Ba(e.s,Sa,{})}).then(function(t){e.a[pl]=t.recaptchaSiteKey}).o(function(t){throw e.f=null,t}))},t.render=function(){gl(this);var n=this;return yl(this,this.Ga().then(function(){var t,e;return null===n.c&&(e=n.u,n.i||(t=ee(e),e=function(t,e,n){var r,i=arguments,o=document,s=String(i[0]),a=i[1];return!te&&a&&(a.name||a.type)&&(s=["<",s],a.name&&s.push(' name="',Ft(a.name),'"'),a.type&&(s.push(' type="',Ft(a.type),'"'),lt(r={},a),delete r.type,a=r),s.push(">"),s=s.join("")),s=se(o,s),a&&("string"==typeof a?s.className=a:Array.isArray(a)?s.className=a.join(" "):ne(s,a)),2<i.length&&function(e,n,t){function r(t){t&&n.appendChild("string"==typeof t?e.createTextNode(t):t)}for(var i=2;i<t.length;i++){var o=t[i];!h(o)||v(o)&&0<o.nodeType?r(o):U(ae(o)?G(o):o,r)}}(o,s,i),s}("DIV"),t.appendChild(e)),n.c=n.g.render(e,n.a)),n.c}))},t.verify=function(){gl(this);var i=this;return yl(this,this.render().then(function(e){return new pe(function(n){var r,t=i.g.getResponse(e);t?n(t):(r=function(t){var e;t&&(e=r,H(i.l,function(t){return t==e}),n(t))},i.l.push(r),i.i&&i.g.execute(i.c))})}))},t.reset=function(){gl(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){gl(this),this.D=!0,this.m.c();for(var t,e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=ee(this.u);for(;t=e.firstChild;)e.removeChild(t)}},e(ml,hl);var wl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function _l(t,e){return{name:t||"",J:"a valid string",optional:!!e,K:function(t){return"string"==typeof t}}}function El(t,e){return{name:t||"",J:"a boolean",optional:!!e,K:function(t){return"boolean"==typeof t}}}function Il(t,e){return{name:t||"",J:"a valid object",optional:!!e,K:v}}function Tl(t,e){return{name:t||"",J:"a function",optional:!!e,K:function(t){return"function"==typeof t}}}function Sl(t,e){return{name:t||"",J:"null",optional:!!e,K:function(t){return null===t}}}function Cl(n){return{name:n?n+"Credential":"credential",J:n?"a valid "+n+" credential":"a valid credential",optional:!1,K:function(t){if(!t)return!1;var e=!n||t.providerId===n;return!(!t.ia||!e)}}}function Nl(){return{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.ob}}}function Al(){return{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}}function kl(t,e){return v(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Fa}function Ol(t){return v(t)&&"string"==typeof t.uid}function Pl(){return{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}}function Rl(e,n,t,r){return{name:t||"",J:e.J+" or "+n.J,optional:!!r,K:function(t){return e.K(t)||n.K(t)}}}function Dl(t,e){for(var n in e){var r=e[n].name;t[r]=Ml(r,t[n],e[n].j)}}function xl(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:b(function(t){return this[t]},n),set:b(function(t,e,n,r){bl(t,[n],[r],!0),this[e]=r},r,n,e[n].gb),enumerable:!0})}}function Ll(t,e,n,r){t[e]=Ml(e,n,r)}function Ml(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return bl(s,n,t),e.apply(this,t)}if(!n)return e;var i,o,s=(o=(o=t).split("."))[o.length-1];for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Dl(Uh.prototype,{fb:{name:"applyActionCode",j:[_l("code")]},Pa:{name:"checkActionCode",j:[_l("code")]},jb:{name:"confirmPasswordReset",j:[_l("code"),_l("newPassword")]},cc:{name:"createUserWithEmailAndPassword",j:[_l("email"),_l("password")]},fc:{name:"fetchSignInMethodsForEmail",j:[_l("email")]},pa:{name:"getRedirectResult",j:[]},zc:{name:"isSignInWithEmailLink",j:[_l("emailLink")]},Fc:{name:"onAuthStateChanged",j:[Rl(Il(),Tl(),"nextOrObserver"),Tl("opt_error",!0),Tl("opt_completed",!0)]},Gc:{name:"onIdTokenChanged",j:[Rl(Il(),Tl(),"nextOrObserver"),Tl("opt_error",!0),Tl("opt_completed",!0)]},rb:{name:"sendPasswordResetEmail",j:[_l("email"),Rl(Il("opt_actionCodeSettings",!0),Sl(null,!0),"opt_actionCodeSettings",!0)]},sb:{name:"sendSignInLinkToEmail",j:[_l("email"),Il("actionCodeSettings")]},tb:{name:"setPersistence",j:[_l("persistence")]},Qc:{name:"signInAndRetrieveDataWithCredential",j:[Cl()]},vb:{name:"signInAnonymously",j:[]},Ya:{name:"signInWithCredential",j:[Cl()]},Rc:{name:"signInWithCustomToken",j:[_l("token")]},Sc:{name:"signInWithEmailAndPassword",j:[_l("email"),_l("password")]},Tc:{name:"signInWithEmailLink",j:[_l("email"),_l("emailLink",!0)]},Uc:{name:"signInWithPhoneNumber",j:[_l("phoneNumber"),Pl()]},Vc:{name:"signInWithPopup",j:[Al()]},Wc:{name:"signInWithRedirect",j:[Al()]},bd:{name:"updateCurrentUser",j:[Rl({name:"user",J:"an instance of Firebase User",optional:!1,K:function(t){return!!(t&&t instanceof Zc)}},Sl(),"user")]},wb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[_l(null,!0)]},dd:{name:"useDeviceLanguage",j:[]},fd:{name:"verifyPasswordResetCode",j:[_l("code")]}}),xl(Uh.prototype,{lc:{name:"languageCode",gb:Rl(_l(),Sl(),"languageCode")},ti:{name:"tenantId",gb:Rl(_l(),Sl(),"tenantId")}}),(Uh.Persistence=Mu).LOCAL="local",Uh.Persistence.SESSION="session",Uh.Persistence.NONE="none",Dl(Zc.prototype,{delete:{name:"delete",j:[]},mc:{name:"getIdTokenResult",j:[El("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[El("opt_forceRefresh",!0)]},Ac:{name:"linkAndRetrieveDataWithCredential",j:[Cl()]},mb:{name:"linkWithCredential",j:[Cl()]},Bc:{name:"linkWithPhoneNumber",j:[_l("phoneNumber"),Pl()]},Cc:{name:"linkWithPopup",j:[Al()]},Dc:{name:"linkWithRedirect",j:[Al()]},Jc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Cl()]},pb:{name:"reauthenticateWithCredential",j:[Cl()]},Kc:{name:"reauthenticateWithPhoneNumber",j:[_l("phoneNumber"),Pl()]},Lc:{name:"reauthenticateWithPopup",j:[Al()]},Mc:{name:"reauthenticateWithRedirect",j:[Al()]},reload:{name:"reload",j:[]},qb:{name:"sendEmailVerification",j:[Rl(Il("opt_actionCodeSettings",!0),Sl(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[_l(null,!0)]},ad:{name:"unlink",j:[_l("provider")]},xb:{name:"updateEmail",j:[_l("email")]},yb:{name:"updatePassword",j:[_l("password")]},cd:{name:"updatePhoneNumber",j:[Cl("phone")]},zb:{name:"updateProfile",j:[Il("profile")]},Ab:{name:"verifyBeforeUpdateEmail",j:[_l("email"),Rl(Il("opt_actionCodeSettings",!0),Sl(null,!0),"opt_actionCodeSettings",!0)]}}),Dl(Jh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Dl(Yh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Dl(pe.prototype,{ma:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),xl(Rc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",gb:El("appVerificationDisabledForTesting")}}),Dl(Dc.prototype,{confirm:{name:"confirm",j:[_l("verificationCode")]}}),Ll(Ji,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[io,mo,Io,eo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[Rl(_l(),Il(),"json")]),Ll(bo,"credential",function(t,e){return new go(t,e)},[_l("email"),_l("password")]),Dl(go.prototype,{v:{name:"toJSON",j:[_l(null,!0)]}}),Dl(uo.prototype,{Aa:{name:"addScope",j:[_l("scope")]},Ia:{name:"setCustomParameters",j:[Il("customOAuthParameters")]}}),Ll(uo,"credential",co,[Rl(_l(),Il(),"token")]),Ll(bo,"credentialWithLink",wo,[_l("email"),_l("emailLink")]),Dl(ho.prototype,{Aa:{name:"addScope",j:[_l("scope")]},Ia:{name:"setCustomParameters",j:[Il("customOAuthParameters")]}}),Ll(ho,"credential",lo,[Rl(_l(),Il(),"token")]),Dl(fo.prototype,{Aa:{name:"addScope",j:[_l("scope")]},Ia:{name:"setCustomParameters",j:[Il("customOAuthParameters")]}}),Ll(fo,"credential",po,[Rl(_l(),Rl(Il(),Sl()),"idToken"),Rl(_l(),Sl(),"accessToken",!0)]),Dl(vo.prototype,{Ia:{name:"setCustomParameters",j:[Il("customOAuthParameters")]}}),Ll(vo,"credential",yo,[Rl(_l(),Il(),"token"),_l("secret",!0)]),Dl(ao.prototype,{Aa:{name:"addScope",j:[_l("scope")]},credential:{name:"credential",j:[Rl(_l(),Rl(Il(),Sl()),"optionsOrIdToken"),Rl(_l(),Sl(),"accessToken",!0)]},Ia:{name:"setCustomParameters",j:[Il("customOAuthParameters")]}}),Dl(no.prototype,{v:{name:"toJSON",j:[_l(null,!0)]}}),Dl(Zi.prototype,{v:{name:"toJSON",j:[_l(null,!0)]}}),Ll(So,"credential",Co,[_l("verificationId"),_l("verificationCode")]),Dl(So.prototype,{cb:{name:"verifyPhoneNumber",j:[Rl(_l(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?kl(t.session,Xi)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?kl(t.session,Yi)&&Ol(t.multiFactorHint):t.session&&t.multiFactorUid?kl(t.session,Yi)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),Pl()]}}),Dl(Eo.prototype,{v:{name:"toJSON",j:[_l(null,!0)]}}),Dl(_.prototype,{toJSON:{name:"toJSON",j:[_l(null,!0)]}}),Dl(Lo.prototype,{toJSON:{name:"toJSON",j:[_l(null,!0)]}}),Dl(xo.prototype,{toJSON:{name:"toJSON",j:[_l(null,!0)]}}),Dl(jc.prototype,{toJSON:{name:"toJSON",j:[_l(null,!0)]}}),Dl(Mc.prototype,{Pc:{name:"resolveSignIn",j:[Nl()]}}),Dl(Kc.prototype,{Ob:{name:"getSession",j:[]},dc:{name:"enroll",j:[Nl(),_l("displayName",!0)]},$c:{name:"unenroll",j:[Rl({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:Ol},_l(),"multiFactorInfoIdentifier")]}}),Dl(ml.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Ll(hi,"parseLink",mi,[_l("link")]),Ll(rl,"assertion",function(t){return new Wc(t)},[Cl("phone")]),function(){if(void 0===Fl||!Fl.INTERNAL||!Fl.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:$r,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Jr,VERIFY_AND_CHANGE_EMAIL:Zr,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Uh,AuthCredential:Ji,Error:_};Ll(t,"EmailAuthProvider",bo,[]),Ll(t,"FacebookAuthProvider",uo,[]),Ll(t,"GithubAuthProvider",ho,[]),Ll(t,"GoogleAuthProvider",fo,[]),Ll(t,"TwitterAuthProvider",vo,[]),Ll(t,"OAuthProvider",ao,[_l("providerId")]),Ll(t,"SAMLAuthProvider",so,[_l("providerId")]),Ll(t,"PhoneAuthProvider",So,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(t){return!!(t&&t instanceof Uh)}}]),Ll(t,"RecaptchaVerifier",ml,[Rl(_l(),{name:"",J:"an HTML element",optional:!1,K:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Il("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(t){return!!(t&&t instanceof Fl.app.App)}}]),Ll(t,"ActionCodeURL",hi,[]),Ll(t,"PhoneMultiFactorGenerator",rl,[]),Fl.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new Uh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),Fl.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:m((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:m(t.kc,t),addAuthTokenListener:m(t.bc,t),removeAuthTokenListener:m(t.Nc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Fl.registerVersion("@firebase/auth","0.14.9"),Fl.INTERNAL.extendNamespace({User:Zc})}()}.apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var lu=(fu.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),pa(e))},fu.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:fa(e)},fu.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},fu.prototype.prefixedName_=function(t){return this.prefix_+t},fu.prototype.toString=function(){return this.domStorage_.toString()},fu);function fu(t){this.domStorage_=t,this.prefix_="firebase:"}var pu=(du.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},du.prototype.get=function(t){return va(this.cache_,t)?this.cache_[t]:null},du.prototype.remove=function(t){delete this.cache_[t]},du);function du(){this.cache_={},this.isInMemoryStorage=!0}function vu(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new lu(e)}}catch(t){}return new pu}function yu(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i,o=t.charCodeAt(r);55296<=o&&o<=56319&&(i=o-55296,Gs(++r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(i<<10)+(t.charCodeAt(r)-56320)),o<128?e[n++]=o:(o<2048?e[n++]=o>>6|192:(o<65536?e[n++]=o>>12|224:(e[n++]=o>>18|240,e[n++]=o>>12&63|128),e[n++]=o>>6&63|128),e[n++]=63&o|128)}return e}(t),n=new ba;n.update(e);var r=n.digest();return Qs.encodeByteArray(r)}function gu(t,e){Gs(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(Ou.logLevel=ja.VERBOSE,Du=Ou.log.bind(Ou),e&&ku.set("logging_enabled",!0)):"function"==typeof t?Du=t:(Du=null,ku.remove("logging_enabled"))}function mu(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];!0===xu&&(xu=!1,null===Du&&!0===ku.get("logging_enabled")&&gu(!0)),Du&&(t=Ru.apply(null,e),Du(t))}function bu(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];mu.apply(void 0,qs([n],t))}}function wu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+Ru.apply(void 0,qs(t));Ou.error(n)}function _u(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+Ru.apply(void 0,qs(t));throw Ou.error(n),new Error(n)}function Eu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+Ru.apply(void 0,qs(t));Ou.warn(n)}function Iu(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)}function Tu(t,e){return t===e?0:t<e?-1:1}function Su(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+pa(e))}function Cu(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)n<i+e?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r}var Nu,Au=vu("localStorage"),ku=vu("sessionStorage"),Ou=new za("@firebase/database"),Pu=(Nu=1,function(){return Nu++}),Ru=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=Ru.apply(null,i):n+="object"==typeof i?pa(i):i,n+=" "}return n},Du=null,xu=!0,Lu="[MIN_NAME]",Mu="[MAX_NAME]",Fu=function(t,e){if(t===e)return 0;if(t===Lu||e===Mu)return-1;if(e===Lu||t===Mu)return 1;var n=Hu(t),r=Hu(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null===r&&t<e?-1:1},Uu=function(t){if("object"!=typeof t||null===t)return pa(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=pa(e[i]),r+=":",r+=Uu(t[e[i]]);return r+"}"};function ju(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}function Vu(t){var e,n,r,i;Gs(!Iu(t),"Invalid JSON number"),0===t?e=1/t==-1/(r=n=0)?1:0:(e=t<0,r=(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(t/Math.pow(2,-1074))));for(var o=[],s=52;s;--s)o.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;--s)o.push(n%2?1:0),n=Math.floor(n/2);o.push(e?1:0),o.reverse();var a=o.join(""),u="";for(s=0;s<64;s+=8){var c=parseInt(a.substr(s,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()}function qu(t){try{t()}catch(t){setTimeout(function(){throw Eu("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}}function Bu(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n}var Wu=new RegExp("^-?(0*)\\d{1,10}$"),Hu=function(t){if(Wu.test(t)){var e=Number(t);if(-2147483648<=e&&e<=2147483647)return e}return null},Ku=(Object.defineProperty(Gu,"Empty",{get:function(){return new Gu("")},enumerable:!1,configurable:!0}),Gu.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},Gu.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},Gu.prototype.popFront=function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new Gu(this.pieces_,t)},Gu.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},Gu.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},Gu.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},Gu.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},Gu.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],e=this.pieceNum_;e<this.pieces_.length-1;e++)t.push(this.pieces_[e]);return new Gu(t,0)},Gu.prototype.child=function(t){for(var e=[],n=this.pieceNum_;n<this.pieces_.length;n++)e.push(this.pieces_[n]);if(t instanceof Gu)for(n=t.pieceNum_;n<t.pieces_.length;n++)e.push(t.pieces_[n]);else for(var r=t.split("/"),n=0;n<r.length;n++)0<r[n].length&&e.push(r[n]);return new Gu(e,0)},Gu.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},Gu.relativePath=function(t,e){var n=t.getFront(),r=e.getFront();if(null===n)return e;if(n===r)return Gu.relativePath(t.popFront(),e.popFront());throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")},Gu.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=Fu(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},Gu.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},Gu.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},Gu);function Gu(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}var zu=(Object.defineProperty(Qu,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(Qu,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),Qu.prototype.push=function(t){0<this.parts_.length&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=ka(t),this.checkValid_()},Qu.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=ka(t),0<this.parts_.length&&--this.byteLength_},Qu.prototype.checkValid_=function(){if(this.byteLength_>Qu.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+Qu.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>Qu.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Qu.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},Qu.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},Qu);function Qu(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=ka(this.parts_[n]);this.checkValid_()}var Xu="firebaseio.com",Yu="websocket",Ju="long_polling",$u=(Zu.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},Zu.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},Zu.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},Zu.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},Zu.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Au.set("host:"+this.host,this.internalHost))},Zu.prototype.connectionURL=function(t,e){var n;if(Gs("string"==typeof t,"typeof type must == string"),Gs("object"==typeof e,"typeof params must == object"),t===Yu)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==Ju)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return ju(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},Zu.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},Zu.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},Zu);function Zu(t,e,n,r,i,o){void 0===i&&(i=""),void 0===o&&(o=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.includeNamespaceInQueryParams=o,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=Au.get("host:"+t)||this.host}function tc(t){var e=function(t){var e="",n="",r="",i="",o="",s=!0,a="https",u=443;if("string"==typeof t){var c=t.indexOf("//");0<=c&&(a=t.substring(0,c-1),t=t.substring(c+2));var h=t.indexOf("/");-1===h&&(h=t.length);var l=t.indexOf("?");-1===l&&(l=t.length),e=t.substring(0,Math.min(h,l)),h<l&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(0<n[r].length){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(h,l)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=js(t.split("&")),o=i.next();!o.done;o=i.next()){var s=o.value;if(0!==s.length){var a=s.split("=");2===a.length?r[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Eu("Invalid query segment '"+s+"' in query '"+t+"'")}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,l)));0<=(c=e.indexOf(":"))?(s="https"===a||"wss"===a,u=parseInt(e.substring(c+1),10)):c=e.length;var p=e.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var d=e.indexOf(".");r=e.substring(0,d).toLowerCase(),n=e.substring(d+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}}(t),n=e.namespace;"firebase.com"===e.domain&&_u(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!==n||"localhost"===e.domain||_u("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Eu("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var r="ws"===e.scheme||"wss"===e.scheme;return{repoInfo:new $u(e.host,e.secure,n,r,"",n!==e.subdomain),path:new Ku(e.pathString)}}function ec(t){return"string"==typeof t&&0!==t.length&&!fc.test(t)}function nc(t){return"string"==typeof t&&0!==t.length&&!pc.test(t)}function rc(t){return null===t||"string"==typeof t||"number"==typeof t&&!Iu(t)||t&&"object"==typeof t&&va(t,".sv")}function ic(t,e,n,r,i){i&&void 0===n||vc(Ca(t,e,i),n,r)}function oc(t,e,n,r,i){if(!i||void 0!==n){var o=Ca(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];ju(n,function(t,e){var n=new Ku(t);if(vc(o,e,r.child(n)),".priority"===n.getBack()&&!rc(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)}),function(t,e){for(var n,r=0;r<e.length;r++)for(var i=(n=e[r]).slice(),o=0;o<i.length;o++)if((".priority"!==i[o]||o!==i.length-1)&&!ec(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+n.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Ku.comparePaths);var s=null;for(r=0;r<e.length;r++){if(n=e[r],null!==s&&s.contains(n))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+n.toString());s=n}}(o,s)}}function sc(t,e,n,r){if(!r||void 0!==n){if(Iu(n))throw new Error(Ca(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!rc(n))throw new Error(Ca(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}function ac(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Ca(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function uc(t,e,n,r){if(!(r&&void 0===n||ec(n)))throw new Error(Ca(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function cc(t,e,n,r){if(!(r&&void 0===n||nc(n)))throw new Error(Ca(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function hc(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")}function lc(t,e,n){var r,i=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!ec(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==i.length&&!nc(r=(r=i)&&r.replace(/^\/*\.info(\/|$)/,"/")))throw new Error(Ca(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')}var fc=/[\[\].#$\/\u0000-\u001F\u007F]/,pc=/[\[\].#$\u0000-\u001F\u007F]/,dc=10485760,vc=function(n,t,e){var r=e instanceof Ku?new zu(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+r.toErrorString());if("function"==typeof t)throw new Error(n+"contains a function "+r.toErrorString()+" with contents = "+t.toString());if(Iu(t))throw new Error(n+"contains "+t.toString()+" "+r.toErrorString());if("string"==typeof t&&t.length>dc/3&&ka(t)>dc)throw new Error(n+"contains a string greater than "+dc+" utf8 bytes "+r.toErrorString()+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var i=!1,o=!1;if(ju(t,function(t,e){if(".value"===t)i=!0;else if(".priority"!==t&&".sv"!==t&&(o=!0,!ec(t)))throw new Error(n+" contains an invalid key ("+t+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(t),vc(n,e,r),r.pop()}),i&&o)throw new Error(n+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},yc=(gc.prototype.cancel=function(t){Sa("OnDisconnect.cancel",0,1,arguments.length),Na("OnDisconnect.cancel",1,t,!0);var e=new Js;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},gc.prototype.remove=function(t){Sa("OnDisconnect.remove",0,1,arguments.length),hc("OnDisconnect.remove",this.path_),Na("OnDisconnect.remove",1,t,!0);var e=new Js;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},gc.prototype.set=function(t,e){Sa("OnDisconnect.set",1,2,arguments.length),hc("OnDisconnect.set",this.path_),ic("OnDisconnect.set",1,t,this.path_,!1),Na("OnDisconnect.set",2,e,!0);var n=new Js;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},gc.prototype.setWithPriority=function(t,e,n){Sa("OnDisconnect.setWithPriority",2,3,arguments.length),hc("OnDisconnect.setWithPriority",this.path_),ic("OnDisconnect.setWithPriority",1,t,this.path_,!1),sc("OnDisconnect.setWithPriority",2,e,!1),Na("OnDisconnect.setWithPriority",3,n,!0);var r=new Js;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},gc.prototype.update=function(t,e){if(Sa("OnDisconnect.update",1,2,arguments.length),hc("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Eu("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}oc("OnDisconnect.update",1,t,this.path_,!1),Na("OnDisconnect.update",2,e,!0);var i=new Js;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},gc);function gc(t,e){this.repo_=t,this.path_=e}var mc=(bc.prototype.toJSON=function(){return Sa("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},bc);function bc(t,e){this.committed=t,this.snapshot=e}var wc,_c,Ec,Ic=(wc="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",_c=0,Ec=[],function(t){var e=t===_c;_c=t;for(var n=new Array(8),r=7;0<=r;r--)n[r]=wc.charAt(t%64),t=Math.floor(t/64);Gs(0===t,"Cannot push at time == 0");var i=n.join("");if(e){for(r=11;0<=r&&63===Ec[r];r--)Ec[r]=0;Ec[r]++}else for(r=0;r<12;r++)Ec[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)i+=wc.charAt(Ec[r]);return Gs(20===i.length,"nextPushId: Length should be 20."),i}),Tc=(Sc.Wrap=function(t,e){return new Sc(t,e)},Sc);function Sc(t,e){this.name=t,this.node=e}var Cc,Nc=(Ac.prototype.getCompare=function(){return this.compare.bind(this)},Ac.prototype.indexedValueChanged=function(t,e){var n=new Tc(Lu,t),r=new Tc(Lu,e);return 0!==this.compare(n,r)},Ac.prototype.minPost=function(){return Tc.MIN},Ac);function Ac(){}var kc,Oc=(Ls(Pc,kc=Nc),Object.defineProperty(Pc,"__EMPTY_NODE",{get:function(){return Cc},set:function(t){Cc=t},enumerable:!1,configurable:!0}),Pc.prototype.compare=function(t,e){return Fu(t.name,e.name)},Pc.prototype.isDefinedOn=function(t){throw zs("KeyIndex.isDefinedOn not expected to be called.")},Pc.prototype.indexedValueChanged=function(t,e){return!1},Pc.prototype.minPost=function(){return Tc.MIN},Pc.prototype.maxPost=function(){return new Tc(Mu,Cc)},Pc.prototype.makePost=function(t,e){return Gs("string"==typeof t,"KeyIndex indexValue must always be a string."),new Tc(t,Cc)},Pc.prototype.toString=function(){return".key"},Pc);function Pc(){return null!==kc&&kc.apply(this,arguments)||this}var Rc,Dc=new Oc;function xc(t){return"number"==typeof t?"number:"+Vu(t):"string:"+t}function Lc(t){var e;t.isLeafNode()?(e=t.val(),Gs("string"==typeof e||"number"==typeof e||"object"==typeof e&&va(e,".sv"),"Priority must be a string or number.")):Gs(t===Rc||t.isEmpty(),"priority of unexpected type."),Gs(t===Rc||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")}var Mc,Fc,Uc,jc,Vc=(Object.defineProperty(qc,"__childrenNodeConstructor",{get:function(){return Mc},set:function(t){Mc=t},enumerable:!1,configurable:!0}),qc.prototype.isLeafNode=function(){return!0},qc.prototype.getPriority=function(){return this.priorityNode_},qc.prototype.updatePriority=function(t){return new qc(this.value_,t)},qc.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:qc.__childrenNodeConstructor.EMPTY_NODE},qc.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:qc.__childrenNodeConstructor.EMPTY_NODE},qc.prototype.hasChild=function(){return!1},qc.prototype.getPredecessorChildName=function(t,e){return null},qc.prototype.updateImmediateChild=function(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:qc.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)},qc.prototype.updateChild=function(t,e){var n=t.getFront();return null===n?e:e.isEmpty()&&".priority"!==n?this:(Gs(".priority"!==n||1===t.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(n,qc.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),e)))},qc.prototype.isEmpty=function(){return!1},qc.prototype.numChildren=function(){return 0},qc.prototype.forEachChild=function(t,e){return!1},qc.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},qc.prototype.hash=function(){var t,e;return null===this.lazyHash_&&(t="",this.priorityNode_.isEmpty()||(t+="priority:"+xc(this.priorityNode_.val())+":"),t+=(e=typeof this.value_)+":",t+="number"==e?Vu(this.value_):this.value_,this.lazyHash_=yu(t)),this.lazyHash_},qc.prototype.getValue=function(){return this.value_},qc.prototype.compareTo=function(t){return t===qc.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof qc.__childrenNodeConstructor?-1:(Gs(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},qc.prototype.compareToLeafNode_=function(t){var e=typeof t.value_,n=typeof this.value_,r=qc.VALUE_TYPE_ORDER.indexOf(e),i=qc.VALUE_TYPE_ORDER.indexOf(n);return Gs(0<=r,"Unknown leaf type: "+e),Gs(0<=i,"Unknown leaf type: "+n),r===i?"object"==n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-r},qc.prototype.withIndex=function(){return this},qc.prototype.isIndexed=function(){return!0},qc.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},qc.VALUE_TYPE_ORDER=["object","boolean","number","string"],qc);function qc(t,e){void 0===e&&(e=qc.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=e,this.lazyHash_=null,Gs(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Lc(this.priorityNode_)}function Bc(){return null!==jc&&jc.apply(this,arguments)||this}var Wc=(Ls(Bc,jc=Nc),Bc.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?Fu(t.name,e.name):i},Bc.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},Bc.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},Bc.prototype.minPost=function(){return Tc.MIN},Bc.prototype.maxPost=function(){return new Tc(Mu,new Vc("[PRIORITY-POST]",Uc))},Bc.prototype.makePost=function(t,e){var n=Fc(t);return new Tc(e,new Vc("[PRIORITY-POST]",n))},Bc.prototype.toString=function(){return".priority"},new Bc),Hc=(Kc.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_.pop(),e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value};if(this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},Kc.prototype.hasNext=function(){return 0<this.nodeStack_.length},Kc.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},Kc);function Kc(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}var Gc=(zc.prototype.copy=function(t,e,n,r,i){return new zc(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},zc.prototype.count=function(){return this.left.count()+1+this.right.count()},zc.prototype.isEmpty=function(){return!1},zc.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},zc.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},zc.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},zc.prototype.minKey=function(){return this.min_().key},zc.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},zc.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},zc.prototype.removeMin_=function(){if(this.left.isEmpty())return Yc.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},zc.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Yc.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},zc.prototype.isRed_=function(){return this.color},zc.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},zc.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},zc.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},zc.prototype.rotateLeft_=function(){var t=this.copy(null,null,zc.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},zc.prototype.rotateRight_=function(){var t=this.copy(null,null,zc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},zc.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},zc.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},zc.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},zc.RED=!0,zc.BLACK=!1,zc);function zc(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:zc.RED,this.left=null!=r?r:Yc.EMPTY_NODE,this.right=null!=i?i:Yc.EMPTY_NODE}var Qc=(Xc.prototype.copy=function(t,e,n,r,i){return this},Xc.prototype.insert=function(t,e,n){return new Gc(t,e,null)},Xc.prototype.remove=function(t,e){return this},Xc.prototype.count=function(){return 0},Xc.prototype.isEmpty=function(){return!0},Xc.prototype.inorderTraversal=function(t){return!1},Xc.prototype.reverseTraversal=function(t){return!1},Xc.prototype.minKey=function(){return null},Xc.prototype.maxKey=function(){return null},Xc.prototype.check_=function(){return 0},Xc.prototype.isRed_=function(){return!1},Xc);function Xc(){}var Yc=(Jc.prototype.insert=function(t,e){return new Jc(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Gc.BLACK,null,null))},Jc.prototype.remove=function(t){return new Jc(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Gc.BLACK,null,null))},Jc.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:0<e&&(n=n.right)}return null},Jc.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:0<e&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},Jc.prototype.isEmpty=function(){return this.root_.isEmpty()},Jc.prototype.count=function(){return this.root_.count()},Jc.prototype.minKey=function(){return this.root_.minKey()},Jc.prototype.maxKey=function(){return this.root_.maxKey()},Jc.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},Jc.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},Jc.prototype.getIterator=function(t){return new Hc(this.root_,null,this.comparator_,!1,t)},Jc.prototype.getIteratorFrom=function(t,e){return new Hc(this.root_,t,this.comparator_,!1,e)},Jc.prototype.getReverseIteratorFrom=function(t,e){return new Hc(this.root_,t,this.comparator_,!0,e)},Jc.prototype.getReverseIterator=function(t){return new Hc(this.root_,null,this.comparator_,!0,t)},Jc.EMPTY_NODE=new Qc,Jc);function Jc(t,e){void 0===e&&(e=Jc.EMPTY_NODE),this.comparator_=t,this.root_=e}var $c=Math.log(2),Zc=(th.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},th);function th(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/$c,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}var eh,nh,rh=function(c,t,h,e){c.sort(t);var l=function(t,e){var n=e-t;if(0==n)return null;if(1==n)return s=c[t],a=h?h(s):s,new Gc(a,s.node,Gc.BLACK,null,null);var r=parseInt(n/2,10)+t,i=l(t,r),o=l(r+1,e),s=c[r],a=h?h(s):s;return new Gc(a,s.node,Gc.BLACK,i,o)},n=function(t){for(var e=null,n=null,a=c.length,r=function(t,e){var n=a-t,r=a;a-=t;var i=l(1+n,r),o=c[n],s=h?h(o):o;u(new Gc(s,o.node,e,null,i))},u=function(t){e=e?e.left=t:n=t},i=0;i<t.count;++i){var o=t.nextBitIsOne(),s=Math.pow(2,t.count-(i+1));o?r(s,Gc.BLACK):(r(s,Gc.BLACK),r(s,Gc.RED))}return n}(new Zc(c.length));return new Yc(e||t,n)},ih={},oh=(Object.defineProperty(sh,"Default",{get:function(){return Gs(Wc,"ChildrenNode.ts has not been loaded"),eh=eh||new sh({".priority":ih},{".priority":Wc})},enumerable:!1,configurable:!0}),sh.prototype.get=function(t){var e=ya(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Yc?e:null},sh.prototype.hasIndex=function(t){return va(this.indexSet_,t.toString())},sh.prototype.addIndex=function(t,e){Gs(t!==Dc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n,r=[],i=!1,o=e.getIterator(Tc.Wrap),s=o.getNext();s;)i=i||t.isDefinedOn(s.node),r.push(s),s=o.getNext();n=i?rh(r,t.getCompare()):ih;var a=t.toString(),u=Ms({},this.indexSet_);u[a]=t;var c=Ms({},this.indexes_);return c[a]=n,new sh(c,u)},sh.prototype.addToIndexes=function(u,c){var h=this;return new sh(ma(this.indexes_,function(t,e){var n=ya(h.indexSet_,e);if(Gs(n,"Missing index implementation for "+e),t===ih){if(n.isDefinedOn(u.node)){for(var r=[],i=c.getIterator(Tc.Wrap),o=i.getNext();o;)o.name!==u.name&&r.push(o),o=i.getNext();return r.push(u),rh(r,n.getCompare())}return ih}var s=c.get(u.name),a=t;return s&&(a=a.remove(new Tc(u.name,s))),a.insert(u,u.node)}),this.indexSet_)},sh.prototype.removeFromIndexes=function(n,r){return new sh(ma(this.indexes_,function(t){if(t===ih)return t;var e=r.get(n.name);return e?t.remove(new Tc(n.name,e)):t}),this.indexSet_)},sh);function sh(t,e){this.indexes_=t,this.indexSet_=e}function ah(t,e){return Fu(t.name,e.name)}function uh(t,e){return Fu(t,e)}var ch,hh=(Object.defineProperty(lh,"EMPTY_NODE",{get:function(){return nh=nh||new lh(new Yc(uh),null,oh.Default)},enumerable:!1,configurable:!0}),lh.prototype.isLeafNode=function(){return!1},lh.prototype.getPriority=function(){return this.priorityNode_||nh},lh.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new lh(this.children_,t,this.indexMap_)},lh.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?nh:e},lh.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},lh.prototype.hasChild=function(t){return null!==this.children_.get(t)},lh.prototype.updateImmediateChild=function(t,e){if(Gs(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);var n=new Tc(t,e),r=void 0,i=e.isEmpty()?(r=this.children_.remove(t),this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(t,e),this.indexMap_.addToIndexes(n,this.children_)),o=r.isEmpty()?nh:this.priorityNode_;return new lh(r,o,i)},lh.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;Gs(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},lh.prototype.isEmpty=function(){return this.children_.isEmpty()},lh.prototype.numChildren=function(){return this.children_.count()},lh.prototype.val=function(n){if(this.isEmpty())return null;var r={},i=0,o=0,s=!0;if(this.forEachChild(Wc,function(t,e){r[t]=e.val(n),i++,s&&lh.INTEGER_REGEXP_.test(t)?o=Math.max(o,Number(t)):s=!1}),!n&&s&&o<2*i){var t=[];for(var e in r)t[e]=r[e];return t}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r},lh.prototype.hash=function(){var r;return null===this.lazyHash_&&(r="",this.getPriority().isEmpty()||(r+="priority:"+xc(this.getPriority().val())+":"),this.forEachChild(Wc,function(t,e){var n=e.hash();""!==n&&(r+=":"+t+":"+n)}),this.lazyHash_=""===r?"":yu(r)),this.lazyHash_},lh.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Tc(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},lh.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},lh.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Tc(e,this.children_.get(e)):null},lh.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},lh.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Tc(e,this.children_.get(e)):null},lh.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},lh.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},lh.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Tc.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},lh.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},lh.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Tc.Wrap),i=r.peek();null!=i&&0<e.compare(i,t);)r.getNext(),i=r.peek();return r},lh.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ph?-1:0},lh.prototype.withIndex=function(t){if(t===Dc||this.indexMap_.hasIndex(t))return this;var e=this.indexMap_.addIndex(t,this.children_);return new lh(this.children_,this.priorityNode_,e)},lh.prototype.isIndexed=function(t){return t===Dc||this.indexMap_.hasIndex(t)},lh.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()!==e.children_.count())return!1;for(var n=this.getIterator(Wc),r=e.getIterator(Wc),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1},lh.prototype.resolveIndex_=function(t){return t===Dc?null:this.indexMap_.get(t.toString())},lh.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,lh);function lh(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Lc(this.priorityNode_),this.children_.isEmpty()&&Gs(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}function fh(){return ch.call(this,new Yc(uh),hh.EMPTY_NODE,oh.Default)||this}var ph=(Ls(fh,ch=hh),fh.prototype.compareTo=function(t){return t===this?0:1},fh.prototype.equals=function(t){return t===this},fh.prototype.getPriority=function(){return this},fh.prototype.getImmediateChild=function(t){return hh.EMPTY_NODE},fh.prototype.isEmpty=function(){return!1},new fh);Object.defineProperties(Tc,{MIN:{value:new Tc(Lu,hh.EMPTY_NODE)},MAX:{value:new Tc(Mu,ph)}}),Oc.__EMPTY_NODE=hh.EMPTY_NODE,Vc.__childrenNodeConstructor=hh,Uc=Rc=ph;var dh,vh=!0;function yh(r,t){if(void 0===t&&(t=null),null===r)return hh.EMPTY_NODE;if("object"==typeof r&&".priority"in r&&(t=r[".priority"]),Gs(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof r&&".value"in r&&null!==r[".value"]&&(r=r[".value"]),"object"!=typeof r||".sv"in r)return new Vc(r,yh(t));if(r instanceof Array||!vh){var i=hh.EMPTY_NODE;return ju(r,function(t,e){var n;va(r,t)&&"."!==t.substring(0,1)&&(!(n=yh(e)).isLeafNode()&&n.isEmpty()||(i=i.updateImmediateChild(t,n)))}),i.updatePriority(yh(t))}var o=[],s=!1;if(ju(r,function(t,e){var n;"."!==t.substring(0,1)&&((n=yh(e)).isEmpty()||(s=s||!n.getPriority().isEmpty(),o.push(new Tc(t,n))))}),0===o.length)return hh.EMPTY_NODE;var e=rh(o,ah,function(t){return t.name},uh);if(s){var n=rh(o,Wc.getCompare());return new hh(e,yh(t),new oh({".priority":n},{".priority":Wc}))}return new hh(e,yh(t),oh.Default)}function gh(){return null!==dh&&dh.apply(this,arguments)||this}Fc=yh;var mh,bh=(Ls(gh,dh=Nc),gh.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?Fu(t.name,e.name):n},gh.prototype.isDefinedOn=function(t){return!0},gh.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},gh.prototype.minPost=function(){return Tc.MIN},gh.prototype.maxPost=function(){return Tc.MAX},gh.prototype.makePost=function(t,e){var n=yh(t);return new Tc(e,n)},gh.prototype.toString=function(){return".value"},new gh),wh=(Ls(_h,mh=Nc),_h.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},_h.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},_h.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?Fu(t.name,e.name):i},_h.prototype.makePost=function(t,e){var n=yh(t),r=hh.EMPTY_NODE.updateChild(this.indexPath_,n);return new Tc(e,r)},_h.prototype.maxPost=function(){var t=hh.EMPTY_NODE.updateChild(this.indexPath_,ph);return new Tc(Mu,t)},_h.prototype.toString=function(){return this.indexPath_.slice().join("/")},_h);function _h(t){var e=mh.call(this)||this;return e.indexPath_=t,Gs(!t.isEmpty()&&".priority"!==t.getFront(),"Can't create PathIndex with empty path or .priority key"),e}var Eh=(Ih.prototype.val=function(){return Sa("DataSnapshot.val",0,0,arguments.length),this.node_.val()},Ih.prototype.exportVal=function(){return Sa("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},Ih.prototype.toJSON=function(){return Sa("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},Ih.prototype.exists=function(){return Sa("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},Ih.prototype.child=function(t){Sa("DataSnapshot.child",0,1,arguments.length),cc("DataSnapshot.child",1,t=String(t),!1);var e=new Ku(t),n=this.ref_.child(e);return new Ih(this.node_.getChild(e),n,Wc)},Ih.prototype.hasChild=function(t){Sa("DataSnapshot.hasChild",1,1,arguments.length),cc("DataSnapshot.hasChild",1,t,!1);var e=new Ku(t);return!this.node_.getChild(e).isEmpty()},Ih.prototype.getPriority=function(){return Sa("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},Ih.prototype.forEach=function(n){var r=this;return Sa("DataSnapshot.forEach",1,1,arguments.length),Na("DataSnapshot.forEach",1,n,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(t,e){return n(new Ih(e,r.ref_.child(t),Wc))})},Ih.prototype.hasChildren=function(){return Sa("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(Ih.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),Ih.prototype.numChildren=function(){return Sa("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},Ih.prototype.getRef=function(){return Sa("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(Ih.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),Ih);function Ih(t,e,n){this.node_=t,this.ref_=e,this.index_=n}var Th=(Sh.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},Sh.prototype.getEventType=function(){return this.eventType},Sh.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},Sh.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+pa(this.snapshot.exportVal())},Sh);function Sh(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}var Ch=(Nh.prototype.getPath=function(){return this.path},Nh.prototype.getEventType=function(){return"cancel"},Nh.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},Nh.prototype.toString=function(){return this.path.toString()+":cancel"},Nh);function Nh(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}var Ah=(kh.prototype.respondsTo=function(t){return"value"===t},kh.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Th("value",this,new Eh(t.snapshotNode,e.getRef(),n))},kh.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Gs(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},kh.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Ch(this,t,e):null},kh.prototype.matches=function(t){return t instanceof kh&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},kh.prototype.hasAnyCallback=function(){return null!==this.callback_},kh);function kh(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}var Oh,Ph=(Rh.prototype.respondsTo=function(t){var e="children_removed"===(e="children_added"===t?"child_added":t)?"child_removed":e;return va(this.callbacks_,e)},Rh.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Ch(this,t,e):null},Rh.prototype.createEvent=function(t,e){Gs(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Th(t.type,this,new Eh(t.snapshotNode,n,r),t.prevName)},Rh.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Gs(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},Rh.prototype.matches=function(e){var n=this;if(e instanceof Rh){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var t=Object.keys(e.callbacks_),r=Object.keys(this.callbacks_),i=t.length;if(i===r.length){if(1!==i)return r.every(function(t){return e.callbacks_[t]===n.callbacks_[t]});var o=t[0],s=r[0];return!(s!==o||e.callbacks_[o]&&this.callbacks_[s]&&e.callbacks_[o]!==this.callbacks_[s])}}}return!1},Rh.prototype.hasAnyCallback=function(){return null!==this.callbacks_},Rh);function Rh(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}var Dh=(Object.defineProperty(xh,"__referenceConstructor",{get:function(){return Gs(Oh,"Reference.ts has not been loaded"),Oh},set:function(t){Oh=t},enumerable:!1,configurable:!0}),xh.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Dc){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Lu)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==Mu)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Wc){if(null!=e&&!rc(e)||null!=n&&!rc(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Gs(t.getIndex()instanceof wh||t.getIndex()===bh,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},xh.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},xh.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},xh.prototype.getQueryParams=function(){return this.queryParams_},xh.prototype.getRef=function(){return Sa("Query.ref",0,0,arguments.length),new xh.__referenceConstructor(this.repo,this.path)},xh.prototype.on=function(t,e,n,r){Sa("Query.on",2,4,arguments.length),ac("Query.on",1,t,!1),Na("Query.on",2,e,!1);var i,o=xh.getCancelAndContextArgs_("Query.on",n,r);return"value"===t?this.onValueEvent(e,o.cancel,o.context):((i={})[t]=e,this.onChildEvent(i,o.cancel,o.context)),e},xh.prototype.onValueEvent=function(t,e,n){var r=new Ah(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},xh.prototype.onChildEvent=function(t,e,n){var r=new Ph(t,e,n);this.repo.addEventCallbackForQuery(this,r)},xh.prototype.off=function(t,e,n){Sa("Query.off",0,3,arguments.length),ac("Query.off",1,t,!0),Na("Query.off",2,e,!0),Aa("Query.off",3,n,!0);var r=null,i=null;"value"===t?r=new Ah(e||null,null,n||null):t&&(e&&((i={})[t]=e),r=new Ph(i,null,n||null)),this.repo.removeEventCallbackForQuery(this,r)},xh.prototype.once=function(e,n,t,r){var i=this;Sa("Query.once",1,4,arguments.length),ac("Query.once",1,e,!1),Na("Query.once",2,n,!0);var o=xh.getCancelAndContextArgs_("Query.once",t,r),s=!0,a=new Js;a.promise.catch(function(){});var u=function(t){s&&(s=!1,i.off(e,u),n&&n.bind(o.context)(t),a.resolve(t))};return this.on(e,u,function(t){i.off(e,u),o.cancel&&o.cancel.bind(o.context)(t),a.reject(t)}),a.promise},xh.prototype.limitToFirst=function(t){if(Sa("Query.limitToFirst",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new xh(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},xh.prototype.limitToLast=function(t){if(Sa("Query.limitToLast",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new xh(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},xh.prototype.orderByChild=function(t){if(Sa("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');cc("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var e=new Ku(t);if(e.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var n=new wh(e),r=this.queryParams_.orderBy(n);return xh.validateQueryEndpoints_(r),new xh(this.repo,this.path,r,!0)},xh.prototype.orderByKey=function(){Sa("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=this.queryParams_.orderBy(Dc);return xh.validateQueryEndpoints_(t),new xh(this.repo,this.path,t,!0)},xh.prototype.orderByPriority=function(){Sa("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=this.queryParams_.orderBy(Wc);return xh.validateQueryEndpoints_(t),new xh(this.repo,this.path,t,!0)},xh.prototype.orderByValue=function(){Sa("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=this.queryParams_.orderBy(bh);return xh.validateQueryEndpoints_(t),new xh(this.repo,this.path,t,!0)},xh.prototype.startAt=function(t,e){void 0===t&&(t=null),Sa("Query.startAt",0,2,arguments.length),ic("Query.startAt",1,t,this.path,!0),uc("Query.startAt",2,e,!0);var n=this.queryParams_.startAt(t,e);if(xh.validateLimit_(n),xh.validateQueryEndpoints_(n),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(e=t=null),new xh(this.repo,this.path,n,this.orderByCalled_)},xh.prototype.endAt=function(t,e){void 0===t&&(t=null),Sa("Query.endAt",0,2,arguments.length),ic("Query.endAt",1,t,this.path,!0),uc("Query.endAt",2,e,!0);var n=this.queryParams_.endAt(t,e);if(xh.validateLimit_(n),xh.validateQueryEndpoints_(n),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new xh(this.repo,this.path,n,this.orderByCalled_)},xh.prototype.equalTo=function(t,e){if(Sa("Query.equalTo",1,2,arguments.length),ic("Query.equalTo",1,t,this.path,!1),uc("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},xh.prototype.toString=function(){return Sa("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},xh.prototype.toJSON=function(){return Sa("Query.toJSON",0,1,arguments.length),this.toString()},xh.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},xh.prototype.queryIdentifier=function(){var t=this.queryObject(),e=Uu(t);return"{}"===e?"default":e},xh.prototype.isEqual=function(t){if(Sa("Query.isEqual",1,1,arguments.length),!(t instanceof xh))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");var e=this.repo===t.repo,n=this.path.equals(t.path),r=this.queryIdentifier()===t.queryIdentifier();return e&&n&&r},xh.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Na(t,3,r.cancel,!0),r.context=n,Aa(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Ca(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(xh.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),xh);function xh(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}var Lh=(Mh.prototype.getImmediateChild=function(t){return new Mh(this.node_.getImmediateChild(t))},Mh.prototype.node=function(){return this.node_},Mh);function Mh(t){this.node_=t}var Fh=(Uh.prototype.getImmediateChild=function(t){var e=this.path_.child(t);return new Uh(this.syncTree_,e)},Uh.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},Uh);function Uh(t,e){this.syncTree_=t,this.path_=e}function jh(t,e,n,r){return Hh(e,new Fh(n,t),r)}function Vh(t,e,n){return Hh(t,new Lh(e),n)}var qh=function(t,e,n){return t&&"object"==typeof t?(Gs(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?Bh(t[".sv"],e,n):"object"==typeof t[".sv"]?Wh(t[".sv"],e):void Gs(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Bh=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Gs(!1,"Unexpected server value: "+t)}},Wh=function(t,e,n){t.hasOwnProperty("increment")||Gs(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Gs(!1,"Unexpected increment value: "+r);var i=e.node();if(Gs(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!=typeof o?r:o+r};function Hh(t,r,i){var o,e=t.getPriority().val(),n=qh(e,r.getImmediateChild(".priority"),i);if(t.isLeafNode()){var s=t,a=qh(s.getValue(),r,i);return a!==s.getValue()||n!==s.getPriority().val()?new Vc(a,yh(n)):t}var u=t;return n!==(o=u).getPriority().val()&&(o=o.updatePriority(new Vc(n))),u.forEachChild(Wc,function(t,e){var n=Hh(e,r.getImmediateChild(t),i);n!==e&&(o=o.updateImmediateChild(t,n))}),o}var Kh,Gh,zh=(Qh.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&0<this.children.size){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},Qh.prototype.remember=function(t,e){var n,r;t.isEmpty()?(this.value=e,this.children.clear()):null!==this.value?this.value=this.value.updateChild(t,e):(n=t.getFront(),this.children.has(n)||this.children.set(n,new Qh),r=this.children.get(n),t=t.popFront(),r.remember(t,e))},Qh.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Wc,function(t,e){n.remember(new Ku(t),e)}),this.forget(t)}if(0<this.children.size){var r=t.getFront();return t=t.popFront(),!this.children.has(r)||this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},Qh.prototype.forEachTree=function(r,i){null!==this.value?i(r,this.value):this.forEachChild(function(t,e){var n=new Ku(r.toString()+"/"+t);e.forEachTree(n,i)})},Qh.prototype.forEachChild=function(n){this.children.forEach(function(t,e){n(e,t)})},Qh);function Qh(){this.value=null,this.children=new Map}(Gh=Kh=Kh||{})[Gh.OVERWRITE=0]="OVERWRITE",Gh[Gh.MERGE=1]="MERGE",Gh[Gh.ACK_USER_WRITE=2]="ACK_USER_WRITE",Gh[Gh.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var Xh=(Yh.User=new Yh(!0,!1,null,!1),Yh.Server=new Yh(!1,!0,null,!1),Yh.forServerTaggedQuery=function(t){return new Yh(!1,!0,t,!0)},Yh);function Yh(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,Gs(!r||e,"Tagged queries must be from server.")}var Jh,$h=(Zh.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return Gs(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var e=this.affectedTree.subtree(new Ku(t));return new Zh(Ku.Empty,e,this.revert)}return Gs(this.path.getFront()===t,"operationForChild called for unrelated child."),new Zh(this.path.popFront(),this.affectedTree,this.revert)},Zh);function Zh(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Kh.ACK_USER_WRITE,this.source=Xh.User}var tl=(el.fromObject=function(t){var n=el.Empty;return ju(t,function(t,e){n=n.set(new Ku(t),e)}),n},el.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},el.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:Ku.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null===r)return null;var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null==i?null:{path:new Ku(n).child(i.path),value:i.value}},el.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},el.prototype.subtree=function(t){if(t.isEmpty())return this;var e=t.getFront(),n=this.children.get(e);return null!==n?n.subtree(t.popFront()):el.Empty},el.prototype.set=function(t,e){if(t.isEmpty())return new el(e,this.children);var n=t.getFront(),r=(this.children.get(n)||el.Empty).set(t.popFront(),e),i=this.children.insert(n,r);return new el(this.value,i)},el.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?el.Empty:new el(null,this.children);var e=t.getFront(),n=this.children.get(e);if(n){var r=n.remove(t.popFront()),i=void 0,i=r.isEmpty()?this.children.remove(e):this.children.insert(e,r);return null===this.value&&i.isEmpty()?el.Empty:new el(this.value,i)}return this},el.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},el.prototype.setTree=function(t,e){if(t.isEmpty())return e;var n=t.getFront(),r=(this.children.get(n)||el.Empty).setTree(t.popFront(),e),i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r);return new el(this.value,i)},el.prototype.fold=function(t){return this.fold_(Ku.Empty,t)},el.prototype.fold_=function(n,r){var i={};return this.children.inorderTraversal(function(t,e){i[t]=e.fold_(n.child(t),r)}),r(n,this.value,i)},el.prototype.findOnPath=function(t,e){return this.findOnPath_(t,Ku.Empty,e)},el.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},el.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,Ku.Empty,e)},el.prototype.foreachOnPath_=function(t,e,n){if(t.isEmpty())return this;this.value&&n(e,this.value);var r=t.getFront(),i=this.children.get(r);return i?i.foreachOnPath_(t.popFront(),e.child(r),n):el.Empty},el.prototype.foreach=function(t){this.foreach_(Ku.Empty,t)},el.prototype.foreach_=function(n,r){this.children.inorderTraversal(function(t,e){e.foreach_(n.child(t),r)}),this.value&&r(n,this.value)},el.prototype.foreachChild=function(n){this.children.inorderTraversal(function(t,e){e.value&&n(t,e.value)})},el.Empty=new el(null),el);function el(t,e){void 0===e&&(e=Jh=Jh||new Yc(Tu)),this.value=t,this.children=e}var nl=(rl.prototype.operationForChild=function(t){return this.path.isEmpty()?new rl(this.source,Ku.Empty):new rl(this.source,this.path.popFront())},rl);function rl(t,e){this.source=t,this.path=e,this.type=Kh.LISTEN_COMPLETE}var il=(ol.prototype.operationForChild=function(t){return this.path.isEmpty()?new ol(this.source,Ku.Empty,this.snap.getImmediateChild(t)):new ol(this.source,this.path.popFront(),this.snap)},ol);function ol(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Kh.OVERWRITE}var sl=(al.prototype.operationForChild=function(t){if(this.path.isEmpty()){var e=this.children.subtree(new Ku(t));return e.isEmpty()?null:e.value?new il(this.source,Ku.Empty,e.value):new al(this.source,Ku.Empty,e)}return Gs(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new al(this.source,this.path.popFront(),this.children)},al.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},al);function al(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Kh.MERGE}var ul=(cl.prototype.isFullyInitialized=function(){return this.fullyInitialized_},cl.prototype.isFiltered=function(){return this.filtered_},cl.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},cl.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},cl.prototype.getNode=function(){return this.node_},cl);function cl(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}var hl=(ll.prototype.updateEventSnap=function(t,e,n){return new ll(new ul(t,e,n),this.serverCache_)},ll.prototype.updateServerSnap=function(t,e,n){return new ll(this.eventCache_,new ul(t,e,n))},ll.prototype.getEventCache=function(){return this.eventCache_},ll.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},ll.prototype.getServerCache=function(){return this.serverCache_},ll.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},ll.Empty=new ll(new ul(hh.EMPTY_NODE,!1,!1),new ul(hh.EMPTY_NODE,!1,!1)),ll);function ll(t,e){this.eventCache_=t,this.serverCache_=e}var fl=(pl.valueChange=function(t){return new pl(pl.VALUE,t)},pl.childAddedChange=function(t,e){return new pl(pl.CHILD_ADDED,e,t)},pl.childRemovedChange=function(t,e){return new pl(pl.CHILD_REMOVED,e,t)},pl.childChangedChange=function(t,e,n){return new pl(pl.CHILD_CHANGED,e,t,n)},pl.childMovedChange=function(t,e){return new pl(pl.CHILD_MOVED,e,t)},pl.CHILD_ADDED="child_added",pl.CHILD_REMOVED="child_removed",pl.CHILD_CHANGED="child_changed",pl.CHILD_MOVED="child_moved",pl.VALUE="value",pl);function pl(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}var dl=(vl.prototype.updateChild=function(t,e,n,r,i,o){Gs(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(fl.childRemovedChange(e,s)):Gs(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(fl.childAddedChange(e,n)):o.trackChildChange(fl.childChangedChange(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},vl.prototype.updateFullNode=function(r,n,i){return null!=i&&(r.isLeafNode()||r.forEachChild(Wc,function(t,e){n.hasChild(t)||i.trackChildChange(fl.childRemovedChange(t,e))}),n.isLeafNode()||n.forEachChild(Wc,function(t,e){var n;r.hasChild(t)?(n=r.getImmediateChild(t)).equals(e)||i.trackChildChange(fl.childChangedChange(t,e,n)):i.trackChildChange(fl.childAddedChange(t,e))})),n.withIndex(this.index_)},vl.prototype.updatePriority=function(t,e){return t.isEmpty()?hh.EMPTY_NODE:t.updatePriority(e)},vl.prototype.filtersNodes=function(){return!1},vl.prototype.getIndexedFilter=function(){return this},vl.prototype.getIndex=function(){return this.index_},vl);function vl(t){this.index_=t}var yl=(gl.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Gs(e===fl.CHILD_ADDED||e===fl.CHILD_CHANGED||e===fl.CHILD_REMOVED,"Only child changes supported for tracking"),Gs(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===fl.CHILD_ADDED&&i===fl.CHILD_REMOVED)this.changeMap.set(n,fl.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===fl.CHILD_REMOVED&&i===fl.CHILD_ADDED)this.changeMap.delete(n);else if(e===fl.CHILD_REMOVED&&i===fl.CHILD_CHANGED)this.changeMap.set(n,fl.childRemovedChange(n,r.oldSnap));else if(e===fl.CHILD_CHANGED&&i===fl.CHILD_ADDED)this.changeMap.set(n,fl.childAddedChange(n,t.snapshotNode));else{if(e!==fl.CHILD_CHANGED||i!==fl.CHILD_CHANGED)throw zs("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,fl.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},gl.prototype.getChanges=function(){return Array.from(this.changeMap.values())},gl);function gl(){this.changeMap=new Map}function ml(){}var bl=(ml.prototype.getCompleteChild=function(t){return null},ml.prototype.getChildAfterChild=function(t,e,n){return null},new ml),wl=(_l.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new ul(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},_l.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},_l);function _l(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}function El(t,e){this.viewCache=t,this.changes=e}var Il=(Tl.prototype.assertIndexed=function(t){Gs(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Gs(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},Tl.prototype.applyOperation=function(t,e,n,r){var i,o=new yl;if(e.type===Kh.OVERWRITE)var s=e,a=s.source.fromUser?this.applyUserOverwrite_(t,s.path,s.snap,n,r,o):(Gs(s.source.fromServer,"Unknown source."),i=s.source.tagged||t.getServerCache().isFiltered()&&!s.path.isEmpty(),this.applyServerOverwrite_(t,s.path,s.snap,n,r,i,o));else if(e.type===Kh.MERGE){var u=e;a=u.source.fromUser?this.applyUserMerge_(t,u.path,u.children,n,r,o):(Gs(u.source.fromServer,"Unknown source."),i=u.source.tagged||t.getServerCache().isFiltered(),this.applyServerMerge_(t,u.path,u.children,n,r,i,o))}else if(e.type===Kh.ACK_USER_WRITE){var c=e;a=c.revert?this.revertUserWrite_(t,c.path,n,r,o):this.ackUserWrite_(t,c.path,c.affectedTree,n,r,o)}else{if(e.type!==Kh.LISTEN_COMPLETE)throw zs("Unknown operation type: "+e.type);a=this.listenComplete_(t,e.path,n,o)}var h=o.getChanges();return Tl.maybeAddValueEvent_(t,a,h),new El(a,h)},Tl.maybeAddValueEvent_=function(t,e,n){var r,i,o=e.getEventCache();o.isFullyInitialized()&&(r=o.getNode().isLeafNode()||o.getNode().isEmpty(),i=t.getCompleteEventSnap(),(0<n.length||!t.getEventCache().isFullyInitialized()||r&&!o.getNode().equals(i)||!o.getNode().getPriority().equals(i.getPriority()))&&n.push(fl.valueChange(e.getCompleteEventSnap())))},Tl.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var s,a,u,c,h,l,f,p,d,v,y=void 0,g=void 0;return y=e.isEmpty()?(Gs(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()?(a=(s=t.getCompleteServerSnap())instanceof hh?s:hh.EMPTY_NODE,u=n.calcCompleteEventChildren(a),this.filter_.updateFullNode(t.getEventCache().getNode(),u,i)):(c=n.calcCompleteEventCache(t.getCompleteServerSnap()),this.filter_.updateFullNode(t.getEventCache().getNode(),c,i))):".priority"===(h=e.getFront())?(Gs(1===e.getLength(),"Can't have a priority with additional path components"),l=o.getNode(),g=t.getServerCache().getNode(),null!=(f=n.calcEventCacheAfterServerOverwrite(e,l,g))?this.filter_.updatePriority(l,f):o.getNode()):(p=e.popFront(),v=void 0,null!=(v=o.isCompleteForChild(h)?(g=t.getServerCache().getNode(),null!=(d=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),g))?o.getNode().getImmediateChild(h).updateChild(p,d):o.getNode().getImmediateChild(h)):n.calcCompleteChild(h,t.getServerCache()))?this.filter_.updateChild(o.getNode(),h,v,p,r,i):o.getNode()),t.updateEventSnap(y,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},Tl.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a=t.getServerCache(),u=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())h=u.updateFullNode(a.getNode(),n,null);else if(u.filtersNodes()&&!a.isFiltered())var c=a.getNode().updateChild(e,n),h=u.updateFullNode(a.getNode(),c,null);else{var l=e.getFront();if(!a.isCompleteForPath(e)&&1<e.getLength())return t;var f=e.popFront(),p=a.getNode().getImmediateChild(l).updateChild(f,n);h=".priority"===l?u.updatePriority(a.getNode(),p):u.updateChild(a.getNode(),l,p,f,bl,null)}var d=t.updateServerSnap(h,a.isFullyInitialized()||e.isEmpty(),u.filtersNodes()),v=new wl(r,d,i);return this.generateEventCacheAfterServerEvent_(d,e,r,v,s)},Tl.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u,c,h,l,f,p=t.getEventCache(),d=new wl(r,t,i);return e.isEmpty()?(s=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),t.updateEventSnap(s,!0,this.filter_.filtersNodes())):".priority"===(a=e.getFront())?(s=this.filter_.updatePriority(t.getEventCache().getNode(),n),t.updateEventSnap(s,p.isFullyInitialized(),p.isFiltered())):(u=e.popFront(),c=p.getNode().getImmediateChild(a),l=void 0,l=u.isEmpty()?n:null!=(h=d.getCompleteChild(a))?".priority"===u.getBack()&&h.getChild(u.parent()).isEmpty()?h:h.updateChild(u,n):hh.EMPTY_NODE,c.equals(l)?t:(f=this.filter_.updateChild(p.getNode(),a,l,u,d,o),t.updateEventSnap(f,p.isFullyInitialized(),this.filter_.filtersNodes())))},Tl.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},Tl.prototype.applyUserMerge_=function(r,i,t,o,s,a){var u=this,c=r;return t.foreach(function(t,e){var n=i.child(t);Tl.cacheHasChild_(r,n.getFront())&&(c=u.applyUserOverwrite_(c,n,e,o,s,a))}),t.foreach(function(t,e){var n=i.child(t);Tl.cacheHasChild_(r,n.getFront())||(c=u.applyUserOverwrite_(c,n,e,o,s,a))}),c},Tl.prototype.applyMerge_=function(n,t){return t.foreach(function(t,e){n=n.updateChild(t,e)}),n},Tl.prototype.applyServerMerge_=function(o,t,e,s,a,u,c){var h=this;if(o.getServerCache().getNode().isEmpty()&&!o.getServerCache().isFullyInitialized())return o;var l=o,n=t.isEmpty()?e:tl.Empty.setTree(t,e),f=o.getServerCache().getNode();return n.children.inorderTraversal(function(t,e){var n,r;f.hasChild(t)&&(n=o.getServerCache().getNode().getImmediateChild(t),r=h.applyMerge_(n,e),l=h.applyServerOverwrite_(l,new Ku(t),r,s,a,u,c))}),n.children.inorderTraversal(function(t,e){var n,r,i=!o.getServerCache().isCompleteForChild(t)&&null==e.value;f.hasChild(t)||i||(n=o.getServerCache().getNode().getImmediateChild(t),r=h.applyMerge_(n,e),l=h.applyServerOverwrite_(l,new Ku(t),r,s,a,u,c))}),l},Tl.prototype.ackUserWrite_=function(t,r,e,n,i,o){if(null!=n.shadowingWrite(r))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=e.value){if(r.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(r))return this.applyServerOverwrite_(t,r,a.getNode().getChild(r),n,i,s,o);if(r.isEmpty()){var u=tl.Empty;return a.getNode().forEachChild(Dc,function(t,e){u=u.set(new Ku(t),e)}),this.applyServerMerge_(t,r,u,n,i,s,o)}return t}var c=tl.Empty;return e.foreach(function(t,e){var n=r.child(t);a.isCompleteForPath(n)&&(c=c.set(t,a.getNode().getChild(n)))}),this.applyServerMerge_(t,r,c,n,i,s,o)},Tl.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,bl,r)},Tl.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var s,a,u,c,h=new wl(n,t,r),l=t.getEventCache().getNode(),f=void 0;return e.isEmpty()||".priority"===e.getFront()?(a=void 0,a=a=t.getServerCache().isFullyInitialized()?n.calcCompleteEventCache(t.getCompleteServerSnap()):(s=t.getServerCache().getNode(),Gs(s instanceof hh,"serverChildren would be complete if leaf node"),n.calcCompleteEventChildren(s)),f=this.filter_.updateFullNode(l,a,i)):(u=e.getFront(),null==(c=n.calcCompleteChild(u,t.getServerCache()))&&t.getServerCache().isCompleteForChild(u)&&(c=l.getImmediateChild(u)),(f=null!=c?this.filter_.updateChild(l,u,c,e.popFront(),h,i):t.getEventCache().getNode().hasChild(u)?this.filter_.updateChild(l,u,hh.EMPTY_NODE,e.popFront(),h,i):l).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(f=this.filter_.updateFullNode(f,o,i))),o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(Ku.Empty),t.updateEventSnap(f,o,this.filter_.filtersNodes())},Tl);function Tl(t){this.filter_=t}var Sl=(Cl.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach(function(t){t.type===fl.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(fl.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(i,fl.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,fl.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,fl.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,fl.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,fl.VALUE,t,n,e),i},Cl.prototype.generateEventsForType_=function(r,e,t,i,o){var s=this,n=t.filter(function(t){return t.type===e});n.sort(this.compareChanges_.bind(this)),n.forEach(function(e){var n=s.materializeSingleChange_(e,o);i.forEach(function(t){t.respondsTo(e.type)&&r.push(t.createEvent(n,s.query_))})})},Cl.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},Cl.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw zs("Should only compare child_ events.");var n=new Tc(t.childName,t.snapshotNode),r=new Tc(e.childName,e.snapshotNode);return this.index_.compare(n,r)},Cl);function Cl(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}var Nl,Al=(kl.prototype.getQuery=function(){return this.query_},kl.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},kl.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},kl.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},kl.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},kl.prototype.removeEventRegistration=function(t,n){var r,i=[];if(n&&(Gs(null==t,"A cancel should cancel all event registrations."),r=this.query_.path,this.eventRegistrations_.forEach(function(t){n=n;var e=t.createCancelEvent(n,r);e&&i.push(e)})),t){for(var e=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){e=e.concat(this.eventRegistrations_.slice(o+1));break}}else e.push(s)}this.eventRegistrations_=e}else this.eventRegistrations_=[];return i},kl.prototype.applyOperation=function(t,e,n){t.type===Kh.MERGE&&null!==t.source.queryId&&(Gs(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Gs(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),Gs(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},kl.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Wc,function(t,e){n.push(fl.childAddedChange(t,e))}),e.isFullyInitialized()&&n.push(fl.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},kl.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,r)},kl);function kl(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new dl(n.getIndex()),i=n.getNodeFilter();this.processor_=new Il(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode(hh.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(hh.EMPTY_NODE,s.getNode(),null),c=new ul(a,o.isFullyInitialized(),r.filtersNodes()),h=new ul(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new hl(h,c),this.eventGenerator_=new Sl(this.query_)}var Ol=(Object.defineProperty(Pl,"__referenceConstructor",{get:function(){return Gs(Nl,"Reference.ts has not been loaded"),Nl},set:function(t){Gs(!Nl,"__referenceConstructor has already been defined"),Nl=t},enumerable:!1,configurable:!0}),Pl.prototype.isEmpty=function(){return 0===this.views.size},Pl.prototype.applyOperation=function(t,e,n){var r,i,o=t.source.queryId;if(null!==o){var s=this.views.get(o);return Gs(null!=s,"SyncTree gave us an op for an invalid query."),s.applyOperation(t,e,n)}var a=[];try{for(var u=js(this.views.values()),c=u.next();!c.done;c=u.next())s=c.value,a=a.concat(s.applyOperation(t,e,n))}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return a},Pl.prototype.addEventRegistration=function(t,e,n,r,i){var o,s,a,u=t.queryIdentifier(),c=this.views.get(u);return c||(s=!!(o=n.calcCompleteEventCache(i?r:null))||(o=r instanceof hh?n.calcCompleteEventChildren(r):hh.EMPTY_NODE,!1),a=new hl(new ul(o,s,!1),new ul(r,i,!1)),c=new Al(t,a),this.views.set(u,c)),c.addEventRegistration(e),c.getInitialEvents(e)},Pl.prototype.removeEventRegistration=function(t,e,n){var r,i,o=t.queryIdentifier(),s=[],a=[],u=this.hasCompleteView();if("default"===o)try{for(var c=js(this.views.entries()),h=c.next();!h.done;h=c.next()){var l=Vs(h.value,2),f=l[0],p=l[1],a=a.concat(p.removeEventRegistration(e,n));p.isEmpty()&&(this.views.delete(f),p.getQuery().getQueryParams().loadsAllData()||s.push(p.getQuery()))}}catch(t){r={error:t}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}else(p=this.views.get(o))&&(a=a.concat(p.removeEventRegistration(e,n)),p.isEmpty()&&(this.views.delete(o),p.getQuery().getQueryParams().loadsAllData()||s.push(p.getQuery())));return u&&!this.hasCompleteView()&&s.push(new Pl.__referenceConstructor(t.repo,t.path)),{removed:s,events:a}},Pl.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=js(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},Pl.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=js(this.views.values()),o=i.next();!o.done;o=i.next())var s=o.value,r=r||s.getCompleteServerCache(t)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},Pl.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},Pl.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},Pl.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},Pl.prototype.getCompleteView=function(){var t,e;try{for(var n=js(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},Pl);function Pl(){this.views=new Map}var Rl=(Dl.prototype.addWrite=function(t,e){if(t.isEmpty())return new Dl(new tl(e));var n=this.writeTree_.findRootMostValueAndPath(t);if(null!=n){var r=n.path,i=n.value,o=Ku.relativePath(r,t),i=i.updateChild(o,e);return new Dl(this.writeTree_.set(r,i))}var s=new tl(e);return new Dl(this.writeTree_.setTree(t,s))},Dl.prototype.addWrites=function(n,t){var r=this;return ju(t,function(t,e){r=r.addWrite(n.child(t),e)}),r},Dl.prototype.removeWrite=function(t){return t.isEmpty()?Dl.Empty:new Dl(this.writeTree_.setTree(t,tl.Empty))},Dl.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},Dl.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(Ku.relativePath(e.path,t)):null},Dl.prototype.getCompleteChildren=function(){var n=[],t=this.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Wc,function(t,e){n.push(new Tc(t,e))}):this.writeTree_.children.inorderTraversal(function(t,e){null!=e.value&&n.push(new Tc(t,e.value))}),n},Dl.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var e=this.getCompleteNode(t);return new Dl(null!=e?new tl(e):this.writeTree_.subtree(t))},Dl.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},Dl.prototype.apply=function(t){return function n(r,t,i){if(null!=t.value)return i.updateChild(r,t.value);var o=null;return t.children.inorderTraversal(function(t,e){".priority"===t?(Gs(null!==e.value,"Priority writes must always be leaf nodes"),o=e.value):i=n(r.child(t),e,i)}),i.getChild(r).isEmpty()||null===o||(i=i.updateChild(r.child(".priority"),o)),i}(Ku.Empty,this.writeTree_,t)},Dl.Empty=new Dl(new tl(null)),Dl);function Dl(t){this.writeTree_=t}var xl=(Ll.prototype.childWrites=function(t){return new Ml(t,this)},Ll.prototype.addOverwrite=function(t,e,n,r){Gs(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},Ll.prototype.addMerge=function(t,e,n){Gs(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},Ll.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},Ll.prototype.removeWrite=function(e){var n=this,t=this.allWrites_.findIndex(function(t){return t.writeId===e});Gs(0<=t,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[t];this.allWrites_.splice(t,1);for(var i=r.visible,o=!1,s=this.allWrites_.length-1;i&&0<=s;){var a=this.allWrites_[s];a.visible&&(t<=s&&this.recordContainsPath_(a,r.path)?i=!1:r.path.contains(a.path)&&(o=!0)),s--}return!!i&&(o?this.resetTree_():r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):ju(r.children,function(t){n.visibleWrites_=n.visibleWrites_.removeWrite(r.path.child(t))}),!0)},Ll.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},Ll.prototype.calcCompleteEventCache=function(e,t,n,r){if(n||r){var i=this.visibleWrites_.childCompoundWrite(e);if(!r&&i.isEmpty())return t;if(r||null!=t||i.hasCompleteWrite(Ku.Empty)){var o=Ll.layerTree_(this.allWrites_,function(t){return(t.visible||r)&&(!n||!~n.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e),s=t||hh.EMPTY_NODE;return o.apply(s)}return null}var a=this.visibleWrites_.getCompleteNode(e);if(null!=a)return a;var u=this.visibleWrites_.childCompoundWrite(e);if(u.isEmpty())return t;if(null!=t||u.hasCompleteWrite(Ku.Empty)){var s=t||hh.EMPTY_NODE;return u.apply(s)}return null},Ll.prototype.calcCompleteEventChildren=function(t,e){var r=hh.EMPTY_NODE,n=this.visibleWrites_.getCompleteNode(t);if(n)return n.isLeafNode()||n.forEachChild(Wc,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(Wc,function(t,e){var n=i.childCompoundWrite(new Ku(t)).apply(e);r=r.updateImmediateChild(t,n)}),i.getCompleteChildren().forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r},Ll.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){Gs(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},Ll.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},Ll.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},Ll.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),u=a.getCompleteNode(Ku.Empty);if(null!=u)s=u;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],h=o.getCompare(),l=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=l.getNext();f&&c.length<r;)0!==h(f,n)&&c.push(f),f=l.getNext();return c},Ll.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},Ll.prototype.resetTree_=function(){this.visibleWrites_=Ll.layerTree_(this.allWrites_,Ll.DefaultFilter_,Ku.Empty),0<this.allWrites_.length?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},Ll.DefaultFilter_=function(t){return t.visible},Ll.layerTree_=function(t,e,n){for(var r=Rl.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var s,a,u=o.path,c=void 0;if(o.snap)n.contains(u)?(c=Ku.relativePath(n,u),r=r.addWrite(c,o.snap)):u.contains(n)&&(c=Ku.relativePath(u,n),r=r.addWrite(Ku.Empty,o.snap.getChild(c)));else{if(!o.children)throw zs("WriteRecord should have .snap or .children");n.contains(u)?(c=Ku.relativePath(n,u),r=r.addWrites(c,o.children)):u.contains(n)&&((c=Ku.relativePath(u,n)).isEmpty()?r=r.addWrites(Ku.Empty,o.children):(s=ya(o.children,c.getFront()))&&(a=s.getChild(c.popFront()),r=r.addWrite(Ku.Empty,a)))}}}return r},Ll);function Ll(){this.visibleWrites_=Rl.Empty,this.allWrites_=[],this.lastWriteId_=-1}var Ml=(Ul.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},Ul.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},Ul.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},Ul.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},Ul.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},Ul.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},Ul.prototype.child=function(t){return new Ul(this.treePath_.child(t),this.writeTree_)},Ul);function Ul(t,e){this.treePath_=t,this.writeTree_=e}var jl=(Vl.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new il(Xh.User,t,e)):[]},Vl.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=tl.fromObject(e);return this.applyOperationToSyncPoints_(new sl(Xh.User,t,r))},Vl.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=tl.Empty;return null!=n.snap?r=r.set(Ku.Empty,!0):ju(n.children,function(t,e){r=r.set(new Ku(t),e)}),this.applyOperationToSyncPoints_(new $h(n.path,r,e))}return[]},Vl.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new il(Xh.Server,t,e))},Vl.prototype.applyServerMerge=function(t,e){var n=tl.fromObject(e);return this.applyOperationToSyncPoints_(new sl(Xh.Server,t,n))},Vl.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new nl(Xh.Server,t))},Vl.prototype.applyTaggedQueryOverwrite=function(t,e,n){var r=this.queryKeyForTag_(n);if(null==r)return[];var i=Vl.parseQueryKey_(r),o=i.path,s=i.queryId,a=Ku.relativePath(o,t),u=new il(Xh.forServerTaggedQuery(s),a,e);return this.applyTaggedOperation_(o,u)},Vl.prototype.applyTaggedQueryMerge=function(t,e,n){var r=this.queryKeyForTag_(n);if(r){var i=Vl.parseQueryKey_(r),o=i.path,s=i.queryId,a=Ku.relativePath(o,t),u=tl.fromObject(e),c=new sl(Xh.forServerTaggedQuery(s),a,u);return this.applyTaggedOperation_(o,c)}return[]},Vl.prototype.applyTaggedListenComplete=function(t,e){var n=this.queryKeyForTag_(e);if(n){var r=Vl.parseQueryKey_(n),i=r.path,o=r.queryId,s=Ku.relativePath(i,t),a=new nl(Xh.forServerTaggedQuery(o),s);return this.applyTaggedOperation_(i,a)}return[]},Vl.prototype.addEventRegistration=function(t,e){var r=t.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,function(t,e){var n=Ku.relativePath(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()});var n,s=this.syncPointTree_.get(r);s?(o=o||s.hasCompleteView(),i=i||s.getCompleteServerCache(Ku.Empty)):(s=new Ol,this.syncPointTree_=this.syncPointTree_.set(r,s)),null!=i?n=!0:(n=!1,i=hh.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=e.getCompleteServerCache(Ku.Empty);n&&(i=i.updateImmediateChild(t,n))}));var a,u,c=s.viewExistsForQuery(t);c||t.getQueryParams().loadsAllData()||(a=Vl.makeQueryKey_(t),Gs(!this.queryToTagMap.has(a),"View does not exist, but we have a tag"),u=Vl.getNextQueryTag_(),this.queryToTagMap.set(a,u),this.tagToQueryMap.set(u,a));var h,l=this.pendingWriteTree_.childWrites(r),f=s.addEventRegistration(t,e,l,i,n);return c||o||(h=s.viewForQuery(t),f=f.concat(this.setupListener_(t,h))),f},Vl.prototype.removeEventRegistration=function(t,e,n){var r=this,i=t.path,o=this.syncPointTree_.get(i),s=[];if(o&&("default"===t.queryIdentifier()||o.viewExistsForQuery(t))){var a=o.removeEventRegistration(t,e,n);o.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(i));var u=a.removed,s=a.events,c=-1!==u.findIndex(function(t){return t.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(i,function(t,e){return e.hasCompleteView()});if(c&&!h){var l=this.syncPointTree_.subtree(i);if(!l.isEmpty())for(var f=this.collectDistinctViewsForSubTree_(l),p=0;p<f.length;++p){var d=f[p],v=d.getQuery(),y=this.createListenerForView_(d);this.listenProvider_.startListening(Vl.queryForListening_(v),this.tagForQuery_(v),y.hashFn,y.onComplete)}}!h&&0<u.length&&!n&&(c?this.listenProvider_.stopListening(Vl.queryForListening_(t),null):u.forEach(function(t){var e=r.queryToTagMap.get(Vl.makeQueryKey_(t));r.listenProvider_.stopListening(Vl.queryForListening_(t),e)})),this.removeTags_(u)}return s},Vl.prototype.calcCompleteEventCache=function(i,t){var e=this.pendingWriteTree_,n=this.syncPointTree_.findOnPath(i,function(t,e){var n=Ku.relativePath(t,i),r=e.getCompleteServerCache(n);if(r)return r});return e.calcCompleteEventCache(i,n,t,!0)},Vl.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),ju(n,function(t,e){r=r.concat(e)}),r})},Vl.prototype.removeTags_=function(t){for(var e=0;e<t.length;++e){var n,r,i=t[e];i.getQueryParams().loadsAllData()||(n=Vl.makeQueryKey_(i),r=this.queryToTagMap.get(n),this.queryToTagMap.delete(n),this.tagToQueryMap.delete(r))}},Vl.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},Vl.prototype.setupListener_=function(t,e){var n=t.path,r=this.tagForQuery_(t),i=this.createListenerForView_(e),o=this.listenProvider_.startListening(Vl.queryForListening_(t),r,i.hashFn,i.onComplete),s=this.syncPointTree_.subtree(n);if(r)Gs(!s.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var a=s.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),ju(n,function(t,e){r=r.concat(e)}),r}),u=0;u<a.length;++u){var c=a[u];this.listenProvider_.stopListening(Vl.queryForListening_(c),this.tagForQuery_(c))}return o},Vl.prototype.createListenerForView_=function(t){var n=this,r=t.getQuery(),i=this.tagForQuery_(r);return{hashFn:function(){return(t.getServerCache()||hh.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return i?n.applyTaggedListenComplete(r.path,i):n.applyListenComplete(r.path);var e=function(t){var e="Unknown Error";"too_big"===t?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?e="Client doesn't have permission to access the desired data.":"unavailable"===t&&(e="The service is unavailable");var n=new Error(t+" at "+r.path.toString()+": "+e);return n.code=t.toUpperCase(),n}(t);return n.removeEventRegistration(r,null,e)}}},Vl.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},Vl.parseQueryKey_=function(t){var e=t.indexOf("$");return Gs(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ku(t.substr(0,e))}},Vl.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},Vl.prototype.tagForQuery_=function(t){var e=Vl.makeQueryKey_(t);return this.queryToTagMap.get(e)},Vl.getNextQueryTag_=function(){return Vl.nextQueryTag_++},Vl.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);Gs(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},Vl.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(Ku.Empty))},Vl.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(Ku.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(Ku.Empty));var o,s,a=[],u=t.path.getFront(),c=t.operationForChild(u),h=e.children.get(u);return h&&c&&(o=n?n.getImmediateChild(u):null,s=r.child(u),a=a.concat(this.applyOperationHelper_(c,h,o,s))),i&&(a=a.concat(i.applyOperation(t,r,n))),a},Vl.prototype.applyOperationDescendantsHelper_=function(o,t,s,a){var u=this,e=t.get(Ku.Empty);null==s&&null!=e&&(s=e.getCompleteServerCache(Ku.Empty));var c=[];return t.children.inorderTraversal(function(t,e){var n=s?s.getImmediateChild(t):null,r=a.child(t),i=o.operationForChild(t);i&&(c=c.concat(u.applyOperationDescendantsHelper_(i,e,n,r)))}),e&&(c=c.concat(e.applyOperation(o,a,s))),c},Vl.nextQueryTag_=1,Vl);function Vl(t){this.listenProvider_=t,this.syncPointTree_=tl.Empty,this.pendingWriteTree_=new xl,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}var ql=(Bl.prototype.getNode=function(t){return this.rootNode_.getChild(t)},Bl.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},Bl);function Bl(){this.rootNode_=hh.EMPTY_NODE}var Wl=(Hl.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),va(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},Hl.prototype.get=function(){return Xs(this.counters_)},Hl);function Hl(){this.counters_={}}var Kl=(Gl.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Wl),this.collections_[e]},Gl.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},Gl.collections_={},Gl.reporters_={},Gl);function Gl(){}var zl=(Ql.prototype.get=function(){var t=this.collection_.get(),n=Ms({},t);return this.last_&&ju(this.last_,function(t,e){n[t]=n[t]-e}),this.last_=t,n},Ql);function Ql(t){this.collection_=t,this.last_=null}var Xl=(Yl.prototype.includeStat=function(t){this.statsToReport_[t]=!0},Yl.prototype.reportStats_=function(){var n=this,t=this.statsListener_.get(),r={},i=!1;ju(t,function(t,e){0<e&&va(n.statsToReport_,t)&&(r[t]=e,i=!0)}),i&&this.server_.reportStats(r),Bu(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},Yl);function Yl(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new zl(t);var n=1e4+2e4*Math.random();Bu(this.reportStats_.bind(this),Math.floor(n))}var Jl=($l.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new Zl(i)),e.add(r)}e&&this.eventLists_.push(e)},$l.prototype.raiseEventsAtPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.equals(e)})},$l.prototype.raiseEventsForChangedPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.contains(e)||e.contains(t)})},$l.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},$l);function $l(){this.eventLists_=[],this.recursionDepth_=0}var Zl=(tf.prototype.add=function(t){this.events_.push(t)},tf.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e,n=this.events_[t];null!==n&&(this.events_[t]=null,e=n.getEventRunner(),Du&&mu("event: "+n.toString()),qu(e))}},tf.prototype.getPath=function(){return this.path_},tf);function tf(t){this.path_=t,this.events_=[]}var ef=(nf.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=qs(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},nf.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},nf.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},nf.prototype.validateEventType_=function(e){Gs(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)},nf);function nf(t){this.allowedEvents_=t,this.listeners_={},Gs(Array.isArray(t)&&0<t.length,"Requires a non-empty array")}var rf,of=(Ls(sf,rf=ef),sf.getInstance=function(){return new sf},sf.prototype.getInitialEvent=function(t){return Gs("visible"===t,"Unknown event type: "+t),[this.visible_]},sf);function sf(){var e,t,n=rf.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),n.visible_=!0,t&&document.addEventListener(t,function(){var t=!document[e];t!==n.visible_&&(n.visible_=t,n.trigger("visible",t))},!1),n}var af,uf=(Ls(cf,af=ef),cf.getInstance=function(){return new cf},cf.prototype.getInitialEvent=function(t){return Gs("online"===t,"Unknown event type: "+t),[this.online_]},cf.prototype.currentlyOnline=function(){return this.online_},cf);function cf(){var t=af.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||ta()||(window.addEventListener("online",function(){t.online_||(t.online_=!0,t.trigger("online",!0))},!1),window.addEventListener("offline",function(){t.online_&&(t.online_=!1,t.trigger("online",!1))},!1)),t}var hf=(lf.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},lf.prototype.handleResponse=function(t,e){var r=this;this.pendingResponses[t]=e;for(var n=function(){var e=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var t=function(t){e[t]&&qu(function(){r.onMessage_(e[t])})},n=0;n<e.length;++n)t(n);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==n(););},lf);function lf(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}var ff=(pf.prototype.open=function(t,e){var n,r,i,s=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new hf(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){s.log_("Timed out trying to connect."),s.onClosed_(),s.connectTimeoutTimer_=null},Math.floor(3e4)),n=function(){var t,e;s.isClosed_||(s.scriptTagHolder=new df(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Vs(t,5),r=n[0],i=n[1],o=n[2];if(n[3],n[4],s.incrementIncomingBytes_(t),s.scriptTagHolder)if(s.connectTimeoutTimer_&&(clearTimeout(s.connectTimeoutTimer_),s.connectTimeoutTimer_=null),s.everConnected_=!0,"start"===r)s.id=i,s.password=o;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);i?(s.scriptTagHolder.sendNewPolls=!1,s.myPacketOrderer.closeAfter(i,function(){s.onClosed_()})):s.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Vs(t,2),r=n[0],i=n[1];s.incrementIncomingBytes_(t),s.myPacketOrderer.handleResponse(r,i)},function(){s.onClosed_()},s.urlFn),(t={start:"t"}).ser=Math.floor(1e8*Math.random()),s.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=s.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",s.transportSessionId&&(t.s=s.transportSessionId),s.lastSessionId&&(t.ls=s.lastSessionId),s.applicationId&&(t.p=s.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(Xu)&&(t.r="f"),e=s.urlFn(t),s.log_("Connecting via long-poll to "+e),s.scriptTagHolder.addTag(e,function(){}))},"complete"===document.readyState?n():(r=!1,i=function(){document.body?r||(r=!0,n()):setTimeout(i,Math.floor(10))},document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&i()}),window.attachEvent("onload",i)))},pf.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},pf.forceAllow=function(){pf.forceAllow_=!0},pf.forceDisallow=function(){pf.forceDisallow_=!0},pf.isAvailable=function(){return!!pf.forceAllow_||!(pf.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},pf.prototype.markConnectionHealthy=function(){},pf.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},pf.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},pf.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},pf.prototype.send=function(t){var e=pa(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n,r=Cu((n=Ws(e),Qs.encodeByteArray(n,!0)),1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},pf.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},pf.prototype.incrementIncomingBytes_=function(t){var e=pa(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},pf);function pf(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=bu(t),this.stats_=Kl.getCollection(e),this.urlFn=function(t){return e.connectionURL(Ju,t)}}var df=(vf.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||mu("No IE domain setting required")}catch(t){var n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},vf.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},vf.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},vf.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(0<this.pendingSegs.length?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;0<this.pendingSegs.length&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift(),n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d;r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},vf.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},vf.prototype.addLongPollTag_=function(t,e){var n=this;function r(){n.outstandingRequests.delete(e),n.newRequest_()}this.outstandingRequests.add(e);var i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},vf.prototype.addTag=function(t,n){var r=this;setTimeout(function(){try{if(!r.sendNewPolls)return;var e=r.myIFrame.doc.createElement("script");e.type="text/javascript",e.async=!0,e.src=t,e.onload=e.onreadystatechange=function(){var t=e.readyState;t&&"loaded"!==t&&"complete"!==t||(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),n())},e.onerror=function(){mu("Long-poll script failed to load: "+t),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(e)}catch(t){}},Math.floor(1))},vf);function vf(t,e,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=Pu(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=vf.createIFrame_();var i="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(i='<script>document.domain="'+document.domain+'";<\/script>');var o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(t){mu("frame writing exception"),t.stack&&mu(t.stack),mu(t)}}var yf="",gf=null;"undefined"!=typeof MozWebSocket?gf=MozWebSocket:"undefined"!=typeof WebSocket&&(gf=WebSocket);var mf=(bf.connectionURL_=function(t,e,n){var r={v:"5"};return"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(Xu)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(Yu,r)},bf.prototype.open=function(t,e){var n,r,i,o,s=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Au.set("previous_websocket_failure",!0);try{na()?(n=Ks.NODE_ADMIN?"AdminNode":"Node",r={headers:{"User-Agent":"Firebase/5/"+yf+"/"+process.platform+"/"+n,"X-Firebase-GMPID":this.applicationId||""}},i=process.env,(o=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy)&&(r.proxy={origin:o})):r={headers:{"X-Firebase-GMPID":this.applicationId||""}},this.mySock=new gf(this.connURL,[],r)}catch(t){this.log_("Error instantiating WebSocket.");var a=t.message||t.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){s.log_("Websocket connected."),s.everConnected_=!0},this.mySock.onclose=function(){s.log_("Websocket connection was disconnected."),s.mySock=null,s.onClosed_()},this.mySock.onmessage=function(t){s.handleIncomingFrame(t)},this.mySock.onerror=function(t){s.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&s.log_(e),s.onClosed_()}},bf.prototype.start=function(){},bf.forceDisallow=function(){bf.forceDisallow_=!0},bf.isAvailable=function(){var t,e=!1;return"undefined"==typeof navigator||!navigator.userAgent||(t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/))&&1<t.length&&parseFloat(t[1])<4.4&&(e=!0),!e&&null!==gf&&!bf.forceDisallow_},bf.previouslyFailed=function(){return Au.isInMemoryStorage||!0===Au.get("previous_websocket_failure")},bf.prototype.markConnectionHealthy=function(){Au.remove("previous_websocket_failure")},bf.prototype.appendFrame_=function(t){var e,n;this.frames.push(t),this.frames.length===this.totalFrames&&(e=this.frames.join(""),this.frames=null,n=fa(e),this.onMessage(n))},bf.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},bf.prototype.extractFrameCount_=function(t){if(Gs(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},bf.prototype.handleIncomingFrame=function(t){var e,n;null!==this.mySock&&(e=t.data,this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames?this.appendFrame_(e):null!==(n=this.extractFrameCount_(e))&&this.appendFrame_(n))},bf.prototype.send=function(t){this.resetKeepAlive();var e=pa(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=Cu(e,16384);1<n.length&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},bf.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},bf.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},bf.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},bf.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},bf.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},bf.responsesRequiredToBeHealthy=2,bf.healthyTimeout=3e4,bf);function bf(t,e,n,r,i){this.connId=t,this.applicationId=n,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=bu(this.connId),this.stats_=Kl.getCollection(e),this.connURL=bf.connectionURL_(e,r,i)}var wf=(Object.defineProperty(_f,"ALL_TRANSPORTS",{get:function(){return[ff,mf]},enumerable:!1,configurable:!0}),_f.prototype.initTransports_=function(t){var e,n,r=mf&&mf.isAvailable(),i=r&&!mf.previouslyFailed();if(t.webSocketOnly&&(r||Eu("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[mf];else{var o=this.transports_=[];try{for(var s=js(_f.ALL_TRANSPORTS),a=s.next();!a.done;a=s.next()){var u=a.value;u&&u.isAvailable()&&o.push(u)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}}},_f.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},_f.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},_f);function _f(t){this.initTransports_(t)}var Ef=(If.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;0<i&&(this.healthyTimeout_=Bu(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&102400<t.conn_.bytesReceived?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&10240<t.conn_.bytesSent?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},If.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},If.prototype.disconnReceiver_=function(e){var n=this;return function(t){e===n.conn_?n.onConnectionLost_(t):e===n.secondaryConn_?(n.log_("Secondary connection lost."),n.onSecondaryConnectionLost_()):n.log_("closing an old connection")}},If.prototype.connReceiver_=function(e){var n=this;return function(t){2!==n.state_&&(e===n.rx_?n.onPrimaryMessageReceived_(t):e===n.secondaryConn_?n.onSecondaryMessageReceived_(t):n.log_("message on old connection"))}},If.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},If.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},If.prototype.onSecondaryControl_=function(t){var e;"t"in t&&("a"===(e=t.t)?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_()))},If.prototype.onSecondaryMessageReceived_=function(t){var e=Su("t",t),n=Su("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},If.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},If.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},If.prototype.onPrimaryMessageReceived_=function(t){var e=Su("t",t),n=Su("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},If.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},If.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},If.prototype.onControl_=function(t){var e=Su("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?wu("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):wu("Unknown control packet command: "+e)}},If.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&Eu("Protocol version mismatch detected"),this.tryStartUpgrade_())},If.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},If.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Bu(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},If.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},If.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Bu(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},If.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},If.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},If.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Au.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},If.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},If.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},If.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},If.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},If);function If(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=bu("c:"+this.id+":"),this.transportManager_=new wf(e),this.log_("Connection created"),this.start_()}var Tf=(Sf.prototype.put=function(t,e,n,r){},Sf.prototype.merge=function(t,e,n,r){},Sf.prototype.refreshAuthToken=function(t){},Sf.prototype.onDisconnectPut=function(t,e,n){},Sf.prototype.onDisconnectMerge=function(t,e,n){},Sf.prototype.onDisconnectCancel=function(t,e){},Sf.prototype.reportStats=function(t){},Sf);function Sf(){}var Cf,Nf=(Ls(Af,Cf=Tf),Af.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(pa(i)),Gs(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},Af.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Gs(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Gs(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)},Af.prototype.sendListen_=function(r){var i=this,o=r.query,s=o.path.toString(),a=o.queryIdentifier();this.log_("Listen on "+s+" for "+a);var t={p:s};r.tag&&(t.q=o.queryObject(),t.t=r.tag),t.h=r.hashFn(),this.sendRequest("q",t,function(t){var e=t.d,n=t.s;Af.warnOnListenWarnings_(e,o),(i.listens.get(s)&&i.listens.get(s).get(a))===r&&(i.log_("listen response",t),"ok"!==n&&i.removeListen_(s,a),r.onComplete&&r.onComplete(n,e))})},Af.warnOnListenWarnings_=function(t,e){var n;t&&"object"==typeof t&&va(t,"w")&&(n=ya(t,"w"),Array.isArray(n)&&~n.indexOf("no_index")&&Eu("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+('".indexOn": "'+e.getQueryParams().getIndex().toString()+'"')+" at "+e.path.toString()+" to your security rules for better performance."))},Af.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},Af.prototype.reduceReconnectDelayIfAdminCredential_=function(t){var e;(t&&40===t.length||"object"==typeof(e=da(t).claims)&&!0===e.admin)&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},Af.prototype.tryAuth=function(){var t,r,e,n,i=this;this.connected_&&this.authToken_&&(e=(t=da(r=this.authToken_).claims)&&"object"==typeof t&&t.hasOwnProperty("iat")?"auth":"gauth",n={cred:r},null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(e,n,function(t){var e=t.s,n=t.d||"error";i.authToken_===r&&("ok"===e?i.invalidAuthTokenCount_=0:i.onAuthRevoked_(e,n))}))},Af.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Gs(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},Af.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},Af.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},Af.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},Af.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},Af.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},Af.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},Af.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},Af.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+e)},Af.prototype.sendPut_=function(e){var n=this,r=this.outstandingPuts_[e].action,t=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,t,function(t){n.log_(r+" response",t),delete n.outstandingPuts_[e],n.outstandingPutCount_--,0===n.outstandingPutCount_&&(n.outstandingPuts_=[]),i&&i(t.s,t.d)})},Af.prototype.reportStats=function(t){var e,n=this;this.connected_&&(e={c:t},this.log_("reportStats",e),this.sendRequest("s",e,function(t){var e;"ok"!==t.s&&(e=t.d,n.log_("reportStats","Error sending stats: "+e))}))},Af.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+pa(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},Af.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):wu("Unrecognized action received from server: "+pa(t)+"\nAre you using the latest client?")},Af.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},Af.prototype.scheduleConnect_=function(t){var e=this;Gs(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},Af.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},Af.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},Af.prototype.onRealtimeDisconnect_=function(){var t,e;this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()&&(this.visible_?this.lastConnectionEstablishedTime_&&(3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime()),t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t),e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)),this.onConnectStatus_(!1)},Af.prototype.establishConnection_=function(){var e,n,r,i,o,s,a,u,c,t;this.shouldReconnect_()&&(this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Af.nextConnectionId_++,s=(o=this).lastSessionId,a=!1,u=null,c=function(){u?u.close():(a=!0,r())},this.realtime_={close:c,sendRequest:function(t){Gs(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)}},t=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(t).then(function(t){a?mu("getToken() completed but was canceled"):(mu("getToken() completed. Creating connection."),o.authToken_=t&&t.accessToken,u=new Ef(i,o.repoInfo_,o.applicationId_,e,n,r,function(t){Eu(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},s))}).then(null,function(t){o.log_("Failed to get token: "+t),a||c()}))},Af.prototype.interrupt=function(t){mu("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},Af.prototype.resume=function(t){mu("Resuming connection for reason: "+t),delete this.interruptReasons_[t],ga(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},Af.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},Af.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},Af.prototype.onListenRevoked_=function(t,e){var n=e?e.map(function(t){return Uu(t)}).join("$"):"default",r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},Af.prototype.removeListen_=function(t,e){var n,r,i=new Ku(t).toString();return this.listens.has(i)?(r=(n=this.listens.get(i)).get(e),n.delete(e),0===n.size&&this.listens.delete(i)):r=void 0,r},Af.prototype.onAuthRevoked_=function(t,e){mu("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},Af.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},Af.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=js(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,js(s.values())),u=a.next();!u.done;u=a.next()){var c=u.value;this.sendListen_(c)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}},Af.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+yf.replace(/\./g,"-")]=1,ta()?t["framework.cordova"]=1:ea()&&(t["framework.reactnative"]=1),this.reportStats(t)},Af.prototype.shouldReconnect_=function(){var t=uf.getInstance().currentlyOnline();return ga(this.interruptReasons_)&&t},Af.nextPersistentConnectionId_=0,Af.nextConnectionId_=0,Af);function Af(t,e,n,r,i,o,s){var a=Cf.call(this)||this;if(a.repoInfo_=t,a.applicationId_=e,a.onDataUpdate_=n,a.onConnectStatus_=r,a.onServerInfoUpdate_=i,a.authTokenProvider_=o,a.authOverride_=s,a.id=Af.nextPersistentConnectionId_++,a.log_=bu("p:"+a.id+":"),a.interruptReasons_={},a.listens=new Map,a.outstandingPuts_=[],a.outstandingPutCount_=0,a.onDisconnectRequestQueue_=[],a.connected_=!1,a.reconnectDelay_=1e3,a.maxReconnectDelay_=3e5,a.securityDebugCallback_=null,a.lastSessionId=null,a.establishConnectionTimer_=null,a.visible_=!1,a.requestCBHash_={},a.requestNumber_=0,a.realtime_=null,a.authToken_=null,a.forceTokenRefresh_=!1,a.invalidAuthTokenCount_=0,a.firstConnection_=!0,a.lastConnectionAttemptTime_=null,a.lastConnectionEstablishedTime_=null,s&&!na())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return a.scheduleConnect_(0),of.getInstance().on("visible",a.onVisible_,a),-1===t.host.indexOf("fblocal")&&uf.getInstance().on("online",a.onOnline_,a),a}var kf,Of=(Ls(Pf,kf=Tf),Pf.prototype.reportStats=function(t){throw new Error("Method not implemented.")},Pf.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Gs(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},Pf.prototype.listen=function(t,e,r,i){var o=this,s=t.path.toString();this.log_("Listen called for "+s+" "+t.queryIdentifier());var a=Pf.getListenId_(t,r),u={};this.listens_[a]=u;var n=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(s+".json",n,function(t,e){var n=e;404===t&&(t=n=null),null===t&&o.onDataUpdate_(s,n,!1,r),ya(o.listens_,a)===u&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},Pf.prototype.unlisten=function(t,e){var n=Pf.getListenId_(t,e);delete this.listens_[n]},Pf.prototype.refreshAuthToken=function(t){},Pf.prototype.restRequest_=function(i,o,s){var a=this;void 0===o&&(o={}),o.format="export",this.authTokenProvider_.getToken(!1).then(function(t){var e=t&&t.accessToken;e&&(o.auth=e);var n=(a.repoInfo_.secure?"https://":"http://")+a.repoInfo_.host+i+"?ns="+a.repoInfo_.namespace+function(){for(var n=[],t=function(e,t){Array.isArray(t)?t.forEach(function(t){n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}):n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))},e=0,r=Object.entries(o);e<r.length;e++){var i=r[e];t(i[0],i[1])}return n.length?"&"+n.join("&"):""}();a.log_("Sending REST request for "+n);var r=new XMLHttpRequest;r.onreadystatechange=function(){if(s&&4===r.readyState){a.log_("REST Response for "+n+" received. status:",r.status,"response:",r.responseText);var t=null;if(200<=r.status&&r.status<300){try{t=fa(r.responseText)}catch(t){Eu("Failed to parse JSON response for "+n+": "+r.responseText)}s(null,t)}else 401!==r.status&&404!==r.status&&Eu("Got unsuccessful REST response for "+n+" Status: "+r.status),s(r.status);s=null}},r.open("GET",n,!0),r.send()})},Pf);function Pf(t,e,n){var r=kf.call(this)||this;return r.repoInfo_=t,r.onDataUpdate_=e,r.authTokenProvider_=n,r.log_=bu("p:rest:"),r.listens_={},r}var Rf="repo_interrupt",Df=(xf.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},xf.prototype.name=function(){return this.repoInfo_.namespace},xf.prototype.serverTime=function(){var t=this.infoData_.getNode(new Ku(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},xf.prototype.generateServerValues=function(){return(t={timestamp:this.serverTime()}).timestamp=t.timestamp||(new Date).getTime(),t;var t},xf.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new Ku(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o,s,a,u,c=[],h=i;0<(c=r?n?(o=ma(e,function(t){return yh(t)}),this.serverSyncTree_.applyTaggedQueryMerge(i,o,r)):(s=yh(e),this.serverSyncTree_.applyTaggedQueryOverwrite(i,s,r)):n?(a=ma(e,function(t){return yh(t)}),this.serverSyncTree_.applyServerMerge(i,a)):(u=yh(e),this.serverSyncTree_.applyServerOverwrite(i,u))).length&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,c)},xf.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},xf.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},xf.prototype.onServerInfoUpdate_=function(t){var n=this;ju(t,function(t,e){n.updateInfo_(t,e)})},xf.prototype.updateInfo_=function(t,e){var n=new Ku("/.info/"+t),r=yh(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},xf.prototype.getNextWriteId_=function(){return this.nextWriteId_++},xf.prototype.setWithPriority=function(i,t,e,o){var s=this;this.log_("set",{path:i.toString(),value:t,priority:e});var n=this.generateServerValues(),r=yh(t,e),a=Vh(r,this.serverSyncTree_.calcCompleteEventCache(i),n),u=this.getNextWriteId_(),c=this.serverSyncTree_.applyUserOverwrite(i,a,u,!0);this.eventQueue_.queueEvents(c),this.server_.put(i.toString(),r.val(!0),function(t,e){var n="ok"===t;n||Eu("set at "+i+" failed: "+t);var r=s.serverSyncTree_.ackUserWrite(u,!n);s.eventQueue_.raiseEventsForChangedPath(i,r),s.callOnCompleteCallback(o,t,e)});var h=this.abortTransactions_(i);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},xf.prototype.update=function(o,t,s){var a=this;this.log_("update",{path:o.toString(),value:t});var u,e,n=!0,r=this.generateServerValues(),i={};ju(t,function(t,e){n=!1,i[t]=jh(o.child(t),yh(e),a.serverSyncTree_,r)}),n?(mu("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(s,"ok")):(u=this.getNextWriteId_(),e=this.serverSyncTree_.applyUserMerge(o,i,u),this.eventQueue_.queueEvents(e),this.server_.merge(o.toString(),t,function(t,e){var n="ok"===t;n||Eu("update at "+o+" failed: "+t);var r=a.serverSyncTree_.ackUserWrite(u,!n),i=0<r.length?a.rerunTransactions_(o):o;a.eventQueue_.raiseEventsForChangedPath(i,r),a.callOnCompleteCallback(s,t,e)}),ju(t,function(t){var e=a.abortTransactions_(o.child(t));a.rerunTransactions_(e)}),this.eventQueue_.raiseEventsForChangedPath(o,[]))},xf.prototype.runOnDisconnectEvents_=function(){var r=this;this.log_("onDisconnectEvents");var i=this.generateServerValues(),o=new zh;this.onDisconnect_.forEachTree(Ku.Empty,function(t,e){var n=jh(t,e,r.serverSyncTree_,i);o.remember(t,n)});var s=[];o.forEachTree(Ku.Empty,function(t,e){s=s.concat(r.serverSyncTree_.applyServerOverwrite(t,e));var n=r.abortTransactions_(t);r.rerunTransactions_(n)}),this.onDisconnect_=new zh,this.eventQueue_.raiseEventsForChangedPath(Ku.Empty,s)},xf.prototype.onDisconnectCancel=function(n,r){var i=this;this.server_.onDisconnectCancel(n.toString(),function(t,e){"ok"===t&&i.onDisconnect_.forget(n),i.callOnCompleteCallback(r,t,e)})},xf.prototype.onDisconnectSet=function(n,t,r){var i=this,o=yh(t);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},xf.prototype.onDisconnectSetWithPriority=function(n,t,e,r){var i=this,o=yh(t,e);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},xf.prototype.onDisconnectUpdate=function(r,n,i){var o=this;if(ga(n))return mu("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(i,"ok");this.server_.onDisconnectMerge(r.toString(),n,function(t,e){"ok"===t&&ju(n,function(t,e){var n=yh(e);o.onDisconnect_.remember(r.child(t),n)}),o.callOnCompleteCallback(i,t,e)})},xf.prototype.addEventCallbackForQuery=function(t,e){var n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e);this.eventQueue_.raiseEventsAtPath(t.path,n)},xf.prototype.removeEventCallbackForQuery=function(t,e){var n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e);this.eventQueue_.raiseEventsAtPath(t.path,n)},xf.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(Rf)},xf.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(Rf)},xf.prototype.stats=function(t){var e,i;void 0===t&&(t=!1),"undefined"!=typeof console&&(e=t?(this.statsListener_||(this.statsListener_=new zl(this.stats_)),this.statsListener_.get()):this.stats_.get(),i=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0),ju(e,function(t,e){for(var n=t,r=t.length;r<i+2;r++)n+=" ";console.log(n+e)}))},xf.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},xf.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),mu.apply(void 0,qs([n],t))},xf.prototype.callOnCompleteCallback=function(r,i,o){r&&qu(function(){var t,e,n;"ok"===i?r(null):(e=t=(i||"error").toUpperCase(),o&&(e+=": "+o),(n=new Error(e)).code=t,r(n))})},Object.defineProperty(xf.prototype,"database",{get:function(){return this.__database||(this.__database=new ep(this))},enumerable:!1,configurable:!0}),xf);function xf(t,e,n,r){var s=this;if(this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Jl,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new zh,this.persistentConnection_=null,this.stats_=Kl.getCollection(t),e||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))this.server_=new Of(this.repoInfo_,this.onDataUpdate_.bind(this),r),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var i=n.options.databaseAuthVariableOverride;if(null!=i){if("object"!=typeof i)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{pa(i)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new Nf(this.repoInfo_,n.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),r,i),this.server_=this.persistentConnection_}r.addTokenChangeListener(function(t){s.server_.refreshAuthToken(t)}),this.statsReporter_=Kl.getOrCreateReporter(t,function(){return new Xl(s.stats_,s.server_)}),this.transactionsInit_(),this.infoData_=new ql,this.infoSyncTree_=new jl({startListening:function(t,e,n,r){var i=[],o=s.infoData_.getNode(t.path);return o.isEmpty()||(i=s.infoSyncTree_.applyServerOverwrite(t.path,o),setTimeout(function(){r("ok")},0)),i},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new jl({startListening:function(r,t,e,i){return s.server_.listen(r,e,t,function(t,e){var n=i(t,e);s.eventQueue_.raiseEventsForChangedPath(r.path,n)}),[]},stopListening:function(t,e){s.server_.unlisten(t,e)}})}var Lf=(Mf.prototype.getStartPost=function(){return this.startPost_},Mf.prototype.getEndPost=function(){return this.endPost_},Mf.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},Mf.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Tc(e,n))||(n=hh.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},Mf.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=hh.EMPTY_NODE);var r=(r=e.withIndex(this.index_)).updatePriority(hh.EMPTY_NODE),i=this;return e.forEachChild(Wc,function(t,e){i.matches(new Tc(t,e))||(r=r.updateImmediateChild(t,hh.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},Mf.prototype.updatePriority=function(t,e){return t},Mf.prototype.filtersNodes=function(){return!0},Mf.prototype.getIndexedFilter=function(){return this.indexedFilter_},Mf.prototype.getIndex=function(){return this.index_},Mf.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},Mf.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},Mf);function Mf(t){this.indexedFilter_=new dl(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Mf.getStartPost_(t),this.endPost_=Mf.getEndPost_(t)}var Ff=(Uf.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Tc(e,n))||(n=hh.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},Uf.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=hh.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=hh.EMPTY_NODE.withIndex(this.index_);for(var i=void 0,i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_),o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(hh.EMPTY_NODE);var a,u=void 0,c=void 0,h=void 0;i=void 0,h=this.reverse_?(i=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost(),a=this.index_.getCompare(),function(t,e){return a(e,t)}):(i=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),this.index_.getCompare()),o=0;for(var l=!1;i.hasNext();)s=i.getNext(),!l&&h(u,s)<=0&&(l=!0),l&&o<this.limit_&&h(s,c)<=0?o++:r=r.updateImmediateChild(s.name,hh.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},Uf.prototype.updatePriority=function(t,e){return t},Uf.prototype.filtersNodes=function(){return!0},Uf.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},Uf.prototype.getIndex=function(){return this.index_},Uf.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o,s;s=this.reverse_?(o=this.index_.getCompare(),function(t,e){return o(e,t)}):this.index_.getCompare();var a=t;Gs(a.numChildren()===this.limit_,"");var u=new Tc(e,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(a.hasChild(e)){for(var l=a.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,u);if(h&&!n.isEmpty()&&0<=p)return null!=i&&i.trackChildChange(fl.childChangedChange(e,n,l)),a.updateImmediateChild(e,n);null!=i&&i.trackChildChange(fl.childRemovedChange(e,l));var d=a.updateImmediateChild(e,hh.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(fl.childAddedChange(f.name,f.node)),d.updateImmediateChild(f.name,f.node)):d}return!n.isEmpty()&&h&&0<=s(c,u)?(null!=i&&(i.trackChildChange(fl.childRemovedChange(c.name,c.node)),i.trackChildChange(fl.childAddedChange(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(c.name,hh.EMPTY_NODE)):t},Uf);function Uf(t){this.rangedFilter_=new Lf(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}var jf=(Vf.prototype.hasStart=function(){return this.startSet_},Vf.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===Vf.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},Vf.prototype.getIndexStartValue=function(){return Gs(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},Vf.prototype.getIndexStartName=function(){return Gs(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Lu},Vf.prototype.hasEnd=function(){return this.endSet_},Vf.prototype.getIndexEndValue=function(){return Gs(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},Vf.prototype.getIndexEndName=function(){return Gs(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Mu},Vf.prototype.hasLimit=function(){return this.limitSet_},Vf.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},Vf.prototype.getLimit=function(){return Gs(this.limitSet_,"Only valid if limit has been set"),this.limit_},Vf.prototype.getIndex=function(){return this.index_},Vf.prototype.copy_=function(){var t=new Vf;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},Vf.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},Vf.prototype.limitToFirst=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=Vf.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,e},Vf.prototype.limitToLast=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=Vf.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,e},Vf.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},Vf.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},Vf.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},Vf.prototype.getQueryObject=function(){var t,e=Vf.WIRE_PROTOCOL_CONSTANTS_,n={};return this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_&&(n[e.LIMIT]=this.limit_,""===(t=this.viewFrom_)&&(t=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=t),this.index_!==Wc&&(n[e.INDEX]=this.index_.toString()),n},Vf.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},Vf.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Wc},Vf.prototype.getNodeFilter=function(){return this.loadsAllData()?new dl(this.getIndex()):new(this.hasLimit()?Ff:Lf)(this)},Vf.prototype.toRestQueryStringParameters=function(){var t,e=Vf.REST_QUERY_CONSTANTS_,n={};return this.isDefault()||(t=this.index_===Wc?e.PRIORITY_INDEX:this.index_===bh?e.VALUE_INDEX:this.index_===Dc?e.KEY_INDEX:(Gs(this.index_ instanceof wh,"Unrecognized index type!"),this.index_.toString()),n[e.ORDER_BY]=pa(t),this.startSet_&&(n[e.START_AT]=pa(this.indexStartValue_),this.startNameSet_&&(n[e.START_AT]+=","+pa(this.indexStartName_))),this.endSet_&&(n[e.END_AT]=pa(this.indexEndValue_),this.endNameSet_&&(n[e.END_AT]+=","+pa(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[e.LIMIT_TO_FIRST]=this.limit_:n[e.LIMIT_TO_LAST]=this.limit_)),n},Vf.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},Vf.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},Vf.DEFAULT=new Vf,Vf);function Vf(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Wc}var qf,Bf=(Ls(Wf,qf=Dh),Wf.prototype.getKey=function(){return Sa("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},Wf.prototype.child=function(t){var e,n;return Sa("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof Ku||(null===this.path.getFront()?(n=!1,cc("Reference.child",1,e=(e=t)&&e.replace(/^\/*\.info(\/|$)/,"/"),n)):cc("Reference.child",1,t,!1)),new Wf(this.repo,this.path.child(t))},Wf.prototype.getParent=function(){Sa("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new Wf(this.repo,t)},Wf.prototype.getRoot=function(){Sa("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},Wf.prototype.databaseProp=function(){return this.repo.database},Wf.prototype.set=function(t,e){Sa("Reference.set",1,2,arguments.length),hc("Reference.set",this.path),ic("Reference.set",1,t,this.path,!1),Na("Reference.set",2,e,!0);var n=new Js;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},Wf.prototype.update=function(t,e){if(Sa("Reference.update",1,2,arguments.length),hc("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Eu("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}oc("Reference.update",1,t,this.path,!1),Na("Reference.update",2,e,!0);var i=new Js;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},Wf.prototype.setWithPriority=function(t,e,n){if(Sa("Reference.setWithPriority",2,3,arguments.length),hc("Reference.setWithPriority",this.path),ic("Reference.setWithPriority",1,t,this.path,!1),sc("Reference.setWithPriority",2,e,!1),Na("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new Js;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},Wf.prototype.remove=function(t){return Sa("Reference.remove",0,1,arguments.length),hc("Reference.remove",this.path),Na("Reference.remove",1,t,!0),this.set(null,t)},Wf.prototype.transaction=function(t,r,e){if(Sa("Reference.transaction",1,3,arguments.length),hc("Reference.transaction",this.path),Na("Reference.transaction",1,t,!1),Na("Reference.transaction",2,r,!0),function(){if(void 0!==e&&"boolean"!=typeof e)throw new Error(Ca("Reference.transaction",3,!0)+"must be a boolean.")}(),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===e&&(e=!0);var i=new Js;return"function"==typeof r&&i.promise.catch(function(){}),this.repo.startTransaction(this.path,t,function(t,e,n){t?i.reject(t):i.resolve(new mc(e,n)),"function"==typeof r&&r(t,e,n)},e),i.promise},Wf.prototype.setPriority=function(t,e){Sa("Reference.setPriority",1,2,arguments.length),hc("Reference.setPriority",this.path),sc("Reference.setPriority",1,t,!1),Na("Reference.setPriority",2,e,!0);var n=new Js;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},Wf.prototype.push=function(t,e){Sa("Reference.push",0,2,arguments.length),hc("Reference.push",this.path),ic("Reference.push",1,t,this.path,!0),Na("Reference.push",2,e,!0);var n=this.repo.serverTime(),r=Ic(n),i=this.child(r),o=this.child(r),s=null!=t?i.set(t,e).then(function(){return o}):Promise.resolve(o);return i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),"function"==typeof e&&s.catch(function(){}),i},Wf.prototype.onDisconnect=function(){return hc("Reference.onDisconnect",this.path),new yc(this.repo,this.path)},Object.defineProperty(Wf.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(Wf.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(Wf.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(Wf.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),Wf);function Wf(t,e){if(!(t instanceof Df))throw new Error("new Reference() no longer supported - use app.database().");return qf.call(this,t,e,jf.DEFAULT,!1)||this}Dh.__referenceConstructor=Bf,Ol.__referenceConstructor=Bf;function Hf(){this.children={},this.childCount=0,this.value=null}var Kf,Gf,zf=(Qf.prototype.subTree=function(t){for(var e=t instanceof Ku?t:new Ku(t),n=this,r=e.getFront();null!==r;)n=new Qf(r,n,ya(n.node_.children,r)||new Hf),r=(e=e.popFront()).getFront();return n},Qf.prototype.getValue=function(){return this.node_.value},Qf.prototype.setValue=function(t){Gs(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},Qf.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},Qf.prototype.hasChildren=function(){return 0<this.node_.childCount},Qf.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},Qf.prototype.forEachChild=function(n){var r=this;ju(this.node_.children,function(t,e){n(new Qf(t,r,e))})},Qf.prototype.forEachDescendant=function(e,t,n){t&&!n&&e(this),this.forEachChild(function(t){t.forEachDescendant(e,!0,n)}),t&&n&&e(this)},Qf.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},Qf.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild(function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)})},Qf.prototype.path=function(){return new Ku(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},Qf.prototype.name=function(){return this.name_},Qf.prototype.parent=function(){return this.parent_},Qf.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},Qf.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=va(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},Qf);function Qf(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new Hf),this.name_=t,this.parent_=e,this.node_=n}(Gf=Kf=Kf||{})[Gf.RUN=0]="RUN",Gf[Gf.SENT=1]="SENT",Gf[Gf.COMPLETED=2]="COMPLETED",Gf[Gf.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",Gf[Gf.NEEDS_ABORT=4]="NEEDS_ABORT",Df.MAX_TRANSACTION_RETRIES_=25,Df.prototype.transactionsInit_=function(){this.transactionQueueTree_=new zf},Df.prototype.startTransaction=function(t,e,n,r){function i(){}this.log_("transaction on "+t);var o=new Bf(this,t);o.on("value",i);var s={path:t,update:e,onComplete:n,status:null,order:Pu(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=this.getLatestState_(t);s.currentInputSnapshot=a;var u,c,h,l,f,p,d,v,y=s.update(a.val());void 0===y?(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&(u=new Eh(s.currentInputSnapshot,new Bf(this,s.path),Wc),s.onComplete(null,!1,u))):(vc("transaction failed: Data returned ",y,s.path),s.status=Kf.RUN,(h=(c=this.transactionQueueTree_.subTree(t)).getValue()||[]).push(s),c.setValue(h),l=void 0,"object"==typeof y&&null!==y&&va(y,".priority")?(l=ya(y,".priority"),Gs(rc(l),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):l=(this.serverSyncTree_.calcCompleteEventCache(t)||hh.EMPTY_NODE).getPriority().val(),l=l,f=this.generateServerValues(),d=Vh(p=yh(y,l),a,f),s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=d,s.currentWriteId=this.getNextWriteId_(),v=this.serverSyncTree_.applyUserOverwrite(t,d,s.currentWriteId,s.applyLocally),this.eventQueue_.raiseEventsForChangedPath(t,v),this.sendReadyTransactions_())},Df.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||hh.EMPTY_NODE},Df.prototype.sendReadyTransactions_=function(t){var e,n=this;void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()?(e=this.buildTransactionQueue_(t),Gs(0<e.length,"Sending zero length transaction queue"),e.every(function(t){return t.status===Kf.RUN})&&this.sendTransactionQueue_(t.path(),e)):t.hasChildren()&&t.forEachChild(function(t){n.sendReadyTransactions_(t)})},Df.prototype.sendTransactionQueue_=function(a,u){for(var c=this,t=u.map(function(t){return t.currentWriteId}),e=this.getLatestState_(a,t),n=e,r=e.hash(),i=0;i<u.length;i++){var o=u[i];Gs(o.status===Kf.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),o.status=Kf.SENT,o.retryCount++;var s=Ku.relativePath(a,o.path),n=n.updateChild(s,o.currentOutputSnapshotRaw)}var h=n.val(!0),l=a;this.server_.put(l.toString(),h,function(t){c.log_("transaction put response",{path:l.toString(),status:t});var e=[];if("ok"===t){for(var n,r,i,o=[],s=0;s<u.length;s++){u[s].status=Kf.COMPLETED,e=e.concat(c.serverSyncTree_.ackUserWrite(u[s].currentWriteId)),u[s].onComplete&&(n=u[s].currentOutputSnapshotResolved,r=new Bf(c,u[s].path),i=new Eh(n,r,Wc),o.push(u[s].onComplete.bind(null,null,!0,i))),u[s].unwatcher()}for(c.pruneCompletedTransactionsBelowNode_(c.transactionQueueTree_.subTree(a)),c.sendReadyTransactions_(),c.eventQueue_.raiseEventsForChangedPath(a,e),s=0;s<o.length;s++)qu(o[s])}else{if("datastale"===t)for(s=0;s<u.length;s++)u[s].status===Kf.SENT_NEEDS_ABORT?u[s].status=Kf.NEEDS_ABORT:u[s].status=Kf.RUN;else for(Eu("transaction at "+l.toString()+" failed: "+t),s=0;s<u.length;s++)u[s].status=Kf.NEEDS_ABORT,u[s].abortReason=t;c.rerunTransactions_(a)}},r)},Df.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},Df.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n,r=[],i=[],o=t.filter(function(t){return t.status===Kf.RUN}).map(function(t){return t.currentWriteId}),s=0;s<t.length;s++){var a,u,c,h,l,f,p,d,v=t[s],y=Ku.relativePath(e,v.path),g=!1,m=void 0;Gs(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),v.status===Kf.NEEDS_ABORT?(g=!0,m=v.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(v.currentWriteId,!0))):v.status===Kf.RUN&&(i=v.retryCount>=Df.MAX_TRANSACTION_RETRIES_?(g=!0,m="maxretry",i.concat(this.serverSyncTree_.ackUserWrite(v.currentWriteId,!0))):(a=this.getLatestState_(v.path,o),v.currentInputSnapshot=a,void 0!==(u=t[s].update(a.val()))?(vc("transaction failed: Data returned ",u,v.path),c=yh(u),"object"==typeof u&&null!=u&&va(u,".priority")||(c=c.updatePriority(a.getPriority())),h=v.currentWriteId,l=Vh(c,a,this.generateServerValues()),v.currentOutputSnapshotRaw=c,v.currentOutputSnapshotResolved=l,v.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(h),1),(i=i.concat(this.serverSyncTree_.applyUserOverwrite(v.path,l,v.currentWriteId,v.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(h,!0))):(g=!0,m="nodata",i.concat(this.serverSyncTree_.ackUserWrite(v.currentWriteId,!0))))),this.eventQueue_.raiseEventsForChangedPath(e,i),i=[],g&&(t[s].status=Kf.COMPLETED,n=t[s].unwatcher,setTimeout(n,Math.floor(0)),t[s].onComplete)&&("nodata"===m?(f=new Bf(this,t[s].path),p=t[s].currentInputSnapshot,d=new Eh(p,f,Wc),r.push(t[s].onComplete.bind(null,null,!1,d))):r.push(t[s].onComplete.bind(null,new Error(m),!1,null)))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),s=0;s<r.length;s++)qu(r[s]);this.sendReadyTransactions_()}},Df.prototype.getAncestorTransactionNode_=function(t){for(var e=this.transactionQueueTree_,n=t.getFront();null!==n&&null===e.getValue();)e=e.subTree(n),n=(t=t.popFront()).getFront();return e},Df.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},Df.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},Df.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==Kf.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(0<n.length?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},Df.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},Df.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)e[o].status!==Kf.SENT_NEEDS_ABORT&&(e[o].status===Kf.SENT?(Gs(i===o-1,"All SENT items should be at beginning of queue."),e[i=o].status=Kf.SENT_NEEDS_ABORT,e[o].abortReason="set"):(Gs(e[o].status===Kf.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete&&n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r),o=0;o<n.length;o++)qu(n[o])}};var Xf=(Yf.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(mu("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},Yf.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):(setTimeout(function(){return e(null)},0),this.authProvider_.get().then(function(t){return t.addAuthTokenListener(e)}))},Yf.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then(function(t){return t.removeAuthTokenListener(e)})},Yf.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Eu(t)},Yf);function Yf(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}var Jf,$f="databaseURL",Zf=(tp.getInstance=function(){return Jf=Jf||new tp},tp.prototype.interrupt=function(){var t,e,n,r;try{for(var i=js(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,js(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].interrupt()}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},tp.prototype.resume=function(){var t,e,n,r;try{for(var i=js(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,js(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].resume()}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},tp.prototype.databaseFromApp=function(t,e,n){var r=n||t.options[$f];void 0===r&&_u("Can't determine Firebase Database URL.  Be sure to include "+$f+" option when calling firebase.initializeApp().");var i=tc(r),o=i.repoInfo,s=void 0;"undefined"!=typeof process&&(s=process.env.FIREBASE_DATABASE_EMULATOR_HOST),s?o=(i=tc(r="http://"+s+"?ns="+o.namespace)).repoInfo:i.repoInfo.secure;var a=new Xf(t,e);return lc("Invalid Firebase Database URL",1,i),i.path.isEmpty()||_u("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(o,t,a).database},tp.prototype.deleteRepo=function(t){var e=ya(this.repos_,t.app.name);e&&ya(e,t.repoInfo_.toURLString())===t||_u("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},tp.prototype.createRepo=function(t,e,n){var r=ya(this.repos_,e.name);r||(r={},this.repos_[e.name]=r);var i=ya(r,t.toURLString());return i&&_u("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Df(t,this.useRestClient_,e,n),r[t.toURLString()]=i},tp.prototype.forceRestClient=function(t){this.useRestClient_=t},tp);function tp(){this.repos_={},this.useRestClient_=!1}var ep=(Object.defineProperty(np.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),np.prototype.ref=function(t){return this.checkDeleted_("ref"),Sa("database.ref",0,1,arguments.length),t instanceof Bf?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},np.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Sa(e,1,1,arguments.length);var n=tc(t);lc(e,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&_u(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},np.prototype.checkDeleted_=function(t){null===this.repo_&&_u("Cannot call "+t+" on a deleted database.")},np.prototype.goOffline=function(){Sa("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},np.prototype.goOnline=function(){Sa("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},np.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},np);function np(t){(this.repo_=t)instanceof Df||_u("Don't call new Database() directly - please use firebase.database()."),this.root_=new Bf(t,Ku.Empty),this.INTERNAL=new rp(this)}var rp=(ip.prototype.delete=function(){return Fs(this,void 0,void 0,function(){return Us(this,function(t){return this.database.checkDeleted_("delete"),Zf.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})})},ip);function ip(t){this.database=t}var op=Object.freeze({__proto__:null,forceLongPolling:function(){mf.forceDisallow(),ff.forceAllow()},forceWebSockets:function(){ff.forceDisallow()},isWebSocketsAvailable:function(){return mf.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)}}),sp=Nf;Nf.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Nf.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var ap,up,cp=Object.freeze({__proto__:null,DataConnection:sp,RealTimeConnection:Ef,hijackHash:function(i){var o=Nf.prototype.put;return Nf.prototype.put=function(t,e,n,r){void 0!==r&&(r=i()),o.call(this,t,e,n,r)},function(){Nf.prototype.put=o}},ConnectionTarget:$u,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){Zf.getInstance().forceRestClient(t)}}),hp=ep.ServerValue;function lp(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}up=(ap=Fl).SDK_VERSION,yf=up,ap.INTERNAL.registerComponent(new Oa("database",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return Zf.getInstance().databaseFromApp(n,r,e)},"PUBLIC").setServiceProps({Reference:Bf,Query:Dh,Database:ep,DataSnapshot:Eh,enableLogging:gu,INTERNAL:op,ServerValue:hp,TEST_ACCESS:cp}).setMultipleInstances(!0)),ap.registerVersion("@firebase/database","0.6.9-20206244562");var fp,pp="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},dp=dp||{},vp=pp||self;function yp(){}function gp(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function mp(t){var e=gp(t);return"array"==e||"object"==e&&"number"==typeof t.length}function bp(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var wp="closure_uid_"+(1e9*Math.random()>>>0),_p=0;function Ep(t,e,n){return t.call.apply(t.bind,arguments)}function Ip(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function Tp(t,e,n){return(Tp=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ep:Ip).apply(null,arguments)}function Sp(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var Cp=Date.now||function(){return+new Date};function Np(t,e){function n(){}n.prototype=e.prototype,t.M=e.prototype,t.prototype=new n,t.prototype.constructor=t}function Ap(){this.j=this.j,this.i=this.i}Ap.prototype.j=!1,Ap.prototype.da=function(){!this.j&&(this.j=!0,this.C(),0)&&(Object.prototype.hasOwnProperty.call(this,wp)&&this[wp]||(this[wp]=++_p))},Ap.prototype.C=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var kp=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Op=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Pp(){return Array.prototype.concat.apply([],arguments)}function Rp(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Dp(t){return/^[\s\xa0]*$/.test(t)}var xp,Lp=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Mp(t,e){return-1!=t.indexOf(e)}function Fp(t,e){return t<e?-1:e<t?1:0}t:{var Up=vp.navigator;if(Up){var jp=Up.userAgent;if(jp){xp=jp;break t}}xp=""}function Vp(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function qp(t){var e={};for(var n in t)e[n]=t[n];return e}var Bp="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Wp(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<Bp.length;i++)e=Bp[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function Hp(t){return Hp[" "](t),t}Hp[" "]=yp;var Kp,Gp,zp=Mp(xp,"Opera"),Qp=Mp(xp,"Trident")||Mp(xp,"MSIE"),Xp=Mp(xp,"Edge"),Yp=Xp||Qp,Jp=Mp(xp,"Gecko")&&!(Mp(xp.toLowerCase(),"webkit")&&!Mp(xp,"Edge"))&&!(Mp(xp,"Trident")||Mp(xp,"MSIE"))&&!Mp(xp,"Edge"),$p=Mp(xp.toLowerCase(),"webkit")&&!Mp(xp,"Edge");function Zp(){var t=vp.document;return t?t.documentMode:void 0}t:{var td="",ed=(Gp=xp,Jp?/rv:([^\);]+)(\)|;)/.exec(Gp):Xp?/Edge\/([\d\.]+)/.exec(Gp):Qp?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Gp):$p?/WebKit\/(\S+)/.exec(Gp):zp?/(?:Version)[ \/]?(\S+)/.exec(Gp):void 0);if(ed&&(td=ed?ed[1]:""),Qp){var nd=Zp();if(null!=nd&&nd>parseFloat(td)){Kp=String(nd);break t}}Kp=td}var rd={};function id(a){return t=a,e=function(){for(var t=0,e=Lp(String(Kp)).split("."),n=Lp(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=Fp(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||Fp(0==o[2].length,0==s[2].length)||Fp(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t},n=rd,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e();var t,e,n}var od=vp.document&&Qp&&(Zp()||parseInt(Kp,10))||void 0,sd=!Qp||9<=Number(od),ad=Qp&&!id("9"),ud=function(){if(!vp.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{vp.addEventListener("test",yp,e),vp.removeEventListener("test",yp,e)}catch(t){}return t}();function cd(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function hd(t,e){if(cd.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Jp){t:{try{Hp(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ld[t.pointerType]||"",(this.c=t).defaultPrevented&&this.b()}}cd.prototype.b=function(){this.defaultPrevented=!0},Np(hd,cd);var ld={2:"touch",3:"pen",4:"mouse"};hd.prototype.b=function(){hd.M.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ad)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var fd="closure_listenable_"+(1e6*Math.random()|0),pd=0;function dd(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.aa=i,this.key=++pd,this.V=this.X=!1}function vd(t){t.V=!0,t.listener=null,t.proxy=null,t.src=null,t.aa=null}function yd(t){this.src=t,this.a={},this.b=0}function gd(t,e){var n,r,i,o=e.type;o in t.a&&(r=t.a[o],(n=0<=(i=kp(r,e)))&&Array.prototype.splice.call(r,i,1),n&&(vd(e),0==t.a[o].length&&(delete t.a[o],t.b--)))}function md(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.V&&o.listener==e&&o.capture==!!n&&o.aa==r)return i}return-1}yd.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=md(t,e,r,i);return-1<s?(e=t[s],n||(e.X=!1)):((e=new dd(e,this.src,o,!!r,i)).X=n,t.push(e)),e};var bd="closure_lm_"+(1e6*Math.random()|0),wd={};function _d(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=kd(r),e&&e[fd]?e.sa(n,r,bp(i)?!!i.capture:!!i,o):Ed(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)_d(t,e[o],n,r,i);return null}return n=kd(n),t&&t[fd]?t.ra(e,n,bp(r)?!!r.capture:!!r,i):Ed(t,e,n,!1,r,i)}function Ed(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=bp(i)?!!i.capture:!!i;if(s&&!sd)return null;var a,u,c=Nd(t);if(c||(t[bd]=c=new yd(t)),(n=c.add(e,n,r,s,o)).proxy)return n;if(a=Cd,r=u=sd?function(t){return a.call(u.src,u.listener,t)}:function(t){if(!(t=a.call(u.src,u.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)ud||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Td(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Id(t){var e,n,r;"number"!=typeof t&&t&&!t.V&&((e=t.src)&&e[fd]?gd(e.c,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Td(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Nd(e))?(gd(n,t),0==n.b&&(n.src=null,e[bd]=null)):vd(t)))}function Td(t){return t in wd?wd[t]:wd[t]="on"+t}function Sd(t,e){var n=t.listener,r=t.aa||t.src;return t.X&&Id(t),n.call(r,e)}function Cd(t,e){if(t.V)return!0;if(sd)return Sd(t,new hd(e,this));if(!e)t:{e=["window","event"];for(var n=vp,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Sd(t,e=new hd(e,this))}function Nd(t){return(t=t[bd])instanceof yd?t:null}var Ad="__closure_events_fn_"+(1e9*Math.random()>>>0);function kd(e){return"function"==gp(e)?e:(e[Ad]||(e[Ad]=function(t){return e.handleEvent(t)}),e[Ad])}function Od(){Ap.call(this),this.c=new yd(this),(this.J=this).A=null}function Pd(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,a,u=e[o];u&&!u.V&&u.capture==n&&(s=u.listener,a=u.aa||u.src,u.X&&gd(t.c,u),i=!1!==s.call(a,r)&&i)}return i&&!r.defaultPrevented}Np(Od,Ap),Od.prototype[fd]=!0,(fp=Od.prototype).addEventListener=function(t,e,n,r){_d(this,t,e,n,r)},fp.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=bp(i)?!!i.capture:!!i,r=kd(r),e&&e[fd]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=md(s=e.a[n],r,i,o))&&(vd(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):(e=e&&Nd(e))&&(n=e.a[n.toString()],e=-1,n&&(e=md(n,r,i,o)),(r=-1<e?n[e]:null)&&Id(r))}(this,t,e,n,r)},fp.dispatchEvent=function(t){var e,n=this.A;if(n)for(e=[];n;n=n.A)e.push(n);n=this.J;var r=t.type||t;if("string"==typeof t?t=new cd(t,n):t instanceof cd?t.target=t.target||n:(s=t,Wp(t=new cd(r,n),s)),s=!0,e)for(var i=e.length-1;0<=i;i--)var o=t.a=e[i],s=Pd(o,r,!0,t)&&s;if(s=Pd(o=t.a=n,r,!0,t)&&s,s=Pd(o,r,!1,t)&&s,e)for(i=0;i<e.length;i++)s=Pd(o=t.a=e[i],r,!1,t)&&s;return s},fp.C=function(){if(Od.M.C.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)vd(n[r]);delete e.a[t],e.b--}}this.A=null},fp.ra=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},fp.sa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Rd=vp.JSON.stringify;function Dd(){this.b=this.a=null}var xd,Ld=(Md.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},new Md(function(){return new Fd},function(t){t.reset()},100));function Md(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}function Fd(){this.next=this.b=this.a=null}function Ud(t){vp.setTimeout(function(){throw t},0)}function jd(t,e){var n;xd||(n=vp.Promise.resolve(void 0),xd=function(){n.then(Bd)}),Vd||(xd(),Vd=!0),qd.add(t,e)}Dd.prototype.add=function(t,e){var n=Ld.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Fd.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var Vd=!(Fd.prototype.reset=function(){this.next=this.b=this.a=null}),qd=new Dd;function Bd(){for(var t,e,n;n=e=void 0,n=null,(e=qd).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){Ud(t)}var r=Ld;r.g(t),r.b<r.f&&(r.b++,t.next=r.a,r.a=t)}Vd=!1}function Wd(t,e){Od.call(this),this.b=t||1,this.a=e||vp,this.f=Tp(this.Ua,this),this.g=Cp()}function Hd(t){t.Z=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function Kd(t,e,n){if("function"==gp(t))n&&(t=Tp(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Tp(t.handleEvent,t)}return 2147483647<Number(e)?-1:vp.setTimeout(t,e||0)}function Gd(t,e,n){Ap.call(this),this.f=null!=n?Tp(t,n):t,this.c=e,this.b=Tp(this.Pa,this),this.a=[]}function zd(t){t.T=Kd(t.b,t.c),t.f.apply(null,t.a)}function Qd(t){Ap.call(this),this.b=t,this.a={}}Np(Wd,Od),(fp=Wd.prototype).Z=!1,fp.L=null,fp.Ua=function(){var t;this.Z&&(0<(t=Cp()-this.g)&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.Z&&(Hd(this),this.start())))},fp.start=function(){this.Z=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=Cp())},fp.C=function(){Wd.M.C.call(this),Hd(this),delete this.a},Np(Gd,Ap),(fp=Gd.prototype).ba=!1,fp.T=null,fp.Ia=function(t){this.a=arguments,this.T?this.ba=!0:zd(this)},fp.C=function(){Gd.M.C.call(this),this.T&&(vp.clearTimeout(this.T),this.T=null,this.ba=!1,this.a=[])},fp.Pa=function(){this.T=null,this.ba&&(this.ba=!1,zd(this))},Np(Qd,Ap);var Xd=[];function Yd(t,e,n,r){Array.isArray(n)||(n&&(Xd[0]=n.toString()),n=Xd);for(var i=0;i<n.length;i++){var o=_d(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Jd(t){Vp(t.a,function(t,e){this.a.hasOwnProperty(e)&&Id(t)},t),t.a={}}function $d(){}Qd.prototype.C=function(){Qd.M.C.call(this),Jd(this)},Qd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zd=null;function tv(){return Zd=Zd||new Od}function ev(t){cd.call(this,"serverreachability",t)}function nv(){var t=tv();t.dispatchEvent(new ev(t))}function rv(t){cd.call(this,"statevent",t)}function iv(){var t=tv();t.dispatchEvent(new rv(t))}function ov(t){cd.call(this,"timingevent",t)}function sv(t,e){if("function"!=gp(t))throw Error("Fn must not be null and must be a function");return vp.setTimeout(function(){t()},e)}Np(ev,cd),Np(rv,cd),Np(ov,cd);var av={NO_ERROR:0,Va:1,bb:2,ab:3,Ya:4,$a:5,cb:6,za:7,TIMEOUT:8,gb:9},uv={Xa:"complete",kb:"success",Aa:"error",za:"abort",ib:"ready",jb:"readystatechange",TIMEOUT:"timeout",eb:"incrementaldata",hb:"progress",Za:"downloadprogress",lb:"uploadprogress"};function cv(){}function hv(t){var e;return(e=t.a)||(e=t.a={}),e}function lv(){}cv.prototype.a=null;var fv,pv={OPEN:"a",Wa:"b",Aa:"c",fb:"d"};function dv(){cd.call(this,"d")}function vv(){cd.call(this,"c")}function yv(){}function gv(t,e,n){this.g=t,this.W=e,this.U=n||1,this.G=new Qd(this),this.N=mv,t=Yp?125:void 0,this.O=new Wd(t),this.m=null,this.b=!1,this.j=this.A=this.f=this.B=this.s=this.P=this.h=null,this.i=[],this.a=null,this.w=0,this.c=this.v=null,this.H=-1,this.l=!1,this.J=0,this.D=null,this.o=this.R=this.F=!1}Np(dv,cd),Np(vv,cd),Np(yv,cv),fv=new yv;var mv=45e3,bv={},wv={};function _v(t,e,n){t.B=1,t.f=Bv(Mv(e)),t.j=n,t.F=!0,Ev(t,null)}function Ev(t,e){t.s=Cp(),Tv(t),t.A=Mv(t.f);var n=t.A,r=t.U;Array.isArray(r)||(r=[String(r)]),ey(n.b,"t",r),t.w=0,t.a=Gy(t.g,t.g.w?e:null),0<t.J&&(t.D=new Gd(Tp(t.ya,t,t.a),t.J)),Yd(t.G,t.a,"readystatechange",t.Sa),e=t.m?qp(t.m):{},t.j?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.$(t.A,t.v,t.j,e)):(t.v="GET",t.a.$(t.A,t.v,null,e)),nv()}function Iv(t,e,n){for(var r,i,o,s,a=!0;!t.l&&t.w<n.length;){var u=(i=n,s=o=void 0,o=(r=t).w,-1==(s=i.indexOf("\n",o))?wv:(o=Number(i.substring(o,s)),isNaN(o)?bv:(s+=1)+o>i.length?wv:(i=i.substr(s,o),r.w=s+o,i)));if(u==wv){4==e&&(t.c=4,iv(),a=!1);break}if(u==bv){t.c=4,iv(),a=!1;break}kv(t,u)}4==e&&0==n.length&&(t.c=1,iv(),a=!1),t.b=t.b&&a,a||(Av(t),Nv(t))}function Tv(t){t.P=Cp()+t.N,Sv(t,t.N)}function Sv(t,e){if(null!=t.h)throw Error("WatchDog timer not null");t.h=sv(Tp(t.Qa,t),e)}function Cv(t){t.h&&(vp.clearTimeout(t.h),t.h=null)}function Nv(t){0==t.g.u||t.l||qy(t.g,t)}function Av(t){Cv(t);var e=t.D;e&&"function"==typeof e.da&&e.da(),t.D=null,Hd(t.O),Jd(t.G),t.a&&(e=t.a,t.a=null,e.abort(),e.da())}function kv(t,e){try{var n,r,i,o,s,a,u,c,h,l,f=t.g;if(0!=f.u&&(f.a==t||uy(f.b,t)))if(f.A=t.H,!t.o&&uy(f.b,t)&&3==f.u){try{var p=f.ja.a.parse(e)}catch(t){p=null}if(Array.isArray(p)&&3==p.length){var d=p;if(0==d[0]){t:if(!f.i){if(f.a){if(!(f.a.s+3e3<t.s))break t;Vy(f),f.a.cancel(),f.a=null}jy(f),iv()}}else f.ia=d[1],0<f.ia-f.G&&d[2]<37500&&f.U&&0==f.m&&!f.l&&(f.l=sv(Tp(f.Na,f),6e3));if(ay(f.b)<=1&&f.O){try{f.O()}catch(t){}f.O=void 0}}else Wy(f,11)}else if(!t.o&&f.a!=t||Vy(f),!Dp(e))for(e=p=f.ja.a.parse(e),p=0;p<e.length;p++){d=e[p],f.G=d[0],d=d[1],2==f.u?"c"==d[0]?(f.B=d[1],f.R=d[2],null!=(n=d[3])&&(f.oa=n),null!=(r=d[5])&&"number"==typeof r&&0<r&&(f.D=1.5*r),i=f,(o=t.a)&&(!(s=o.a?o.a.getResponseHeader("X-Client-Wire-Protocol"):null)||!(a=i.b).a&&(Mp(s,"spdy")||Mp(s,"quic")||Mp(s,"h2"))&&(a.f=a.g,a.a=new Set,a.b&&(cy(a,a.b),a.b=null)),!i.s||(u=o.a?o.a.getResponseHeader("X-HTTP-Session-Id"):null)&&(i.ha=u,qv(i.v,i.s,u))),f.u=3,f.c&&f.c.na(),c=t,(i=f).ea=Ky(i,i.w?i.R:null,i.P),c.o?(hy(i.b,c),h=c,(l=i.D)&&h.setTimeout(l),h.h&&(Cv(h),Tv(h)),i.a=c):Uy(i),0<f.f.length&&xy(f)):"stop"!=d[0]&&"close"!=d[0]||Wy(f,7):3==f.u&&("stop"==d[0]||"close"==d[0]?"stop"==d[0]?Wy(f,7):Py(f):"noop"!=d[0]&&f.c&&f.c.ma(d),f.m=0)}nv()}catch(t){}}function Ov(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(mp(t)||"string"==typeof t)Op(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.I&&"function"==typeof t.I)n=void 0;else if(mp(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.I&&"function"==typeof t.I)return t.I();if("string"==typeof t)return t.split("");if(mp(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Pv(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Pv)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Rv(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Dv(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)Dv(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function Dv(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(fp=gv.prototype).setTimeout=function(t){this.N=t},fp.Sa=function(t){t=t.target;var e=this.D;e&&3==Ny(t)?e.Ia():this.ya(t)},fp.ya=function(t){try{if(t==this.a)t:{var e=Ny(this.a),n=this.a.qa();this.a.S();if(!(e<3||3==e&&!Yp&&!this.a.Y())){this.l||4!=e||7==n||nv(),Cv(this);var r=this.a.S();this.H=r;var i=this.a.Y();if(this.b=200==r){if(this.R&&!this.o){e:{if(this.a){var o,s=this.a;if((o=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Dp(o)){var a=o;break e}}a=null}if(!a){this.b=!1,this.c=3,iv(),Av(this),Nv(this);break t}this.o=!0,kv(this,a)}this.F?(Iv(this,e,i),Yp&&this.b&&3==e&&(Yd(this.G,this.O,"tick",this.Ra),this.O.start())):kv(this,i),4==e&&Av(this),this.b&&!this.l&&(4==e?qy(this.g,this):(this.b=!1,Tv(this)))}else 400==r&&0<i.indexOf("Unknown SID")?this.c=3:this.c=0,iv(),Av(this),Nv(this)}}}catch(t){}},fp.Ra=function(){var t,e;this.a&&(t=Ny(this.a),e=this.a.Y(),this.w<e.length&&(Cv(this),Iv(this,t,e),this.b&&4!=t&&Tv(this)))},fp.cancel=function(){this.l=!0,Av(this)},fp.Qa=function(){this.h=null;var t=Cp();0<=t-this.P?(2!=this.B&&(nv(),iv()),Av(this),this.c=2,Nv(this)):Sv(this,this.P-t)},(fp=Pv.prototype).I=function(){Rv(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},fp.K=function(){return Rv(this),this.a.concat()},fp.get=function(t,e){return Dv(this.b,t)?this.b[t]:e},fp.set=function(t,e){Dv(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},fp.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var xv=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Lv(t,e){var n;this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Lv?(this.a=void 0!==e?e:t.a,Fv(this,t.f),this.j=t.j,Uv(this,t.c),jv(this,t.h),this.g=t.g,e=t.b,(n=new Jv).c=e.c,e.a&&(n.a=new Pv(e.a),n.b=e.b),Vv(this,n),this.i=t.i):t&&(n=String(t).match(xv))?(this.a=!!e,Fv(this,n[1]||"",!0),this.j=Wv(n[2]||""),Uv(this,n[3]||"",!0),jv(this,n[4]),this.g=Wv(n[5]||"",!0),Vv(this,n[6]||"",!0),this.i=Wv(n[7]||"")):(this.a=!!e,this.b=new Jv(null,this.a))}function Mv(t){return new Lv(t)}function Fv(t,e,n){t.f=n?Wv(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Uv(t,e,n){t.c=n?Wv(e,!0):e}function jv(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Vv(t,e,n){var r,i;e instanceof Jv?(t.b=e,r=t.b,(i=t.a)&&!r.f&&($v(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Zv(this,e),ey(this,n,t))},r)),r.f=i):(n||(e=Hv(e,Xv)),t.b=new Jv(e,t.a))}function qv(t,e,n){t.b.set(e,n)}function Bv(t){return qv(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Cp()).toString(36)),t}function Wv(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Hv(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Kv),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Kv(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Lv.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Hv(e,Gv,!0),":");var n=this.c;return!n&&"file"!=e||(t.push("//"),(e=this.j)&&t.push(Hv(e,Gv,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Hv(n,"/"==n.charAt(0)?Qv:zv,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Hv(n,Yv)),t.join("")};var Gv=/[#\/\?@]/g,zv=/[#\?:]/g,Qv=/[#\?]/g,Xv=/[#\?@]/g,Yv=/#/g;function Jv(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function $v(a){a.a||(a.a=new Pv,a.b=0,a.c&&function(t){if(t){t=t.split("&");for(var e=0;e<t.length;e++){var n,r=t[e].indexOf("="),i=null;0<=r?(n=t[e].substring(0,r),i=t[e].substring(r+1)):n=t[e],o=n,s=i?decodeURIComponent(i.replace(/\+/g," ")):"",a.add(decodeURIComponent(o.replace(/\+/g," ")),s)}}var o,s}(a.c))}function Zv(t,e){$v(t),e=ny(t,e),Dv(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Dv((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Rv(t)))}function ty(t,e){return $v(t),e=ny(t,e),Dv(t.a.b,e)}function ey(t,e,n){Zv(t,e),0<n.length&&(t.c=null,t.a.set(ny(t,e),Rp(n)),t.b+=n.length)}function ny(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function ry(t,e){this.b=t,this.a=e}function iy(t){this.g=t||oy,t=vp.PerformanceNavigationTiming?0<(t=vp.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(vp.ca&&vp.ca.ua&&vp.ca.ua()&&vp.ca.ua().mb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(fp=Jv.prototype).add=function(t,e){$v(this),this.c=null,t=ny(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},fp.forEach=function(n,r){$v(this),this.a.forEach(function(t,e){Op(t,function(t){n.call(r,t,e,this)},this)},this)},fp.K=function(){$v(this);for(var t=this.a.I(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},fp.I=function(t){$v(this);var e=[];if("string"==typeof t)ty(this,t)&&(e=Pp(e,this.a.get(ny(this,t))));else{t=this.a.I();for(var n=0;n<t.length;n++)e=Pp(e,t[n])}return e},fp.set=function(t,e){return $v(this),this.c=null,ty(this,t=ny(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},fp.get=function(t,e){return t&&0<(t=this.I(t)).length?String(t[0]):e},fp.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.I(r),o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.c=t.join("&")};var oy=10;function sy(t){return t.b||t.a&&t.a.size>=t.f}function ay(t){return t.b?1:t.a?t.a.size:0}function uy(t,e){return t.b?t.b==e:t.a&&t.a.has(e)}function cy(t,e){t.a?t.a.add(e):t.b=e}function hy(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function ly(t){var e,n;if(null!=t.b)return t.c.concat(t.b.i);if(null==t.a||0===t.a.size)return Rp(t.c);var r=t.c;try{for(var i=lp(t.a.values()),o=i.next();!o.done;o=i.next())var s=o.value,r=r.concat(s.i)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function fy(){}function py(){this.a=new fy}function dy(t,r,e){var i=e||"";try{Ov(t,function(t,e){var n=t;bp(t)&&(n=Rd(t)),r.push(i+e+"="+encodeURIComponent(n))})}catch(t){throw r.push(i+"type="+encodeURIComponent("_badmap")),t}}function vy(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}iy.prototype.cancel=function(){var t,e;if(this.c=ly(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=lp(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},fy.prototype.stringify=function(t){return vp.JSON.stringify(t,void 0)},fy.prototype.parse=function(t){return vp.JSON.parse(t,void 0)};var yy=vp.JSON.parse;function gy(t){Od.call(this),this.headers=new Pv,this.G=t||null,this.b=!1,this.s=this.a=null,this.D="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.H=my,this.B=this.F=!1}Np(gy,Od);var my="",by=/^https?$/i,wy=["POST","PUT"];function _y(t){return"content-type"==t.toLowerCase()}function Ey(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Iy(t),Sy(t)}function Iy(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Ty(t){if(t.b&&void 0!==dp&&(!t.s[1]||4!=Ny(t)||2!=t.S()))if(t.l&&4==Ny(t))Kd(t.va,0,t);else if(t.dispatchEvent("readystatechange"),4==Ny(t)){t.b=!1;try{var e,n,r,i,o=t.S();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}if((e=s)||((n=0===o)&&(!(i=String(t.D).match(xv)[1]||null)&&vp.self&&vp.self.location&&(i=(r=vp.self.location.protocol).substr(0,r.length-1)),n=!by.test(i?i.toLowerCase():"")),e=n),e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var a=2<Ny(t)?t.a.statusText:""}catch(t){a=""}t.f=a+" ["+t.S()+"]",Iy(t)}}finally{Sy(t)}}}function Sy(t,e){if(t.a){Cy(t);var n=t.a,r=t.s[0]?yp:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function Cy(t){t.a&&t.B&&(t.a.ontimeout=null),t.m&&(vp.clearTimeout(t.m),t.m=null)}function Ny(t){return t.a?t.a.readyState:0}function Ay(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}var i;r||(i="",Vp(n,function(t,e){i+=e,i+=":",i+=t,i+="\r\n"}),n=i,"string"==typeof t?null!=n&&encodeURIComponent(String(n)):qv(t,e,n))}function ky(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Oy(t){this.f=[],this.R=this.ea=this.v=this.P=this.a=this.ha=this.s=this.N=this.h=this.F=this.j=null,this.Fa=this.H=0,this.Ca=ky("failFast",!1,t),this.U=this.l=this.i=this.g=this.c=null,this.W=!0,this.A=this.ia=this.G=-1,this.J=this.m=this.o=0,this.Ba=ky("baseRetryDelayMs",5e3,t),this.Ga=ky("retryDelaySeedMs",1e4,t),this.Da=ky("forwardChannelMaxRetries",2,t),this.ga=ky("forwardChannelRequestTimeoutMs",2e4,t),this.Ea=t&&t.nb||void 0,this.D=void 0,this.w=t&&t.supportsCrossDomainXhr||!1,this.B="",this.b=new iy(t&&t.concurrentRequestLimit),this.ja=new py,this.fa=t&&t.fastHandshake||!1,t&&t.forceLongPolling&&(this.W=!1),this.O=void 0}function Py(t){var e,n;Ry(t),3==t.u&&(e=t.H++,qv(n=Mv(t.v),"SID",t.B),qv(n,"RID",e),qv(n,"TYPE","terminate"),My(t,n),(e=new gv(t,e,void 0)).B=2,e.f=Bv(Mv(n)),n=!1,vp.navigator&&vp.navigator.sendBeacon&&(n=vp.navigator.sendBeacon(e.f.toString(),"")),!n&&vp.Image&&((new Image).src=e.f,n=!0),n||(e.a=Gy(e.g,null),e.a.$(e.f)),e.s=Cp(),Tv(e)),Hy(t)}function Ry(t){t.a&&(t.a.cancel(),t.a=null),t.i&&(vp.clearTimeout(t.i),t.i=null),Vy(t),t.b.cancel(),t.g&&("number"==typeof t.g&&vp.clearTimeout(t.g),t.g=null)}function Dy(t,e){t.f.push(new ry(t.Fa++,e)),3==t.u&&xy(t)}function xy(t){sy(t.b)||t.g||(t.g=!0,jd(t.xa,t),t.o=0)}function Ly(t,e){var n=e?e.W:t.H++,r=Mv(t.v);qv(r,"SID",t.B),qv(r,"RID",n),qv(r,"AID",t.G),My(t,r),t.h&&t.j&&Ay(r,t.h,t.j),n=new gv(t,n,t.o+1),null===t.h&&(n.m=t.j),e&&(t.f=e.i.concat(t.f)),e=Fy(t,n,1e3),n.setTimeout(Math.round(.5*t.ga)+Math.round(.5*t.ga*Math.random())),cy(t.b,n),_v(n,r,e)}function My(t,n){t.c&&Ov({},function(t,e){qv(n,e,t)})}function Fy(t,e,n){n=Math.min(t.f.length,n);var r=t.c?Tp(t.c.Ha,t.c,t):null;t:for(var i=t.f,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),a=!1;else try{dy(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.f.splice(0,n),e.i=t,r}function Uy(t){t.a||t.i||(t.J=1,jd(t.wa,t),t.m=0)}function jy(t){return!(t.a||t.i||3<=t.m)&&(t.J++,t.i=sv(Tp(t.wa,t),By(t,t.m)),t.m++,1)}function Vy(t){null!=t.l&&(vp.clearTimeout(t.l),t.l=null)}function qy(t,e){var n,r=null;if(t.a==e){Vy(t),t.a=null;var i=2}else{if(!uy(t.b,e))return;r=e.i,hy(t.b,e),i=1}if(t.A=e.H,0!=t.u)if(e.b){1==i?(r=e.j?e.j.length:0,e=Cp()-e.s,n=t.o,(i=tv()).dispatchEvent(new ov(i)),xy(t)):Uy(t)}else if(3==(n=e.c)||0==n&&0<t.A||!(1==i&&function(t,e){if(!(ay(t.b)>=t.b.f-(t.g?1:0))){if(t.g)return t.f=e.i.concat(t.f),1;if(!(1==t.u||2==t.u||t.o>=(t.Ca?0:t.Da)))return t.g=sv(Tp(t.xa,t,e),By(t,t.o)),t.o++,1}}(t,e)||2==i&&jy(t)))switch(r&&0<r.length&&(e=t.b,e.c=e.c.concat(r)),n){case 1:Wy(t,5);break;case 4:Wy(t,10);break;case 3:Wy(t,6);break;default:Wy(t,2)}}function By(t,e){var n=t.Ba+Math.floor(Math.random()*t.Ga);return t.c||(n*=2),n*e}function Wy(t,e){var n,r,i,o,s,a;2==e?(n=null,t.c&&(n=null),r=Tp(t.Ta,t),n||(n=new Lv("//www.google.com/images/cleardot.gif"),vp.location&&"http"==vp.location.protocol||Fv(n,"https"),Bv(n)),i=n.toString(),o=r,a=new $d,vp.Image?((s=new Image).onload=Sp(vy,a,s,"TestLoadImage: loaded",!0,o),s.onerror=Sp(vy,a,s,"TestLoadImage: error",!1,o),s.onabort=Sp(vy,a,s,"TestLoadImage: abort",!1,o),s.ontimeout=Sp(vy,a,s,"TestLoadImage: timeout",!1,o),vp.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i):o(!1)):iv(),t.u=0,t.c&&t.c.la(e),Hy(t),Ry(t)}function Hy(t){t.u=0,t.A=-1,t.c&&(0==ly(t.b).length&&0==t.f.length||(t.b.c.length=0,Rp(t.f),t.f.length=0),t.c.ka())}function Ky(t,e,n){var r,i,o,s,a,u,c,h=(r=n)instanceof Lv?Mv(r):new Lv(r,void 0);return""!=h.c?(e&&Uv(h,e+"."+h.c),jv(h,h.h)):(o=(i=vp.location).protocol,s=e?e+"."+i.hostname:i.hostname,a=+i.port,u=n,c=new Lv(null,void 0),o&&Fv(c,o),s&&Uv(c,s),a&&jv(c,a),u&&(c.g=u),h=c),t.N&&Vp(t.N,function(t,e){qv(h,e,t)}),e=t.s,n=t.ha,e&&n&&qv(h,e,n),qv(h,"VER",t.oa),My(t,h),h}function Gy(t,e){if(e&&!t.w)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new gy(t.Ea)).F=t.w,e}function zy(){}function Qy(){if(Qp&&!(10<=Number(od)))throw Error("Environmental error: no available transport.")}function Xy(t,e){Od.call(this),this.a=new Oy(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.j=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.pa&&(t?t["X-WebChannel-Client-Profile"]=e.pa:t={"X-WebChannel-Client-Profile":e.pa}),this.a.F=t,(t=e&&e.httpHeadersOverwriteParam)&&!Dp(t)&&(this.a.h=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Dp(e)&&(this.a.s=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new $y(this)}function Yy(t){dv.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Jy(){vv.call(this),this.status=1}function $y(t){this.a=t}(fp=gy.prototype).$=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);e=e?e.toUpperCase():"GET",this.D=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.G?hv(this.G):hv(fv),this.a.onreadystatechange=Tp(this.va,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(t){return void Ey(this,t)}t=n||"";var i,o=new Pv(this.headers);r&&Ov(r,function(t,e){o.set(e,t)}),r=function(t){t:{for(var e=_y,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(o.K()),n=vp.FormData&&t instanceof vp.FormData,0<=kp(wy,e)&&!r&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.H&&(this.a.responseType=this.H),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Cy(this),0<this.o&&((this.B=(i=this.a,Qp&&id(9)&&"number"==typeof i.timeout&&void 0!==i.ontimeout))?(this.a.timeout=this.o,this.a.ontimeout=Tp(this.ta,this)):this.m=Kd(this.ta,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Ey(this,t)}},fp.ta=function(){void 0!==dp&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},fp.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Sy(this))},fp.C=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Sy(this,!0)),gy.M.C.call(this)},fp.va=function(){this.j||(this.w||this.l||this.g?Ty(this):this.Oa())},fp.Oa=function(){Ty(this)},fp.S=function(){try{return 2<Ny(this)?this.a.status:-1}catch(t){return-1}},fp.Y=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},fp.Ja=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),yy(e)}},fp.qa=function(){return this.h},fp.Ma=function(){return"string"==typeof this.f?this.f:String(this.f)},(fp=Oy.prototype).oa=8,fp.u=1,fp.xa=function(t){if(this.g)if(this.g=null,1==this.u){if(!t){this.H=Math.floor(1e5*Math.random()),t=this.H++;var e,n=new gv(this,t,void 0),r=this.j;if(this.F&&(r?Wp(r=qp(r),this.F):r=this.F),null===this.h&&(n.m=r),this.fa)t:{for(var i=e=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.f.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Fy(this,n,e),qv(i=Mv(this.v),"RID",t),qv(i,"CVER",22),this.s&&qv(i,"X-HTTP-Session-Id",this.s),My(this,i),this.h&&r&&Ay(i,this.h,r),cy(this.b,n),this.fa?(qv(i,"$req",e),qv(i,"SID","null"),n.R=!0,_v(n,i,null)):_v(n,i,e),this.u=2}}else 3==this.u&&(t?Ly(this,t):0==this.f.length||sy(this.b)||Ly(this))},fp.wa=function(){this.i=null,this.a=new gv(this,"rpc",this.J),null===this.h&&(this.a.m=this.j),this.a.J=0;var t=Mv(this.ea);qv(t,"RID","rpc"),qv(t,"SID",this.B),qv(t,"CI",this.U?"0":"1"),qv(t,"AID",this.G),My(this,t),qv(t,"TYPE","xmlhttp"),this.h&&this.j&&Ay(t,this.h,this.j),this.D&&this.a.setTimeout(this.D);var e=this.a,n=this.R;e.B=1,e.f=Bv(Mv(t)),e.j=null,e.F=!0,Ev(e,n)},fp.Na=function(){null!=this.l&&(this.l=null,this.a.cancel(),this.a=null,jy(this),iv())},fp.Ta=function(t){iv()},(fp=zy.prototype).na=function(){},fp.ma=function(){},fp.la=function(){},fp.ka=function(){},fp.Ha=function(){},Qy.prototype.a=function(t,e){return new Xy(t,e)},Np(Xy,Od),(fp=Xy.prototype).addEventListener=function(t,e,n,r){Xy.M.addEventListener.call(this,t,e,n,r)},fp.removeEventListener=function(t,e,n,r){Xy.M.removeEventListener.call(this,t,e,n,r)},fp.Ka=function(){this.a.c=this.f,this.h&&(this.a.w=!0);var t=this.a,e=this.l,n=this.b||void 0;iv(),t.P=e,t.N=n||{},t.U=t.W,t.v=Ky(t,null,t.P),xy(t)},fp.close=function(){Py(this.a)},fp.La=function(t){var e;"string"==typeof t?((e={}).__data__=t,Dy(this.a,e)):this.g?((e={}).__data__=Rd(t),Dy(this.a,e)):Dy(this.a,t)},fp.C=function(){this.a.c=null,delete this.f,Py(this.a),delete this.a,Xy.M.C.call(this)},Np(Yy,dv),Np(Jy,vv),Np($y,zy),$y.prototype.na=function(){this.a.dispatchEvent("a")},$y.prototype.ma=function(t){this.a.dispatchEvent(new Yy(t))},$y.prototype.la=function(t){this.a.dispatchEvent(new Jy)},$y.prototype.ka=function(){this.a.dispatchEvent("b")},Qy.prototype.createWebChannel=Qy.prototype.a,Xy.prototype.send=Xy.prototype.La,Xy.prototype.open=Xy.prototype.Ka,Xy.prototype.close=Xy.prototype.close,av.NO_ERROR=0,av.TIMEOUT=8,av.HTTP_ERROR=6,uv.COMPLETE="complete",(lv.EventType=pv).OPEN="a",pv.CLOSE="b",pv.ERROR="c",pv.MESSAGE="d",Od.prototype.listen=Od.prototype.ra,gy.prototype.listenOnce=gy.prototype.sa,gy.prototype.getLastError=gy.prototype.Ma,gy.prototype.getLastErrorCode=gy.prototype.qa,gy.prototype.getStatus=gy.prototype.S,gy.prototype.getResponseJson=gy.prototype.Ja,gy.prototype.getResponseText=gy.prototype.Y,gy.prototype.send=gy.prototype.$;var Zy={createWebChannelTransport:function(){return new Qy},ErrorCode:av,EventType:uv,WebChannel:lv,XhrIo:gy},tg=Zy.createWebChannelTransport,eg=Zy.ErrorCode,ng=Zy.EventType,rg=Zy.WebChannel,ig=Zy.XhrIo,og="7.17.1-20206244562",sg=new za("@firebase/firestore");function ag(){return sg.logLevel}function ug(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];sg.logLevel<=ja.DEBUG&&(e=n.map(hg),sg.debug.apply(sg,Bs(["Firestore ("+og+"): "+t],e)))}function cg(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];sg.logLevel<=ja.ERROR&&(e=n.map(hg),sg.error.apply(sg,Bs(["Firestore ("+og+"): "+t],e)))}function hg(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function lg(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE ("+og+") INTERNAL ASSERTION FAILED: "+t;throw cg(e),new Error(e)}function fg(t){t||lg()}function pg(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var dg=(vg.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=pg(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},vg);function vg(){}function yg(t,e){return t<e?-1:e<t?1:0}function gg(t,n,r){return t.length===n.length&&t.every(function(t,e){return r(t,n[e])})}function mg(t){return t+"\0"}function bg(t,e,n,r,i){this.s=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i}var wg=(Object.defineProperty(_g.prototype,"i",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),_g.prototype.isEqual=function(t){return t instanceof _g&&t.projectId===this.projectId&&t.database===this.database},_g.prototype.o=function(t){return yg(this.projectId,t.projectId)||yg(this.database,t.database)},_g);function _g(t,e){this.projectId=t,this.database=e||"(default)"}function Eg(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ig(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Tg(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Sg,Cg,Ng,Ag=(Kg.prototype.get=function(t){var e=this.h(t),n=this.l[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.u(s,t))return a}},Kg.prototype.has=function(t){return void 0!==this.get(t)},Kg.prototype.set=function(t,e){var n=this.h(t),r=this.l[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.u(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.l[n]=[[t,e]]},Kg.prototype.delete=function(t){var e=this.h(t),n=this.l[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.u(n[r][0],t))return 1===n.length?delete this.l[e]:n.splice(r,1),!0;return!1},Kg.prototype.forEach=function(a){Ig(this.l,function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],s=i[1];a(o,s)}})},Kg.prototype._=function(){return Tg(this.l)},Kg),kg={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Og=(Ls(Hg,Ng=Error),Hg),Pg=(Wg.now=function(){return Wg.fromMillis(Date.now())},Wg.fromDate=function(t){return Wg.fromMillis(t.getTime())},Wg.fromMillis=function(t){var e=Math.floor(t/1e3);return new Wg(e,1e6*(t-1e3*e))},Wg.prototype.toDate=function(){return new Date(this.toMillis())},Wg.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},Wg.prototype.T=function(t){return this.seconds===t.seconds?yg(this.nanoseconds,t.nanoseconds):yg(this.seconds,t.seconds)},Wg.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},Wg.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},Wg.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},Wg),Rg=(Bg.I=function(t){return new Bg(t)},Bg.min=function(){return new Bg(new Pg(0,0))},Bg.prototype.o=function(t){return this.timestamp.T(t.timestamp)},Bg.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},Bg.prototype.m=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},Bg.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},Bg.prototype.A=function(){return this.timestamp},Bg),Dg=(Object.defineProperty(qg.prototype,"length",{get:function(){return this.R},enumerable:!1,configurable:!0}),qg.prototype.isEqual=function(t){return 0===qg.P(this,t)},qg.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof qg?t.forEach(function(t){e.push(t)}):e.push(t),this.g(e)},qg.prototype.limit=function(){return this.offset+this.length},qg.prototype.V=function(t){return t=void 0===t?1:t,this.g(this.segments,this.offset+t,this.length-t)},qg.prototype.p=function(){return this.g(this.segments,this.offset,this.length-1)},qg.prototype.v=function(){return this.segments[this.offset]},qg.prototype.S=function(){return this.get(this.length-1)},qg.prototype.get=function(t){return this.segments[this.offset+t]},qg.prototype._=function(){return 0===this.length},qg.prototype.D=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},qg.prototype.C=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},qg.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},qg.prototype.$=function(){return this.segments.slice(this.offset,this.limit())},qg.P=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0},qg),xg=(Ls(Vg,Cg=Dg),Vg.prototype.g=function(t,e,n){return new Vg(t,e,n)},Vg.prototype.F=function(){return this.$().join("/")},Vg.prototype.toString=function(){return this.F()},Vg.N=function(t){if(0<=t.indexOf("//"))throw new Og(kg.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new Vg(t.split("/").filter(function(t){return 0<t.length}))},Vg.k=function(){return new Vg([])},Vg),Lg=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Mg=(Ls(jg,Sg=Dg),jg.prototype.g=function(t,e,n){return new jg(t,e,n)},jg.M=function(t){return Lg.test(t)},jg.prototype.F=function(){return this.$().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),jg.M(t)||(t="`"+t+"`"),t}).join(".")},jg.prototype.toString=function(){return this.F()},jg.prototype.O=function(){return 1===this.length&&"__name__"===this.get(0)},jg.L=function(){return new jg(["__name__"])},jg.q=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new Og(kg.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var s=t[r];if("\\"===s){if(r+1===t.length)throw new Og(kg.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[r+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new Og(kg.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=a,r+=2}else"`"===s?o=!o:"."!==s||o?n+=s:i(),r++}if(i(),o)throw new Og(kg.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new jg(e)},jg.k=function(){return new jg([])},jg),Fg=(Ug.B=function(t){return new Ug(xg.N(t).V(5))},Ug.prototype.U=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},Ug.prototype.isEqual=function(t){return null!==t&&0===xg.P(this.path,t.path)},Ug.prototype.toString=function(){return this.path.toString()},Ug.P=function(t,e){return xg.P(t.path,e.path)},Ug.W=function(t){return t.length%2==0},Ug.j=function(t){return new Ug(new xg(t.slice()))},Ug);function Ug(t){this.path=t}function jg(){return null!==Sg&&Sg.apply(this,arguments)||this}function Vg(){return null!==Cg&&Cg.apply(this,arguments)||this}function qg(t,e,n){void 0===e?e=0:e>t.length&&lg(),void 0===n?n=t.length-e:n>t.length-e&&lg(),this.segments=t,this.offset=e,this.R=n}function Bg(t){this.timestamp=t}function Wg(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new Og(kg.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new Og(kg.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Og(kg.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new Og(kg.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}function Hg(t,e){var n=this;return(n=Ng.call(this,e)||this).code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function Kg(t,e){this.h=t,this.u=e,this.l={}}function Gg(t){return null==t}function zg(t){return-0===t&&1/t==-1/0}function Qg(t){return"number"==typeof t&&Number.isInteger(t)&&!zg(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Xg=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.K=null};function Yg(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Xg(t,e,n,r,i,o,s)}function Jg(t){var e,n=t;return null===n.K&&(e=n.path.F(),null!==n.collectionGroup&&(e+="|cg:"+n.collectionGroup),e+="|f:",e+=n.filters.map(function(t){return(e=t).field.F()+e.op.toString()+Zm(e.value);var e}).join(","),e+="|ob:",e+=n.orderBy.map(function(t){return(e=t).field.F()+e.dir;var e}).join(","),Gg(n.limit)||(e+="|l:",e+=n.limit),n.startAt&&(e+="|lb:",e+=T_(n.startAt)),n.endAt&&(e+="|ub:",e+=T_(n.endAt)),n.K=e),n.K}function $g(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n,r,i,o,s=0;s<t.orderBy.length;s++)if(n=t.orderBy[s],r=e.orderBy[s],n.dir!==r.dir||!n.field.isEqual(r.field))return!1;if(t.filters.length!==e.filters.length)return!1;for(var a=0;a<t.filters.length;a++)if(i=t.filters[a],o=e.filters[a],!(i instanceof s_&&o instanceof s_&&i.op===o.op&&i.field.isEqual(o.field)&&Xm(i.value,o.value)))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!C_(t.startAt,e.startAt)&&C_(t.endAt,e.endAt)}function Zg(t){return Fg.W(t.path)&&null===t.collectionGroup&&0===t.filters.length}var tm=(em.fromBase64String=function(t){return new em(atob(t))},em.fromUint8Array=function(t){return new em(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t))},em.prototype.toBase64=function(){return t=this.G,btoa(t);var t},em.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.G)},em.prototype.H=function(){return 2*this.G.length},em.prototype.o=function(t){return yg(this.G,t.G)},em.prototype.isEqual=function(t){return this.G===t.G},em);function em(t){this.G=t}function nm(t){this.count=t}tm.Y=new tm("");var rm,im,om=(sm.prototype.Z=function(t){return new sm(this.target,this.targetId,this.J,t,this.X,this.lastLimboFreeSnapshotVersion,this.resumeToken)},sm.prototype.tt=function(t,e){return new sm(this.target,this.targetId,this.J,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},sm.prototype.et=function(t){return new sm(this.target,this.targetId,this.J,this.sequenceNumber,this.X,t,this.resumeToken)},sm);function sm(t,e,n,r,i,o,s){void 0===i&&(i=Rg.min()),void 0===o&&(o=Rg.min()),void 0===s&&(s=tm.Y),this.target=t,this.targetId=e,this.J=n,this.sequenceNumber=r,this.X=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}function am(t){switch(t){case kg.OK:return lg();case kg.CANCELLED:case kg.UNKNOWN:case kg.DEADLINE_EXCEEDED:case kg.RESOURCE_EXHAUSTED:case kg.INTERNAL:case kg.UNAVAILABLE:case kg.UNAUTHENTICATED:return;case kg.INVALID_ARGUMENT:case kg.NOT_FOUND:case kg.ALREADY_EXISTS:case kg.PERMISSION_DENIED:case kg.FAILED_PRECONDITION:case kg.ABORTED:case kg.OUT_OF_RANGE:case kg.UNIMPLEMENTED:case kg.DATA_LOSS:return 1;default:return lg()}}function um(t){if(void 0===t)return cg("GRPC error has no .code"),kg.UNKNOWN;switch(t){case rm.OK:return kg.OK;case rm.CANCELLED:return kg.CANCELLED;case rm.UNKNOWN:return kg.UNKNOWN;case rm.DEADLINE_EXCEEDED:return kg.DEADLINE_EXCEEDED;case rm.RESOURCE_EXHAUSTED:return kg.RESOURCE_EXHAUSTED;case rm.INTERNAL:return kg.INTERNAL;case rm.UNAVAILABLE:return kg.UNAVAILABLE;case rm.UNAUTHENTICATED:return kg.UNAUTHENTICATED;case rm.INVALID_ARGUMENT:return kg.INVALID_ARGUMENT;case rm.NOT_FOUND:return kg.NOT_FOUND;case rm.ALREADY_EXISTS:return kg.ALREADY_EXISTS;case rm.PERMISSION_DENIED:return kg.PERMISSION_DENIED;case rm.FAILED_PRECONDITION:return kg.FAILED_PRECONDITION;case rm.ABORTED:return kg.ABORTED;case rm.OUT_OF_RANGE:return kg.OUT_OF_RANGE;case rm.UNIMPLEMENTED:return kg.UNIMPLEMENTED;case rm.DATA_LOSS:return kg.DATA_LOSS;default:return lg()}}(im=rm=rm||{})[im.OK=0]="OK",im[im.CANCELLED=1]="CANCELLED",im[im.UNKNOWN=2]="UNKNOWN",im[im.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",im[im.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",im[im.NOT_FOUND=5]="NOT_FOUND",im[im.ALREADY_EXISTS=6]="ALREADY_EXISTS",im[im.PERMISSION_DENIED=7]="PERMISSION_DENIED",im[im.UNAUTHENTICATED=16]="UNAUTHENTICATED",im[im.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",im[im.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",im[im.ABORTED=10]="ABORTED",im[im.OUT_OF_RANGE=11]="OUT_OF_RANGE",im[im.UNIMPLEMENTED=12]="UNIMPLEMENTED",im[im.INTERNAL=13]="INTERNAL",im[im.UNAVAILABLE=14]="UNAVAILABLE",im[im.DATA_LOSS=15]="DATA_LOSS";var cm=(dm.prototype.nt=function(t,e){return new dm(this.P,this.root.nt(t,e,this.P).copy(null,null,lm.st,null,null))},dm.prototype.remove=function(t){return new dm(this.P,this.root.remove(t,this.P).copy(null,null,lm.st,null,null))},dm.prototype.get=function(t){for(var e=this.root;!e._();){var n=this.P(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},dm.prototype.indexOf=function(t){for(var e=0,n=this.root;!n._();){var r=this.P(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},dm.prototype._=function(){return this.root._()},Object.defineProperty(dm.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),dm.prototype.it=function(){return this.root.it()},dm.prototype.rt=function(){return this.root.rt()},dm.prototype.ot=function(t){return this.root.ot(t)},dm.prototype.forEach=function(n){this.ot(function(t,e){return n(t,e),!1})},dm.prototype.toString=function(){var n=[];return this.ot(function(t,e){return n.push(t+":"+e),!1}),"{"+n.join(", ")+"}"},dm.prototype.ht=function(t){return this.root.ht(t)},dm.prototype.at=function(){return new hm(this.root,null,this.P,!1)},dm.prototype.ut=function(t){return new hm(this.root,t,this.P,!1)},dm.prototype.ct=function(){return new hm(this.root,null,this.P,!0)},dm.prototype.lt=function(t){return new hm(this.root,t,this.P,!0)},dm),hm=(pm.prototype.dt=function(){var t=this.ft.pop(),e={key:t.key,value:t.value};if(this._t)for(t=t.left;!t._();)this.ft.push(t),t=t.right;else for(t=t.right;!t._();)this.ft.push(t),t=t.left;return e},pm.prototype.wt=function(){return 0<this.ft.length},pm.prototype.Tt=function(){if(0===this.ft.length)return null;var t=this.ft[this.ft.length-1];return{key:t.key,value:t.value}},pm),lm=(fm.prototype.copy=function(t,e,n,r,i){return new fm(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},fm.prototype._=function(){return!1},fm.prototype.ot=function(t){return this.left.ot(t)||t(this.key,this.value)||this.right.ot(t)},fm.prototype.ht=function(t){return this.right.ht(t)||t(this.key,this.value)||this.left.ht(t)},fm.prototype.min=function(){return this.left._()?this:this.left.min()},fm.prototype.it=function(){return this.min().key},fm.prototype.rt=function(){return this.right._()?this.key:this.right.rt()},fm.prototype.nt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.nt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.nt(t,e,n))).Et()},fm.prototype.It=function(){if(this.left._())return fm.EMPTY;var t=this;return t.left.At()||t.left.left.At()||(t=t.Rt()),(t=t.copy(null,null,null,t.left.It(),null)).Et()},fm.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left._()||r.left.At()||r.left.left.At()||(r=r.Rt()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.At()&&(r=r.Pt()),r.right._()||r.right.At()||r.right.left.At()||(r=r.gt()),0===e(t,r.key)){if(r.right._())return fm.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.It())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.Et()},fm.prototype.At=function(){return this.color},fm.prototype.Et=function(){var t=this;return t.right.At()&&!t.left.At()&&(t=t.Vt()),t.left.At()&&t.left.left.At()&&(t=t.Pt()),t.left.At()&&t.right.At()&&(t=t.yt()),t},fm.prototype.Rt=function(){var t=this.yt();return t.right.left.At()&&(t=(t=(t=t.copy(null,null,null,null,t.right.Pt())).Vt()).yt()),t},fm.prototype.gt=function(){var t=this.yt();return t.left.left.At()&&(t=(t=t.Pt()).yt()),t},fm.prototype.Vt=function(){var t=this.copy(null,null,fm.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},fm.prototype.Pt=function(){var t=this.copy(null,null,fm.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},fm.prototype.yt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},fm.prototype.pt=function(){var t=this.bt();return Math.pow(2,t)<=this.size+1},fm.prototype.bt=function(){if(this.At()&&this.left.At())throw lg();if(this.right.At())throw lg();var t=this.left.bt();if(t!==this.right.bt())throw lg();return t+(this.At()?0:1)},fm);function fm(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:fm.RED,this.left=null!=r?r:fm.EMPTY,this.right=null!=i?i:fm.EMPTY,this.size=this.left.size+1+this.right.size}function pm(t,e,n,r){this._t=r,this.ft=[];for(var i=1;!t._();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this._t?t.left:t.right;else{if(0===i){this.ft.push(t);break}this.ft.push(t),t=this._t?t.right:t.left}}function dm(t,e){this.P=t,this.root=e||lm.EMPTY}function vm(){this.size=0}lm.EMPTY=null,lm.RED=!0,lm.st=!1,lm.EMPTY=(Object.defineProperty(vm.prototype,"key",{get:function(){throw lg()},enumerable:!1,configurable:!0}),Object.defineProperty(vm.prototype,"value",{get:function(){throw lg()},enumerable:!1,configurable:!0}),Object.defineProperty(vm.prototype,"color",{get:function(){throw lg()},enumerable:!1,configurable:!0}),Object.defineProperty(vm.prototype,"left",{get:function(){throw lg()},enumerable:!1,configurable:!0}),Object.defineProperty(vm.prototype,"right",{get:function(){throw lg()},enumerable:!1,configurable:!0}),vm.prototype.copy=function(t,e,n,r,i){return this},vm.prototype.nt=function(t,e,n){return new lm(t,e)},vm.prototype.remove=function(t,e){return this},vm.prototype._=function(){return!0},vm.prototype.ot=function(t){return!1},vm.prototype.ht=function(t){return!1},vm.prototype.it=function(){return null},vm.prototype.rt=function(){return null},vm.prototype.At=function(){return!1},vm.prototype.pt=function(){return!0},vm.prototype.bt=function(){return 0},new vm);var ym=(wm.prototype.has=function(t){return null!==this.data.get(t)},wm.prototype.first=function(){return this.data.it()},wm.prototype.last=function(){return this.data.rt()},Object.defineProperty(wm.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),wm.prototype.indexOf=function(t){return this.data.indexOf(t)},wm.prototype.forEach=function(n){this.data.ot(function(t,e){return n(t),!1})},wm.prototype.vt=function(t,e){for(var n=this.data.ut(t[0]);n.wt();){var r=n.dt();if(0<=this.P(r.key,t[1]))return;e(r.key)}},wm.prototype.St=function(t,e){for(var n=void 0!==e?this.data.ut(e):this.data.at();n.wt();)if(!t(n.dt().key))return},wm.prototype.Dt=function(t){var e=this.data.ut(t);return e.wt()?e.dt().key:null},wm.prototype.at=function(){return new gm(this.data.at())},wm.prototype.ut=function(t){return new gm(this.data.ut(t))},wm.prototype.add=function(t){return this.copy(this.data.remove(t).nt(t,!0))},wm.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},wm.prototype._=function(){return this.data._()},wm.prototype.Ct=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},wm.prototype.isEqual=function(t){if(!(t instanceof wm))return!1;if(this.size!==t.size)return!1;for(var e=this.data.at(),n=t.data.at();e.wt();){var r=e.dt().key,i=n.dt().key;if(0!==this.P(r,i))return!1}return!0},wm.prototype.$=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},wm.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},wm.prototype.copy=function(t){var e=new wm(this.P);return e.data=t,e},wm),gm=(bm.prototype.dt=function(){return this.$t.dt().key},bm.prototype.wt=function(){return this.$t.wt()},bm),mm=new cm(Fg.P);function bm(t){this.$t=t}function wm(t){this.P=t,this.data=new cm(this.P)}var _m=new cm(Fg.P);var Em=new cm(Fg.P),Im=new ym(Fg.P);function Tm(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Im,r=0,i=t;r<i.length;r++)var o=i[r],n=n.add(o);return n}var Sm=new ym(yg);function Cm(t,e,n,r){this.Zt=t,this.removedTargetIds=e,this.key=n,this.te=r}function Nm(t,e){this.targetId=t,this.ee=e}function Am(t,e,n,r){void 0===n&&(n=tm.Y),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}var km=(Bm.kt=function(t){return new Bm(t.P)},Bm.prototype.has=function(t){return null!=this.Ft.get(t)},Bm.prototype.get=function(t){return this.Ft.get(t)},Bm.prototype.first=function(){return this.Nt.it()},Bm.prototype.last=function(){return this.Nt.rt()},Bm.prototype._=function(){return this.Nt._()},Bm.prototype.indexOf=function(t){var e=this.Ft.get(t);return e?this.Nt.indexOf(e):-1},Object.defineProperty(Bm.prototype,"size",{get:function(){return this.Nt.size},enumerable:!1,configurable:!0}),Bm.prototype.forEach=function(n){this.Nt.ot(function(t,e){return n(t),!1})},Bm.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Ft.nt(t.key,t),e.Nt.nt(t,null))},Bm.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Ft.remove(t),this.Nt.remove(e)):this},Bm.prototype.isEqual=function(t){if(!(t instanceof Bm))return!1;if(this.size!==t.size)return!1;for(var e=this.Nt.at(),n=t.Nt.at();e.wt();){var r=e.dt().key,i=n.dt().key;if(!r.isEqual(i))return!1}return!0},Bm.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},Bm.prototype.copy=function(t,e){var n=new Bm;return n.P=this.P,n.Ft=t,n.Nt=e,n},Bm),Om=(qm.prototype.track=function(t){var e=t.doc.key,n=this.xt.get(e);!n||0!==t.type&&3===n.type?this.xt=this.xt.nt(e,t):3===t.type&&1!==n.type?this.xt=this.xt.nt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.xt=this.xt.nt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.xt=this.xt.nt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.xt=this.xt.remove(e):1===t.type&&2===n.type?this.xt=this.xt.nt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.xt=this.xt.nt(e,{type:2,doc:t.doc}):lg()},qm.prototype.Mt=function(){var n=[];return this.xt.ot(function(t,e){n.push(e)}),n},qm),Pm=(Vm.Ut=function(t,e,n,r){var i=[];return e.forEach(function(t){i.push({type:0,doc:t})}),new Vm(t,e,km.kt(e),i,n,r,!0,!1)},Object.defineProperty(Vm.prototype,"hasPendingWrites",{get:function(){return!this.Lt._()},enumerable:!1,configurable:!0}),Vm.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.qt===t.qt&&this.Lt.isEqual(t.Lt)&&t_(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Ot.isEqual(t.Ot)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},Vm),Rm=(jm.Gt=function(t,e){var n=new Map;return n.set(t,Dm.zt(t,e)),new jm(Rg.min(),n,Sm,mm,Tm())},jm),Dm=(Um.zt=function(t,e){return new Um(tm.Y,e,Tm(),Tm(),Tm())},Um),xm=(Object.defineProperty(Fm.prototype,"Ht",{get:function(){return this.re},enumerable:!1,configurable:!0}),Object.defineProperty(Fm.prototype,"resumeToken",{get:function(){return this.ie},enumerable:!1,configurable:!0}),Object.defineProperty(Fm.prototype,"he",{get:function(){return 0!==this.ne},enumerable:!1,configurable:!0}),Object.defineProperty(Fm.prototype,"ae",{get:function(){return this.oe},enumerable:!1,configurable:!0}),Fm.prototype.ue=function(t){0<t.H()&&(this.oe=!0,this.ie=t)},Fm.prototype.ce=function(){var n=Tm(),r=Tm(),i=Tm();return this.se.forEach(function(t,e){switch(e){case 0:n=n.add(t);break;case 2:r=r.add(t);break;case 1:i=i.add(t);break;default:lg()}}),new Dm(this.ie,this.re,n,r,i)},Fm.prototype.le=function(){this.oe=!1,this.se=Hm()},Fm.prototype._e=function(t,e){this.oe=!0,this.se=this.se.nt(t,e)},Fm.prototype.fe=function(t){this.oe=!0,this.se=this.se.remove(t)},Fm.prototype.de=function(){this.ne+=1},Fm.prototype.we=function(){--this.ne},Fm.prototype.Te=function(){this.oe=!0,this.re=!0},Fm),Lm=(Mm.prototype.Pe=function(t){for(var e=0,n=t.Zt;e<n.length;e++){var r=n[e];t.te instanceof Fw?this.ge(r,t.te):t.te instanceof Uw&&this.Ve(r,t.key,t.te)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s=o[i];this.Ve(s,t.key,t.te)}},Mm.prototype.ye=function(n){var r=this;this.pe(n,function(t){var e=r.be(t);switch(n.state){case 0:r.ve(t)&&e.ue(n.resumeToken);break;case 1:e.we(),e.he||e.le(),e.ue(n.resumeToken);break;case 2:e.we(),e.he||r.removeTarget(t);break;case 3:r.ve(t)&&(e.Te(),e.ue(n.resumeToken));break;case 4:r.ve(t)&&(r.Se(t),e.ue(n.resumeToken));break;default:lg()}})},Mm.prototype.pe=function(t,n){var r=this;0<t.targetIds.length?t.targetIds.forEach(n):this.Ie.forEach(function(t,e){r.ve(e)&&n(e)})},Mm.prototype.De=function(t){var e,n,r=t.targetId,i=t.ee.count,o=this.Ce(r);o&&(Zg(e=o.target)?0===i?(n=new Fg(e.path),this.Ve(r,n,new Uw(n,Rg.min()))):fg(1===i):this.$e(r)!==i&&(this.Se(r),this.Re=this.Re.add(r)))},Mm.prototype.Fe=function(i){var o=this,s=new Map;this.Ie.forEach(function(t,e){var n,r=o.Ce(e);r&&(t.Ht&&Zg(r.target)&&(n=new Fg(r.target.path),null!==o.me.get(n)||o.Ne(e,n)||o.Ve(e,n,new Uw(n,i))),t.ae&&(s.set(e,t.ce()),t.le()))});var r=Tm();this.Ae.forEach(function(t,e){var n=!0;e.St(function(t){var e=o.Ce(t);return!e||2===e.J||(n=!1)}),n&&(r=r.add(t))});var t=new Rm(i,s,this.Re,this.me,r);return this.me=mm,this.Ae=Wm(),this.Re=new ym(yg),t},Mm.prototype.ge=function(t,e){var n;this.ve(t)&&(n=this.Ne(t,e.key)?2:0,this.be(t)._e(e.key,n),this.me=this.me.nt(e.key,e),this.Ae=this.Ae.nt(e.key,this.ke(e.key).add(t)))},Mm.prototype.Ve=function(t,e,n){var r;this.ve(t)&&(r=this.be(t),this.Ne(t,e)?r._e(e,1):r.fe(e),this.Ae=this.Ae.nt(e,this.ke(e).delete(t)),n&&(this.me=this.me.nt(e,n)))},Mm.prototype.removeTarget=function(t){this.Ie.delete(t)},Mm.prototype.$e=function(t){var e=this.be(t).ce();return this.Ee.xe(t).size+e.Yt.size-e.Xt.size},Mm.prototype.de=function(t){this.be(t).de()},Mm.prototype.be=function(t){var e=this.Ie.get(t);return e||(e=new xm,this.Ie.set(t,e)),e},Mm.prototype.ke=function(t){var e=this.Ae.get(t);return e||(e=new ym(yg),this.Ae=this.Ae.nt(t,e)),e},Mm.prototype.ve=function(t){var e=null!==this.Ce(t);return e||ug("WatchChangeAggregator","Detected inactive target",t),e},Mm.prototype.Ce=function(t){var e=this.Ie.get(t);return e&&e.he?null:this.Ee.Me(t)},Mm.prototype.Se=function(e){var n=this;this.Ie.set(e,new xm),this.Ee.xe(e).forEach(function(t){n.Ve(e,t,null)})},Mm.prototype.Ne=function(t,e){return this.Ee.xe(t).has(e)},Mm);function Mm(t){this.Ee=t,this.Ie=new Map,this.me=mm,this.Ae=Wm(),this.Re=new ym(yg)}function Fm(){this.ne=0,this.se=Hm(),this.ie=tm.Y,this.re=!1,this.oe=!0}function Um(t,e,n,r,i){this.resumeToken=t,this.Ht=e,this.Yt=n,this.Jt=r,this.Xt=i}function jm(t,e,n,r,i){this.X=t,this.Wt=e,this.Qt=n,this.jt=r,this.Kt=i}function Vm(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Ot=n,this.docChanges=r,this.Lt=i,this.fromCache=o,this.qt=s,this.Bt=a}function qm(){this.xt=new cm(Fg.P)}function Bm(n){this.P=n?function(t,e){return n(t,e)||Fg.P(t.key,e.key)}:function(t,e){return Fg.P(t.key,e.key)},this.Ft=_m,this.Nt=new cm(this.P)}function Wm(){return new cm(Fg.P)}function Hm(){return new cm(Fg.P)}function Km(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Gm(t){var e=tb(t.mapValue.fields.__local_write_time__.timestampValue);return new Pg(e.seconds,e.nanos)}var zm=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qm(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Km(t)?4:10:lg()}function Xm(r,i){var t,e,n,o=Qm(r);if(o!==Qm(i))return!1;switch(o){case 0:return!0;case 1:return r.booleanValue===i.booleanValue;case 4:return Gm(r).isEqual(Gm(i));case 3:return function(t){if("string"==typeof r.timestampValue&&"string"==typeof t.timestampValue&&r.timestampValue.length===t.timestampValue.length)return r.timestampValue===t.timestampValue;var e=tb(r.timestampValue),n=tb(t.timestampValue);return e.seconds===n.seconds&&e.nanos===n.nanos}(i);case 5:return r.stringValue===i.stringValue;case 6:return n=i,nb(r.bytesValue).isEqual(nb(n.bytesValue));case 7:return r.referenceValue===i.referenceValue;case 8:return e=i,eb((t=r).geoPointValue.latitude)===eb(e.geoPointValue.latitude)&&eb(t.geoPointValue.longitude)===eb(e.geoPointValue.longitude);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return eb(t.integerValue)===eb(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=eb(t.doubleValue),r=eb(e.doubleValue);return n===r?zg(n)===zg(r):isNaN(n)&&isNaN(r)}return!1}(r,i);case 9:return gg(r.arrayValue.values||[],i.arrayValue.values||[],Xm);case 10:return function(){var t=r.mapValue.fields||{},e=i.mapValue.fields||{};if(Eg(t)!==Eg(e))return!1;for(var n in t)if(t.hasOwnProperty(n)&&(void 0===e[n]||!Xm(t[n],e[n])))return!1;return!0}();default:return lg()}}function Ym(t,e){return void 0!==(t.values||[]).find(function(t){return Xm(t,e)})}function Jm(t,e){var n,r,i,o,s,a,u,c,h,l,f=Qm(t),p=Qm(e);if(f!==p)return yg(f,p);switch(f){case 0:return 0;case 1:return yg(t.booleanValue,e.booleanValue);case 2:return c=e,(h=eb(t.integerValue||t.doubleValue))<(l=eb(c.integerValue||c.doubleValue))?-1:l<h?1:h===l?0:isNaN(h)?isNaN(l)?0:-1:1;case 3:return $m(t.timestampValue,e.timestampValue);case 4:return $m(Gm(t),Gm(e));case 5:return yg(t.stringValue,e.stringValue);case 6:return o=t.bytesValue,s=e.bytesValue,a=nb(o),u=nb(s),a.o(u);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=yg(n[i],r[i]);if(0!==o)return o}return yg(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return n=t.geoPointValue,r=e.geoPointValue,0!==(i=yg(eb(n.latitude),eb(r.latitude)))?i:yg(eb(n.longitude),eb(r.longitude));case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Jm(n[i],r[i]);if(o)return o}return yg(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=yg(r[s],o[s]);if(0!==a)return a;var u=Jm(n[r[s]],i[o[s]]);if(0!==u)return u}return yg(r.length,o.length)}(t.mapValue,e.mapValue);default:throw lg()}}function $m(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return yg(t,e);var n=tb(t),r=tb(e),i=yg(n.seconds,r.seconds);return 0!==i?i:yg(n.nanos,r.nanos)}function Zm(t){return function s(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?"time("+(t=tb(i.timestampValue)).seconds+","+t.nanos+")":"stringValue"in i?i.stringValue:"bytesValue"in i?nb(i.bytesValue).toBase64():"referenceValue"in i?(n=i.referenceValue,Fg.B(n).toString()):"geoPointValue"in i?"geo("+(e=i.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in i?function(){for(var t="[",e=!0,n=0,r=i.arrayValue.values||[];n<r.length;n++)e?e=!1:t+=",",t+=s(r[n]);return t+"]"}():"mapValue"in i?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+s(t.fields[o])}return e+"}"}(i.mapValue):lg();var t,e,n}(t)}function tb(t){if(fg(!!t),"string"!=typeof t)return{seconds:eb(t.seconds),nanos:eb(t.nanos)};var e,n=0,r=zm.exec(t);fg(!!r),r[1]&&(e=((e=r[1])+"000000000").substr(0,9),n=Number(e));var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:n}}function eb(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function nb(t){return"string"==typeof t?tm.fromBase64String(t):tm.fromUint8Array(t)}function rb(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.F()}}function ib(t){return t&&"integerValue"in t}function ob(t){return!!t&&"arrayValue"in t}function sb(t){return t&&"nullValue"in t}function ab(t){return t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ub(t){return t&&"mapValue"in t}var cb={asc:"ASCENDING",desc:"DESCENDING"},hb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lb=function(t,e){this.s=t,this.Oe=e};function fb(t){return{integerValue:""+t}}function pb(t,e){if(t.Oe){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zg(e)?"-0":e}}function db(t,e){return Qg(e)?fb(e):pb(t,e)}function vb(t,e){return t.Oe?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function yb(t,e){return t.Oe?e.toBase64():e.toUint8Array()}function gb(t){return fg(!!t),Rg.I((e=tb(t),new Pg(e.seconds,e.nanos)));var e}function mb(t,e){return new xg(["projects",t.projectId,"databases",t.database]).child("documents").child(e).F()}function bb(t){var e=xg.N(t);return fg(Lb(e)),e}function wb(t,e){return mb(t.s,e.path)}function _b(t,e){var n=bb(e);return fg(n.get(1)===t.s.projectId),fg(!n.get(3)&&!t.s.database||n.get(3)===t.s.database),new Fg(Sb(n))}function Eb(t,e){return mb(t.s,e)}function Ib(t){var e=bb(t);return 4===e.length?xg.k():Sb(e)}function Tb(t){return new xg(["projects",t.s.projectId,"databases",t.s.database]).F()}function Sb(t){return fg(4<t.length&&"documents"===t.get(4)),t.V(5)}function Cb(t,e,n){return{name:wb(t,e),fields:n.proto.mapValue.fields}}function Nb(t,e){var n,r,i,o;if(e instanceof pw)n={update:Cb(t,e.key,e.value)};else if(e instanceof Tw)n={delete:wb(t,e.key)};else if(e instanceof dw)n={update:Cb(t,e.key,e.data),updateMask:(r=e.Le,i=[],r.fields.forEach(function(t){return i.push(t.F())}),{fieldPaths:i})};else if(e instanceof bw)n={transform:{document:wb(t,e.key),fieldTransforms:e.fieldTransforms.map(function(t){var e=t.transform;if(e instanceof Vb)return{fieldPath:t.field.F(),setToServerValue:"REQUEST_TIME"};if(e instanceof qb)return{fieldPath:t.field.F(),appendMissingElements:{values:e.elements}};if(e instanceof Gb)return{fieldPath:t.field.F(),removeAllFromArray:{values:e.elements}};if(e instanceof Yb)return{fieldPath:t.field.F(),increment:e.qe};throw lg()})}};else{if(!(e instanceof Sw))return lg();n={verify:wb(t,e.key)}}return e.Ue.Be||(n.currentDocument=void 0!==(o=e.Ue).updateTime?{updateTime:vb(t,o.updateTime.A())}:void 0!==o.exists?{exists:o.exists}:lg()),n}function Ab(e,t){var n,r,i=t.currentDocument?void 0!==(n=t.currentDocument).updateTime?iw.updateTime(gb(n.updateTime)):void 0!==n.exists?iw.exists(n.exists):iw.We():iw.We();if(t.update){t.update.name;var o=_b(e,t.update.name),s=new Cw({mapValue:{fields:t.update.fields}});if(t.updateMask){var a=(r=t.updateMask.fieldPaths||[],new tw(r.map(function(t){return Mg.q(t)})));return new dw(o,s,a,i)}return new pw(o,s,i)}if(t.delete){var u=_b(e,t.delete);return new Tw(u,i)}if(t.transform){var c=_b(e,t.transform.document),h=t.transform.fieldTransforms.map(function(t){return function(t,e){var n,r,i=null;"setToServerValue"in e?(fg("REQUEST_TIME"===e.setToServerValue),i=new Vb):"appendMissingElements"in e?(n=e.appendMissingElements.values||[],i=new qb(n)):"removeAllFromArray"in e?(r=e.removeAllFromArray.values||[],i=new Gb(r)):"increment"in e?i=new Yb(t,e.increment):lg();var o=Mg.q(e.fieldPath);return new ew(o,i)}(e,t)});return fg(!0===i.exists),new bw(c,h)}if(t.verify){var l=_b(e,t.verify);return new Sw(l,i)}return lg()}function kb(t,e){return{documents:[Eb(t,e.path)]}}function Ob(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Eb(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Eb(t,r.p()),n.structuredQuery.from=[{collectionId:r.S()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return t instanceof s_?function(t){if("=="===t.op){if(ab(t.value))return{unaryFilter:{field:Db(t.field),op:"IS_NAN"}};if(sb(t.value))return{unaryFilter:{field:Db(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:Db(t.field),op:(e=t.op,hb[e]),value:t.value}};var e}(t):lg()});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return{field:Db((e=t).field),direction:(n=e.dir,cb[n])};var e,n})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s,a=(s=e.limit,t.Oe||Gg(s)?s:{value:s});return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=Pb(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Pb(e.endAt)),n}function Pb(t){return{before:t.before,values:t.position}}function Rb(t){var e=!!t.before,n=t.values||[];return new m_(n,e)}function Db(t){return{fieldPath:t.F()}}function xb(t){return Mg.q(t.fieldPath)}function Lb(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)}function Mb(){this.Qe=void 0}function Fb(t,e){return t instanceof Yb?ib(n=e)||n&&"doubleValue"in n?e:{integerValue:0}:null;var n}var Ub,jb,Vb=(Ls(Wb,jb=Mb),Wb),qb=(Ls(Bb,Ub=Mb),Bb);function Bb(t){var e=this;return(e=Ub.call(this)||this).elements=t,e}function Wb(){return null!==jb&&jb.apply(this,arguments)||this}function Hb(t,e){for(var n=Zb(e),r=function(e){n.some(function(t){return Xm(t,e)})||n.push(e)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Kb,Gb=(Ls(zb,Kb=Mb),zb);function zb(t){var e=this;return(e=Kb.call(this)||this).elements=t,e}function Qb(t,e){for(var n=Zb(e),r=function(e){n=n.filter(function(t){return!Xm(t,e)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Xb,Yb=(Ls(Jb,Xb=Mb),Jb);function Jb(t,e){var n=this;return(n=Xb.call(this)||this).serializer=t,n.qe=e,n}function $b(t){return eb(t.integerValue||t.doubleValue)}function Zb(t){return ob(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var tw=(nw.prototype.je=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].D(t))return!0;return!1},nw.prototype.isEqual=function(t){return gg(this.fields,t.fields,function(t,e){return t.isEqual(e)})},nw),ew=function(t,e){this.field=t,this.transform=e};function nw(t){(this.fields=t).sort(Mg.P)}function rw(t,e){this.version=t,this.transformResults=e}var iw=(ow.We=function(){return new ow},ow.exists=function(t){return new ow(void 0,t)},ow.updateTime=function(t){return new ow(t)},Object.defineProperty(ow.prototype,"Be",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),ow.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},ow);function ow(t,e){this.updateTime=t,this.exists=e}function sw(t,e){return void 0!==t.updateTime?e instanceof Fw&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Fw}function aw(){}function uw(t,e,n,r){return t instanceof pw?function(t,e){if(!sw(t.Ue,e))return e;var n=hw(e);return new Fw(t.key,n,t.value,{Ke:!0})}(t,e):t instanceof dw?function(t,e){if(!sw(t.Ue,e))return e;var n=hw(e),r=gw(t,e);return new Fw(t.key,n,r,{Ke:!0})}(t,e):t instanceof bw?function(t,e,n,r){if(!sw(t.Ue,e))return e;var i=e,o=function(t,e,n,r){for(var i,o,s,a,u,c,h=[],l=0,f=t;l<f.length;l++){var p=f[l],d=p.transform,v=null;n instanceof Fw&&(v=n.field(p.field)),null===v&&r instanceof Fw&&(v=r.field(p.field)),h.push((o=v,c=u=a=s=void 0,(i=d)instanceof Vb?(c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}},o&&(c.fields.__previous_value__=o),{mapValue:c}):i instanceof qb?Hb(i,o):i instanceof Gb?Qb(i,o):(u=$b(a=Fb(s=i,o))+$b(s.qe),ib(a)&&ib(s.qe)?fb(u):pb(s.serializer,u))))}return h}(t.fieldTransforms,n,e,r),s=_w(t,i.data(),o);return new Fw(t.key,i.version,s,{Ke:!0})}(t,e,r,n):(o=e,sw((i=t).Ue,o)?new Uw(i.key,Rg.min()):o);var i,o}function cw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Ue.isEqual(e.Ue)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.Le.isEqual(e.Le):2!==t.type||gg(t.fieldTransforms,t.fieldTransforms,function(t,e){return r=e,(n=t).field.isEqual(r.field)&&(i=n.transform,o=r.transform,i instanceof qb&&o instanceof qb||i instanceof Gb&&o instanceof Gb?gg(i.elements,o.elements,Xm):i instanceof Yb&&o instanceof Yb?Xm(i.qe,o.qe):i instanceof Vb&&o instanceof Vb);var n,r,i,o}))}function hw(t){return t instanceof Fw?t.version:Rg.min()}var lw,fw,pw=(Ls(yw,fw=aw),yw),dw=(Ls(vw,lw=aw),vw);function vw(t,e,n,r){var i=this;return(i=lw.call(this)||this).key=t,i.data=e,i.Le=n,i.Ue=r,i.type=1,i}function yw(t,e,n){var r=this;return(r=fw.call(this)||this).key=t,r.value=e,r.Ue=n,r.type=0,r}function gw(t,e){return n=t,r=e instanceof Fw?e.data():Cw.empty(),i=new Nw(r),n.Le.fields.forEach(function(t){var e;t._()||(null!==(e=n.data.field(t))?i.set(t,e):i.delete(t))}),i.Ge();var n,r,i}var mw,bw=(Ls(ww,mw=aw),ww);function ww(t,e){var n=this;return(n=mw.call(this)||this).key=t,n.fieldTransforms=e,n.type=2,n.Ue=iw.exists(!0),n}function _w(t,e,n){for(var r=new Nw(e),i=0;i<t.fieldTransforms.length;i++){var o=t.fieldTransforms[i];r.set(o.field,n[i])}return r.Ge()}var Ew,Iw,Tw=(Ls(Pw,Iw=aw),Pw),Sw=(Ls(Ow,Ew=aw),Ow),Cw=(kw.empty=function(){return new kw({mapValue:{}})},kw.prototype.field=function(t){if(t._())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!ub(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.S()])||null},kw.prototype.isEqual=function(t){return Xm(this.proto,t.proto)},kw),Nw=(Aw.prototype.set=function(t,e){return this.Ye(t,e),this},Aw.prototype.delete=function(t){return this.Ye(t,null),this},Aw.prototype.Ye=function(t,e){for(var n=this.He,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map||(o=o&&10===Qm(o)?new Map(Object.entries(o.mapValue.fields||{})):new Map,n.set(i,o)),n=o}n.set(t.S(),e)},Aw.prototype.Ge=function(){var t=this.Je(Mg.k(),this.He);return null!=t?new Cw(t):this.ze},Aw.prototype.Je=function(r,t){var i=this,o=!1,e=this.ze.field(r),s=ub(e)?Object.assign({},e.mapValue.fields):{};return t.forEach(function(t,e){var n;t instanceof Map?null!=(n=i.Je(r.child(e),t))&&(s[e]=n,o=!0):null!==t?(s[e]=t,o=!0):s.hasOwnProperty(e)&&(delete s[e],o=!0)}),o?{mapValue:{fields:s}}:null},Aw);function Aw(t){void 0===t&&(t=Cw.empty()),this.ze=t,this.He=new Map}function kw(t){this.proto=t}function Ow(t,e){var n=this;return(n=Ew.call(this)||this).key=t,n.Ue=e,n.type=4,n}function Pw(t,e){var n=this;return(n=Iw.call(this)||this).key=t,n.Ue=e,n.type=3,n}function Rw(t){var a=[];return Ig(t.fields||{},function(t,e){var n=new Mg([t]);if(ub(e)){var r=Rw(e.mapValue).fields;if(0===r.length)a.push(n);else for(var i=0,o=r;i<o.length;i++){var s=o[i];a.push(n.child(s))}}else a.push(n)}),new tw(a)}function Dw(t,e){this.key=t,this.version=e}var xw,Lw,Mw,Fw=(Ls(Bw,Mw=Dw),Bw.prototype.field=function(t){return this.Xe.field(t)},Bw.prototype.data=function(){return this.Xe},Bw.prototype.Ze=function(){return this.Xe.proto},Bw.prototype.isEqual=function(t){return t instanceof Bw&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Ke===t.Ke&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Xe.isEqual(t.Xe)},Bw.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Xe.toString()+", {hasLocalMutations: "+this.Ke+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(Bw.prototype,"hasPendingWrites",{get:function(){return this.Ke||this.hasCommittedMutations},enumerable:!1,configurable:!0}),Bw),Uw=(Ls(qw,Lw=Dw),qw.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(qw.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),qw.prototype.isEqual=function(t){return t instanceof qw&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},qw),jw=(Ls(Vw,xw=Dw),Vw.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(Vw.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),Vw.prototype.isEqual=function(t){return t instanceof Vw&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},Vw);function Vw(){return null!==xw&&xw.apply(this,arguments)||this}function qw(t,e,n){var r=this;return(r=Lw.call(this,t,e)||this).hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}function Bw(t,e,n,r){var i=this;return(i=Mw.call(this,t,e)||this).Xe=n,i.Ke=!!r.Ke,i.hasCommittedMutations=!!r.hasCommittedMutations,i}function Ww(t,e){if(!(t instanceof e))throw e.name===t.constructor.name?new Og(kg.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass '"+e.name+"' from a different Firestore SDK?"):new Og(kg.INVALID_ARGUMENT,"Expected type '"+e.name+"', but was '"+t.constructor.name+"'");return t}var Hw=(Kw.prototype.rn=function(t){return new Kw(t,null,this.tn.slice(),this.filters.slice(),this.limit,this.en,this.startAt,this.endAt)},Kw.prototype.on=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.tn.length||1===this.tn.length&&this.tn[0].field.O())},Kw.prototype.hn=function(){return!Gg(this.limit)&&"F"===this.en},Kw.prototype.an=function(){return!Gg(this.limit)&&"L"===this.en},Kw.prototype.un=function(){return 0<this.tn.length?this.tn[0].field:null},Kw.prototype.cn=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n.ln())return n.field}return null},Kw.prototype._n=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(0<=t.indexOf(r.op))return r.op}return null},Kw);function Kw(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.tn=n,this.filters=r,this.limit=i,this.en=o,this.startAt=s,this.endAt=a,this.nn=null,this.sn=null,this.startAt,this.endAt}function Gw(t,e,n,r,i,o,s,a){return new Hw(t,e,n,r,i,o,s,a)}function zw(t){return new Hw(t)}function Qw(t){return null!==t.collectionGroup}function Xw(t){var e=Ww(t,Hw);if(null===e.nn){e.nn=[];var n=e.cn(),r=e.un();if(null!==n&&null===r)n.O()||e.nn.push(new N_(n)),e.nn.push(new N_(Mg.L(),"asc"));else{for(var i,o=!1,s=0,a=e.tn;s<a.length;s++){var u=a[s];e.nn.push(u),u.field.O()&&(o=!0)}o||(i=0<e.tn.length?e.tn[e.tn.length-1].dir:"asc",e.nn.push(new N_(Mg.L(),i)))}}return e.nn}function Yw(t){var e=Ww(t,Hw);if(!e.sn)if("F"===e.en)e.sn=Yg(e.path,e.collectionGroup,Xw(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Xw(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new N_(o.field,s))}var a=e.endAt?new m_(e.endAt.position,!e.endAt.before):null,u=e.startAt?new m_(e.startAt.position,!e.startAt.before):null;e.sn=Yg(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.sn}function Jw(t,e,n){return new Hw(t.path,t.collectionGroup,t.tn.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $w(t,e){return new Hw(t.path,t.collectionGroup,t.tn.slice(),t.filters.slice(),t.limit,t.en,e,t.endAt)}function Zw(t,e){return new Hw(t.path,t.collectionGroup,t.tn.slice(),t.filters.slice(),t.limit,t.en,t.startAt,e)}function t_(t,e){return $g(Yw(t),Yw(e))&&t.en===e.en}function e_(t){return Jg(Yw(t))+"|lt:"+t.en}function n_(t){return"Query(target="+(n=(e=Yw(t)).path.F(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),0<e.filters.length&&(n+=", filters: ["+e.filters.map(function(t){return(e=t).field.F()+" "+e.op+" "+Zm(e.value);var e}).join(", ")+"]"),Gg(e.limit)||(n+=", limit: "+e.limit),0<e.orderBy.length&&(n+=", orderBy: ["+e.orderBy.map(function(t){return(e=t).field.F()+" ("+e.dir+")";var e}).join(", ")+"]"),e.startAt&&(n+=", startAt: "+T_(e.startAt)),e.endAt&&(n+=", endAt: "+T_(e.endAt)),"Target("+n+")")+"; limitType="+t.en+")";var e,n}function r_(i,t){return r=i,o=t.key.path,(null!==r.collectionGroup?t.key.U(r.collectionGroup)&&r.path.D(o):Fg.W(r.path)?r.path.isEqual(o):r.path.C(o))&&function(t){for(var e=0,n=i.tn;e<n.length;e++){var r=n[e];if(!r.field.O()&&null===t.field(r.field))return}return 1}(t)&&function(t){for(var e=0,n=i.filters;e<n.length;e++)if(!n[e].matches(t))return;return 1}(t)&&(n=t,(!(e=i).startAt||S_(e.startAt,Xw(e),n))&&(!e.endAt||!S_(e.endAt,Xw(e),n)));var e,n,r,o}function i_(a){return function(t,e){for(var n=!1,r=0,i=Xw(a);r<i.length;r++){var o=i[r],s=A_(o,t,e);if(0!==s)return s;n=n||o.field.O()}return 0}}var o_,s_=(Ls(a_,o_=function(){}),a_.create=function(t,e,n){if(t.O())return"in"===e?new d_(t,n):new p_(t,e,n);if(sb(n)){if("=="!==e)throw new Og(kg.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new a_(t,e,n)}if(ab(n)){if("=="!==e)throw new Og(kg.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new a_(t,e,n)}return"array-contains"===e?new v_(t,n):"in"===e?new y_(t,n):"array-contains-any"===e?new g_(t,n):new a_(t,e,n)},a_.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Qm(this.value)===Qm(e)&&this.fn(Jm(e,this.value))},a_.prototype.fn=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case">":return 0<t;case">=":return 0<=t;default:return lg()}},a_.prototype.ln=function(){return 0<=["<","<=",">",">="].indexOf(this.op)},a_);function a_(t,e,n){var r=this;return(r=o_.call(this)||this).field=t,r.op=e,r.value=n,r}var u_,c_,h_,l_,f_,p_=(Ls(I_,f_=s_),I_.prototype.matches=function(t){var e=Fg.P(t.key,this.key);return this.fn(e)},I_),d_=(Ls(E_,l_=s_),E_.prototype.matches=function(e){return this.keys.some(function(t){return t.isEqual(e.key)})},E_),v_=(Ls(__,h_=s_),__.prototype.matches=function(t){var e=t.field(this.field);return ob(e)&&Ym(e.arrayValue,this.value)},__),y_=(Ls(w_,c_=s_),w_.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Ym(this.value.arrayValue,e)},w_),g_=(Ls(b_,u_=s_),b_.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!ob(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Ym(e.value.arrayValue,t)})},b_),m_=function(t,e){this.position=t,this.before=e};function b_(t,e){return u_.call(this,t,"array-contains-any",e)||this}function w_(t,e){return c_.call(this,t,"in",e)||this}function __(t,e){return h_.call(this,t,"array-contains",e)||this}function E_(t,e){var n=this;return(n=l_.call(this,t,"in",e)||this).keys=(e.arrayValue.values||[]).map(function(t){return Fg.B(t.referenceValue)}),n}function I_(t,e,n){var r=this;return(r=f_.call(this,t,e,n)||this).key=Fg.B(n.referenceValue),r}function T_(t){return(t.before?"b":"a")+":"+t.position.map(Zm).join(",")}function S_(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i],r=o.field.O()?Fg.P(Fg.B(s.referenceValue),n.key):Jm(s,n.field(o.field));if("desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function C_(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Xm(t.position[n],e.position[n]))return!1;return!0}var N_=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function A_(t,e,n){var r,i,o,s,a=t.field.O()?Fg.P(e.key,n.key):(r=t.field,i=n,o=e.field(r),s=i.field(r),null!==o&&null!==s?Jm(o,s):lg());switch(t.dir){case"asc":return a;case"desc":return-1*a;default:return lg()}}var k_=(K_.prototype.wn=function(t,e,n){for(var r,i,o,s=n.Tn,a=0;a<this.mutations.length;a++){var u=this.mutations[a];u.key.isEqual(t)&&(r=u,i=e,o=s[a],e=r instanceof pw?new Fw(r.key,o.version,r.value,{hasCommittedMutations:!0}):r instanceof dw?function(t,e,n){if(!sw(t.Ue,e))return new jw(t.key,n.version);var r=gw(t,e);return new Fw(t.key,n.version,r,{hasCommittedMutations:!0})}(r,i,o):r instanceof bw?function(t,e,n){if(fg(null!=n.transformResults),!sw(t.Ue,e))return new jw(t.key,n.version);var r=e,i=function(t,e,n){var r,i,o,s=[];fg(t.length===n.length);for(var a=0;a<n.length;a++){var u=t[a],c=u.transform,h=null;e instanceof Fw&&(h=e.field(u.field)),s.push((r=c,i=h,o=n[a],r instanceof qb?Hb(r,i):r instanceof Gb?Qb(r,i):o))}return s}(t.fieldTransforms,e,n.transformResults),o=n.version,s=_w(t,r.data(),i);return new Fw(t.key,o,s,{hasCommittedMutations:!0})}(r,i,o):new Uw(r.key,o.version,{hasCommittedMutations:!0}))}return e},K_.prototype.En=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=uw(i,e,e,this.dn))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=uw(u,e,o,this.dn))}return e},K_.prototype.In=function(n){var r=this,i=n;return this.mutations.forEach(function(t){var e=r.En(t.key,n.get(t.key));e&&(i=i.nt(t.key,e))}),i},K_.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Tm())},K_.prototype.isEqual=function(t){return this.batchId===t.batchId&&gg(this.mutations,t.mutations,cw)&&gg(this.baseMutations,t.baseMutations,cw)},K_),O_=(H_.from=function(t,e,n){fg(t.mutations.length===n.length);for(var r=Em,i=t.mutations,o=0;o<i.length;o++)r=r.nt(i[o].key,n[o].version);return new H_(t,e,n,r)},H_),P_=(W_.prototype.catch=function(t){return this.next(void 0,t)},W_.prototype.next=function(r,i){var o=this;return this.Vn&&lg(),this.Vn=!0,this.gn?this.error?this.yn(i,this.error):this.pn(r,this.result):new W_(function(e,n){o.Rn=function(t){o.pn(r,t).next(e,n)},o.Pn=function(t){o.yn(i,t).next(e,n)}})},W_.prototype.bn=function(){var n=this;return new Promise(function(t,e){n.next(t,e)})},W_.prototype.vn=function(t){try{var e=t();return e instanceof W_?e:W_.resolve(e)}catch(t){return W_.reject(t)}},W_.prototype.pn=function(t,e){return t?this.vn(function(){return t(e)}):W_.resolve(e)},W_.prototype.yn=function(t,e){return t?this.vn(function(){return t(e)}):W_.reject(e)},W_.resolve=function(n){return new W_(function(t,e){t(n)})},W_.reject=function(n){return new W_(function(t,e){e(n)})},W_.Sn=function(t){return new W_(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(t){return n(t)})}),o=!0,i===r&&e()})},W_.Dn=function(t){for(var n=W_.resolve(!1),e=function(e){n=n.next(function(t){return t?W_.resolve(t):e()})},r=0,i=t;r<i.length;r++)e(i[r]);return n},W_.forEach=function(t,n){var r=this,i=[];return t.forEach(function(t,e){i.push(n.call(r,t,e))}),this.Sn(i)},W_),R_=(Object.defineProperty(B_.prototype,"readTime",{get:function(){return this.Fn},set:function(t){this.Fn=t},enumerable:!1,configurable:!0}),B_.prototype.Nn=function(t,e){this.kn(),this.readTime=e,this.Cn.set(t.key,t)},B_.prototype.xn=function(t,e){this.kn(),e&&(this.readTime=e),this.Cn.set(t,null)},B_.prototype.Mn=function(t,e){this.kn();var n=this.Cn.get(e);return void 0!==n?P_.resolve(n):this.On(t,e)},B_.prototype.getEntries=function(t,e){return this.Ln(t,e)},B_.prototype.apply=function(t){return this.kn(),this.$n=!0,this.qn(t)},B_.prototype.kn=function(){},B_),D_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",x_=(q_.prototype.Un=function(t){this.Bn.push(t)},q_.prototype.Wn=function(){this.Bn.forEach(function(t){return t()})},q_),L_=(V_.prototype.Gn=function(e,n){var r=this;return this.jn.zn(e,n).next(function(t){return r.Hn(e,n,t)})},V_.prototype.Hn=function(t,r,i){return this.Qn.Mn(t,r).next(function(t){for(var e=0,n=i;e<n.length;e++)t=n[e].En(r,t);return t})},V_.prototype.Yn=function(t,e,i){var o=mm;return e.forEach(function(t,e){for(var n=0,r=i;n<r.length;n++)e=r[n].En(t,e);o=o.nt(t,e)}),o},V_.prototype.Jn=function(e,t){var n=this;return this.Qn.getEntries(e,t).next(function(t){return n.Xn(e,t)})},V_.prototype.Xn=function(r,i){var o=this;return this.jn.Zn(r,i).next(function(t){var e=o.Yn(r,i,t),n=mm;return e.forEach(function(t,e){e=e||new Uw(t,Rg.min()),n=n.nt(t,e)}),n})},V_.prototype.ts=function(t,e,n){return r=e,Fg.W(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.es(t,e.path):Qw(e)?this.ns(t,e,n):this.ss(t,e,n);var r},V_.prototype.es=function(t,e){return this.Gn(t,new Fg(e)).next(function(t){var e=_m;return t instanceof Fw&&(e=e.nt(t.key,t)),e})},V_.prototype.ns=function(n,r,i){var o=this,s=r.collectionGroup,a=_m;return this.Kn.rs(n,s).next(function(t){return P_.forEach(t,function(t){var e=r.rn(t.child(s));return o.ss(n,e,i).next(function(t){t.forEach(function(t,e){a=a.nt(t,e)})})}).next(function(){return a})})},V_.prototype.ss=function(e,n,t){var h,l,r=this;return this.Qn.ts(e,n,t).next(function(t){return h=t,r.jn.os(e,n)}).next(function(t){return l=t,r.hs(e,l,h).next(function(t){h=t;for(var e=0,n=l;e<n.length;e++)for(var r=n[e],i=0,o=r.mutations;i<o.length;i++){var s=o[i],a=s.key,u=h.get(a),c=uw(s,u,u,r.dn);h=c instanceof Fw?h.nt(a,c):h.remove(a)}})}).next(function(){return h.forEach(function(t,e){r_(n,e)||(h=h.remove(t))}),h})},V_.prototype.hs=function(t,e,n){for(var r=Tm(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof dw&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Qn.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof Fw&&(c=c.nt(t,e))}),c})},V_),M_=(j_.cs=function(t,e){for(var n=Tm(),r=Tm(),i=0,o=e.docChanges;i<o.length;i++){var s=o[i];switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}}return new j_(t,e.fromCache,n,r)},j_),F_=(U_.prototype._s=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},U_.prototype.next=function(){var t=++this.previousValue;return this.fs&&this.fs(t),t},U_);function U_(t,e){var n=this;this.previousValue=t,e&&(e.ls=function(t){return n._s(t)},this.fs=function(t){return e.ds(t)})}function j_(t,e,n,r){this.targetId=t,this.fromCache=e,this.as=n,this.us=r}function V_(t,e,n){this.Qn=t,this.jn=e,this.Kn=n}function q_(){this.Bn=[]}function B_(){this.Cn=new Ag(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.$n=!1}function W_(t){var e=this;this.Rn=null,this.Pn=null,this.result=void 0,this.error=void 0,this.gn=!1,this.Vn=!1,t(function(t){e.gn=!0,e.result=t,e.Rn&&e.Rn(t)},function(t){e.gn=!0,e.error=t,e.Pn&&e.Pn(t)})}function H_(t,e,n,r){this.batch=t,this.mn=e,this.Tn=n,this.An=r}function K_(t,e,n,r){this.batchId=t,this.dn=e,this.baseMutations=n,this.mutations=r}function G_(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}F_.ws=-1;var z_=(Q_.prototype.reset=function(){this.Rs=0},Q_.prototype.Vs=function(){this.Rs=this.As},Q_.prototype.ys=function(t){var e=this;this.cancel();var n=Math.floor(this.Rs+this.ps()),r=Math.max(0,Date.now()-this.gs),i=Math.max(0,n-r);0<i&&ug("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Rs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ps=this.Ts.bs(this.Es,i,function(){return e.gs=Date.now(),t()}),this.Rs*=this.ms,this.Rs<this.Is&&(this.Rs=this.Is),this.Rs>this.As&&(this.Rs=this.As)},Q_.prototype.vs=function(){null!==this.Ps&&(this.Ps.Ss(),this.Ps=null)},Q_.prototype.cancel=function(){null!==this.Ps&&(this.Ps.cancel(),this.Ps=null)},Q_.prototype.ps=function(){return(Math.random()-.5)*this.Rs},Q_);function Q_(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Ts=t,this.Es=e,this.Is=n,this.ms=r,this.As=i,this.Rs=0,this.Ps=null,this.gs=Date.now(),this.reset()}function X_(t){for(var e="",n=0;n<t.length;n++)0<e.length&&(e=J_(e)),e=Y_(t.get(n),e);return J_(e)}function Y_(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function J_(t){return t+""}function $_(t){var e=t.length;if(fg(2<=e),2===e)return fg(""===t.charAt(0)&&""===t.charAt(1)),xg.k();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||n<s)&&lg(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:lg()}o=s+2}return new xg(r)}var Z_=(iE.prototype.Cs=function(t,e){return this.Ds.add(e),P_.resolve()},iE.prototype.rs=function(t,e){return P_.resolve(this.Ds.getEntries(e))},iE),tE=(rE.prototype.add=function(t){var e=t.S(),n=t.p(),r=this.index[e]||new ym(xg.P),i=!r.has(n);return this.index[e]=r.add(n),i},rE.prototype.has=function(t){var e=t.S(),n=t.p(),r=this.index[e];return r&&r.has(n)},rE.prototype.getEntries=function(t){return(this.index[t]||new ym(xg.P)).$()},rE),eE=(nE.prototype.Cs=function(t,e){var n=this;if(this.$s.has(e))return P_.resolve();var r=e.S(),i=e.p();t.Un(function(){n.$s.add(e)});var o={collectionId:r,parent:X_(i)};return oE(t).put(o)},nE.prototype.rs=function(t,i){var o=[],e=IDBKeyRange.bound([i,""],[mg(i),""],!1,!0);return oE(t).Fs(e).next(function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if(r.collectionId!==i)break;o.push($_(r.parent))}return o})},nE);function nE(){this.$s=new tE}function rE(){this.index={}}function iE(){this.Ds=new tE}function oE(t){return xE.Ns(t,fI.store)}function sE(t){this.ks=t}function aE(t,e){if(e.document)return n=t.ks,r=e.document,i=!!e.hasCommittedMutations,o=_b(n,r.name),s=gb(r.updateTime),a=new Cw({mapValue:{fields:r.fields}}),new Fw(o,s,a,{hasCommittedMutations:!!i});var n,r,i,o,s,a;if(e.noDocument){var u=Fg.j(e.noDocument.path),c=fE(e.noDocument.readTime);return new Uw(u,c,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var h=Fg.j(e.unknownDocument.path),l=fE(e.unknownDocument.version);return new jw(h,l)}return lg()}function uE(t,e,n){var r,i,o=cE(n),s=e.key.path.p().$();if(e instanceof Fw){var a={name:wb(r=t.ks,(i=e).key),fields:i.Ze().mapValue.fields,updateTime:vb(r,i.version.A())},u=e.hasCommittedMutations;return new aI(null,null,a,u,o,s)}if(e instanceof Uw){var c=e.key.path.$(),h=lE(e.version),l=e.hasCommittedMutations;return new aI(null,new oI(c,h),null,l,o,s)}if(e instanceof jw){var f=e.key.path.$(),p=lE(e.version);return new aI(new sI(f,p),null,null,!0,o,s)}return lg()}function cE(t){var e=t.A();return[e.seconds,e.nanoseconds]}function hE(t){var e=new Pg(t[0],t[1]);return Rg.I(e)}function lE(t){var e=t.A();return new $E(e.seconds,e.nanoseconds)}function fE(t){var e=new Pg(t.seconds,t.nanoseconds);return Rg.I(e)}function pE(e,t){var n=(t.baseMutations||[]).map(function(t){return Ab(e.ks,t)}),r=t.mutations.map(function(t){return Ab(e.ks,t)}),i=Pg.fromMillis(t.localWriteTimeMs);return new k_(t.batchId,i,n,r)}function dE(t){var e,n=fE(t.readTime),r=void 0!==t.lastLimboFreeSnapshotVersion?fE(t.lastLimboFreeSnapshotVersion):Rg.min(),i=void 0!==t.query.documents?(fg(1===(e=t.query).documents.length),Yw(zw(Ib(e.documents[0])))):function(t){var e,n=Ib(t.parent),r=t.structuredQuery,i=r.from?r.from.length:0,o=null;0<i&&(fg(1===i),(e=r.from[0]).allDescendants?o=e.collectionId:n=n.child(e.collectionId));var s=[];r.where&&(s=function t(e){return e?void 0!==e.unaryFilter?[function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=xb(t.unaryFilter.field);return s_.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=xb(t.unaryFilter.field);return s_.create(n,"==",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return lg()}}(e)]:void 0!==e.fieldFilter?[(n=e,s_.create(xb(n.fieldFilter.field),function(){switch(n.fieldFilter.op){case"EQUAL":return"==";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return lg()}}(),n.fieldFilter.value))]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(t).reduce(function(t,e){return t.concat(e)}):lg():[];var n}(r.where));var a=[];r.orderBy&&(a=r.orderBy.map(function(t){return new N_(xb((e=t).field),function(){switch(e.direction){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}());var e}));var u,c,h=null;r.limit&&(h=Gg(c="object"==typeof(u=r.limit)?u.value:u)?null:c);var l=null;r.startAt&&(l=Rb(r.startAt));var f=null;return r.endAt&&(f=Rb(r.endAt)),Yw(Gw(n,o,a,s,h,"F",l,f))}(t.query);return new om(i,t.targetId,0,t.lastListenSequenceNumber,n,r,tm.fromBase64String(t.resumeToken))}function vE(t,e){var n=lE(e.X),r=lE(e.lastLimboFreeSnapshotVersion),i=(Zg(e.target)?kb:Ob)(t.ks,e.target),o=e.resumeToken.toBase64();return new cI(e.targetId,Jg(e.target),n,o,e.sequenceNumber,r,i)}var yE,gE=(mE.prototype.Nn=function(t,e,n){return wE(t).put(_E(e),n)},mE.prototype.xn=function(t,e){var n=wE(t),r=_E(e);return n.delete(r)},mE.prototype.updateMetadata=function(e,n){var r=this;return this.getMetadata(e).next(function(t){return t.byteSize+=n,r.xs(e,t)})},mE.prototype.Mn=function(t,e){var n=this;return wE(t).get(_E(e)).next(function(t){return n.Ms(t)})},mE.prototype.Os=function(t,e){var n=this;return wE(t).get(_E(e)).next(function(t){var e=n.Ms(t);return e?{Ls:e,size:EE(t)}:null})},mE.prototype.getEntries=function(t,e){var r=this,i=mm;return this.qs(t,e,function(t,e){var n=r.Ms(e);i=i.nt(t,n)}).next(function(){return i})},mE.prototype.Bs=function(t,e){var r=this,i=mm,o=new cm(Fg.P);return this.qs(t,e,function(t,e){var n=r.Ms(e);o=n?(i=i.nt(t,n),o.nt(t,EE(e))):(i=i.nt(t,null),o.nt(t,0))}).next(function(){return{Us:i,Ws:o}})},mE.prototype.qs=function(t,e,i){if(e._())return P_.resolve();var n=IDBKeyRange.bound(e.first().path.$(),e.last().path.$()),o=e.at(),s=o.dt();return wE(t).Qs({range:n},function(t,e,n){for(var r=Fg.j(t);s&&Fg.P(s,r)<0;)i(s,null),s=o.dt();s&&s.isEqual(r)&&(i(s,e),s=o.wt()?o.dt():null),s?n.js(s.path.$()):n.done()}).next(function(){for(;s;)i(s,null),s=o.wt()?o.dt():null})},mE.prototype.ts=function(t,i,e){var n,r,o,s=this,a=_m,u=i.path.length+1,c={};return e.isEqual(Rg.min())?(n=i.path.$(),c.range=IDBKeyRange.lowerBound(n)):(r=i.path.$(),o=cE(e),c.range=IDBKeyRange.lowerBound([r,o],!0),c.index=aI.collectionReadTimeIndex),wE(t).Qs(c,function(t,e,n){var r;t.length===u&&(r=aE(s.serializer,e),i.path.D(r.key.path)?r instanceof Fw&&r_(i,r)&&(a=a.nt(r.key,r)):n.done())}).next(function(){return a})},mE.prototype.Ks=function(t,e){var r=this,i=mm,o=cE(e),n=wE(t),s=IDBKeyRange.lowerBound(o,!0);return n.Qs({index:aI.readTimeIndex,range:s},function(t,e){var n=aE(r.serializer,e);i=i.nt(n.key,n),o=e.readTime}).next(function(){return{Gs:i,readTime:hE(o)}})},mE.prototype.zs=function(t){var e=wE(t),r=Rg.min();return e.Qs({index:aI.readTimeIndex,reverse:!0},function(t,e,n){e.readTime&&(r=hE(e.readTime)),n.done()}).next(function(){return r})},mE.prototype.Hs=function(t){return new mE.Ys(this,!!t&&t.Js)},mE.prototype.Xs=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},mE.prototype.getMetadata=function(t){return bE(t).get(uI.key).next(function(t){return fg(!!t),t})},mE.prototype.xs=function(t,e){return bE(t).put(uI.key,e)},mE.prototype.Ms=function(t){if(t){var e=aE(this.serializer,t);return e instanceof Uw&&e.version.isEqual(Rg.min())?null:e}return null},mE);function mE(t,e){this.serializer=t,this.Kn=e}function bE(t){return xE.Ns(t,uI.store)}function wE(t){return xE.Ns(t,aI.store)}function _E(t){return t.path.$()}function EE(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw lg();e=t.noDocument}return JSON.stringify(e).length}function IE(t,e){var n=this;return(n=yE.call(this)||this).Zs=t,n.Js=e,n.ti=new Ag(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),n}gE.Ys=(Ls(IE,yE=R_),IE.prototype.qn=function(s){var a=this,u=[],c=0,h=new ym(function(t,e){return yg(t.F(),e.F())});return this.Cn.forEach(function(t,e){var n,r,i,o=a.ti.get(t);e?(n=uE(a.Zs.serializer,e,a.readTime),h=h.add(t.path.p()),r=EE(n),c+=r-o,u.push(a.Zs.Nn(s,t,n))):(c-=o,a.Js?(i=uE(a.Zs.serializer,new Uw(t,Rg.min()),a.readTime),u.push(a.Zs.Nn(s,t,i))):u.push(a.Zs.xn(s,t)))}),h.forEach(function(t){u.push(a.Zs.Kn.Cs(s,t))}),u.push(this.Zs.updateMetadata(s,c)),P_.Sn(u)},IE.prototype.On=function(t,e){var n=this;return this.Zs.Os(t,e).next(function(t){return null===t?(n.ti.set(e,0),null):(n.ti.set(e,t.size),t.Ls)})},IE.prototype.Ln=function(t,e){var n=this;return this.Zs.Bs(t,e).next(function(t){var e=t.Us;return t.Ws.forEach(function(t,e){n.ti.set(t,e)}),e})},IE);var TE=(NE.prototype.next=function(){return this.ei+=2,this.ei},NE.ni=function(){return new NE(0)},NE.si=function(){return new NE(-1)},NE),SE=(CE.prototype.ri=function(n){var r=this;return this.oi(n).next(function(t){var e=new TE(t.highestTargetId);return t.highestTargetId=e.next(),r.hi(n,t).next(function(){return t.highestTargetId})})},CE.prototype.ai=function(t){return this.oi(t).next(function(t){return Rg.I(new Pg(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},CE.prototype.ui=function(t){return this.oi(t).next(function(t){return t.highestListenSequenceNumber})},CE.prototype.ci=function(e,n,r){var i=this;return this.oi(e).next(function(t){return t.highestListenSequenceNumber=n,r&&(t.lastRemoteSnapshotVersion=r.A()),n>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=n),i.hi(e,t)})},CE.prototype.li=function(e,n){var r=this;return this._i(e,n).next(function(){return r.oi(e).next(function(t){return t.targetCount+=1,r.fi(n,t),r.hi(e,t)})})},CE.prototype.di=function(t,e){return this._i(t,e)},CE.prototype.wi=function(e,t){var n=this;return this.Ti(e,t.targetId).next(function(){return AE(e).delete(t.targetId)}).next(function(){return n.oi(e)}).next(function(t){return fg(0<t.targetCount),--t.targetCount,n.hi(e,t)})},CE.prototype.Ei=function(r,i,o){var s=this,a=0,u=[];return AE(r).Qs(function(t,e){var n=dE(e);n.sequenceNumber<=i&&null===o.get(n.targetId)&&(a++,u.push(s.wi(r,n)))}).next(function(){return P_.Sn(u)}).next(function(){return a})},CE.prototype.pe=function(t,r){return AE(t).Qs(function(t,e){var n=dE(e);r(n)})},CE.prototype.oi=function(t){return kE(t).get(lI.key).next(function(t){return fg(null!==t),t})},CE.prototype.hi=function(t,e){return kE(t).put(lI.key,e)},CE.prototype._i=function(t,e){return AE(t).put(vE(this.serializer,e))},CE.prototype.fi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},CE.prototype.Ii=function(t){return this.oi(t).next(function(t){return t.targetCount})},CE.prototype.mi=function(t,i){var e=Jg(i),n=IDBKeyRange.bound([e,Number.NEGATIVE_INFINITY],[e,Number.POSITIVE_INFINITY]),o=null;return AE(t).Qs({range:n,index:cI.queryTargetsIndexName},function(t,e,n){var r=dE(e);$g(i,r.target)&&(o=r,n.done())}).next(function(){return o})},CE.prototype.Ai=function(n,t,r){var i=this,o=[],s=OE(n);return t.forEach(function(t){var e=X_(t.path);o.push(s.put(new hI(r,e))),o.push(i.ii.Ri(n,r,t))}),P_.Sn(o)},CE.prototype.Pi=function(n,t,r){var i=this,o=OE(n);return P_.forEach(t,function(t){var e=X_(t.path);return P_.Sn([o.delete([r,e]),i.ii.gi(n,r,t)])})},CE.prototype.Ti=function(t,e){var n=OE(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},CE.prototype.Vi=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=OE(t),o=Tm();return r.Qs({range:n,yi:!0},function(t,e,n){var r=$_(t[1]),i=new Fg(r);o=o.add(i)}).next(function(){return o})},CE.prototype.pi=function(t,e){var n=X_(e.path),r=IDBKeyRange.bound([n],[mg(n)],!1,!0),i=0;return OE(t).Qs({index:hI.documentTargetsIndex,yi:!0,range:r},function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())}).next(function(){return 0<i})},CE.prototype.Me=function(t,e){return AE(t).get(e).next(function(t){return t?dE(t):null})},CE);function CE(t,e){this.ii=t,this.serializer=e}function NE(t){this.ei=t}function AE(t){return xE.Ns(t,cI.store)}function kE(t){return xE.Ns(t,lI.store)}function OE(t){return xE.Ns(t,hI.store)}var PE,RE="Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",DE=(Ls(ME,PE=x_),ME),xE=(LE.Ns=function(t,e){if(t instanceof DE)return gI.Ns(t.bi,e);throw lg()},LE.prototype.start=function(){var e=this;return gI.Ui(this.Li,YE,new JE(this.serializer)).then(function(t){return e.Wi=t,e.Qi()}).then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Og(kg.FAILED_PRECONDITION,RE);return e.ji(),e.Ki(),e.Gi(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(t){return e.qi.ui(t)})}).then(function(t){e.Ci=new F_(t,e.Si)}).then(function(){e.$i=!0}).catch(function(t){return e.Wi&&e.Wi.close(),Promise.reject(t)})},LE.prototype.zi=function(n){var t=this;return this.Mi=function(e){return Fs(t,void 0,void 0,function(){return Us(this,function(t){return this.Hi?[2,n(e)]:[2]})})},n(this.isPrimary)},LE.prototype.Yi=function(n){var t=this;this.Wi.Ji(function(e){return Fs(t,void 0,void 0,function(){return Us(this,function(t){switch(t.label){case 0:return null===e.newVersion?[4,n()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})},LE.prototype.Xi=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Ts.Zi(function(){return Fs(e,void 0,void 0,function(){return Us(this,function(t){switch(t.label){case 0:return this.Hi?[4,this.Qi()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},LE.prototype.Qi=function(){var n=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return UE(e).put(new dI(n.clientId,Date.now(),n.networkEnabled,n.inForeground)).next(function(){if(n.isPrimary)return n.tr(e).next(function(t){t||(n.isPrimary=!1,n.Ts.er(function(){return n.Mi(!1)}))})}).next(function(){return n.nr(e)}).next(function(t){return n.isPrimary&&!t?n.sr(e).next(function(){return!1}):!!t&&n.ir(e).next(function(){return!0})})}).catch(function(t){if(II(t))return ug("IndexedDbPersistence","Failed to extend owner lease: ",t),n.isPrimary;if(!n.allowTabSynchronization)throw t;return ug("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){n.isPrimary!==t&&n.Ts.er(function(){return n.Mi(t)}),n.isPrimary=t})},LE.prototype.tr=function(t){var e=this;return FE(t).get(ZE.key).next(function(t){return P_.resolve(e.rr(t))})},LE.prototype.or=function(t){return UE(t).delete(this.clientId)},LE.prototype.hr=function(){return Fs(this,void 0,void 0,function(){var e,n,r,i,o=this;return Us(this,function(t){switch(t.label){case 0:return!this.isPrimary||this.ar(this.xi,18e5)?[3,2]:(this.xi=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var r=LE.Ns(t,dI.store);return r.Fs().next(function(t){var e=o.ur(t,18e5),n=t.filter(function(t){return-1===e.indexOf(t)});return P_.forEach(n,function(t){return r.delete(t.clientId)}).next(function(){return n})})}).catch(function(){return[]})]);case 1:if(e=t.sent(),this.Bi)for(n=0,r=e;n<r.length;n++)i=r[n],this.Bi.removeItem(this.cr(i.clientId));t.label=2;case 2:return[2]}})})},LE.prototype.Gi=function(){var t=this;this.ki=this.Ts.bs("client_metadata_refresh",4e3,function(){return t.Qi().then(function(){return t.hr()}).then(function(){return t.Gi()})})},LE.prototype.rr=function(t){return!!t&&t.ownerId===this.clientId},LE.prototype.nr=function(e){var i=this;return this.Di?P_.resolve(!0):FE(e).get(ZE.key).next(function(t){if(null!==t&&i.ar(t.leaseTimestampMs,5e3)&&!i.lr(t.ownerId)){if(i.rr(t)&&i.networkEnabled)return!0;if(!i.rr(t)){if(!t.allowTabSynchronization)throw new Og(kg.FAILED_PRECONDITION,RE);return!1}}return!(!i.networkEnabled||!i.inForeground)||UE(e).Fs().next(function(t){return void 0===i.ur(t,5e3).find(function(t){if(i.clientId!==t.clientId){var e=!i.networkEnabled&&t.networkEnabled,n=!i.inForeground&&t.inForeground,r=i.networkEnabled===t.networkEnabled;if(e||n&&r)return!0}return!1})})}).next(function(t){return i.isPrimary!==t&&ug("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},LE.prototype._r=function(){return Fs(this,void 0,void 0,function(){var e=this;return Us(this,function(t){switch(t.label){case 0:return this.$i=!1,this.dr(),this.ki&&(this.ki.cancel(),this.ki=null),this.wr(),this.Tr(),[4,this.runTransaction("shutdown","readwrite",function(t){return e.sr(t).next(function(){return e.or(t)})}).catch(function(t){ug("IndexedDbPersistence","Proceeding with shutdown despite failure: ",t)})];case 1:return t.sent(),this.Wi.close(),this.Er(),[2]}})})},LE.prototype.ur=function(t,e){var n=this;return t.filter(function(t){return n.ar(t.updateTimeMs,e)&&!n.lr(t.clientId)})},LE.prototype.Ir=function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(t){return UE(t).Fs().next(function(t){return e.ur(t,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(LE.prototype,"Hi",{get:function(){return this.$i},enumerable:!1,configurable:!0}),LE.prototype.mr=function(t){return WE.Ar(t,this.serializer,this.Kn,this.ii)},LE.prototype.Rr=function(){return this.qi},LE.prototype.Pr=function(){return this.Qn},LE.prototype.gr=function(){return this.Kn},LE.prototype.runTransaction=function(e,n,r){var i=this;ug("IndexedDbPersistence","Starting transaction:",e);var o,t="readonly"===n?"readonly":"readwrite";return this.Wi.runTransaction(t,yI,function(t){return o=new DE(t,i.Ci?i.Ci.next():F_.ws),"readwrite-primary"===n?i.tr(o).next(function(t){return!!t||i.nr(o)}).next(function(t){if(!t)throw cg("Failed to obtain primary lease for action '"+e+"'."),i.isPrimary=!1,i.Ts.er(function(){return i.Mi(!1)}),new Og(kg.FAILED_PRECONDITION,D_);return r(o)}).next(function(t){return i.ir(o).next(function(){return t})}):i.Vr(o).next(function(){return r(o)})}).then(function(t){return o.Wn(),t})},LE.prototype.Vr=function(t){var e=this;return FE(t).get(ZE.key).next(function(t){if(null!==t&&e.ar(t.leaseTimestampMs,5e3)&&!e.lr(t.ownerId)&&!e.rr(t)&&!(e.Di||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Og(kg.FAILED_PRECONDITION,RE)})},LE.prototype.ir=function(t){var e=new ZE(this.clientId,this.allowTabSynchronization,Date.now());return FE(t).put(ZE.key,e)},LE.Oi=function(){return gI.Oi()},LE.prototype.sr=function(t){var e=this,n=FE(t);return n.get(ZE.key).next(function(t){return e.rr(t)?(ug("IndexedDbPersistence","Releasing primary lease."),n.delete(ZE.key)):P_.resolve()})},LE.prototype.ar=function(t,e){var n=Date.now();return!(t<n-e||n<t&&(cg("Detected an update time that is in the future: "+t+" > "+n),1))},LE.prototype.ji=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ni=function(){t.Ts.Zi(function(){return t.inForeground="visible"===t.document.visibilityState,t.Qi()})},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground="visible"===this.document.visibilityState)},LE.prototype.wr=function(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)},LE.prototype.Ki=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fi=function(){e.dr(),e.Ts.Zi(function(){return e._r()})},this.window.addEventListener("unload",this.Fi))},LE.prototype.Tr=function(){this.Fi&&(this.window.removeEventListener("unload",this.Fi),this.Fi=null)},LE.prototype.lr=function(t){var e;try{var n=null!==(null===(e=this.Bi)||void 0===e?void 0:e.getItem(this.cr(t)));return ug("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return cg("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},LE.prototype.dr=function(){if(this.Bi)try{this.Bi.setItem(this.cr(this.clientId),String(Date.now()))}catch(t){cg("Failed to set zombie client id.",t)}},LE.prototype.Er=function(){if(this.Bi)try{this.Bi.removeItem(this.cr(this.clientId))}catch(t){}},LE.prototype.cr=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},LE);function LE(t,e,n,r,i,o,s,a,u,c){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.Ts=i,this.window=o,this.document=s,this.Si=u,this.Di=c,this.Ci=null,this.$i=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fi=null,this.inForeground=!1,this.Ni=null,this.ki=null,this.xi=Number.NEGATIVE_INFINITY,this.Mi=function(t){return Promise.resolve()},!LE.Oi())throw new Og(kg.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.ii=new jE(this,r),this.Li=e+"main",this.serializer=new sE(a),this.qi=new SE(this.ii,this.serializer),this.Kn=new eE,this.Qn=new gE(this.serializer,this.Kn),this.window&&this.window.localStorage?this.Bi=this.window.localStorage:(this.Bi=null,!1===c&&cg("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}function ME(t,e){var n=this;return(n=PE.call(this)||this).bi=t,n.vi=e,n}function FE(t){return xE.Ns(t,ZE.store)}function UE(t){return xE.Ns(t,dI.store)}var jE=(VE.prototype.pr=function(t){var n=this.br(t);return this.db.Rr().Ii(t).next(function(e){return n.next(function(t){return e+t})})},VE.prototype.br=function(t){var e=0;return this.vr(t,function(t){e++}).next(function(){return e})},VE.prototype.pe=function(t,e){return this.db.Rr().pe(t,e)},VE.prototype.vr=function(t,n){return this.Sr(t,function(t,e){return n(e)})},VE.prototype.Ri=function(t,e,n){return qE(t,n)},VE.prototype.gi=function(t,e,n){return qE(t,n)},VE.prototype.Ei=function(t,e,n){return this.db.Rr().Ei(t,e,n)},VE.prototype.Dr=qE,VE.prototype.Cr=function(t,e){return r=e,i=!1,XE(n=t).$r(function(t){return KE(n,t,r).next(function(t){return t&&(i=!0),P_.resolve(!t)})}).next(function(){return i});var n,r,i},VE.prototype.Fr=function(r,i){var o=this,s=this.db.Pr().Hs(),a=[],u=0;return this.Sr(r,function(e,t){var n;t<=i&&(n=o.Cr(r,e).next(function(t){if(!t)return u++,s.Mn(r,e).next(function(){return s.xn(e),OE(r).delete([0,X_(e.path)])})}),a.push(n))}).next(function(){return P_.Sn(a)}).next(function(){return s.apply(r)}).next(function(){return u})},VE.prototype.removeTarget=function(t,e){var n=e.Z(t.vi);return this.db.Rr().di(t,n)},VE.prototype.Nr=qE,VE.prototype.Sr=function(t,o){var s,e=OE(t),a=F_.ws;return e.Qs({index:hI.documentTargetsIndex},function(t,e){var n=t[0],r=(t[1],e.path),i=e.sequenceNumber;0===n?(a!==F_.ws&&o(new Fg($_(s)),a),a=i,s=r):a=F_.ws}).next(function(){a!==F_.ws&&o(new Fg($_(s)),a)})},VE.prototype.kr=function(t){return this.db.Pr().Xs(t)},VE);function VE(t,e){this.db=t,this.yr=new HI(this,e)}function qE(t,e){return OE(t).put((n=t.vi,new hI(0,X_(e.path),n)));var n}function BE(t,e){var n=t.projectId;return t.i||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var WE=(HE.Ar=function(t,e,n,r){return fg(""!==t.uid),new HE(t.Mr()?t.uid:"",e,n,r)},HE.prototype.Or=function(t){var r=!0,e=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return zE(t).Qs({index:nI.userMutationsIndex,range:e},function(t,e,n){r=!1,n.done()}).next(function(){return r})},HE.prototype.Lr=function(d,v,y,g){var m=this,b=QE(d),w=zE(d);return w.add({}).next(function(t){fg("number"==typeof t);for(var e,n,r,i,o,s=new k_(t,v,y,g),a=(e=m.serializer,n=m.userId,i=(r=s).baseMutations.map(function(t){return Nb(e.ks,t)}),o=r.mutations.map(function(t){return Nb(e.ks,t)}),new nI(n,r.batchId,r.dn.toMillis(),i,o)),u=[],c=new ym(function(t,e){return yg(t.F(),e.F())}),h=0,l=g;h<l.length;h++){var f=l[h],p=rI.key(m.userId,f.key.path,t),c=c.add(f.key.path.p());u.push(w.put(a)),u.push(b.put(p,rI.PLACEHOLDER))}return c.forEach(function(t){u.push(m.Kn.Cs(d,t))}),d.Un(function(){m.xr[t]=s.keys()}),P_.Sn(u).next(function(){return s})})},HE.prototype.qr=function(t,e){var n=this;return zE(t).get(e).next(function(t){return t?(fg(t.userId===n.userId),pE(n.serializer,t)):null})},HE.prototype.Br=function(t,n){var r=this;return this.xr[n]?P_.resolve(this.xr[n]):this.qr(t,n).next(function(t){if(t){var e=t.keys();return r.xr[n]=e}return null})},HE.prototype.Ur=function(t,e){var r=this,i=e+1,n=IDBKeyRange.lowerBound([this.userId,i]),o=null;return zE(t).Qs({index:nI.userMutationsIndex,range:n},function(t,e,n){e.userId===r.userId&&(fg(e.batchId>=i),o=pE(r.serializer,e)),n.done()}).next(function(){return o})},HE.prototype.Wr=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return zE(t).Qs({index:nI.userMutationsIndex,range:e,reverse:!0},function(t,e,n){r=e.batchId,n.done()}).next(function(){return r})},HE.prototype.Qr=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return zE(t).Fs(nI.userMutationsIndex,n).next(function(t){return t.map(function(t){return pE(e.serializer,t)})})},HE.prototype.zn=function(a,u){var c=this,t=rI.prefixForPath(this.userId,u.path),e=IDBKeyRange.lowerBound(t),h=[];return QE(a).Qs({range:e},function(t,e,n){var r=t[0],i=t[1],o=t[2],s=$_(i);if(r===c.userId&&u.path.isEqual(s))return zE(a).get(o).next(function(t){if(!t)throw lg();fg(t.userId===c.userId),h.push(pE(c.serializer,t))});n.done()}).next(function(){return h})},HE.prototype.Zn=function(r,t){var u=this,c=new ym(yg),i=[];return t.forEach(function(a){var t=rI.prefixForPath(u.userId,a.path),e=IDBKeyRange.lowerBound(t),n=QE(r).Qs({range:e},function(t,e,n){var r=t[0],i=t[1],o=t[2],s=$_(i);r===u.userId&&a.path.isEqual(s)?c=c.add(o):n.done()});i.push(n)}),P_.Sn(i).next(function(){return u.jr(r,c)})},HE.prototype.os=function(t,e){var a=this,u=e.path,c=u.length+1,n=rI.prefixForPath(this.userId,u),r=IDBKeyRange.lowerBound(n),h=new ym(yg);return QE(t).Qs({range:r},function(t,e,n){var r=t[0],i=t[1],o=t[2],s=$_(i);r===a.userId&&u.D(s)?s.length===c&&(h=h.add(o)):n.done()}).next(function(){return a.jr(t,h)})},HE.prototype.jr=function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(zE(e).get(t).next(function(t){if(null===t)throw lg();fg(t.userId===n.userId),r.push(pE(n.serializer,t))}))}),P_.Sn(i).next(function(){return r})},HE.prototype.Kr=function(e,n){var r=this;return GE(e.bi,this.userId,n).next(function(t){return e.Un(function(){r.Gr(n.batchId)}),P_.forEach(t,function(t){return r.ii.Dr(e,t)})})},HE.prototype.Gr=function(t){delete this.xr[t]},HE.prototype.zr=function(n){var o=this;return this.Or(n).next(function(t){if(!t)return P_.resolve();var e=IDBKeyRange.lowerBound(rI.prefixForUser(o.userId)),i=[];return QE(n).Qs({range:e},function(t,e,n){var r;t[0]===o.userId?(r=$_(t[1]),i.push(r)):n.done()}).next(function(){fg(0===i.length)})})},HE.prototype.pi=function(t,e){return KE(t,this.userId,e)},HE.prototype.Hr=function(t){var e=this;return XE(t).get(this.userId).next(function(t){return t||new eI(e.userId,-1,"")})},HE);function HE(t,e,n,r){this.userId=t,this.serializer=e,this.Kn=n,this.ii=r,this.xr={}}function KE(t,o,e){var n=rI.prefixForPath(o,e.path),s=n[1],r=IDBKeyRange.lowerBound(n),a=!1;return QE(t).Qs({range:r,yi:!0},function(t,e,n){var r=t[0],i=t[1];t[2],r===o&&i===s&&(a=!0),n.done()}).next(function(){return a})}function GE(t,e,n){var r=t.store(nI.store),i=t.store(rI.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Qs({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){fg(1===a)}));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=rI.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return P_.Sn(o).next(function(){return c})}function zE(t){return xE.Ns(t,nI.store)}function QE(t){return xE.Ns(t,rI.store)}function XE(t){return xE.Ns(t,eI.store)}var YE=10,JE=(tI.prototype.createOrUpgrade=function(n,r,t,e){var i=this;fg(t<e&&0<=t&&e<=YE);var o,s=new TI(r);t<1&&1<=e&&(n.createObjectStore(ZE.store),(o=n).createObjectStore(eI.store,{keyPath:eI.keyPath}),o.createObjectStore(nI.store,{keyPath:nI.keyPath,autoIncrement:!0}).createIndex(nI.userMutationsIndex,nI.userMutationsKeyPath,{unique:!0}),o.createObjectStore(rI.store),pI(n),n.createObjectStore(aI.store));var a,u=P_.resolve();return t<3&&3<=e&&(0!==t&&((a=n).deleteObjectStore(hI.store),a.deleteObjectStore(cI.store),a.deleteObjectStore(lI.store),pI(n)),u=u.next(function(){return t=s.store(lI.store),e=new lI(0,0,Rg.min().A(),0),t.put(lI.key,e);var t,e})),t<4&&4<=e&&(0!==t&&(u=u.next(function(){return r=n,(i=s).store(nI.store).Fs().next(function(t){r.deleteObjectStore(nI.store),r.createObjectStore(nI.store,{keyPath:nI.keyPath,autoIncrement:!0}).createIndex(nI.userMutationsIndex,nI.userMutationsKeyPath,{unique:!0});var e=i.store(nI.store),n=t.map(function(t){return e.put(t)});return P_.Sn(n)});var r,i})),u=u.next(function(){n.createObjectStore(dI.store,{keyPath:dI.keyPath})})),t<5&&5<=e&&(u=u.next(function(){return i.removeAcknowledgedMutations(s)})),t<6&&6<=e&&(u=u.next(function(){return n.createObjectStore(uI.store),i.addDocumentGlobal(s)})),t<7&&7<=e&&(u=u.next(function(){return i.ensureSequenceNumbers(s)})),t<8&&8<=e&&(u=u.next(function(){return i.createCollectionParentIndex(n,s)})),t<9&&9<=e&&(u=u.next(function(){var t,e;(e=n).objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges"),(t=r.objectStore(aI.store)).createIndex(aI.readTimeIndex,aI.readTimeIndexPath,{unique:!1}),t.createIndex(aI.collectionReadTimeIndex,aI.collectionReadTimeIndexPath,{unique:!1})})),t<10&&10<=e&&(u=u.next(function(){return i.rewriteCanonicalIds(s)})),u},tI.prototype.addDocumentGlobal=function(e){var n=0;return e.store(aI.store).Qs(function(t,e){n+=EE(e)}).next(function(){var t=new uI(n);return e.store(uI.store).put(uI.key,t)})},tI.prototype.removeAcknowledgedMutations=function(r){var i=this,t=r.store(eI.store),e=r.store(nI.store);return t.Fs().next(function(t){return P_.forEach(t,function(n){var t=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return e.Fs(nI.userMutationsIndex,t).next(function(t){return P_.forEach(t,function(t){fg(t.userId===n.userId);var e=pE(i.serializer,t);return GE(r,n.userId,e).next(function(){})})})})})},tI.prototype.ensureSequenceNumbers=function(t){var s=t.store(hI.store),e=t.store(aI.store);return t.store(lI.store).get(lI.key).next(function(i){var o=[];return e.Qs(function(t,e){var n=new xg(t),r=[0,X_(n)];o.push(s.get(r).next(function(t){return t?P_.resolve():s.put(new hI(0,X_(n),i.highestListenSequenceNumber))}))}).next(function(){return P_.Sn(o)})})},tI.prototype.createCollectionParentIndex=function(t,e){function r(t){if(o.add(t)){var e=t.S(),n=t.p();return i.put({collectionId:e,parent:X_(n)})}}t.createObjectStore(fI.store,{keyPath:fI.keyPath});var i=e.store(fI.store),o=new tE;return e.store(aI.store).Qs({yi:!0},function(t,e){return r(new xg(t).p())}).next(function(){return e.store(rI.store).Qs({yi:!0},function(t,e){t[0];var n=t[1];return r((t[2],$_(n)).p())})})},tI.prototype.rewriteCanonicalIds=function(t){var i=this,o=t.store(cI.store);return o.Qs(function(t,e){var n=dE(e),r=vE(i.serializer,n);return o.put(r)})},tI),$E=function(t,e){this.seconds=t,this.nanoseconds=e},ZE=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};function tI(t){this.serializer=t}ZE.store="owner",ZE.key="owner";var eI=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};eI.store="mutationQueues",eI.keyPath="userId";var nI=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};nI.store="mutations",nI.keyPath="batchId",nI.userMutationsIndex="userMutationsIndex",nI.userMutationsKeyPath=["userId","batchId"];var rI=(iI.prefixForUser=function(t){return[t]},iI.prefixForPath=function(t,e){return[t,X_(e)]},iI.key=function(t,e,n){return[t,X_(e),n]},iI);function iI(){}rI.store="documentMutations",rI.PLACEHOLDER=new rI;var oI=function(t,e){this.path=t,this.readTime=e},sI=function(t,e){this.path=t,this.version=e},aI=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};aI.store="remoteDocuments",aI.readTimeIndex="readTimeIndex",aI.readTimeIndexPath="readTime",aI.collectionReadTimeIndex="collectionReadTimeIndex",aI.collectionReadTimeIndexPath=["parentPath","readTime"];var uI=function(t){this.byteSize=t};uI.store="remoteDocumentGlobal",uI.key="remoteDocumentGlobalKey";var cI=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};cI.store="targets",cI.keyPath="targetId",cI.queryTargetsIndexName="queryTargetsIndex",cI.queryTargetsKeyPath=["canonicalId","targetId"];var hI=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};hI.store="targetDocuments",hI.keyPath=["targetId","path"],hI.documentTargetsIndex="documentTargetsIndex",hI.documentTargetsKeyPath=["path","targetId"];var lI=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};lI.key="targetGlobalKey",lI.store="targetGlobal";var fI=function(t,e){this.collectionId=t,this.parent=e};function pI(t){t.createObjectStore(hI.store,{keyPath:hI.keyPath}).createIndex(hI.documentTargetsIndex,hI.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(cI.store,{keyPath:cI.keyPath}).createIndex(cI.queryTargetsIndexName,cI.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(lI.store)}fI.store="collectionParents",fI.keyPath=["collectionId","parent"];var dI=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};dI.store="clientMetadata",dI.keyPath="clientId";var vI,yI=Bs(Bs(Bs([eI.store,nI.store,rI.store,aI.store,cI.store,ZE.store,lI.store,hI.store],[dI.store]),[uI.store]),[fI.store]),gI=(EI.Ui=function(o,t,s){return ug("SimpleDb","Opening database:",o),new P_(function(n,r){var i=indexedDB.open(o,t);i.onsuccess=function(t){var e=t.target.result;n(new EI(e))},i.onblocked=function(){r(new Og(kg.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(t){var e=t.target.error;"VersionError"===e.name?r(new Og(kg.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(e)},i.onupgradeneeded=function(t){ug("SimpleDb",'Database "'+o+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;s.createOrUpgrade(e,i.transaction,t.oldVersion,YE).next(function(){ug("SimpleDb","Database upgrade to version "+YE+" complete")})}}).bn()},EI.delete=function(t){return ug("SimpleDb","Removing database:",t),AI(window.indexedDB.deleteDatabase(t)).bn()},EI.Oi=function(){if("undefined"==typeof indexedDB)return!1;if(EI.Jr())return!0;var t=Zs(),e=EI.Yr(t),n=0<e&&e<10,r=EI.Xr(t),i=0<r&&r<4.5;return!(0<t.indexOf("MSIE ")||0<t.indexOf("Trident/")||0<t.indexOf("Edge/")||n||i)},EI.Jr=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Zr)},EI.Ns=function(t,e){return t.store(e)},EI.Yr=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},EI.Xr=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},EI.prototype.Ji=function(e){this.db.onversionchange=function(t){return e(t)}},EI.prototype.runTransaction=function(r,c,h){return Fs(this,void 0,void 0,function(){var s,a,e,u,n;return Us(this,function(t){switch(t.label){case 0:s="readonly"===r,a=0,e=function(){var e,n,r,i,o;return Us(this,function(t){switch(t.label){case 0:++a,e=TI.open(u.db,s?"readonly":"readwrite",c),t.label=1;case 1:return t.trys.push([1,3,,4]),n=h(e).catch(function(t){return e.abort(t),P_.reject(t)}).bn(),r={},n.catch(function(){}),[4,e.to];case 2:return[2,(r.value=(t.sent(),n),r)];case 3:return i=t.sent(),o="FirebaseError"!==i.name&&a<3,ug("SimpleDb","Transaction failed with error: %s. Retrying: %s.",i.message,o),o?[3,4]:[2,{value:Promise.reject(i)}];case 4:return[2]}})},u=this,t.label=1;case 1:return[5,e()];case 2:if("object"==typeof(n=t.sent()))return[2,n.value];t.label=3;case 3:return[3,1];case 4:return[2]}})})},EI.prototype.close=function(){this.db.close()},EI),mI=(Object.defineProperty(_I.prototype,"gn",{get:function(){return this.no},enumerable:!1,configurable:!0}),Object.defineProperty(_I.prototype,"io",{get:function(){return this.so},enumerable:!1,configurable:!0}),Object.defineProperty(_I.prototype,"cursor",{set:function(t){this.eo=t},enumerable:!1,configurable:!0}),_I.prototype.done=function(){this.no=!0},_I.prototype.js=function(t){this.so=t},_I.prototype.delete=function(){return AI(this.eo.delete())},_I),bI=(Ls(wI,vI=Og),wI);function wI(t){var e=this;return(e=vI.call(this,kg.UNAVAILABLE,"IndexedDB transaction failed: "+t)||this).name="IndexedDbTransactionError",e}function _I(t){this.eo=t,this.no=!1,this.so=null}function EI(t){this.db=t,12.2===EI.Yr(Zs())&&cg("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}function II(t){return"IndexedDbTransactionError"===t.name}var TI=(NI.open=function(t,e,n){return new NI(t.transaction(n,e))},Object.defineProperty(NI.prototype,"to",{get:function(){return this.ro.promise},enumerable:!1,configurable:!0}),NI.prototype.abort=function(t){t&&this.ro.reject(t),this.aborted||(ug("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},NI.prototype.store=function(t){var e=this.transaction.objectStore(t);return new SI(e)},NI),SI=(CI.prototype.put=function(t,e){return AI(void 0!==e?(ug("SimpleDb","PUT",this.store.name,t,e),this.store.put(e,t)):(ug("SimpleDb","PUT",this.store.name,"<auto-key>",t),this.store.put(t)))},CI.prototype.add=function(t){return ug("SimpleDb","ADD",this.store.name,t,t),AI(this.store.add(t))},CI.prototype.get=function(e){var n=this;return AI(this.store.get(e)).next(function(t){return void 0===t&&(t=null),ug("SimpleDb","GET",n.store.name,e,t),t})},CI.prototype.delete=function(t){return ug("SimpleDb","DELETE",this.store.name,t),AI(this.store.delete(t))},CI.prototype.count=function(){return ug("SimpleDb","COUNT",this.store.name),AI(this.store.count())},CI.prototype.Fs=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.oo(n,function(t,e){r.push(e)}).next(function(){return r})},CI.prototype.ho=function(t,e){ug("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.yi=!1;var r=this.cursor(n);return this.oo(r,function(t,e,n){return n.delete()})},CI.prototype.Qs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.oo(r,e)},CI.prototype.$r=function(i){var t=this.cursor({});return new P_(function(n,r){t.onerror=function(t){var e=OI(t.target.error);r(e)},t.onsuccess=function(t){var e=t.target.result;e?i(e.primaryKey,e.value).next(function(t){t?e.continue():n()}):n()}})},CI.prototype.oo=function(t,s){var a=[];return new P_(function(o,e){t.onerror=function(t){e(t.target.error)},t.onsuccess=function(t){var e,n,r,i=t.target.result;i?(e=new mI(i),(n=s(i.primaryKey,i.value,e))instanceof P_&&(r=n.catch(function(t){return e.done(),P_.reject(t)}),a.push(r)),e.gn?o():null===e.io?i.continue():i.continue(e.io)):o()}}).next(function(){return P_.Sn(a)})},CI.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},CI.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.yi?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},CI);function CI(t){this.store=t}function NI(t){var n=this;this.transaction=t,this.aborted=!1,this.ro=new G_,this.transaction.oncomplete=function(){n.ro.resolve()},this.transaction.onabort=function(){t.error?n.ro.reject(new bI(t.error)):n.ro.resolve()},this.transaction.onerror=function(t){var e=OI(t.target.error);n.ro.reject(new bI(e))}}function AI(t){return new P_(function(n,r){t.onsuccess=function(t){var e=t.target.result;n(e)},t.onerror=function(t){var e=OI(t.target.error);r(e)}})}var kI=!1;function OI(t){var e=gI.Yr(Zs());if(12.2<=e&&e<13){var n="An internal error was encountered in the Indexed Database server";if(0<=t.message.indexOf(n)){var r=new Og("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return kI||(kI=!0,setTimeout(function(){throw r},0)),r}}return t}function PI(){return"undefined"!=typeof window?window:null}var RI=(LI._o=function(t,e,n,r,i){var o=new LI(t,e,Date.now()+n,r,i);return o.start(n),o},LI.prototype.start=function(t){var e=this;this.fo=setTimeout(function(){return e.do()},t)},LI.prototype.Ss=function(){return this.do()},LI.prototype.cancel=function(t){null!==this.fo&&(this.clearTimeout(),this.lo.reject(new Og(kg.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},LI.prototype.do=function(){var e=this;this.ao.Zi(function(){return null!==e.fo?(e.clearTimeout(),e.op().then(function(t){return e.lo.resolve(t)})):Promise.resolve()})},LI.prototype.clearTimeout=function(){null!==this.fo&&(this.co(this),clearTimeout(this.fo),this.fo=null)},LI),DI=(Object.defineProperty(xI.prototype,"yo",{get:function(){return this.Eo},enumerable:!1,configurable:!0}),xI.prototype.Zi=function(t){this.enqueue(t)},xI.prototype.po=function(t){this.bo(),this.vo(t)},xI.prototype.So=function(t){return this.bo(),this.vo(t)},xI.prototype.Do=function(n){return Fs(this,void 0,void 0,function(){var e;return Us(this,function(t){switch(t.label){case 0:return this.bo(),this.Eo?[3,2]:(this.Eo=!0,(e=PI())&&e.removeEventListener("visibilitychange",this.Vo),[4,this.So(n)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},xI.prototype.enqueue=function(t){return this.bo(),this.Eo?new Promise(function(t){}):this.vo(t)},xI.prototype.er=function(t){var e=this;this.To.push(t),this.Zi(function(){return e.Co()})},xI.prototype.Co=function(){return Fs(this,void 0,void 0,function(){var e,n=this;return Us(this,function(t){switch(t.label){case 0:if(0===this.To.length)return[3,5];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.To[0]()];case 2:return t.sent(),this.To.shift(),this.Po.reset(),[3,4];case 3:if(!II(e=t.sent()))throw e;return ug("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:0<this.To.length&&this.Po.ys(function(){return n.Co()}),t.label=5;case 5:return[2]}})})},xI.prototype.vo=function(t){var r=this,e=this.wo.then(function(){return r.Ao=!0,t().catch(function(t){throw r.mo=t,r.Ao=!1,cg("INTERNAL UNHANDLED ERROR: ",(n=(e=t).message||"",e.stack&&(n=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),n)),t;var e,n}).then(function(t){return r.Ao=!1,t})});return this.wo=e},xI.prototype.bs=function(t,e,n){var r=this;this.bo(),-1<this.Ro.indexOf(t)&&(e=0);var i=RI._o(this,t,e,n,function(t){return r.$o(t)});return this.Io.push(i),i},xI.prototype.bo=function(){this.mo&&lg()},xI.prototype.Fo=function(){},xI.prototype.No=function(){return Fs(this,void 0,void 0,function(){var e;return Us(this,function(t){switch(t.label){case 0:return[4,e=this.wo];case 1:t.sent(),t.label=2;case 2:if(e!==this.wo)return[3,0];t.label=3;case 3:return[2]}})})},xI.prototype.ko=function(t){for(var e=0,n=this.Io;e<n.length;e++)if(n[e].Es===t)return!0;return!1},xI.prototype.xo=function(r){var i=this;return this.No().then(function(){i.Io.sort(function(t,e){return t.uo-e.uo});for(var t=0,e=i.Io;t<e.length;t++){var n=e[t];if(n.Ss(),"all"!==r&&n.Es===r)break}return i.No()})},xI.prototype.Mo=function(t){this.Ro.push(t)},xI.prototype.$o=function(t){var e=this.Io.indexOf(t);this.Io.splice(e,1)},xI);function xI(){var t=this;this.wo=Promise.resolve(),this.To=[],this.Eo=!1,this.Io=[],this.mo=null,this.Ao=!1,this.Ro=[],this.Po=new z_(this,"async_queue_retry"),this.Vo=function(){return t.Po.vs()};var e=PI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Vo)}function LI(t,e,n,r,i){this.ao=t,this.Es=e,this.uo=n,this.op=r,this.co=i,this.lo=new G_,this.then=this.lo.promise.then.bind(this.lo.promise),this.lo.promise.catch(function(t){})}function MI(t,e){if(cg("AsyncQueue",e+": "+t),II(t))return new Og(kg.UNAVAILABLE,e+": "+t);throw t}function FI(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=yg(n,i);return 0===s?yg(r,o):s}var UI=(BI.prototype.qo=function(){return++this.Lo},BI.prototype.Bo=function(t){var e,n=[t,this.qo()];this.buffer.size<this.Oo?this.buffer=this.buffer.add(n):FI(n,e=this.buffer.last())<0&&(this.buffer=this.buffer.delete(e).add(n))},Object.defineProperty(BI.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),BI),jI={Uo:!1,Wo:0,Qo:0,jo:0},VI=(qI.Ho=function(t){return new qI(t,qI.Yo,qI.Jo)},qI);function qI(t,e,n){this.Ko=t,this.Go=e,this.zo=n}function BI(t){this.Oo=t,this.buffer=new ym(FI),this.Lo=0}VI.Xo=-1,VI.Zo=1048576,VI.th=41943040,VI.Yo=10,VI.Jo=1e3,VI.eh=new VI(VI.th,VI.Yo,VI.Jo),VI.nh=new VI(VI.Xo,0,0);var WI=(QI.prototype.start=function(t){this.yr.params.Ko!==VI.Xo&&this.rh(t)},QI.prototype.stop=function(){this.ih&&(this.ih.cancel(),this.ih=null)},Object.defineProperty(QI.prototype,"Hi",{get:function(){return null!==this.ih},enumerable:!1,configurable:!0}),QI.prototype.rh=function(n){var t=this,e=this.sh?3e5:6e4;ug("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.ih=this.ao.bs("lru_garbage_collection",e,function(){return Fs(t,void 0,void 0,function(){var e;return Us(this,function(t){switch(t.label){case 0:this.ih=null,this.sh=!0,t.label=1;case 1:return t.trys.push([1,3,,7]),[4,n.oh(this.yr)];case 2:return t.sent(),[3,7];case 3:return II(e=t.sent())?(ug("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,JI(e)];case 5:t.sent(),t.label=6;case 6:return[3,7];case 7:return[4,this.rh(n)];case 8:return t.sent(),[2]}})})})},QI),HI=(zI.prototype.ah=function(t,e){return this.hh.pr(t).next(function(t){return Math.floor(e/100*t)})},zI.prototype.uh=function(t,e){var n=this;if(0===e)return P_.resolve(F_.ws);var r=new UI(e);return this.hh.pe(t,function(t){return r.Bo(t.sequenceNumber)}).next(function(){return n.hh.vr(t,function(t){return r.Bo(t)})}).next(function(){return r.maxValue})},zI.prototype.Ei=function(t,e,n){return this.hh.Ei(t,e,n)},zI.prototype.Fr=function(t,e){return this.hh.Fr(t,e)},zI.prototype.lh=function(e,n){var r=this;return this.params.Ko===VI.Xo?(ug("LruGarbageCollector","Garbage collection skipped; disabled"),P_.resolve(jI)):this.kr(e).next(function(t){return t<r.params.Ko?(ug("LruGarbageCollector","Garbage collection skipped; Cache size "+t+" is lower than threshold "+r.params.Ko),jI):r._h(e,n)})},zI.prototype.kr=function(t){return this.hh.kr(t)},zI.prototype._h=function(e,n){var r,i,o,s,a,u,c,h=this,l=Date.now();return this.ah(e,this.params.Go).next(function(t){return i=t>h.params.zo?(ug("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.zo+" from "+t),h.params.zo):t,s=Date.now(),h.uh(e,i)}).next(function(t){return r=t,a=Date.now(),h.Ei(e,r,n)}).next(function(t){return o=t,u=Date.now(),h.Fr(e,r)}).next(function(t){return c=Date.now(),ag()<=ja.DEBUG&&ug("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-l)+"ms\n\tDetermined least recently used "+i+" in "+(a-s)+"ms\n\tRemoved "+o+" targets in "+(u-a)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-l)+"ms"),P_.resolve({Uo:!0,Wo:i,Qo:o,jo:t})})},zI),KI=(GI.prototype.Ah=function(i){return Fs(this,void 0,void 0,function(){var e,m,n,r=this;return Us(this,function(t){switch(t.label){case 0:return e=this.jn,m=this.Ih,[4,this.persistence.runTransaction("Handle user change","readonly",function(y){var g;return r.jn.Qr(y).next(function(t){return g=t,e=r.persistence.mr(i),m=new L_(r.Eh,e,r.persistence.gr()),e.Qr(y)}).next(function(t){for(var e=[],n=[],r=Tm(),i=0,o=g;i<o.length;i++){var s=o[i];e.push(s.batchId);for(var a=0,u=s.mutations;a<u.length;a++)var c=u[a],r=r.add(c.key)}for(var h=0,l=t;h<l.length;h++){var f=l[h];n.push(f.batchId);for(var p=0,d=f.mutations;p<d.length;p++){var v=d[p];r=r.add(v.key)}}return m.Jn(y,r).next(function(t){return{Rh:t,Ph:e,gh:n}})})})];case 1:return n=t.sent(),[2,(this.jn=e,this.Ih=m,this.fh.mh(this.Ih),n)]}})})},GI.prototype.Vh=function(c){var h,l=this,f=Pg.now(),t=c.reduce(function(t,e){return t.add(e.key)},Tm());return this.persistence.runTransaction("Locally write mutations","readwrite",function(u){return l.Ih.Jn(u,t).next(function(t){h=t;for(var a,e,n=[],r=0,i=c;r<i.length;r++){var o=i[r],s=(a=o,e=h.get(o.key),a instanceof bw?function(t){for(var e=null,n=0,r=a.fieldTransforms;n<r.length;n++){var i=r[n],o=t instanceof Fw?t.field(i.field):void 0,s=Fb(i.transform,o||null);null!=s&&(e=null==e?(new Nw).set(i.field,s):e.set(i.field,s))}return e?e.Ge():null}(e):null);null!=s&&n.push(new dw(o.key,s,Rw(s.proto.mapValue),iw.exists(!0)))}return l.jn.Lr(u,f,n,c)})}).then(function(t){var e=t.In(h);return{batchId:t.batchId,Cn:e}})},GI.prototype.yh=function(r){var i=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var e=r.batch.keys(),n=i.Eh.Hs({Js:!0});return i.ph(t,r,n).next(function(){return n.apply(t)}).next(function(){return i.jn.zr(t)}).next(function(){return i.Ih.Jn(t,e)})})},GI.prototype.bh=function(t){var r=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",function(e){var n;return r.jn.qr(e,t).next(function(t){return fg(null!==t),n=t.keys(),r.jn.Kr(e,t)}).next(function(){return r.jn.zr(e)}).next(function(){return r.Ih.Jn(e,n)})})},GI.prototype.Wr=function(){var e=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.jn.Wr(t)})},GI.prototype.ai=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qi.ai(t)})},GI.prototype.vh=function(u){var c=this,h=u.X,l=this.dh;return this.persistence.runTransaction("Apply remote event","readwrite-primary",function(o){var i=c.Eh.Hs({Js:!0});l=c.dh;var s=[];u.Wt.forEach(function(t,e){var n,r,i=l.get(e);i&&(s.push(c.qi.Pi(o,t.Xt,e).next(function(){return c.qi.Ai(o,t.Yt,e)})),0<(n=t.resumeToken).H()&&(r=i.tt(n,h).Z(o.vi),l=l.nt(e,r),GI.Sh(i,r,t)&&s.push(c.qi.di(o,r))))});var t,a=mm,n=Tm();return u.jt.forEach(function(t,e){n=n.add(t)}),s.push(i.getEntries(o,n).next(function(r){u.jt.forEach(function(t,e){var n=r.get(t);e instanceof Uw&&e.version.isEqual(Rg.min())?(i.xn(t,h),a=a.nt(t,e)):null==n||0<e.version.o(n.version)||0===e.version.o(n.version)&&n.hasPendingWrites?(i.Nn(e,h),a=a.nt(t,e)):ug("LocalStore","Ignoring outdated watch update for ",t,". Current version:",n.version," Watch version:",e.version),u.Kt.has(t)&&s.push(c.persistence.ii.Nr(o,t))})})),h.isEqual(Rg.min())||(t=c.qi.ai(o).next(function(t){return c.qi.ci(o,o.vi,h)}),s.push(t)),P_.Sn(s).next(function(){return i.apply(o)}).next(function(){return c.Ih.Xn(o,a)})}).then(function(t){return c.dh=l,t})},GI.Sh=function(t,e,n){return fg(0<e.resumeToken.H()),0===t.resumeToken.H()||e.X.m()-t.X.m()>=this.Dh||0<n.Yt.size+n.Jt.size+n.Xt.size},GI.prototype.Ch=function(h){return Fs(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c=this;return Us(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return P_.forEach(h,function(e){return P_.forEach(e.as,function(t){return c.persistence.ii.Ri(n,e.targetId,t)}).next(function(){return P_.forEach(e.us,function(t){return c.persistence.ii.gi(n,e.targetId,t)})})})})];case 1:return t.sent(),[3,3];case 2:if(!II(e=t.sent()))throw e;return ug("LocalStore","Failed to update sequence numbers: "+e),[3,3];case 3:for(n=0,r=h;n<r.length;n++)i=r[n],o=i.targetId,i.fromCache||(s=this.dh.get(o),a=s.X,u=s.et(a),this.dh=this.dh.nt(o,u));return[2]}})})},GI.prototype.$h=function(e){var n=this;return this.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.jn.Ur(t,e)})},GI.prototype.Fh=function(e){var n=this;return this.persistence.runTransaction("read document","readonly",function(t){return n.Ih.Gn(t,e)})},GI.prototype.Nh=function(r){var i=this;return this.persistence.runTransaction("Allocate target","readwrite",function(e){var n;return i.qi.mi(e,r).next(function(t){return t?(n=t,P_.resolve(n)):i.qi.ri(e).next(function(t){return n=new om(r,t,0,e.vi),i.qi.li(e,n).next(function(){return n})})})}).then(function(t){var e=i.dh.get(t.targetId);return(null===e||0<t.X.o(e.X))&&(i.dh=i.dh.nt(t.targetId,t),i.wh.set(r,t.targetId)),t})},GI.prototype.mi=function(t,e){var n=this.wh.get(e);return void 0!==n?P_.resolve(this.dh.get(n)):this.qi.mi(t,e)},GI.prototype.kh=function(o,s){return Fs(this,void 0,void 0,function(){var e,n,r,i=this;return Us(this,function(t){switch(t.label){case 0:e=this.dh.get(o),n=s?"readwrite":"readwrite-primary",t.label=1;case 1:return t.trys.push([1,4,,5]),s?[3,3]:[4,this.persistence.runTransaction("Release target",n,function(t){return i.persistence.ii.removeTarget(t,e)})];case 2:t.sent(),t.label=3;case 3:return[3,5];case 4:if(!II(r=t.sent()))throw r;return ug("LocalStore","Failed to update sequence numbers for target "+o+": "+r),[3,5];case 5:return this.dh=this.dh.remove(o),this.wh.delete(e.target),[2]}})})},GI.prototype.xh=function(t,n){var r=this,i=Rg.min(),o=Tm();return this.persistence.runTransaction("Execute query","readonly",function(e){return r.mi(e,Yw(t)).next(function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.qi.Vi(e,t.targetId).next(function(t){o=t})}).next(function(){return r.fh.ts(e,t,n?i:Rg.min(),n?o:Tm())}).next(function(t){return{documents:t,Mh:o}})})},GI.prototype.ph=function(t,i,o){var e=this,s=i.batch,n=s.keys(),a=P_.resolve();return n.forEach(function(r){a=a.next(function(){return o.Mn(t,r)}).next(function(t){var e=t,n=i.An.get(r);fg(null!==n),(!e||e.version.o(n)<0)&&(e=s.wn(r,e,i))&&o.Nn(e,i.mn)})}),a.next(function(){return e.jn.Kr(t,s)})},GI.prototype.oh=function(e){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(t){return e.lh(t,n.dh)})},GI);function GI(t,e,n){this.persistence=t,this.fh=e,this.dh=new cm(yg),this.wh=new Ag(Jg,$g),this.Th=Rg.min(),this.jn=t.mr(n),this.Eh=t.Pr(),this.qi=t.Rr(),this.Ih=new L_(this.Eh,this.jn,this.persistence.gr()),this.fh.mh(this.Ih)}function zI(t,e){this.hh=t,this.params=e}function QI(t,e){this.yr=t,this.ao=e,this.sh=!1,this.ih=null}function XI(t,e,n){return new KI(t,e,n)}function YI(t,e){var n=t,r=n.qi,i=n.dh.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.Me(t,e).next(function(t){return t?t.target:null})})}function JI(e){return Fs(this,void 0,void 0,function(){return Us(this,function(t){if(e.code!==kg.FAILED_PRECONDITION||e.message!==D_)throw e;return ug("LocalStore","Unexpectedly lost primary lease"),[2]})})}KI.Dh=3e8;var $I=(eT.prototype._=function(){return this.Oh._()},eT.prototype.Ri=function(t,e){var n=new ZI(t,e);this.Oh=this.Oh.add(n),this.qh=this.qh.add(n)},eT.prototype.Uh=function(t,e){var n=this;t.forEach(function(t){return n.Ri(t,e)})},eT.prototype.gi=function(t,e){this.Wh(new ZI(t,e))},eT.prototype.Qh=function(t,e){var n=this;t.forEach(function(t){return n.gi(t,e)})},eT.prototype.jh=function(t){var e=this,n=new Fg(new xg([])),r=new ZI(n,t),i=new ZI(n,t+1),o=[];return this.qh.vt([r,i],function(t){e.Wh(t),o.push(t.key)}),o},eT.prototype.Kh=function(){var e=this;this.Oh.forEach(function(t){return e.Wh(t)})},eT.prototype.Wh=function(t){this.Oh=this.Oh.delete(t),this.qh=this.qh.delete(t)},eT.prototype.Gh=function(t){var e=new Fg(new xg([])),n=new ZI(e,t),r=new ZI(e,t+1),i=Tm();return this.qh.vt([n,r],function(t){i=i.add(t.key)}),i},eT.prototype.pi=function(t){var e=new ZI(t,0),n=this.Oh.Dt(e);return null!==n&&t.isEqual(n.key)},eT),ZI=(tT.Lh=function(t,e){return Fg.P(t.key,e.key)||yg(t.zh,e.zh)},tT.Bh=function(t,e){return yg(t.zh,e.zh)||Fg.P(t.key,e.key)},tT);function tT(t,e){this.key=t,this.zh=e}function eT(){this.Oh=new ym(ZI.Lh),this.qh=new ym(ZI.Bh)}function nT(t,e){if(0!==e.length)throw new Og(kg.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+wT(e.length,"argument")+".")}function rT(t,e,n){if(e.length!==n)throw new Og(kg.INVALID_ARGUMENT,"Function "+t+"() requires "+wT(n,"argument")+", but was called with "+wT(e.length,"argument")+".")}function iT(t,e,n){if(e.length<n)throw new Og(kg.INVALID_ARGUMENT,"Function "+t+"() requires at least "+wT(n,"argument")+", but was called with "+wT(e.length,"argument")+".")}function oT(t,e,n,r){if(e.length<n||e.length>r)throw new Og(kg.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+wT(e.length,"argument")+".")}function sT(t,e,n,r){fT(t,e,bT(n)+" argument",r)}function aT(t,e,n,r){void 0!==r&&sT(t,e,n,r)}function uT(t,e,n,r){fT(t,e,n+" option",r)}function cT(t,e,n,r){void 0!==r&&uT(t,e,n,r)}function hT(t,e,n,r,u){void 0!==r&&function(t,e,n){for(var r=[],i=0,o=u;i<o.length;i++){var s=o[i];if(s===n)return;r.push(dT(s))}var a=dT(n);throw new Og(kg.INVALID_ARGUMENT,"Invalid value "+a+" provided to function "+t+'() for option "'+e+'". Acceptable values: '+r.join(", "))}(t,n,r)}function lT(t,e,n,r){if(!e.some(function(t){return t===r}))throw new Og(kg.INVALID_ARGUMENT,"Invalid value "+dT(r)+" provided to function "+t+"() for its "+bT(n)+" argument. Acceptable values: "+e.join(", "));return r}function fT(t,e,n,r){if(!("object"===e?pT(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=dT(r);throw new Og(kg.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function pT(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function dT(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":lg();if(e instanceof Array)return"an array";var t=function(){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}();return t?"a custom "+t+" object":"an object"}function vT(t,e,n){if(void 0===n)throw new Og(kg.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+bT(e)+" argument, but it was undefined.")}function yT(n,t,r){Ig(t,function(t,e){if(r.indexOf(t)<0)throw new Og(kg.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+n+"(). Available options: "+r.join(", "))})}function gT(t,e,n,r){var i=dT(r);return new Og(kg.INVALID_ARGUMENT,"Function "+t+"() requires its "+bT(n)+" argument to be a "+e+", but it was: "+i)}function mT(t,e,n){if(n<=0)throw new Og(kg.INVALID_ARGUMENT,"Function "+t+"() requires its "+bT(e)+" argument to be a positive number, but it was: "+n+".")}function bT(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function wT(t,e){return t+" "+e+(1===t?"":"s")}function _T(){if("undefined"==typeof Uint8Array)throw new Og(kg.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function ET(){if("undefined"==typeof atob)throw new Og(kg.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var IT,TT,ST=(DT.fromBase64String=function(t){rT("Blob.fromBase64String",arguments,1),sT("Blob.fromBase64String","string",1,t),ET();try{return new DT(tm.fromBase64String(t))}catch(t){throw new Og(kg.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},DT.fromUint8Array=function(t){if(rT("Blob.fromUint8Array",arguments,1),_T(),!(t instanceof Uint8Array))throw gT("Blob.fromUint8Array","Uint8Array",1,t);return new DT(tm.fromUint8Array(t))},DT.prototype.toBase64=function(){return rT("Blob.toBase64",arguments,0),ET(),this.Hh.toBase64()},DT.prototype.toUint8Array=function(){return rT("Blob.toUint8Array",arguments,0),_T(),this.Hh.toUint8Array()},DT.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},DT.prototype.isEqual=function(t){return this.Hh.isEqual(t.Hh)},DT),CT=function(t){!function(){if(!(t instanceof Array)||t.length<1)throw new Og(kg.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least 1 element.")}();for(var e=0;e<t.length;++e)if(sT("FieldPath","string",e,t[e]),0===t[e].length)throw new Og(kg.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.Yh=new Mg(t)},NT=(Ls(RT,TT=CT),RT.documentId=function(){return new RT(Mg.L().F())},RT.prototype.isEqual=function(t){if(!(t instanceof RT))throw gT("isEqual","FieldPath",1,t);return this.Yh.isEqual(t.Yh)},RT),AT=new RegExp("[~\\*/\\[\\]]"),kT=function(){this.Jh=this},OT=(Ls(PT,IT=kT),PT.prototype.Zh=function(t){if(2!==t.ta)throw 1===t.ta?t.ea(this.Xh+"() can only appear at the top level of your update data"):t.ea(this.Xh+"() cannot be used with set() unless you pass {merge:true}");return t.Le.push(t.path),null},PT.prototype.isEqual=function(t){return t instanceof PT},PT);function PT(t){var e=this;return(e=IT.call(this)||this).Xh=t,e}function RT(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return TT.call(this,t)||this}function DT(t){ET(),this.Hh=t}function xT(t,e,n){return new cS({ta:3,na:e.settings.na,methodName:t.Xh,sa:n},e.s,e.serializer,e.ignoreUndefinedProperties)}var LT,MT,FT,UT,jT,VT,qT=(Ls(tS,VT=kT),tS.prototype.Zh=function(t){return new ew(t.path,new Vb)},tS.prototype.isEqual=function(t){return t instanceof tS},tS),BT=(Ls(ZT,jT=kT),ZT.prototype.Zh=function(t){var e=xT(this,t,!0),n=this.ia.map(function(t){return gS(t,e)}),r=new qb(n);return new ew(t.path,r)},ZT.prototype.isEqual=function(t){return this===t},ZT),WT=(Ls($T,UT=kT),$T.prototype.Zh=function(t){var e=xT(this,t,!0),n=this.ia.map(function(t){return gS(t,e)}),r=new Gb(n);return new ew(t.path,r)},$T.prototype.isEqual=function(t){return this===t},$T),HT=(Ls(JT,FT=kT),JT.prototype.Zh=function(t){var e=new Yb(t.serializer,db(t.serializer,this.ra));return new ew(t.path,e)},JT.prototype.isEqual=function(t){return this===t},JT),KT=(Ls(YT,MT=kT),YT.delete=function(){return nT("FieldValue.delete",arguments),new GT(new OT("FieldValue.delete"))},YT.serverTimestamp=function(){return nT("FieldValue.serverTimestamp",arguments),new GT(new qT("FieldValue.serverTimestamp"))},YT.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return iT("FieldValue.arrayUnion",arguments,1),new GT(new BT("FieldValue.arrayUnion",t))},YT.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return iT("FieldValue.arrayRemove",arguments,1),new GT(new WT("FieldValue.arrayRemove",t))},YT.increment=function(t){return sT("FieldValue.increment","number",1,t),rT("FieldValue.increment",arguments,1),new GT(new HT("FieldValue.increment",t))},YT),GT=(Ls(XT,LT=KT),XT.prototype.Zh=function(t){return this.Jh.Zh(t)},XT.prototype.isEqual=function(t){return t instanceof XT&&this.Jh.isEqual(t.Jh)},XT),zT=(Object.defineProperty(QT.prototype,"latitude",{get:function(){return this.oa},enumerable:!1,configurable:!0}),Object.defineProperty(QT.prototype,"longitude",{get:function(){return this.ha},enumerable:!1,configurable:!0}),QT.prototype.isEqual=function(t){return this.oa===t.oa&&this.ha===t.ha},QT.prototype.T=function(t){return yg(this.oa,t.oa)||yg(this.ha,t.ha)},QT);function QT(t,e){if(rT("GeoPoint",arguments,2),sT("GeoPoint","number",1,t),sT("GeoPoint","number",2,e),!isFinite(t)||t<-90||90<t)throw new Og(kg.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new Og(kg.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.oa=t,this.ha=e}function XT(t){var e=this;return(e=LT.call(this)||this).Jh=t,e.Xh=t.Xh,e}function YT(){return MT.call(this)||this}function JT(t,e){var n=this;return(n=FT.call(this)||this).Xh=t,n.ra=e,n}function $T(t,e){var n=this;return(n=UT.call(this)||this).Xh=t,n.ia=e,n}function ZT(t,e){var n=this;return(n=jT.call(this)||this).Xh=t,n.ia=e,n}function tS(t){var e=this;return(e=VT.call(this)||this).Xh=t,e}function eS(t){return new lb(t,!0)}var nS=/^__.*__$/,rS=function(t,e,n){this.aa=t,this.ua=e,this.ca=n},iS=(aS.prototype.la=function(t,e){var n=[];return null!==this.Le?n.push(new dw(t,this.data,this.Le,e)):n.push(new pw(t,this.data,e)),0<this.fieldTransforms.length&&n.push(new bw(t,this.fieldTransforms)),n},aS),oS=(sS.prototype.la=function(t,e){var n=[new dw(t,this.data,this.Le,e)];return 0<this.fieldTransforms.length&&n.push(new bw(t,this.fieldTransforms)),n},sS);function sS(t,e,n){this.data=t,this.Le=e,this.fieldTransforms=n}function aS(t,e,n){this.data=t,this.Le=e,this.fieldTransforms=n}function uS(t){switch(t){case 0:case 2:case 1:return 1;case 3:case 4:return;default:throw lg()}}var cS=(Object.defineProperty(fS.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(fS.prototype,"ta",{get:function(){return this.settings.ta},enumerable:!1,configurable:!0}),fS.prototype.fa=function(t){return new fS(Object.assign(Object.assign({},this.settings),t),this.s,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.Le)},fS.prototype.da=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.fa({path:n,sa:!1});return r.wa(t),r},fS.prototype.Ta=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.fa({path:n,sa:!1});return r._a(),r},fS.prototype.Ea=function(t){return this.fa({path:void 0,sa:!0})},fS.prototype.ea=function(t){return IS(t,this.settings.methodName,this.settings.Ia||!1,this.path,this.settings.na)},fS.prototype.contains=function(e){return void 0!==this.Le.find(function(t){return e.D(t)})||void 0!==this.fieldTransforms.find(function(t){return e.D(t.field)})},fS.prototype._a=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.wa(this.path.get(t))},fS.prototype.wa=function(t){if(0===t.length)throw this.ea("Document fields must not be empty");if(uS(this.ta)&&nS.test(t))throw this.ea('Document fields cannot begin and end with "__"')},fS),hS=(lS.prototype.ma=function(t,e,n,r){return void 0===r&&(r=!1),new cS({ta:t,methodName:e,na:n,path:Mg.k(),sa:!1,Ia:r},this.s,this.serializer,this.ignoreUndefinedProperties)},lS);function lS(t,e,n){this.s=t,this.ignoreUndefinedProperties=e,this.serializer=n||eS(t)}function fS(t,e,n,r,i,o){this.settings=t,this.s=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this._a(),this.fieldTransforms=i||[],this.Le=o||[]}function pS(t,e,n,r,i,o){void 0===o&&(o={});var s=t.ma(o.merge||o.mergeFields?2:0,e,n,i);wS("Data must be an object, but it was:",s,r);var a,u,c=mS(r,s);if(o.merge)a=new tw(s.Le),u=s.fieldTransforms;else if(o.mergeFields){for(var h=[],l=0,f=o.mergeFields;l<f.length;l++){var p=f[l],d=void 0;if(p instanceof CT)d=p.Yh;else{if("string"!=typeof p)throw lg();d=ES(e,p,n)}if(!s.contains(d))throw new Og(kg.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");TS(h,d)||h.push(d)}a=new tw(h),u=s.fieldTransforms.filter(function(t){return a.je(t.field)})}else a=null,u=s.fieldTransforms;return new iS(new Cw(c),a,u)}function dS(t,o,s,e){var a=t.ma(1,o,s);wS("Data must be an object, but it was:",a,e);var u=[],c=new Nw;Ig(e,function(t,e){var n,r=ES(o,t,s),i=a.Ta(r);e instanceof kT&&e.Jh instanceof OT?u.push(r):null!=(n=gS(e,i))&&(u.push(r),c.set(r,n))});var n=new tw(u);return new oS(c.Ge(),n,a.fieldTransforms)}function vS(t,e,n,r,i,o){var s=t.ma(1,e,n),a=[_S(e,r,n)],u=[i];if(o.length%2!=0)throw new Og(kg.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(_S(e,o[c])),u.push(o[c+1]);for(var h,l,f,p,d=[],v=new Nw,y=a.length-1;0<=y;--y){TS(d,a[y])||(h=a[y],l=u[y],f=s.Ta(h),l instanceof kT&&l.Jh instanceof OT?d.push(h):null!=(p=gS(l,f))&&(d.push(h),v.set(h,p)))}var g=new tw(d);return new oS(v.Ge(),g,s.fieldTransforms)}function yS(t,e,n,r){return void 0===r&&(r=!1),gS(n,t.ma(r?4:3,e))}function gS(s,t){if(bS(s))return wS("Unsupported field value:",t,s),mS(s,t);if(s instanceof kT)return function(t,e){if(!uS(e.ta))throw e.ea(t.Xh+"() can only be used with update() and set()");if(!e.path)throw e.ea(t.Xh+"() is not currently supported inside arrays");var n=t.Zh(e);n&&e.fieldTransforms.push(n)}(s,t),null;if(t.path&&t.Le.push(t.path),s instanceof Array){if(t.settings.sa&&4!==t.ta)throw t.ea("Nested arrays are not supported");return function(t){for(var e=[],n=0,r=0,i=s;r<i.length;r++){var o=gS(i[r],t.Ea(n));null==o&&(o={nullValue:"NULL_VALUE"}),e.push(o),n++}return{arrayValue:{values:e}}}(t)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return db(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Pg.fromDate(t);return{timestampValue:vb(e.serializer,n)}}if(t instanceof Pg){var r=new Pg(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:vb(e.serializer,r)}}if(t instanceof zT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ST)return{bytesValue:yb(e.serializer,t)};if(t instanceof rS){var i=e.s,o=t.aa;if(!o.isEqual(i))throw e.ea("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:mb(t.aa||e.s,t.ua.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.ea("Unsupported field value: "+dT(t))}(s,t)}function mS(t,r){var i={};return Tg(t)?r.path&&0<r.path.length&&r.Le.push(r.path):Ig(t,function(t,e){var n=gS(e,r.da(t));null!=n&&(i[t]=n)}),{mapValue:{fields:i}}}function bS(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Pg||t instanceof zT||t instanceof ST||t instanceof rS||t instanceof kT)}function wS(t,e,n){if(!bS(n)||!pT(n)){var r=dT(n);throw"an object"===r?e.ea(t+" a custom object"):e.ea(t+" "+r)}}function _S(t,e,n){if(e instanceof CT)return e.Yh;if("string"==typeof e)return ES(t,e);throw IS("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}function ES(t,e,n){try{return function(e){if(0<=e.search(AT))throw new Og(kg.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(NT.bind.apply(NT,Bs([void 0],e.split("."))))}catch(t){throw new Og(kg.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).Yh}catch(e){throw IS(e instanceof Error?e.message:e.toString(),t,!1,void 0,n)}}function IS(t,e,n,r,i){var o=r&&!r._(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Og(kg.INVALID_ARGUMENT,(a+=". ")+t+u)}function TS(t,e){return t.some(function(t){return t.isEqual(e)})}var SS=(CS.prototype.Mr=function(){return null!=this.uid},CS.prototype.Aa=function(){return this.Mr()?"uid:"+this.uid:"anonymous-user"},CS.prototype.isEqual=function(t){return t.uid===this.uid},CS);function CS(t){this.uid=t}function NS(t,e){this.user=e,this.type="OAuth",this.ga={},this.ga.Authorization="Bearer "+t}SS.UNAUTHENTICATED=new SS(null),SS.Ra=new SS("google-credentials-uid"),SS.Pa=new SS("first-party-uid");var AS,kS,OS,PS=($S.prototype.getToken=function(){return Promise.resolve(null)},$S.prototype.ya=function(){},$S.prototype.pa=function(t){(this.Va=t)(SS.UNAUTHENTICATED)},$S.prototype.ba=function(){this.Va=null},$S),RS=(JS.prototype.getToken=function(){var e=this,n=this.Da,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(function(t){return e.Da!==n?(ug("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):t?(fg("string"==typeof t.accessToken),new NS(t.accessToken,e.currentUser)):null}):Promise.resolve(null)},JS.prototype.ya=function(){this.forceRefresh=!0},JS.prototype.pa=function(t){this.Va=t,this.Sa&&t(this.currentUser)},JS.prototype.ba=function(){this.auth&&this.auth.removeAuthTokenListener(this.va),this.va=null,this.Va=null},JS.prototype.Ca=function(){var t=this.auth&&this.auth.getUid();return fg(null===t||"string"==typeof t),new SS(t)},JS),DS=(Object.defineProperty(YS.prototype,"ga",{get:function(){var t={"X-Goog-AuthUser":this.Fa},e=this.$a.auth.Na([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),YS),xS=(XS.prototype.getToken=function(){return Promise.resolve(new DS(this.$a,this.Fa))},XS.prototype.pa=function(t){t(SS.Pa)},XS.prototype.ba=function(){},XS.prototype.ya=function(){},XS),LS=(QS.prototype.qa=function(){return 1===this.state||2===this.state||4===this.state},QS.prototype.Ba=function(){return 2===this.state},QS.prototype.start=function(){3!==this.state?this.auth():this.Ua()},QS.prototype.stop=function(){return Fs(this,void 0,void 0,function(){return Us(this,function(t){switch(t.label){case 0:return this.qa()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},QS.prototype.Wa=function(){this.state=0,this.Po.reset()},QS.prototype.Qa=function(){var t=this;this.Ba()&&null===this.La&&(this.La=this.Ts.bs(this.ka,6e4,function(){return t.ja()}))},QS.prototype.Ka=function(t){this.Ga(),this.stream.send(t)},QS.prototype.ja=function(){return Fs(this,void 0,void 0,function(){return Us(this,function(t){return this.Ba()?[2,this.close(0)]:[2]})})},QS.prototype.Ga=function(){this.La&&(this.La.cancel(),this.La=null)},QS.prototype.close=function(e,n){return Fs(this,void 0,void 0,function(){return Us(this,function(t){switch(t.label){case 0:return this.Ga(),this.Po.cancel(),this.Oa++,3!==e?this.Po.reset():n&&n.code===kg.RESOURCE_EXHAUSTED?(cg(n.toString()),cg("Using maximum backoff delay to prevent overloading the backend."),this.Po.Vs()):n&&n.code===kg.UNAUTHENTICATED&&this.Ma.ya(),null!==this.stream&&(this.za(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Ha(n)];case 1:return t.sent(),[2]}})})},QS.prototype.za=function(){},QS.prototype.auth=function(){var n=this;this.state=1;var t=this.Ya(this.Oa),e=this.Oa;this.Ma.getToken().then(function(t){n.Oa===e&&n.Ja(t)},function(e){t(function(){var t=new Og(kg.UNKNOWN,"Fetching auth token failed: "+e.message);return n.Xa(t)})})},QS.prototype.Ja=function(t){var e=this,n=this.Ya(this.Oa);this.stream=this.Za(t),this.stream.tu(function(){n(function(){return e.state=2,e.listener.tu()})}),this.stream.Ha(function(t){n(function(){return e.Xa(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},QS.prototype.Ua=function(){var t=this;this.state=4,this.Po.ys(function(){return Fs(t,void 0,void 0,function(){return Us(this,function(t){return this.state=0,this.start(),[2]})})})},QS.prototype.Xa=function(t){return ug("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},QS.prototype.Ya=function(e){var n=this;return function(t){n.Ts.Zi(function(){return n.Oa===e?t():(ug("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},QS),MS=(Ls(zS,OS=LS),zS.prototype.Za=function(t){return this.xa.eu("Listen",t)},zS.prototype.onMessage=function(t){this.Po.reset();var e=function(t,e){var n,r,i,o;if("targetChange"in e){e.targetChange;var s="NO_CHANGE"===(o=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===o?1:"REMOVE"===o?2:"CURRENT"===o?3:"RESET"===o?4:lg(),a=e.targetChange.targetIds||[],u=(i=e.targetChange.resumeToken,t.Oe?(fg(void 0===i||"string"==typeof i),tm.fromBase64String(i||"")):(fg(void 0===i||i instanceof Uint8Array),tm.fromUint8Array(i||new Uint8Array))),c=e.targetChange.cause,h=new Am(s,a,u,c&&(r=void 0===(n=c).code?kg.UNKNOWN:um(n.code),new Og(r,n.message||""))||null)}else if("documentChange"in e){e.documentChange;var l=e.documentChange;l.document,l.document.name,l.document.updateTime;var f=_b(t,l.document.name),p=gb(l.document.updateTime),d=new Cw({mapValue:{fields:l.document.fields}}),v=new Fw(f,p,d,{});h=new Cm(l.targetIds||[],l.removedTargetIds||[],v.key,v)}else if("documentDelete"in e){e.documentDelete;var y=e.documentDelete;y.document;var g=_b(t,y.document),m=y.readTime?gb(y.readTime):Rg.min(),b=new Uw(g,m);h=new Cm([],y.removedTargetIds||[],b.key,b)}else if("documentRemove"in e){e.documentRemove;var w=e.documentRemove;w.document;var _=_b(t,w.document);h=new Cm([],w.removedTargetIds||[],_,null)}else{if(!("filter"in e))return lg();e.filter;var E=e.filter;E.targetId;var I=new nm(E.count||0);h=new Nm(E.targetId,I)}return h}(this.serializer,t),n=function(t){if(!("targetChange"in t))return Rg.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length||!e.readTime?Rg.min():gb(e.readTime)}(t);return this.listener.nu(e,n)},zS.prototype.su=function(t){var e,n,r,i,o={};o.database=Tb(this.serializer),o.addTarget=(e=this.serializer,(r=Zg(i=(n=t).target)?{documents:kb(e,i)}:{query:Ob(e,i)}).targetId=n.targetId,0<n.resumeToken.H()&&(r.resumeToken=yb(e,n.resumeToken)),r);var s,a,u=(this.serializer,s=t,null==(a=function(){switch(s.J){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return lg()}}())?null:{"goog-listen-tags":a});u&&(o.labels=u),this.Ka(o)},zS.prototype.iu=function(t){var e={};e.database=Tb(this.serializer),e.removeTarget=t,this.Ka(e)},zS),FS=(Ls(GS,kS=LS),Object.defineProperty(GS.prototype,"ou",{get:function(){return this.ru},enumerable:!1,configurable:!0}),GS.prototype.start=function(){this.ru=!1,this.lastStreamToken=void 0,kS.prototype.start.call(this)},GS.prototype.za=function(){this.ru&&this.hu([])},GS.prototype.Za=function(t){return this.xa.eu("Write",t)},GS.prototype.onMessage=function(t){if(fg(!!t.streamToken),this.lastStreamToken=t.streamToken,this.ru){this.Po.reset();var e=(r=t.writeResults,i=t.commitTime,r&&0<r.length?(fg(void 0!==i),r.map(function(t){return function(t,e){var n=t.updateTime?gb(t.updateTime):gb(e);n.isEqual(Rg.min())&&(n=gb(e));var r=null;return t.transformResults&&0<t.transformResults.length&&(r=t.transformResults),new rw(n,r)}(t,i)})):[]),n=gb(t.commitTime);return this.listener.au(n,e)}var r,i;return fg(!t.writeResults||0===t.writeResults.length),this.ru=!0,this.listener.uu()},GS.prototype.cu=function(){var t={};t.database=Tb(this.serializer),this.Ka(t)},GS.prototype.hu=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return Nb(e.serializer,t)})};this.Ka(n)},GS),US=(Ls(KS,AS=function(){}),KS.prototype._u=function(){if(this.lu)throw new Og(kg.FAILED_PRECONDITION,"The client has already been terminated.")},KS.prototype.start=function(t){this.xa=t},KS.prototype.fu=function(e,n){var r=this;return this._u(),this.credentials.getToken().then(function(t){return r.xa.fu(e,n,t)}).catch(function(t){throw t.code===kg.UNAUTHENTICATED&&r.credentials.ya(),t})},KS.prototype.du=function(e,n){var r=this;return this._u(),this.credentials.getToken().then(function(t){return r.xa.du(e,n,t)}).catch(function(t){throw t.code===kg.UNAUTHENTICATED&&r.credentials.ya(),t})},KS),jS=(HS.prototype.Au=function(r){return Fs(this,void 0,void 0,function(){var e,n=this;return Us(this,function(t){switch(t.label){case 0:if(this.Ru(),0<this.mutations.length)throw new Og(kg.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(s,a){return Fs(this,void 0,void 0,function(){var i,e,n,o,r;return Us(this,function(t){switch(t.label){case 0:return e={database:Tb((i=s).serializer),documents:a.map(function(t){return wb(i.serializer,t)})},[4,i.du("BatchGetDocuments",e)];case 1:return n=t.sent(),o=new Map,n.forEach(function(t){var e,n,r=(e=i.serializer,"found"in(n=t)?function(t,e){fg(!!e.found),e.found.name,e.found.updateTime;var n=_b(t,e.found.name),r=gb(e.found.updateTime),i=new Cw({mapValue:{fields:e.found.fields}});return new Fw(n,r,i,{})}(e,n):"missing"in n?function(t,e){fg(!!e.missing),fg(!!e.readTime);var n=_b(t,e.missing),r=gb(e.readTime);return new Uw(n,r)}(e,n):lg());o.set(r.key.toString(),r)}),r=[],[2,(a.forEach(function(t){var e=o.get(t.toString());fg(!!e),r.push(e)}),r)]}})})}(this.wu,r)];case 1:return[2,((e=t.sent()).forEach(function(t){t instanceof Uw||t instanceof Fw?n.Pu(t):lg()}),e)]}})})},HS.prototype.set=function(t,e){this.write(e.la(t,this.Ue(t))),this.mu.add(t)},HS.prototype.update=function(t,e){try{this.write(e.la(t,this.gu(t)))}catch(t){this.Iu=t}this.mu.add(t)},HS.prototype.delete=function(t){this.write([new Tw(t,this.Ue(t))]),this.mu.add(t)},HS.prototype.commit=function(){return Fs(this,void 0,void 0,function(){var e,r=this;return Us(this,function(t){switch(t.label){case 0:if(this.Ru(),this.Iu)throw this.Iu;return e=this.Tu,this.mutations.forEach(function(t){e.delete(t.key.toString())}),e.forEach(function(t,e){var n=new Fg(xg.N(e));r.mutations.push(new Sw(n,r.Ue(n)))}),[4,function(r,i){return Fs(this,void 0,void 0,function(){var e,n;return Us(this,function(t){switch(t.label){case 0:return n={database:Tb((e=r).serializer),writes:i.map(function(t){return Nb(e.serializer,t)})},[4,e.fu("Commit",n)];case 1:return t.sent(),[2]}})})}(this.wu,this.mutations)];case 1:return t.sent(),this.Eu=!0,[2]}})})},HS.prototype.Pu=function(t){var e;if(t instanceof Fw)e=t.version;else{if(!(t instanceof Uw))throw lg();e=Rg.min()}var n=this.Tu.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Og(kg.ABORTED,"Document version changed between two reads.")}else this.Tu.set(t.key.toString(),e)},HS.prototype.Ue=function(t){var e=this.Tu.get(t.toString());return!this.mu.has(t)&&e?iw.updateTime(e):iw.We()},HS.prototype.gu=function(t){var e=this.Tu.get(t.toString());if(this.mu.has(t)||!e)return iw.exists(!0);if(e.isEqual(Rg.min()))throw new Og(kg.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return iw.updateTime(e)},HS.prototype.write=function(t){this.Ru(),this.mutations=this.mutations.concat(t)},HS.prototype.Ru=function(){},HS),VS=(WS.prototype.vu=function(){var t=this;0===this.yu&&(this.Su("Unknown"),this.pu=this.ao.bs("online_state_timeout",1e4,function(){return t.pu=null,t.Du("Backend didn't respond within 10 seconds."),t.Su("Offline"),Promise.resolve()}))},WS.prototype.Cu=function(t){"Online"===this.state?this.Su("Unknown"):(this.yu++,1<=this.yu&&(this.$u(),this.Du("Connection failed 1 times. Most recent error: "+t.toString()),this.Su("Offline")))},WS.prototype.set=function(t){this.$u(),this.yu=0,"Online"===t&&(this.bu=!1),this.Su(t)},WS.prototype.Su=function(t){t!==this.state&&(this.state=t,this.Vu(t))},WS.prototype.Du=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.bu?(cg(e),this.bu=!1):ug("OnlineStateTracker",e)},WS.prototype.$u=function(){null!==this.pu&&(this.pu.cancel(),this.pu=null)},WS),qS=(BS.prototype.start=function(){return this.enableNetwork()},BS.prototype.enableNetwork=function(){return this.Mu.delete(0),this.Ju()},BS.prototype.Ju=function(){return Fs(this,void 0,void 0,function(){return Us(this,function(t){switch(t.label){case 0:return this.qu()?(this.Xu()?this.Zu():this.Uu.set("Unknown"),[4,this.tc()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},BS.prototype.disableNetwork=function(){return Fs(this,void 0,void 0,function(){return Us(this,function(t){switch(t.label){case 0:return this.Mu.add(0),[4,this.ec()];case 1:return t.sent(),this.Uu.set("Offline"),[2]}})})},BS.prototype.ec=function(){return Fs(this,void 0,void 0,function(){return Us(this,function(t){switch(t.label){case 0:return[4,this.Gu.stop()];case 1:return t.sent(),[4,this.Wu.stop()];case 2:return t.sent(),0<this.Nu.length&&(ug("RemoteStore","Stopping write stream with "+this.Nu.length+" pending writes"),this.Nu=[]),this.nc(),[2]}})})},BS.prototype._r=function(){return Fs(this,void 0,void 0,function(){return Us(this,function(t){switch(t.label){case 0:return ug("RemoteStore","RemoteStore shutting down."),this.Mu.add(5),[4,this.ec()];case 1:return t.sent(),this.Ou._r(),this.Uu.set("Unknown"),[2]}})})},BS.prototype.listen=function(t){this.ku.has(t.targetId)||(this.ku.set(t.targetId,t),this.Xu()?this.Zu():this.Wu.Ba()&&this.sc(t))},BS.prototype.ic=function(t){this.ku.delete(t),this.Wu.Ba()&&this.rc(t),0===this.ku.size&&(this.Wu.Ba()?this.Wu.Qa():this.qu()&&this.Uu.set("Unknown"))},BS.prototype.Me=function(t){return this.ku.get(t)||null},BS.prototype.xe=function(t){return this.oc.xe(t)},BS.prototype.sc=function(t){this.xu.de(t.targetId),this.Wu.su(t)},BS.prototype.rc=function(t){this.xu.de(t),this.Wu.iu(t)},BS.prototype.Zu=function(){this.xu=new Lm(this),this.Wu.start(),this.Uu.vu()},BS.prototype.Xu=function(){return this.qu()&&!this.Wu.qa()&&0<this.ku.size},BS.prototype.qu=function(){return 0===this.Mu.size},BS.prototype.nc=function(){this.xu=null},BS.prototype.Qu=function(){return Fs(this,void 0,void 0,function(){var n=this;return Us(this,function(t){return this.ku.forEach(function(t,e){n.sc(t)}),[2]})})},BS.prototype.ju=function(e){return Fs(this,void 0,void 0,function(){return Us(this,function(t){return this.nc(),this.Xu()?(this.Uu.Cu(e),this.Zu()):this.Uu.set("Unknown"),[2]})})},BS.prototype.Ku=function(i,o){return Fs(this,void 0,void 0,function(){var e,n,r;return Us(this,function(t){switch(t.label){case 0:if(this.Uu.set("Online"),!(i instanceof Am&&2===i.state&&i.cause))return[3,6];t.label=1;case 1:return t.trys.push([1,3,,5]),[4,this.hc(i)];case 2:return t.sent(),[3,5];case 3:return e=t.sent(),ug("RemoteStore","Failed to remove targets %s: %s ",i.targetIds.join(","),e),[4,this.ac(e)];case 4:return t.sent(),[3,5];case 5:return[3,13];case 6:if(i instanceof Cm?this.xu.Pe(i):i instanceof Nm?this.xu.De(i):this.xu.ye(i),o.isEqual(Rg.min()))return[3,13];t.label=7;case 7:return t.trys.push([7,11,,13]),[4,this.Fu.ai()];case 8:return n=t.sent(),0<=o.o(n)?[4,this.uc(o)]:[3,10];case 9:t.sent(),t.label=10;case 10:return[3,13];case 11:return ug("RemoteStore","Failed to raise snapshot:",r=t.sent()),[4,this.ac(r)];case 12:return t.sent(),[3,13];case 13:return[2]}})})},BS.prototype.ac=function(n,r){return Fs(this,void 0,void 0,function(){var e=this;return Us(this,function(t){switch(t.label){case 0:if(!II(n))throw n;return this.Mu.add(1),[4,this.ec()];case 1:return t.sent(),this.Uu.set("Offline"),r=r||function(){return e.Fu.ai()},this.ao.er(function(){return Fs(e,void 0,void 0,function(){return Us(this,function(t){switch(t.label){case 0:return ug("RemoteStore","Retrying IndexedDB access"),[4,r()];case 1:return t.sent(),this.Mu.delete(1),[4,this.Ju()];case 2:return t.sent(),[2]}})})}),[2]}})})},BS.prototype.cc=function(e){var n=this;return e().catch(function(t){return n.ac(t,e)})},BS.prototype.uc=function(r){var i=this,t=this.xu.Fe(r);return t.Wt.forEach(function(t,e){var n;0<t.resumeToken.H()&&((n=i.ku.get(e))&&i.ku.set(e,n.tt(t.resumeToken,r)))}),t.Qt.forEach(function(t){var e,n=i.ku.get(t);n&&(i.ku.set(t,n.tt(tm.Y,n.X)),i.rc(t),e=new om(n.target,t,1,n.sequenceNumber),i.sc(e))}),this.oc.vh(t)},BS.prototype.hc=function(o){return Fs(this,void 0,void 0,function(){var e,n,r,i;return Us(this,function(t){switch(t.label){case 0:e=o.cause,n=0,r=o.targetIds,t.label=1;case 1:return n<r.length?(i=r[n],this.ku.has(i)?[4,this.oc.lc(i,e)]:[3,3]):[3,5];case 2:t.sent(),this.ku.delete(i),this.xu.removeTarget(i),t.label=3;case 3:t.label=4;case 4:return n++,[3,1];case 5:return[2]}})})},BS.prototype.tc=function(){return Fs(this,void 0,void 0,function(){var e,n,r;return Us(this,function(t){switch(t.label){case 0:e=0<this.Nu.length?this.Nu[this.Nu.length-1].batchId:-1,t.label=1;case 1:if(!this._c())return[3,7];t.label=2;case 2:return t.trys.push([2,4,,6]),[4,this.Fu.$h(e)];case 3:return null===(n=t.sent())?(0===this.Nu.length&&this.Gu.Qa(),[3,7]):(e=n.batchId,this.fc(n),[3,6]);case 4:return r=t.sent(),[4,this.ac(r)];case 5:return t.sent(),[3,6];case 6:return[3,1];case 7:return this.dc()&&this.wc(),[2]}})})},BS.prototype._c=function(){return this.qu()&&this.Nu.length<10},BS.prototype.Tc=function(){return this.Nu.length},BS.prototype.fc=function(t){this.Nu.push(t),this.Gu.Ba()&&this.Gu.ou&&this.Gu.hu(t.mutations)},BS.prototype.dc=function(){return this.qu()&&!this.Gu.qa()&&0<this.Nu.length},BS.prototype.wc=function(){this.Gu.start()},BS.prototype.zu=function(){return Fs(this,void 0,void 0,function(){return Us(this,function(t){return this.Gu.cu(),[2]})})},BS.prototype.Yu=function(){return Fs(this,void 0,void 0,function(){var e,n,r;return Us(this,function(t){for(e=0,n=this.Nu;e<n.length;e++)r=n[e],this.Gu.hu(r.mutations);return[2]})})},BS.prototype.au=function(i,o){return Fs(this,void 0,void 0,function(){var e,n,r=this;return Us(this,function(t){switch(t.label){case 0:return e=this.Nu.shift(),n=O_.from(e,i,o),[4,this.cc(function(){return r.oc.Ec(n)})];case 1:return t.sent(),[4,this.tc()];case 2:return t.sent(),[2]}})})},BS.prototype.Hu=function(e){return Fs(this,void 0,void 0,function(){return Us(this,function(t){switch(t.label){case 0:return e&&this.Gu.ou?[4,this.Ic(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.dc()&&this.wc(),[2]}})})},BS.prototype.Ic=function(i){return Fs(this,void 0,void 0,function(){var e,n,r=this;return Us(this,function(t){switch(t.label){case 0:return am(n=i.code)&&n!==kg.ABORTED?(e=this.Nu.shift(),this.Gu.Wa(),[4,this.cc(function(){return r.oc.mc(e.batchId,i)})]):[3,3];case 1:return t.sent(),[4,this.tc()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},BS.prototype.Ac=function(){return new jS(this.wu)},BS.prototype.Bu=function(){return Fs(this,void 0,void 0,function(){return Us(this,function(t){switch(t.label){case 0:return this.Mu.add(4),[4,this.ec()];case 1:return t.sent(),this.Uu.set("Unknown"),this.Gu.Wa(),this.Wu.Wa(),this.Mu.delete(4),[4,this.Ju()];case 2:return t.sent(),[2]}})})},BS.prototype.Rc=function(e){return Fs(this,void 0,void 0,function(){return Us(this,function(t){switch(t.label){case 0:return this.ao.Fo(),ug("RemoteStore","RemoteStore received new credentials"),this.Mu.add(3),[4,this.ec()];case 1:return t.sent(),this.Uu.set("Unknown"),[4,this.oc.Rc(e)];case 2:return t.sent(),this.Mu.delete(3),[4,this.Ju()];case 3:return t.sent(),[2]}})})},BS.prototype.Pc=function(e){return Fs(this,void 0,void 0,function(){return Us(this,function(t){switch(t.label){case 0:return e?(this.Mu.delete(2),[4,this.Ju()]):[3,2];case 1:return t.sent(),[3,5];case 2:return e?[3,4]:(this.Mu.add(2),[4,this.ec()]);case 3:t.sent(),this.Uu.set("Unknown"),t.label=4;case 4:t.label=5;case 5:return[2]}})})},BS);function BS(t,e,n,r,i){var o,s,a,u,c,h,l,f,p=this;this.Fu=t,this.wu=e,this.ao=n,this.Nu=[],this.ku=new Map,this.xu=null,this.Mu=new Set,this.Ou=i,this.Ou.Lu(function(t){n.Zi(function(){return Fs(p,void 0,void 0,function(){return Us(this,function(t){switch(t.label){case 0:return this.qu()?(ug("RemoteStore","Restarting streams for network reachability change."),[4,this.Bu()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Uu=new VS(n,r),this.Wu=(c=this.wu,h=n,l={tu:this.Qu.bind(this),Ha:this.ju.bind(this),nu:this.Ku.bind(this)},(f=c)._u(),new MS(h,f.xa,f.credentials,f.serializer,l)),this.Gu=(o=this.wu,s=n,a={tu:this.zu.bind(this),Ha:this.Hu.bind(this),uu:this.Yu.bind(this),au:this.au.bind(this)},(u=o)._u(),new FS(s,u.xa,u.credentials,u.serializer,a))}function WS(t,e){this.ao=t,this.Vu=e,this.state="Unknown",this.yu=0,this.pu=null,this.bu=!0}function HS(t){this.wu=t,this.Tu=new Map,this.mutations=[],this.Eu=!1,this.Iu=null,this.mu=new Set}function KS(t,e){var n=this;return(n=AS.call(this)||this).credentials=t,n.serializer=e,n.lu=!1,n}function GS(t,e,n,r,i){var o=this;return(o=kS.call(this,t,"write_stream_connection_backoff","write_stream_idle",e,n,i)||this).serializer=r,o.ru=!1,o}function zS(t,e,n,r,i){var o=this;return(o=OS.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",e,n,i)||this).serializer=r,o}function QS(t,e,n,r,i,o){this.Ts=t,this.ka=n,this.xa=r,this.Ma=i,this.listener=o,this.state=0,this.Oa=0,this.La=null,this.stream=null,this.Po=new z_(t,e)}function XS(t,e){this.$a=t,this.Fa=e}function YS(t,e){this.$a=t,this.Fa=e,this.type="FirstParty",this.user=SS.Pa}function JS(t){var e=this;this.va=null,this.currentUser=SS.UNAUTHENTICATED,this.Sa=!1,this.Da=0,this.Va=null,this.forceRefresh=!1,this.va=function(){e.Da++,e.currentUser=e.Ca(),e.Sa=!0,e.Va&&e.Va(e.currentUser)},this.Da=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.va):(this.va(null),t.get().then(function(t){e.auth=t,e.va&&e.auth.addAuthTokenListener(e.va)},function(){}))}function $S(){this.Va=null}function ZS(t,e){return"firestore_clients_"+t+"_"+e}function tC(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.Mr()&&(r+="_"+e.uid),r}function eC(t,e){return"firestore_targets_"+t+"_"+e}function nC(t){this.key=t}function rC(t){this.key=t}function iC(t,e,n){this.query=t,this.targetId=e,this.view=n}function oC(t){this.key=t,this.Ml=!1}var sC=(SC.gc=function(t,e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new Og(r.error.code,r.error.message)),i?new SC(t,e,r.state,o):(cg("SharedClientState","Failed to parse mutation state for ID '"+e+"': "+n),null)},SC.prototype.Vc=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},SC),aC=(TC.gc=function(t,e){var n=JSON.parse(e),r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),i=void 0;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new Og(n.error.code,n.error.message)),r?new TC(t,n.state,i):(cg("SharedClientState","Failed to parse target state for ID '"+t+"': "+e),null)},TC.prototype.Vc=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},TC),uC=(IC.gc=function(t,e){for(var n=JSON.parse(e),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Sm,o=0;r&&o<n.activeTargetIds.length;++o)r=Qg(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new IC(t,i):(cg("SharedClientState","Failed to parse client data for instance '"+t+"': "+e),null)},IC),cC=(EC.gc=function(t){var e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new EC(e.clientId,e.onlineState):(cg("SharedClientState","Failed to parse online state: "+t),null)},EC),hC=(_C.prototype.yc=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},_C.prototype.pc=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},_C.prototype.Vc=function(){var t={activeTargetIds:this.activeTargetIds.$(),updateTimeMs:Date.now()};return JSON.stringify(t)},_C),lC=(wC.Oi=function(t){return!(!t||!t.localStorage)},wC.prototype.start=function(){return Fs(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l,f=this;return Us(this,function(t){switch(t.label){case 0:return[4,this.oc.Ir()];case 1:for(e=t.sent(),n=0,r=e;n<r.length;n++)(i=r[n])!==this.bc&&(o=this.getItem(ZS(this.persistenceKey,i)))&&(s=uC.gc(i,o))&&(this.Dc=this.Dc.nt(s.clientId,s));for(this.Oc(),(a=this.storage.getItem(this.Mc))&&(u=this.Lc(a))&&this.qc(u),c=0,h=this.Cc;c<h.length;c++)l=h[c],this.Sc(l);return this.Cc=[],this.window.addEventListener("unload",function(){return f._r()}),this.Hi=!0,[2]}})})},wC.prototype.ds=function(t){this.setItem(this.Fc,JSON.stringify(t))},wC.prototype.Bc=function(){return this.Uc(this.Dc)},wC.prototype.Wc=function(n){var r=!1;return this.Dc.forEach(function(t,e){e.activeTargetIds.has(n)&&(r=!0)}),r},wC.prototype.Qc=function(t){this.jc(t,"pending")},wC.prototype.Kc=function(t,e,n){this.jc(t,e,n),this.Gc(t)},wC.prototype.zc=function(t){var e,n,r="not-current";return this.Wc(t)&&(!(e=this.storage.getItem(eC(this.persistenceKey,t)))||(n=aC.gc(t,e))&&(r=n.state)),this.Hc.yc(t),this.Oc(),r},wC.prototype.Yc=function(t){this.Hc.pc(t),this.Oc()},wC.prototype.Jc=function(t){return this.Hc.activeTargetIds.has(t)},wC.prototype.Xc=function(t){this.removeItem(eC(this.persistenceKey,t))},wC.prototype.Zc=function(t,e,n){this.tl(t,e,n)},wC.prototype.Ah=function(t,e,n){var r=this;e.forEach(function(t){r.Gc(t)}),this.currentUser=t,n.forEach(function(t){r.Qc(t)})},wC.prototype.el=function(t){this.nl(t)},wC.prototype._r=function(){this.Hi&&(this.window.removeEventListener("storage",this.vc),this.removeItem(this.$c),this.Hi=!1)},wC.prototype.getItem=function(t){var e=this.storage.getItem(t);return ug("SharedClientState","READ",t,e),e},wC.prototype.setItem=function(t,e){ug("SharedClientState","SET",t,e),this.storage.setItem(t,e)},wC.prototype.removeItem=function(t){ug("SharedClientState","REMOVE",t),this.storage.removeItem(t)},wC.prototype.Sc=function(t){var e=this,a=t;if(a.storageArea===this.storage){if(ug("SharedClientState","EVENT",a.key,a.newValue),a.key===this.$c)return void cg("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ts.er(function(){return Fs(e,void 0,void 0,function(){var e,n,r,i,o,s;return Us(this,function(t){if(this.Hi){if(null!==a.key)if(this.Nc.test(a.key)){if(null==a.newValue)return e=this.sl(a.key),[2,this.il(e,null)];if(n=this.rl(a.key,a.newValue))return[2,this.il(n.clientId,n)]}else if(this.kc.test(a.key)){if(null!==a.newValue&&(r=this.ol(a.key,a.newValue)))return[2,this.hl(r)]}else if(this.xc.test(a.key)){if(null!==a.newValue&&(i=this.al(a.key,a.newValue)))return[2,this.ul(i)]}else if(a.key===this.Mc){if(null!==a.newValue&&(o=this.Lc(a.newValue)))return[2,this.qc(o)]}else a.key===this.Fc&&(s=function(t){var e=F_.ws;if(null!=t)try{var n=JSON.parse(t);fg("number"==typeof n),e=n}catch(t){cg("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(a.newValue))!==F_.ws&&this.ls(s)}else this.Cc.push(a);return[2]})})})}},Object.defineProperty(wC.prototype,"Hc",{get:function(){return this.Dc.get(this.bc)},enumerable:!1,configurable:!0}),wC.prototype.Oc=function(){this.setItem(this.$c,this.Hc.Vc())},wC.prototype.jc=function(t,e,n){var r=new sC(this.currentUser,t,e,n),i=tC(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Vc())},wC.prototype.Gc=function(t){var e=tC(this.persistenceKey,this.currentUser,t);this.removeItem(e)},wC.prototype.nl=function(t){var e={clientId:this.bc,onlineState:t};this.storage.setItem(this.Mc,JSON.stringify(e))},wC.prototype.tl=function(t,e,n){var r=eC(this.persistenceKey,t),i=new aC(t,e,n);this.setItem(r,i.Vc())},wC.prototype.sl=function(t){var e=this.Nc.exec(t);return e?e[1]:null},wC.prototype.rl=function(t,e){var n=this.sl(t);return uC.gc(n,e)},wC.prototype.ol=function(t,e){var n=this.kc.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return sC.gc(new SS(i),r,e)},wC.prototype.al=function(t,e){var n=this.xc.exec(t),r=Number(n[1]);return aC.gc(r,e)},wC.prototype.Lc=function(t){return cC.gc(t)},wC.prototype.hl=function(e){return Fs(this,void 0,void 0,function(){return Us(this,function(t){return e.user.uid===this.currentUser.uid?[2,this.oc.cl(e.batchId,e.state,e.error)]:(ug("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])})})},wC.prototype.ul=function(t){return this.oc.ll(t.targetId,t.state,t.error)},wC.prototype.il=function(t,e){var n=this,r=e?this.Dc.nt(t,e):this.Dc.remove(t),i=this.Uc(this.Dc),o=this.Uc(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.oc._l(s,a).then(function(){n.Dc=r})},wC.prototype.qc=function(t){this.Dc.get(t.clientId)&&this.Vu(t.onlineState)},wC.prototype.Uc=function(t){var n=Sm;return t.forEach(function(t,e){n=n.Ct(e.activeTargetIds)}),n},wC),fC=(bC.prototype.Qc=function(t){},bC.prototype.Kc=function(t,e,n){},bC.prototype.zc=function(t){return this.fl.yc(t),this.dl[t]||"not-current"},bC.prototype.Zc=function(t,e,n){this.dl[t]=e},bC.prototype.Yc=function(t){this.fl.pc(t)},bC.prototype.Jc=function(t){return this.fl.activeTargetIds.has(t)},bC.prototype.Xc=function(t){delete this.dl[t]},bC.prototype.Bc=function(){return this.fl.activeTargetIds},bC.prototype.Wc=function(t){return this.fl.activeTargetIds.has(t)},bC.prototype.start=function(){return this.fl=new hC,Promise.resolve()},bC.prototype.Ah=function(t,e,n){},bC.prototype.el=function(t){},bC.prototype._r=function(){},bC.prototype.ds=function(t){},bC),pC=(Object.defineProperty(mC.prototype,"Al",{get:function(){return this.wl},enumerable:!1,configurable:!0}),mC.prototype.Rl=function(t,e){var a=this,u=e?e.Pl:new Om,c=e?e.ml:this.ml,h=e?e.Lt:this.Lt,l=c,f=!1,p=this.query.hn()&&c.size===this.query.limit?c.last():null,d=this.query.an()&&c.size===this.query.limit?c.first():null;if(t.ot(function(t,e){var n=c.get(t),r=(r=e instanceof Fw?e:null)&&(r_(a.query,r)?r:null),i=!!n&&a.Lt.has(n.key),o=!!r&&(r.Ke||a.Lt.has(r.key)&&r.hasCommittedMutations),s=!1;n&&r?n.data().isEqual(r.data())?i!==o&&(u.track({type:3,doc:r}),s=!0):a.gl(n,r)||(u.track({type:2,doc:r}),s=!0,(p&&0<a.Il(r,p)||d&&a.Il(r,d)<0)&&(f=!0)):!n&&r?(u.track({type:0,doc:r}),s=!0):n&&!r&&(u.track({type:1,doc:n}),s=!0,(p||d)&&(f=!0)),s&&(h=r?(l=l.add(r),o?h.add(t):h.delete(t)):(l=l.delete(t),h.delete(t)))}),this.query.hn()||this.query.an())for(;l.size>this.query.limit;){var n=this.query.hn()?l.last():l.first(),l=l.delete(n.key),h=h.delete(n.key);u.track({type:1,doc:n})}return{ml:l,Pl:u,Vl:f,Lt:h}},mC.prototype.gl=function(t,e){return t.Ke&&e.hasCommittedMutations&&!e.Ke},mC.prototype.qn=function(t,e,n){var o=this,r=this.ml;this.ml=t.ml,this.Lt=t.Lt;var i=t.Pl.Mt();i.sort(function(t,e){return r=t.type,i=e.type,n(r)-n(i)||o.Il(t.doc,e.doc);function n(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lg()}}var r,i}),this.yl(n);var s=e?this.pl():[],a=0===this.El.size&&this.Ht?1:0,u=a!==this.Tl;return this.Tl=a,0!==i.length||u?{snapshot:new Pm(this.query,t.ml,r,i,t.Lt,0==a,u,!1),bl:s}:{bl:s}},mC.prototype.vl=function(t){return this.Ht&&"Offline"===t?(this.Ht=!1,this.qn({ml:this.ml,Pl:new Om,Lt:this.Lt,Vl:!1},!1)):{bl:[]}},mC.prototype.Sl=function(t){return!this.wl.has(t)&&!!this.ml.has(t)&&!this.ml.get(t).Ke},mC.prototype.yl=function(t){var e=this;t&&(t.Yt.forEach(function(t){return e.wl=e.wl.add(t)}),t.Jt.forEach(function(t){}),t.Xt.forEach(function(t){return e.wl=e.wl.delete(t)}),this.Ht=t.Ht)},mC.prototype.pl=function(){var e=this;if(!this.Ht)return[];var n=this.El;this.El=Tm(),this.ml.forEach(function(t){e.Sl(t.key)&&(e.El=e.El.add(t.key))});var r=[];return n.forEach(function(t){e.El.has(t)||r.push(new rC(t))}),this.El.forEach(function(t){n.has(t)||r.push(new nC(t))}),r},mC.prototype.Dl=function(t){this.wl=t.Mh,this.El=Tm();var e=this.Rl(t.documents);return this.qn(e,!0)},mC.prototype.Cl=function(){return Pm.Ut(this.query,this.ml,this.Lt,0===this.Tl)},mC),dC=(gC.prototype.run=function(){this.Fl()},gC.prototype.Fl=function(){var t=this;this.Po.ys(function(){return Fs(t,void 0,void 0,function(){var e,n,r=this;return Us(this,function(t){return e=new jS(this.wu),(n=this.Nl(e))&&n.then(function(t){r.ao.Zi(function(){return e.commit().then(function(){r.lo.resolve(t)}).catch(function(t){r.kl(t)})})}).catch(function(t){r.kl(t)}),[2]})})})},gC.prototype.Nl=function(t){try{var e=this.updateFunction(t);return!Gg(e)&&e.catch&&e.then?e:(this.lo.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.lo.reject(t),null}},gC.prototype.kl=function(t){var e=this;0<this.$l&&this.xl(t)?(--this.$l,this.ao.Zi(function(){return e.Fl(),Promise.resolve()})):this.lo.reject(t)},gC.prototype.xl=function(t){if("FirebaseError"!==t.name)return!1;var e=t.code;return"aborted"===e||"failed-precondition"===e||!am(e)},gC),vC=(Object.defineProperty(yC.prototype,"Xl",{get:function(){return!0===this.Jl},enumerable:!1,configurable:!0}),yC.prototype.subscribe=function(t){this.Bl=t},yC.prototype.listen=function(s){return Fs(this,void 0,void 0,function(){var e,n,r,i,o;return Us(this,function(t){switch(t.label){case 0:return this.Zl("listen()"),(r=this.Ul.get(s))?(e=r.targetId,this.Ll.zc(e),n=r.view.Cl(),[3,4]):[3,1];case 1:return[4,this.Fu.Nh(Yw(s))];case 2:return i=t.sent(),o=this.Ll.zc(i.targetId),e=i.targetId,[4,this.t_(s,e,"current"===o)];case 3:n=t.sent(),this.Xl&&this.Ol.listen(i),t.label=4;case 4:return[2,n]}})})},yC.prototype.t_=function(a,u,c){return Fs(this,void 0,void 0,function(){var e,n,r,i,o,s;return Us(this,function(t){switch(t.label){case 0:return[4,this.Fu.xh(a,!0)];case 1:return e=t.sent(),n=new pC(a,e.Mh),r=n.Rl(e.documents),i=Dm.zt(u,c&&"Offline"!==this.onlineState),o=n.qn(r,this.Xl,i),this.e_(u,o.bl),s=new iC(a,u,n),[2,(this.Ul.set(a,s),this.Wl.has(u)?this.Wl.get(u).push(a):this.Wl.set(u,[a]),o.snapshot)]}})})},yC.prototype.ic=function(i){return Fs(this,void 0,void 0,function(){var e,n,r=this;return Us(this,function(t){switch(t.label){case 0:return this.Zl("unlisten()"),e=this.Ul.get(i),1<(n=this.Wl.get(e.targetId)).length?[2,(this.Wl.set(e.targetId,n.filter(function(t){return!t_(t,i)})),void this.Ul.delete(i))]:this.Xl?(this.Ll.Yc(e.targetId),this.Ll.Wc(e.targetId)?[3,2]:[4,this.Fu.kh(e.targetId,!1).then(function(){r.Ll.Xc(e.targetId),r.Ol.ic(e.targetId),r.n_(e.targetId)}).catch(JI)]):[3,3];case 1:t.sent(),t.label=2;case 2:return[3,5];case 3:return this.n_(e.targetId),[4,this.Fu.kh(e.targetId,!0)];case 4:t.sent(),t.label=5;case 5:return[2]}})})},yC.prototype.write=function(i,o){return Fs(this,void 0,void 0,function(){var e,n,r;return Us(this,function(t){switch(t.label){case 0:this.Zl("write()"),t.label=1;case 1:return t.trys.push([1,5,,6]),[4,this.Fu.Vh(i)];case 2:return e=t.sent(),this.Ll.Qc(e.batchId),this.s_(e.batchId,o),[4,this.i_(e.Cn)];case 3:return t.sent(),[4,this.Ol.tc()];case 4:return t.sent(),[3,6];case 5:return n=t.sent(),r=MI(n,"Failed to persist write"),o.reject(r),[3,6];case 6:return[2]}})})},yC.prototype.runTransaction=function(t,e,n){new dC(t,this.wu,e,n).run()},yC.prototype.vh=function(n){return Fs(this,void 0,void 0,function(){var e,r=this;return Us(this,function(t){switch(t.label){case 0:this.Zl("applyRemoteEvent()"),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.Fu.vh(n)];case 2:return e=t.sent(),n.Wt.forEach(function(t,e){var n=r.Kl.get(e);n&&(fg(t.Yt.size+t.Jt.size+t.Xt.size<=1),0<t.Yt.size?n.Ml=!0:0<t.Jt.size?fg(n.Ml):0<t.Xt.size&&(fg(n.Ml),n.Ml=!1))}),[4,this.i_(e,n)];case 3:return t.sent(),[3,6];case 4:return[4,JI(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},yC.prototype.vl=function(r,t){var i;(this.Xl&&0===t||!this.Xl&&1===t)&&(this.Zl("applyOnlineStateChange()"),i=[],this.Ul.forEach(function(t,e){var n=e.view.vl(r);n.snapshot&&i.push(n.snapshot)}),this.Bl.r_(r),this.Bl.nu(i),this.onlineState=r,this.Xl&&this.Ll.el(r))},yC.prototype.lc=function(a,u){return Fs(this,void 0,void 0,function(){var e,n,r,i,o,s=this;return Us(this,function(t){switch(t.label){case 0:return this.Zl("rejectListens()"),this.Ll.Zc(a,"rejected",u),e=this.Kl.get(a),(n=e&&e.key)?(r=(r=new cm(Fg.P)).nt(n,new Uw(n,Rg.min())),i=Tm().add(n),o=new Rm(Rg.min(),new Map,new ym(yg),r,i),[4,this.vh(o)]):[3,2];case 1:return t.sent(),this.jl=this.jl.remove(n),this.Kl.delete(a),this.o_(),[3,4];case 2:return[4,this.Fu.kh(a,!1).then(function(){return s.n_(a,u)}).catch(JI)];case 3:t.sent(),t.label=4;case 4:return[2]}})})},yC.prototype.Ec=function(r){return Fs(this,void 0,void 0,function(){var e,n;return Us(this,function(t){switch(t.label){case 0:this.Zl("applySuccessfulWrite()"),e=r.batch.batchId,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.Fu.yh(r)];case 2:return n=t.sent(),this.h_(e,null),this.a_(e),this.Ll.Kc(e,"acknowledged"),[4,this.i_(n)];case 3:return t.sent(),[3,6];case 4:return[4,JI(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},yC.prototype.mc=function(n,r){return Fs(this,void 0,void 0,function(){var e;return Us(this,function(t){switch(t.label){case 0:this.Zl("rejectFailedWrite()"),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.Fu.bh(n)];case 2:return e=t.sent(),this.h_(n,r),this.a_(n),this.Ll.Kc(n,"rejected",r),[4,this.i_(e)];case 3:return t.sent(),[3,6];case 4:return[4,JI(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},yC.prototype.u_=function(o){return Fs(this,void 0,void 0,function(){var e,n,r,i;return Us(this,function(t){switch(t.label){case 0:this.Ol.qu()||ug("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.Fu.Wr()];case 2:return-1===(e=t.sent())?[2,void o.resolve()]:((n=this.Hl.get(e)||[]).push(o),this.Hl.set(e,n),[3,4]);case 3:return r=t.sent(),i=MI(r,"Initialization of waitForPendingWrites() operation failed"),o.reject(i),[3,4];case 4:return[2]}})})},yC.prototype.a_=function(t){(this.Hl.get(t)||[]).forEach(function(t){t.resolve()}),this.Hl.delete(t)},yC.prototype.c_=function(e){this.Hl.forEach(function(t){t.forEach(function(t){t.reject(new Og(kg.CANCELLED,e))})}),this.Hl.clear()},yC.prototype.s_=function(t,e){var n=(n=(n=this.zl[this.currentUser.Aa()])||new cm(yg)).nt(t,e);this.zl[this.currentUser.Aa()]=n},yC.prototype.h_=function(t,e){var n,r=this.zl[this.currentUser.Aa()];r&&((n=r.get(t))&&(e?n.reject(e):n.resolve(),r=r.remove(t)),this.zl[this.currentUser.Aa()]=r)},yC.prototype.n_=function(t,e){var n=this;void 0===e&&(e=null),this.Ll.Yc(t);for(var r=0,i=this.Wl.get(t);r<i.length;r++){var o=i[r];this.Ul.delete(o),e&&this.Bl.l_(o,e)}this.Wl.delete(t),this.Xl&&this.Gl.jh(t).forEach(function(t){n.Gl.pi(t)||n.__(t)})},yC.prototype.__=function(t){var e=this.jl.get(t);null!==e&&(this.Ol.ic(e),this.jl=this.jl.remove(t),this.Kl.delete(e),this.o_())},yC.prototype.e_=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof nC?(this.Gl.Ri(i.key,t),this.f_(i)):i instanceof rC?(ug("SyncEngine","Document no longer in limbo: "+i.key),this.Gl.gi(i.key,t),this.Gl.pi(i.key)||this.__(i.key)):lg()}},yC.prototype.f_=function(t){var e=t.key;this.jl.get(e)||(ug("SyncEngine","New document in limbo: "+e),this.Ql.push(e),this.o_())},yC.prototype.o_=function(){for(;0<this.Ql.length&&this.jl.size<this.ql;){var t=this.Ql.shift(),e=this.Yl.next();this.Kl.set(e,new oC(t)),this.jl=this.jl.nt(t,e),this.Ol.listen(new om(Yw(zw(t.path)),e,2,F_.ws))}},yC.prototype.d_=function(){return this.jl},yC.prototype.w_=function(){return this.Ql},yC.prototype.i_=function(r,u){return Fs(this,void 0,void 0,function(){var o,s,e,a=this;return Us(this,function(t){switch(t.label){case 0:return o=[],s=[],e=[],this.Ul.forEach(function(t,i){e.push(Promise.resolve().then(function(){var n=i.view.Rl(r);return n.Vl?a.Fu.xh(i.query,!1).then(function(t){var e=t.documents;return i.view.Rl(e,n)}):n}).then(function(t){var e,n=u&&u.Wt.get(i.targetId),r=i.view.qn(t,a.Xl,n);a.e_(i.targetId,r.bl),r.snapshot&&(a.Xl&&a.Ll.Zc(i.targetId,r.snapshot.fromCache?"not-current":"current"),o.push(r.snapshot),e=M_.cs(i.targetId,r.snapshot),s.push(e))}))}),[4,Promise.all(e)];case 1:return t.sent(),this.Bl.nu(o),[4,this.Fu.Ch(s)];case 2:return t.sent(),[2]}})})},yC.prototype.Zl=function(t){},yC.prototype.Rc=function(n){return Fs(this,void 0,void 0,function(){var e;return Us(this,function(t){switch(t.label){case 0:return this.currentUser.isEqual(n)?[3,3]:(ug("SyncEngine","User change. New user:",n.Aa()),[4,this.Fu.Ah(n)]);case 1:return e=t.sent(),this.currentUser=n,this.c_("'waitForPendingWrites' promise is rejected due to a user change."),this.Ll.Ah(n,e.Ph,e.gh),[4,this.i_(e.Rh)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},yC.prototype.xe=function(t){var e=this.Kl.get(t);if(e&&e.Ml)return Tm().add(e.key);var n=Tm(),r=this.Wl.get(t);if(!r)return n;for(var i=0,o=r;i<o.length;i++)var s=o[i],a=this.Ul.get(s),n=n.Ct(a.view.Al);return n},yC);function yC(t,e,n,r,i,o){this.Fu=t,this.Ol=e,this.wu=n,this.Ll=r,this.currentUser=i,this.ql=o,this.Bl=null,this.Ul=new Ag(e_,t_),this.Wl=new Map,this.Ql=[],this.jl=new cm(Fg.P),this.Kl=new Map,this.Gl=new $I,this.zl={},this.Hl=new Map,this.Yl=TE.si(),this.onlineState="Unknown",this.Jl=void 0}function gC(t,e,n,r){this.ao=t,this.wu=e,this.updateFunction=n,this.lo=r,this.$l=5,this.Po=new z_(this.ao,"transaction_retry")}function mC(t,e){this.query=t,this.wl=e,this.Tl=null,this.Ht=!1,this.El=Tm(),this.Lt=Tm(),this.Il=i_(t),this.ml=new km(this.Il)}function bC(){this.fl=new hC,this.dl={},this.Vu=null,this.ls=null}function wC(t,e,n,r,i){this.window=t,this.Ts=e,this.persistenceKey=n,this.bc=r,this.oc=null,this.Vu=null,this.ls=null,this.vc=this.Sc.bind(this),this.Dc=new cm(yg),this.Hi=!1,this.Cc=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$c=ZS(this.persistenceKey,this.bc),this.Fc="firestore_sequence_number_"+this.persistenceKey,this.Dc=this.Dc.nt(this.bc,new hC),this.Nc=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.kc=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.xc=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Mc="firestore_online_state_"+this.persistenceKey,this.window.addEventListener("storage",this.vc)}function _C(){this.activeTargetIds=Sm}function EC(t,e){this.clientId=t,this.onlineState=e}function IC(t,e){this.clientId=t,this.activeTargetIds=e}function TC(t,e,n){this.targetId=t,this.state=e,this.error=n}function SC(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}function CC(t,e,n,r,i,o,s){var a=new vC(t,e,n,r,i,o);return s&&(a.Jl=!0),a}function NC(v,y){return Fs(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l,f,p,d;return Us(this,function(t){switch(t.label){case 0:e=v,n=[],r=[],i=0,o=y,t.label=1;case 1:return i<o.length?(s=o[i],a=void 0,(u=e.Wl.get(s))&&0!==u.length?[4,e.Fu.Nh(Yw(u[0]))]:[3,7]):[3,13];case 2:a=t.sent(),c=0,h=u,t.label=3;case 3:return c<h.length?(l=h[c],f=e.Ul.get(l),[4,function(i,o){return Fs(this,void 0,void 0,function(){var e,n,r;return Us(this,function(t){switch(t.label){case 0:return[4,(e=i).Fu.xh(o.query,!0)];case 1:return n=t.sent(),r=o.view.Dl(n),[2,(e.Xl&&e.e_(o.targetId,r.bl),r)]}})})}(e,f)]):[3,6];case 4:(p=t.sent()).snapshot&&r.push(p.snapshot),t.label=5;case 5:return c++,[3,3];case 6:return[3,11];case 7:return[4,YI(e.Fu,s)];case 8:return d=t.sent(),[4,e.Fu.Nh(d)];case 9:return a=t.sent(),[4,e.t_(AC(d),s,!1)];case 10:t.sent(),t.label=11;case 11:n.push(a),t.label=12;case 12:return i++,[3,1];case 13:return[2,(e.Bl.nu(r),n)]}})})}function AC(t){return Gw(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function kC(){this.T_=void 0,this.listeners=[]}var OC,PC=(VC.prototype.listen=function(a){return Fs(this,void 0,void 0,function(){var e,n,r,i,o,s;return Us(this,function(t){switch(t.label){case 0:if(e=a.query,n=!1,(r=this.E_.get(e))||(n=!0,r=new kC),!n)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),i=r,[4,this.oc.listen(e)];case 2:return i.T_=t.sent(),[3,4];case 3:return o=t.sent(),s=MI(o,"Initialization of query '"+n_(a.query)+"' failed"),[2,void a.onError(s)];case 4:return this.E_.set(e,r),r.listeners.push(a),a.vl(this.onlineState),r.T_&&a.m_(r.T_)&&this.A_(),[2]}})})},VC.prototype.ic=function(o){return Fs(this,void 0,void 0,function(){var e,n,r,i;return Us(this,function(t){return e=o.query,n=!1,(r=this.E_.get(e))&&0<=(i=r.listeners.indexOf(o))&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?[2,(this.E_.delete(e),this.oc.ic(e))]:[2]})})},VC.prototype.nu=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],o=i.query,s=this.E_.get(o);if(s){for(var a=0,u=s.listeners;a<u.length;a++)u[a].m_(i)&&(e=!0);s.T_=i}}e&&this.A_()},VC.prototype.l_=function(t,e){var n=this.E_.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(e);this.E_.delete(t)},VC.prototype.r_=function(i){this.onlineState=i;var o=!1;this.E_.forEach(function(t,e){for(var n=0,r=e.listeners;n<r.length;n++)r[n].vl(i)&&(o=!0)}),o&&this.A_()},VC.prototype.R_=function(t){this.I_.add(t),t.next()},VC.prototype.P_=function(t){this.I_.delete(t)},VC.prototype.A_=function(){this.I_.forEach(function(t){t.next()})},VC),RC=(jC.prototype.m_=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Pm(t.query,t.docs,t.Ot,e,t.Lt,t.fromCache,t.qt,!0)}var o=!1;return this.V_?this.p_(t)&&(this.g_.next(t),o=!0):this.b_(t,this.onlineState)&&(this.v_(t),o=!0),this.y_=t,o},jC.prototype.onError=function(t){this.g_.error(t)},jC.prototype.vl=function(t){this.onlineState=t;var e=!1;return this.y_&&!this.V_&&this.b_(this.y_,t)&&(this.v_(this.y_),e=!0),e},jC.prototype.b_=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.S_&&n||t.docs._()&&"Offline"!==e)},jC.prototype.p_=function(t){if(0<t.docChanges.length)return!0;var e=this.y_&&this.y_.hasPendingWrites!==t.hasPendingWrites;return!(!t.qt&&!e)&&!0===this.options.includeMetadataChanges},jC.prototype.v_=function(t){t=Pm.Ut(t.query,t.docs,t.Lt,t.fromCache),this.V_=!0,this.g_.next(t)},jC),DC=(UC.prototype.mh=function(t){this.D_=t},UC.prototype.ts=function(e,r,i,o){var s=this;return r.on()||i.isEqual(Rg.min())?this.C_(e,r):this.D_.Jn(e,o).next(function(t){var n=s.F_(r,t);return(r.hn()||r.an())&&s.Vl(r.en,n,o,i)?s.C_(e,r):(ag()<=ja.DEBUG&&ug("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),n_(r)),s.D_.ts(e,r,i).next(function(e){return n.forEach(function(t){e=e.nt(t.key,t)}),e}))})},UC.prototype.F_=function(n,t){var r=new ym(i_(n));return t.forEach(function(t,e){e instanceof Fw&&r_(n,e)&&(r=r.add(e))}),r},UC.prototype.Vl=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||0<i.version.o(r))},UC.prototype.C_=function(t,e){return ag()<=ja.DEBUG&&ug("IndexFreeQueryEngine","Using full collection scan to execute query:",n_(e)),this.D_.ts(t,e,Rg.min())},UC),xC=(FC.prototype.Or=function(t){return P_.resolve(0===this.jn.length)},FC.prototype.Lr=function(t,e,n,r){var i=this.N_;this.N_++,0<this.jn.length&&this.jn[this.jn.length-1];var o=new k_(i,e,n,r);this.jn.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.k_=this.k_.add(new ZI(u.key,i)),this.Kn.Cs(t,u.key.path.p())}return P_.resolve(o)},FC.prototype.qr=function(t,e){return P_.resolve(this.x_(e))},FC.prototype.Ur=function(t,e){var n=e+1,r=this.M_(n),i=r<0?0:r;return P_.resolve(this.jn.length>i?this.jn[i]:null)},FC.prototype.Wr=function(){return P_.resolve(0===this.jn.length?-1:this.N_-1)},FC.prototype.Qr=function(t){return P_.resolve(this.jn.slice())},FC.prototype.zn=function(t,e){var n=this,r=new ZI(e,0),i=new ZI(e,Number.POSITIVE_INFINITY),o=[];return this.k_.vt([r,i],function(t){var e=n.x_(t.zh);o.push(e)}),P_.resolve(o)},FC.prototype.Zn=function(t,e){var r=this,i=new ym(yg);return e.forEach(function(t){var e=new ZI(t,0),n=new ZI(t,Number.POSITIVE_INFINITY);r.k_.vt([e,n],function(t){i=i.add(t.zh)})}),P_.resolve(this.O_(i))},FC.prototype.os=function(t,e){var n=e.path,r=n.length+1,i=n;Fg.W(i)||(i=i.child(""));var o=new ZI(new Fg(i),0),s=new ym(yg);return this.k_.St(function(t){var e=t.key.path;return!!n.D(e)&&(e.length===r&&(s=s.add(t.zh)),!0)},o),P_.resolve(this.O_(s))},FC.prototype.O_=function(t){var n=this,r=[];return t.forEach(function(t){var e=n.x_(t);null!==e&&r.push(e)}),r},FC.prototype.Kr=function(n,r){var i=this;fg(0===this.L_(r.batchId,"removed")),this.jn.shift();var o=this.k_;return P_.forEach(r.mutations,function(t){var e=new ZI(t.key,r.batchId);return o=o.delete(e),i.ii.Dr(n,t.key)}).next(function(){i.k_=o})},FC.prototype.Gr=function(t){},FC.prototype.pi=function(t,e){var n=new ZI(e,0),r=this.k_.Dt(n);return P_.resolve(e.isEqual(r&&r.key))},FC.prototype.zr=function(t){return this.jn.length,P_.resolve()},FC.prototype.L_=function(t,e){return this.M_(t)},FC.prototype.M_=function(t){return 0===this.jn.length?0:t-this.jn[0].batchId},FC.prototype.x_=function(t){var e=this.M_(t);return e<0||e>=this.jn.length?null:this.jn[e]},FC),LC=(MC.prototype.Nn=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.q_(e);return this.docs=this.docs.nt(r,{Ls:e,size:s,readTime:n}),this.size+=s-o,this.Kn.Cs(t,r.path.p())},MC.prototype.xn=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},MC.prototype.Mn=function(t,e){var n=this.docs.get(e);return P_.resolve(n?n.Ls:null)},MC.prototype.getEntries=function(t,e){var n=this,r=mm;return e.forEach(function(t){var e=n.docs.get(t);r=r.nt(t,e?e.Ls:null)}),P_.resolve(r)},MC.prototype.ts=function(t,e,n){for(var r=_m,i=new Fg(e.path.child("")),o=this.docs.ut(i);o.wt();){var s=o.dt(),a=s.key,u=s.value,c=u.Ls,h=u.readTime;if(!e.path.D(a.path))break;h.o(n)<=0||c instanceof Fw&&r_(e,c)&&(r=r.nt(c.key,c))}return P_.resolve(r)},MC.prototype.B_=function(t,e){return P_.forEach(this.docs,function(t){return e(t)})},MC.prototype.Hs=function(t){return new MC.Ys(this)},MC.prototype.Xs=function(t){return P_.resolve(this.size)},MC);function MC(t,e){this.Kn=t,this.q_=e,this.docs=new cm(Fg.P),this.size=0}function FC(t,e){this.Kn=t,this.ii=e,this.jn=[],this.N_=1,this.k_=new ym(ZI.Lh)}function UC(){}function jC(t,e,n){this.query=t,this.g_=e,this.V_=!1,this.y_=null,this.onlineState="Unknown",this.options=n||{}}function VC(t){this.oc=t,this.E_=new Ag(e_,t_),this.onlineState="Unknown",this.I_=new Set,this.oc.subscribe(this)}function qC(t){var e=this;return(e=OC.call(this)||this).Zs=t,e}LC.Ys=(Ls(qC,OC=R_),qC.prototype.qn=function(n){var r=this,i=[];return this.Cn.forEach(function(t,e){e?i.push(r.Zs.Nn(n,e,r.readTime)):r.Zs.xn(t)}),P_.Sn(i)},qC.prototype.On=function(t,e){return this.Zs.Mn(t,e)},qC.prototype.Ln=function(t,e){return this.Zs.getEntries(t,e)},qC);var BC,WC,HC,KC=(gN.prototype.pe=function(t,n){return this.U_.forEach(function(t,e){return n(e)}),P_.resolve()},gN.prototype.ai=function(t){return P_.resolve(this.lastRemoteSnapshotVersion)},gN.prototype.ui=function(t){return P_.resolve(this.W_)},gN.prototype.ri=function(t){return this.highestTargetId=this.j_.next(),P_.resolve(this.highestTargetId)},gN.prototype.ci=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.W_&&(this.W_=e),P_.resolve()},gN.prototype._i=function(t){this.U_.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.j_=new TE(e),this.highestTargetId=e),t.sequenceNumber>this.W_&&(this.W_=t.sequenceNumber)},gN.prototype.li=function(t,e){return this._i(e),this.targetCount+=1,P_.resolve()},gN.prototype.di=function(t,e){return this._i(e),P_.resolve()},gN.prototype.wi=function(t,e){return this.U_.delete(e.target),this.Q_.jh(e.targetId),--this.targetCount,P_.resolve()},gN.prototype.Ei=function(n,r,i){var o=this,s=0,a=[];return this.U_.forEach(function(t,e){e.sequenceNumber<=r&&null===i.get(e.targetId)&&(o.U_.delete(t),a.push(o.Ti(n,e.targetId)),s++)}),P_.Sn(a).next(function(){return s})},gN.prototype.Ii=function(t){return P_.resolve(this.targetCount)},gN.prototype.mi=function(t,e){var n=this.U_.get(e)||null;return P_.resolve(n)},gN.prototype.Ai=function(t,e,n){return this.Q_.Uh(e,n),P_.resolve()},gN.prototype.Pi=function(e,t,n){this.Q_.Qh(t,n);var r=this.persistence.ii,i=[];return r&&t.forEach(function(t){i.push(r.Dr(e,t))}),P_.Sn(i)},gN.prototype.Ti=function(t,e){return this.Q_.jh(e),P_.resolve()},gN.prototype.Vi=function(t,e){var n=this.Q_.Gh(e);return P_.resolve(n)},gN.prototype.pi=function(t,e){return P_.resolve(this.Q_.pi(e))},gN),GC=(yN.prototype.start=function(){return Promise.resolve()},yN.prototype._r=function(){return this.$i=!1,Promise.resolve()},Object.defineProperty(yN.prototype,"Hi",{get:function(){return this.$i},enumerable:!1,configurable:!0}),yN.prototype.Yi=function(){},yN.prototype.Xi=function(){},yN.prototype.gr=function(){return this.Kn},yN.prototype.mr=function(t){var e=this.K_[t.Aa()];return e||(e=new xC(this.Kn,this.ii),this.K_[t.Aa()]=e),e},yN.prototype.Rr=function(){return this.qi},yN.prototype.Pr=function(){return this.Qn},yN.prototype.runTransaction=function(t,e,n){var r=this;ug("MemoryPersistence","Starting transaction:",t);var i=new zC(this.Ci.next());return this.ii.z_(),n(i).next(function(t){return r.ii.H_(i).next(function(){return t})}).bn().then(function(t){return i.Wn(),t})},yN.prototype.Y_=function(e,n){return P_.Dn(Object.values(this.K_).map(function(t){return function(){return t.pi(e,n)}}))},yN),zC=(Ls(vN,HC=x_),vN),QC=(dN.Z_=function(t){return new dN(t)},Object.defineProperty(dN.prototype,"tf",{get:function(){if(this.X_)return this.X_;throw lg()},enumerable:!1,configurable:!0}),dN.prototype.Ri=function(t,e,n){return this.J_.Ri(n,e),this.tf.delete(n),P_.resolve()},dN.prototype.gi=function(t,e,n){return this.J_.gi(n,e),this.tf.add(n),P_.resolve()},dN.prototype.Dr=function(t,e){return this.tf.add(e),P_.resolve()},dN.prototype.removeTarget=function(t,e){var n=this;this.J_.jh(e.targetId).forEach(function(t){return n.tf.add(t)});var r=this.persistence.Rr();return r.Vi(t,e.targetId).next(function(t){t.forEach(function(t){return n.tf.add(t)})}).next(function(){return r.wi(t,e)})},dN.prototype.z_=function(){this.X_=new Set},dN.prototype.H_=function(t){var n=this,r=this.persistence.Pr().Hs();return P_.forEach(this.tf,function(e){return n.ef(t,e).next(function(t){t||r.xn(e)})}).next(function(){return n.X_=null,r.apply(t)})},dN.prototype.Nr=function(t,e){var n=this;return this.ef(t,e).next(function(t){t?n.tf.delete(e):n.tf.add(e)})},dN.prototype.G_=function(t){return 0},dN.prototype.ef=function(t,e){var n=this;return P_.Dn([function(){return P_.resolve(n.J_.pi(e))},function(){return n.persistence.Rr().pi(t,e)},function(){return n.persistence.Y_(t,e)}])},dN),XC=(pN.prototype.tu=function(t){this.if=t},pN.prototype.Ha=function(t){this.rf=t},pN.prototype.onMessage=function(t){this.hf=t},pN.prototype.close=function(){this.sf()},pN.prototype.send=function(t){this.nf(t)},pN.prototype.af=function(){this.if()},pN.prototype.uf=function(t){this.rf(t)},pN.prototype.cf=function(t){this.hf(t)},pN),YC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},JC=(fN.prototype._f=function(t,e){if(e)for(var n in e.ga)e.ga.hasOwnProperty(n)&&(t[n]=e.ga[n]);t["X-Goog-Api-Client"]="gl-js/ fire/7.17.1-20206244562"},fN.prototype.fu=function(u,r,i){var c=this,h=this.ff(u);return new Promise(function(o,s){var a=new ig;a.listenOnce(ng.COMPLETE,function(){try{switch(a.getLastErrorCode()){case eg.NO_ERROR:var t=a.getResponseJson();ug("Connection","XHR received:",JSON.stringify(t)),o(t);break;case eg.TIMEOUT:ug("Connection",'RPC "'+u+'" timed out'),s(new Og(kg.DEADLINE_EXCEEDED,"Request time out"));break;case eg.HTTP_ERROR:var e,n,r=a.getStatus();ug("Connection",'RPC "'+u+'" failed with status:',r,"response text:",a.getResponseText()),0<r?(e=a.getResponseJson().error)&&e.status&&e.message?(i=e.status.toLowerCase().replace("_","-"),n=0<=Object.values(kg).indexOf(i)?i:kg.UNKNOWN,s(new Og(n,e.message))):s(new Og(kg.UNKNOWN,"Server responded with status "+a.getStatus())):(ug("Connection",'RPC "'+u+'" failed'),s(new Og(kg.UNAVAILABLE,"Connection failed.")));break;default:lg()}}finally{ug("Connection",'RPC "'+u+'" completed.')}var i});var t=Object.assign({},r);delete t.database;var e=JSON.stringify(t);ug("Connection","XHR sending: ",h+" "+e);var n={"Content-Type":"text/plain"};c._f(n,i),a.send(h,"POST",e,n,15)})},fN.prototype.du=function(t,e,n){return this.fu(t,e,n)},fN.prototype.eu=function(t,e){var n,r,i=[this.lf,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=tg(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.s.projectId+"/databases/"+this.s.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this._f(s.initMessageHeaders,e),ta()||ea()||0<=Zs().indexOf("Electron/")||0<=(r=Zs()).indexOf("MSIE ")||0<=r.indexOf("Trident/")||0<=Zs().indexOf("MSAppHost/")||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(s.httpHeadersOverwriteParam="$httpHeaders");var a=i.join("");function u(t,e){c.listen(t,function(t){try{e(t)}catch(t){setTimeout(function(){throw t},0)}})}ug("Connection","Creating WebChannel: "+a+" "+s);var c=o.createWebChannel(a,s),h=!1,l=!1,f=new XC({nf:function(t){l?ug("Connection","Not sending because WebChannel is closed:",t):(h||(ug("Connection","Opening WebChannel transport."),c.open(),h=!0),ug("Connection","WebChannel sending:",t),c.send(t))},sf:function(){return c.close()}});return u(rg.EventType.OPEN,function(){l||ug("Connection","WebChannel transport opened.")}),u(rg.EventType.CLOSE,function(){l||(l=!0,ug("Connection","WebChannel transport closed"),f.uf())}),u(rg.EventType.ERROR,function(t){l||(l=!0,function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];sg.logLevel<=ja.WARN&&(e=n.map(hg),sg.warn.apply(sg,Bs(["Firestore ("+og+"): Connection"],e)))}("Connection","WebChannel transport errored:",t),f.uf(new Og(kg.UNAVAILABLE,"The operation could not be completed")))}),u(rg.EventType.MESSAGE,function(t){var e,n,r,i,o,s;l||(fg(!!(n=t.data[0])),(r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error))?(ug("Connection","WebChannel received error:",r),i=r.status,o=function(){var t=rm[i];if(void 0!==t)return um(t)}(),s=r.message,void 0===o&&(o=kg.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),l=!0,f.uf(new Og(o,s)),c.close()):(ug("Connection","WebChannel received:",n),f.cf(n)))}),setTimeout(function(){f.af()},0),f},fN.prototype.ff=function(t){var e=YC[t];return this.lf+"/v1/projects/"+this.s.projectId+"/databases/"+this.s.database+"/documents:"+e},fN),$C=(lN.prototype.Lu=function(t){this.If.push(t)},lN.prototype._r=function(){window.removeEventListener("online",this.df),window.removeEventListener("offline",this.Tf)},lN.prototype.mf=function(){window.addEventListener("online",this.df),window.addEventListener("offline",this.Tf)},lN.prototype.wf=function(){ug("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.If;t<e.length;t++)(0,e[t])(0)},lN.prototype.Ef=function(){ug("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.If;t<e.length;t++)(0,e[t])(1)},lN.Oi=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},lN),ZC=(hN.prototype.Lu=function(t){},hN.prototype._r=function(){},hN),tN="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",eN=(cN.prototype.initialize=function(r){return Fs(this,void 0,void 0,function(){var e,n=this;return Us(this,function(t){switch(t.label){case 0:return this.Ll=this.Af(r),this.persistence=this.Rf(r),[4,this.persistence.start()];case 1:return t.sent(),this.Pf=this.gf(r),this.Fu=this.Vf(r),this.wu=this.yf(r),[4,this.pf(r)];case 2:return e=t.sent(),this.wu.start(e),this.Ol=this.bf(r),this.oc=this.vf(r),this.Sf=this.Df(r),this.Ll.Vu=function(t){return n.oc.vl(t,1)},this.Ol.oc=this.oc,[4,this.Ll.start()];case 3:return t.sent(),[4,this.Ol.start()];case 4:return t.sent(),[4,this.Ol.Pc(this.oc.Xl)];case 5:return t.sent(),[2]}})})},cN.prototype.pf=function(t){return e=t.Cf,Promise.resolve(new JC(e));var e},cN.prototype.Df=function(t){return new PC(this.oc)},cN.prototype.gf=function(t){return null},cN.prototype.Vf=function(t){return XI(this.persistence,new DC,t.$f)},cN.prototype.Rf=function(t){if(t.Nf.Ff)throw new Og(kg.FAILED_PRECONDITION,tN);return new GC(QC.Z_)},cN.prototype.yf=function(t){var e=eS(t.Cf.s),n=t.credentials;return new US(n,e)},cN.prototype.bf=function(t){var e=this;return new qS(this.Fu,this.wu,t.ao,function(t){return e.oc.vl(t,0)},new($C.Oi()?$C:ZC))},cN.prototype.Af=function(t){return new fC},cN.prototype.vf=function(t){return CC(this.Fu,this.Ol,this.wu,this.Ll,t.$f,t.ql,!0)},cN.prototype.clearPersistence=function(t,e){throw new Og(kg.FAILED_PRECONDITION,tN)},cN),nN=(Ls(uN,WC=eN),uN.prototype.Vf=function(t){return XI(this.persistence,new DC,t.$f)},uN.prototype.gf=function(t){var e=this.persistence.ii.yr;return new WI(e,t.ao)},uN.prototype.Rf=function(t){var e=BE(t.Cf.s,t.Cf.persistenceKey),n=eS(t.Cf.s);return new xE(t.Nf.synchronizeTabs,e,t.clientId,VI.Ho(t.Nf.cacheSizeBytes),t.ao,PI(),"undefined"!=typeof document?document:null,n,this.Ll,t.Nf.Di)},uN.prototype.Af=function(t){return new fC},uN.prototype.clearPersistence=function(t,e){return function(n){return Fs(this,void 0,void 0,function(){var e;return Us(this,function(t){switch(t.label){case 0:return gI.Oi()?(e=n+"main",[4,gI.delete(e)]):[2,Promise.resolve()];case 1:return t.sent(),[2]}})})}(BE(t,e))},Ls(aN,BC=uN),aN.prototype.initialize=function(e){return Fs(this,void 0,void 0,function(){var n=this;return Us(this,function(t){switch(t.label){case 0:return[4,BC.prototype.initialize.call(this,e)];case 1:return t.sent(),[4,this.persistence.zi(function(e){return Fs(n,void 0,void 0,function(){return Us(this,function(t){switch(t.label){case 0:return[4,function(h,l){return Fs(this,void 0,void 0,function(){var r,e,i,o,s,a,u,c;return Us(this,function(t){switch(t.label){case 0:return r=h,!0!==l||!0===r.Jl?[3,3]:(e=r.Ll.Bc(),[4,NC(r,e.$())]);case 1:return i=t.sent(),r.Jl=!0,[4,r.Ol.Pc(!0)];case 2:for(t.sent(),o=0,s=i;o<s.length;o++)a=s[o],r.Ol.listen(a);return[3,7];case 3:return!1!==l||!1===r.Jl?[3,7]:(u=[],c=Promise.resolve(),r.Wl.forEach(function(t,e){r.Ll.Jc(e)?u.push(e):c=c.then(function(){return r.n_(e),r.Fu.kh(e,!0)}),r.Ol.ic(e)}),[4,c]);case 4:return t.sent(),[4,NC(r,u)];case 5:return t.sent(),(n=r).Kl.forEach(function(t,e){n.Ol.ic(e)}),n.Gl.Kh(),n.Kl=new Map,n.jl=new cm(Fg.P),r.Jl=!1,[4,r.Ol.Pc(!1)];case 6:t.sent(),t.label=7;case 7:return[2]}var n})})}(this.oc,e)];case 1:return t.sent(),this.Pf&&(e&&!this.Pf.Hi?this.Pf.start(this.Fu):e||this.Pf.stop()),[2]}})})})];case 2:return t.sent(),[4,function(r){return Fs(this,void 0,void 0,function(){var e,n;return Us(this,function(t){return n=(e=r).Eh,[2,e.persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return n.zs(t)}).then(function(t){e.Th=t})]})})}(this.Fu)];case 3:return t.sent(),[2]}})})},aN.prototype.vf=function(t){var e=!t.Nf.Ff||!t.Nf.synchronizeTabs,n=CC(this.Fu,this.Ol,this.wu,this.Ll,t.$f,t.ql,e);return this.Ll instanceof lC&&(this.Ll.oc={cl:function(a,u,c,h){return Fs(this,void 0,void 0,function(){var o,s;return Us(this,function(t){switch(t.label){case 0:return(o=a).Zl("applyBatchState()"),[4,(e=o.Fu,n=u,i=(r=e).jn,r.persistence.runTransaction("Lookup mutation documents","readonly",function(e){return i.Br(e,n).next(function(t){return t?r.Ih.Jn(e,t):P_.resolve(null)})}))];case 1:return null===(s=t.sent())?[3,6]:"pending"!==c?[3,3]:[4,o.Ol.tc()];case 2:return t.sent(),[3,4];case 3:"acknowledged"===c||"rejected"===c?(o.h_(u,h||null),o.Fu.jn.Gr(u)):lg(),t.label=4;case 4:return[4,o.i_(s)];case 5:return t.sent(),[3,7];case 6:ug("SyncEngine","Cannot apply mutation batch with id: "+u),t.label=7;case 7:return[2]}var e,n,r,i})})}.bind(null,n),ll:function(s,a,u,c){return Fs(this,void 0,void 0,function(){var n,i,o;return Us(this,function(t){switch(t.label){case 0:return(n=s).Jl?(ug("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!n.Wl.has(a))return[3,8];switch(u){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,(r=n.Fu,e=r.Eh,r.persistence.runTransaction("Get new document changes","readonly",function(t){return e.Ks(t,r.Th)}).then(function(t){var e=t.Gs,n=t.readTime;return r.Th=n,e}))];case 3:return i=t.sent(),o=Rm.Gt(a,"current"===u),[4,n.i_(i,o)];case 4:return t.sent(),[3,8];case 5:return[4,n.Fu.kh(a,!0)];case 6:return t.sent(),n.n_(a,c),[3,8];case 7:lg(),t.label=8;case 8:return[2]}var r,e})})}.bind(null,n),_l:function(l,f,p){return Fs(this,void 0,void 0,function(){var n,e,r,i,o,s,a,u,c,h;return Us(this,function(t){switch(t.label){case 0:if(!(n=l).Jl)return[3,10];e=0,r=f,t.label=1;case 1:return e<r.length?(i=r[e],n.Wl.has(i)?(ug("SyncEngine","Adding an already active target "+i),[3,5]):[4,YI(n.Fu,i)]):[3,6];case 2:return o=t.sent(),[4,n.Fu.Nh(o)];case 3:return s=t.sent(),[4,n.t_(AC(o),s.targetId,!1)];case 4:t.sent(),n.Ol.listen(s),t.label=5;case 5:return e++,[3,1];case 6:a=function(e){return Us(this,function(t){switch(t.label){case 0:return n.Wl.has(e)?[4,n.Fu.kh(e,!1).then(function(){n.Ol.ic(e),n.n_(e)}).catch(JI)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})},u=0,c=p,t.label=7;case 7:return u<c.length?(h=c[u],[5,a(h)]):[3,10];case 8:t.sent(),t.label=9;case 9:return u++,[3,7];case 10:return[2]}})})}.bind(null,n),Ir:function(t){return t.Fu.persistence.Ir()}.bind(null,n)}),n},aN.prototype.Af=function(t){if(t.Nf.Ff&&t.Nf.synchronizeTabs){var e=PI();if(!lC.Oi(e))throw new Og(kg.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=BE(t.Cf.s,t.Cf.persistenceKey);return new lC(e,t.ao,n,t.clientId,t.$f)}return new fC},aN),rN=(sN.prototype.start=function(t,e,n){var r=this;this.kf(),this.Cf=t;var i=new G_,o=new G_,s=!1;return this.credentials.pa(function(t){if(!s)return s=!0,ug("FirestoreClient","Initializing. user=",t.uid),r.xf(e,n,t,o).then(i.resolve,i.reject);r.ao.er(function(){return r.Ol.Rc(t)})}),this.ao.Zi(function(){return i.promise}),o.promise},sN.prototype.enableNetwork=function(){var t=this;return this.kf(),this.ao.enqueue(function(){return t.persistence.Xi(!0),t.Ol.enableNetwork()})},sN.prototype.xf=function(r,i,o,s){return Fs(this,void 0,void 0,function(){var e,n=this;return Us(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,r.initialize({ao:this.ao,Cf:this.Cf,clientId:this.clientId,credentials:this.credentials,$f:o,ql:100,Nf:i})];case 1:return t.sent(),this.persistence=r.persistence,this.Ll=r.Ll,this.Fu=r.Fu,this.Ol=r.Ol,this.oc=r.oc,this.Pf=r.Pf,this.Mf=r.Sf,this.persistence.Yi(function(){return Fs(n,void 0,void 0,function(){return Us(this,function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}})})}),s.resolve(),[3,3];case 2:if(e=t.sent(),s.reject(e),!this.Of(e))throw e;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),this.xf(new eN,{Ff:!1},o,s))];case 3:return[2]}})})},sN.prototype.Of=function(t){return"FirebaseError"===t.name?t.code===kg.FAILED_PRECONDITION||t.code===kg.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},sN.prototype.kf=function(){if(this.ao.yo)throw new Og(kg.FAILED_PRECONDITION,"The client has already been terminated.")},sN.prototype.disableNetwork=function(){var t=this;return this.kf(),this.ao.enqueue(function(){return t.persistence.Xi(!1),t.Ol.disableNetwork()})},sN.prototype.terminate=function(){var t=this;return this.ao.Do(function(){return Fs(t,void 0,void 0,function(){return Us(this,function(t){switch(t.label){case 0:return this.Pf&&this.Pf.stop(),[4,this.Ol._r()];case 1:return t.sent(),[4,this.Ll._r()];case 2:return t.sent(),[4,this.persistence._r()];case 3:return t.sent(),this.credentials.ba(),[2]}})})})},sN.prototype.waitForPendingWrites=function(){var t=this;this.kf();var e=new G_;return this.ao.Zi(function(){return t.oc.u_(e)}),e.promise},sN.prototype.listen=function(t,e,n){var r=this;this.kf();var i=new RC(t,e,n);return this.ao.Zi(function(){return r.Mf.listen(i)}),i},sN.prototype.ic=function(t){var e=this;this.Lf||this.ao.Zi(function(){return e.Mf.ic(t)})},sN.prototype.qf=function(o){return Fs(this,void 0,void 0,function(){var i,e=this;return Us(this,function(t){switch(t.label){case 0:return this.kf(),i=new G_,[4,this.ao.enqueue(function(){return Fs(e,void 0,void 0,function(){var e,n,r;return Us(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.Fu.Fh(o)];case 1:return(e=t.sent())instanceof Fw?i.resolve(e):e instanceof Uw?i.resolve(null):i.reject(new Og(kg.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return n=t.sent(),r=MI(n,"Failed to get document '"+o+" from cache"),i.reject(r),[3,3];case 3:return[2]}})})})];case 1:return[2,(t.sent(),i.promise)]}})})},sN.prototype.Bf=function(u){return Fs(this,void 0,void 0,function(){var a,e=this;return Us(this,function(t){switch(t.label){case 0:return this.kf(),a=new G_,[4,this.ao.enqueue(function(){return Fs(e,void 0,void 0,function(){var e,n,r,i,o,s;return Us(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.Fu.xh(u,!0)];case 1:return e=t.sent(),n=new pC(u,e.Mh),r=n.Rl(e.documents),i=n.qn(r,!1),a.resolve(i.snapshot),[3,3];case 2:return o=t.sent(),s=MI(o,"Failed to execute query '"+u+" against cache"),a.reject(s),[3,3];case 3:return[2]}})})})];case 1:return[2,(t.sent(),a.promise)]}})})},sN.prototype.write=function(t){var e=this;this.kf();var n=new G_;return this.ao.Zi(function(){return e.oc.write(t,n)}),n.promise},sN.prototype.s=function(){return this.Cf.s},sN.prototype.R_=function(t){var e=this;this.kf(),this.ao.Zi(function(){return e.Mf.R_(t),Promise.resolve()})},sN.prototype.P_=function(t){var e=this;this.Lf||this.ao.Zi(function(){return e.Mf.P_(t),Promise.resolve()})},Object.defineProperty(sN.prototype,"Lf",{get:function(){return this.ao.yo},enumerable:!1,configurable:!0}),sN.prototype.transaction=function(t){var e=this;this.kf();var n=new G_;return this.ao.Zi(function(){return e.oc.runTransaction(e.ao,t,n),Promise.resolve()}),n.promise},sN),iN=(oN.prototype.next=function(t){this.Uf(this.observer.next,t)},oN.prototype.error=function(t){this.Uf(this.observer.error,t)},oN.prototype.Wf=function(){this.muted=!0},oN.prototype.Uf=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},oN);function oN(t){this.observer=t,this.muted=!1}function sN(t,e){this.credentials=t,this.ao=e,this.clientId=dg.t()}function aN(){return null!==BC&&BC.apply(this,arguments)||this}function uN(){return null!==WC&&WC.apply(this,arguments)||this}function cN(){}function hN(){}function lN(){var t=this;this.df=function(){return t.wf()},this.Tf=function(){return t.Ef()},this.If=[],this.mf()}function fN(t){this.s=t.s;var e=t.ssl?"https":"http";this.lf=e+"://"+t.host,this.forceLongPolling=t.forceLongPolling}function pN(t){this.nf=t.nf,this.sf=t.sf}function dN(t){this.persistence=t,this.J_=new $I,this.X_=null}function vN(t){var e=this;return(e=HC.call(this)||this).vi=t,e}function yN(t){var e=this;this.K_={},this.Ci=new F_(0),this.$i=!1,this.$i=!0,this.ii=t(this),this.qi=new KC(this),this.Kn=new Z_,this.Qn=new LC(this.Kn,function(t){return e.ii.G_(t)})}function gN(t){this.persistence=t,this.U_=new Ag(Jg,$g),this.lastRemoteSnapshotVersion=Rg.min(),this.highestTargetId=0,this.W_=0,this.Q_=new $I,this.targetCount=0,this.j_=TE.ni()}function mN(i){return function(){if("object"==typeof i&&null!==i)for(var t=i,e=0,n=["next","error","complete"];e<n.length;e++){var r=n[e];if(r in t&&"function"==typeof t[r])return 1}}()}var bN=(SN.prototype.Kf=function(t){switch(Qm(t)){case 0:return null;case 1:return t.booleanValue;case 2:return eb(t.integerValue||t.doubleValue);case 3:return this.Gf(t.timestampValue);case 4:return this.zf(t);case 5:return t.stringValue;case 6:return new ST(nb(t.bytesValue));case 7:return this.Hf(t.referenceValue);case 8:return this.Yf(t.geoPointValue);case 9:return this.Jf(t.arrayValue);case 10:return this.Xf(t.mapValue);default:throw lg()}},SN.prototype.Xf=function(t){var n=this,r={};return Ig(t.fields||{},function(t,e){r[t]=n.Kf(e)}),r},SN.prototype.Yf=function(t){return new zT(eb(t.latitude),eb(t.longitude))},SN.prototype.Jf=function(t){var e=this;return(t.values||[]).map(function(t){return e.Kf(t)})},SN.prototype.zf=function(t){switch(this.Qf){case"previous":var e=function t(e){var n=e.mapValue.fields.__previous_value__;return Km(n)?t(n):n}(t);return null==e?null:this.Kf(e);case"estimate":return this.Gf(Gm(t));default:return null}},SN.prototype.Gf=function(t){var e=tb(t),n=new Pg(e.seconds,e.nanos);return this.timestampsInSnapshots?n:n.toDate()},SN.prototype.Hf=function(t){var e=xg.N(t);fg(Lb(e));var n=new wg(e.get(1),e.get(3)),r=new Fg(e.V(5));return n.isEqual(this.s)||cg("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this.s.projectId+"/"+this.s.database+") instead."),this.jf(r)},SN),wN=VI.Xo,_N=(TN.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},TN),EN=(Object.defineProperty(IN.prototype,"ud",{get:function(){return this.ld||(this.ld=new hS(this.aa,this.ad.ignoreUndefinedProperties)),this.ld},enumerable:!1,configurable:!0}),IN.prototype.settings=function(t){rT("Firestore.settings",arguments,1),sT("Firestore.settings","object",1,t);var e=new _N(t);if(this.nd&&!this.ad.isEqual(e))throw new Og(kg.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");void 0!==(this.ad=e).credentials&&(this.od=function(t){if(!t)return new PS;switch(t.type){case"gapi":var e=t._d;return fg(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new xS(e,t.Fa||"0");case"provider":return t._d;default:throw new Og(kg.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},IN.prototype.enableNetwork=function(){return this.ed(),this.nd.enableNetwork()},IN.prototype.disableNetwork=function(){return this.ed(),this.nd.disableNetwork()},IN.prototype.enablePersistence=function(t){var e,n;if(this.nd)throw new Og(kg.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var r=!1,i=!1;if(t&&(void 0!==t.experimentalTabSynchronization&&cg("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),r=null!==(n=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==n&&n,i=!!t.experimentalForceOwningTab&&t.experimentalForceOwningTab,r&&i))throw new Og(kg.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.fd(this.hd,{Ff:!0,cacheSizeBytes:this.ad.cacheSizeBytes,synchronizeTabs:r,Di:i})},IN.prototype.clearPersistence=function(){return Fs(this,void 0,void 0,function(){var n,e=this;return Us(this,function(t){if(void 0!==this.nd&&!this.nd.Lf)throw new Og(kg.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");return n=new G_,[2,(this.td.po(function(){return Fs(e,void 0,void 0,function(){var e;return Us(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.hd.clearPersistence(this.aa,this.rd)];case 1:return t.sent(),n.resolve(),[3,3];case 2:return e=t.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise)]})})},IN.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(IN.prototype,"dd",{get:function(){return this.ed(),this.nd.Lf},enumerable:!1,configurable:!0}),IN.prototype.waitForPendingWrites=function(){return this.ed(),this.nd.waitForPendingWrites()},IN.prototype.onSnapshotsInSync=function(t){if(this.ed(),mN(t))return CN(this.nd,t);sT("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return CN(this.nd,e)},IN.prototype.ed=function(){return this.nd||this.fd(new eN,{Ff:!1}),this.nd},IN.prototype.wd=function(){return new bg(this.aa,this.rd,this.ad.host,this.ad.ssl,this.ad.forceLongPolling)},IN.prototype.fd=function(t,e){var n=this.wd();return this.nd=new rN(this.od,this.td),this.nd.start(n,t,e)},IN.sd=function(t){if(e=t.options,!Object.prototype.hasOwnProperty.call(e,"projectId"))throw new Og(kg.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e,n=t.options.projectId;if(!n||"string"!=typeof n)throw new Og(kg.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new wg(n)},Object.defineProperty(IN.prototype,"app",{get:function(){if(!this.Zf)throw new Og(kg.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Zf},enumerable:!1,configurable:!0}),IN.prototype.collection=function(t){return rT("Firestore.collection",arguments,1),sT("Firestore.collection","non-empty string",1,t),this.ed(),new JN(xg.N(t),this,null)},IN.prototype.doc=function(t){return rT("Firestore.doc",arguments,1),sT("Firestore.doc","non-empty string",1,t),this.ed(),ON.Td(xg.N(t),this,null)},IN.prototype.collectionGroup=function(t){if(rT("Firestore.collectionGroup",arguments,1),sT("Firestore.collectionGroup","non-empty string",1,t),0<=t.indexOf("/"))throw new Og(kg.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ed(),new GN((e=t,new Hw(xg.k(),e)),this,null);var e},IN.prototype.runTransaction=function(e){var n=this;return rT("Firestore.runTransaction",arguments,1),sT("Firestore.runTransaction","function",1,e),this.ed().transaction(function(t){return e(new AN(n,t))})},IN.prototype.batch=function(){return this.ed(),new kN(this)},Object.defineProperty(IN,"logLevel",{get:function(){switch(ag()){case ja.DEBUG:return"debug";case ja.ERROR:return"error";case ja.SILENT:return"silent";case ja.WARN:return"warn";case ja.INFO:return"info";case ja.VERBOSE:return"verbose";default:return"error"}},enumerable:!1,configurable:!0}),IN.setLogLevel=function(t){rT("Firestore.setLogLevel",arguments,1),lT("setLogLevel",["debug","error","silent","warn","info","verbose"],1,t),sg.setLogLevel(t)},IN.prototype.Ed=function(){return this.ad.timestampsInSnapshots},IN);function IN(t,e,n){var r=this;if(void 0===n&&(n=new eN),this.Zf=null,this.td=new DI,this.INTERNAL={delete:function(){return Fs(r,void 0,void 0,function(){return Us(this,function(t){switch(t.label){case 0:return this.ed(),[4,this.nd.terminate()];case 1:return t.sent(),[2]}})})}},"object"==typeof t.options){var i=t;this.Zf=i,this.aa=IN.sd(i),this.rd=i.name,this.od=new RS(e)}else{var o=t;if(!o.projectId)throw new Og(kg.INVALID_ARGUMENT,"Must provide projectId");this.aa=new wg(o.projectId,o.database),this.rd="[DEFAULT]",this.od=new PS}this.hd=n,this.ad=new _N({})}function TN(t){var e,n,r,i;if(void 0===t.host){if(void 0!==t.ssl)throw new Og(kg.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else uT("settings","non-empty string","host",t.host),this.host=t.host,cT("settings","boolean","ssl",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if(yT("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling","ignoreUndefinedProperties"]),cT("settings","object","credentials",t.credentials),this.credentials=t.credentials,cT("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),cT("settings","boolean","ignoreUndefinedProperties",t.ignoreUndefinedProperties),!0===t.timestampsInSnapshots?cg("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===t.timestampsInSnapshots&&cg("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(n=t.timestampsInSnapshots)||void 0===n||n,this.ignoreUndefinedProperties=null!==(r=t.ignoreUndefinedProperties)&&void 0!==r&&r,cT("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=VI.th;else{if(t.cacheSizeBytes!==wN&&t.cacheSizeBytes<VI.Zo)throw new Og(kg.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+VI.Zo);this.cacheSizeBytes=t.cacheSizeBytes}cT("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=null!==(i=t.experimentalForceLongPolling)&&void 0!==i&&i}function SN(t,e,n,r){this.s=t,this.timestampsInSnapshots=e,this.Qf=n,this.jf=r}function CN(t,e){var n=new iN({next:function(){e.next&&e.next()},error:function(t){throw lg()}});return t.R_(n),function(){n.Wf(),t.P_(n)}}var NN,AN=(DN.prototype.get=function(t){var n=this;rT("Transaction.get",arguments,1);var r=rA("Transaction.get",t,this.Id);return this.md.Au([r.ua]).then(function(t){if(!t||1!==t.length)return lg();var e=t[0];if(e instanceof Uw)return new FN(n.Id,r.ua,null,!1,!1,r.ca);if(e instanceof Fw)return new FN(n.Id,r.ua,e,!1,!1,r.ca);throw lg()})},DN.prototype.set=function(t,e,n){oT("Transaction.set",arguments,2,3);var r=rA("Transaction.set",t,this.Id);n=tA("Transaction.set",n);var i=iA(r.ca,e,n),o=pS(this.Id.ud,"Transaction.set",r.ua,i,null!==r.ca,n);return this.md.set(r.ua,o),this},DN.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return i="string"==typeof e||e instanceof NT?(iT("Transaction.update",arguments,3),r=rA("Transaction.update",t,this.Id),vS(this.Id.ud,"Transaction.update",r.ua,e,n,o)):(rT("Transaction.update",arguments,2),r=rA("Transaction.update",t,this.Id),dS(this.Id.ud,"Transaction.update",r.ua,e)),this.md.update(r.ua,i),this},DN.prototype.delete=function(t){rT("Transaction.delete",arguments,1);var e=rA("Transaction.delete",t,this.Id);return this.md.delete(e.ua),this},DN),kN=(RN.prototype.set=function(t,e,n){oT("WriteBatch.set",arguments,2,3),this.Pd();var r=rA("WriteBatch.set",t,this.Id);n=tA("WriteBatch.set",n);var i=iA(r.ca,e,n),o=pS(this.Id.ud,"WriteBatch.set",r.ua,i,null!==r.ca,n);return this.Ad=this.Ad.concat(o.la(r.ua,iw.We())),this},RN.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.Pd(),i="string"==typeof e||e instanceof NT?(iT("WriteBatch.update",arguments,3),r=rA("WriteBatch.update",t,this.Id),vS(this.Id.ud,"WriteBatch.update",r.ua,e,n,o)):(rT("WriteBatch.update",arguments,2),r=rA("WriteBatch.update",t,this.Id),dS(this.Id.ud,"WriteBatch.update",r.ua,e)),this.Ad=this.Ad.concat(i.la(r.ua,iw.exists(!0))),this},RN.prototype.delete=function(t){rT("WriteBatch.delete",arguments,1),this.Pd();var e=rA("WriteBatch.delete",t,this.Id);return this.Ad=this.Ad.concat(new Tw(e.ua,iw.We())),this},RN.prototype.commit=function(){return this.Pd(),this.Rd=!0,0<this.Ad.length?this.Id.ed().write(this.Ad):Promise.resolve()},RN.prototype.Pd=function(){if(this.Rd)throw new Og(kg.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},RN),ON=(Ls(PN,NN=rS),PN.Td=function(t,e,n){if(t.length%2!=0)throw new Og(kg.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.F()+" has "+t.length);return new PN(new Fg(t),e,n)},Object.defineProperty(PN.prototype,"id",{get:function(){return this.ua.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(PN.prototype,"parent",{get:function(){return new JN(this.ua.path.p(),this.firestore,this.ca)},enumerable:!1,configurable:!0}),Object.defineProperty(PN.prototype,"path",{get:function(){return this.ua.path.F()},enumerable:!1,configurable:!0}),PN.prototype.collection=function(t){if(rT("DocumentReference.collection",arguments,1),sT("DocumentReference.collection","non-empty string",1,t),!t)throw new Og(kg.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=xg.N(t);return new JN(this.ua.path.child(e),this.firestore,null)},PN.prototype.isEqual=function(t){if(!(t instanceof PN))throw gT("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this.ua.isEqual(t.ua)&&this.ca===t.ca},PN.prototype.set=function(t,e){oT("DocumentReference.set",arguments,1,2),e=tA("DocumentReference.set",e);var n=iA(this.ca,t,e),r=pS(this.firestore.ud,"DocumentReference.set",this.ua,n,null!==this.ca,e);return this.nd.write(r.la(this.ua,iw.We()))},PN.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n="string"==typeof t||t instanceof NT?(iT("DocumentReference.update",arguments,2),vS(this.firestore.ud,"DocumentReference.update",this.ua,t,e,r)):(rT("DocumentReference.update",arguments,1),dS(this.firestore.ud,"DocumentReference.update",this.ua,t)),this.nd.write(n.la(this.ua,iw.exists(!0)))},PN.prototype.delete=function(){return rT("DocumentReference.delete",arguments,0),this.nd.write([new Tw(this.ua,iw.We())])},PN.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];oT("DocumentReference.onSnapshot",arguments,1,4);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||mN(i[a])||(yT("DocumentReference.onSnapshot",s=i[a],["includeMetadataChanges"]),cT("DocumentReference.onSnapshot","boolean","includeMetadataChanges",s.includeMetadataChanges),a++);var u,c={includeMetadataChanges:s.includeMetadataChanges};mN(i[a])?(u=i[a],i[a]=null===(t=u.next)||void 0===t?void 0:t.bind(u),i[a+1]=null===(e=u.error)||void 0===e?void 0:e.bind(u),i[a+2]=null===(n=u.complete)||void 0===n?void 0:n.bind(u)):(sT("DocumentReference.onSnapshot","function",a,i[a]),aT("DocumentReference.onSnapshot","function",a+1,i[a+1]),aT("DocumentReference.onSnapshot","function",a+2,i[a+2]));var h={next:function(t){i[a]&&i[a](r.gd(t))},error:i[a+1],complete:i[a+2]};return xN(this.nd,this.ua,c,h)},PN.prototype.get=function(t){var e,n,r,i,o,s=this;return oT("DocumentReference.get",arguments,0,1),nA("DocumentReference.get",t),t&&"cache"===t.source?this.firestore.ed().qf(this.ua).then(function(t){return new FN(s.firestore,s.ua,t,!0,t instanceof Fw&&t.Ke,s.ca)}):(e=this.nd,n=this.ua,r=t,i=new G_,o=xN(e,n,{includeMetadataChanges:!0,S_:!0},{next:function(t){o();var e=t.docs.has(n);!e&&t.fromCache?i.reject(new Og(kg.UNAVAILABLE,"Failed to get document because the client is offline.")):e&&t.fromCache&&r&&"server"===r.source?i.reject(new Og(kg.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(t)},error:function(t){return i.reject(t)}}),i.promise.then(function(t){return s.gd(t)}))},PN.prototype.withConverter=function(t){return new PN(this.ua,this.firestore,t)},PN.prototype.gd=function(t){var e=t.docs.get(this.ua);return new FN(this.firestore,this.ua,e,t.fromCache,t.hasPendingWrites,this.ca)},PN);function PN(t,e,n){var r=this;return(r=NN.call(this,e.aa,t,n)||this).ua=t,r.firestore=e,r.ca=n,r.nd=r.firestore.ed(),r}function RN(t){this.Id=t,this.Ad=[],this.Rd=!1}function DN(t,e){this.Id=t,this.md=e}function xN(t,e,n,r){var i=function(t){console.error("Uncaught Error in onSnapshot:",t)};r.error&&(i=r.error.bind(r));var o=new iN({next:function(t){r.next&&r.next(t)},error:i}),s=t.listen(zw(e.path),o,n);return function(){o.Wf(),t.ic(s)}}var LN,MN=(qN.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},qN),FN=(VN.prototype.data=function(t){var e=this;if(oT("DocumentSnapshot.data",arguments,0,1),t=eA("DocumentSnapshot.data",t),this.Vd){if(this.ca){var n=new UN(this.Id,this.ua,this.Vd,this.yd,this.pd,null);return this.ca.fromFirestore(n,t)}return new bN(this.Id.aa,this.Id.Ed(),t.serverTimestamps||"none",function(t){return new ON(t,e.Id,null)}).Kf(this.Vd.Ze())}},VN.prototype.get=function(t,e){var n=this;if(oT("DocumentSnapshot.get",arguments,1,2),e=eA("DocumentSnapshot.get",e),this.Vd){var r=this.Vd.data().field(_S("DocumentSnapshot.get",t,this.ua));if(null!==r)return new bN(this.Id.aa,this.Id.Ed(),e.serverTimestamps||"none",function(t){return new ON(t,n.Id,n.ca)}).Kf(r)}},Object.defineProperty(VN.prototype,"id",{get:function(){return this.ua.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(VN.prototype,"ref",{get:function(){return new ON(this.ua,this.Id,this.ca)},enumerable:!1,configurable:!0}),Object.defineProperty(VN.prototype,"exists",{get:function(){return null!==this.Vd},enumerable:!1,configurable:!0}),Object.defineProperty(VN.prototype,"metadata",{get:function(){return new MN(this.pd,this.yd)},enumerable:!1,configurable:!0}),VN.prototype.isEqual=function(t){if(!(t instanceof VN))throw gT("isEqual","DocumentSnapshot",1,t);return this.Id===t.Id&&this.yd===t.yd&&this.ua.isEqual(t.ua)&&(null===this.Vd?null===t.Vd:this.Vd.isEqual(t.Vd))&&this.ca===t.ca},VN),UN=(Ls(jN,LN=FN),jN.prototype.data=function(t){return LN.prototype.data.call(this,t)},jN);function jN(){return null!==LN&&LN.apply(this,arguments)||this}function VN(t,e,n,r,i,o){this.Id=t,this.ua=e,this.Vd=n,this.yd=r,this.pd=i,this.ca=o}function qN(t,e){this.hasPendingWrites=t,this.fromCache=e}function BN(t,e,n){if("string"==typeof n){if(""===n)throw new Og(kg.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qw(e)&&-1!==n.indexOf("/"))throw new Og(kg.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(xg.N(n));if(!Fg.W(r))throw new Og(kg.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return rb(t,new Fg(r))}if(n instanceof rS)return rb(t,n.ua);throw new Og(kg.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+dT(n)+".")}function WN(t,e){if(!Array.isArray(t)||0===t.length)throw new Og(kg.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new Og(kg.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(0<=t.indexOf(null))throw new Og(kg.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(0<t.filter(function(t){return Number.isNaN(t)}).length)throw new Og(kg.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")}function HN(t,e,n){if(!n.isEqual(e))throw new Og(kg.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function KN(t){if(t.an()&&0===t.tn.length)throw new Og(kg.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var GN=(zN.prototype.where=function(t,e,n){rT("Query.where",arguments,3),vT("Query.where",3,n);var r,i,o=lT("Query.where",["<","<=","==",">=",">","array-contains","in","array-contains-any"],2,e),s=_S("Query.where",t),a=function(t,e,n,r,i,o){var s;if(r.O()){if("array-contains"===i||"array-contains-any"===i)throw new Og(kg.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+i+"' queries on FieldPath.documentId().");if("in"===i){WN(o,i);for(var a=[],u=0,c=o;u<c.length;u++){var h=c[u];a.push(BN(n,t,h))}s={arrayValue:{values:a}}}else s=BN(n,t,o)}else"in"!==i&&"array-contains-any"!==i||WN(o,i),s=yS(e,"Query.where",o,"in"===i);var l=s_.create(r,i,s);return function(t,e){if(e instanceof s_){var n=["array-contains","array-contains-any"],r=["in","array-contains-any"],i=0<=n.indexOf(e.op),o=0<=r.indexOf(e.op);if(e.ln()){var s=t.cn();if(null!==s&&!s.isEqual(e.field))throw new Og(kg.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+s.toString()+"' and '"+e.field.toString()+"'");var a=t.un();null!==a&&HN(0,e.field,a)}else if(o||i){var u=null;if(o&&(u=t._n(r)),null===u&&i&&(u=t._n(n)),null!==u)throw u===e.op?new Og(kg.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Og(kg.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+u.toString()+"' filters.")}}}(t,l),l}(this.bd,this.firestore.ud,this.firestore.aa,s,o,n);return new zN((i=(r=this.bd).filters.concat([a]),new Hw(r.path,r.collectionGroup,r.tn.slice(),i,r.limit,r.en,r.startAt,r.endAt)),this.firestore,this.ca)},zN.prototype.orderBy=function(t,e){var n;if(oT("Query.orderBy",arguments,1,2),aT("Query.orderBy","non-empty string",2,e),void 0===e||"asc"===e)n="asc";else{if("desc"!==e)throw new Og(kg.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+e+"', expected 'asc' or 'desc'.");n="desc"}var r,i,o=_S("Query.orderBy",t),s=function(t,e,n){if(null!==t.startAt)throw new Og(kg.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Og(kg.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r,i,o,s=new N_(e,n);return i=s,null!==(r=t).un()||null!==(o=r.cn())&&HN(0,o,i.field),s}(this.bd,o,n);return new zN((i=(r=this.bd).tn.concat([s]),new Hw(r.path,r.collectionGroup,i,r.filters.slice(),r.limit,r.en,r.startAt,r.endAt)),this.firestore,this.ca)},zN.prototype.limit=function(t){return rT("Query.limit",arguments,1),sT("Query.limit","number",1,t),mT("Query.limit",1,t),new zN(Jw(this.bd,t,"F"),this.firestore,this.ca)},zN.prototype.limitToLast=function(t){return rT("Query.limitToLast",arguments,1),sT("Query.limitToLast","number",1,t),mT("Query.limitToLast",1,t),new zN(Jw(this.bd,t,"L"),this.firestore,this.ca)},zN.prototype.startAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];iT("Query.startAt",arguments,1);var r=this.vd("Query.startAt",t,e,!0);return new zN($w(this.bd,r),this.firestore,this.ca)},zN.prototype.startAfter=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];iT("Query.startAfter",arguments,1);var r=this.vd("Query.startAfter",t,e,!1);return new zN($w(this.bd,r),this.firestore,this.ca)},zN.prototype.endBefore=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];iT("Query.endBefore",arguments,1);var r=this.vd("Query.endBefore",t,e,!0);return new zN(Zw(this.bd,r),this.firestore,this.ca)},zN.prototype.endAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];iT("Query.endAt",arguments,1);var r=this.vd("Query.endAt",t,e,!1);return new zN(Zw(this.bd,r),this.firestore,this.ca)},zN.prototype.isEqual=function(t){if(!(t instanceof zN))throw gT("isEqual","Query",1,t);return this.firestore===t.firestore&&t_(this.bd,t.bd)&&this.ca===t.ca},zN.prototype.withConverter=function(t){return new zN(this.bd,this.firestore,t)},zN.prototype.vd=function(h,t,e,n){if(vT(h,1,t),t instanceof FN)return rT(h,Bs([t],e),1),function(t,e,n,r){if(!n)throw new Og(kg.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+h+"().");for(var i=[],o=0,s=Xw(t);o<s.length;o++){var a=s[o];if(a.field.O())i.push(rb(e,n.key));else{var u=n.field(a.field);if(Km(u))throw new Og(kg.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===u){var c=a.field.F();throw new Og(kg.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+c+"' (used as the orderBy) does not exist.")}i.push(u)}}return new m_(i,r)}(this.bd,this.firestore.aa,t.Vd,n);var r=[t].concat(e);return function(t,e,n,r,i,o){var s=t.tn;if(i.length>s.length)throw new Og(kg.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.O()){if("string"!=typeof c)throw new Og(kg.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Qw(t)&&-1!==c.indexOf("/"))throw new Og(kg.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(xg.N(c));if(!Fg.W(h))throw new Og(kg.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var l=new Fg(h);a.push(rb(e,l))}else{var f=yS(n,r,c);a.push(f)}}return new m_(a,o)}(this.bd,this.firestore.aa,this.firestore.ud,h,r,n)},zN.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];oT("Query.onSnapshot",arguments,1,4);var s,a={},u=0;"object"!=typeof i[u]||mN(i[u])||(yT("Query.onSnapshot",a=i[u],["includeMetadataChanges"]),cT("Query.onSnapshot","boolean","includeMetadataChanges",a.includeMetadataChanges),u++),mN(i[u])?(s=i[u],i[u]=null===(t=s.next)||void 0===t?void 0:t.bind(s),i[u+1]=null===(e=s.error)||void 0===e?void 0:e.bind(s),i[u+2]=null===(n=s.complete)||void 0===n?void 0:n.bind(s)):(sT("Query.onSnapshot","function",u,i[u]),aT("Query.onSnapshot","function",u+1,i[u+1]),aT("Query.onSnapshot","function",u+2,i[u+2]));var c={next:function(t){i[u]&&i[u](new YN(r.firestore,r.bd,t,r.ca))},error:i[u+1],complete:i[u+2]};return KN(this.bd),QN(this.firestore.ed(),this.bd,a,c)},zN.prototype.get=function(t){var e=this;oT("Query.get",arguments,0,1),nA("Query.get",t),KN(this.bd);var n,r,i,o,s,a=this.firestore.ed();return(t&&"cache"===t.source?a.Bf(this.bd):(n=a,r=this.bd,i=t,o=new G_,s=QN(n,r,{includeMetadataChanges:!0,S_:!0},{next:function(t){s(),t.fromCache&&i&&"server"===i.source?o.reject(new Og(kg.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):o.resolve(t)},error:function(t){return o.reject(t)}}),o.promise)).then(function(t){return new YN(e.firestore,e.bd,t,e.ca)})},zN);function zN(t,e,n){this.bd=t,this.firestore=e,this.ca=n}function QN(t,e,n,r){var i=function(t){console.error("Uncaught Error in onSnapshot:",t)};r.error&&(i=r.error.bind(r));var o=new iN({next:function(t){r.next&&r.next(t)},error:i}),s=t.listen(e,o,n);return function(){o.Wf(),t.ic(s)}}var XN,YN=(Object.defineProperty(ZN.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!1,configurable:!0}),Object.defineProperty(ZN.prototype,"empty",{get:function(){return this.Dd.docs._()},enumerable:!1,configurable:!0}),Object.defineProperty(ZN.prototype,"size",{get:function(){return this.Dd.docs.size},enumerable:!1,configurable:!0}),ZN.prototype.forEach=function(e,n){var r=this;oT("QuerySnapshot.forEach",arguments,1,2),sT("QuerySnapshot.forEach","function",1,e),this.Dd.docs.forEach(function(t){e.call(n,r.Fd(t,r.metadata.fromCache,r.Dd.Lt.has(t.key)))})},Object.defineProperty(ZN.prototype,"query",{get:function(){return new GN(this.Sd,this.Id,this.ca)},enumerable:!1,configurable:!0}),ZN.prototype.docChanges=function(t){t&&(yT("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),cT("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.Dd.Bt)throw new Og(kg.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.Cd&&this.$d===e||(this.Cd=function(i,e,o){if(i.Ot._()){var n=0;return i.docChanges.map(function(t){var e=o(t.doc,i.fromCache,i.Lt.has(t.doc.key));return t.doc,{type:"added",doc:e,oldIndex:-1,newIndex:n++}})}var s=i.Ot;return i.docChanges.filter(function(t){return e||3!==t.type}).map(function(t){var e=o(t.doc,i.fromCache,i.Lt.has(t.doc.key)),n=-1,r=-1;return 0!==t.type&&(n=s.indexOf(t.doc.key),s=s.delete(t.doc.key)),1!==t.type&&(r=(s=s.add(t.doc)).indexOf(t.doc.key)),{type:function(){switch(t.type){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lg()}}(),doc:e,oldIndex:n,newIndex:r}})}(this.Dd,e,this.Fd.bind(this)),this.$d=e),this.Cd},ZN.prototype.isEqual=function(t){if(!(t instanceof ZN))throw gT("isEqual","QuerySnapshot",1,t);return this.Id===t.Id&&t_(this.Sd,t.Sd)&&this.Dd.isEqual(t.Dd)&&this.ca===t.ca},ZN.prototype.Fd=function(t,e,n){return new UN(this.Id,t.key,t,e,n,this.ca)},ZN),JN=(Ls($N,XN=GN),Object.defineProperty($N.prototype,"id",{get:function(){return this.bd.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty($N.prototype,"parent",{get:function(){var t=this.bd.path.p();return t._()?null:new ON(new Fg(t),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty($N.prototype,"path",{get:function(){return this.bd.path.F()},enumerable:!1,configurable:!0}),$N.prototype.doc=function(t){oT("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=dg.t()),sT("CollectionReference.doc","non-empty string",1,t);var e=xg.N(t);return ON.Td(this.bd.path.child(e),this.firestore,this.ca)},$N.prototype.add=function(t){rT("CollectionReference.add",arguments,1),sT("CollectionReference.add","object",1,this.ca?this.ca.toFirestore(t):t);var e=this.doc();return e.set(t).then(function(){return e})},$N.prototype.withConverter=function(t){return new $N(this.Nd,this.firestore,t)},$N);function $N(t,e,n){var r=this;if(((r=XN.call(this,zw(t),e,n)||this).Nd=t).length%2!=1)throw new Og(kg.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.F()+" has "+t.length);return r}function ZN(t,e,n,r){this.Id=t,this.Sd=e,this.Dd=n,this.ca=r,this.Cd=null,this.$d=null,this.metadata=new MN(n.hasPendingWrites,n.fromCache)}function tA(t,e){if(void 0===e)return{merge:!1};if(yT(t,e,["merge","mergeFields"]),cT(t,"boolean","merge",e.merge),void 0!==(n=e.mergeFields)&&function(t,e,n){if(!(n instanceof Array))throw new Og(kg.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+dT(n));for(var r,i=0;i<n.length;++i)if(!("string"==typeof(r=n[i])||r instanceof NT))throw new Og(kg.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+i+" was: "+dT(n[i]))}(t,"mergeFields",n),void 0!==e.mergeFields&&void 0!==e.merge)throw new Og(kg.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');var n;return e}function eA(t,e){return void 0===e?{}:(yT(t,e,["serverTimestamps"]),hT(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function nA(t,e){aT(t,"object",1,e),e&&(yT(t,e,["source"]),hT(t,0,"source",e.source,["default","server","cache"]))}function rA(t,e,n){if(e instanceof rS){if(e.firestore!==n)throw new Og(kg.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw gT(t,"DocumentReference",1,e)}function iA(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var oA,sA={Firestore:EN,GeoPoint:zT,Timestamp:Pg,Blob:ST,Transaction:AN,WriteBatch:kN,DocumentReference:ON,DocumentSnapshot:FN,Query:GN,QueryDocumentSnapshot:UN,QuerySnapshot:YN,CollectionReference:JN,FieldPath:NT,FieldValue:KT,setLogLevel:EN.setLogLevel,CACHE_SIZE_UNLIMITED:wN};(oA=Fl).INTERNAL.registerComponent(new Oa("firestore",function(t){return e=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),new EN(e,n,new nN);var e,n},"PUBLIC").setServiceProps(Object.assign({},sA))),oA.registerVersion("@firebase/firestore","1.16.2-20206244562");var aA,uA={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},cA=(Ls(hA,aA=Error),hA);function hA(t,e,n){var r=aA.call(this,e)||this;return Object.setPrototypeOf(r,hA.prototype),r.code=t,r.details=n,r}var lA=(fA.prototype.getAuthToken=function(){return Fs(this,void 0,void 0,function(){var e;return Us(this,function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(e=t.sent())?[2,e.accessToken]:[2,void 0];case 3:return t.sent(),[2,void 0];case 4:return[2]}})})},fA.prototype.getInstanceIdToken=function(){return Fs(this,void 0,void 0,function(){return Us(this,function(t){if(!(this.messaging&&"Notification"in self&&"granted"===Notification.permission))return[2,void 0];try{return[2,this.messaging.getToken()]}catch(t){return[2,void 0]}return[2]})})},fA.prototype.getContext=function(){return Fs(this,void 0,void 0,function(){var e,n;return Us(this,function(t){switch(t.label){case 0:return[4,this.getAuthToken()];case 1:return e=t.sent(),[4,this.getInstanceIdToken()];case 2:return n=t.sent(),[2,{authToken:e,instanceIdToken:n}]}})})},fA);function fA(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then(function(t){return n.auth=t},function(){}),this.messaging||e.get().then(function(t){return n.messaging=t},function(){})}function pA(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var dA=(vA.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map(function(t){return e.encode(t)});if("function"==typeof t||"object"==typeof t)return pA(t,function(t){return e.encode(t)});throw new Error("Data cannot be encoded in JSON: "+t)},vA.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(t){return e.decode(t)}):"function"==typeof t||"object"==typeof t?pA(t,function(t){return e.decode(t)}):t},vA);function vA(){}var yA,gA=(Object.defineProperty(mA.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),mA.prototype._url=function(t){var e=this.app_.options.projectId,n=this.region_;return null===this.emulatorOrigin?"https://"+n+"-"+e+".cloudfunctions.net/"+t:this.emulatorOrigin+"/"+e+"/"+n+"/"+t},mA.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},mA.prototype.httpsCallable=function(e,n){var r=this;return function(t){return r.call(e,t,n||{})}},mA.prototype.postJSON=function(r,i,o){return Fs(this,void 0,void 0,function(){var e,n;return Us(this,function(t){switch(t.label){case 0:o.append("Content-Type","application/json"),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,fetch(r,{method:"POST",body:JSON.stringify(i),headers:o})];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),[2,{status:0,json:null}];case 4:n=null,t.label=5;case 5:return t.trys.push([5,7,,8]),[4,e.json()];case 6:return n=t.sent(),[3,8];case 7:return t.sent(),[3,8];case 8:return[2,{status:e.status,json:n}]}})})},mA.prototype.call=function(v,y,g){return Fs(this,void 0,void 0,function(){var i,o,s,a,u,c,h,l,f,p,d;return Us(this,function(t){switch(t.label){case 0:return i=this._url(v),y=this.serializer.encode(y),o={data:y},s=new Headers,[4,this.contextProvider.getContext()];case 1:return(a=t.sent()).authToken&&s.append("Authorization","Bearer "+a.authToken),a.instanceIdToken&&s.append("Firebase-Instance-ID-Token",a.instanceIdToken),u=g.timeout||7e4,n=u,e=new Promise(function(t,e){r=setTimeout(function(){e(new cA("deadline-exceeded","deadline-exceeded"))},n)}),h=(c={timer:r,promise:e}).timer,l=c.promise,[4,Promise.race([bA(h,this.postJSON(i,o,s)),l,bA(h,this.cancelAllRequests)])];case 2:if(!(f=t.sent()))throw new cA("cancelled","Firebase Functions instance was deleted.");if(p=function(t,e,n){var r=function(){if(200<=t&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!uA[a])return new cA("internal","internal");r=uA[a],i=a}var u=s.message;"string"==typeof u&&(i=u),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(t){}return"ok"===r?null:new cA(r,i,o)}(f.status,f.json,this.serializer))throw p;if(!f.json)throw new cA("internal","Response is not valid JSON object.");if(void 0===(d=f.json.data)&&(d=f.json.result),void 0===d)throw new cA("internal","Response is missing data field.");return[2,{data:this.serializer.decode(d)}]}var n,r,e})})},mA);function mA(t,e,n,r){var i=this;void 0===r&&(r="us-central1"),this.app_=t,this.region_=r,this.serializer=new dA,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return i.deleteService()}},this.contextProvider=new lA(e,n),this.cancelAllRequests=new Promise(function(t){i.deleteService=function(){return t()}})}function bA(n,r){return Fs(this,void 0,void 0,function(){var e;return Us(this,function(t){switch(t.label){case 0:return[4,r];case 1:return e=t.sent(),clearTimeout(n),[2,e]}})})}function wA(n){return new Promise(function(t,e){n.onsuccess=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function _A(n,r,i){var o,t=new Promise(function(t,e){wA(o=n[r].apply(n,i)).then(t,e)});return t.request=o,t}function EA(t,n,e){e.forEach(function(e){Object.defineProperty(t.prototype,e,{get:function(){return this[n][e]},set:function(t){this[n][e]=t}})})}function IA(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return _A(this[n],t,arguments)})})}function TA(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return this[n][t].apply(this[n],arguments)})})}function SA(t,r,e,n){n.forEach(function(n){n in e.prototype&&(t.prototype[n]=function(){return t=this[r],(e=_A(t,n,arguments)).then(function(t){if(t)return new NA(t,e.request)});var t,e})})}function CA(t){this._index=t}function NA(t,e){this._cursor=t,this._request=e}function AA(t){this._store=t}function kA(n){this._tx=n,this.complete=new Promise(function(t,e){n.oncomplete=function(){t()},n.onerror=function(){e(n.error)},n.onabort=function(){e(n.error)}})}function OA(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new kA(n)}function PA(t){this._db=t}function RA(t,e,n){var r=_A(indexedDB,"open",[t,e]),i=r.request;return i&&(i.onupgradeneeded=function(t){n&&n(new OA(i.result,t.oldVersion,i.transaction))}),r.then(function(t){return new PA(t)})}function DA(t){return _A(indexedDB,"deleteDatabase",[t])}yA={Functions:gA},Fl.INTERNAL.registerComponent(new Oa("functions",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("messaging");return new gA(n,r,i,e)},"PUBLIC").setServiceProps(yA).setMultipleInstances(!0)),Fl.registerVersion("@firebase/functions","0.4.49-20206244562"),EA(CA,"_index",["name","keyPath","multiEntry","unique"]),IA(CA,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),SA(CA,"_index",IDBIndex,["openCursor","openKeyCursor"]),EA(NA,"_cursor",["direction","key","primaryKey","value"]),IA(NA,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(n){n in IDBCursor.prototype&&(NA.prototype[n]=function(){var e=this,t=arguments;return Promise.resolve().then(function(){return e._cursor[n].apply(e._cursor,t),wA(e._request).then(function(t){if(t)return new NA(t,e._request)})})})}),AA.prototype.createIndex=function(){return new CA(this._store.createIndex.apply(this._store,arguments))},AA.prototype.index=function(){return new CA(this._store.index.apply(this._store,arguments))},EA(AA,"_store",["name","keyPath","indexNames","autoIncrement"]),IA(AA,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),SA(AA,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),TA(AA,"_store",IDBObjectStore,["deleteIndex"]),kA.prototype.objectStore=function(){return new AA(this._tx.objectStore.apply(this._tx,arguments))},EA(kA,"_tx",["objectStoreNames","mode"]),TA(kA,"_tx",IDBTransaction,["abort"]),OA.prototype.createObjectStore=function(){return new AA(this._db.createObjectStore.apply(this._db,arguments))},EA(OA,"_db",["name","version","objectStoreNames"]),TA(OA,"_db",IDBDatabase,["deleteObjectStore","close"]),PA.prototype.transaction=function(){return new kA(this._db.transaction.apply(this._db,arguments))},EA(PA,"_db",["name","version","objectStoreNames"]),TA(PA,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(o){[AA,CA].forEach(function(t){o in t.prototype&&(t.prototype[o.replace("open","iterate")]=function(){var t,e=(t=arguments,Array.prototype.slice.call(t)),n=e[e.length-1],r=this._store||this._index,i=r[o].apply(r,e.slice(0,-1));i.onsuccess=function(){n(i.result)}})})}),[CA,AA].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,n){var r=this,i=[];return new Promise(function(e){r.iterateCursor(t,function(t){t?(i.push(t.value),void 0===n||i.length!=n?t.continue():e(i)):e(i)})})})});var xA,LA="0.4.15-20206244562",MA=1e4,FA="w:"+LA,UA="FIS_v2",jA="https://firebaseinstallations.googleapis.com/v1",VA=36e5,qA=((xA={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',xA["not-registered"]="Firebase Installation is not registered.",xA["installation-not-found"]="Firebase Installation not found.",xA["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',xA["app-offline"]="Could not process request. Application offline.",xA["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",xA),BA=new ca("installations","Installations",qA);function WA(t){return t instanceof aa&&t.code.includes("request-failed")}function HA(t){var e=t.projectId;return jA+"/projects/"+e+"/installations"}function KA(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function GA(r,i){return Fs(this,void 0,void 0,function(){var e,n;return Us(this,function(t){switch(t.label){case 0:return[4,i.json()];case 1:return e=t.sent(),n=e.error,[2,BA.create("request-failed",{requestName:r,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})]}})})}function zA(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function QA(t,e){var n=e.refreshToken,r=zA(t);return r.append("Authorization",UA+" "+n),r}function XA(n){return Fs(this,void 0,void 0,function(){var e;return Us(this,function(t){switch(t.label){case 0:return[4,n()];case 1:return 500<=(e=t.sent()).status&&e.status<600?[2,n()]:[2,e]}})})}function YA(e){return new Promise(function(t){setTimeout(t,e)})}var JA=/^[cdef][\w-]{21}$/,$A="";function ZA(t){return t.appName+"!"+t.appId}var tk=new Map;function ek(t,e){var n,r,i,o=ZA(t);nk(o,e),n=o,r=e,(i=ik())&&i.postMessage({key:n,fid:r}),ok()}function nk(t,e){var n,r,i=tk.get(t);if(i)try{for(var o=js(i),s=o.next();!s.done;s=o.next())(0,s.value)(e)}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var rk=null;function ik(){return!rk&&"BroadcastChannel"in self&&((rk=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){nk(t.data.key,t.data.fid)}),rk}function ok(){0===tk.size&&rk&&(rk.close(),rk=null)}var sk,ak,uk="firebase-installations-database",ck=1,hk="firebase-installations-store",lk=null;function fk(){return lk=lk||RA(uk,ck,function(t){switch(t.oldVersion){case 0:t.createObjectStore(hk)}})}function pk(s,a){return Fs(this,void 0,void 0,function(){var e,n,r,i,o;return Us(this,function(t){switch(t.label){case 0:return e=ZA(s),[4,fk()];case 1:return n=t.sent(),r=n.transaction(hk,"readwrite"),[4,(i=r.objectStore(hk)).get(e)];case 2:return o=t.sent(),[4,i.put(a,e)];case 3:return t.sent(),[4,r.complete];case 4:return t.sent(),o&&o.fid===a.fid||ek(s,a.fid),[2,a]}})})}function dk(i){return Fs(this,void 0,void 0,function(){var e,n,r;return Us(this,function(t){switch(t.label){case 0:return e=ZA(i),[4,fk()];case 1:return n=t.sent(),[4,(r=n.transaction(hk,"readwrite")).objectStore(hk).delete(e)];case 2:return t.sent(),[4,r.complete];case 3:return t.sent(),[2]}})})}function vk(a,u){return Fs(this,void 0,void 0,function(){var e,n,r,i,o,s;return Us(this,function(t){switch(t.label){case 0:return e=ZA(a),[4,fk()];case 1:return n=t.sent(),r=n.transaction(hk,"readwrite"),[4,(i=r.objectStore(hk)).get(e)];case 2:return o=t.sent(),void 0!==(s=u(o))?[3,4]:[4,i.delete(e)];case 3:return t.sent(),[3,6];case 4:return[4,i.put(s,e)];case 5:t.sent(),t.label=6;case 6:return[4,r.complete];case 7:return t.sent(),!s||o&&o.fid===s.fid||ek(a,s.fid),[2,s]}})})}function yk(i){return Fs(this,void 0,void 0,function(){var r,e,n;return Us(this,function(t){switch(t.label){case 0:return[4,vk(i,function(t){var e=mk(t||{fid:function(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=btoa(String.fromCharCode.apply(String,qs(t))).replace(/\+/g,"-").replace(/\//g,"_").substr(0,22);return JA.test(e)?e:$A}catch(t){return $A}}(),registrationStatus:0}),n=function(t,e){if(0!==e.registrationStatus)return 1===e.registrationStatus?{installationEntry:e,registrationPromise:function(o){return Fs(this,void 0,void 0,function(){var e,n,r,i;return Us(this,function(t){switch(t.label){case 0:return[4,gk(o)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,YA(100)];case 3:return t.sent(),[4,gk(o)];case 4:return e=t.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,yk(o)];case 6:return n=t.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}})})}(t)}:{installationEntry:e};if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(BA.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(r,i){return Fs(this,void 0,void 0,function(){var e,n;return Us(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,7]),[4,function(a){var u=i.fid;return Fs(this,void 0,void 0,function(){var e,n,r,i,o,s;return Us(this,function(t){switch(t.label){case 0:return e=HA(a),n=zA(a),r={fid:u,authVersion:UA,appId:a.appId,sdkVersion:FA},i={method:"POST",headers:n,body:JSON.stringify(r)},[4,XA(function(){return fetch(e,i)})];case 1:return(o=t.sent()).ok?[4,o.json()]:[3,3];case 2:return[2,{fid:(s=t.sent()).fid||u,registrationStatus:2,refreshToken:s.refreshToken,authToken:KA(s.authToken)}];case 3:return[4,GA("Create Installation",o)];case 4:throw t.sent()}})})}(r)];case 1:return e=t.sent(),[2,pk(r,e)];case 2:return WA(n=t.sent())&&409===n.serverCode?[4,dk(r)]:[3,4];case 3:return t.sent(),[3,6];case 4:return[4,pk(r,{fid:i.fid,registrationStatus:0})];case 5:t.sent(),t.label=6;case 6:throw n;case 7:return[2]}})})}(t,n)}}(i,e);return r=n.registrationPromise,n.installationEntry})];case 1:return(e=t.sent()).fid!==$A?[3,3]:(n={},[4,r]);case 2:return[2,(n.installationEntry=t.sent(),n)];case 3:return[2,{installationEntry:e,registrationPromise:r}]}})})}function gk(t){return vk(t,function(t){if(!t)throw BA.create("installation-not-found");return mk(t)})}function mk(t){return 1===t.registrationStatus&&t.registrationTime+MA<Date.now()?{fid:t.fid,registrationStatus:0}:t}function bk(u,c){return void 0===c&&(c=!1),Fs(this,void 0,void 0,function(){var a,e,n;return Us(this,function(t){switch(t.label){case 0:return[4,vk(u.appConfig,function(t){if(!_k(t))throw BA.create("not-registered");var e,n,r,i,o=t.authToken;if(c||2!==o.requestStatus||(r=o,(i=Date.now())<r.creationTime||r.creationTime+r.expiresIn<i+VA)){if(1===o.requestStatus)return a=function(r,i){return Fs(this,void 0,void 0,function(){var e,n;return Us(this,function(t){switch(t.label){case 0:return[4,wk(r.appConfig)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.authToken.requestStatus?[3,5]:[4,YA(100)];case 3:return t.sent(),[4,wk(r.appConfig)];case 4:return e=t.sent(),[3,2];case 5:return 0===(n=e.authToken).requestStatus?[2,bk(r,i)]:[2,n]}})})}(u,c),t;if(!navigator.onLine)throw BA.create("app-offline");var s=(e=t,n={requestStatus:1,requestTime:Date.now()},Ms(Ms({},e),{authToken:n}));return a=function(i,o){return Fs(this,void 0,void 0,function(){var e,n,r;return Us(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,8]),[4,function(t,u){var c=t.appConfig,h=t.platformLoggerProvider;return Fs(this,void 0,void 0,function(){var n,r,i,o,s,a;return Us(this,function(t){switch(t.label){case 0:return e=u.fid,n=HA(c)+"/"+e+"/authTokens:generate",r=QA(c,u),(i=h.getImmediate({optional:!0}))&&r.append("x-firebase-client",i.getPlatformInfoString()),o={installation:{sdkVersion:FA}},s={method:"POST",headers:r,body:JSON.stringify(o)},[4,XA(function(){return fetch(n,s)})];case 1:return(a=t.sent()).ok?[4,a.json()]:[3,3];case 2:return[2,KA(t.sent())];case 3:return[4,GA("Generate Auth Token",a)];case 4:throw t.sent()}var e})})}(i,o)];case 1:return e=t.sent(),r=Ms(Ms({},o),{authToken:e}),[4,pk(i.appConfig,r)];case 2:return t.sent(),[2,e];case 3:return!WA(n=t.sent())||401!==n.serverCode&&404!==n.serverCode?[3,5]:[4,dk(i.appConfig)];case 4:return t.sent(),[3,7];case 5:return r=Ms(Ms({},o),{authToken:{requestStatus:0}}),[4,pk(i.appConfig,r)];case 6:t.sent(),t.label=7;case 7:throw n;case 8:return[2]}})})}(u,s),s}return t})];case 1:return e=t.sent(),a?[4,a]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=e.authToken,t.label=4;case 4:return[2,n]}})})}function wk(t){return vk(t,function(t){if(!_k(t))throw BA.create("not-registered");var e=t.authToken;return 1===e.requestStatus&&e.requestTime+MA<Date.now()?Ms(Ms({},t),{authToken:{requestStatus:0}}):t})}function _k(t){return void 0!==t&&2===t.registrationStatus}function Ek(t){return BA.create("missing-app-config-values",{valueName:t})}(sk=Fl).INTERNAL.registerComponent(new Oa("installations",function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw Ek("App Configuration");if(!t.name)throw Ek("App Name");try{for(var r=js(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw Ek(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(i){return Fs(this,void 0,void 0,function(){var e,n,r;return Us(this,function(t){switch(t.label){case 0:return[4,yk(i.appConfig)];case 1:return e=t.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):bk(i).catch(console.error),[2,n.fid]}})})}(n)},getToken:function(t){return function(e,n){return void 0===n&&(n=!1),Fs(this,void 0,void 0,function(){return Us(this,function(t){switch(t.label){case 0:return[4,function(n){return Fs(this,void 0,void 0,function(){var e;return Us(this,function(t){switch(t.label){case 0:return[4,yk(n)];case 1:return(e=t.sent().registrationPromise)?[4,e]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e.appConfig)];case 1:return t.sent(),[4,bk(e,n)];case 2:return[2,t.sent().token]}})})}(n,t)},delete:function(){return function(r){return Fs(this,void 0,void 0,function(){var e,n;return Us(this,function(t){switch(t.label){case 0:return[4,vk(e=r.appConfig,function(t){if(!t||0!==t.registrationStatus)return t})];case 1:if(!(n=t.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw BA.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw BA.create("app-offline");case 3:return[4,function(s,a){return Fs(this,void 0,void 0,function(){var n,r,i,o;return Us(this,function(t){switch(t.label){case 0:return e=a.fid,n=HA(s)+"/"+e,r=QA(s,a),i={method:"DELETE",headers:r},[4,XA(function(){return fetch(n,i)})];case 1:return(o=t.sent()).ok?[3,3]:[4,GA("Delete Installation",o)];case 2:throw t.sent();case 3:return[2]}var e})})}(e,n)];case 4:return t.sent(),[4,dk(e)];case 5:t.sent(),t.label=6;case 6:return[2]}})})}(n)},onIdChange:function(t){return function(t,e){ik();var n=ZA(t),r=tk.get(n);r||(r=new Set,tk.set(n,r)),r.add(e)}(i=n.appConfig,r=t),function(){var t,e=r,n=ZA(i);(t=tk.get(n))&&(t.delete(e),0===t.size&&tk.delete(n),ok())};var r,i}}},"PUBLIC")),sk.registerVersion("@firebase/installations",LA);var Ik=((ak={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',ak["only-available-in-window"]="This method is available in a Window context.",ak["only-available-in-sw"]="This method is available in a service worker context.",ak["permission-default"]="The notification permission was not granted and dismissed instead.",ak["permission-blocked"]="The notification permission was not granted and blocked instead.",ak["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",ak["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",ak["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$errorInfo}",ak["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",ak["token-unsubscribe-failed"]="A problem occured while unsubscribing the user from FCM: {$errorInfo}",ak["token-update-failed"]="A problem occured while updating the user from FCM: {$errorInfo}",ak["token-update-no-token"]="FCM returned no token when updating the user to push.",ak["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",ak["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",ak["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",ak["invalid-vapid-key"]="The public VAPID key must be a string.",ak["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",ak),Tk=new ca("messaging","Messaging",Ik);function Sk(t){return Tk.create("missing-app-config-values",{valueName:t})}var Ck,Nk,Ak="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",kk="https://fcmregistrations.googleapis.com/v1",Ok="FCM_MSG",Pk="google.c.a.c_id";function Rk(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,qs(e))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(Nk=Ck=Ck||{}).PUSH_RECEIVED="push-received",Nk.NOTIFICATION_CLICKED="notification-clicked";var Dk="fcm_token_details_db",xk=5,Lk="fcm_token_object_Store";var Mk="firebase-messaging-database",Fk=1,Uk="firebase-messaging-store",jk=null;function Vk(){return jk=jk||RA(Mk,Fk,function(t){switch(t.oldVersion){case 0:t.createObjectStore(Uk)}})}function qk(i){return Fs(this,void 0,void 0,function(){var e,n,r;return Us(this,function(t){switch(t.label){case 0:return e=Wk(i),[4,Vk()];case 1:return[4,t.sent().transaction(Uk).objectStore(Uk).get(e)];case 2:return(n=t.sent())?[2,n]:[3,3];case 3:return[4,function(a){return Fs(this,void 0,void 0,function(){var s,e=this;return Us(this,function(t){switch(t.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(!t.sent().map(function(t){return t.name}).includes(Dk))return[2,null];t.label=2;case 2:return s=null,[4,RA(Dk,xk,function(o){return Fs(e,void 0,void 0,function(){var e,n,r,i;return Us(this,function(t){switch(t.label){case 0:return!(o.oldVersion<2)&&o.objectStoreNames.contains(Lk)?[4,(e=o.transaction.objectStore(Lk)).index("fcmSenderId").get(a)]:[2];case 1:return n=t.sent(),[4,e.clear()];case 2:if(t.sent(),!n)return[2];if(2===o.oldVersion){if(!(r=n).auth||!r.p256dh||!r.endpoint)return[2];s={token:r.fcmToken,createTime:null!==(i=r.createTime)&&void 0!==i?i:Date.now(),subscriptionOptions:{auth:r.auth,p256dh:r.p256dh,endpoint:r.endpoint,swScope:r.swScope,vapidKey:"string"==typeof r.vapidKey?r.vapidKey:Rk(r.vapidKey)}}}else 3!==o.oldVersion&&4!==o.oldVersion||(s={token:(r=n).fcmToken,createTime:r.createTime,subscriptionOptions:{auth:Rk(r.auth),p256dh:Rk(r.p256dh),endpoint:r.endpoint,swScope:r.swScope,vapidKey:Rk(r.vapidKey)}});return[2]}})})})];case 3:return t.sent().close(),[4,DA(Dk)];case 4:return t.sent(),[4,DA("fcm_vapid_details_db")];case 5:return t.sent(),[4,DA("undefined")];case 6:return t.sent(),[2,function(){if(s&&s.subscriptionOptions){var t=s.subscriptionOptions;return"number"==typeof s.createTime&&0<s.createTime&&"string"==typeof s.token&&0<s.token.length&&"string"==typeof t.auth&&0<t.auth.length&&"string"==typeof t.p256dh&&0<t.p256dh.length&&"string"==typeof t.endpoint&&0<t.endpoint.length&&"string"==typeof t.swScope&&0<t.swScope.length&&"string"==typeof t.vapidKey&&0<t.vapidKey.length}}()?s:null]}})})}(i.appConfig.senderId)];case 4:return(r=t.sent())?[4,Bk(i,r)]:[3,6];case 5:return t.sent(),[2,r];case 6:return[2]}})})}function Bk(i,o){return Fs(this,void 0,void 0,function(){var e,n,r;return Us(this,function(t){switch(t.label){case 0:return e=Wk(i),[4,Vk()];case 1:return n=t.sent(),[4,(r=n.transaction(Uk,"readwrite")).objectStore(Uk).put(o,e)];case 2:return t.sent(),[4,r.complete];case 3:return t.sent(),[2,o]}})})}function Wk(t){return t.appConfig.appId}function Hk(s,a){return Fs(this,void 0,void 0,function(){var e,n,r,i,o;return Us(this,function(t){switch(t.label){case 0:return[4,Gk(s)];case 1:e=t.sent(),n={method:"DELETE",headers:e},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(Kk(s.appConfig)+"/"+a,n)];case 3:return[4,t.sent().json()];case 4:if((r=t.sent()).error)throw i=r.error.message,Tk.create("token-unsubscribe-failed",{errorInfo:i});return[3,6];case 5:throw o=t.sent(),Tk.create("token-unsubscribe-failed",{errorInfo:o});case 6:return[2]}})})}function Kk(t){var e=t.projectId;return kk+"/projects/"+e+"/registrations"}function Gk(t){var n=t.appConfig,r=t.installations;return Fs(this,void 0,void 0,function(){var e;return Us(this,function(t){switch(t.label){case 0:return[4,r.getToken()];case 1:return e=t.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}})})}function zk(t){var e=t.p256dh,n=t.auth,r=t.endpoint,i=t.vapidKey,o={web:{endpoint:r,auth:n,p256dh:e}};return i!==Ak&&(o.web.applicationPubKey=i),o}function Qk(h,l,f){return Fs(this,void 0,void 0,function(){var s,a,u,c;return Us(this,function(t){switch(t.label){case 0:if("granted"!==Notification.permission)throw Tk.create("permission-blocked");return[4,function(n,i){return Fs(this,void 0,void 0,function(){var e;return Us(this,function(t){switch(t.label){case 0:return[4,n.pushManager.getSubscription()];case 1:return(e=t.sent())?[2,e]:[2,n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(){for(var t=(i+"=".repeat((4-i.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),e=atob(t),n=new Uint8Array(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}()})]}})})}(l,f)];case 1:return s=t.sent(),[4,qk(h)];case 2:return a=t.sent(),u={vapidKey:f,swScope:l.scope,endpoint:s.endpoint,auth:Rk(s.getKey("auth")),p256dh:Rk(s.getKey("p256dh"))},a?[3,3]:[2,Yk(h,u)];case 3:if(e=a.subscriptionOptions,n=u.vapidKey===e.vapidKey,r=u.endpoint===e.endpoint,i=u.auth===e.auth,o=u.p256dh===e.p256dh,n&&r&&i&&o)return[3,8];t.label=4;case 4:return t.trys.push([4,6,,7]),[4,Hk(h,a.token)];case 5:return t.sent(),[3,7];case 6:return c=t.sent(),console.warn(c),[3,7];case 7:return[2,Yk(h,u)];case 8:return Date.now()>=a.createTime+6048e5?[2,function(i,o,s){return Fs(this,void 0,void 0,function(){var e,n,r;return Us(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,5]),[4,function(a,u){return Fs(this,void 0,void 0,function(){var e,n,r,i,o,s;return Us(this,function(t){switch(t.label){case 0:return[4,Gk(a)];case 1:e=t.sent(),n=zk(u.subscriptionOptions),r={method:"PATCH",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(Kk(a.appConfig)+"/"+u.token,r)];case 3:return[4,t.sent().json()];case 4:return i=t.sent(),[3,6];case 5:throw o=t.sent(),Tk.create("token-update-failed",{errorInfo:o});case 6:if(i.error)throw s=i.error.message,Tk.create("token-update-failed",{errorInfo:s});if(!i.token)throw Tk.create("token-update-no-token");return[2,i.token]}})})}(o,i)];case 1:return e=t.sent(),n=Ms(Ms({},i),{token:e,createTime:Date.now()}),[4,Bk(o,n)];case 2:return t.sent(),[2,e];case 3:return r=t.sent(),[4,Xk(o,s)];case 4:throw t.sent(),r;case 5:return[2]}})})}({token:a.token,createTime:Date.now(),subscriptionOptions:u},h,l)]:[2,a.token];case 9:return[2]}var e,n,r,i,o})})}function Xk(r,i){return Fs(this,void 0,void 0,function(){var e,n;return Us(this,function(t){switch(t.label){case 0:return[4,qk(r)];case 1:return(e=t.sent())?[4,Hk(r,e.token)]:[3,4];case 2:return t.sent(),[4,function(i){return Fs(this,void 0,void 0,function(){var e,n,r;return Us(this,function(t){switch(t.label){case 0:return e=Wk(i),[4,Vk()];case 1:return n=t.sent(),[4,(r=n.transaction(Uk,"readwrite")).objectStore(Uk).delete(e)];case 2:return t.sent(),[4,r.complete];case 3:return t.sent(),[2]}})})}(r)];case 3:t.sent(),t.label=4;case 4:return[4,i.pushManager.getSubscription()];case 5:return(n=t.sent())?[2,n.unsubscribe()]:[2,!0]}})})}function Yk(r,i){return Fs(this,void 0,void 0,function(){var e,n;return Us(this,function(t){switch(t.label){case 0:return[4,function(a,u){return Fs(this,void 0,void 0,function(){var e,n,r,i,o,s;return Us(this,function(t){switch(t.label){case 0:return[4,Gk(a)];case 1:e=t.sent(),n=zk(u),r={method:"POST",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(Kk(a.appConfig),r)];case 3:return[4,t.sent().json()];case 4:return i=t.sent(),[3,6];case 5:throw o=t.sent(),Tk.create("token-subscribe-failed",{errorInfo:o});case 6:if(i.error)throw s=i.error.message,Tk.create("token-subscribe-failed",{errorInfo:s});if(!i.token)throw Tk.create("token-subscribe-no-token");return[2,i.token]}})})}(r,i)];case 1:return e=t.sent(),n={token:e,createTime:Date.now(),subscriptionOptions:i},[4,Bk(r,n)];case 2:return t.sent(),[2,n.token]}})})}function Jk(t){return"object"==typeof t&&t&&Pk in t}var $k=(Object.defineProperty(Zk.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),Zk.prototype.getToken=function(){return Fs(this,void 0,void 0,function(){var e;return Us(this,function(t){switch(t.label){case 0:return this.vapidKey||(this.vapidKey=Ak),[4,this.getServiceWorkerRegistration()];case 1:return e=t.sent(),"default"!==Notification.permission?[3,3]:[4,Notification.requestPermission()];case 2:t.sent(),t.label=3;case 3:if("granted"!==Notification.permission)throw Tk.create("permission-blocked");return[2,Qk(this.firebaseDependencies,e,this.vapidKey)]}})})},Zk.prototype.deleteToken=function(){return Fs(this,void 0,void 0,function(){var e;return Us(this,function(t){switch(t.label){case 0:return[4,this.getServiceWorkerRegistration()];case 1:return e=t.sent(),[2,Xk(this.firebaseDependencies,e)]}})})},Zk.prototype.requestPermission=function(){return Fs(this,void 0,void 0,function(){var e;return Us(this,function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?Tk.create("permission-blocked"):Tk.create("permission-default")}})})},Zk.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw Tk.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw Tk.create("invalid-vapid-key");this.vapidKey=t},Zk.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw Tk.create("invalid-sw-registration");if(this.swRegistration)throw Tk.create("use-sw-after-get-token");this.swRegistration=t},Zk.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},Zk.prototype.setBackgroundMessageHandler=function(){throw Tk.create("only-available-in-sw")},Zk.prototype.onTokenRefresh=function(){return function(){}},Zk.prototype.getServiceWorkerRegistration=function(){return Fs(this,void 0,void 0,function(){var e,n;return Us(this,function(t){switch(t.label){case 0:if(this.swRegistration)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),e=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 2:return e.swRegistration=t.sent(),this.swRegistration.update().catch(function(){}),[3,4];case 3:throw n=t.sent(),Tk.create("failed-service-worker-registration",{browserErrorMessage:n.message});case 4:return[2,this.swRegistration]}})})},Zk.prototype.messageEventListener=function(o){var s;return Fs(this,void 0,void 0,function(){var e,n,r,i;return Us(this,function(t){switch(t.label){case 0:return null!==(s=o.data)&&void 0!==s&&s.firebaseMessaging?(e=o.data.firebaseMessaging,n=e.type,r=e.payload,this.onMessageCallback&&n===Ck.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(r):this.onMessageCallback.next(r)),Jk(i=r.data)&&"1"===i["google.c.a.e"]?[4,this.logEvent(n,i)]:[3,2]):[2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},Zk.prototype.logEvent=function(n,r){return Fs(this,void 0,void 0,function(){var e;return Us(this,function(t){switch(t.label){case 0:return e=function(){switch(n){case Ck.NOTIFICATION_CLICKED:return"notification_open";case Ck.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return t.sent().logEvent(e,{message_id:r[Pk],message_name:r["google.c.a.c_l"],message_time:r["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},Zk);function Zk(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(t){return e.messageEventListener(t)})}var tO=(Object.defineProperty(eO.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),eO.prototype.setBackgroundMessageHandler=function(t){if(!t||"function"!=typeof t)throw Tk.create("invalid-bg-handler");this.bgMessageHandler=t},eO.prototype.getToken=function(){var n,r;return Fs(this,void 0,void 0,function(){var e;return Us(this,function(t){switch(t.label){case 0:return this.vapidKey?[3,2]:[4,qk(this.firebaseDependencies)];case 1:e=t.sent(),this.vapidKey=null!==(r=null===(n=null==e?void 0:e.subscriptionOptions)||void 0===n?void 0:n.vapidKey)&&void 0!==r?r:Ak,t.label=2;case 2:return[2,Qk(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},eO.prototype.deleteToken=function(){return Xk(this.firebaseDependencies,self.registration)},eO.prototype.requestPermission=function(){throw Tk.create("only-available-in-window")},eO.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw Tk.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw Tk.create("invalid-vapid-key");this.vapidKey=t},eO.prototype.useServiceWorker=function(){throw Tk.create("only-available-in-window")},eO.prototype.onMessage=function(){throw Tk.create("only-available-in-window")},eO.prototype.onTokenRefresh=function(){throw Tk.create("only-available-in-window")},eO.prototype.onPush=function(c){return Fs(this,void 0,void 0,function(){var s,a,u;return Us(this,function(t){switch(t.label){case 0:return(s=function(){var t=c.data;if(!t)return null;try{return t.json()}catch(t){return null}}())?[4,nO()]:[2];case 1:return(a=t.sent()).some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")})?[2,function(t){var e,n,r=rO(Ck.PUSH_RECEIVED,s);try{for(var i=js(t),o=i.next();!o.done;o=i.next())o.value.postMessage(r)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}(a)]:(u=function(t){var e;if(t&&"object"==typeof t.notification){var n=Ms({},t.notification);return n.data=Ms(Ms({},t.notification.data),((e={})[Ok]=t,e)),n}}(s))?[4,(r=null!==(n=(e=u).title)&&void 0!==n?n:"",i=e.actions,o=Notification.maxActions,i&&o&&i.length>o&&console.warn("This browser only supports "+o+" actions. The remaining actions will not be displayed."),self.registration.showNotification(r,e))]:[3,3];case 2:return t.sent(),[3,5];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(s)]:[3,5];case 4:t.sent(),t.label=5;case 5:return[2]}var e,n,r,i,o})})},eO.prototype.onSubChange=function(n){var r,i;return Fs(this,void 0,void 0,function(){var e;return Us(this,function(t){switch(t.label){case 0:return n.newSubscription?[3,2]:[4,Xk(this.firebaseDependencies,self.registration)];case 1:return t.sent(),[2];case 2:return[4,qk(this.firebaseDependencies)];case 3:return e=t.sent(),[4,Xk(this.firebaseDependencies,self.registration)];case 4:return t.sent(),[4,Qk(this.firebaseDependencies,self.registration,null!==(i=null===(r=null==e?void 0:e.subscriptionOptions)||void 0===r?void 0:r.vapidKey)&&void 0!==i?i:Ak)];case 5:return t.sent(),[2]}})})},eO.prototype.onNotificationClick=function(u){var c,h;return Fs(this,void 0,void 0,function(){var i,o,s,a;return Us(this,function(t){switch(t.label){case 0:return!(i=null===(h=null===(c=u.notification)||void 0===c?void 0:c.data)||void 0===h?void 0:h[Ok])||u.action?[2]:(u.stopImmediatePropagation(),u.notification.close(),(o=(null!==(n=null===(e=i.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=i.notification)||void 0===r?void 0:r.click_action)||(Jk(i.data)?self.location.origin:null))?[4,function(u){return Fs(this,void 0,void 0,function(){var e,n,r,i,o,s,a;return Us(this,function(t){switch(t.label){case 0:return e=new URL(u,self.location.href),[4,nO()];case 1:n=t.sent();try{for(r=js(n),i=r.next();!i.done;i=r.next())if(o=i.value,new URL(o.url,self.location.href).host===e.host)return[2,o]}catch(t){s={error:t}}finally{try{i&&!i.done&&(a=r.return)&&a.call(r)}finally{if(s)throw s.error}}return[2,null]}})})}(o)]:[2]);case 1:return(s=t.sent())?[3,4]:[4,self.clients.openWindow(o)];case 2:return s=t.sent(),[4,new Promise(function(t){setTimeout(t,3e3)})];case 3:return t.sent(),[3,6];case 4:return[4,s.focus()];case 5:s=t.sent(),t.label=6;case 6:return s?(a=rO(Ck.NOTIFICATION_CLICKED,i),[2,s.postMessage(a)]):[2]}var e,n,r})})},eO);function eO(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(t){t.waitUntil(e.onPush(t))}),self.addEventListener("pushsubscriptionchange",function(t){t.waitUntil(e.onSubChange(t))}),self.addEventListener("notificationclick",function(t){t.waitUntil(e.onNotificationClick(t))})}function nO(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function rO(t,e){return{firebaseMessaging:{type:t,payload:e}}}var iO={isSupported:oO};function oO(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}Fl.INTERNAL.registerComponent(new Oa("messaging",function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw Sk("App Configuration Object");if(!t.name)throw Sk("App Name");var r=t.options;try{for(var i=js(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw Sk(s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!oO())throw Tk.create("unsupported-browser");return new(self&&"ServiceWorkerGlobalScope"in self?tO:$k)(n)},"PUBLIC").setServiceProps(iO));var sO="firebasestorage.googleapis.com",aO=(uO.prototype.codeProp=function(){return this.code},uO.prototype.codeEquals=function(t){return hO(t)===this.codeProp()},uO.prototype.serverResponseProp=function(){return this.serverResponse_},uO.prototype.setServerResponseProp=function(t){this.serverResponse_=t},Object.defineProperty(uO.prototype,"name",{get:function(){return this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(uO.prototype,"code",{get:function(){return this.code_},enumerable:!1,configurable:!0}),Object.defineProperty(uO.prototype,"message",{get:function(){return this.serverResponse_?this.message_+"\n"+this.serverResponse_:this.message_},enumerable:!1,configurable:!0}),Object.defineProperty(uO.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!1,configurable:!0}),uO);function uO(t,e){this.code_=hO(t),this.message_="Firebase Storage: "+e,this.serverResponse_=null,this.name_="FirebaseError"}var cO={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"};function hO(t){return"storage/"+t}function lO(){return new aO(cO.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function fO(){return new aO(cO.CANCELED,"User canceled the upload/download.")}function pO(){return new aO(cO.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function dO(t,e,n){return new aO(cO.INVALID_ARGUMENT,"Invalid argument in `"+e+"` at index "+t+": "+n)}function vO(){return new aO(cO.APP_DELETED,"The Firebase app was deleted.")}function yO(t,e){return new aO(cO.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function gO(t){throw new aO(cO.INTERNAL_ERROR,"Internal error: "+t)}var mO={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function bO(t){switch(t){case mO.RAW:case mO.BASE64:case mO.BASE64URL:case mO.DATA_URL:return;default:throw"Expected one of the event types: ["+mO.RAW+", "+mO.BASE64+", "+mO.BASE64URL+", "+mO.DATA_URL+"]."}}function wO(t,e){this.data=t,this.contentType=e||null}function _O(t,e){switch(t){case mO.RAW:return new wO(EO(e));case mO.BASE64:case mO.BASE64URL:return new wO(IO(t,e));case mO.DATA_URL:return new wO((n=new TO(e)).base64?IO(mO.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw yO(mO.DATA_URL,"Malformed data URL.")}return EO(e)}(n.rest),new TO(e).contentType)}var n;throw lO()}function EO(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function IO(t,e){switch(t){case mO.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw yO(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case mO.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw yO(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(e){throw yO(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}function TO(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw yO(mO.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r=e[1]||null;null!=r&&(this.base64=(n=";base64",r.length>=n.length&&r.substring(r.length-n.length)===n),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}var SO,CO,NO={STATE_CHANGED:"state_changed"},AO="running",kO="pausing",OO="paused",PO="success",RO="canceling",DO="canceled",xO="error",LO={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function MO(t){switch(t){case AO:case kO:case RO:return LO.RUNNING;case OO:return LO.PAUSED;case PO:return LO.SUCCESS;case DO:return LO.CANCELED;case xO:default:return LO.ERROR}}function FO(t){return null!=t}function UO(t){return void 0!==t}function jO(t){return"function"==typeof t}function VO(t){return"object"==typeof t}function qO(t){return"string"==typeof t||t instanceof String}function BO(t){return"number"==typeof t||t instanceof Number}function WO(t){return HO()&&t instanceof Blob}function HO(){return"undefined"!=typeof Blob}(CO=SO=SO||{})[CO.NO_ERROR=0]="NO_ERROR",CO[CO.NETWORK_ERROR=1]="NETWORK_ERROR",CO[CO.ABORT=2]="ABORT";var KO=(GO.prototype.send=function(t,e,n,r){if(this.sent_)throw gO("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),FO(r))for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return FO(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},GO.prototype.getErrorCode=function(){if(!this.sent_)throw gO("cannot .getErrorCode() before sending");return this.errorCode_},GO.prototype.getStatus=function(){if(!this.sent_)throw gO("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},GO.prototype.getResponseText=function(){if(!this.sent_)throw gO("cannot .getResponseText() before sending");return this.xhr_.responseText},GO.prototype.abort=function(){this.xhr_.abort()},GO.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},GO.prototype.addUploadProgressListener=function(t){FO(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},GO.prototype.removeUploadProgressListener=function(t){FO(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},GO);function GO(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=SO.NO_ERROR,this.sendPromise_=new Promise(function(t){e.xhr_.addEventListener("abort",function(){e.errorCode_=SO.ABORT,t(e)}),e.xhr_.addEventListener("error",function(){e.errorCode_=SO.NETWORK_ERROR,t(e)}),e.xhr_.addEventListener("load",function(){t(e)})})}var zO=(QO.prototype.createXhrIo=function(){return new KO},QO);function QO(){}var XO=(YO.prototype.size=function(){return this.size_},YO.prototype.type=function(){return this.type_},YO.prototype.slice=function(t,e){if(WO(this.data_)){var n=(i=t,o=e,(r=this.data_).webkitSlice?r.webkitSlice(i,o):r.mozSlice?r.mozSlice(i,o):r.slice?r.slice(i,o):null);return null===n?null:new YO(n)}var r,i,o;return new YO(new Uint8Array(this.data_.buffer,t,e-t),!0)},YO.getBlob=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(HO()){var n=t.map(function(t){return t instanceof YO?t.data_:t});return new YO(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(HO())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}.apply(null,n))}var r=t.map(function(t){return qO(t)?_O(mO.RAW,t).data:t.data_}),i=0;r.forEach(function(t){i+=t.byteLength});var o=new Uint8Array(i),s=0;return r.forEach(function(t){for(var e=0;e<t.length;e++)o[s++]=t[e]}),new YO(o,!0)},YO.prototype.uploadData=function(){return this.data_},YO);function YO(t,e){var n=0,r="";WO(t)?(n=(this.data_=t).size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}var JO=(Object.defineProperty($O.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty($O.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),$O.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},$O.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},$O.makeFromBucketSpec=function(t){var e;try{e=$O.makeFromUrl(t)}catch(e){return new $O(t,"")}if(""===e.path)return e;throw new aO(cO.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")},$O.makeFromUrl=function(t){var e=null,n="([A-Za-z0-9.\\-_]+)",r=new RegExp("^gs://"+n+"(/(.*))?$","i");function i(t){t.path_=decodeURIComponent(t.path)}for(var o=sO.replace(/[.]/g,"\\."),s=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+o+"/v[A-Za-z0-9_]+/b/"+n+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+n+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:i}],a=0;a<s.length;a++){var u=s[a],c=u.regex.exec(t);if(c){e=new $O(c[u.indices.bucket],c[u.indices.path]||"");u.postModify(e);break}}if(null==e)throw new aO(cO.INVALID_URL,"Invalid URL '"+t+"'.");return e},$O);function $O(t,e){this.bucket=t,this.path_=e}function ZO(t){var e,n;try{e=JSON.parse(t)}catch(t){return null}return VO(n=e)&&!Array.isArray(n)?e:null}function tP(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function eP(t){return"https://"+sO+"/v0"+t}function nP(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"="+e(t[r]))+"&");return n.slice(0,-1)}function rP(t,e){return e}function iP(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||rP}var oP=null;function sP(t,e,n){var r=ZO(e);return null===r?null:function(t,e,n){for(var r,i,o={type:"file"},s=n.length,a=0;a<s;a++){var u=n[a];o[u.local]=u.xform(o,e[u.server])}return r=o,i=t,Object.defineProperty(r,"ref",{get:function(){var t=r.bucket,e=r.fullPath,n=new JO(t,e);return i.makeStorageReference(n)}}),o}(t,r,n)}function aP(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function uP(t){if(!VO(t)||!t)throw"Expected Metadata object.";for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];if("customMetadata"===e){if(!VO(n))throw"Expected object for 'customMetadata' mapping."}else if(VO(r=n)&&null!==r)throw"Mapping for '"+e+"' cannot be an object."}var r}var cP="maxResults",hP="pageToken",lP="prefixes",fP="items";function pP(t){if(!VO(t)||!t)throw"Expected ListOptions object.";for(var e in t)if(e===cP){if(!BO(n=t[cP])||!Number.isInteger(n)||t[cP]<=0)throw"Expected maxResults to be a positive number.";if(1e3<t[cP])throw"Expected maxResults to be less than or equal to 1000."}else{if(e!==hP)throw"Unknown option: "+e;if(t[hP]&&!qO(t[hP]))throw"Expected pageToken to be string."}var n}function dP(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}function vP(t){if(!t)throw lO()}function yP(r,i){return function(t,e){var n=sP(r,e,i);return vP(null!==n),n}}function gP(s,a){return function(t,e){var n,r,i,o=(n=s,r=a,null===(i=ZO(e))?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[lP])for(var i=0,o=n[lP];i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t.makeStorageReference(new JO(e,s));r.prefixes.push(a)}if(n[fP])for(var u=0,c=n[fP];u<c.length;u++){var h=c[u],a=t.makeStorageReference(new JO(e,h.name));r.items.push(a)}return r}(n,r,i));return vP(null!==o),o}}function mP(o){return function(t,e){var n,r,i;return(n=401===t.getStatus()?new aO(cO.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(i=o.bucket,new aO(cO.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(r=o.path,new aO(cO.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")):e).setServerResponseProp(e.serverResponseProp()),n}}function bP(i){var o=mP(i);return function(t,e){var n,r=o(t,e);return 404===t.getStatus()&&(n=i.path,r=new aO(cO.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")),r.setServerResponseProp(e.serverResponseProp()),r}}function wP(t,e,n){var r=eP(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new dP(r,"GET",yP(t,n),i);return o.errorHandler=bP(e),o}function _P(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=e&&e.type()||"application/octet-stream"),r}function EP(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}function IP(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){vP(!1)}return vP(!!n&&-1!==(e||["active"]).indexOf(n)),n}function TP(t,e,n){var r;jO(t)||FO(e)||FO(n)?(this.next=t,this.error=e||null,this.complete=n||null):(r=t,this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null)}function SP(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o}function CP(t,e,n){for(var r,i,o,s=e.length,a=e.length,u=0;u<e.length;u++)if(e[u].optional){s=u;break}if(!(s<=n.length&&n.length<=a))throw r=n.length,o=s===a?1===(i=s)?"argument":"arguments":(i="between "+s+" and "+a,"arguments"),new aO(cO.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+t+"`: Expected "+i+" "+o+", received "+r+".");for(u=0;u<n.length;u++)try{e[u].validator(n[u])}catch(e){throw e instanceof Error?dO(u,t,e.message):dO(u,t,e)}}function NP(e,t){var n=this;this.validator=function(t){n.optional&&!UO(t)||e(t)},this.optional=!!t}function AP(t,e){function n(t){if(!qO(t))throw"Expected string."}var r,i,o=t?(r=n,i=t,function(t){r(t),i(t)}):n;return new NP(o,e)}function kP(t){return new NP(uP,t)}function OP(){return new NP(function(t){if(!(BO(t)&&0<=t))throw"Expected a number 0 or greater."})}function PP(e,t){return new NP(function(t){if(!(null===t||FO(t)&&t instanceof Object))throw"Expected an Object.";null!=e&&e(t)},t)}function RP(t){return new NP(function(t){if(null!==t&&!jO(t))throw"Expected a Function."},t)}function DP(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Promise.resolve().then(function(){return n.apply(void 0,t)})}}var xP=(LP.prototype.makeProgressCallback_=function(){var e=this,n=this.transferred_;return function(t){return e.updateProgress_(n+t)}},LP.prototype.shouldDoResumable_=function(t){return 262144<t.size()},LP.prototype.start_=function(){this.state_===AO&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},LP.prototype.resolveToken_=function(e){var n=this;this.service_.getAuthToken().then(function(t){switch(n.state_){case AO:e(t);break;case RO:n.transition_(DO);break;case kO:n.transition_(OO)}})},LP.prototype.createResumable_=function(){var y=this;this.resolveToken_(function(t){var e,n,r,i,o,s,a,u,c,h,l,f,p,d=(e=y.service_,n=y.location_,r=y.mappings_,i=y.blob_,o=y.metadata_,s=n.bucketOnlyServerUrl(),a=_P(n,i,o),u={name:a.fullPath},c=eP(s),h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":i.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},l=aP(a,r),f=e.maxUploadRetryTime,(p=new dP(c,"POST",function(t){var e;IP(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){vP(!1)}return vP(qO(e)),e},f)).urlParams=u,p.headers=h,p.body=l,p.errorHandler=mP(n),p),v=y.service_.makeRequest(d,t);(y.request_=v).getPromise().then(function(t){y.request_=null,y.uploadUrl_=t,y.needToFetchStatus_=!1,y.completeTransitions_()},y.errorHandler_)})},LP.prototype.fetchStatus_=function(){var c=this,h=this.uploadUrl_;this.resolveToken_(function(t){var e,n,r,i,o,s,a=(e=c.service_,n=c.location_,r=h,i=c.blob_,o=e.maxUploadRetryTime,(s=new dP(r,"POST",function(t){var e=IP(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){vP(!1)}n||vP(!1);var r=Number(n);return vP(!isNaN(r)),new EP(r,i.size(),"final"===e)},o)).headers={"X-Goog-Upload-Command":"query"},s.errorHandler=mP(n),s),u=c.service_.makeRequest(a,t);(c.request_=u).getPromise().then(function(t){t=t,c.request_=null,c.updateProgress_(t.current),c.needToFetchStatus_=!1,t.finalized&&(c.needToFetchMetadata_=!0),c.completeTransitions_()},c.errorHandler_)})},LP.prototype.continueUpload_=function(){var r=this,i=262144*this.chunkMultiplier_,o=new EP(this.transferred_,this.blob_.size()),s=this.uploadUrl_;this.resolveToken_(function(t){var e;try{e=function(t,s,e,a,n,u,r,i){var c=new EP(0,0);if(r?(c.current=r.current,c.total=r.total):(c.current=0,c.total=a.size()),a.size()!==c.total)throw new aO(cO.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var o=c.total-c.current,h=o;0<n&&(h=Math.min(h,n));var l=c.current,f=l+h,p={"X-Goog-Upload-Command":h===o?"upload, finalize":"upload","X-Goog-Upload-Offset":c.current},d=a.slice(l,f);if(null===d)throw pO();var v=s.maxUploadRetryTime,y=new dP(e,"POST",function(t,e){var n=IP(t,["active","final"]),r=c.current+h,i=a.size(),o="final"===n?yP(s,u)(t,e):null;return new EP(r,i,"final"===n,o)},v);return y.headers=p,y.body=d.uploadData(),y.progressCallback=i||null,y.errorHandler=mP(t),y}(r.location_,r.service_,s,r.blob_,i,r.mappings_,o,r.makeProgressCallback_())}catch(t){return r.error_=t,void r.transition_(xO)}var n=r.service_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.increaseMultiplier_(),r.request_=null,r.updateProgress_(t.current),t.finalized?(r.metadata_=t.metadata,r.transition_(PO)):r.completeTransitions_()},r.errorHandler_)})},LP.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},LP.prototype.fetchMetadata_=function(){var r=this;this.resolveToken_(function(t){var e=wP(r.service_,r.location_,r.mappings_),n=r.service_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.request_=null,r.metadata_=t,r.transition_(PO)},r.metadataErrorHandler_)})},LP.prototype.oneShotUpload_=function(){var r=this;this.resolveToken_(function(t){var e=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=_P(e,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+aP(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",h="\r\n--"+a+"--",l=XO.getBlob(c,r,h);if(null===l)throw pO();var f={name:u.fullPath},p=eP(o),d=t.maxUploadRetryTime,v=new dP(p,"POST",yP(t,n),d);return v.urlParams=f,v.headers=s,v.body=l.uploadData(),v.errorHandler=mP(e),v}(r.service_,r.location_,r.mappings_,r.blob_,r.metadata_),n=r.service_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.request_=null,r.metadata_=t,r.updateProgress_(r.blob_.size()),r.transition_(PO)},r.errorHandler_)})},LP.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},LP.prototype.transition_=function(t){if(this.state_!==t)switch(t){case RO:case kO:this.state_=t,null!==this.request_&&this.request_.cancel();break;case AO:var e=this.state_===OO;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case OO:this.state_=t,this.notifyObservers_();break;case DO:this.error_=fO(),this.state_=t,this.notifyObservers_();break;case xO:case PO:this.state_=t,this.notifyObservers_()}},LP.prototype.completeTransitions_=function(){switch(this.state_){case kO:this.transition_(OO);break;case RO:this.transition_(DO);break;case AO:this.start_()}},Object.defineProperty(LP.prototype,"snapshot",{get:function(){var t=MO(this.state_);return new SP(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!1,configurable:!0}),LP.prototype.on=function(t,e,n,o){var r="Expected a function or an Object with one of `next`, `error`, `complete` properties.",i=RP(!0).validator,s=PP(null,!0).validator;function a(t){try{return void i(t)}catch(t){}try{if(s(t),!(UO(t.next)||UO(t.error)||UO(t.complete)))throw"";return}catch(t){throw r}}CP("on",[AP(function(){if(t!==NO.STATE_CHANGED)throw"Expected one of the event types: ["+NO.STATE_CHANGED+"]."}),PP(a,!0),RP(!0),RP(!0)],arguments);var u=this;function c(i){return function(t,e,n){null!==i&&CP("on",i,arguments);var r=new TP(t,e,o);return u.addObserver_(r),function(){u.removeObserver_(r)}}}var h=[PP(function(t){if(null===t)throw r;a(t)}),RP(!0),RP(!0)];return UO(e)||UO(n)||UO(o)?c(null)(e,n,o):c(h)},LP.prototype.then=function(t,e){return this.promise_.then(t,e)},LP.prototype.catch=function(t){return this.then(null,t)},LP.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},LP.prototype.removeObserver_=function(t){var e=this.observers_.indexOf(t);-1!==e&&this.observers_.splice(e,1)},LP.prototype.notifyObservers_=function(){var e=this;this.finishPromise_(),this.observers_.slice().forEach(function(t){e.notifyObserver_(t)})},LP.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(MO(this.state_)){case LO.SUCCESS:DP(this.resolve_.bind(null,this.snapshot))();break;case LO.CANCELED:case LO.ERROR:DP(this.reject_.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},LP.prototype.notifyObserver_=function(t){switch(MO(this.state_)){case LO.RUNNING:case LO.PAUSED:t.next&&DP(t.next.bind(t,this.snapshot))();break;case LO.SUCCESS:t.complete&&DP(t.complete.bind(t))();break;case LO.CANCELED:case LO.ERROR:t.error&&DP(t.error.bind(t,this.error_))();break;default:t.error&&DP(t.error.bind(t,this.error_))()}},LP.prototype.resume=function(){CP("resume",[],arguments);var t=this.state_===OO||this.state_===kO;return t&&this.transition_(AO),t},LP.prototype.pause=function(){CP("pause",[],arguments);var t=this.state_===AO;return t&&this.transition_(kO),t},LP.prototype.cancel=function(){CP("cancel",[],arguments);var t=this.state_===AO||this.state_===kO;return t&&this.transition_(RO),t},LP);function LP(t,e,n,r,i,o){var s=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.service_=e,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=AO,this.errorHandler_=function(t){s.request_=null,s.chunkMultiplier_=1,t.codeEquals(cO.CANCELED)?(s.needToFetchStatus_=!0,s.completeTransitions_()):(s.error_=t,s.transition_(xO))},this.metadataErrorHandler_=function(t){s.request_=null,t.codeEquals(cO.CANCELED)?s.completeTransitions_():(s.error_=t,s.transition_(xO))},this.promise_=new Promise(function(t,e){s.resolve_=t,s.reject_=e,s.start_()}),this.promise_.then(null,function(){})}var MP=(FP.prototype.toString=function(){return CP("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},FP.prototype.newRef=function(t,e){return new FP(t,e)},FP.prototype.mappings=function(){if(oP)return oP;var t=[];t.push(new iP("bucket")),t.push(new iP("generation")),t.push(new iP("metageneration")),t.push(new iP("name","fullPath",!0));var e=new iP("name");e.xform=function(t,e){return!qO(n=e)||n.length<2?n:tP(n);var n},t.push(e);var n=new iP("size");return n.xform=function(t,e){return FO(e)?Number(e):e},t.push(n),t.push(new iP("timeCreated")),t.push(new iP("updated")),t.push(new iP("md5Hash",null,!0)),t.push(new iP("cacheControl",null,!0)),t.push(new iP("contentDisposition",null,!0)),t.push(new iP("contentEncoding",null,!0)),t.push(new iP("contentLanguage",null,!0)),t.push(new iP("contentType",null,!0)),t.push(new iP("metadata","customMetadata",!0)),oP=t},FP.prototype.child=function(t){CP("child",[AP()],arguments);var e,n,r=(e=this.location.path,n=t.split("/").filter(function(t){return 0<t.length}).join("/"),0===e.length?n:e+"/"+n),i=new JO(this.location.bucket,r);return this.newRef(this.service,i)},Object.defineProperty(FP.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this.location.path);if(null===t)return null;var e=new JO(this.location.bucket,t);return this.newRef(this.service,e)},enumerable:!1,configurable:!0}),Object.defineProperty(FP.prototype,"root",{get:function(){var t=new JO(this.location.bucket,"");return this.newRef(this.service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(FP.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(FP.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!1,configurable:!0}),Object.defineProperty(FP.prototype,"name",{get:function(){return tP(this.location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(FP.prototype,"storage",{get:function(){return this.service},enumerable:!1,configurable:!0}),FP.prototype.put=function(t,e){return void 0===e&&(e=null),CP("put",[new NP(function(t){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||HO()&&t instanceof Blob))throw"Expected Blob or File."}),kP(!0)],arguments),this.throwIfRoot_("put"),new xP(this,this.service,this.location,this.mappings(),new XO(t),e)},FP.prototype.putString=function(t,e,n){void 0===e&&(e=mO.RAW),CP("putString",[AP(),AP(bO,!0),kP(!0)],arguments),this.throwIfRoot_("putString");var r=_O(e,t),i=Object.assign({},n);return!FO(i.contentType)&&FO(r.contentType)&&(i.contentType=r.contentType),new xP(this,this.service,this.location,this.mappings(),new XO(r.data,!0),i)},FP.prototype.delete=function(){var a=this;return CP("delete",[],arguments),this.throwIfRoot_("delete"),this.service.getAuthToken().then(function(t){var e,n,r,i,o,s=(e=a.service,r=eP((n=a.location).fullServerUrl()),i=e.maxOperationRetryTime,(o=new dP(r,"DELETE",function(t,e){},i)).successCodes=[200,204],o.errorHandler=bP(n),o);return a.service.makeRequest(s,t).getPromise()})},FP.prototype.listAll=function(){CP("listAll",[],arguments);var t={prefixes:[],items:[]};return this.listAllHelper(t).then(function(){return t})},FP.prototype.listAllHelper=function(o,s){return Fs(this,void 0,void 0,function(){var e,n,r,i;return Us(this,function(t){switch(t.label){case 0:return e={pageToken:s},[4,this.list(e)];case 1:return n=t.sent(),(r=o.prefixes).push.apply(r,n.prefixes),(i=o.items).push.apply(i,n.items),null==n.nextPageToken?[3,3]:[4,this.listAllHelper(o,n.nextPageToken)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},FP.prototype.list=function(r){CP("list",[new NP(pP,!0)],arguments);var i=this;return this.service.getAuthToken().then(function(t){var e=r||{},n=function(t,e,n,r){var i={};e.isRoot?i.prefix="":i.prefix=e.path+"/",0<"/".length&&(i.delimiter="/"),n&&(i.pageToken=n),r&&(i.maxResults=r);var o=eP(e.bucketOnlyServerUrl()),s=t.maxOperationRetryTime,a=new dP(o,"GET",gP(t,e.bucket),s);return a.urlParams=i,a.errorHandler=mP(e),a}(i.service,i.location,e.pageToken,e.maxResults);return i.service.makeRequest(n,t).getPromise()})},FP.prototype.getMetadata=function(){var n=this;return CP("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.service.getAuthToken().then(function(t){var e=wP(n.service,n.location,n.mappings());return n.service.makeRequest(e,t).getPromise()})},FP.prototype.updateMetadata=function(h){var l=this;return CP("updateMetadata",[kP()],arguments),this.throwIfRoot_("updateMetadata"),this.service.getAuthToken().then(function(t){var e,n,r,i,o,s,a,u,c=(e=l.service,n=l.location,r=h,i=l.mappings(),o=eP(n.fullServerUrl()),s=aP(r,i),a=e.maxOperationRetryTime,(u=new dP(o,"PATCH",yP(e,i),a)).headers={"Content-Type":"application/json; charset=utf-8"},u.body=s,u.errorHandler=bP(n),u);return l.service.makeRequest(c,t).getPromise()})},FP.prototype.getDownloadURL=function(){var h=this;return CP("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.service.getAuthToken().then(function(t){var e,n,r,i,o,s,a,u,c=(e=h.service,n=h.location,r=h.mappings(),i=eP(n.fullServerUrl()),o=e.maxOperationRetryTime,(s=new dP(i,"GET",(a=e,u=r,function(t,n){var e=sP(a,n,u);return vP(null!==e),function(r){var t=ZO(n);if(null===t)return null;if(!qO(t.downloadTokens))return null;var e=t.downloadTokens;if(0===e.length)return null;var i=encodeURIComponent;return e.split(",").map(function(t){var e=r.bucket,n=r.fullPath;return eP("/b/"+i(e)+"/o/"+i(n))+nP({alt:"media",token:t})})[0]}(e)}),o)).errorHandler=bP(n),s);return h.service.makeRequest(c,t).getPromise().then(function(t){if(null===t)throw new aO(cO.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return t})})},FP.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw new aO(cO.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")},FP);function FP(t,e){this.service=t,this.location=e instanceof JO?e:JO.makeFromUrl(e)}var UP=(jP.prototype.getPromise=function(){return this.promise_},jP.prototype.cancel=function(t){},jP);function jP(t){this.promise_=Promise.reject(t)}var VP=(qP.prototype.start_=function(){var e,n,t,r,i,o,s,a,u,c=this;function h(t,e){var n,r=c.resolve_,i=c.reject_,o=e.xhr;if(e.wasSuccessCode)try{var s=c.callback_(o,o.getResponseText());UO(s)?r(s):r()}catch(t){i(t)}else null!==o?((n=lO()).setServerResponseProp(o.getResponseText()),c.errorCallback_?i(c.errorCallback_(o,n)):i(n)):e.canceled?i(n=(c.appDelete_?vO:fO)()):i(n=new aO(cO.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))}function l(){return 2===s}function f(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a||(a=!0,n.apply(null,t))}function p(t){i=setTimeout(function(){i=null,e(d,l())},t)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];a||(t||l()||o?f.call.apply(f,Bs([null,t],e)):(r<64&&(r*=2),p(1===s?(s=2,0):1e3*(r+Math.random()))))}function v(t){u||(u=!0,a||(null!==i?(t||(s=2),clearTimeout(i),p(0)):t||(s=1)))}this.canceled_?h(0,new BP(!1,null,!0)):this.backoffId_=(e=function(o,t){var e;function s(t){var e=t.loaded,n=t.lengthComputable?t.total:-1;null!==c.progressCallback_&&c.progressCallback_(e,n)}t?o(!1,new BP(!1,null,!0)):(e=c.pool_.createXhrIo(),c.pendingXhr_=e,null!==c.progressCallback_&&e.addUploadProgressListener(s),e.send(c.url_,c.method_,c.body_,c.headers_).then(function(t){null!==c.progressCallback_&&t.removeUploadProgressListener(s),c.pendingXhr_=null;var e,n,r=(t=t).getErrorCode()===SO.NO_ERROR,i=t.getStatus();r&&!c.isRetryStatusCode_(i)?(e=-1!==c.successCodes_.indexOf(i),o(!0,new BP(e,t))):(n=t.getErrorCode()===SO.ABORT,o(!1,new BP(!1,null,n)))}))},n=h,t=this.timeout_,i=null,u=a=o=!(r=1),p(s=0),setTimeout(function(){v(o=!0)},t),v)},qP.prototype.getPromise=function(){return this.promise_},qP.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},qP.prototype.isRetryStatusCode_=function(t){var e=500<=t&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},qP);function qP(t,e,n,r,i,o,s,a,u,c,h){var l=this;this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise(function(t,e){l.resolve_=t,l.reject_=e,l.start_()})}var BP=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};var WP=(HP.extractBucket_=function(t){var e=null==t?void 0:t.storageBucket;return null==e?null:JO.makeFromBucketSpec(e)},HP.prototype.getAuthToken=function(){return Fs(this,void 0,void 0,function(){var e,n;return Us(this,function(t){switch(t.label){case 0:return(e=this.authProvider_.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:if(null!==(n=t.sent()))return[2,n.accessToken];t.label=2;case 2:return[2,null]}})})},HP.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requests_.forEach(function(t){return t.cancel()}),this.requests_.clear()},HP.prototype.makeStorageReference=function(t){return new MP(this,t)},HP.prototype.makeRequest=function(t,e){var n=this;if(this.deleted_)return new UP(vO());var r,i,o,s,a,u,c,h,l=(r=t,i=this.appId_,o=e,s=this.pool_,u=nP(r.urlParams),c=r.url+u,h=Object.assign({},r.headers),i&&(h["X-Firebase-GMPID"]=i),null!==o&&0<o.length&&(h.Authorization="Firebase "+o),a=void 0!==Fl?Fl.SDK_VERSION:"AppManager",h["X-Firebase-Storage-Version"]="webjs/"+a,new VP(c,r.method,h,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,s));return this.requests_.add(l),l.getPromise().then(function(){return n.requests_.delete(l)},function(){return n.requests_.delete(l)}),l},HP.prototype.ref=function(t){if(CP("ref",[AP(function(t){if("string"!=typeof t)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(t))throw"Expected child path but got a URL, use refFromURL instead."},!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var e=new MP(this,this.bucket_);return null!=t?e.child(t):e},HP.prototype.refFromURL=function(t){return CP("refFromURL",[AP(function(t){if("string"!=typeof t)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(t))throw"Expected full URL but got a child path, use ref instead.";try{JO.makeFromUrl(t)}catch(t){throw"Expected valid full URL but got an invalid one."}},!1)],arguments),new MP(this,t)},Object.defineProperty(HP.prototype,"maxUploadRetryTime",{get:function(){return this.maxUploadRetryTime_},enumerable:!1,configurable:!0}),HP.prototype.setMaxUploadRetryTime=function(t){CP("setMaxUploadRetryTime",[OP()],arguments),this.maxUploadRetryTime_=t},Object.defineProperty(HP.prototype,"maxOperationRetryTime",{get:function(){return this.maxOperationRetryTime_},enumerable:!1,configurable:!0}),HP.prototype.setMaxOperationRetryTime=function(t){CP("setMaxOperationRetryTime",[OP()],arguments),this.maxOperationRetryTime_=t},Object.defineProperty(HP.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),Object.defineProperty(HP.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!1,configurable:!0}),HP);function HP(t,e,n,r){var i;this.bucket_=null,this.appId_=null,this.deleted_=!1,this.app_=t,this.authProvider_=e,this.maxOperationRetryTime_=12e4,this.maxUploadRetryTime_=6e5,this.requests_=new Set,this.pool_=n,this.bucket_=null!=r?JO.makeFromBucketSpec(r):HP.extractBucket_(null===(i=this.app_)||void 0===i?void 0:i.options),this.internals_=new zP(this)}var KP,GP,zP=(QP.prototype.delete=function(){return this.service_.deleteApp(),Promise.resolve()},QP);function QP(t){this.service_=t}GP={TaskState:LO,TaskEvent:NO,StringFormat:mO,Storage:WP,Reference:MP},(KP=Fl).INTERNAL.registerComponent(new Oa("storage",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new WP(n,r,new zO,e)},"PUBLIC").setServiceProps(GP).setMultipleInstances(!0)),KP.registerVersion("@firebase/storage","0.3.41-20206244562");var XP,YP,JP,$P,ZP="0.3.10-20206244562",tR=ZP,eR="FB-PERF-TRACE-MEASURE",nR="@firebase/performance/config",rR="@firebase/performance/configexpire",iR="Performance",oR=((XP={})["trace started"]="Trace {$traceName} was started before.",XP["trace stopped"]="Trace {$traceName} is not running.",XP["no window"]="Window is not available.",XP["no app id"]="App id is not available.",XP["no project id"]="Project id is not available.",XP["no api key"]="Api key is not available.",XP["invalid cc log"]="Attempted to queue invalid cc event",XP["FB not default"]="Performance can only start when Firebase app instance is the default one.",XP["RC response not ok"]="RC response is not ok",XP["invalid attribute name"]="Attribute name {$attributeName} is invalid.",XP["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",XP["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",XP["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",XP),sR=new ca("performance",iR,oR),aR=(uR.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},uR.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},uR.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},uR.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},uR.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},uR.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},uR.prototype.requiredApisAvailable=function(){return!!(fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled)},uR.prototype.setupObserver=function(t,i){this.PerformanceObserver&&new this.PerformanceObserver(function(t){for(var e=0,n=t.getEntries();e<n.length;e++){var r=n[e];i(r)}}).observe({entryTypes:[t]})},uR.getInstance=function(){return void 0===YP&&(YP=new uR(JP)),YP},uR);function uR(t){if(!(this.window=t))throw sR.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}function cR(t,e){var n=t.length-e.length;if(n<0||1<n)throw sR.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var hR,lR,fR,pR=(dR.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw sR.create("no app id");return t},dR.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw sR.create("no project id");return t},dR.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw sR.create("no api key");return t},dR.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},dR.getInstance=function(){return void 0===$P&&($P=new dR),$P},dR);function dR(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=cR("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=cR("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}(fR=lR=lR||{})[fR.UNKNOWN=0]="UNKNOWN",fR[fR.VISIBLE=1]="VISIBLE",fR[fR.HIDDEN=2]="HIDDEN";var vR=["firebase_","google_","ga_"],yR=new RegExp("^[a-zA-Z]\\w*$");function gR(){switch(aR.getInstance().document.visibilityState){case"visible":return lR.VISIBLE;case"hidden":return lR.HIDDEN;default:return lR.UNKNOWN}}var mR=new za(iR);mR.logLevel=ja.INFO;var bR="0.0.1",wR={loggingEnabled:!0},_R="FIREBASE_INSTALLATIONS_AUTH";function ER(t){var r,e,n=function(){var t=aR.getInstance().localStorage;if(t){var e=t.getItem(rR);if(e&&Number(e)>Date.now()){var n=t.getItem(nR);if(n)try{return JSON.parse(n)}catch(t){return}}}}();return n?(TR(n),Promise.resolve()):(r=t,(e=pR.getInstance().installationsService.getToken()).then(function(t){}),e.then(function(t){var e="https://firebaseremoteconfig.googleapis.com/v1/projects/"+pR.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+pR.getInstance().getApiKey(),n=new Request(e,{method:"POST",headers:{Authorization:_R+" "+t},body:JSON.stringify({app_instance_id:r,app_instance_id_token:t,app_id:pR.getInstance().getAppId(),app_version:tR,sdk_version:bR})});return fetch(n).then(function(t){if(t.ok)return t.json();throw sR.create("RC response not ok")})}).catch(function(){mR.info(IR)}).then(TR).then(function(t){return e=t,n=aR.getInstance().localStorage,void(e&&n&&(n.setItem(nR,JSON.stringify(e)),n.setItem(rR,String(Date.now()+60*pR.getInstance().configTimeToLive*60*1e3))));var e,n},function(){}))}var IR="Could not fetch config, will use default configs";function TR(t){if(!t)return t;var e=pR.getInstance(),n=t.entries||{};return e.loggingEnabled=void 0!==n.fpr_enabled?"true"===String(n.fpr_enabled):wR.loggingEnabled,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=SR(e.tracesSamplingRate),e.logNetworkAfterSampling=SR(e.networkRequestsSamplingRate),t}function SR(t){return Math.random()<=t}var CR,NR=1;function AR(){return NR=2,CR=CR||(n=aR.getInstance().document,new Promise(function(t){var e;n&&"complete"!==n.readyState?(e=function(){"complete"===n.readyState&&(n.removeEventListener("readystatechange",e),t())},n.addEventListener("readystatechange",e)):t()}).then(function(){return(t=pR.getInstance().installationsService.getId()).then(function(t){hR=t}),t;var t}).then(ER).then(kR,kR));var n}function kR(){NR=3}var OR,PR=1e4,RR=3,DR=RR,xR=[],LR=!1;function MR(t){setTimeout(function(){if(0!==DR)return xR.length?void function(){var t=Bs(xR);xR=[];var e,i,n,r,o=t.map(function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}});e={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:pR.getInstance().logSource,log_event:o},i=t,n=e,r=pR.getInstance().getFlTransportFullUrl(),fetch(r,{method:"POST",body:JSON.stringify(n)}).then(function(t){return t.ok||mR.info("Call to Firebase backend failed."),t.json()}).then(function(t){var e=Number(t.nextRequestWaitMillis),n=PR;isNaN(e)||(n=Math.max(e,n));var r=t.logResponseDetails;Array.isArray(r)&&0<r.length&&"RETRY_REQUEST_LATER"===r[0].responseAction&&(xR=Bs(i,xR),mR.info("Retry transport request later.")),DR=RR,MR(n)}).catch(function(){xR=Bs(t,xR),DR--,mR.info("Tries left: "+DR+"."),MR(PR)})}():MR(PR)},t)}function FR(t,e){var n;(OR=OR||(n=VR,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(t){if(!t.eventTime||!t.message)throw sR.create("invalid cc log");xR=Bs(xR,[t])}({message:n.apply(void 0,t),eventTime:Date.now()})}))(t,e)}function UR(t){var e=pR.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&aR.getInstance().requiredApisAvailable()&&(t.isAuto&&gR()!==lR.VISIBLE||e.loggingEnabled&&e.logTraceAfterSampling&&(3===NR?jR(t):AR().then(function(){return jR(t)},function(){return jR(t)})))}function jR(t){hR&&setTimeout(function(){return FR(t,1)},0)}function VR(t,e){return 0===e?(n={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},r={application_info:qR(),network_request_metric:n},JSON.stringify(r)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:qR(),trace_metric:e};return JSON.stringify(r)}(t);var n,r}function qR(){return{google_app_id:pR.getInstance().getAppId(),app_instance_id:hR,web_app_info:{sdk_version:tR,page_url:aR.getInstance().getUrl(),service_worker_status:"serviceWorker"in(t=aR.getInstance().navigator)?t.serviceWorker.controller?2:3:1,visibility_state:gR(),effective_connection_type:function(){var t=aR.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0};var t}var BR=["_fp","_fcp","_fid"],WR=(HR.prototype.start=function(){if(1!==this.state)throw sR.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},HR.prototype.stop=function(){if(2!==this.state)throw sR.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),UR(this)},HR.prototype.record=function(t,e,n){if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=Ms({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}UR(this)},HR.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]&&this.putMetric(t,0),this.counters[t]+=e},HR.prototype.putMetric=function(t,e){if(n=t,r=this.name,0===n.length||100<n.length||!(r&&r.startsWith("_wt_")&&-1<BR.indexOf(n))&&n.startsWith("_"))throw sR.create("invalid custom metric name",{customMetricName:t});var n,r;this.counters[t]=e},HR.prototype.getMetric=function(t){return this.counters[t]||0},HR.prototype.putAttribute=function(t,e){var n,r=!(0===(n=t).length||40<n.length||vR.some(function(t){return n.startsWith(t)})||!n.match(yR)),i=0!==e.length&&e.length<=100;if(r&&i)this.customAttributes[t]=e;else{if(!r)throw sR.create("invalid attribute name",{attributeName:t});if(!i)throw sR.create("invalid attribute value",{attributeValue:e})}},HR.prototype.getAttribute=function(t){return this.customAttributes[t]},HR.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},HR.prototype.getAttributes=function(){return Ms({},this.customAttributes)},HR.prototype.setStartTime=function(t){this.startTimeUs=t},HR.prototype.setDuration=function(t){this.durationUs=t},HR.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},HR.createOobTrace=function(t,e,n){var r,i,o,s,a=aR.getInstance().getUrl();a&&(r=new HR("_wt_"+a,!0),i=Math.floor(1e3*aR.getInstance().getTimeOrigin()),r.setStartTime(i),t&&t[0]&&(r.setDuration(Math.floor(1e3*t[0].duration)),r.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),r.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),r.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),e&&((o=e.find(function(t){return"first-paint"===t.name}))&&o.startTime&&r.putMetric("_fp",Math.floor(1e3*o.startTime)),(s=e.find(function(t){return"first-contentful-paint"===t.name}))&&s.startTime&&r.putMetric("_fcp",Math.floor(1e3*s.startTime)),n&&r.putMetric("_fid",Math.floor(1e3*n))),UR(r))},HR.createUserTimingTrace=function(t){UR(new HR(t,!1,t))},HR);function HR(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=aR.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||eR+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}function KR(t){var e,n,r,i,o,s,a,u,c,h=t;h&&void 0!==h.responseStart&&(e=aR.getInstance().getTimeOrigin(),n=Math.floor(1e3*(h.startTime+e)),r=h.responseStart?Math.floor(1e3*(h.responseStart-h.startTime)):void 0,i=Math.floor(1e3*(h.responseEnd-h.startTime)),o={url:h.name&&h.name.split("?")[0],responsePayloadBytes:h.transferSize,startTimeUs:n,timeToResponseInitiatedUs:r,timeToResponseCompletedUs:i},(c=pR.getInstance()).instrumentationEnabled&&(s=o.url,a=c.logEndPointUrl.split("?")[0],u=c.flTransportEndpointUrl.split("?")[0],s!==a&&s!==u&&c.loggingEnabled&&c.logNetworkAfterSampling&&setTimeout(function(){return FR(o,0)},0)))}var GR=5e3;function zR(){hR&&(setTimeout(function(){return t=aR.getInstance(),n=t.getEntriesByType("navigation"),r=t.getEntriesByType("paint"),void(t.onFirstInputDelay?(e=setTimeout(function(){WR.createOobTrace(n,r),e=void 0},GR),t.onFirstInputDelay(function(t){e&&(clearTimeout(e),WR.createOobTrace(n,r,t))})):WR.createOobTrace(n,r));var e,t,n,r},0),setTimeout(function(){for(var t=aR.getInstance(),e=0,n=t.getEntriesByType("resource");e<n.length;e++)KR(n[e]);t.setupObserver("resource",KR)},0),setTimeout(function(){for(var t=aR.getInstance(),e=0,n=t.getEntriesByType("measure");e<n.length;e++)QR(n[e]);t.setupObserver("measure",QR)},0))}function QR(t){var e=t.name;e.substring(0,eR.length)!==eR&&WR.createUserTimingTrace(e)}var XR,YR=(JR.prototype.trace=function(t){return new WR(t)},Object.defineProperty(JR.prototype,"instrumentationEnabled",{get:function(){return pR.getInstance().instrumentationEnabled},set:function(t){pR.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(JR.prototype,"dataCollectionEnabled",{get:function(){return pR.getInstance().dataCollectionEnabled},set:function(t){pR.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),JR);function JR(t){this.app=t,aR.getInstance().requiredApisAvailable()?(LR||(MR(5500),LR=!0),AR().then(zR,zR)):mR.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled.")}(XR=Fl).INTERNAL.registerComponent(new Oa("performance",function(t){return function(t,e){if("[DEFAULT]"!==t.name)throw sR.create("FB not default");if("undefined"==typeof window)throw sR.create("no window");return JP=window,pR.getInstance().firebaseAppInstance=t,pR.getInstance().installationsService=e,new YR(t)}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC")),XR.registerVersion("@firebase/performance",ZP);var $R,ZR,tD,eD,nD="measurementId",rD="https://www.googletagmanager.com/gtag/js";(ZR=$R=$R||{}).EVENT="event",ZR.SET="set",ZR.CONFIG="config",(eD=tD=tD||{}).ADD_SHIPPING_INFO="add_shipping_info",eD.ADD_PAYMENT_INFO="add_payment_info",eD.ADD_TO_CART="add_to_cart",eD.ADD_TO_WISHLIST="add_to_wishlist",eD.BEGIN_CHECKOUT="begin_checkout",eD.CHECKOUT_PROGRESS="checkout_progress",eD.EXCEPTION="exception",eD.GENERATE_LEAD="generate_lead",eD.LOGIN="login",eD.PAGE_VIEW="page_view",eD.PURCHASE="purchase",eD.REFUND="refund",eD.REMOVE_FROM_CART="remove_from_cart",eD.SCREEN_VIEW="screen_view",eD.SEARCH="search",eD.SELECT_CONTENT="select_content",eD.SELECT_ITEM="select_item",eD.SELECT_PROMOTION="select_promotion",eD.SET_CHECKOUT_OPTION="set_checkout_option",eD.SHARE="share",eD.SIGN_UP="sign_up",eD.TIMING_COMPLETE="timing_complete",eD.VIEW_CART="view_cart",eD.VIEW_ITEM="view_item",eD.VIEW_ITEM_LIST="view_item_list",eD.VIEW_PROMOTION="view_promotion",eD.VIEW_SEARCH_RESULTS="view_search_results";var iD,oD=new za("@firebase/analytics");var sD,aD,uD=((iD={})["no-ga-id"]='"'+nD+'" field is empty in Firebase config. Firebase Analytics requires this field to contain a valid measurement ID.',iD["already-exists"]="A Firebase Analytics instance with the measurement ID ${id}  already exists. Only one Firebase Analytics instance can be created for each measurement ID.",iD["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",iD["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate",iD["indexedDB-unsupported"]="IndexedDB is not supported by current browswer",iD["invalid-indexedDB-context"]="Environment doesn't support IndexedDB: {$errorInfo}. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments",iD["cookies-not-enabled"]="Cookies are not enabled in this browser environment. Analytics requires cookies to be enabled.",iD),cD=new ca("analytics","Analytics",uD),hD={},lD="dataLayer",fD="gtag",pD=!1;function dD(t,e){if(!oa())throw cD.create("cookies-not-enabled");if(!ra())throw cD.create("indexedDB-unsupported");ia().catch(function(t){throw cD.create("invalid-indexedDB-context",{errorInfo:t})});var n,r,i,o,s,a,u,c,f,p,h,l=t.options[nD];if(!l)throw cD.create("no-ga-id");if(null!=hD[l])throw cD.create("already-exists",{id:l});return pD||(function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(rD))return r}}()||(i=lD,(o=document.createElement("script")).src=rD+"?l="+i,o.async=!0,document.head.appendChild(o)),n=lD,r=[],Array.isArray(window[n])?r=window[n]:window[n]=r,a=hD,u=lD,c=fD,h=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[u].push(arguments)},window[c]&&"function"==typeof window[c]&&(h=window[c]),window[c]=(f=h,p=a,function(t,e,n){if(t===$R.EVENT){var r=[];if(n&&n.send_to){var i=n.send_to;Array.isArray(i)||(i=[i]);for(var o=0,s=i;o<s.length;o++){var a=s[o],u=p[a];if(!u){r=[];break}r.push(u)}}if(0===r.length)for(var c=0,h=Object.values(p);c<h.length;c++){var l=h[c];r.push(l)}Promise.all(r).then(function(){return f($R.EVENT,e,n||{})}).catch(function(t){return oD.error(t)})}else t===$R.CONFIG?(p[e]||Promise.resolve()).then(function(){f($R.CONFIG,e,n)}).catch(function(t){return oD.error(t)}):f($R.SET,e)}),s={gtagCore:h,wrappedGtag:window[c]},aD=s.wrappedGtag,sD=s.gtagCore,pD=!0),hD[l]=function(r,i,o){return Fs(this,void 0,void 0,function(){var e,n;return Us(this,function(t){switch(t.label){case 0:return[4,i.getId()];case 1:return e=t.sent(),o("js",new Date),o($R.CONFIG,r.options[nD],((n={}).firebase_id=e,n.origin="firebase",n.update=!0,n)),[2]}})})}(t,e,sD),{app:t,logEvent:function(t,e,n){return r=aD,i=l,o=t,s=e||{},n&&n.global||(s=Ms(Ms({},e),{send_to:i})),void r($R.EVENT,o,s||{});var r,i,o,s},setCurrentScreen:function(t,e){return n=aD,r=l,i=t,void(e&&e.global?n($R.SET,{screen_name:i}):n($R.CONFIG,r,{update:!0,screen_name:i}));var n,r,i},setUserId:function(t,e){return n=aD,r=l,i=t,void(e&&e.global?n($R.SET,{user_id:i}):n($R.CONFIG,r,{update:!0,user_id:i}));var n,r,i},setUserProperties:function(t,a){return function(t,e,n){if(a&&a.global){for(var r={},i=0,o=Object.keys(n);i<o.length;i++){var s=o[i];r["user_properties."+s]=n[s]}t($R.SET,r)}else t($R.CONFIG,e,{update:!0,user_properties:n})}(aD,l,t)},setAnalyticsCollectionEnabled:function(t){window["ga-disable-"+l]=!t}}}var vD,yD="analytics";(vD=Fl).INTERNAL.registerComponent(new Oa(yD,function(t){return dD(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:function(t){if(pD)throw cD.create("already-initialized");t.dataLayerName&&(lD=t.dataLayerName),t.gtagName&&(fD=t.gtagName)},EventName:tD,isSupported:function(){return Fs(this,void 0,void 0,function(){return Us(this,function(t){switch(t.label){case 0:if(!oa())return[2,!1];if(!ra())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,ia()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}})})}})),vD.INTERNAL.registerComponent(new Oa("analytics-internal",function(t){try{return{logEvent:t.getProvider(yD).getImmediate().logEvent}}catch(t){throw cD.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),vD.registerVersion("@firebase/analytics","0.4.1-20206244562");var gD,mD=(bD.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},bD.prototype.fetch=function(s){return Fs(this,void 0,void 0,function(){var e,n,r,i,o;return Us(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=t.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(s.cacheMaxAgeMillis,n)?[2,r]:(s.eTag=r&&r.eTag,[4,this.client.fetch(s)]);case 2:return i=t.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return t.sent(),[2,i]}})})},bD);function bD(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}var wD=((gD={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",gD["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",gD["registration-api-key"]="Undefined API key. Check Firebase app initialization.",gD["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",gD["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",gD["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",gD["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",gD["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",gD["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",gD["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',gD["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',gD["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",gD["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",gD),_D=new ca("remoteconfig","Remote Config",wD),ED=(ID.prototype.fetch=function(_){return Fs(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,h,l,f,p,d,v,y,g,m,b,w;return Us(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:n=t.sent(),r=n[0],i=n[1],o=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",s=o+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":_.eTag||"*"},u={sdk_version:this.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:this.appId,language_code:(void 0===e&&(e=navigator),e.languages&&e.languages[0]||e.language)},c={method:"POST",headers:a,body:JSON.stringify(u)},h=fetch(s,c),l=new Promise(function(t,e){_.signal.addEventListener(function(){var t=new Error("The operation was aborted.");t.name="AbortError",e(t)})}),t.label=2;case 2:return t.trys.push([2,5,,6]),[4,Promise.race([h,l])];case 3:return t.sent(),[4,h];case 4:return f=t.sent(),[3,6];case 5:throw p=t.sent(),d="fetch-client-network","AbortError"===p.name&&(d="fetch-timeout"),_D.create(d,{originalErrorMessage:p.message});case 6:if(v=f.status,y=f.headers.get("ETag")||void 0,200!==f.status)return[3,11];b=void 0,t.label=7;case 7:return t.trys.push([7,9,,10]),[4,f.json()];case 8:return b=t.sent(),[3,10];case 9:throw w=t.sent(),_D.create("fetch-client-parse",{originalErrorMessage:w.message});case 10:g=b.entries,m=b.state,t.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===m?v=500:"NO_CHANGE"===m?v=304:"NO_TEMPLATE"!==m&&"EMPTY_CONFIG"!==m||(g={}),304!==v&&200!==v)throw _D.create("fetch-status",{httpStatus:v});return[2,{status:v,eTag:y,config:g}]}var e})})},ID);function ID(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}var TD=(SD.prototype.addEventListener=function(t){this.listeners.push(t)},SD.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},SD);function SD(){this.listeners=[]}var CD=["1","true","t","yes","y","on"],ND=(AD.prototype.asString=function(){return this._value},AD.prototype.asBoolean=function(){return"static"!==this._source&&0<=CD.indexOf(this._value.toLowerCase())},AD.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},AD.prototype.getSource=function(){return this._source},AD);function AD(t,e){void 0===e&&(e=""),this._source=t,this._value=e}var kD=(OD.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=ja.DEBUG;break;case"silent":this._logger.logLevel=ja.SILENT;break;default:this._logger.logLevel=ja.ERROR}},Object.defineProperty(OD.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(OD.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),OD.prototype.activate=function(){return Fs(this,void 0,void 0,function(){var e,n,r;return Us(this,function(t){switch(t.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return e=t.sent(),n=e[0],r=e[1],n&&n.config&&n.eTag&&n.eTag!==r?[4,Promise.all([this._storageCache.setActiveConfig(n.config),this._storage.setActiveConfigEtag(n.eTag)])]:[2,!1];case 2:return t.sent(),[2,!0]}})})},OD.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},OD.prototype.fetch=function(){return Fs(this,void 0,void 0,function(){var e,n,r,i=this;return Us(this,function(t){switch(t.label){case 0:e=new TD,setTimeout(function(){return Fs(i,void 0,void 0,function(){return Us(this,function(t){return e.abort(),[2]})})},this.settings.fetchTimeoutMillis),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:e})];case 2:return t.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return t.sent(),[3,6];case 4:return n=t.sent(),r=n instanceof aa&&-1!==n.code.indexOf("fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(r)];case 5:throw t.sent(),n;case 6:return[2]}})})},OD.prototype.fetchAndActivate=function(){return Fs(this,void 0,void 0,function(){return Us(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},OD.prototype.getAll=function(){var t,e,n=this;return t=this._storageCache.getActiveConfig(),e=this.defaultConfig,void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(Ms(Ms({},t),e)).reduce(function(t,e){return t[e]=n.getValue(e),t},{})},OD.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},OD.prototype.getNumber=function(t){return this.getValue(t).asNumber()},OD.prototype.getString=function(t){return this.getValue(t).asString()},OD.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new ND("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new ND("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new ND("static"))},OD);function OD(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}function PD(t,e){var n=t.target.error||void 0;return _D.create(e,{originalErrorMessage:n&&n.message})}var RD="app_namespace_store",DD=(xD.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},xD.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},xD.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},xD.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},xD.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},xD.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},xD.prototype.getActiveConfig=function(){return this.get("active_config")},xD.prototype.setActiveConfig=function(t){return this.set("active_config",t)},xD.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},xD.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},xD.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},xD.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},xD.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},xD.prototype.get=function(a){return Fs(this,void 0,void 0,function(){var o,s=this;return Us(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(n,e){var t=o.transaction([RD],"readonly").objectStore(RD),r=s.createCompositeKey(a);try{var i=t.get(r);i.onerror=function(t){e(PD(t,"storage-get"))},i.onsuccess=function(t){var e=t.target.result;n(e?e.value:void 0)}}catch(t){e(_D.create("storage-get",{originalErrorMessage:t&&t.message}))}})]}})})},xD.prototype.set=function(a,u){return Fs(this,void 0,void 0,function(){var o,s=this;return Us(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([RD],"readwrite").objectStore(RD),r=s.createCompositeKey(a);try{var i=n.put({compositeKey:r,value:u});i.onerror=function(t){e(PD(t,"storage-set"))},i.onsuccess=function(){t()}}catch(t){e(_D.create("storage-set",{originalErrorMessage:t&&t.message}))}})]}})})},xD.prototype.delete=function(a){return Fs(this,void 0,void 0,function(){var o,s=this;return Us(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([RD],"readwrite").objectStore(RD),r=s.createCompositeKey(a);try{var i=n.delete(r);i.onerror=function(t){e(PD(t,"storage-delete"))},i.onsuccess=function(){t()}}catch(t){e(_D.create("storage-delete",{originalErrorMessage:t&&t.message}))}})]}})})},xD.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},xD);function xD(t,e,n,r){void 0===r&&(r=new Promise(function(e,n){var t=indexedDB.open("firebase_remote_config",1);t.onerror=function(t){n(PD(t,"storage-open"))},t.onsuccess=function(t){e(t.target.result)},t.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(RD,{keyPath:"compositeKey"})}}})),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}var LD=(MD.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},MD.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},MD.prototype.getActiveConfig=function(){return this.activeConfig},MD.prototype.loadFromStorage=function(){return Fs(this,void 0,void 0,function(){var e,n,r,i,o,s;return Us(this,function(t){switch(t.label){case 0:return e=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),[4,e];case 1:return(i=t.sent())&&(this.lastFetchStatus=i),[4,n];case 2:return(o=t.sent())&&(this.lastSuccessfulFetchTimestampMillis=o),[4,r];case 3:return(s=t.sent())&&(this.activeConfig=s),[2]}})})},MD.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},MD.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},MD.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},MD);function MD(t){this.storage=t}var FD=(UD.prototype.fetch=function(n){return Fs(this,void 0,void 0,function(){var e;return Us(this,function(t){switch(t.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=t.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(n,e)]}})})},UD.prototype.attemptFetch=function(u,t){var c=t.throttleEndTimeMillis,h=t.backoffCount;return Fs(this,void 0,void 0,function(){var r,s,a;return Us(this,function(t){switch(t.label){case 0:return[4,(i=u.signal,o=c,new Promise(function(t,e){var n=Math.max(o-Date.now(),0),r=setTimeout(t,n);i.addEventListener(function(){clearTimeout(r),e(_D.create("fetch-throttle",{throttleEndTimeMillis:o}))})}))];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,5,,7]),[4,this.client.fetch(u)];case 3:return r=t.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return t.sent(),[2,r];case 5:if(!function(t){if(t instanceof aa){var e=Number(t.httpStatus);return 429===e||500===e||503===e||504===e}}(s=t.sent()))throw s;return a={throttleEndTimeMillis:Date.now()+(e=1e3*Math.pow(2,h),n=Math.round(.5*e*(Math.random()-.5)*2),Math.min(144e5,e+n)),backoffCount:h+1},[4,this.storage.setThrottleMetadata(a)];case 6:return t.sent(),[2,this.attemptFetch(u,a)];case 7:return[2]}var e,n,i,o})})},UD);function UD(t,e){this.client=t,this.storage=e}var jD,VD="@firebase/remote-config";return(jD=Fl).INTERNAL.registerComponent(new Oa("remoteConfig",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw _D.create("registration-window");var i=n.options,o=i.projectId,s=i.apiKey,a=i.appId;if(!o)throw _D.create("registration-project-id");if(!s)throw _D.create("registration-api-key");if(!a)throw _D.create("registration-app-id");e=e||"firebase";var u=new DD(a,n.name,e),c=new LD(u),h=new za(VD);h.logLevel=ja.ERROR;var l=new ED(r,jD.SDK_VERSION,e,o,s,a),f=new FD(l,u),p=new mD(f,u,c,h),d=new kD(n,p,c,u,h);return d.ensureInitialized(),d},"PUBLIC").setMultipleInstances(!0)),jD.registerVersion(VD,"0.1.26-20206244562"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the CDN builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nhttps://www.gstatic.com/firebasejs/5.0.0/firebase-<PACKAGE>.js\n"),Fl.registerVersion("firebase","7.17.1-20206244562","cdn"),Fl});