!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).firebase=e()}(this,function(){"use strict";function r(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function i(t){return"string"!=typeof t&&(t=String(t)),t}function t(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return d&&(t[Symbol.iterator]=function(){return t}),t}function s(e){this.map={},e instanceof s?e.forEach(function(t,e){this.append(e,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function a(n){return new Promise(function(t,e){n.onload=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function e(t){var e=new FileReader,n=a(e);return e.readAsArrayBuffer(t),n}function n(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function u(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t)if("string"==typeof t)this._bodyText=t;else if(v&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(y&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(p&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(g&&v&&b(t))this._bodyArrayBuffer=n(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!g||!ArrayBuffer.prototype.isPrototypeOf(t)&&!_(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=n(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):p&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},v&&(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(e)}),this.text=function(){var t,e,n,r=o(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,n=a(e=new FileReader),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},y&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function c(t,e){var n,r,i=(e=e||{}).body;if(t instanceof c){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new s(t.headers)),this.method=t.method,this.mode=t.mode,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new s(e.headers)),this.method=(r=(n=e.method||this.method||"GET").toUpperCase(),-1<w.indexOf(r)?r:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function h(t){var i=new FormData;return t.trim().split("&").forEach(function(t){var e,n,r;t&&(n=(e=t.split("=")).shift().replace(/\+/g," "),r=e.join("=").replace(/\+/g," "),i.append(decodeURIComponent(n),decodeURIComponent(r)))}),i}function l(t,e){e=e||{},this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new s(e.headers),this.url=e.url||"",this._initBody(t)}var f,p,d,v,y,g,m,b,_,w,E;(f="undefined"!=typeof self?self:void 0).fetch||(p="URLSearchParams"in f,d="Symbol"in f&&"iterator"in Symbol,v="FileReader"in f&&"Blob"in f&&function(){try{return new Blob,!0}catch(t){return!1}}(),y="FormData"in f,(g="ArrayBuffer"in f)&&(m=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],b=function(t){return t&&DataView.prototype.isPrototypeOf(t)},_=ArrayBuffer.isView||function(t){return t&&-1<m.indexOf(Object.prototype.toString.call(t))}),s.prototype.append=function(t,e){t=r(t),e=i(e);var n=this.map[t];this.map[t]=n?n+","+e:e},s.prototype.delete=function(t){delete this.map[r(t)]},s.prototype.get=function(t){return t=r(t),this.has(t)?this.map[t]:null},s.prototype.has=function(t){return this.map.hasOwnProperty(r(t))},s.prototype.set=function(t,e){this.map[r(t)]=i(e)},s.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},s.prototype.keys=function(){var n=[];return this.forEach(function(t,e){n.push(e)}),t(n)},s.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),t(e)},s.prototype.entries=function(){var n=[];return this.forEach(function(t,e){n.push([e,t])}),t(n)},d&&(s.prototype[Symbol.iterator]=s.prototype.entries),w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],c.prototype.clone=function(){return new c(this,{body:this._bodyInit})},u.call(c.prototype),u.call(l.prototype),l.prototype.clone=function(){return new l(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new s(this.headers),url:this.url})},l.error=function(){var t=new l(null,{status:0,statusText:""});return t.type="error",t},E=[301,302,303,307,308],l.redirect=function(t,e){if(-1===E.indexOf(e))throw new RangeError("Invalid status code");return new l(null,{status:e,headers:{location:t}})},f.Headers=s,f.Request=c,f.Response=l,f.fetch=function(n,i){return new Promise(function(r,t){var e=new c(n,i),o=new XMLHttpRequest;o.onload=function(){var t,i,e={status:o.status,statusText:o.statusText,headers:(t=o.getAllResponseHeaders()||"",i=new s,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var e,n=t.split(":"),r=n.shift().trim();r&&(e=n.join(":").trim(),i.append(r,e))}),i)};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var n="response"in o?o.response:o.responseText;r(new l(n,e))},o.onerror=function(){t(new TypeError("Network request failed"))},o.ontimeout=function(){t(new TypeError("Network request failed"))},o.open(e.method,e.url,!0),"include"===e.credentials?o.withCredentials=!0:"omit"===e.credentials&&(o.withCredentials=!1),"responseType"in o&&v&&(o.responseType="blob"),e.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),o.send(void 0===e._bodyInit?null:e._bodyInit)})},f.fetch.polyfill=!0);var I="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function T(t,e){return t(e={exports:{}},e.exports),e.exports}function S(t){return t&&t.Math==Math&&t}function C(t){try{return!!t()}catch(t){return!0}}function N(t){return"object"==typeof t?null!==t:"function"==typeof t}function A(t){return V?j.createElement(t):{}}function k(t){if(!N(t))throw TypeError(String(t)+" is not an object");return t}function O(t,e){if(!N(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!N(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!N(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!N(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}function R(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function P(e,n){try{H(M,e,n)}catch(t){M[e]=n}return n}function D(t,e){return Q.call(t,e)}function x(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++X+Y).toString(36)}function L(t){return D(Z,t)||(J&&D(tt,t)?Z[t]=tt[t]:Z[t]=et("Symbol."+t)),Z[t]}var M=S("object"==typeof globalThis&&globalThis)||S("object"==typeof window&&window)||S("object"==typeof self&&self)||S("object"==typeof I&&I)||Function("return this")(),F=!1,U=!C(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),j=M.document,V=N(j)&&N(j.createElement),q=!U&&!C(function(){return 7!=Object.defineProperty(A("div"),"a",{get:function(){return 7}}).a}),B=Object.defineProperty,W={f:U?B:function(t,e,n){if(k(t),e=O(e,!0),k(n),q)try{return B(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},H=U?function(t,e,n){return W.f(t,e,R(1,n))}:function(t,e,n){return t[e]=n,t},G="__core-js_shared__",K=M[G]||P(G,{}),z=T(function(t){(t.exports=function(t,e){return K[t]||(K[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})}),Q={}.hasOwnProperty,X=0,Y=Math.random(),J=!!Object.getOwnPropertySymbols&&!C(function(){return!String(Symbol())}),$=J&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Z=z("wks"),tt=M.Symbol,et=$?tt:tt&&tt.withoutSetter||x,nt={};nt[L("toStringTag")]="z";var rt="[object z]"===String(nt),it=Function.toString;function ot(t){return gt[t]||(gt[t]=x(t))}"function"!=typeof K.inspectSource&&(K.inspectSource=function(t){return it.call(t)});var st,at,ut,ct,ht,lt,ft,pt,dt=K.inspectSource,vt=M.WeakMap,yt="function"==typeof vt&&/native code/.test(dt(vt)),gt=z("keys"),mt={},bt=M.WeakMap;function _t(t){return It.call(t).slice(8,-1)}ft=yt?(st=new bt,at=st.get,ut=st.has,ct=st.set,ht=function(t,e){return ct.call(st,t,e),e},lt=function(t){return at.call(st,t)||{}},function(t){return ut.call(st,t)}):(pt=ot("state"),mt[pt]=!0,ht=function(t,e){return H(t,pt,e),e},lt=function(t){return D(t,pt)?t[pt]:{}},function(t){return D(t,pt)});var wt={set:ht,get:lt,has:ft,enforce:function(t){return ft(t)?lt(t):ht(t,{})},getterFor:function(n){return function(t){var e;if(!N(t)||(e=lt(t)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return e}}},Et=T(function(t){var e=wt.get,a=wt.enforce,u=String(String).split("String");(t.exports=function(t,e,n,r){var i=!!r&&!!r.unsafe,o=!!r&&!!r.enumerable,s=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof e||D(n,"name")||H(n,"name",e),a(n).source=u.join("string"==typeof e?e:"")),t!==M?(i?!s&&t[e]&&(o=!0):delete t[e],o?t[e]=n:H(t,e,n)):o?t[e]=n:P(e,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||dt(this)})}),It={}.toString,Tt=L("toStringTag"),St="Arguments"==_t(function(){return arguments}()),Ct=rt?_t:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Tt))?n:St?_t(e):"Object"==(r=_t(e))&&"function"==typeof e.callee?"Arguments":r},Nt=rt?{}.toString:function(){return"[object "+Ct(this)+"]"};function At(t){return isNaN(t=+t)?0:(0<t?Gt:Ht)(t)}function kt(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function Ot(a){return function(t,e){var n,r,i=String(kt(t)),o=At(e),s=i.length;return o<0||s<=o?a?"":void 0:(n=i.charCodeAt(o))<55296||56319<n||o+1===s||(r=i.charCodeAt(o+1))<56320||57343<r?a?i.charAt(o):n:a?i.slice(o,o+2):r-56320+(n-55296<<10)+65536}}function Rt(t){return Jt(kt(t))}function Pt(t){return"function"==typeof t?t:void 0}function Dt(t,e){return arguments.length<2?Pt(te[t])||Pt(M[t]):te[t]&&te[t][e]||M[t]&&M[t][e]}function xt(t){return 0<t?ee(At(t),9007199254740991):0}function Lt(c){return function(t,e,n){var r,i,o,s=Rt(t),a=xt(s.length),u=(r=a,(i=At(n))<0?ne(i+r,0):re(i,r));if(c&&e!=e){for(;u<a;)if((o=s[u++])!=o)return!0}else for(;u<a;u++)if((c||u in s)&&s[u]===e)return c||u||0;return!c&&-1}}function Mt(t,e){var n,r=Rt(t),i=0,o=[];for(n in r)!D(mt,n)&&D(r,n)&&o.push(n);for(;e.length>i;)D(r,n=e[i++])&&(~ie(o,n)||o.push(n));return o}function Ft(t,e){for(var n=ce(e),r=W.f,i=Zt.f,o=0;o<n.length;o++){var s=n[o];D(t,s)||r(t,s,i(e,s))}}function Ut(t,e){var n=fe[le(t)];return n==de||n!=pe&&("function"==typeof e?C(e):!!e)}function jt(t,e){var n,r,i,o,s=t.target,a=t.global,u=t.stat,c=a?M:u?M[s]||P(s,{}):(M[s]||{}).prototype;if(c)for(n in e){if(i=e[n],r=t.noTargetGet?(o=ye(c,n))&&o.value:c[n],!ve(a?n:s+(u?".":"#")+n,t.forced)&&void 0!==r){if(typeof i==typeof r)continue;Ft(i,r)}(t.sham||r&&r.sham)&&H(i,"sham",!0),Et(c,n,i,t)}}function Vt(t){return Object(kt(t))}rt||Et(Object.prototype,"toString",Nt,{unsafe:!0});var qt,Bt,Wt,Ht=Math.ceil,Gt=Math.floor,Kt={codeAt:Ot(!1),charAt:Ot(!0)},zt={}.propertyIsEnumerable,Qt=Object.getOwnPropertyDescriptor,Xt={f:Qt&&!zt.call({1:2},1)?function(t){var e=Qt(this,t);return!!e&&e.enumerable}:zt},Yt="".split,Jt=C(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==_t(t)?Yt.call(t,""):Object(t)}:Object,$t=Object.getOwnPropertyDescriptor,Zt={f:U?$t:function(t,e){if(t=Rt(t),e=O(e,!0),q)try{return $t(t,e)}catch(t){}if(D(t,e))return R(!Xt.f.call(t,e),t[e])}},te=M,ee=Math.min,ne=Math.max,re=Math.min,ie=(Lt(!0),Lt(!1)),oe=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],se=oe.concat("length","prototype"),ae={f:Object.getOwnPropertyNames||function(t){return Mt(t,se)}},ue={f:Object.getOwnPropertySymbols},ce=Dt("Reflect","ownKeys")||function(t){var e=ae.f(k(t)),n=ue.f;return n?e.concat(n(t)):e},he=/#|\.prototype\./,le=Ut.normalize=function(t){return String(t).replace(he,".").toLowerCase()},fe=Ut.data={},pe=Ut.NATIVE="N",de=Ut.POLYFILL="P",ve=Ut,ye=Zt.f,ge=!C(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),me=ot("IE_PROTO"),be=Object.prototype,_e=ge?Object.getPrototypeOf:function(t){return D(t=Vt(t),me)?t[me]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?be:null},we=L("iterator"),Ee=!1;function Ie(){}function Te(t){return"<script>"+t+"<\/script>"}[].keys&&("next"in(Wt=[].keys())?(Bt=_e(_e(Wt)))!==Object.prototype&&(qt=Bt):Ee=!0),null==qt&&(qt={}),D(qt,we)||H(qt,we,function(){return this});var Se,Ce={IteratorPrototype:qt,BUGGY_SAFARI_ITERATORS:Ee},Ne=Object.keys||function(t){return Mt(t,oe)},Ae=U?Object.defineProperties:function(t,e){k(t);for(var n,r=Ne(e),i=r.length,o=0;o<i;)W.f(t,n=r[o++],e[n]);return t},ke=Dt("document","documentElement"),Oe="prototype",Re=ot("IE_PROTO"),Pe=function(){try{Se=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;Pe=Se?function(t){t.write(Te("")),t.close();var e=t.parentWindow.Object;return t=null,e}(Se):((e=A("iframe")).style.display="none",ke.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Te("document.F=Object")),t.close(),t.F);for(var n=oe.length;n--;)delete Pe[Oe][oe[n]];return Pe()};function De(t,e,n){t&&!D(t=n?t:t.prototype,je)&&Ue(t,je,{configurable:!0,value:e})}function xe(){return this}function Le(){return this}function Me(t,e,n,r,i,o,s){var a,u;function c(t){if(t===i&&g)return g;if(!He&&t in v)return v[t];switch(t){case"keys":case Ke:case ze:return function(){return new n(this,t)}}return function(){return new n(this)}}u=e+" Iterator",(a=n).prototype=Fe(qe,{next:R(1,r)}),De(a,u,!1),Ve[u]=xe;var h,l,f,p=e+" Iterator",d=!1,v=t.prototype,y=v[Ge]||v["@@iterator"]||i&&v[i],g=!He&&y||c(i),m="Array"==e&&v.entries||y;if(m&&(h=_e(m.call(new t)),We!==Object.prototype&&h.next&&(_e(h)!==We&&(Be?Be(h,We):"function"!=typeof h[Ge]&&H(h,Ge,Le)),De(h,p,!0))),i==Ke&&y&&y.name!==Ke&&(d=!0,g=function(){return y.call(this)}),v[Ge]!==g&&H(v,Ge,g),Ve[e]=g,i)if(l={values:c(Ke),keys:o?g:c("keys"),entries:c(ze)},s)for(f in l)!He&&!d&&f in v||Et(v,f,l[f]);else jt({target:e,proto:!0,forced:He||d},l);return l}mt[Re]=!0;var Fe=Object.create||function(t,e){var n;return null!==t?(Ie[Oe]=k(t),n=new Ie,Ie[Oe]=null,n[Re]=t):n=Pe(),void 0===e?n:Ae(n,e)},Ue=W.f,je=L("toStringTag"),Ve={},qe=Ce.IteratorPrototype,Be=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,t={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(t,[]),r=t instanceof Array}catch(t){}return function(t,e){return k(t),function(){if(!N(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(),r?n.call(t,e):t.__proto__=e,t}}():void 0),We=Ce.IteratorPrototype,He=Ce.BUGGY_SAFARI_ITERATORS,Ge=L("iterator"),Ke="values",ze="entries",Qe=Kt.charAt,Xe="String Iterator",Ye=wt.set,Je=wt.getterFor(Xe);Me(String,"String",function(t){Ye(this,{type:Xe,string:String(t),index:0})},function(){var t,e=Je(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=Qe(n,r),e.index+=t.length,{value:t,done:!1})});var $e={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Ze=L("unscopables"),tn=Array.prototype;function en(t){tn[Ze][t]=!0}null==tn[Ze]&&W.f(tn,Ze,{configurable:!0,value:Fe(null)});var nn="Array Iterator",rn=wt.set,on=wt.getterFor(nn),sn=Me(Array,"Array",function(t,e){rn(this,{type:nn,target:Rt(t),index:0,kind:e})},function(){var t=on(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values");Ve.Arguments=Ve.Array,en("keys"),en("values"),en("entries");var an=L("iterator"),un=L("toStringTag"),cn=sn.values;for(var hn in $e){var ln=M[hn],fn=ln&&ln.prototype;if(fn){if(fn[an]!==cn)try{H(fn,an,cn)}catch(bu){fn[an]=cn}if(fn[un]||H(fn,un,hn),$e[hn])for(var pn in sn)if(fn[pn]!==sn[pn])try{H(fn,pn,sn[pn])}catch(bu){fn[pn]=sn[pn]}}}function dn(t,e,n){for(var r in e)Et(t,r,e[r],n);return t}function vn(t){var e=Dt(t),n=W.f;U&&e&&!e[In]&&n(e,In,{configurable:!0,get:function(){return this}})}function yn(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}function gn(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}function mn(t){return void 0!==t&&(Ve.Array===t||Sn[Tn]===t)}function bn(r,i,t){if(yn(r),void 0===i)return r;switch(t){case 0:return function(){return r.call(i)};case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}}function _n(t){if(null!=t)return t[Cn]||t["@@iterator"]||Ve[Ct(t)]}function wn(t,e,n,r){try{return r?e(k(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&k(i.call(t)),e}}var En=M.Promise,In=L("species"),Tn=L("iterator"),Sn=Array.prototype,Cn=L("iterator"),Nn=T(function(t){function p(t,e){this.stopped=t,this.result=e}(t.exports=function(t,e,n,r,i){var o,s,a,u,c,h,l,f=bn(e,n,r?2:1);if(i)o=t;else{if("function"!=typeof(s=_n(t)))throw TypeError("Target is not iterable");if(mn(s)){for(a=0,u=xt(t.length);a<u;a++)if((c=r?f(k(l=t[a])[0],l[1]):f(t[a]))&&c instanceof p)return c;return new p(!1)}o=s.call(t)}for(h=o.next;!(l=h.call(o)).done;)if("object"==typeof(c=wn(o,f,l.value,r))&&c&&c instanceof p)return c;return new p(!1)}).stop=function(t){return new p(!0,t)}}),An=L("iterator"),kn=!1;try{var On=0,Rn={next:function(){return{done:!!On++}},return:function(){kn=!0}};Rn[An]=function(){return this},Array.from(Rn,function(){throw 2})}catch(bu){}function Pn(t,e){if(!e&&!kn)return!1;var n=!1;try{var r={};r[An]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}function Dn(t,e){var n,r=k(t).constructor;return void 0===r||null==(n=k(r)[qn])?e:yn(n)}function xn(t){var e;Jn.hasOwnProperty(t)&&(e=Jn[t],delete Jn[t],e())}function Ln(t){return function(){xn(t)}}function Mn(t){xn(t.data)}function Fn(t){M.postMessage(t+"",Hn.protocol+"//"+Hn.host)}var Un,jn,Vn,qn=L("species"),Bn=Dt("navigator","userAgent")||"",Wn=/(iphone|ipod|ipad).*applewebkit/i.test(Bn),Hn=M.location,Gn=M.setImmediate,Kn=M.clearImmediate,zn=M.process,Qn=M.MessageChannel,Xn=M.Dispatch,Yn=0,Jn={},$n="onreadystatechange";Gn&&Kn||(Gn=function(t){for(var e=[],n=1;n<arguments.length;)e.push(arguments[n++]);return Jn[++Yn]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},Un(Yn),Yn},Kn=function(t){delete Jn[t]},"process"==_t(zn)?Un=function(t){zn.nextTick(Ln(t))}:Xn&&Xn.now?Un=function(t){Xn.now(Ln(t))}:Qn&&!Wn?(Vn=(jn=new Qn).port2,jn.port1.onmessage=Mn,Un=bn(Vn.postMessage,Vn,1)):!M.addEventListener||"function"!=typeof postMessage||M.importScripts||C(Fn)||"file:"===Hn.protocol?Un=$n in A("script")?function(t){ke.appendChild(A("script"))[$n]=function(){ke.removeChild(this),xn(t)}}:function(t){setTimeout(Ln(t),0)}:(Un=Fn,M.addEventListener("message",Mn,!1)));var Zn,tr,er,nr,rr,ir,or,sr,ar={set:Gn,clear:Kn},ur=Zt.f,cr=ar.set,hr=M.MutationObserver||M.WebKitMutationObserver,lr=M.process,fr=M.Promise,pr="process"==_t(lr),dr=ur(M,"queueMicrotask"),vr=dr&&dr.value;function yr(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=yn(n),this.reject=yn(r)}function gr(t,e){if(k(t),N(e)&&e.constructor===t)return e;var n=Er.f(t);return(0,n.resolve)(e),n.promise}function mr(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}vr||(Zn=function(){var t,e;for(pr&&(t=lr.domain)&&t.exit();tr;){e=tr.fn,tr=tr.next;try{e()}catch(t){throw tr?nr():er=void 0,t}}er=void 0,t&&t.enter()},nr=pr?function(){lr.nextTick(Zn)}:hr&&!Wn?(rr=!0,ir=document.createTextNode(""),new hr(Zn).observe(ir,{characterData:!0}),function(){ir.data=rr=!rr}):fr&&fr.resolve?(or=fr.resolve(void 0),sr=or.then,function(){sr.call(or,Zn)}):function(){cr.call(M,Zn)});var br,_r,wr=vr||function(t){var e={fn:t,next:void 0};er&&(er.next=e),tr||(tr=e,nr()),er=e},Er={f:function(t){return new yr(t)}},Ir=M.process,Tr=Ir&&Ir.versions,Sr=Tr&&Tr.v8;function Cr(t){var e;return!(!N(t)||"function"!=typeof(e=t.then))&&e}function Nr(l,f,p){var d;f.notified||(f.notified=!0,d=f.reactions,wr(function(){for(var t=f.value,e=1==f.state,n=0;d.length>n;){var r,i,o,s=d[n++],a=e?s.ok:s.fail,u=s.resolve,c=s.reject,h=s.domain;try{a?(e||(2===f.rejection&&ni(l,f),f.rejection=1),!0===a?r=t:(h&&h.enter(),r=a(t),h&&(h.exit(),o=!0)),r===s.promise?c(Wr("Promise-chain cycle")):(i=Cr(r))?i.call(r,u,c):u(r)):c(t)}catch(t){h&&!o&&h.exit(),c(t)}}f.reactions=[],f.notified=!1,p&&!f.rejection&&ti(l,f)}))}function Ar(t,e,n){var r,i;Yr?((r=Hr.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),M.dispatchEvent(r)):r={promise:e,reason:n},(i=M["on"+t])?i(r):t===Jr&&function(t,e){var n=M.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)}function kr(e,n,r,i){return function(t){e(n,r,t,i)}}function Or(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=2,Nr(t,e,!0))}Sr?_r=(br=Sr.split("."))[0]+br[1]:Bn&&(!(br=Bn.match(/Edge\/(\d+)/))||74<=br[1])&&(br=Bn.match(/Chrome\/(\d+)/))&&(_r=br[1]);var Rr,Pr,Dr,xr,Lr=_r&&+_r,Mr=ar.set,Fr=L("species"),Ur="Promise",jr=wt.get,Vr=wt.set,qr=wt.getterFor(Ur),Br=En,Wr=M.TypeError,Hr=M.document,Gr=M.process,Kr=Dt("fetch"),zr=Er.f,Qr=zr,Xr="process"==_t(Gr),Yr=!!(Hr&&Hr.createEvent&&M.dispatchEvent),Jr="unhandledrejection",$r=ve(Ur,function(){if(dt(Br)===String(Br)){if(66===Lr)return!0;if(!Xr&&"function"!=typeof PromiseRejectionEvent)return!0}if(51<=Lr&&/native code/.test(Br))return!1;function t(t){t(function(){},function(){})}var e=Br.resolve(1);return(e.constructor={})[Fr]=t,!(e.then(function(){})instanceof t)}),Zr=$r||!Pn(function(t){Br.all(t).catch(function(){})}),ti=function(n,r){Mr.call(M,function(){var t,e=r.value;if(ei(r)&&(t=mr(function(){Xr?Gr.emit("unhandledRejection",e,n):Ar(Jr,n,e)}),r.rejection=Xr||ei(r)?2:1,t.error))throw t.value})},ei=function(t){return 1!==t.rejection&&!t.parent},ni=function(t,e){Mr.call(M,function(){Xr?Gr.emit("rejectionHandled",t):Ar("rejectionhandled",t,e.value)})},ri=function(n,r,t,e){if(!r.done){r.done=!0,e&&(r=e);try{if(n===t)throw Wr("Promise can't be resolved itself");var i=Cr(t);i?wr(function(){var e={done:!1};try{i.call(t,kr(ri,n,e,r),kr(Or,n,e,r))}catch(t){Or(n,e,t,r)}}):(r.value=t,r.state=1,Nr(n,r,!1))}catch(t){Or(n,{done:!1},t,r)}}};$r&&(Br=function(t){gn(this,Br,Ur),yn(t),Rr.call(this);var e=jr(this);try{t(kr(ri,this,e),kr(Or,this,e))}catch(t){Or(this,e,t)}},(Rr=function(){Vr(this,{type:Ur,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=dn(Br.prototype,{then:function(t,e){var n=qr(this),r=zr(Dn(this,Br));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Xr?Gr.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Nr(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),Pr=function(){var t=new Rr,e=jr(t);this.promise=t,this.resolve=kr(ri,t,e),this.reject=kr(Or,t,e)},Er.f=zr=function(t){return t===Br||t===Dr?new Pr:Qr(t)},"function"==typeof En&&(xr=En.prototype.then,Et(En.prototype,"then",function(t,e){var n=this;return new Br(function(t,e){xr.call(n,t,e)}).then(t,e)},{unsafe:!0}),"function"==typeof Kr&&jt({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return gr(Br,Kr.apply(M,arguments))}}))),jt({global:!0,wrap:!0,forced:$r},{Promise:Br}),De(Br,Ur,!1),vn(Ur),Dr=Dt(Ur),jt({target:Ur,stat:!0,forced:$r},{reject:function(t){var e=zr(this);return e.reject.call(void 0,t),e.promise}}),jt({target:Ur,stat:!0,forced:$r},{resolve:function(t){return gr(this,t)}}),jt({target:Ur,stat:!0,forced:Zr},{all:function(t){var a=this,e=zr(a),u=e.resolve,c=e.reject,n=mr(function(){var r=yn(a.resolve),i=[],o=0,s=1;Nn(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(a,t).then(function(t){n||(n=!0,i[e]=t,--s||u(i))},c)}),--s||u(i)});return n.error&&c(n.value),e.promise},race:function(t){var n=this,r=zr(n),i=r.reject,e=mr(function(){var e=yn(n.resolve);Nn(t,function(t){e.call(n,t).then(r.resolve,i)})});return e.error&&i(e.value),r.promise}}),jt({target:"Promise",stat:!0},{allSettled:function(t){var a=this,e=Er.f(a),u=e.resolve,n=e.reject,r=mr(function(){var r=yn(a.resolve),i=[],o=0,s=1;Nn(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(a,t).then(function(t){n||(n=!0,i[e]={status:"fulfilled",value:t},--s||u(i))},function(t){n||(n=!0,i[e]={status:"rejected",reason:t},--s||u(i))})}),--s||u(i)});return r.error&&n(r.value),e.promise}}),jt({target:"Promise",proto:!0,real:!0,forced:!!En&&C(function(){En.prototype.finally.call({then:function(){}},function(){})})},{finally:function(e){var n=Dn(this,Dt("Promise")),t="function"==typeof e;return this.then(t?function(t){return gr(n,e()).then(function(){return t})}:e,t?function(t){return gr(n,e()).then(function(){throw t})}:e)}}),"function"!=typeof En||En.prototype.finally||Et(En.prototype,"finally",Dt("Promise").prototype.finally),te.Promise;var ii=wt.set,oi=wt.getterFor("AggregateError"),si=function(t,e){var n=this;if(!(n instanceof si))return new si(t,e);Be&&(n=Be(new Error(e),_e(n)));var r=[];return Nn(t,r.push,r),U?ii(n,{errors:r,type:"AggregateError"}):n.errors=r,void 0!==e&&H(n,"message",String(e)),n};si.prototype=Fe(Error.prototype,{constructor:R(5,si),message:R(5,""),name:R(5,"AggregateError")}),U&&W.f(si.prototype,"errors",{get:function(){return oi(this).errors},configurable:!0}),jt({global:!0},{AggregateError:si}),jt({target:"Promise",stat:!0},{try:function(t){var e=Er.f(this),n=mr(t);return(n.error?e.reject:e.resolve)(n.value),e.promise}});var ai="No one promise resolved";function ui(t,e){var n;return fi(t)&&("function"==typeof(n=t.constructor)&&(n===Array||fi(n.prototype))||N(n)&&null===(n=n[pi]))&&(n=void 0),new(void 0===n?Array:n)(0===e?0:e)}function ci(p){var d=1==p,v=2==p,y=3==p,g=4==p,m=6==p,b=5==p||m;return function(t,e,n,r){for(var i,o,s=Vt(t),a=Jt(s),u=bn(e,n,3),c=xt(a.length),h=0,l=r||ui,f=d?l(t,c):v?l(t,0):void 0;h<c;h++)if((b||h in a)&&(o=u(i=a[h],h,s),p))if(d)f[h]=o;else if(o)switch(p){case 3:return!0;case 5:return i;case 6:return h;case 2:di.call(f,i)}else if(g)return!1;return m?-1:y||g?g:f}}function hi(t){throw t}function li(t,e){if(D(gi,t))return gi[t];var n=[][t],r=!!D(e=e||{},"ACCESSORS")&&e.ACCESSORS,i=D(e,0)?e[0]:hi,o=D(e,1)?e[1]:void 0;return gi[t]=!!n&&!C(function(){if(r&&!U)return 1;var t={length:-1};r?yi(t,1,{enumerable:!0,get:hi}):t[1]=1,n.call(t,i,o)})}jt({target:"Promise",stat:!0},{any:function(t){var u=this,e=Er.f(u),c=e.resolve,h=e.reject,n=mr(function(){var r=yn(u.resolve),i=[],o=0,s=1,a=!1;Nn(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(u,t).then(function(t){n||a||(a=!0,c(t))},function(t){n||a||(n=!0,i[e]=t,--s||h(new(Dt("AggregateError"))(i,ai)))})}),--s||h(new(Dt("AggregateError"))(i,ai))});return n.error&&h(n.value),e.promise}});var fi=Array.isArray||function(t){return"Array"==_t(t)},pi=L("species"),di=[].push,vi={forEach:ci(0),map:ci(1),filter:ci(2),some:ci(3),every:ci(4),find:ci(5),findIndex:ci(6)},yi=Object.defineProperty,gi={},mi=vi.find,bi="find",_i=!0,wi=li(bi);function Ei(t,e,n){return bn(Ii,M[t].prototype[e],n)}bi in[]&&Array(1)[bi](function(){_i=!1}),jt({target:"Array",proto:!0,forced:_i||!wi},{find:function(t,e){return mi(this,t,1<arguments.length?e:void 0)}}),en(bi);var Ii=Function.call,Ti=(Ei("Array","find"),vi.findIndex),Si="findIndex",Ci=!0,Ni=li(Si);function Ai(t,e,n){var r=O(e);r in t?W.f(t,r,R(0,n)):t[r]=n}Si in[]&&Array(1)[Si](function(){Ci=!1}),jt({target:"Array",proto:!0,forced:Ci||!Ni},{findIndex:function(t,e){return Ti(this,t,1<arguments.length?e:void 0)}}),en(Si),Ei("Array","findIndex"),jt({target:"Array",stat:!0,forced:!Pn(function(t){Array.from(t)})},{from:function(t,e,n){var r,i,o,s,a,u=Vt(t),c="function"==typeof this?this:Array,h=arguments.length,l=1<h?e:void 0,f=void 0!==l,p=_n(u),d=0;if(f&&(l=bn(l,2<h?n:void 0,2)),null==p||c==Array&&mn(p))for(i=new c(r=xt(u.length));d<r;d++)Ai(i,d,f?l(u[d],d):u[d]);else for(a=(s=p.call(u)).next,i=new c;!(o=a.call(s)).done;d++)Ai(i,d,f?wn(s,l,[o.value,d],!0):o.value);return i.length=d,i}}),te.Array.from;var ki,Oi=vi.some,Ri=!!(ki=[].some)&&C(function(){ki.call(null,function(){throw 1},1)}),Pi=li("some");jt({target:"Array",proto:!0,forced:!Ri||!Pi},{some:function(t,e){return Oi(this,t,1<arguments.length?e:void 0)}}),Ei("Array","some");var Di,xi="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,Li=W.f,Mi=M.Int8Array,Fi=Mi&&Mi.prototype,Ui=M.Uint8ClampedArray,ji=Ui&&Ui.prototype,Vi=Mi&&_e(Mi),qi=Fi&&_e(Fi),Bi=Object.prototype,Wi=(Bi.isPrototypeOf,L("toStringTag")),Hi=x("TYPED_ARRAY_TAG"),Gi=xi&&!!Be&&"Opera"!==Ct(M.opera),Ki={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(Di in Ki)M[Di]||(Gi=!1);if((!Gi||"function"!=typeof Vi||Vi===Function.prototype)&&(Vi=function(){throw TypeError("Incorrect invocation")},Gi))for(Di in Ki)M[Di]&&Be(M[Di],Vi);if((!Gi||!qi||qi===Bi)&&(qi=Vi.prototype,Gi))for(Di in Ki)M[Di]&&Be(M[Di].prototype,qi);if(Gi&&_e(ji)!==qi&&Be(ji,qi),U&&!D(qi,Wi))for(Di in Li(qi,Wi,{get:function(){return N(this)?this[Hi]:void 0}}),Ki)M[Di]&&H(M[Di],Hi,Di);function zi(){return Yi.call(Zi(this))}var Qi=L("iterator"),Xi=M.Uint8Array,Yi=sn.values,Ji=sn.keys,$i=sn.entries,Zi=function(t){if(N(e=t)&&D(Ki,Ct(e)))return t;var e;throw TypeError("Target is not a typed array")},to=function(t,e,n){if(U){if(n)for(var r in Ki){var i=M[r];i&&D(i.prototype,t)&&delete i.prototype[t]}qi[t]&&!n||Et(qi,t,!n&&Gi&&Fi[t]||e)}},eo=Xi&&Xi.prototype[Qi],no=!!eo&&("values"==eo.name||null==eo.name);to("entries",function(){return $i.call(Zi(this))}),to("keys",function(){return Ji.call(Zi(this))}),to("values",zi,!no),to(Qi,zi,!no);var ro=Object.assign,io=Object.defineProperty,oo=!ro||C(function(){if(U&&1!==ro({b:1},ro(io({},"a",{enumerable:!0,get:function(){io(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return 1;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=ro({},t)[n]||Ne(ro({},e)).join("")!=r})?function(t,e){for(var n=Vt(t),r=arguments.length,i=1,o=ue.f,s=Xt.f;i<r;)for(var a,u=Jt(arguments[i++]),c=o?Ne(u).concat(o(u)):Ne(u),h=c.length,l=0;l<h;)a=c[l++],U&&!s.call(u,a)||(n[a]=u[a]);return n}:ro;function so(a){return function(t){for(var e,n=Rt(t),r=Ne(n),i=r.length,o=0,s=[];o<i;)e=r[o++],U&&!ao.call(n,e)||s.push(a?[e,n[e]]:n[e]);return s}}jt({target:"Object",stat:!0,forced:Object.assign!==oo},{assign:oo}),te.Object.assign;var ao=Xt.f,uo={entries:so(!0),values:so(!1)},co=uo.entries;jt({target:"Object",stat:!0},{entries:function(t){return co(t)}}),te.Object.entries;var ho=uo.values;function lo(t){if(N(e=t)&&(void 0!==(n=e[po])?n:"RegExp"==_t(e)))throw TypeError("The method doesn't accept regular expressions");var e,n;return t}function fo(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[vo]=!1,"/./"[e](n)}catch(t){}}return!1}jt({target:"Object",stat:!0},{values:function(t){return ho(t)}}),te.Object.values;var po=L("match"),vo=L("match");jt({target:"String",proto:!0,forced:!fo("includes")},{includes:function(t,e){return!!~String(kt(this)).indexOf(lo(t),1<arguments.length?e:void 0)}}),Ei("String","includes");var yo,go=Zt.f,mo="".startsWith,bo=Math.min,_o=fo("startsWith");jt({target:"String",proto:!0,forced:!!(_o||!(yo=go(String.prototype,"startsWith"))||yo.writable)&&!_o},{startsWith:function(t,e){var n=String(kt(this));lo(t);var r=xt(bo(1<arguments.length?e:void 0,n.length)),i=String(t);return mo?mo.call(n,i,r):n.slice(r,r+i.length)===i}}),Ei("String","startsWith"),jt({target:"String",proto:!0},{repeat:"".repeat||function(t){var e=String(kt(this)),n="",r=At(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;0<r;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}}),Ei("String","repeat");var wo=L("species"),Eo=L("isConcatSpreadable"),Io=9007199254740991,To="Maximum allowed index exceeded",So=51<=Lr||!C(function(){var t=[];return t[Eo]=!1,t.concat()[0]!==t}),Co=51<=Lr||!C(function(){var t=[];return(t.constructor={})[wo]=function(){return{foo:1}},1!==t.concat(Boolean).foo});function No(t){var e=te.Symbol||(te.Symbol={});D(e,t)||jo(e,t,{value:Uo.f(t)})}function Ao(t,e){var n=ts[t]=Fe(Qo[Wo]);return Go(n,{type:Bo,tag:t,description:e}),U||(n.description=e),n}function ko(e,t){k(e);var n=Rt(t),r=Ne(n).concat(Do(n));return Vo(r,function(t){U&&!Po.call(n,t)||cs(e,t,n[t])}),e}function Oo(t,e){var n=Rt(t),r=O(e,!0);if(n!==zo||!D(ts,r)||D(es,r)){var i=Yo(n,r);return!i||!D(ts,r)||D(n,qo)&&n[qo][r]||(i.enumerable=!0),i}}function Ro(t){var e=$o(Rt(t)),n=[];return Vo(e,function(t){D(ts,t)||D(mt,t)||n.push(t)}),n}jt({target:"Array",proto:!0,forced:!So||!Co},{concat:function(t){for(var e,n,r,i=Vt(this),o=ui(i,0),s=0,a=-1,u=arguments.length;a<u;a++)if(function(t){if(N(t)){var e=t[Eo];return void 0!==e?e:fi(t)}}(r=-1===a?i:arguments[a])){if(n=xt(r.length),Io<s+n)throw TypeError(To);for(e=0;e<n;e++,s++)e in r&&Ai(o,s,r[e])}else{if(Io<=s)throw TypeError(To);Ai(o,s++,r)}return o.length=s,o}});function Po(t){var e=O(t,!0),n=Zo.call(this,e);return!(this===zo&&D(ts,e)&&!D(es,e))&&(!(n||!D(this,e)||!D(ts,e)||D(this,qo)&&this[qo][e])||n)}function Do(t){var e=t===zo,n=$o(e?es:Rt(t)),r=[];return Vo(n,function(t){!D(ts,t)||e&&!D(zo,t)||r.push(ts[t])}),r}var xo=ae.f,Lo={}.toString,Mo="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Fo={f:function(t){return Mo&&"[object Window]"==Lo.call(t)?function(t){try{return xo(t)}catch(t){return Mo.slice()}}(t):xo(Rt(t))}},Uo={f:L},jo=W.f,Vo=vi.forEach,qo=ot("hidden"),Bo="Symbol",Wo="prototype",Ho=L("toPrimitive"),Go=wt.set,Ko=wt.getterFor(Bo),zo=Object[Wo],Qo=M.Symbol,Xo=Dt("JSON","stringify"),Yo=Zt.f,Jo=W.f,$o=Fo.f,Zo=Xt.f,ts=z("symbols"),es=z("op-symbols"),ns=z("string-to-symbol-registry"),rs=z("symbol-to-string-registry"),is=z("wks"),os=M.QObject,ss=!os||!os[Wo]||!os[Wo].findChild,as=U&&C(function(){return 7!=Fe(Jo({},"a",{get:function(){return Jo(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=Yo(zo,e);r&&delete zo[e],Jo(t,e,n),r&&t!==zo&&Jo(zo,e,r)}:Jo,us=$?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof Qo},cs=function(t,e,n){t===zo&&cs(es,e,n),k(t);var r=O(e,!0);return k(n),D(ts,r)?(n.enumerable?(D(t,qo)&&t[qo][r]&&(t[qo][r]=!1),n=Fe(n,{enumerable:R(0,!1)})):(D(t,qo)||Jo(t,qo,R(1,{})),t[qo][r]=!0),as(t,r,n)):Jo(t,r,n)};J||(Et((Qo=function(t){if(this instanceof Qo)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==t?String(t):void 0,n=x(e),r=function(t){this===zo&&r.call(es,t),D(this,qo)&&D(this[qo],n)&&(this[qo][n]=!1),as(this,n,R(1,t))};return U&&ss&&as(zo,n,{configurable:!0,set:r}),Ao(n,e)})[Wo],"toString",function(){return Ko(this).tag}),Et(Qo,"withoutSetter",function(t){return Ao(x(t),t)}),Xt.f=Po,W.f=cs,Zt.f=Oo,ae.f=Fo.f=Ro,ue.f=Do,Uo.f=function(t){return Ao(L(t),t)},U&&(Jo(Qo[Wo],"description",{configurable:!0,get:function(){return Ko(this).description}}),Et(zo,"propertyIsEnumerable",Po,{unsafe:!0}))),jt({global:!0,wrap:!0,forced:!J,sham:!J},{Symbol:Qo}),Vo(Ne(is),function(t){No(t)}),jt({target:Bo,stat:!0,forced:!J},{for:function(t){var e=String(t);if(D(ns,e))return ns[e];var n=Qo(e);return ns[e]=n,rs[n]=e,n},keyFor:function(t){if(!us(t))throw TypeError(t+" is not a symbol");if(D(rs,t))return rs[t]},useSetter:function(){ss=!0},useSimple:function(){ss=!1}}),jt({target:"Object",stat:!0,forced:!J,sham:!U},{create:function(t,e){return void 0===e?Fe(t):ko(Fe(t),e)},defineProperty:cs,defineProperties:ko,getOwnPropertyDescriptor:Oo}),jt({target:"Object",stat:!0,forced:!J},{getOwnPropertyNames:Ro,getOwnPropertySymbols:Do}),jt({target:"Object",stat:!0,forced:C(function(){ue.f(1)})},{getOwnPropertySymbols:function(t){return ue.f(Vt(t))}}),Xo&&jt({target:"JSON",stat:!0,forced:!J||C(function(){var t=Qo();return"[null]"!=Xo([t])||"{}"!=Xo({a:t})||"{}"!=Xo(Object(t))})},{stringify:function(t,e,n){for(var r,i=[t],o=1;o<arguments.length;)i.push(arguments[o++]);if((N(r=e)||void 0!==t)&&!us(t))return fi(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!us(e))return e}),i[1]=e,Xo.apply(null,i)}}),Qo[Wo][Ho]||H(Qo[Wo],Ho,Qo[Wo].valueOf),De(Qo,Bo),mt[qo]=!0,No("asyncIterator");var hs,ls,fs,ps,ds,vs,ys=W.f,gs=M.Symbol;function ms(s,t,e){function n(t){var n=p[t];Et(p,t,"add"==t?function(t){return n.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(h&&!N(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return h&&!N(t)?void 0:n.call(this,0===t?0:t)}:"has"==t?function(t){return!(h&&!N(t))&&n.call(this,0===t?0:t)}:function(t,e){return n.call(this,0===t?0:t,e),this})}var r,i,o,a,u,c=-1!==s.indexOf("Map"),h=-1!==s.indexOf("Weak"),l=c?"set":"add",f=M[s],p=f&&f.prototype,d=f,v={};return ve(s,"function"!=typeof f||!(h||p.forEach&&!C(function(){(new f).entries().next()})))?(d=e.getConstructor(t,s,c,l),ws.REQUIRED=!0):ve(s,!0)&&(i=(r=new d)[l](h?{}:-0,1)!=r,o=C(function(){r.has(1)}),a=Pn(function(t){new f(t)}),u=!h&&C(function(){for(var t=new f,e=5;e--;)t[l](e,e);return!t.has(-0)}),a||(((d=t(function(t,e){gn(t,d,s);var n,r,i,o=(n=new f,Be&&"function"==typeof(r=t.constructor)&&r!==d&&N(i=r.prototype)&&i!==d.prototype&&Be(n,i),n);return null!=e&&Nn(e,o[l],o,c),o})).prototype=p).constructor=d),(o||u)&&(n("delete"),n("has"),c&&n("get")),(u||i)&&n(l),h&&p.clear&&delete p.clear),jt({global:!0,forced:(v[s]=d)!=f},v),De(d,s),h||e.setStrong(d,s,c),d}function bs(t,e,n){var r,i,o,s,a=arguments.length,u=1<a?e:void 0;return yn(this),(r=void 0!==u)&&yn(u),null==t?new this:(i=[],r?(o=0,s=bn(u,2<a?n:void 0,2),Nn(t,function(t){i.push(s(t,o++))})):Nn(t,i.push,i),new this(i))}!U||"function"!=typeof gs||"description"in gs.prototype&&void 0===gs().description||(hs={},Ft(ls=function(t){var e=arguments.length<1||void 0===t?void 0:String(t),n=this instanceof ls?new gs(e):void 0===e?gs():gs(e);return""===e&&(hs[n]=!0),n},gs),(fs=ls.prototype=gs.prototype).constructor=ls,ps=fs.toString,ds="Symbol(test)"==String(gs("test")),vs=/^Symbol\((.*)\)[^)]+$/,ys(fs,"description",{configurable:!0,get:function(){var t=N(this)?this.valueOf():this,e=ps.call(t);if(D(hs,t))return"";var n=ds?e.slice(7,-1):e.replace(vs,"$1");return""===n?void 0:n}}),jt({global:!0,forced:!0},{Symbol:ls})),No("hasInstance"),No("isConcatSpreadable"),No("iterator"),No("match"),No("matchAll"),No("replace"),No("search"),No("species"),No("split"),No("toPrimitive"),No("toStringTag"),No("unscopables"),De(Math,"Math",!0),De(M.JSON,"JSON",!0),te.Symbol,No("asyncDispose"),No("dispose"),No("observable"),No("patternMatch"),No("replaceAll"),Uo.f("iterator");var _s=!C(function(){return Object.isExtensible(Object.preventExtensions({}))}),ws=T(function(t){function n(t){e(t,r,{value:{objectID:"O"+ ++i,weakData:{}}})}var e=W.f,r=x("meta"),i=0,o=Object.isExtensible||function(){return!0},s=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!N(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!D(t,r)){if(!o(t))return"F";if(!e)return"E";n(t)}return t[r].objectID},getWeakData:function(t,e){if(!D(t,r)){if(!o(t))return!0;if(!e)return!1;n(t)}return t[r].weakData},onFreeze:function(t){return _s&&s.REQUIRED&&o(t)&&!D(t,r)&&n(t),t}};mt[r]=!0}),Es=(ws.REQUIRED,ws.fastKey,ws.getWeakData,ws.onFreeze,W.f),Is=ws.fastKey,Ts=wt.set,Ss=wt.getterFor,Cs={getConstructor:function(t,n,r,i){function o(t,e,n){var r,i,o=u(t),s=a(t,e);return s?s.value=n:(o.last=s={index:i=Is(e,!0),key:e,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=s),r&&(r.next=s),U?o.size++:t.size++,"F"!==i&&(o.index[i]=s)),t}function a(t,e){var n,r=u(t),i=Is(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==e)return n}var s=t(function(t,e){gn(t,s,n),Ts(t,{type:n,index:Fe(null),first:void 0,last:void 0,size:0}),U||(t.size=0),null!=e&&Nn(e,t[i],t,r)}),u=Ss(n);return dn(s.prototype,{clear:function(){for(var t=u(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,U?t.size=0:this.size=0},delete:function(t){var e,n,r=u(this),i=a(this,t);return i&&(e=i.next,n=i.previous,delete r.index[i.index],i.removed=!0,n&&(n.next=e),e&&(e.previous=n),r.first==i&&(r.first=e),r.last==i&&(r.last=n),U?r.size--:this.size--),!!i},forEach:function(t,e){for(var n,r=u(this),i=bn(t,1<arguments.length?e:void 0,3);n=n?n.next:r.first;)for(i(n.value,n.key,this);n&&n.removed;)n=n.previous},has:function(t){return!!a(this,t)}}),dn(s.prototype,r?{get:function(t){var e=a(this,t);return e&&e.value},set:function(t,e){return o(this,0===t?0:t,e)}}:{add:function(t){return o(this,t=0===t?0:t,t)}}),U&&Es(s.prototype,"size",{get:function(){return u(this).size}}),s},setStrong:function(t,e,n){var r=e+" Iterator",i=Ss(e),o=Ss(r);Me(t,e,function(t,e){Ts(this,{type:r,target:t,state:i(t),kind:e,last:void 0})},function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:t.target=void 0,done:!0}},n?"entries":"values",!n,!0),vn(e)}};function Ns(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}function As(){for(var t,e=k(this),n=yn(e.delete),r=!0,i=0,o=arguments.length;i<o;i++)t=n.call(e,arguments[i]),r=r&&t;return!!r}function ks(t){return Map.prototype.entries.call(t)}function Os(t,e,n){var r,i=k(this),o=2<arguments.length?n:void 0;if("function"!=typeof e&&"function"!=typeof o)throw TypeError("At least one callback required");return i.has(t)?(r=i.get(t),"function"==typeof e&&(r=e(r),i.set(t,r))):"function"==typeof o&&(r=o(),i.set(t,r)),r}function Rs(t){return Set.prototype.values.call(t)}ms("Map",function(e){return function(t){return e(this,arguments.length?t:void 0)}},Cs),te.Map,jt({target:"Map",stat:!0},{from:bs}),jt({target:"Map",stat:!0},{of:Ns}),jt({target:"Map",proto:!0,real:!0,forced:F},{deleteAll:function(){return As.apply(this,arguments)}}),jt({target:"Map",proto:!0,real:!0,forced:F},{every:function(t,e){var n=k(this),r=ks(n),i=bn(t,1<arguments.length?e:void 0,3);return!Nn(r,function(t,e){if(!i(e,t,n))return Nn.stop()},void 0,!0,!0).stopped}}),jt({target:"Map",proto:!0,real:!0,forced:F},{filter:function(t,e){var n=k(this),r=ks(n),i=bn(t,1<arguments.length?e:void 0,3),o=new(Dn(n,Dt("Map"))),s=yn(o.set);return Nn(r,function(t,e){i(e,t,n)&&s.call(o,t,e)},void 0,!0,!0),o}}),jt({target:"Map",proto:!0,real:!0,forced:F},{find:function(t,e){var n=k(this),r=ks(n),i=bn(t,1<arguments.length?e:void 0,3);return Nn(r,function(t,e){if(i(e,t,n))return Nn.stop(e)},void 0,!0,!0).result}}),jt({target:"Map",proto:!0,real:!0,forced:F},{findKey:function(t,e){var n=k(this),r=ks(n),i=bn(t,1<arguments.length?e:void 0,3);return Nn(r,function(t,e){if(i(e,t,n))return Nn.stop(t)},void 0,!0,!0).result}}),jt({target:"Map",stat:!0},{groupBy:function(t,n){var r=new this;yn(n);var i=yn(r.has),o=yn(r.get),s=yn(r.set);return Nn(t,function(t){var e=n(t);i.call(r,e)?o.call(r,e).push(t):s.call(r,e,[t])}),r}}),jt({target:"Map",proto:!0,real:!0,forced:F},{includes:function(n){return Nn(ks(k(this)),function(t,e){if(e===n||e!=e&&n!=n)return Nn.stop()},void 0,!0,!0).stopped}}),jt({target:"Map",stat:!0},{keyBy:function(t,e){var n=new this;yn(e);var r=yn(n.set);return Nn(t,function(t){r.call(n,e(t),t)}),n}}),jt({target:"Map",proto:!0,real:!0,forced:F},{keyOf:function(n){return Nn(ks(k(this)),function(t,e){if(e===n)return Nn.stop(t)},void 0,!0,!0).result}}),jt({target:"Map",proto:!0,real:!0,forced:F},{mapKeys:function(t,e){var n=k(this),r=ks(n),i=bn(t,1<arguments.length?e:void 0,3),o=new(Dn(n,Dt("Map"))),s=yn(o.set);return Nn(r,function(t,e){s.call(o,i(e,t,n),e)},void 0,!0,!0),o}}),jt({target:"Map",proto:!0,real:!0,forced:F},{mapValues:function(t,e){var n=k(this),r=ks(n),i=bn(t,1<arguments.length?e:void 0,3),o=new(Dn(n,Dt("Map"))),s=yn(o.set);return Nn(r,function(t,e){s.call(o,t,i(e,t,n))},void 0,!0,!0),o}}),jt({target:"Map",proto:!0,real:!0,forced:F},{merge:function(t){for(var e=k(this),n=yn(e.set),r=0;r<arguments.length;)Nn(arguments[r++],n,e,!0);return e}}),jt({target:"Map",proto:!0,real:!0,forced:F},{reduce:function(n,t){var r=k(this),e=ks(r),i=arguments.length<2,o=i?void 0:t;if(yn(n),Nn(e,function(t,e){o=i?(i=!1,e):n(o,e,t,r)},void 0,!0,!0),i)throw TypeError("Reduce of empty map with no initial value");return o}}),jt({target:"Map",proto:!0,real:!0,forced:F},{some:function(t,e){var n=k(this),r=ks(n),i=bn(t,1<arguments.length?e:void 0,3);return Nn(r,function(t,e){if(i(e,t,n))return Nn.stop()},void 0,!0,!0).stopped}}),jt({target:"Map",proto:!0,real:!0,forced:F},{update:function(t,e,n){var r=k(this),i=arguments.length;yn(e);var o=r.has(t);if(!o&&i<3)throw TypeError("Updating absent value");var s=o?r.get(t):yn(2<i?n:void 0)(t,r);return r.set(t,e(s,t,r)),r}}),jt({target:"Map",proto:!0,real:!0,forced:F},{upsert:Os}),jt({target:"Map",proto:!0,real:!0,forced:F},{updateOrInsert:Os}),ms("Set",function(e){return function(t){return e(this,arguments.length?t:void 0)}},Cs),te.Set,jt({target:"Set",stat:!0},{from:bs}),jt({target:"Set",stat:!0},{of:Ns}),jt({target:"Set",proto:!0,real:!0,forced:F},{addAll:function(){return function(){for(var t=k(this),e=yn(t.add),n=0,r=arguments.length;n<r;n++)e.call(t,arguments[n]);return t}.apply(this,arguments)}}),jt({target:"Set",proto:!0,real:!0,forced:F},{deleteAll:function(){return As.apply(this,arguments)}}),jt({target:"Set",proto:!0,real:!0,forced:F},{every:function(t,e){var n=k(this),r=Rs(n),i=bn(t,1<arguments.length?e:void 0,3);return!Nn(r,function(t){if(!i(t,t,n))return Nn.stop()},void 0,!1,!0).stopped}}),jt({target:"Set",proto:!0,real:!0,forced:F},{difference:function(t){var e=k(this),n=new(Dn(e,Dt("Set")))(e),r=yn(n.delete);return Nn(t,function(t){r.call(n,t)}),n}}),jt({target:"Set",proto:!0,real:!0,forced:F},{filter:function(t,e){var n=k(this),r=Rs(n),i=bn(t,1<arguments.length?e:void 0,3),o=new(Dn(n,Dt("Set"))),s=yn(o.add);return Nn(r,function(t){i(t,t,n)&&s.call(o,t)},void 0,!1,!0),o}}),jt({target:"Set",proto:!0,real:!0,forced:F},{find:function(t,e){var n=k(this),r=Rs(n),i=bn(t,1<arguments.length?e:void 0,3);return Nn(r,function(t){if(i(t,t,n))return Nn.stop(t)},void 0,!1,!0).result}}),jt({target:"Set",proto:!0,real:!0,forced:F},{intersection:function(t){var e=k(this),n=new(Dn(e,Dt("Set"))),r=yn(e.has),i=yn(n.add);return Nn(t,function(t){r.call(e,t)&&i.call(n,t)}),n}}),jt({target:"Set",proto:!0,real:!0,forced:F},{isDisjointFrom:function(t){var e=k(this),n=yn(e.has);return!Nn(t,function(t){if(!0===n.call(e,t))return Nn.stop()}).stopped}}),jt({target:"Set",proto:!0,real:!0,forced:F},{isSubsetOf:function(t){var e=function(t){var e=_n(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return k(e.call(t))}(this),n=k(t),r=n.has;return"function"!=typeof r&&(n=new(Dt("Set"))(t),r=yn(n.has)),!Nn(e,function(t){if(!1===r.call(n,t))return Nn.stop()},void 0,!1,!0).stopped}}),jt({target:"Set",proto:!0,real:!0,forced:F},{isSupersetOf:function(t){var e=k(this),n=yn(e.has);return!Nn(t,function(t){if(!1===n.call(e,t))return Nn.stop()}).stopped}}),jt({target:"Set",proto:!0,real:!0,forced:F},{join:function(t){var e=Rs(k(this)),n=void 0===t?",":String(t),r=[];return Nn(e,r.push,r,!1,!0),r.join(n)}}),jt({target:"Set",proto:!0,real:!0,forced:F},{map:function(t,e){var n=k(this),r=Rs(n),i=bn(t,1<arguments.length?e:void 0,3),o=new(Dn(n,Dt("Set"))),s=yn(o.add);return Nn(r,function(t){s.call(o,i(t,t,n))},void 0,!1,!0),o}}),jt({target:"Set",proto:!0,real:!0,forced:F},{reduce:function(e,t){var n=k(this),r=Rs(n),i=arguments.length<2,o=i?void 0:t;if(yn(e),Nn(r,function(t){o=i?(i=!1,t):e(o,t,t,n)},void 0,!1,!0),i)throw TypeError("Reduce of empty set with no initial value");return o}}),jt({target:"Set",proto:!0,real:!0,forced:F},{some:function(t,e){var n=k(this),r=Rs(n),i=bn(t,1<arguments.length?e:void 0,3);return Nn(r,function(t){if(i(t,t,n))return Nn.stop()},void 0,!1,!0).stopped}}),jt({target:"Set",proto:!0,real:!0,forced:F},{symmetricDifference:function(t){var e=k(this),n=new(Dn(e,Dt("Set")))(e),r=yn(n.delete),i=yn(n.add);return Nn(t,function(t){r.call(n,t)||i.call(n,t)}),n}}),jt({target:"Set",proto:!0,real:!0,forced:F},{union:function(t){var e=k(this),n=new(Dn(e,Dt("Set")))(e);return Nn(t,yn(n.add),n),n}});var Ps=Math.floor;jt({target:"Number",stat:!0},{isInteger:function(t){return!N(t)&&isFinite(t)&&Ps(t)===t}}),te.Number.isInteger,jt({target:"Number",stat:!0},{isNaN:function(t){return t!=t}}),te.Number.isNaN;var Ds=function(t,e){return(Ds=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function xs(t,e){function n(){this.constructor=t}Ds(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Ls=function(){return(Ls=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Ms(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{o(u.next(t))}catch(t){e(t)}}function i(t){try{o(u.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,i)}o((u=u.apply(t,s||[])).next())})}function Fs(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function Us(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function js(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function Vs(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(js(arguments[e]));return t}function qs(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function Bs(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128):e[n++]=i>>12|224,e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}function Ws(t){try{return zs.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}var Hs={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},Gs=function(t,e){if(!t)throw Ks(e)},Ks=function(t){return new Error("Firebase Database ("+Hs.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},zs={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[h],n[l],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Bs(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i,o,s,a=t[n++];a<128?e[r++]=String.fromCharCode(a):191<a&&a<224?(o=t[n++],e[r++]=String.fromCharCode((31&a)<<6|63&o)):239<a&&a<365?(i=((7&a)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536,e[r++]=String.fromCharCode(55296+(i>>10)),e[r++]=String.fromCharCode(56320+(1023&i))):(o=t[n++],s=t[n++],e[r++]=String.fromCharCode((15&a)<<12|(63&o)<<6|63&s))}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c,h,l=o<<2|s>>4;r.push(l),64!==a&&(c=s<<4&240|a>>2,r.push(c),64!==u&&(h=a<<6&192|u,r.push(h)))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function Qs(t){return Xs(void 0,t)}function Xs(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=Xs(t[n],e[n]));return t}var Ys=(Js.prototype.wrapCallback=function(n){var r=this;return function(t,e){t?r.reject(t):r.resolve(e),"function"==typeof n&&(r.promise.catch(function(){}),1===n.length?n(t):n(t,e))}},Js);function Js(){var n=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}function $s(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Zs(){return"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($s())}function ta(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function ea(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function na(){return!0===Hs.NODE_ADMIN}function ra(){return"indexedDB"in self&&null!==indexedDB}function ia(){return new Promise(function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}})}function oa(){return navigator&&navigator.cookieEnabled}var sa,aa="FirebaseError",ua=(xs(ca,sa=Error),ca);function ca(t,e){var n=sa.call(this,e)||this;return n.code=t,n.name=aa,Object.setPrototypeOf(n,ca.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,ha.prototype.create),n}var ha=(la.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r,i=e[0]||{},o=this.service+"/"+t,s=this.errors[t],a=s?(r=i,s.replace(fa,function(t,e){var n=r[e];return null!=n?String(n):"<"+e+"?>"})):"Error",u=this.serviceName+": "+a+" ("+o+").",c=new ua(o,u),h=0,l=Object.keys(i);h<l.length;h++){var f=l[h];"_"!==f.slice(-1)&&(f in c&&console.warn('Overwriting FirebaseError base field "'+f+'" can cause unexpected behavior.'),c[f]=i[f])}return c},la);function la(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var fa=/\{\$([^}]+)}/g;function pa(t){return JSON.parse(t)}function da(t){return JSON.stringify(t)}function va(t){var e={},n={},r={},i="";try{var o=t.split("."),e=pa(Ws(o[0])||""),n=pa(Ws(o[1])||""),i=o[2],r=n.d||{};delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}}function ya(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ga(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function ma(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ba(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}var _a=(wa.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},wa.prototype.compress_=function(t,e){e=e||0;var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}for(var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4],r=0;r<80;r++)s=r<40?r<20?(o=h^u&(c^h),1518500249):(o=u^c^h,1859775393):r<60?(o=u&c|h&(u|c),2400959708):(o=u^c^h,3395469782),i=(a<<5|a>>>27)+o+l+s+n[r]&4294967295,l=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i;this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},wa.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},wa.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);for(var r=0,n=0;n<5;n++)for(var i=24;0<=i;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},wa);function wa(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}function Ea(t,e){var n=new Ia(t,e);return n.subscribe.bind(n)}var Ia=(Ta.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},Ta.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},Ta.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},Ta.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t){if("object"==typeof t&&null!==t)for(var e=0,n=["next","error","complete"];e<n.length;e++){var r=n[e];if(r in t&&"function"==typeof t[r])return 1}}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=Sa),void 0===r.error&&(r.error=Sa),void 0===r.complete&&(r.complete=Sa);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},Ta.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],--this.observerCount,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},Ta.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},Ta.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},Ta.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},Ta);function Ta(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}function Sa(){}function Ca(t,e,n,r){var i;if(r<e?i="at least "+e:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}function Na(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+(r+" argument ")}function Aa(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(Na(t,e,r)+"must be a valid function.")}function ka(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(Na(t,e,r)+"must be a valid context object.")}function Oa(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:55296<=r&&r<=56319?(e+=4,n++):e+=3}return e}var Ra=(Pa.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},Pa.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},Pa.prototype.setServiceProps=function(t){return this.serviceProps=t,this},Pa);function Pa(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var Da="[DEFAULT]",xa=(La.prototype.get=function(t){void 0===t&&(t=Da);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new Ys;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},La.prototype.getImmediate=function(t){var e=Ls({identifier:Da,optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(o)return o;if(r)return null;throw Error("Service "+this.name+" is not available")}catch(t){if(r)return null;throw t}},La.prototype.getComponent=function(){return this.component},La.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if("EAGER"===(this.component=t).instantiationMode)try{this.getOrInitializeService(Da)}catch(t){}try{for(var r=Us(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=js(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(u);a.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},La.prototype.clearInstance=function(t){void 0===t&&(t=Da),this.instancesDeferred.delete(t),this.instances.delete(t)},La.prototype.delete=function(){return Ms(this,void 0,void 0,function(){var e;return Fs(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(e.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))];case 1:return t.sent(),[2]}})})},La.prototype.isComponentSet=function(){return null!=this.component},La.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,t===Da?void 0:t),this.instances.set(t,e)),e||null},La.prototype.normalizeInstanceIdentifier=function(t){return!this.component||this.component.multipleInstances?t:Da},La);function La(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}var Ma,Fa=(Ua.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},Ua.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},Ua.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new xa(t,this);return this.providers.set(t,e),e},Ua.prototype.getProviders=function(){return Array.from(this.providers.values())},Ua);function Ua(t){this.name=t,this.providers=new Map}function ja(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var Va,qa,Ba=[];function Wa(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=za[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,ja(["["+i+"]  "+t.name+":"],n))}}(qa=Va=Va||{})[qa.DEBUG=0]="DEBUG",qa[qa.VERBOSE=1]="VERBOSE",qa[qa.INFO=2]="INFO",qa[qa.WARN=3]="WARN",qa[qa.ERROR=4]="ERROR",qa[qa.SILENT=5]="SILENT";var Ha,Ga={debug:Va.DEBUG,verbose:Va.VERBOSE,info:Va.INFO,warn:Va.WARN,error:Va.ERROR,silent:Va.SILENT},Ka=Va.INFO,za=((Ma={})[Va.DEBUG]="log",Ma[Va.VERBOSE]="log",Ma[Va.INFO]="info",Ma[Va.WARN]="warn",Ma[Va.ERROR]="error",Ma),Qa=(Object.defineProperty(Xa.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Va))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),Xa.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?Ga[t]:t},Object.defineProperty(Xa.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(Xa.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),Xa.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,ja([this,Va.DEBUG],t)),this._logHandler.apply(this,ja([this,Va.DEBUG],t))},Xa.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,ja([this,Va.VERBOSE],t)),this._logHandler.apply(this,ja([this,Va.VERBOSE],t))},Xa.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,ja([this,Va.INFO],t)),this._logHandler.apply(this,ja([this,Va.INFO],t))},Xa.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,ja([this,Va.WARN],t)),this._logHandler.apply(this,ja([this,Va.WARN],t))},Xa.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,ja([this,Va.ERROR],t)),this._logHandler.apply(this,ja([this,Va.ERROR],t))},Xa);function Xa(t){this.name=t,this._logLevel=Ka,this._logHandler=Wa,this._userLogHandler=null,Ba.push(this)}function Ya(e){Ba.forEach(function(t){t.setLogLevel(e)})}var Ja,$a=((Ha={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Ha["bad-app-name"]="Illegal App name: '{$appName}",Ha["duplicate-app"]="Firebase App named '{$appName}' already exists",Ha["app-deleted"]="Firebase App named '{$appName}' already deleted",Ha["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Ha["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Ha),Za=new ha("app","Firebase",$a),tu="@firebase/app",eu="[DEFAULT]",nu=((Ja={})[tu]="fire-core",Ja["@firebase/analytics"]="fire-analytics",Ja["@firebase/auth"]="fire-auth",Ja["@firebase/database"]="fire-rtdb",Ja["@firebase/functions"]="fire-fn",Ja["@firebase/installations"]="fire-iid",Ja["@firebase/messaging"]="fire-fcm",Ja["@firebase/performance"]="fire-perf",Ja["@firebase/remote-config"]="fire-rc",Ja["@firebase/storage"]="fire-gcs",Ja["@firebase/firestore"]="fire-fst",Ja["fire-js"]="fire-js",Ja["firebase-wrapper"]="fire-js-all",Ja),ru=new Qa("@firebase/app"),iu=(Object.defineProperty(ou.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(ou.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(ou.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),ou.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map(function(t){return t.delete()}))}).then(function(){e.isDeleted_=!0})},ou.prototype._getService=function(t,e){return void 0===e&&(e=eu),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},ou.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=eu),this.container.getProvider(t).clearInstance(e)},ou.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){ru.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},ou.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},ou.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Za.create("app-deleted",{appName:this.name_})},ou);function ou(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Qs(t),this.container=new Fa(e.name),this._addComponent(new Ra("app",function(){return o},"PUBLIC"));try{for(var s=Us(this.firebase_.INTERNAL.components.values()),a=s.next();!a.done;a=s.next()){var u=a.value;this._addComponent(u)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}iu.prototype.name&&iu.prototype.options||iu.prototype.delete||console.log("dc");var su,au=function t(){var u,c,h,l,e=(u=iu,c={},h=new Map,(l={__esModule:!0,initializeApp:function(t,e){void 0===e&&(e={}),"object"==typeof e&&null!==e||(e={name:e});var n=e;void 0===n.name&&(n.name=eu);var r=n.name;if("string"!=typeof r||!r)throw Za.create("bad-app-name",{appName:String(r)});if(ya(c,r))throw Za.create("duplicate-app",{appName:r});var i=new u(t,n,l);return c[r]=i},app:f,registerVersion:function(t,e,n){var r,i=null!==(r=nu[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var a=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&a.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&a.push("and"),s&&a.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void ru.warn(a.join(" "))}p(new Ra(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:Ya,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw Za.create("invalid-log-argument",{appName:name});!function(s,e){for(var t=0,n=Ba;t<n.length;t++)!function(t){var o=null;e&&e.level&&(o=Ga[e.level]),t.userLogHandler=null===s?null:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}}).filter(function(t){return t}).join(" ");e>=(null!=o?o:t.logLevel)&&s({level:Va[e].toLowerCase(),message:i,args:n,type:t.name})}}(n[t])}(t,e)},apps:null,SDK_VERSION:"7.18.0-202071122108",INTERNAL:{registerComponent:p,removeApp:function(t){delete c[t]},components:h,useAsService:function(t,e){return"serverAuth"===e?null:e}}}).default=l,Object.defineProperty(l,"apps",{get:function(){return Object.keys(c).map(function(t){return c[t]})}}),f.App=u,l);function f(t){if(!ya(c,t=t||eu))throw Za.create("no-app",{appName:t});return c[t]}function p(n){var t,e,r,i=n.name;if(h.has(i))return ru.debug("There were multiple attempts to register component "+i+"."),"PUBLIC"===n.type?l[i]:null;h.set(i,n),"PUBLIC"===n.type&&(r=function(t){if(void 0===t&&(t=f()),"function"!=typeof t[i])throw Za.create("invalid-app-argument",{appName:i});return t[i]()},void 0!==n.serviceProps&&Xs(r,n.serviceProps),l[i]=r,u.prototype[i]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,i).apply(this,n.multipleInstances?t:[])});try{for(var o=Us(Object.keys(c)),s=o.next();!s.done;s=o.next()){var a=s.value;c[a]._addComponent(n)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return"PUBLIC"===n.type?l[i]:null}return e.INTERNAL=Ls(Ls({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Xs(e,t)},createSubscribe:Ea,ErrorFactory:ha,deepExtend:Xs}),e}(),uu=(cu.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if("VERSION"!==(null==(e=t.getComponent())?void 0:e.type))return null;var e,n=t.getImmediate();return n.library+"/"+n.version}).filter(function(t){return t}).join(" ")},cu);function cu(t){this.container=t}"object"==typeof self&&self.self===self&&void 0!==self.firebase&&(ru.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  "),(su=self.firebase.SDK_VERSION)&&0<=su.indexOf("LITE")&&ru.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    "));var hu=au.initializeApp;au.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return}}()&&ru.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),hu.apply(void 0,t)};var lu,Ll=au;(lu=Ll).INTERNAL.registerComponent(new Ra("platform-logger",function(t){return new uu(t)},"PRIVATE")),lu.registerVersion(tu,"0.6.10-202071122108",void 0),lu.registerVersion("fire-js",""),Ll.registerVersion("firebase","7.18.0-202071122108","app"),function(){var t,o="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},u=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function c(t){var e,n,r="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return r?r.call(t):{next:(e=t,n=0,function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}})}}!function(t,e){if(e){var n=u;t=t.split(".");for(var r=0;r<t.length-1;r++){var i=t[r];i in n||(n[i]={}),n=n[i]}(e=e(r=n[t=t[t.length-1]]))!=r&&null!=e&&o(n,t,{configurable:!0,writable:!0,value:e})}}("Promise",function(t){function s(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function e(){this.a=null}function a(e){return e instanceof s?e:new s(function(t){t(e)})}if(t)return t;e.prototype.b=function(t){var e;null==this.a&&(this.a=[],(e=this).c(function(){e.g()})),this.a.push(t)};var n=u.setTimeout;e.prototype.c=function(t){n(t,0)},e.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},e.prototype.f=function(t){this.c(function(){throw t})},s.prototype.f=function(){function t(e){return function(t){r||(r=!0,e.call(n,t))}}var n=this,r=!1;return{resolve:t(this.m),reject:t(this.g)}},s.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof s)this.s(t);else{t:switch(typeof t){case"object":var e=null!=t;break t;case"function":e=!0;break t;default:e=!1}e?this.u(t):this.h(t)}},s.prototype.u=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.w(e,t):this.h(t)},s.prototype.g=function(t){this.i(2,t)},s.prototype.h=function(t){this.i(1,t)},s.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},s.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)i.b(this.a[t]);this.a=null}};var i=new e;return s.prototype.s=function(t){var e=this.f();t.Oa(e.resolve,e.reject)},s.prototype.w=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},s.prototype.then=function(t,e){function n(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(t){i(t)}}:t}var r,i,o=new s(function(t,e){r=t,i=e});return this.Oa(n(t,r),n(e,i)),o},s.prototype.catch=function(t){return this.then(void 0,t)},s.prototype.Oa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?i.b(n):this.a.push(n)},s.resolve=a,s.reject=function(n){return new s(function(t,e){e(n)})},s.race=function(i){return new s(function(t,e){for(var n=c(i),r=n.next();!r.done;r=n.next())a(r.value).Oa(t,e)})},s.all=function(t){var e=c(t),o=e.next();return o.done?a([]):new s(function(n,t){for(var r=[],i=0;r.push(void 0),i++,a(o.value).Oa(function(e){return function(t){r[e]=t,0==--i&&n(r)}}(r.length-1),t),!(o=e.next()).done;);})},s});var h=h||{},l=this||self,f=/^[\w+/_-]+[=]{0,2}$/,p=null;function s(){}function n(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function d(t){var e=n(t);return"array"==e||"object"==e&&"number"==typeof t.length}function v(t){return"function"==n(t)}function y(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var r="closure_uid_"+(1e9*Math.random()>>>0),i=0;function a(t,e,n){return t.call.apply(t.bind,arguments)}function g(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function m(t,e,n){return(m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:g).apply(null,arguments)}function b(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var _=Date.now||function(){return+new Date};function e(t,e){function n(){}n.prototype=e.prototype,t.Za=e.prototype,t.prototype=new n,t.prototype.constructor=t}function w(t,e,n){this.code=T+t,this.message=e||S[t]||"",this.a=n||null}function E(t){var e=t&&t.code;return e?new w(e.substring(T.length),t.message,t.serverResponse):null}e(w,Error),w.prototype.v=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},w.prototype.toJSON=function(){return this.v()};var I,T="auth/",S={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},C={hd:{Ra:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},pd:{Ra:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://securetoken.googleapis.com/v1/token",Ua:"https://identitytoolkit.googleapis.com/v2/",id:"p"},rd:{Ra:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},sd:{Ra:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Xa:"https://test-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function N(t){for(var e in C)if(C[e].id===t)return{firebaseEndpoint:(t=C[e]).Ra,secureTokenEndpoint:t.Xa,identityPlatformEndpoint:t.Ua};return null}function A(t){if(t)try{return t.$goog_Thenable}catch(t){return}}function k(t){var e;Error.captureStackTrace?Error.captureStackTrace(this,k):(e=Error().stack)&&(this.stack=e),t&&(this.message=String(t))}function O(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");k.call(this,n+t[r])}function R(t,e){throw new O("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function P(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function D(t,e){t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}function x(){this.b=this.a=null}I=N("__EID__")?"__EID__":void 0,e(k,Error),k.prototype.name="CustomError",e(O,k),O.prototype.name="AssertionError",P.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t};var L=new P(function(){return new M},function(t){t.reset()});function M(){this.next=this.b=this.a=null}x.prototype.add=function(t,e){var n=L.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},M.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},M.prototype.reset=function(){this.next=this.b=this.a=null};var F=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},U=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},j=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n,r=t.length,i=[],o=0,s="string"==typeof t?t.split(""):t,a=0;a<r;a++)a in s&&(n=s[a],e.call(void 0,n,a,t)&&(i[o++]=n));return i},V=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},q=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function B(t,e){return 0<=F(t,e)}function W(t,e){var n;return(n=0<=(e=F(t,e)))&&Array.prototype.splice.call(t,e,1),n}function H(n,r){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(n,function(t,e){r.call(void 0,t,e,n)&&Array.prototype.splice.call(n,e,1).length})}function G(t){return Array.prototype.concat.apply([],arguments)}function K(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var z,Q=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},X=/&/g,Y=/</g,J=/>/g,$=/"/g,Z=/'/g,tt=/\x00/g,et=/[\x00&<>"']/;function nt(t,e){return-1!=t.indexOf(e)}function rt(t,e){return t<e?-1:e<t?1:0}t:{var it=l.navigator;if(it){var ot=it.userAgent;if(ot){z=ot;break t}}z=""}function st(t){return nt(z,t)}function at(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ut(t){for(var e in t)return;return 1}function ct(t){var e,n={};for(e in t)n[e]=t[e];return n}var ht="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<ht.length;o++)n=ht[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ft(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||l).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(y(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;R("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function pt(t,e){this.a=t===yt&&e||"",this.b=vt}function dt(t){return t instanceof pt&&t.constructor===pt&&t.b===vt?t.a:(R("expected object of type Const, got '"+t+"'"),"type_error:Const")}pt.prototype.ra=!0,pt.prototype.qa=function(){return this.a},pt.prototype.toString=function(){return"Const{"+this.a+"}"};var vt={},yt={},gt=new pt(yt,"");function mt(t,e){this.a=t===Tt&&e||"",this.b=It}function bt(t){return t instanceof mt&&t.constructor===mt&&t.b===It?t.a:(R("expected object of type TrustedResourceUrl, got '"+t+"' of type "+n(t)),"type_error:TrustedResourceUrl")}function _t(t,n){var r=dt(t);if(!Et.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return t=r.replace(wt,function(t,e){if(!Object.prototype.hasOwnProperty.call(n,e))throw Error('Found marker, "'+e+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(n));return(t=n[e])instanceof pt?dt(t):encodeURIComponent(String(t))}),new mt(Tt,t)}mt.prototype.ra=!0,mt.prototype.qa=function(){return this.a.toString()},mt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var wt=/%{(\w+)}/g,Et=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,It={},Tt={};function St(t,e){this.a=t===Ot&&e||"",this.b=kt}function Ct(t){return t instanceof St&&t.constructor===St&&t.b===kt?t.a:(R("expected object of type SafeUrl, got '"+t+"' of type "+n(t)),"type_error:SafeUrl")}St.prototype.ra=!0,St.prototype.qa=function(){return this.a.toString()},St.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Nt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function At(t){return t instanceof St?t:(t="object"==typeof t&&t.ra?t.qa():String(t),Nt.test(t)||(t="about:invalid#zClosurez"),new St(Ot,t))}var kt={},Ot={};function Rt(){this.a="",this.b=Dt}function Pt(t){return t instanceof Rt&&t.constructor===Rt&&t.b===Dt?t.a:(R("expected object of type SafeHtml, got '"+t+"' of type "+n(t)),"type_error:SafeHtml")}Rt.prototype.ra=!0,Rt.prototype.qa=function(){return this.a.toString()},Rt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Dt={};function xt(t){var e=new Rt;return e.a=t,e}xt("<!DOCTYPE html>");var Lt=xt("");function Mt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Ft(t){return et.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(X,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(Y,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(J,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace($,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(Z,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(tt,"&#0;"))),t}function Ut(t){return Ut[" "](t),t}xt("<br>"),Ut[" "]=s;var jt,Vt,qt=st("Opera"),Bt=st("Trident")||st("MSIE"),Wt=st("Edge"),Ht=Wt||Bt,Gt=st("Gecko")&&!(nt(z.toLowerCase(),"webkit")&&!st("Edge"))&&!(st("Trident")||st("MSIE"))&&!st("Edge"),Kt=nt(z.toLowerCase(),"webkit")&&!st("Edge");function zt(){var t=l.document;return t?t.documentMode:void 0}t:{var Qt="",Xt=(Vt=z,Gt?/rv:([^\);]+)(\)|;)/.exec(Vt):Wt?/Edge\/([\d\.]+)/.exec(Vt):Bt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Vt):Kt?/WebKit\/(\S+)/.exec(Vt):qt?/(?:Version)[ \/]?(\S+)/.exec(Vt):void 0);if(Xt&&(Qt=Xt?Xt[1]:""),Bt){var Yt=zt();if(null!=Yt&&Yt>parseFloat(Qt)){jt=String(Yt);break t}}jt=Qt}var Jt,$t={};function Zt(a){return t=a,e=function(){for(var t=0,e=Q(String(jt)).split("."),n=Q(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=rt(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||rt(0==o[2].length,0==s[2].length)||rt(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t},n=$t,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e();var t,e,n}Jt=l.document&&Bt?zt():void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(t){}var te=!Bt||9<=Number(Jt);function ee(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ne(n,t){at(t,function(t,e){t&&"object"==typeof t&&t.ra&&(t=t.qa()),"style"==e?n.style.cssText=t:"class"==e?n.className=t:"for"==e?n.htmlFor=t:oe.hasOwnProperty(e)?n.setAttribute(oe[e],t):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?n.setAttribute(e,t):n[e]=t})}var re,ie,oe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function se(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ae(t){l.setTimeout(function(){throw t},0)}function ue(t,e){var n;ie=ie||(l.Promise&&l.Promise.resolve?(n=l.Promise.resolve(void 0),function(){n.then(le)}):function(){var t=le;!v(l.setImmediate)||l.Window&&l.Window.prototype&&!st("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(re=re||function(){var t=l.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!st("Presto")&&(t=function(){var t,e;(o=se(document,"IFRAME")).style.display="none",t=o,e=new mt(Tt,dt(gt)),ft(t,"HTMLIFrameElement"),t.src=bt(e).toString(),document.documentElement.appendChild(o);var n=o.contentWindow;(o=n.document).open(),o.write(Pt(Lt)),o.close();var r="callImmediate"+Math.random(),i="file:"==n.location.protocol?"*":n.location.protocol+"//"+n.location.host,o=m(function(t){"*"!=i&&t.origin!=i||t.data!=r||this.port1.onmessage()},this);n.addEventListener("message",o,!1),this.port1={},this.port2={postMessage:function(){n.postMessage(r,i)}}}),void 0===t||st("Trident")||st("MSIE"))return function(t){l.setTimeout(t,0)};var e=new t,n={},r=n;return e.port1.onmessage=function(){var t;void 0!==n.next&&(t=(n=n.next).Db,n.Db=null,t())},function(t){r.next={Db:t},r=r.next,e.port2.postMessage(0)}}())(t):l.setImmediate(t)}),ce||(ie(),ce=!0),he.add(t,e)}var ce=!1,he=new x;function le(){for(var t,e,n;n=e=void 0,n=null,(e=he).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){ae(t)}D(L,t)}ce=!1}function fe(t,e){if(this.a=pe,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=s)try{var n=this;t.call(e,function(t){Se(n,de,t)},function(t){if(!(t instanceof Pe))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Se(n,ve,t)})}catch(t){Se(this,ve,t)}}var pe=0,de=2,ve=3;function ye(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}ye.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var ge=new P(function(){return new ye},function(t){t.reset()});function me(t,e,n){var r=ge.get();return r.g=t,r.b=e,r.f=n,r}function be(t){if(t instanceof fe)return t;var e=new fe(s);return Se(e,de,t),e}function _e(n){return new fe(function(t,e){e(n)})}function we(t,e,n){Ce(t,e,n,null)||ue(b(e,t))}function Ee(n){return new fe(function(r){var i=n.length,o=[];if(i)for(var t=function(t,e,n){i--,o[t]=e?{Mb:!0,value:n}:{Mb:!1,reason:n},0==i&&r(o)},e=0;e<n.length;e++)we(n[e],b(t,e,!0),b(t,e,!1));else r(o)})}function Ie(t,e){t.b||t.a!=de&&t.a!=ve||Ne(t),t.f?t.f.next=e:t.b=e,t.f=e}function Te(t,i,o,s){var e=me(null,null,null);return e.a=new fe(function(n,r){e.g=i?function(t){try{var e=i.call(s,t);n(e)}catch(t){r(t)}}:n,e.b=o?function(t){try{var e=o.call(s,t);void 0===e&&t instanceof Pe?r(t):n(e)}catch(t){r(t)}}:r}),Ie(e.a.c=t,e),e.a}function Se(t,e,n){var r,i;t.a==pe&&(t===n&&(e=ve,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Ce(n,t.Yc,t.Zc,t)||(t.i=n,t.a=e,t.c=null,Ne(t),e!=ve||n instanceof Pe||(i=n,(r=t).g=!0,ue(function(){r.g&&Re.call(null,i)}))))}function Ce(t,e,n,r){if(t instanceof fe)return Ie(t,me(e||s,n||null,r)),1;if(A(t))return t.then(e,n,r),1;if(y(t))try{var i=t.then;if(v(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,function(t){s||(s=!0,n.call(i,t))},o)}catch(t){o(t)}}(t,i,e,n,r),1}catch(t){return n.call(r,t),1}}function Ne(t){t.h||(t.h=!0,ue(t.ec,t))}function Ae(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function ke(t,e,n,r){if(n==ve&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Oe(e,n,r);else try{e.c?e.g.call(e.f):Oe(e,n,r)}catch(t){Re.call(null,t)}D(ge,e)}function Oe(t,e,n){e==de?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}fe.prototype.then=function(t,e,n){return Te(this,v(t)?t:null,v(e)?e:null,n)},fe.prototype.$goog_Thenable=!0,(t=fe.prototype).ma=function(t,e){return(t=me(t,t,e)).c=!0,Ie(this,t),this},t.o=function(t,e){return Te(this,null,t,e)},t.cancel=function(t){var e;this.a==pe&&(e=new Pe(t),ue(function(){!function t(e,n){if(e.a==pe)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,a.a==e&&(o=a),!(o&&1<i)));a=a.next)o||(s=a);o&&(r.a==pe&&1==i?t(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):Ae(r),ke(r,o,ve,n)))}e.c=null}else Se(e,ve,n)}(this,e)},this))},t.Yc=function(t){this.a=pe,Se(this,de,t)},t.Zc=function(t){this.a=pe,Se(this,ve,t)},t.ec=function(){for(var t;t=Ae(this);)ke(this,t,this.a,this.i);this.h=!1};var Re=ae;function Pe(t){k.call(this,t)}function De(){this.wa=this.wa,this.na=this.na}e(Pe,k);var xe=0;function Le(t){var e;t.wa||(t.wa=!0,t.Ba(),0==xe)||(e=t,Object.prototype.hasOwnProperty.call(e,r)&&e[r]||(e[r]=++i))}De.prototype.wa=!(Pe.prototype.name="cancel"),De.prototype.Ba=function(){if(this.na)for(;this.na.length;)this.na.shift()()};var Me=Object.freeze||function(t){return t},Fe=!Bt||9<=Number(Jt),Ue=Bt&&!Zt("9"),je=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{l.addEventListener("test",s,e),l.removeEventListener("test",s,e)}catch(t){}return t}();function Ve(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function qe(t,e){if(Ve.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Gt){t:{try{Ut(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Be[t.pointerType]||"",(this.a=t).defaultPrevented&&this.preventDefault()}}Ve.prototype.preventDefault=function(){this.defaultPrevented=!0},e(qe,Ve);var Be=Me({2:"touch",3:"pen",4:"mouse"});qe.prototype.preventDefault=function(){qe.Za.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ue)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}},qe.prototype.f=function(){return this.a};var We="closure_listenable_"+(1e6*Math.random()|0),He=0;function Ge(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ta=i,this.key=++He,this.ua=this.Na=!1}function Ke(t){t.ua=!0,t.listener=null,t.proxy=null,t.src=null,t.Ta=null}function ze(t){this.src=t,this.a={},this.b=0}function Qe(t,e){var n=e.type;n in t.a&&W(t.a[n],e)&&(Ke(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function Xe(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ua&&o.listener==e&&o.capture==!!n&&o.Ta==r)return i}return-1}ze.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Xe(t,e,r,i);return-1<s?(e=t[s],n||(e.Na=!1)):((e=new Ge(e,this.src,o,!!r,i)).Na=n,t.push(e)),e};var Ye="closure_lm_"+(1e6*Math.random()|0),Je={};function $e(t,e,n,r,i){if(r&&r.once)tn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)$e(t,e[o],n,r,i);else n=hn(n),t&&t[We]?fn(t,e,n,y(r)?!!r.capture:!!r,i):Ze(t,e,n,!1,r,i)}function Ze(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s,a,u=y(i)?!!i.capture:!!i,c=un(t);if(c||(t[Ye]=c=new ze(t)),!(n=c.add(e,n,r,u,o)).proxy)if(s=an,r=a=Fe?function(t){return s.call(a.src,a.listener,t)}:function(t){if(!(t=s.call(a.src,a.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)je||(i=u),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(rn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function tn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)tn(t,e[o],n,r,i);else n=hn(n),t&&t[We]?pn(t,e,n,y(r)?!!r.capture:!!r,i):Ze(t,e,n,!0,r,i)}function en(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)en(t,e[o],n,r,i);else r=y(r)?!!r.capture:!!r,n=hn(n),t&&t[We]?(t=t.u,(e=String(e).toString())in t.a&&-1<(n=Xe(o=t.a[e],n,r,i))&&(Ke(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):(t=t&&un(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Xe(e,n,r,i)),(n=-1<t?e[t]:null)&&nn(n))}function nn(t){var e,n,r;"number"!=typeof t&&t&&!t.ua&&((e=t.src)&&e[We]?Qe(e.u,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(rn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=un(e))?(Qe(n,t),0==n.b&&(n.src=null,e[Ye]=null)):Ke(t)))}function rn(t){return t in Je?Je[t]:Je[t]="on"+t}function on(t,e,n,r){var i=!0;if((t=un(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.ua&&(o=sn(o,r),i=i&&!1!==o)}return i}function sn(t,e){var n=t.listener,r=t.Ta||t.src;return t.Na&&nn(t),n.call(r,e)}function an(t,e){if(t.ua)return!0;if(Fe)return sn(t,new qe(e,this));if(!e)t:{e=["window","event"];for(var n=l,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new qe(r=e,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}!i&&null!=r.returnValue||(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=on(r[i],t,!0,e),n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=on(r[i],t,!1,e),n=n&&o}return n}function un(t){return(t=t[Ye])instanceof ze?t:null}var cn="__closure_events_fn_"+(1e9*Math.random()>>>0);function hn(e){return v(e)?e:(e[cn]||(e[cn]=function(t){return e.handleEvent(t)}),e[cn])}function ln(){De.call(this),this.u=new ze(this),(this.Yb=this).eb=null}function fn(t,e,n,r,i){t.u.add(String(e),n,!1,r,i)}function pn(t,e,n,r,i){t.u.add(String(e),n,!0,r,i)}function dn(t,e,n,r){if(!(e=t.u.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,a,u=e[o];u&&!u.ua&&u.capture==n&&(s=u.listener,a=u.Ta||u.src,u.Na&&Qe(t.u,u),i=!1!==s.call(a,r)&&i)}return i&&!r.defaultPrevented}function vn(t,e,n){if(v(t))n&&(t=m(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=m(t.handleEvent,t)}return 2147483647<Number(e)?-1:l.setTimeout(t,e||0)}function yn(n){var r=null;return new fe(function(t,e){-1==(r=vn(function(){t(void 0)},n))&&e(Error("Failed to schedule timer."))}).o(function(t){throw l.clearTimeout(r),t})}function gn(t){if(t.V&&"function"==typeof t.V)return t.V();if("string"==typeof t)return t.split("");if(d(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function mn(t){if(t.X&&"function"==typeof t.X)return t.X();if(!t.V||"function"!=typeof t.V){if(d(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function bn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof bn)for(n=t.X(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function _n(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];wn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)wn(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function wn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e(ln,De),ln.prototype[We]=!0,ln.prototype.addEventListener=function(t,e,n,r){$e(this,t,e,n,r)},ln.prototype.removeEventListener=function(t,e,n,r){en(this,t,e,n,r)},ln.prototype.dispatchEvent=function(t){var e,n=this.eb;if(n)for(e=[];n;n=n.eb)e.push(n);n=this.Yb;var r=t.type||t;if("string"==typeof t?t=new Ve(t,n):t instanceof Ve?t.target=t.target||n:(s=t,lt(t=new Ve(r,n),s)),s=!0,e)for(var i=e.length-1;0<=i;i--)var o=t.b=e[i],s=dn(o,r,!0,t)&&s;if(s=dn(o=t.b=n,r,!0,t)&&s,s=dn(o,r,!1,t)&&s,e)for(i=0;i<e.length;i++)s=dn(o=t.b=e[i],r,!1,t)&&s;return s},ln.prototype.Ba=function(){if(ln.Za.Ba.call(this),this.u){var t,e=this.u;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Ke(n[r]);delete e.a[t],e.b--}}this.eb=null},(t=bn.prototype).V=function(){_n(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.X=function(){return _n(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return wn(this.b,t)?this.b[t]:e},t.set=function(t,e){wn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.X(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var En=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/\\#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function In(t,e){var n;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,t instanceof In?(this.h=void 0!==e?e:t.h,Tn(this,t.f),this.i=t.i,this.b=t.b,Sn(this,t.l),this.c=t.c,Cn(this,Gn(t.a)),this.g=t.g):t&&(n=String(t).match(En))?(this.h=!!e,Tn(this,n[1]||"",!0),this.i=Rn(n[2]||""),this.b=Rn(n[3]||"",!0),Sn(this,n[4]),this.c=Rn(n[5]||"",!0),Cn(this,n[6]||"",!0),this.g=Rn(n[7]||"")):(this.h=!!e,this.a=new jn(null,this.h))}function Tn(t,e,n){t.f=n?Rn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Sn(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.l=e}else t.l=null}function Cn(t,e,n){var r,i;e instanceof jn?(t.a=e,r=t.a,(i=t.h)&&!r.f&&(Vn(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Bn(this,e),Hn(this,n,t))},r)),r.f=i):(n||(e=Pn(e,Fn)),t.a=new jn(e,t.h))}function Nn(t,e,n){t.a.set(e,n)}function An(t,e){return t.a.get(e)}function kn(t){return t instanceof In?new In(t):new In(t,void 0)}function On(t,e){var n=new In(null,void 0);return Tn(n,"https"),t&&(n.b=t),e&&(n.c=e),n}function Rn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Pn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Dn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Dn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}In.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Pn(e,xn,!0),":");var n=this.b;return!n&&"file"!=e||(t.push("//"),(e=this.i)&&t.push(Pn(e,xn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.l)&&t.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(Pn(n,"/"==n.charAt(0)?Mn:Ln,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.g)&&t.push("#",Pn(n,Un)),t.join("")},In.prototype.resolve=function(t){var e=new In(this),n=!!t.f;n?Tn(e,t.f):n=!!t.i,n?e.i=t.i:n=!!t.b,n?e.b=t.b:n=null!=t.l;var r,i=t.c;if(n)Sn(e,t.l);else if(n=!!t.c)if("/"!=i.charAt(0)&&(this.b&&!this.c?i="/"+i:-1!=(r=e.c.lastIndexOf("/"))&&(i=e.c.substr(0,r+1)+i)),".."==(r=i)||"."==r)i="";else if(nt(r,"./")||nt(r,"/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var o=[],s=0;s<r.length;){var a=r[s++];"."==a?i&&s==r.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),i&&s==r.length&&o.push("")):(o.push(a),i=!0)}i=o.join("/")}else i=r;return n?e.c=i:n=""!==t.a.toString(),n?Cn(e,Gn(t.a)):n=!!t.g,n&&(e.g=t.g),e};var xn=/[#\/\?@]/g,Ln=/[#\?:]/g,Mn=/[#\?]/g,Fn=/[#\?@]/g,Un=/#/g;function jn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Vn(a){a.a||(a.a=new bn,a.b=0,a.c&&function(t){if(t){t=t.split("&");for(var e=0;e<t.length;e++){var n,r=t[e].indexOf("="),i=null;0<=r?(n=t[e].substring(0,r),i=t[e].substring(r+1)):n=t[e],o=n,s=i?decodeURIComponent(i.replace(/\+/g," ")):"",a.add(decodeURIComponent(o.replace(/\+/g," ")),s)}}var o,s}(a.c))}function qn(t){var e=mn(t);if(void 0===e)throw Error("Keys are undefined");var n=new jn(null,void 0);t=gn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Hn(n,i,o):n.add(i,o)}return n}function Bn(t,e){Vn(t),e=Kn(t,e),wn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,wn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&_n(t)))}function Wn(t,e){return Vn(t),e=Kn(t,e),wn(t.a.b,e)}function Hn(t,e,n){Bn(t,e),0<n.length&&(t.c=null,t.a.set(Kn(t,e),K(n)),t.b+=n.length)}function Gn(t){var e=new jn;return e.c=t.c,t.a&&(e.a=new bn(t.a),e.b=t.b),e}function Kn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function zn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),t(e,i[s],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(s=n[i])&&(r.push(o),Jn(i,r),r.push(":"),t(e,s,r),o=",");return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":Jn(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Qn,t,e),e.join("")}function Qn(){}(t=jn.prototype).add=function(t,e){Vn(this),this.c=null,t=Kn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(n,r){Vn(this),this.a.forEach(function(t,e){U(t,function(t){n.call(r,t,e,this)},this)},this)},t.X=function(){Vn(this);for(var t=this.a.V(),e=this.a.X(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.V=function(t){Vn(this);var e=[];if("string"==typeof t)Wn(this,t)&&(e=G(e,this.a.get(Kn(this,t))));else{t=this.a.V();for(var n=0;n<t.length;n++)e=G(e,t[n])}return e},t.set=function(t,e){return Vn(this),this.c=null,Wn(this,t=Kn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.X(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.V(r),o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.c=t.join("&")};var Xn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Yn=/\uffff/.test("ï¿¿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Jn(t,e){e.push('"',t.replace(Yn,function(t){var e=Xn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Xn[t]=e),e}),'"')}function $n(){var t=gr();return Bt&&Jt&&11==Jt||/Edge\/\d+/.test(t)}function Zn(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function tr(t,e){e=e||l.window;var n="about:blank";t&&(n=Ct(At(t))),e.location.href=n}function er(t){return!!((t=(t||gr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function nr(t){t=t||l.window;try{t.close()}catch(t){}}function rr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=gr().toLowerCase(),r&&(e.target=r,nt(n,"crios/")&&(e.target="_blank")),dr(gr())==fr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof St?n:At(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((st("iPhone")&&!st("iPod")&&!st("iPad")||st("iPad")||st("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(ft(s=se(document,"A"),"HTMLAnchorElement"),e instanceof St||e instanceof St||(e="object"==typeof e&&e.ra?e.qa():String(e),Nt.test(e)||(e="about:invalid#zClosurez"),e=new St(Ot,e)),s.href=Ct(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=r.open("",n,s),t=Ct(e),s&&(Ht&&nt(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t=xt('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ft(t)+'">'),r=s.document)&&(r.write(Pt(t)),r.close())):(s=r.open(Ct(e),n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var ir=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,or=/^[^@]+@[^@]+$/;function sr(){var e=null;return new fe(function(t){"complete"==l.document.readyState?t():(e=function(){t()},tn(window,"load",e))}).o(function(t){throw en(window,"load",e),t})}function ar(t){return t=t||gr(),!("file:"!==Er()&&"ionic:"!==Er()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function ur(){var t=l.window;try{return t&&t!=t.top}catch(t){return}}function cr(){return void 0!==l.WorkerGlobalScope&&"function"==typeof l.importScripts}function hr(){return Ll.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Ll.INTERNAL.hasOwnProperty("node")?"Node":cr()?"Worker":"Browser"}function lr(){var t=hr();return"ReactNative"===t||"Node"===t}var fr="Firefox",pr="Chrome";function dr(t){var e=t.toLowerCase();return nt(e,"opera/")||nt(e,"opr/")||nt(e,"opios/")?"Opera":nt(e,"iemobile")?"IEMobile":nt(e,"msie")||nt(e,"trident/")?"IE":nt(e,"edge/")?"Edge":nt(e,"firefox/")?fr:nt(e,"silk/")?"Silk":nt(e,"blackberry")?"Blackberry":nt(e,"webos")?"Webos":!nt(e,"safari/")||nt(e,"chrome/")||nt(e,"crios/")||nt(e,"android")?!nt(e,"chrome/")&&!nt(e,"crios/")||nt(e,"edge/")?nt(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":pr:"Safari"}var vr={jd:"FirebaseCore-web",ld:"FirebaseUI-web"};function yr(t,e){e=e||[];var n,r=[],i={};for(n in vr)i[vr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=hr())?r=dr(i=gr()):"Worker"===r&&(r=dr(i=gr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function gr(){return l.navigator&&l.navigator.userAgent||""}function mr(t,e){t=t.split("."),e=e||l;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function br(){try{var t=l.localStorage,e=Nr();if(t)return t.setItem(e,"1"),t.removeItem(e),!$n()||!!l.indexedDB}catch(t){return cr()&&!!l.indexedDB}return!1}function _r(){return(wr()||"chrome-extension:"===Er()||ar())&&!lr()&&br()&&!cr()}function wr(){return"http:"===Er()||"https:"===Er()}function Er(){return l.location&&l.location.protocol||null}function Ir(t){return!er(t=t||gr())&&dr(t)!=fr}function Tr(t){return void 0===t?null:zn(t)}function Sr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Cr(t){if(null!==t)return JSON.parse(t)}function Nr(t){return t||Math.floor(1e9*Math.random()).toString()}function Ar(t){return"Safari"!=dr(t=t||gr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function kr(){var t=l.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Or(t,e){if(e<t)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=gr(),e=hr(),this.b=er(t)||"ReactNative"===e}function Rr(){var t=l.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Pr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Dr(){return mr("fireauth.oauthhelper",l)||mr("fireauth.iframe",l)}Or.prototype.get=function(){var t=l.navigator;return!t||"boolean"!=typeof t.onLine||!wr()&&"chrome-extension:"!==Er()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var xr,Lr={};function Mr(t){Lr[t]||(Lr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Fr={};Object.defineProperty(Fr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Fr,"abcd",{configurable:!0,enumerable:!0,value:2}),xr=2==Fr.abcd}catch(t){xr=!1}function Ur(t,e,n){xr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function jr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Ur(t,n,e[n])}function Vr(t){var e={};return jr(e,t),e}function qr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Ur(e,n,qr(t[n]));return e}function Br(t){var e=t&&(t[zr]?"phone":null);if(!(e&&t&&t[Kr]))throw new w("internal-error","Internal assert: invalid MultiFactorInfo object");Ur(this,"uid",t[Kr]),Ur(this,"displayName",t[Hr]||null);var n=null;t[Gr]&&(n=new Date(t[Gr]).toUTCString()),Ur(this,"enrollmentTime",n),Ur(this,"factorId",e)}function Wr(t){try{var e=new Qr(t)}catch(t){e=null}return e}Br.prototype.v=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Hr="displayName",Gr="enrolledAt",Kr="mfaEnrollmentId",zr="phoneInfo";function Qr(t){Br.call(this,t),Ur(this,"phoneNumber",t[zr])}function Xr(t){var e={},n=t[Zr],r=t[ei],i=t[ni];if(t=Wr(t[ti]),!i||i!=Jr&&i!=$r&&!n||i==$r&&!r||i==Yr&&!t)throw Error("Invalid checkActionCode response!");i==$r?(e[ii]=n||null,e[si]=n||null,e[ri]=r):(e[ii]=r||null,e[si]=r||null,e[ri]=n||null),e[oi]=t||null,Ur(this,ui,i),Ur(this,ai,qr(e))}e(Qr,Br),Qr.prototype.v=function(){var t=Qr.Za.v.call(this);return t.phoneNumber=this.phoneNumber,t};var Yr="REVERT_SECOND_FACTOR_ADDITION",Jr="EMAIL_SIGNIN",$r="VERIFY_AND_CHANGE_EMAIL",Zr="email",ti="mfaInfo",ei="newEmail",ni="requestType",ri="email",ii="fromEmail",oi="multiFactorInfo",si="previousEmail",ai="data",ui="operation";function ci(t){var e=An(t=kn(t),hi)||null,n=An(t,li)||null,r=(r=An(t,di)||null)&&yi[r]||null;if(!e||!n||!r)throw new w("argument-error",hi+", "+li+"and "+di+" are required in a valid action code URL.");jr(this,{apiKey:e,operation:r,code:n,continueUrl:An(t,fi)||null,languageCode:An(t,pi)||null,tenantId:An(t,vi)||null})}var hi="apiKey",li="oobCode",fi="continueUrl",pi="languageCode",di="mode",vi="tenantId",yi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Yr,signIn:Jr,verifyAndChangeEmail:$r,verifyEmail:"VERIFY_EMAIL"};function gi(t){try{return new ci(t)}catch(t){return null}}function mi(t){var e=t[Ii];if(void 0===e)throw new w("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new w("invalid-continue-uri");if(this.h=e,this.b=this.a=null,this.g=!1,(r=t[bi])&&"object"==typeof r){e=r[Ci];var n=r[Ti],r=r[Si];if("string"==typeof e&&e.length){if(this.a=e,void 0!==n&&"boolean"!=typeof n)throw new w("argument-error",Ti+" property must be a boolean when specified.");if(this.g=!!n,void 0!==r&&("string"!=typeof r||"string"==typeof r&&!r.length))throw new w("argument-error",Si+" property must be a non empty string when specified.");this.b=r||null}else{if(void 0!==e)throw new w("argument-error",Ci+" property must be a non empty string when specified.");if(void 0!==n||void 0!==r)throw new w("missing-android-pkg-name")}}else if(void 0!==r)throw new w("argument-error",bi+" property must be a non null object when specified.");if(this.f=null,(e=t[Ei])&&"object"==typeof e){if("string"==typeof(e=e[Ni])&&e.length)this.f=e;else if(void 0!==e)throw new w("argument-error",Ni+" property must be a non empty string when specified.")}else if(void 0!==e)throw new w("argument-error",Ei+" property must be a non null object when specified.");if(void 0!==(e=t[wi])&&"boolean"!=typeof e)throw new w("argument-error",wi+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[_i])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new w("argument-error",_i+" property must be a non empty string when specified.");this.i=t||null}var bi="android",_i="dynamicLinkDomain",wi="handleCodeInApp",Ei="iOS",Ii="url",Ti="installApp",Si="minimumVersion",Ci="packageName",Ni="bundleId";function Ai(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var ki=null;function Oi(t){var e=Pi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.g=t,this.c=e.exp,this.h=e.sub,this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function Ri(t){try{return new Oi(t)}catch(t){return null}}function Pi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e,n=(4-(t=t[1]).length%4)%4,r=0;r<n;r++)t+=".";try{return JSON.parse((e="",function(r,t){function e(t){for(;i<r.length;){var e=r.charAt(i++),n=ki[e];if(null!=n)return n;if(!/^[\s\xa0]*$/.test(e))throw Error("Unknown base64 encoding at char: "+e)}return t}!function(){if(!ki){ki={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;n<5;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===ki[o]&&(ki[o]=i)}}}();for(var i=0;;){var n=e(-1),o=e(0),s=e(64),a=e(64);if(64===a&&-1===n)break;t(n<<2|o>>4),64!=s&&(t(o<<4&240|s>>2),64!=a&&t(s<<6&192|a))}}(t,function(t){e+=String.fromCharCode(t)}),e))}catch(t){}return null}Oi.prototype.S=function(){return this.f},Oi.prototype.i=function(){return this.b},Oi.prototype.toString=function(){return this.g};var Di="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),xi=["client_id","response_type","scope","redirect_uri","state"],Li={kd:{Ha:"locale",ta:700,sa:600,ea:"facebook.com",Va:xi},md:{Ha:null,ta:500,sa:750,ea:"github.com",Va:xi},nd:{Ha:"hl",ta:515,sa:680,ea:"google.com",Va:xi},td:{Ha:"lang",ta:485,sa:705,ea:"twitter.com",Va:Di},gd:{Ha:"locale",ta:640,sa:600,ea:"apple.com",Va:[]}};function Mi(t){for(var e in Li)if(Li[e].ea==t)return Li[e];return null}function Fi(t){var e={};e["facebook.com"]=Bi,e["google.com"]=Hi,e["github.com"]=Wi,e["twitter.com"]=Gi;var n=t&&t[ji];try{if(n)return e[n]?new e[n](t):new qi(t);if(void 0!==t[Ui])return new Vi(t)}catch(t){}return null}var Ui="idToken",ji="providerId";function Vi(t){var e,n=t[ji];if(n||!t[Ui]||(e=Ri(t[Ui]))&&e.a&&(n=e.a),!n)throw Error("Invalid additional user info!");"anonymous"!=n&&"custom"!=n||(n=null),e=!1,void 0!==t.isNewUser?e=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(e=!0),Ur(this,"providerId",n),Ur(this,"isNewUser",e)}function qi(t){Vi.call(this,t),Ur(this,"profile",qr((t=Cr(t.rawUserInfo||"{}"))||{}))}function Bi(t){if(qi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Wi(t){if(qi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Ur(this,"username",this.profile&&this.profile.login||null)}function Hi(t){if(qi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Gi(t){if(qi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Ur(this,"username",t.screenName||null)}function Ki(t){var e=An(r=kn(t),"link"),n=An(kn(e),"link"),r=An(r,"deep_link_id");return An(kn(r),"link")||r||n||e||t}function zi(t,e){if(!t&&!e)throw new w("internal-error","Internal assert: no raw session string available");if(t&&e)throw new w("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?Qi:Xi}e(qi,Vi),e(Bi,qi),e(Wi,qi),e(Hi,qi),e(Gi,qi);var Qi="enroll",Xi="signin";function Yi(){}function Ji(t,n){return t.then(function(t){if(t[js]){var e=Ri(t[js]);if(!e||n!=e.h)throw new w("user-mismatch");return t}throw new w("user-mismatch")}).o(function(t){throw t&&t.code&&t.code==T+"user-not-found"?new w("user-mismatch"):t})}function $i(t,e){if(!e)throw new w("internal-error","failed to construct a credential");this.a=e,Ur(this,"providerId",t),Ur(this,"signInMethod",t)}function Zi(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function to(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new $i(t.providerId,t.pendingToken)}catch(t){}return null}function eo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Ur(this,"idToken",e.idToken),e.accessToken&&Ur(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Ur(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new w("internal-error","failed to construct a credential");Ur(this,"accessToken",e.oauthToken),Ur(this,"secret",e.oauthTokenSecret)}Ur(this,"providerId",t),Ur(this,"signInMethod",n)}function no(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:qn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function ro(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new eo(t.providerId,e,t.signInMethod)}catch(t){}}return null}function io(t,e){this.Oc=e||[],jr(this,{providerId:t,isOAuthProvider:!0}),this.Fb={},this.lb=(Mi(t)||{}).Ha||null,this.kb=null}function oo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new w("argument-error",'SAML provider IDs must be prefixed with "saml."');io.call(this,t,[])}function so(t){io.call(this,t,xi),this.a=[]}function ao(){so.call(this,"facebook.com")}function uo(t){if(!t)throw new w("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return y(t)&&(e=t.accessToken),(new ao).credential({accessToken:e})}function co(){so.call(this,"github.com")}function ho(t){if(!t)throw new w("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return y(t)&&(e=t.accessToken),(new co).credential({accessToken:e})}function lo(){so.call(this,"google.com"),this.Aa("profile")}function fo(t,e){var n=t;return y(t)&&(n=t.idToken,e=t.accessToken),(new lo).credential({idToken:n,accessToken:e})}function po(){io.call(this,"twitter.com",Di)}function vo(t,e){var n=t;if(y(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new w("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new eo("twitter.com",n,"twitter.com")}function yo(t,e,n){this.a=t,this.f=e,Ur(this,"providerId","password"),Ur(this,"signInMethod",n===mo.EMAIL_LINK_SIGN_IN_METHOD?mo.EMAIL_LINK_SIGN_IN_METHOD:mo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function go(t){return t&&t.email&&t.password?new yo(t.email,t.password,t.signInMethod):null}function mo(){jr(this,{providerId:"password",isOAuthProvider:!1})}function bo(t,e){if(!(e=_o(e)))throw new w("argument-error","Invalid email link!");return new yo(t,e.code,mo.EMAIL_LINK_SIGN_IN_METHOD)}function _o(t){return(t=gi(t=Ki(t)))&&t.operation===Jr?t:null}function wo(t){if(!(t.bb&&t.ab||t.Ja&&t.da))throw new w("internal-error");this.a=t,Ur(this,"providerId","phone"),this.ea="phone",Ur(this,"signInMethod","phone")}function Eo(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var n={};return U(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(t){e[t]&&(n[t]=e[t])}),new wo(n)}return null}function Io(t){return t.a.Ja&&t.a.da?{temporaryProof:t.a.Ja,phoneNumber:t.a.da}:{sessionInfo:t.a.bb,code:t.a.ab}}function To(t){try{this.a=t||Ll.auth()}catch(t){throw new w("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}jr(this,{providerId:"phone",isOAuthProvider:!1})}function So(t,e){if(!t)throw new w("missing-verification-id");if(!e)throw new w("missing-verification-code");return new wo({bb:t,ab:e})}function Co(t){if(t.temporaryProof&&t.phoneNumber)return new wo({Ja:t.temporaryProof,da:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return fo(o,n);case"facebook.com":return uo(n);case"github.com":return ho(n);case"twitter.com":return vo(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new $i(e,s):new eo(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new so(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function No(t){if(!t.isOAuthProvider)throw new w("invalid-oauth-provider")}function Ao(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new w("invalid-auth-event");if(this.g&&this.a)throw new w("invalid-auth-event");if(this.g&&!this.f)throw new w("invalid-auth-event")}function ko(t){return(t=t||{}).type?new Ao(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&E(t.error),t.postBody,t.tenantId):null}function Oo(){this.b=null,this.a=[]}zi.prototype.Fa=function(){return this.a?be(this.a):be(this.b)},zi.prototype.v=function(){return this.type==Qi?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},Yi.prototype.ia=function(){},Yi.prototype.b=function(){},Yi.prototype.c=function(){},Yi.prototype.v=function(){},$i.prototype.ia=function(t){return ia(t,Zi(this))},$i.prototype.b=function(t,e){var n=Zi(this);return n.idToken=e,oa(t,n)},$i.prototype.c=function(t,e){return Ji(sa(t,Zi(this)),e)},$i.prototype.v=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},eo.prototype.ia=function(t){return ia(t,no(this))},eo.prototype.b=function(t,e){var n=no(this);return n.idToken=e,oa(t,n)},eo.prototype.c=function(t,e){return Ji(sa(t,no(this)),e)},eo.prototype.v=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},io.prototype.Ia=function(t){return this.Fb=ct(t),this},e(oo,io),e(so,io),so.prototype.Aa=function(t){return B(this.a,t)||this.a.push(t),this},so.prototype.Nb=function(){return K(this.a)},so.prototype.credential=function(t,e){var n=y(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null};if(!n.idToken&&!n.accessToken)throw new w("argument-error","credential failed: must provide the ID token and/or the access token.");return new eo(this.providerId,n,this.providerId)},e(ao,so),Ur(ao,"PROVIDER_ID","facebook.com"),Ur(ao,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),e(co,so),Ur(co,"PROVIDER_ID","github.com"),Ur(co,"GITHUB_SIGN_IN_METHOD","github.com"),e(lo,so),Ur(lo,"PROVIDER_ID","google.com"),Ur(lo,"GOOGLE_SIGN_IN_METHOD","google.com"),e(po,io),Ur(po,"PROVIDER_ID","twitter.com"),Ur(po,"TWITTER_SIGN_IN_METHOD","twitter.com"),yo.prototype.ia=function(t){return this.signInMethod==mo.EMAIL_LINK_SIGN_IN_METHOD?qa(t,da,{email:this.a,oobCode:this.f}):qa(t,Ma,{email:this.a,password:this.f})},yo.prototype.b=function(t,e){return this.signInMethod==mo.EMAIL_LINK_SIGN_IN_METHOD?qa(t,va,{idToken:e,email:this.a,oobCode:this.f}):qa(t,Aa,{idToken:e,email:this.a,password:this.f})},yo.prototype.c=function(t,e){return Ji(this.ia(t),e)},yo.prototype.v=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},jr(mo,{PROVIDER_ID:"password"}),jr(mo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),jr(mo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),wo.prototype.ia=function(t){return t.cb(Io(this))},wo.prototype.b=function(t,e){var n=Io(this);return n.idToken=e,qa(t,Ua,n)},wo.prototype.c=function(t,e){var n=Io(this);return n.operation="REAUTH",Ji(t=qa(t,ja,n),e)},wo.prototype.v=function(){var t={providerId:"phone"};return this.a.bb&&(t.verificationId=this.a.bb),this.a.ab&&(t.verificationCode=this.a.ab),this.a.Ja&&(t.temporaryProof=this.a.Ja),this.a.da&&(t.phoneNumber=this.a.da),t},To.prototype.cb=function(r,i){var o=this.a.b;return be(i.verify()).then(function(n){if("string"!=typeof n)throw new w("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(i.type){case"recaptcha":var t=y(r)?r.session:null,e=y(r)?r.phoneNumber:r;return(t&&t.type==Qi?t.Fa().then(function(t){return qa(o,Oa,{idToken:t,phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:n}}).then(function(t){return t.phoneSessionInfo.sessionInfo})}):t&&t.type==Xi?t.Fa().then(function(t){return e={mfaPendingCredential:t,mfaEnrollmentId:r.multiFactorHint&&r.multiFactorHint.uid||r.multiFactorUid,phoneSignInInfo:{recaptchaToken:n}},qa(o,Ra,e).then(function(t){return t.phoneResponseInfo.sessionInfo});var e}):qa(o,Ca,{phoneNumber:e,recaptchaToken:n})).then(function(t){return"function"==typeof i.reset&&i.reset(),t},function(t){throw"function"==typeof i.reset&&i.reset(),t});default:throw new w("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},jr(To,{PROVIDER_ID:"phone"}),jr(To,{PHONE_SIGN_IN_METHOD:"phone"}),Ao.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Ao.prototype.S=function(){return this.h},Ao.prototype.v=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.v()}};var Ro,Po=null;function Do(t){var e="unauthorized-domain",n=void 0,r=kn(t);t=r.b,"chrome-extension"==(r=r.f)?n=Mt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Mt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",w.call(this,e,n)}function xo(t,e,n){w.call(this,t,n),(t=e||{}).Gb&&Ur(this,"email",t.Gb),t.da&&Ur(this,"phoneNumber",t.da),t.credential&&Ur(this,"credential",t.credential),t.Wb&&Ur(this,"tenantId",t.Wb)}function Lo(t){if(t.code){var e=t.code||"";0==e.indexOf(T)&&(e=e.substring(T.length));var n={credential:Co(t),Wb:t.tenantId};if(t.email)n.Gb=t.email;else if(t.phoneNumber)n.da=t.phoneNumber;else if(!n.credential)return new w(e,t.message||void 0);return new xo(e,n,t.message)}return null}function Mo(){}function Fo(t){return t.c||(t.c=t.b())}function Uo(){}function jo(t){if(t.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return t.f;for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function Vo(){}function qo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=m(this.oc,this),this.a.onerror=m(this.Pb,this),this.a.onprogress=m(this.pc,this),this.a.ontimeout=m(this.tc,this)}function Bo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Wo(t,e,n){this.reset(t,e,n,void 0,void 0)}function Ho(t){this.f=t,this.b=this.c=this.a=null}function Go(t,e){this.name=t,this.value=e}e(Do,w),e(xo,w),xo.prototype.v=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.v();return e&&lt(t,e),t},xo.prototype.toJSON=function(){return this.v()},Mo.prototype.c=null,e(Uo,Mo),Uo.prototype.a=function(){var t=jo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Uo.prototype.b=function(){var t={};return jo(this)&&(t[0]=!0,t[1]=!0),t},Ro=new Uo,e(Vo,Mo),Vo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new qo;throw Error("Unsupported browser")},Vo.prototype.b=function(){return{}},(t=qo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.oc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Bo(this,4)},t.Pb=function(){this.status=500,this.response=this.responseText="",Bo(this,4)},t.tc=function(){this.Pb()},t.pc=function(){this.status=200,Bo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Wo.prototype.a=null,Wo.prototype.reset=function(t,e,n,r,i){delete this.a},Go.prototype.toString=function(){return this.name};var Ko=new Go("SEVERE",1e3),zo=new Go("WARNING",900),Qo=new Go("CONFIG",700),Xo=new Go("FINE",500);Ho.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(R("Root logger has no level set."),null)}(this).value)for(v(e)&&(e=e()),t=new Wo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Yo,Jo={},$o=null;function Zo(t){var e,n,r;return $o||($o=new Ho(""),(Jo[""]=$o).c=Qo),(e=Jo[t])||(e=new Ho(t),r=t.lastIndexOf("."),n=t.substr(r+1),(r=Zo(t.substr(0,r))).b||(r.b={}),(r.b[n]=e).a=r,Jo[t]=e),e}function ts(t,e){t&&t.log(Xo,e,void 0)}function es(t){this.f=t}function ns(t){ln.call(this),this.s=t,this.readyState=rs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=Zo("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}e(es,Mo),es.prototype.a=function(){return new ns(this.f)},es.prototype.b=(Yo={},function(){return Yo}),e(ns,ln);var rs=0;function is(t){t.c.read().then(t.nc.bind(t)).catch(t.Sa.bind(t))}function os(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,ss(t)}function ss(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function as(t){ln.call(this),this.headers=new bn,this.D=t||null,this.c=!1,this.B=this.a=null,this.h=this.P=this.l="",this.f=this.O=this.i=this.N=!1,this.g=0,this.s=null,this.m=us,this.w=this.R=!1}(t=ns.prototype).open=function(t,e){if(this.readyState!=rs)throw this.abort(),Error("Error reopening a connection");this.m=t,this.g=e,this.readyState=1,ss(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.m,credentials:void 0,cache:void 0};t&&(e.body=t),this.s.fetch(new Request(this.g,e)).then(this.sc.bind(this),this.Sa.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,os(this,!1)),this.readyState=rs},t.sc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,ss(this)),this.a&&(this.readyState=3,ss(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.qc.bind(this),this.Sa.bind(this)):void 0!==l.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,is(this)):t.text().then(this.rc.bind(this),this.Sa.bind(this)))))},t.nc=function(t){var e;this.a&&((e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done}))&&(this.response=this.responseText+=e),t.done?os(this,!0):ss(this),3==this.readyState&&is(this))},t.rc=function(t){this.a&&(this.response=this.responseText=t,os(this,!0))},t.qc=function(t){this.a&&(this.response=t,os(this,!0))},t.Sa=function(t){var e=this.h;e&&e.log(zo,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&os(this,!0)},t.setRequestHeader=function(t,e){this.i.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(zo,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(zo,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},e(as,ln);var us="";as.prototype.b=Zo("goog.net.XhrIo");var cs=/^https?$/i,hs=["POST","PUT"];function ls(t){return"content-type"==t.toLowerCase()}function fs(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,ps(t),vs(t)}function ps(t){t.N||(t.N=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ds(t){if(t.c&&void 0!==h)if(t.B[1]&&4==gs(t)&&2==ms(t))ts(t.b,bs(t,"Local request error detected and ignored"));else if(t.i&&4==gs(t))vn(t.Sb,0,t);else if(t.dispatchEvent("readystatechange"),4==gs(t)){ts(t.b,bs(t,"Request complete")),t.c=!1;try{var e,n,r,i,o=ms(t);t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}if((e=s)||((n=0===o)&&(!(i=String(t.l).match(En)[1]||null)&&l.self&&l.self.location&&(i=(r=l.self.location.protocol).substr(0,r.length-1)),n=!cs.test(i?i.toLowerCase():"")),e=n),e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var a=2<gs(t)?t.a.statusText:""}catch(e){ts(t.b,"Can not get status: "+e.message),a=""}t.h=a+" ["+ms(t)+"]",ps(t)}}finally{vs(t)}}}function vs(t,e){if(t.a){ys(t);var n=t.a,r=t.B[0]?s:null;t.a=null,t.B=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(Ko,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function ys(t){t.a&&t.w&&(t.a.ontimeout=null),t.s&&(l.clearTimeout(t.s),t.s=null)}function gs(t){return t.a?t.a.readyState:0}function ms(t){try{return 2<gs(t)?t.a.status:-1}catch(t){return-1}}function bs(t,e){return e+" ["+t.P+" "+t.l+" "+ms(t)+"]"}function _s(t){var e=Rs;this.g=[],this.w=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.u=this.B=this.i=!1,this.h=0,this.b=null,this.l=0}function ws(t,e,n){t.a=!0,t.c=n,t.f=!e,Ss(t)}function Es(t){if(t.a){if(!t.u)throw new Cs;t.u=!1}}function Is(t,e,n,r){t.g.push([e,n,r]),t.a&&Ss(t)}function Ts(t){return q(t.g,function(t){return v(t[1])})}function Ss(t){var e,n;t.h&&t.a&&Ts(t)&&(e=t.h,(n=ks[e])&&(l.clearTimeout(n.a),delete ks[e]),t.h=0),t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=(s=t.g.shift())[0],o=s[1],s=s[2];if(i=t.f?o:i)try{var a=i.call(s||t.s,e);void 0!==a&&(t.f=t.f&&(a==e||a instanceof Error),t.c=e=a),(A(e)||"function"==typeof l.Promise&&e instanceof l.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,Ts(t)||(n=!0)}}t.c=e,r&&(a=m(t.m,t,!0),r=m(t.m,t,!1),e instanceof _s?(Is(e,a,r),e.B=!0):e.then(a,r)),n&&(e=new As(e),ks[e.a]=e,t.h=e.a)}function Cs(){k.call(this)}function Ns(){k.call(this)}function As(t){this.a=l.setTimeout(m(this.c,this),0),this.b=t}(t=as.prototype).Ka=function(){void 0!==h&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ts(this.b,bs(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(ts(this.b,bs(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),vs(this))},t.Ba=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),vs(this,!0)),as.Za.Ba.call(this)},t.Sb=function(){this.wa||(this.O||this.i||this.f?ds(this):this.Hc())},t.Hc=function(){ds(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case us:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Ko,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return ts(this.b,"Can not get response: "+t.message),null}},_s.prototype.cancel=function(t){var e;this.a?this.c instanceof _s&&this.c.cancel():(this.b&&(e=this.b,delete this.b,t?e.cancel(t):(e.l--,e.l<=0&&e.cancel())),this.w?this.w.call(this.s,this):this.u=!0,this.a||(t=new Ns,Es(this),ws(this,!1,t)))},_s.prototype.m=function(t,e){this.i=!1,ws(this,t,e)},_s.prototype.then=function(t,e,n){var r,i,o=new fe(function(t,e){r=t,i=e});return Is(this,r,function(t){t instanceof Ns?o.cancel():i(t)}),o.then(t,e,n)},_s.prototype.$goog_Thenable=!0,e(Cs,k),Cs.prototype.message="Deferred has already fired",Cs.prototype.name="AlreadyCalledError",e(Ns,k),Ns.prototype.message="Deferred was canceled",Ns.prototype.name="CanceledError",As.prototype.c=function(){throw delete ks[this.a],this.b};var ks={};function Os(t){var e,n,r,i,o=document,s=bt(t).toString(),a=se(document,"SCRIPT"),u={Tb:a,Ka:void 0},c=new _s(u),h=window.setTimeout(function(){Ps(a,!0);var t=new Ls(xs,"Timeout reached for loading script "+s);Es(c),ws(c,!1,t)},5e3);return u.Ka=h,a.onload=a.onreadystatechange=function(){a.readyState&&"loaded"!=a.readyState&&"complete"!=a.readyState||(Ps(a,!1,h),Es(c),ws(c,!0,null))},a.onerror=function(){Ps(a,!0,h);var t=new Ls(Ds,"Error while loading script "+s);Es(c),ws(c,!1,t)},lt(u={},{type:"text/javascript",charset:"UTF-8"}),ne(a,u),n=t,ft(e=a,"HTMLScriptElement"),e.src=bt(n),null===p&&(p=(n=(n=l.document).querySelector&&n.querySelector("script[nonce]"))&&(n=n.nonce||n.getAttribute("nonce"))&&f.test(n)?n:""),(n=p)&&e.setAttribute("nonce",n),((i=((r=o)||document).getElementsByTagName("HEAD"))&&0!=i.length?i[0]:r.documentElement).appendChild(a),c}function Rs(){var t;this&&this.Tb&&(t=this.Tb)&&"SCRIPT"==t.tagName&&Ps(t,!0,this.Ka)}function Ps(t,e,n){null!=n&&l.clearTimeout(n),t.onload=s,t.onerror=s,t.onreadystatechange=s,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Ds=0,xs=1;function Ls(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),k.call(this,n),this.code=t}function Ms(t){this.f=t}function Fs(t,e,n){if(this.c=t,t=e||{},this.u=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Vs,this.g=ct(t.secureTokenHeaders||qs),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.l=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.i=t.firebaseTimeout||Bs,this.a=ct(t.firebaseHeaders||Ws),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==hr(),!(n=l.XMLHttpRequest||n&&Ll.INTERNAL.node&&Ll.INTERNAL.node.XMLHttpRequest)&&!cr())throw new w("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,cr()?this.f=new es(self):lr()?this.f=new Ms(n):this.f=new Vo,this.b=null}e(Ls,k),e(Ms,Mo),Ms.prototype.a=function(){return new this.f},Ms.prototype.b=function(){return{}};var Us,js="idToken",Vs=new Or(3e4,6e4),qs={"Content-Type":"application/x-www-form-urlencoded"},Bs=new Or(3e4,6e4),Ws={"Content-Type":"application/json"};function Hs(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Gs(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function Ks(t,e,n,r,i,o,s){var a;(t=!((a=dr(a=gr())==pr&&(a=a.match(/\sChrome\/(\d+)/i))&&2==a.length?parseInt(a[1],10):null)&&a<30||Bt&&Jt&&!(9<Jt))||cr()?m(t.w,t):(Us=Us||new fe(function(t,e){var n,r;n=t,r=e,((window.gapi||{}).client||{}).request?n():(l[Qs]=function(){((window.gapi||{}).client||{}).request?n():r(Error("CORS_UNSUPPORTED"))},Is(Os(_t(zs,{onload:Qs})),null,function(){r(Error("CORS_UNSUPPORTED"))},void 0))}),m(t.s,t)))(e,n,r,i,o,s)}Fs.prototype.S=function(){return this.b},Fs.prototype.w=function(t,n,e,r,i,o){if(cr()&&(void 0===l.fetch||void 0===l.Headers||void 0===l.Request))throw new w("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s,a=new as(this.f);o&&(a.g=Math.max(0,o),s=setTimeout(function(){a.dispatchEvent("timeout")},o)),fn(a,"complete",function(){s&&clearTimeout(s);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return ts(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){e=null}n&&n(e)}),pn(a,"ready",function(){s&&clearTimeout(s),Le(this)}),pn(a,"timeout",function(){s&&clearTimeout(s),Le(this),n&&n(null)}),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.N=!1,t.c=!0,t.a=t.D?t.D.a():Ro.a(),t.B=t.D?Fo(t.D):Fo(Ro),t.a.onreadystatechange=m(t.Sb,t);try{ts(t.b,bs(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(e){return ts(t.b,bs(t,"Error opening Xhr: "+e.message)),fs(t,e)}e=r||"";var o,s=new bn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||"string"==typeof t)U(t,e,void 0);else for(var n=mn(t),r=gn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){s.set(e,t)}),i=function(t){t:{for(var e=ls,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(s.X()),r=l.FormData&&e instanceof l.FormData,!B(hs,n)||i||r||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.R&&(t.a.withCredentials=t.R);try{ys(t),0<t.g&&(t.w=(o=t.a,Bt&&Zt(9)&&"number"==typeof o.timeout&&void 0!==o.ontimeout),ts(t.b,bs(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.w)),t.w?(t.a.timeout=t.g,t.a.ontimeout=m(t.Ka,t)):t.s=vn(t.Ka,t.g,t)),ts(t.b,bs(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){ts(t.b,bs(t,"Send error: "+e.message)),fs(t,e)}}(a,t,e,r,i)};var zs=new pt(yt,"https://apis.google.com/js/client.js?onload=%{onload}"),Qs="__fcb"+Math.floor(1e6*Math.random()).toString();function Xs(t){if("string"!=typeof(t=t.email)||!or.test(t))throw new w("invalid-email")}function Ys(t){"email"in t&&Xs(t)}function Js(t){if(!t[js]){if(t.mfaPendingCredential)throw new w("multi-factor-auth-required",null,ct(t));throw new w("internal-error")}}function $s(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new w("internal-error")}else{if(!t.sessionInfo)throw new w("missing-verification-id");if(!t.code)throw new w("missing-verification-code")}}Fs.prototype.s=function(t,n,r,i,o){var s=this;Us.then(function(){window.gapi.client.setApiKey(s.c);var e=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:r,body:i,headers:o,authType:"none",callback:function(t){window.gapi.auth.setToken(e),n&&n(t)}})}).o(function(t){n&&n({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},Fs.prototype.vb=function(){return qa(this,ka,{})},Fs.prototype.xb=function(t,e){return qa(this,Na,{idToken:t,email:e})},Fs.prototype.yb=function(t,e){return qa(this,Aa,{idToken:t,password:e})};var Zs={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ta(t){if(!t.phoneVerificationInfo)throw new w("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new w("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new w("missing-verification-code")}function ea(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new w("internal-error")}function na(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&Wn(t=new jn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function ra(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Lo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Lo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Lo(t)):t.errorMessage&&(e=Ba(t.errorMessage)),e)throw e;Js(t)}function ia(t,e){return e.returnIdpCredential=!0,qa(t,Pa,e)}function oa(t,e){return e.returnIdpCredential=!0,qa(t,xa,e)}function sa(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,qa(t,Da,e)}function aa(t){if(!t.oobCode)throw new w("invalid-action-code")}(t=Fs.prototype).zb=function(t,r){var i={idToken:t},o=[];return at(Zs,function(t,e){var n=r[e];null===n?o.push(t):e in r&&(i[e]=n)}),o.length&&(i.deleteAttribute=o),qa(this,Na,i)},t.rb=function(t,e){return lt(t={requestType:"PASSWORD_RESET",email:t},e),qa(this,Ea,t)},t.sb=function(t,e){return lt(t={requestType:"EMAIL_SIGNIN",email:t},e),qa(this,ba,t)},t.qb=function(t,e){return lt(t={requestType:"VERIFY_EMAIL",idToken:t},e),qa(this,_a,t)},t.Ab=function(t,e,n){return lt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),qa(this,wa,t)},t.cb=function(t){return qa(this,Fa,t)},t.jb=function(t,e){return qa(this,Sa,{oobCode:t,newPassword:e})},t.Pa=function(t){return qa(this,ca,{oobCode:t})},t.fb=function(t){return qa(this,ua,{oobCode:t})};var ua={endpoint:"setAccountInfo",A:aa,Y:"email",C:!0},ca={endpoint:"resetPassword",A:aa,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new w("internal-error")},C:!0},ha={endpoint:"signupNewUser",A:function(t){if(Xs(t),!t.password)throw new w("weak-password")},G:Js,U:!0,C:!0},la={endpoint:"createAuthUri",C:!0},fa={endpoint:"deleteAccount",M:["idToken"]},pa={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],A:function(t){if("array"!=n(t.deleteProvider))throw new w("internal-error")}},da={endpoint:"emailLinkSignin",M:["email","oobCode"],A:Xs,G:Js,U:!0,C:!0},va={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],A:Xs,G:Js,U:!0},ya={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],A:ta,G:Js,C:!0,La:!0},ga={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],A:ta,G:Js,C:!0,La:!0},ma={endpoint:"getAccountInfo"},ba={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new w("internal-error");Xs(t)},Y:"email",C:!0},_a={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new w("internal-error")},Y:"email",C:!0},wa={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new w("internal-error")},Y:"email",C:!0},Ea={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new w("internal-error");Xs(t)},Y:"email",C:!0},Ia={hb:!0,endpoint:"getProjectConfig",Rb:"GET"},Ta={hb:!0,endpoint:"getRecaptchaParam",Rb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new w("internal-error")}},Sa={endpoint:"resetPassword",A:aa,Y:"email",C:!0},Ca={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Y:"sessionInfo",C:!0},Na={endpoint:"setAccountInfo",M:["idToken"],A:Ys,U:!0},Aa={endpoint:"setAccountInfo",M:["idToken"],A:function(t){if(Ys(t),!t.password)throw new w("weak-password")},G:Js,U:!0},ka={endpoint:"signupNewUser",G:Js,U:!0,C:!0},Oa={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new w("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new w("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new w("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new w("internal-error")},C:!0,La:!0},Ra={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new w("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new w("internal-error")},C:!0,La:!0},Pa={endpoint:"verifyAssertion",A:ea,Wa:na,G:ra,U:!0,C:!0},Da={endpoint:"verifyAssertion",A:ea,Wa:na,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new w("user-not-found");if(t.errorMessage)throw Ba(t.errorMessage);Js(t)},U:!0,C:!0},xa={endpoint:"verifyAssertion",A:function(t){if(ea(t),!t.idToken)throw new w("internal-error")},Wa:na,G:ra,U:!0},La={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new w("invalid-custom-token")},G:Js,U:!0,C:!0},Ma={endpoint:"verifyPassword",A:function(t){if(Xs(t),!t.password)throw new w("wrong-password")},G:Js,U:!0,C:!0},Fa={endpoint:"verifyPhoneNumber",A:$s,G:Js,C:!0},Ua={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new w("internal-error");$s(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Lo(t);Js(t)}},ja={Eb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:$s,G:Js,C:!0},Va={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[js]^!!t.refreshToken)throw new w("internal-error")},C:!0,La:!0};function qa(t,e,n){if(!function(t,e){if(!e||!e.length)return 1;if(t){for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return}return 1}}(n,e.M))return _e(new w("internal-error"));var r,i=!!e.La,o=e.Rb||"POST";return be(n).then(e.A).then(function(){return e.U&&(n.returnSecureToken=!0),e.C&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,s){var a=kn(e+n);Nn(a,"key",t.c),s&&Nn(a,"cb",_().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Nn(a,c,i[c]);return new fe(function(e,n){Ks(t,a.toString(),function(t){t?t.error?n(Wa(t,o||{})):e(t):n(new w("network-request-failed"))},r,u?void 0:zn(Sr(i)),t.a,t.i.get())})}(t,i?t.l:t.h,e.endpoint,o,n,e.Eb,e.hb||!1)}).then(function(t){return r=t,e.Wa?e.Wa(n,r):r}).then(e.G).then(function(){if(!e.Y)return r;if(!(e.Y in r))throw new w("internal-error");return r[e.Y]})}function Ba(t){return Wa({error:{errors:[{message:t}],code:400,message:t}})}function Wa(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new w(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",lt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new w(r[i],e);return!e&&t&&(e=Tr(t)),new w("internal-error",e)}function Ha(t){var o;this.b=t,this.a=null,this.nb=(o=this,(Qa=Qa||new fe(function(t,e){function n(){kr(),mr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){kr(),e(Error("Network Error"))},timeout:Ka.get()})}var r;mr("gapi.iframes.Iframe")?t():mr("gapi.load")?n():(r="__iframefcb"+Math.floor(1e6*Math.random()).toString(),l[r]=function(){mr("gapi.load")?n():e(Error("Network Error"))},be(Os(r=_t(Ga,{onload:r}))).o(function(){e(Error("Network Error"))}))}).o(function(t){throw Qa=null,t})).then(function(){return new fe(function(r,i){mr("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:mr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(t){function e(){clearTimeout(n),r()}o.a=t,o.a.restyle({setHideOnLeave:!1});var n=setTimeout(function(){i(Error("Network Error"))},za.get());t.ping(e).then(e,function(){i(Error("Network Error"))})})})}))}var Ga=new pt(yt,"https://apis.google.com/js/api.js?onload=%{onload}"),Ka=new Or(3e4,6e4),za=new Or(5e3,15e3),Qa=null;function Xa(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=On(this.i,"/__/auth/iframe"),Nn(this.a,"apiKey",this.g),Nn(this.a,"appName",this.h),this.b=null,this.c=[]}function Ya(t,e,n,r,i){this.s=t,this.m=e,this.c=n,this.u=r,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function Ja(t){try{return Ll.app(t).auth().Ea()}catch(t){return[]}}function $a(t,e,n,r,i){this.u=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.m=this.s=this.w=null,this.g=[],this.l=this.a=null}function Za(t){var a=Zn();return qa(t,Ia,{}).then(function(t){return t.authorizedDomains||[]}).then(function(t){t:{for(var e=(n=kn(a)).f,n=n.b,r=0;r<t.length;r++){var i=t[r],o=n,s=e;if(o=0==i.indexOf("chrome-extension://")?kn(i).b==o&&"chrome-extension"==s:("http"==s||"https"==s)&&(ir.test(i)?o==i:(i=i.split(".").join("\\."),new RegExp("^(.+\\."+i+"|"+i+")$","i").test(o)))){t=!0;break t}}t=!1}if(!t)throw new Do(Zn())})}function tu(i){return i.l||(i.l=sr().then(function(){var t,e,n,r;i.s||(t=i.c,e=i.h,n=Ja(i.b),(r=new Xa(i.u,i.f,i.b)).f=t,r.b=e,r.c=K(n||[]),i.s=r.toString()),i.i=new Ha(i.s),function(r){if(!r.i)throw Error("IfcHandler must be initialized!");var t,e;t=r.i,e=function(t){var e={};if(t&&t.authEvent){var n=!1;for(t=ko(t.authEvent),e=0;e<r.g.length;e++)n=r.g[e](t)||n;return(e={}).status=n?"ACK":"ERROR",be(e)}return e.status="ERROR",be(e)},t.nb.then(function(){t.a.register("authEvent",e,mr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(i)})),i.l}function eu(t){return t.m||(t.w=t.c?yr(t.c,Ja(t.b)):null,t.m=new Fs(t.f,N(t.h),t.w)),t.m}function nu(t,e,n,r,i,o,s,a,u,c,h){return(t=new Ya(t,e,n,r,i)).l=o,t.g=s,t.i=a,t.b=ct(u||null),t.f=c,t.ub(h).toString()}function ru(t){if(this.a=t||Ll.INTERNAL.reactNative&&Ll.INTERNAL.reactNative.AsyncStorage,!this.a)throw new w("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function iu(t){this.b=t,this.a={},this.f=m(this.c,this)}Xa.prototype.toString=function(){return this.f?Nn(this.a,"v",this.f):Bn(this.a.a,"v"),this.b?Nn(this.a,"eid",this.b):Bn(this.a.a,"eid"),this.c.length?Nn(this.a,"fw",this.c.join(",")):Bn(this.a.a,"fw"),this.a.toString()},Ya.prototype.ub=function(t){return this.h=t,this},Ya.prototype.toString=function(){var t=On(this.s,"/__/auth/handler");if(Nn(t,"apiKey",this.m),Nn(t,"appName",this.c),Nn(t,"authType",this.u),this.a.isOAuthProvider){var e=this.a;try{var n=Ll.app(this.c).auth().ja()}catch(t){n=null}for(var r in e.kb=n,Nn(t,"providerId",this.a.providerId),n=Sr((e=this.a).Fb))n[r]=n[r].toString();r=e.Oc,n=ct(n);for(var i=0;i<r.length;i++){var o=r[i];o in n&&delete n[o]}e.lb&&e.kb&&!n[e.lb]&&(n[e.lb]=e.kb),ut(n)||Nn(t,"customParameters",Tr(n))}if("function"==typeof this.a.Nb&&(e=this.a.Nb()).length&&Nn(t,"scopes",e.join(",")),this.l?Nn(t,"redirectUrl",this.l):Bn(t.a,"redirectUrl"),this.g?Nn(t,"eventId",this.g):Bn(t.a,"eventId"),this.i?Nn(t,"v",this.i):Bn(t.a,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!An(t,s)&&Nn(t,s,this.b[s]);return this.h?Nn(t,"tid",this.h):Bn(t.a,"tid"),this.f?Nn(t,"eid",this.f):Bn(t.a,"eid"),(s=Ja(this.c)).length&&Nn(t,"fw",s.join(",")),t.toString()},(t=$a.prototype).Lb=function(e,n,t){var r=new w("popup-closed-by-user"),i=new w("web-storage-unsupported"),o=this,s=!1;return this.ka().then(function(){var t,r={type:"webStorageSupport"};tu(t=o).then(function(){return e=t.i,n=r,e.nb.then(function(){return new fe(function(t){e.a.send(n.type,n,t,mr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})});var e,n}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}).then(function(t){t||(e&&nr(e),n(i),s=!0)})}).o(function(){}).then(function(){if(!s)return n=e,new fe(function(e){return function t(){yn(2e3).then(function(){return n&&!n.closed?t():void e()})}()});var n}).then(function(){if(!s)return yn(t).then(function(){n(r)})})},t.Ub=function(){var t=gr();return!Ir(t)&&!Ar(t)},t.Qb=function(){return!1},t.Jb=function(e,t,n,r,i,o,s,a){if(!e)return _e(new w("popup-blocked"));if(s&&!Ir())return this.ka().o(function(t){nr(e),i(t)}),r(),be();this.a||(this.a=Za(eu(this)));var u=this;return this.a.then(function(){var t=u.ka().o(function(t){throw nr(e),i(t),t});return r(),t}).then(function(){No(n),s||tr(nu(u.u,u.f,u.b,t,n,null,o,u.c,void 0,u.h,a),e)}).o(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},t.Kb=function(t,e,n,r){this.a||(this.a=Za(eu(this)));var i=this;return this.a.then(function(){No(e),tr(nu(i.u,i.f,i.b,t,e,Zn(),n,i.c,void 0,i.h,r))}).o(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.ka=function(){var t=this;return tu(this).then(function(){return t.i.nb}).o(function(){throw t.a=null,new w("network-request-failed")})},t.Xb=function(){return!0},t.Ca=function(t){this.g.push(t)},t.Qa=function(e){H(this.g,function(t){return t==e})},(t=ru.prototype).get=function(t){return be(this.a.getItem(t)).then(function(t){return t&&Cr(t)})},t.set=function(t,e){return be(this.a.setItem(t,Tr(e)))},t.T=function(t){return be(this.a.removeItem(t))},t.ba=function(){},t.ha=function(){};var ou,su=[];function au(t,e,n){ut(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function uu(t){this.a=t}function cu(t){this.c=t,this.b=!1,this.a=[]}function hu(r,t,e,n){var i,o,s,a,u=e||{},c=null;if(r.b)return _e(Error("connection_unavailable"));var h=n?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new fe(function(e,n){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),s=setTimeout(function(){n(Error("unsupported_event"))},h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout(function(){n(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?e(t.data.response):n(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),n(Error("invalid_response"))))}},r.a.push(c),l.port1.addEventListener("message",o),r.c.postMessage({eventType:t,eventId:i,data:u},[l.port2])):n(Error("connection_unavailable"))}).then(function(t){return lu(r,c),t}).o(function(t){throw lu(r,c),t})}function lu(t,e){var n,r;e&&(n=e.messageChannel,r=e.onMessage,n&&(n.port1.removeEventListener("message",r),n.port1.close()),H(t.a,function(t){return t==e}))}function fu(){if(!du())throw new w("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=l.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.s=!1,this.h=null;var t,e,n,r=this;cr()&&self?(this.l=(n=cr()?self:null,U(su,function(t){t.b==n&&(e=t)}),e||(e=new iu(n),su.push(e)),e),au(this.l,"keyChanged",function(t,n){return bu(r).then(function(e){return 0<e.length&&U(r.a,function(t){t(e)}),{keyProcessed:B(e,n.key)}})}),au(this.l,"ping",function(){return be(["keyChanged"])})):((t=l.navigator)&&t.serviceWorker?be().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).o(function(){return null}):be(null)).then(function(t){(r.h=t)&&(r.g=new cu(new uu(t)),hu(r.g,"ping",null,!0).then(function(t){t[0].fulfilled&&B(t[0].value,"keyChanged")&&(r.s=!0)}).o(function(){}))})}function pu(t){return t.m||(t.m=function i(o){return new fe(function(e,n){var t=o.u.open("firebaseLocalStorageDb",1);t.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},t.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},t.onsuccess=function(t){var r;(t=t.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(t):(r=o,new fe(function(t,e){var n=r.u.deleteDatabase("firebaseLocalStorageDb");n.onsuccess=function(){t()},n.onerror=function(t){e(Error(t.target.error))}}).then(function(){return i(o)}).then(function(t){e(t)}).o(function(t){n(t)}))}})}(t)),t.m}function du(){try{return l.indexedDB}catch(t){return}}function vu(t){return t.objectStore("firebaseLocalStorage")}function yu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function gu(t){return new fe(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function mu(t,e){return t.g&&t.h&&((n=l.navigator)&&n.serviceWorker&&n.serviceWorker.controller||null)===t.h?hu(t.g,"keyChanged",{key:e},t.s).then(function(){}).o(function(){}):be();var n}function bu(r){return pu(r).then(function(t){var i=vu(yu(t,!1));return i.getAll?gu(i.getAll()):new fe(function(e,n){var r=[],t=i.openCursor();t.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},t.onerror=function(t){n(t.target.error)}})}).then(function(t){var e={},n=[];if(0==r.b){for(n=0;n<t.length;n++)e[t[n].fbase_key]=t[n].value;n=function t(e,n){var r,i=[];for(r in e)r in n&&typeof e[r]==typeof n[r]?"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(r.c,e),r.c=e}return n})}function _u(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function wu(t){var r=this,i=null;this.a=[],this.type="indexedDB",this.c=t,this.b=be().then(function(){if(du()){var e=Nr(),n="__sak"+e;return ou=ou||new fu,(i=ou).set(n,e).then(function(){return i.get(n)}).then(function(t){if(t!==e)throw Error("indexedDB not supported!");return i.T(n)}).then(function(){return i}).o(function(){return r.c})}return r.c}).then(function(t){return r.type=t.type,t.ba(function(e){U(r.a,function(t){t(e)})}),t})}function Eu(){this.a={},this.type="inMemory"}function Iu(){if(!function(){var t="Node"==hr();if(t=Tu()||t&&Ll.INTERNAL.node&&Ll.INTERNAL.node.localStorage)try{return t.setItem("__sak","1"),t.removeItem("__sak"),1}catch(t){return}}()){if("Node"==hr())throw new w("internal-error","The LocalStorage compatibility library was not found.");throw new w("web-storage-unsupported")}this.a=Tu()||Ll.INTERNAL.node.localStorage,this.type="localStorage"}function Tu(){try{var t=l.localStorage,e=Nr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Su(){this.type="nullStorage"}function Cu(){if(!function(){var t="Node"==hr();if(t=Nu()||t&&Ll.INTERNAL.node&&Ll.INTERNAL.node.sessionStorage)try{return t.setItem("__sak","1"),t.removeItem("__sak"),1}catch(t){return}}()){if("Node"==hr())throw new w("internal-error","The SessionStorage compatibility library was not found.");throw new w("web-storage-unsupported")}this.a=Nu()||Ll.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Nu(){try{var t=l.sessionStorage,e=Nr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Au(){var t={};t.Browser=Ru,t.Node=Pu,t.ReactNative=Du,t.Worker=xu,this.a=t[hr()]}iu.prototype.c=function(n){var e,r=n.data.eventType,i=n.data.eventId,t=this.a[r];t&&0<t.length&&(n.ports[0].postMessage({status:"ack",eventId:i,eventType:r,response:null}),e=[],U(t,function(t){e.push(be().then(function(){return t(n.origin,n.data.data)}))}),Ee(e).then(function(t){var e=[];U(t,function(t){e.push({fulfilled:t.Mb,value:t.value,reason:t.reason?t.reason.message:void 0})}),U(e,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:e})}))},uu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},cu.prototype.close=function(){for(;0<this.a.length;)lu(this,this.a[0]);this.b=!0},(t=fu.prototype).set=function(n,r){var i,o=!1,s=this;return pu(this).then(function(t){return gu((t=vu(yu(i=t,!0))).get(n))}).then(function(t){var e=vu(yu(i,!0));return t?(t.value=r,gu(e.put(t))):(s.b++,o=!0,(t={}).fbase_key=n,t.value=r,gu(e.add(t)))}).then(function(){return s.c[n]=r,mu(s,n)}).ma(function(){o&&s.b--})},t.get=function(e){return pu(this).then(function(t){return gu(vu(yu(t,!1)).get(e))}).then(function(t){return t&&t.value})},t.T=function(e){var n=!1,r=this;return pu(this).then(function(t){return n=!0,r.b++,gu(vu(yu(t,!0)).delete(e))}).then(function(){return delete r.c[e],mu(r,e)}).ma(function(){n&&r.b--})},t.ba=function(t){var n;0==this.a.length&&(_u(n=this),function e(){n.f=setTimeout(function(){n.i=bu(n).then(function(e){0<e.length&&U(n.a,function(t){t(e)})}).then(function(){e()}).o(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()),this.a.push(t)},t.ha=function(e){H(this.a,function(t){return t==e}),0==this.a.length&&_u(this)},(t=wu.prototype).get=function(e){return this.b.then(function(t){return t.get(e)})},t.set=function(e,n){return this.b.then(function(t){return t.set(e,n)})},t.T=function(e){return this.b.then(function(t){return t.T(e)})},t.ba=function(t){this.a.push(t)},t.ha=function(e){H(this.a,function(t){return t==e})},(t=Eu.prototype).get=function(t){return be(this.a[t])},t.set=function(t,e){return this.a[t]=e,be()},t.T=function(t){return delete this.a[t],be()},t.ba=function(){},t.ha=function(){},(t=Iu.prototype).get=function(t){var e=this;return be().then(function(){return Cr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return be().then(function(){var t=Tr(n);null===t?r.T(e):r.a.setItem(e,t)})},t.T=function(t){var e=this;return be().then(function(){e.a.removeItem(t)})},t.ba=function(t){l.window&&$e(l.window,"storage",t)},t.ha=function(t){l.window&&en(l.window,"storage",t)},(t=Su.prototype).get=function(){return be(null)},t.set=function(){return be()},t.T=function(){return be()},t.ba=function(){},t.ha=function(){},(t=Cu.prototype).get=function(t){var e=this;return be().then(function(){return Cr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return be().then(function(){var t=Tr(n);null===t?r.T(e):r.a.setItem(e,t)})},t.T=function(t){var e=this;return be().then(function(){e.a.removeItem(t)})},t.ba=function(){},t.ha=function(){};var ku,Ou,Ru={F:Iu,$a:Cu},Pu={F:Iu,$a:Cu},Du={F:ru,$a:Su},xu={F:Iu,$a:Su},Lu={od:"local",NONE:"none",qd:"session"};function Mu(){var t=!(Ar(gr())||!ur()),e=Ir(),n=br();this.m=t,this.h=e,this.l=n,this.a={},t=ku=ku||new Au;try{this.g=!$n()&&Dr()||!l.indexedDB?new t.a.F:new wu(cr()?new Eu:new t.a.F)}catch(t){this.g=new Eu,this.h=!0}try{this.i=new t.a.$a}catch(t){this.i=new Eu}this.u=new Eu,this.f=m(this.Vb,this),this.b={}}function Fu(){return Ou=Ou||new Mu}function Uu(t,e){switch(e){case"session":return t.i;case"none":return t.u;default:return t.g}}function ju(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Vu(t,e,n){return n=ju(e,n),"local"==e.F&&(t.b[n]=null),Uu(t,e.F).T(n)}function qu(t){t.c&&(clearInterval(t.c),t.c=null)}function Bu(t){this.a=t,this.b=Fu()}(t=Mu.prototype).get=function(t,e){return Uu(this,t.F).get(ju(t,e))},t.set=function(e,t,n){var r=ju(e,n),i=this,o=Uu(this,e.F);return o.set(r,t).then(function(){return o.get(r)}).then(function(t){"local"==e.F&&(i.b[r]=t)})},t.addListener=function(t,e,n){var r;t=ju(t,e),this.l&&(this.b[t]=l.localStorage.getItem(t)),ut(this.a)&&(Uu(this,"local").ba(this.f),this.h||($n()||!Dr())&&l.indexedDB||!this.l||(qu(r=this),r.c=setInterval(function(){for(var t in r.a){var e=l.localStorage.getItem(t),n=r.b[t];e!=n&&(r.b[t]=e,e=new qe({type:"storage",key:t,target:window,oldValue:n,newValue:e,a:!0}),r.Vb(e))}},1e3))),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=ju(t,e),this.a[t]&&(H(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),ut(this.a)&&(Uu(this,"local").ha(this.f),qu(this))},t.Vb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=l.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.ib(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Uu(this,"local").ha(this.f):qu(this),this.m)if(n=l.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?l.localStorage.setItem(e,r):l.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this,n=function(){void 0===t.a.a&&o.b[e]===l.localStorage.getItem(e)||(o.b[e]=l.localStorage.getItem(e),o.ib(e))};Bt&&Jt&&10==Jt&&l.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else U(t,m(this.ib,this))},t.ib=function(t){this.a[t]&&U(this.a[t],function(t){t()})};var Wu,Hu={name:"authEvent",F:"local"};function Gu(){this.a=Fu()}function Ku(t,e){this.b=zu,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=l.Int32Array?new Int32Array(64):Array(64),void 0===Wu&&(Wu=l.Int32Array?new Int32Array(tc):tc),this.reset()}e(Ku,function(){this.b=-1});for(var zu=64,Qu=zu-1,Xu=[],Yu=0;Yu<Qu;Yu++)Xu[Yu]=0;var Ju=G(128,Xu);function $u(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;e<64;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;e<64;e++)var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0,s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&l)+(0|Wu[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0;t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function Zu(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&($u(t),i=0);else{if(!d(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&($u(t),i=0)}}t.c=i,t.g+=n}Ku.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):K(this.h)};var tc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function ec(){Ku.call(this,8,nc)}e(ec,Ku);var nc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function rc(t,e,n,r,i){this.u=t,this.i=e,this.l=n,this.m=r||null,this.s=i||null,this.h=e+":"+n,this.w=new Gu,this.g=new Bu(this.h),this.f=null,this.b=[],this.a=this.c=null}function ic(t){return new w("invalid-cordova-configuration",t)}function oc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function sc(c){return c.f||(c.f=c.ka().then(function(){return new fe(function(n){function e(r){t=!0,s&&s.cancel(),ac(i).then(function(t){var e,n=o;t&&r&&r.url&&(e=null,-1!=(n=Ki(r.url)).indexOf("/__/auth/callback")&&(e=(e="object"==typeof(e=Cr(An(e=kn(n),"firebaseError")||null))?E(e):null)?new Ao(t.c,t.b,null,null,e,null,t.S()):new Ao(t.c,t.b,n,t.f,null,null,t.S())),n=e||o),oc(i,n)})}var i,o,t,s,r,a,u;c.Ca(function t(e){return n(e),c.Qa(t),!1}),i=c,o=new Ao("unknown",null,null,null,new w("no-auth-event")),t=!1,s=yn(500).then(function(){return ac(i).then(function(){t||oc(i,o)})}),r=l.handleOpenURL,l.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(mr("BuildInfo.packageName",l).toLowerCase()+"://")&&e({url:t}),"function"==typeof r)try{r(t)}catch(t){console.error(t)}},Po=Po||new Oo,a=e,(u=Po).a.push(a),u.b||(u.b=function(t){for(var e=0;e<u.a.length;e++)u.a[e](t)},"function"==typeof(a=mr("universalLinks.subscribe",l))&&a(null,u.b))})})),c.f}function ac(e){var t,n=null;return(t=e.g).b.get(Hu,t.a).then(ko).then(function(t){return n=t,Vu((t=e.g).b,Hu,t.a)}).then(function(){return n})}function uc(t){this.a=t,this.b=Fu()}(t=rc.prototype).ka=function(){return this.Ga?this.Ga:this.Ga=(ar(void 0)?sr().then(function(){return new fe(function(t,e){var n=l.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):_e(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof mr("universalLinks.subscribe",l))throw ic("cordova-universal-links-plugin-fix is not installed");if(void 0===mr("BuildInfo.packageName",l))throw ic("cordova-plugin-buildinfo is not installed");if("function"!=typeof mr("cordova.plugins.browsertab.openUrl",l))throw ic("cordova-plugin-browsertab is not installed");if("function"!=typeof mr("cordova.InAppBrowser.open",l))throw ic("cordova-plugin-inappbrowser is not installed")},function(){throw new w("cordova-not-ready")})},t.Lb=function(t,e){return e(new w("operation-not-supported-in-this-environment")),be()},t.Jb=function(){return _e(new w("operation-not-supported-in-this-environment"))},t.Xb=function(){return!1},t.Ub=function(){return!0},t.Qb=function(){return!0},t.Kb=function(t,e,n,r){if(this.c)return _e(new w("redirect-operation-pending"));var i=this,o=l.document,s=null,a=null,u=null,c=null;return this.c=be().then(function(){return No(e),sc(i)}).then(function(){return function(n,t,e,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Ao(t,r,null,o,new w("no-auth-event"),null,i),a=mr("BuildInfo.packageName",l);if("string"!=typeof a)throw new w("invalid-cordova-configuration");var u=mr("BuildInfo.displayName",l),c={};if(gr().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=a;else{if(!gr().toLowerCase().match(/android/))return _e(new w("operation-not-supported-in-this-environment"));c.apn=a}u&&(c.appDisplayName=u),o=function(t){var e=new ec;Zu(e,t),t=[];var n=8*e.g;e.c<56?Zu(e,Ju,56-e.c):Zu(e,Ju,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for($u(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return V(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(o),c.sessionId=o;var h=nu(n.u,n.i,n.l,t,e,null,r,n.m,c,n.s,i);return n.ka().then(function(){var t=n.h;return n.w.a.set(Hu,s.v(),t)}).then(function(){var t=mr("cordova.plugins.browsertab.isAvailable",l);if("function"!=typeof t)throw new w("invalid-cordova-configuration");var e=null;t(function(t){if(t){if("function"!=typeof(e=mr("cordova.plugins.browsertab.openUrl",l)))throw new w("invalid-cordova-configuration");e(h)}else{if("function"!=typeof(e=mr("cordova.InAppBrowser.open",l)))throw new w("invalid-cordova-configuration");t=gr(),n.a=e(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new fe(function(e,t){a=function(){var t=mr("cordova.plugins.browsertab.close",l);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ca(a),u=function(){s=s||yn(2e3).then(function(){t(new w("redirect-cancelled-by-user"))})},c=function(){Rr()&&u()},o.addEventListener("resume",u,!1),gr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)}).o(function(t){return ac(i).then(function(){throw t})})}).ma(function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),s&&s.cancel(),a&&i.Qa(a),i.c=null})},t.Ca=function(e){this.b.push(e),sc(this).o(function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new Ao("unknown",null,null,null,new w("no-auth-event")),e(t))})},t.Qa=function(e){H(this.b,function(t){return t==e})};var cc={name:"pendingRedirect",F:"session"};function hc(t){return Vu(t.b,cc,t.a)}function lc(t,e,n){this.i={},this.w=0,this.D=t,this.u=e,this.m=n,this.h=[],this.f=!1,this.l=m(this.s,this),this.b=new Sc,this.B=new Oc,this.g=new uc(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.B,this.c.linkViaPopup=this.B,this.c.reauthViaPopup=this.B,this.a=fc(this.D,this.u,this.m,I)}function fc(t,e,n,r){var i=Ll.SDK_VERSION||null;return new(ar()?rc:$a)(t,e,n,i,r)}function pc(e){e.f||(e.f=!0,e.a.Ca(e.l));var n=e.a;return e.a.ka().o(function(t){throw e.a==n&&e.reset(),t})}function dc(n){n.a.Ub()&&pc(n).o(function(t){var e=new Ao("unknown",null,null,null,new w("operation-not-supported-in-this-environment"));_c(t)&&n.s(e)}),n.a.Qb()||Cc(n.b)}function vc(n,t){var e;B(n.h,t)||n.h.push(t),n.f||(e=n.g).b.get(cc,e.a).then(function(t){return"pending"==t}).then(function(t){t?hc(n.g).then(function(){pc(n).o(function(t){var e=new Ao("unknown",null,null,null,new w("operation-not-supported-in-this-environment"));_c(t)&&n.s(e)})}):dc(n)}).o(function(){dc(n)})}function yc(t,e){H(t.h,function(t){return t==e})}lc.prototype.reset=function(){this.f=!1,this.a.Qa(this.l),this.a=fc(this.D,this.u,this.m),this.i={}},lc.prototype.s=function(t){if(!t)throw new w("invalid-auth-event");if(6e5<=_()-this.w&&(this.i={},this.w=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Cb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.w=_())),e=!0;break}}return Cc(this.b),e};var gc=new Or(2e3,1e4),mc=new Or(3e4,6e4);function bc(t,e,n,r,i,o,s){return t.a.Jb(e,n,r,function(){t.f||(t.f=!0,t.a.Ca(t.l))},function(){t.reset()},i,o,s)}function _c(t){return t&&"auth/cordova-not-ready"==t.code}function wc(e,t,n,r,i){var o,s;return(s=e.g).b.set(cc,"pending",s.a).then(function(){return e.a.Kb(t,n,r,i).o(function(t){if(_c(t))throw new w("operation-not-supported-in-this-environment");return o=t,hc(e.g).then(function(){throw o})}).then(function(){return e.a.Xb()?new fe(function(){}):hc(e.g).then(function(){return e.pa()}).then(function(){}).o(function(){})})})}function Ec(t,e,n,r,i){return t.a.Lb(r,function(t){e.la(n,null,t,i)},gc.get())}lc.prototype.pa=function(){return this.b.pa()};var Ic={};function Tc(t,e,n){var r=e+":"+n;return Ic[r]||(Ic[r]=new lc(t,e,n)),Ic[r]}function Sc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Cc(t){t.g||(t.g=!0,kc(t,!1,null,null))}function Nc(t){t.g&&!t.i&&kc(t,!1,null,null)}function Ac(t,e){if(t.b=function(){return be(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function kc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return _e(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Ac(t,n):Ac(t,{user:null}),t.f=[],t.c=[]}function Oc(){}function Rc(){this.Bb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.Bb},set:function(t){this.Bb=t},enumerable:!1})}function Pc(t,e){this.a=e,Ur(this,"verificationId",t)}function Dc(t,e,n,r){return new To(t).cb(e,n).then(function(t){return new Pc(t,r)})}function xc(t){var e=Pi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new w("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");jr(this,{token:t,expirationTime:Pr(1e3*e.exp),authTime:Pr(1e3*e.auth_time),issuedAtTime:Pr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Lc(t,e,n){var r=e&&e[Fc];if(!r)throw new w("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=ct(e),this.g=n,this.c=new zi(null,r),this.b=[];var i=this;U(e[Mc]||[],function(t){(t=Wr(t))&&i.b.push(t)}),Ur(this,"auth",this.a),Ur(this,"session",this.c),Ur(this,"hints",this.b)}Sc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Sc.prototype.h=function(t,e){var n,r,i,o;t?(this.reset(),this.g=!0,n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code,this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(kc(this,!0,null,t.a),be()):e.Da(n,r)?function(e,t,n){n=n.Da(t.c,t.b);var r=t.g,i=t.f,o=t.i,s=t.S(),a=!!t.c.match(/Redirect$/);n(r,i,s,o).then(function(t){kc(e,a,t,null)}).o(function(t){kc(e,a,null,t)})}(this,t,e):_e(new w("invalid-auth-event")):(kc(this,!1,null,null),be())):_e(new w("invalid-auth-event"))},Sc.prototype.pa=function(){var i=this;return new fe(function(t,e){var n,r;i.b?i.b().then(t,e):(i.f.push(t),i.c.push(e),n=i,r=new w("timeout"),n.a&&n.a.cancel(),n.a=yn(mc.get()).then(function(){n.b||(n.g=!0,kc(n,!0,null,r))}))})},Oc.prototype.h=function(t,e){var n,r,i,o,s,a;t?(n=t.c,r=t.b,t.a?(e.la(t.c,null,t.a,t.b),be()):e.Da(n,r)?(o=e,s=(i=t).b,a=i.c,o.Da(a,s)(i.g,i.f,i.S(),i.i).then(function(t){o.la(a,t,null,s)}).o(function(t){o.la(a,null,t,s)})):_e(new w("invalid-auth-event"))):_e(new w("invalid-auth-event"))},Pc.prototype.confirm=function(t){return t=So(this.verificationId,t),this.a(t)};var Mc="mfaInfo",Fc="mfaPendingCredential";function Uc(t,e,n,r){w.call(this,"multi-factor-auth-required",r,e),this.b=new Lc(t,e,n),Ur(this,"resolver",this.b)}function jc(t,e,n){if(t&&y(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new Uc(e,t.serverResponse,n,t.message)}catch(t){}return null}function Vc(){}function qc(t){Ur(this,"factorId",t.ea),this.a=t}function Bc(t){if(qc.call(this,t),this.a.ea!=To.PROVIDER_ID)throw new w("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function Wc(t,e){for(var n in Ve.call(this,t),e)this[n]=e[n]}function Hc(t,e){this.a=t,this.b=[],this.c=m(this.wc,this),$e(this.a,"userReloaded",this.c);var r=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&U(e.multiFactor.enrolledFactors,function(t){var e=null,n={};if(t){t.uid&&(n[Kr]=t.uid),t.displayName&&(n[Hr]=t.displayName),t.enrollmentTime&&(n[Gr]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(n[zr]=t.phoneNumber);try{e=new Qr(n)}catch(t){}t=e}else t=null;t&&r.push(t)}),Gc(this,r)}function Gc(t,e){t.b=e,Ur(t,"enrolledFactors",e)}function Kc(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function zc(t){this.c=t,this.b=this.a=null}function Qc(t){return t.b&&1e3*t.b.c||0}function Xc(t,e){var n=e.refreshToken;t.b=Ri(e[js]||""),t.a=n}function Yc(t,e){this.a=t||null,this.b=e||null,jr(this,{lastSignInTime:Pr(e||null),creationTime:Pr(t||null)})}function Jc(t,e,n,r,i,o){jr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function $c(t,e,n){var r;this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null,t=Ll.SDK_VERSION?yr(Ll.SDK_VERSION):null,this.a=new Fs(this.l,N(I),t),this.b=new zc(this.a),oh(this,e[js]),Xc(this.b,e),Ur(this,"refreshToken",this.b.a),uh(this,n||{}),ln.call(this),this.P=!1,this.s&&_r()&&(this.i=Tc(this.s,this.l,this.m)),this.R=[],this.h=null,this.B=(r=this,new Kc(function(){return r.I(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var t=Qc(r.b)-_()-3e5;return 0<t?t:0})),this.Z=m(this.Ma,this);var i=this;this.oa=null,this.za=function(t){i.va(t.g)},this.aa=null,this.W=[],this.ya=function(t){th(i,t.c)},this.$=null,this.O=new Hc(this,n),Ur(this,"multiFactor",this.O)}function Zc(t,e){t.aa&&en(t.aa,"languageCodeChanged",t.za),(t.aa=e)&&$e(e,"languageCodeChanged",t.za)}function th(t,e){t.W=e,Gs(t.a,Ll.SDK_VERSION?yr(Ll.SDK_VERSION,t.W):null)}function eh(t,e){t.$&&en(t.$,"frameworkChanged",t.ya),(t.$=e)&&$e(e,"frameworkChanged",t.ya)}function nh(e){try{return Ll.app(e.m).auth()}catch(t){throw new w("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function rh(t){t.D||t.B.b||(t.B.start(),en(t,"tokenChanged",t.Z),$e(t,"tokenChanged",t.Z))}function ih(t){en(t,"tokenChanged",t.Z),t.B.stop()}function oh(t,e){t.xa=e,Ur(t,"_lat",e)}function sh(t){for(var e=[],n=0;n<t.R.length;n++)e.push(t.R[n](t));return Ee(e).then(function(){return t})}function ah(t){t.i&&!t.P&&(t.P=!0,vc(t.i,t))}function uh(t,e){jr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new Yc(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function ch(){}function hh(t){return be().then(function(){if(t.D)throw new w("app-deleted")})}function lh(t){return V(t.providerData,function(t){return t.providerId})}function fh(t,e){e&&(ph(t,e.providerId),t.providerData.push(e))}function ph(t,e){H(t.providerData,function(t){return t.providerId==e})}function dh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Ur(t,e,n)}function vh(e,t){var n,r,i;e!=t&&(jr(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?Ur(e,"metadata",new Yc((i=t.metadata).a,i.b)):Ur(e,"metadata",new Yc),U(t.providerData,function(t){fh(e,t)}),n=e.b,r=t.b,n.b=r.b,n.a=r.a,Ur(e,"refreshToken",e.b.a),Gc(e.O,t.O.b))}function yh(r){return r.I().then(function(t){var e,n=r.isAnonymous;return qa((e=r).a,ma,{idToken:t}).then(m(e.Ic,e)).then(function(){return n||dh(r,"isAnonymous",!1),t})})}function gh(t,e){e[js]&&t.xa!=e[js]&&(Xc(t.b,e),t.dispatchEvent(new Wc("tokenChanged")),oh(t,e[js]),dh(t,"refreshToken",t.b.a))}function mh(t,e){return yh(t).then(function(){if(B(lh(t),e))return sh(t).then(function(){throw new w("provider-already-linked")})})}function bh(t,e,n){return Vr({user:t,credential:Co(e),additionalUserInfo:e=Fi(e),operationType:n})}function _h(t,e){return gh(t,e),t.reload().then(function(){return t})}function wh(n,r,t,e,i){if(!_r())return _e(new w("operation-not-supported-in-this-environment"));if(n.h&&!i)return _e(n.h);var o=Mi(t.providerId),s=Nr(n.uid+":::"),a=null;(!Ir()||ur())&&n.s&&t.isOAuthProvider&&(a=nu(n.s,n.l,n.m,r,t,null,s,Ll.SDK_VERSION||null,null,null,n.tenantId));var u=rr(a,o&&o.ta,o&&o.sa);return e=e().then(function(){if(Ih(n),!i)return n.I().then(function(){})}).then(function(){return bc(n.i,u,r,t,s,!!a,n.tenantId)}).then(function(){return new fe(function(t,e){n.la(r,null,new w("cancelled-popup-request"),n.g||null),n.f=t,n.w=e,n.g=s,n.c=Ec(n.i,n,r,u,s)})}).then(function(t){return u&&nr(u),t?Vr(t):null}).o(function(t){throw u&&nr(u),t}),Th(n,e,i)}function Eh(e,t,n,r,i){if(!_r())return _e(new w("operation-not-supported-in-this-environment"));if(e.h&&!i)return _e(e.h);var o=null,s=Nr(e.uid+":::");return r=r().then(function(){if(Ih(e),!i)return e.I().then(function(){})}).then(function(){return e.fa=s,sh(e)}).then(function(t){return e.ga&&(t=(t=e.ga).b.set(Nh,e.v(),t.a)),t}).then(function(){return wc(e.i,t,n,s,e.tenantId)}).o(function(t){if(o=t,e.ga)return Ah(e.ga);throw o}).then(function(){if(o)throw o}),Th(e,r,i)}function Ih(t){if(!t.i||!t.P){if(t.i&&!t.P)throw new w("internal-error");throw new w("auth-domain-config-required")}}function Th(n,t,e){var r,i,o=(i=t,(r=n).h&&!e?(i.cancel(),_e(r.h)):i.o(function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(r.h||r.dispatchEvent(new Wc("userInvalidated")),r.h=t),t}));return n.N.push(o),o.ma(function(){W(n.N,o)}),o.o(function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=jc(t.v(),nh(n),m(n.hc,n))),e||t})}function Sh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[js]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=new $c(e,n,t);return t.providerData&&U(t.providerData,function(t){t&&fh(r,Vr(t))}),t.redirectEventId&&(r.fa=t.redirectEventId),r}function Ch(t){this.a=t,this.b=Fu()}Lc.prototype.Pc=function(t){var n=this;return t.ob(this.a.b,this.c).then(function(t){var e=ct(n.f);return delete e[Mc],delete e[Fc],lt(e,t),n.g(e)})},e(Uc,w),Vc.prototype.ob=function(t,e,n){return e.type==Qi?(o=this,s=t,a=n,e.Fa().then(function(t){return t={idToken:t},void 0!==a&&(t.displayName=a),lt(t,{phoneVerificationInfo:Io(o.a)}),qa(s,ya,t)})):(r=this,i=t,e.Fa().then(function(t){return lt(t={mfaPendingCredential:t},{phoneVerificationInfo:Io(r.a)}),qa(i,ga,t)}));var r,i,o,s,a},e(qc,Vc),e(Bc,qc),e(Wc,Ve),(t=Hc.prototype).wc=function(t){var e,n;Gc(this,(e=t.ed,n=[],U(e.mfaInfo||[],function(t){(t=Wr(t))&&n.push(t)}),n))},t.Ob=function(){return this.a.I().then(function(t){return new zi(t,null)})},t.dc=function(e,n){var r=this,i=this.a.a;return this.Ob().then(function(t){return e.ob(i,t,n)}).then(function(t){return gh(r.a,t),r.a.reload()})},t.$c=function(t){var n=this,r="string"==typeof t?t:t.uid,e=this.a.a;return this.a.I().then(function(t){return qa(e,Va,{idToken:t,mfaEnrollmentId:r})}).then(function(t){var e=j(n.b,function(t){return t.uid!=r});return Gc(n,e),gh(n.a,t),n.a.reload().o(function(t){if("auth/user-token-expired"!=t.code)throw t})})},t.v=function(){return{multiFactor:{enrolledFactors:V(this.b,function(t){return t.v()})}}},Kc.prototype.start=function(){this.a=this.c,function e(n,t){var r,i;n.stop(),n.b=yn((r=n,(i=t)?(r.a=r.c,r.g()):(i=r.a,r.a*=2,r.a>r.f&&(r.a=r.f),i))).then(function(){return e=l.document,n=null,Rr()||!e?be():new fe(function(t){n=function(){Rr()&&(e.removeEventListener("visibilitychange",n,!1),t())},e.addEventListener("visibilitychange",n,!1)}).o(function(t){throw e.removeEventListener("visibilitychange",n,!1),t});var e,n}).then(function(){return n.h()}).then(function(){e(n,!0)}).o(function(t){n.i(t)&&e(n,!1)})}(this,!0)},Kc.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},zc.prototype.v=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:Qc(this)}},zc.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?_e(new w("user-token-expired")):t||!this.b||_()>Qc(this)-3e4?this.a?(n={grant_type:"refresh_token",refresh_token:(e=this).a},r=e.c,i=n,new fe(function(e,n){"refresh_token"==i.grant_type&&i.refresh_token||"authorization_code"==i.grant_type&&i.code?Ks(r,r.u+"?key="+encodeURIComponent(r.c),function(t){t?t.error?n(Wa(t)):t.access_token&&t.refresh_token?e(t):n(new w("internal-error")):n(new w("network-request-failed"))},"POST",qn(i).toString(),r.g,r.m.get()):n(new w("internal-error"))}).then(function(t){return e.b=Ri(t.access_token),e.a=t.refresh_token,{accessToken:e.b.toString(),refreshToken:e.a}}).o(function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t})):be(null):be({accessToken:this.b.toString(),refreshToken:this.a});var e,n,r,i},Yc.prototype.v=function(){return{lastLoginAt:this.b,createdAt:this.a}},e($c,ln),$c.prototype.va=function(t){this.oa=t,Hs(this.a,t)},$c.prototype.ja=function(){return this.oa},$c.prototype.Ea=function(){return K(this.W)},$c.prototype.Ma=function(){this.B.b&&(this.B.stop(),this.B.start())},Ur($c.prototype,"providerId","firebase"),(t=$c.prototype).reload=function(){var t=this;return Th(this,hh(this).then(function(){return yh(t).then(function(){return sh(t)}).then(ch)}))},t.mc=function(t){return this.I(t).then(function(t){return new xc(t)})},t.I=function(t){var e=this;return Th(this,hh(this).then(function(){return e.b.getToken(t)}).then(function(t){if(!t)throw new w("internal-error");return t.accessToken!=e.xa&&(oh(e,t.accessToken),e.dispatchEvent(new Wc("tokenChanged"))),dh(e,"refreshToken",t.refreshToken),t.accessToken}))},t.Ic=function(t){if(!(t=t.users)||!t.length)throw new w("internal-error");uh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e,n=(e=(e=t).providerUserInfo)&&e.length?V(e,function(t){return new Jc(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[],r=0;r<n.length;r++)fh(this,n[r]);dh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new Wc("userReloaded",{ed:t}))},t.Jc=function(t){return Mr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.pb(t)},t.pb=function(t){var e=this,n=null;return Th(this,t.c(this.a,this.uid).then(function(t){return gh(e,t),n=bh(e,t,"reauthenticate"),e.h=null,e.reload()}).then(function(){return n}),!0)},t.Ac=function(t){return Mr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.mb(t)},t.mb=function(e){var n=this,r=null;return Th(this,mh(this,e.providerId).then(function(){return n.I()}).then(function(t){return e.b(n.a,t)}).then(function(t){return r=bh(n,t,"link"),_h(n,t)}).then(function(){return r}))},t.Bc=function(t,e){var n=this;return Th(this,mh(this,"phone").then(function(){return Dc(nh(n),t,e,m(n.mb,n))}))},t.Kc=function(t,e){var n=this;return Th(this,be().then(function(){return Dc(nh(n),t,e,m(n.pb,n))}),!0)},t.xb=function(e){var n=this;return Th(this,this.I().then(function(t){return n.a.xb(t,e)}).then(function(t){return gh(n,t),n.reload()}))},t.cd=function(e){var n=this;return Th(this,this.I().then(function(t){return e.b(n.a,t)}).then(function(t){return gh(n,t),n.reload()}))},t.yb=function(e){var n=this;return Th(this,this.I().then(function(t){return n.a.yb(t,e)}).then(function(t){return gh(n,t),n.reload()}))},t.zb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return hh(this);var n=this;return Th(this,this.I().then(function(t){return n.a.zb(t,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(t){return gh(n,t),dh(n,"displayName",t.displayName||null),dh(n,"photoURL",t.photoUrl||null),U(n.providerData,function(t){"password"===t.providerId&&(Ur(t,"displayName",n.displayName),Ur(t,"photoURL",n.photoURL))}),sh(n)}).then(ch))},t.ad=function(e){var n=this;return Th(this,yh(this).then(function(t){return B(lh(n),e)?qa(n.a,pa,{idToken:t,deleteProvider:[e]}).then(function(t){var e={};return U(t.providerUserInfo||[],function(t){e[t.providerId]=!0}),U(lh(n),function(t){e[t]||ph(n,t)}),e[To.PROVIDER_ID]||Ur(n,"phoneNumber",null),sh(n)}):sh(n).then(function(){throw new w("no-such-provider")})}))},t.delete=function(){var e=this;return Th(this,this.I().then(function(t){return qa(e.a,fa,{idToken:t})}).then(function(){e.dispatchEvent(new Wc("userDeleted"))})).then(function(){for(var t=0;t<e.N.length;t++)e.N[t].cancel("app-deleted");Zc(e,null),eh(e,null),e.N=[],e.D=!0,ih(e),Ur(e,"refreshToken",null),e.i&&yc(e.i,e)})},t.Cb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.fa||null)==e||"reauthViaRedirect"==t&&(this.fa||null)==e)},t.la=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},t.Da=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?m(this.Hb,this):"reauthViaPopup"==t&&e==(this.g||null)?m(this.Ib,this):"linkViaRedirect"==t&&(this.fa||null)==e?m(this.Hb,this):"reauthViaRedirect"==t&&(this.fa||null)==e?m(this.Ib,this):null},t.Cc=function(t){var e=this;return wh(this,"linkViaPopup",t,function(){return mh(e,t.providerId).then(function(){return sh(e)})},!1)},t.Lc=function(t){return wh(this,"reauthViaPopup",t,function(){return be()},!0)},t.Dc=function(t){var e=this;return Eh(this,"linkViaRedirect",t,function(){return mh(e,t.providerId)},!1)},t.Mc=function(t){return Eh(this,"reauthViaRedirect",t,function(){return be()},!0)},t.Hb=function(e,n,t,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return t=this.I().then(function(t){return oa(i.a,{requestUri:e,postBody:r,sessionId:n,idToken:t})}).then(function(t){return o=bh(i,t,"link"),_h(i,t)}).then(function(){return o}),Th(this,t)},t.Ib=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Th(this,be().then(function(){return Ji(sa(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=bh(i,t,"reauthenticate"),gh(i,t),i.h=null,i.reload()}).then(function(){return o}),!0)},t.qb=function(e){var n=this,r=null;return Th(this,this.I().then(function(t){return r=t,void 0===e||ut(e)?{}:Ai(new mi(e))}).then(function(t){return n.a.qb(r,t)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.Ab=function(e,n){var r=this,i=null;return Th(this,this.I().then(function(t){return i=t,void 0===n||ut(n)?{}:Ai(new mi(n))}).then(function(t){return r.a.Ab(i,e,t)}).then(function(t){if(r.email!=t)return r.reload()}).then(function(){}))},t.hc=function(t){var e=null,n=this;return Th(this,t=Ji(be(t),n.uid).then(function(t){return e=bh(n,t,"reauthenticate"),gh(n,t),n.h=null,n.reload()}).then(function(){return e}),!0)},t.toJSON=function(){return this.v()},t.v=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.v(),redirectEventId:this.fa||null};return this.metadata&&lt(e,this.metadata.v()),U(this.providerData,function(t){e.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(t))}),lt(e,this.O.v()),e};var Nh={name:"redirectUser",F:"session"};function Ah(t){return Vu(t.b,Nh,t.a)}function kh(t){var e,n,r,i,o,s,a,u,c;this.a=t,this.b=Fu(),this.c=null,this.f=(n=Ph("local"),r=Ph("session"),i=Ph("none"),o=(e=this).b,s=n,a=e.a,u=ju(s,a),c=Uu(o,s.F),o.get(s,a).then(function(t){var e=null;try{e=Cr(l.localStorage.getItem(u))}catch(t){}if(e&&!t)return l.localStorage.removeItem(u),o.set(s,e,a);e&&t&&"localStorage"!=c.type&&l.localStorage.removeItem(u)}).then(function(){return e.b.get(r,e.a)}).then(function(t){return t?r:e.b.get(i,e.a).then(function(t){return t?i:e.b.get(n,e.a).then(function(t){return t?n:e.b.get(Rh,e.a).then(function(t){return t?Ph(t):n})})})}).then(function(t){return e.c=t,Oh(e,t.F)}).o(function(){e.c||(e.c=n)})),this.b.addListener(Ph("local"),this.a,m(this.g,this))}function Oh(t,e){var n,a,r=[];for(n in Lu)Lu[n]!==e&&r.push(Vu(t.b,Ph(Lu[n]),t.a));return r.push(Vu(t.b,Rh,t.a)),a=r,new fe(function(n,e){var r=a.length,i=[];if(r)for(var t=function(t,e){r--,i[t]=e,0==r&&n(i)},o=function(t){e(t)},s=0;s<a.length;s++)we(a[s],b(t,s),o);else n(i)})}kh.prototype.g=function(){var e=this,n=Ph("local");Mh(this,function(){return be().then(function(){return e.c&&"local"!=e.c.F?e.b.get(n,e.a):null}).then(function(t){if(t)return Oh(e,"local").then(function(){e.c=n})})})};var Rh={name:"persistence",F:"session"};function Ph(t){return{name:"authUser",F:t}}function Dh(t,e){return Mh(t,function(){return t.b.set(t.c,e.v(),t.a)})}function xh(t){return Mh(t,function(){return Vu(t.b,t.c,t.a)})}function Lh(t,e){return Mh(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),Sh(t||{})})})}function Mh(t,e){return t.f=t.f.then(e,e),t.f}function Fh(t){if(this.l=!1,Ur(this,"settings",new Rc),Ur(this,"app",t),!this.app.options||!this.app.options.apiKey)throw new w("invalid-api-key");var n,e,r,i,o,s,a,u,c,h,l;t=Ll.SDK_VERSION?yr(Ll.SDK_VERSION):null,this.b=new Fs(this.app.options&&this.app.options.apiKey,N(I),t),this.P=[],this.m=[],this.O=[],this.$b=Ll.INTERNAL.createSubscribe(m(this.xc,this)),this.W=void 0,this.ac=Ll.INTERNAL.createSubscribe(m(this.yc,this)),Bh(this,null),this.i=new kh(this.app.options.apiKey+":"+this.app.name),this.B=new Ch(this.app.options.apiKey+":"+this.app.name),this.Z=zh(this,(e=(n=this).app.options.authDomain,c=(u=n).B,h=u.app.options.authDomain,l=c.b.get(Nh,c.a).then(function(t){return t&&h&&(t.authDomain=h),Sh(t||{})}).then(function(t){return(u.D=t)&&(t.ga=u.B),Ah(u.B)}),r=zh(u,l).then(function(){return Lh(n.i,e)}).then(function(e){return e?(e.ga=n.B,n.D&&(n.D.fa||null)==(e.fa||null)?e:e.reload().then(function(){return Dh(n.i,e).then(function(){return e})}).o(function(t){return"auth/network-request-failed"==t.code?e:xh(n.i)})):null}).then(function(t){Bh(n,t||null)}),zh(n,r))),this.h=zh(this,(i=this).Z.then(function(){return qh(i)}).o(function(){}).then(function(){if(!i.l)return i.oa()}).o(function(){}).then(function(){var t;i.l||(i.aa=!0,(t=i.i).b.addListener(Ph("local"),t.a,i.oa))})),this.aa=!1,this.oa=m(this.Xc,this),this.Ma=m(this.ca,this),this.xa=m(this.jc,this),this.ya=m(this.uc,this),this.za=m(this.vc,this),this.a=null,s=(o=this).app.options.authDomain,a=o.app.options.apiKey,s&&_r()&&(o.Zb=o.Z.then(function(){var t;if(!o.l)return o.a=Tc(s,a,o.app.name),vc(o.a,o),Hh(o)&&ah(Hh(o)),o.D&&(ah(o.D),(t=o.D).va(o.ja()),Zc(t,o),th(t=o.D,o.N),eh(t,o),o.D=null),o.a})),this.INTERNAL={},this.INTERNAL.delete=m(this.delete,this),this.INTERNAL.logFramework=m(this.Ec,this),this.s=0,ln.call(this),Object.defineProperty(this,"lc",{get:function(){return this.ja()},set:function(t){this.va(t)},enumerable:!1}),this.$=null,Object.defineProperty(this,"ti",{get:function(){return this.S()},set:function(t){this.ub(t)},enumerable:!1}),this.R=null,this.N=[]}function Uh(t){Ve.call(this,"languageCodeChanged"),this.g=t}function jh(t){Ve.call(this,"frameworkChanged"),this.c=t}function Vh(t){return t.Zb||_e(new w("auth-domain-config-required"))}function qh(t){if(!_r())return _e(new w("operation-not-supported-in-this-environment"));var e=Vh(t).then(function(){return t.a.pa()}).then(function(t){return t?Vr(t):null});return zh(t,e)}function Bh(t,e){var n,r;Hh(t)&&(n=Hh(t),r=t.Ma,H(n.R,function(t){return t==r}),en(Hh(t),"tokenChanged",t.xa),en(Hh(t),"userDeleted",t.ya),en(Hh(t),"userInvalidated",t.za),ih(Hh(t))),e&&(e.R.push(t.Ma),$e(e,"tokenChanged",t.xa),$e(e,"userDeleted",t.ya),$e(e,"userInvalidated",t.za),0<t.s&&rh(e)),Ur(t,"currentUser",e),e&&(e.va(t.ja()),Zc(e,t),th(e,t.N),eh(e,t))}function Wh(n,t){var e=null,r=null;return zh(n,t.then(function(t){return e=Co(t),r=Fi(t),s=t,(a={}).apiKey=(o=n).app.options.apiKey,a.authDomain=o.app.options.authDomain,a.appName=o.app.name,o.Z.then(function(){return t=a,e=s,n=o.B,r=o.Ea(),i=new $c(t,e),n&&(i.ga=n),r&&th(i,r),i.reload().then(function(){return i});var t,e,n,r,i}).then(function(t){return Hh(o)&&t.uid==Hh(o).uid?vh(Hh(o),t):(Bh(o,t),ah(t)),o.ca(t)}).then(function(){Kh(o)});var o,s,a},function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=jc(t.v(),n,m(n.ic,n))),e||t}).then(function(){return Vr({user:Hh(n),credential:e,additionalUserInfo:r,operationType:"signIn"})}))}function Hh(t){return t.currentUser}function Gh(t){return Hh(t)&&Hh(t)._lat||null}function Kh(t){if(t.aa){for(var e=0;e<t.m.length;e++)t.m[e]&&t.m[e](Gh(t));if(t.W!==t.getUid()&&t.O.length)for(t.W=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](Gh(t))}}function zh(t,e){return t.P.push(e),e.ma(function(){W(t.P,e)}),e}function Qh(){}function Xh(){this.a={},this.b=1e12}kh.prototype.tb=function(e){var n=null,r=this;return function(t){var e=new w("invalid-persistence-type"),n=new w("unsupported-persistence-type");t:{for(r in Lu)if(Lu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(hr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!du()&&"none"!==t)throw n;break;default:if(!br()&&"none"!==t)throw n}}(e),Mh(this,function(){return e!=r.c.F?r.b.get(r.c,r.a).then(function(t){return n=t,Oh(r,e)}).then(function(){if(r.c=Ph(e),n)return r.b.set(r.c,n,r.a)}):be()})},e(Fh,ln),e(Uh,Ve),e(jh,Ve),(t=Fh.prototype).tb=function(t){return t=this.i.tb(t),zh(this,t)},t.va=function(t){this.$===t||this.l||(this.$=t,Hs(this.b,this.$),this.dispatchEvent(new Uh(this.ja())))},t.ja=function(){return this.$},t.dd=function(){var t=l.navigator;this.va(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.Ec=function(t){this.N.push(t),Gs(this.b,Ll.SDK_VERSION?yr(Ll.SDK_VERSION,this.N):null),this.dispatchEvent(new jh(this.N))},t.Ea=function(){return K(this.N)},t.ub=function(t){this.R===t||this.l||(this.R=t,this.b.b=this.R)},t.S=function(){return this.R},t.toJSON=function(){return{apiKey:this.app.options.apiKey,authDomain:this.app.options.authDomain,appName:this.app.name,currentUser:Hh(this)&&Hh(this).v()}},t.Cb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.la=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},t.Da=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?m(this.gc,this):null},t.gc=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.Z.then(function(){return Wh(i,ia(i.b,o))})},t.Vc=function(e){if(!_r())return _e(new w("operation-not-supported-in-this-environment"));var n=this,t=Mi(e.providerId),r=Nr(),i=null;(!Ir()||ur())&&this.app.options.authDomain&&e.isOAuthProvider&&(i=nu(this.app.options.authDomain,this.app.options.apiKey,this.app.name,"signInViaPopup",e,null,r,Ll.SDK_VERSION||null,null,null,this.S()));var o=rr(i,t&&t.ta,t&&t.sa);return zh(this,t=Vh(this).then(function(t){return bc(t,o,"signInViaPopup",e,r,!!i,n.S())}).then(function(){return new fe(function(t,e){n.la("signInViaPopup",null,new w("cancelled-popup-request"),n.g),n.f=t,n.w=e,n.g=r,n.c=Ec(n.a,n,"signInViaPopup",o,r)})}).then(function(t){return o&&nr(o),t?Vr(t):null}).o(function(t){throw o&&nr(o),t}))},t.Wc=function(t){if(!_r())return _e(new w("operation-not-supported-in-this-environment"));var e=this;return zh(this,Vh(this).then(function(){return Mh(t=e.i,function(){return t.b.set(Rh,t.c.F,t.a)});var t}).then(function(){return wc(e.a,"signInViaRedirect",t,void 0,e.S())}))},t.pa=function(){var e=this;return qh(this).then(function(t){return e.a&&Nc(e.a.b),t}).o(function(t){throw e.a&&Nc(e.a.b),t})},t.bd=function(t){if(!t)return _e(new w("null-user"));if(this.R!=t.tenantId)return _e(new w("tenant-id-mismatch"));var e=this,n={};n.apiKey=this.app.options.apiKey,n.authDomain=this.app.options.authDomain,n.appName=this.app.name;var r,i,o,s,a,u,c=(r=t,i=n,o=e.B,s=e.Ea(),a=r.b,(u={})[js]=a.b&&a.b.toString(),u.refreshToken=a.a,i=new $c(i||{apiKey:r.l,authDomain:r.s,appName:r.m},u),o&&(i.ga=o),s&&th(i,s),vh(i,r),i);return zh(this,this.h.then(function(){if(e.app.options.apiKey!=t.l)return c.reload()}).then(function(){return Hh(e)&&t.uid==Hh(e).uid?(vh(Hh(e),t),e.ca(t)):(Bh(e,c),ah(c),e.ca(c))}).then(function(){Kh(e)}))},t.wb=function(){var t=this,e=this.h.then(function(){return t.a&&Nc(t.a.b),Hh(t)?(Bh(t,null),xh(t.i).then(function(){Kh(t)})):be()});return zh(this,e)},t.Xc=function(){var r=this;return Lh(this.i,this.app.options.authDomain).then(function(t){if(!r.l){var e,n;if((n=Hh(r)&&t)&&(n=Hh(r).uid,e=t.uid,n=null!=n&&""!==n&&null!=e&&""!==e&&n==e),n)return vh(Hh(r),t),Hh(r).I();(Hh(r)||t)&&(Bh(r,t),t&&(ah(t),t.ga=r.B),r.a&&vc(r.a,r),Kh(r))}})},t.ca=function(t){return Dh(this.i,t)},t.jc=function(){Kh(this),this.ca(Hh(this))},t.uc=function(){this.wb()},t.vc=function(){this.wb()},t.ic=function(t){var e=this;return this.h.then(function(){return Wh(e,be(t))})},t.xc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(Hh(e))})},t.yc=function(t){function e(){t.next(Hh(r))}var n,r=this;(n=this).O.push(e),zh(n,n.h.then(function(){!n.l&&B(n.O,e)&&n.W!==n.getUid()&&(n.W=n.getUid(),e(Gh(n)))}))},t.Gc=function(t,e,n){var r=this;return this.aa&&Promise.resolve().then(function(){"function"==typeof t?t(Hh(r)):"function"==typeof t.next&&t.next(Hh(r))}),this.$b(t,e,n)},t.Fc=function(t,e,n){var r=this;return this.aa&&Promise.resolve().then(function(){r.W=r.getUid(),"function"==typeof t?t(Hh(r)):"function"==typeof t.next&&t.next(Hh(r))}),this.ac(t,e,n)},t.kc=function(t){var e=this,n=this.h.then(function(){return Hh(e)?Hh(e).I(t).then(function(t){return{accessToken:t}}):null});return zh(this,n)},t.Rc=function(t){var n=this;return this.h.then(function(){return Wh(n,qa(n.b,La,{token:t}))}).then(function(t){var e=t.user;return dh(e,"isAnonymous",!1),n.ca(e),t})},t.Sc=function(t,e){var n=this;return this.h.then(function(){return Wh(n,qa(n.b,Ma,{email:t,password:e}))})},t.cc=function(t,e){var n=this;return this.h.then(function(){return Wh(n,qa(n.b,ha,{email:t,password:e}))})},t.Ya=function(t){var e=this;return this.h.then(function(){return Wh(e,t.ia(e.b))})},t.Qc=function(t){return Mr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Ya(t)},t.vb=function(){var n=this;return this.h.then(function(){var t=Hh(n);if(t&&t.isAnonymous){var e=Vr({providerId:null,isNewUser:!1});return Vr({user:t,credential:null,additionalUserInfo:e,operationType:"signIn"})}return Wh(n,n.b.vb()).then(function(t){var e=t.user;return dh(e,"isAnonymous",!0),n.ca(e),t})})},t.getUid=function(){return Hh(this)&&Hh(this).uid||null},t.bc=function(t){this.addAuthTokenListener(t),this.s++,0<this.s&&Hh(this)&&rh(Hh(this))},t.Nc=function(e){var n=this;U(this.m,function(t){t==e&&n.s--}),this.s<0&&(this.s=0),0==this.s&&Hh(this)&&ih(Hh(this)),this.removeAuthTokenListener(e)},t.addAuthTokenListener=function(t){var e=this;this.m.push(t),zh(this,this.h.then(function(){e.l||B(e.m,t)&&t(Gh(e))}))},t.removeAuthTokenListener=function(e){H(this.m,function(t){return t==e})},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(Ph("local"),t.a,this.oa),this.a&&(yc(this.a,this),Nc(this.a.b)),Promise.resolve()},t.fc=function(t){return zh(this,qa(this.b,la,{identifier:t,continueUri:wr()?Zn():"http://localhost"}).then(function(t){return t.signinMethods||[]}))},t.zc=function(t){return!!_o(t)},t.sb=function(e,n){var r=this;return zh(this,be().then(function(){var t=new mi(n);if(!t.c)throw new w("argument-error",wi+" must be true when sending sign in link to email");return Ai(t)}).then(function(t){return r.b.sb(e,t)}).then(function(){}))},t.fd=function(t){return this.Pa(t).then(function(t){return t.data.email})},t.jb=function(t,e){return zh(this,this.b.jb(t,e).then(function(){}))},t.Pa=function(t){return zh(this,this.b.Pa(t).then(function(t){return new Xr(t)}))},t.fb=function(t){return zh(this,this.b.fb(t).then(function(){}))},t.rb=function(e,t){var n=this;return zh(this,be().then(function(){return void 0===t||ut(t)?{}:Ai(new mi(t))}).then(function(t){return n.b.rb(e,t)}).then(function(){}))},t.Uc=function(t,e){return zh(this,Dc(this,t,e,m(this.Ya,this)))},t.Tc=function(n,r){var i=this;return zh(this,be().then(function(){var t=r||Zn(),e=bo(n,t);if(!(t=_o(t)))throw new w("argument-error","Invalid email link!");if(t.tenantId!==i.S())throw new w("tenant-id-mismatch");return i.Ya(e)}))},Qh.prototype.render=function(){},Qh.prototype.reset=function(){},Qh.prototype.getResponse=function(){},Qh.prototype.execute=function(){};var Yh=null;function Jh(t,e){return(e=$h(e))&&t.a[e]||null}function $h(t){return(t=void 0===t?1e12:t)?t.toString():null}function Zh(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ee(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():$e(this.f,"click",this.i)}function tl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function el(){}function nl(){}Xh.prototype.render=function(t,e){return this.a[this.b.toString()]=new Zh(t,e),this.b++},Xh.prototype.reset=function(t){var e=Jh(this,t);t=$h(t),e&&t&&(e.delete(),delete this.a[t])},Xh.prototype.getResponse=function(t){return(t=Jh(this,t))?t.getResponse():null},Xh.prototype.execute=function(t){(t=Jh(this,t))&&t.execute()},Zh.prototype.getResponse=function(){return tl(this),this.b},Zh.prototype.execute=function(){tl(this);var n=this;this.a||(this.a=setTimeout(function(){n.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var t=n.c.callback,e=n.c["expired-callback"];if(t)try{t(n.b)}catch(t){}n.a=setTimeout(function(){if(n.a=null,n.b=null,e)try{e()}catch(t){}n.h&&n.execute()},6e4)},500))},Zh.prototype.delete=function(){tl(this),this.g=!0,clearTimeout(this.a),this.a=null,en(this.f,"click",this.i)},Ur(el,"FACTOR_ID","phone"),nl.prototype.g=function(){return be(Yh=Yh||new Xh)},nl.prototype.c=function(){};var rl=null;function il(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var ol=new pt(yt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),sl=new Or(3e4,6e4);il.prototype.g=function(i){var o=this;return new fe(function(t,e){var r=setTimeout(function(){e(new w("network-request-failed"))},sl.get());!l.grecaptcha||i!==o.f&&!o.b?(l[o.a]=function(){var n;l.grecaptcha?(o.f=i,n=l.grecaptcha.render,l.grecaptcha.render=function(t,e){return t=n(t,e),o.b++,t},clearTimeout(r),t(l.grecaptcha)):(clearTimeout(r),e(new w("internal-error"))),delete l[o.a]},be(Os(_t(ol,{onload:o.a,hl:i||""}))).o(function(){clearTimeout(r),e(new w("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(r),t(l.grecaptcha))})},il.prototype.c=function(){this.b--};var al=null;function ul(t,e,n,r,i,o,s){if(Ur(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.u=e,this.g=null,s=s?rl=rl||new nl:al=al||new il,this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[ll])throw new w("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[fl],!l.document)throw new w("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ee(e)||!this.i&&ee(e).hasChildNodes())throw new w("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Fs(t,o||null,i||null),this.w=r||function(){return null};var a=this;this.l=[];var u=this.a[cl];this.a[cl]=function(t){var e;pl(a,t),"function"==typeof u?u(t):"string"!=typeof u||"function"==typeof(e=mr(u,l))&&e(t)};var c=this.a[hl];this.a[hl]=function(){var t;pl(a,null),"function"==typeof c?c():"string"!=typeof c||"function"==typeof(t=mr(c,l))&&t()}}var cl="callback",hl="expired-callback",ll="sitekey",fl="size";function pl(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function dl(t,e){return t.h.push(e),e.ma(function(){W(t.h,e)}),e}function vl(t){if(t.D)throw new w("internal-error","RecaptchaVerifier instance has been destroyed.")}function yl(t,e,n){var r=!1;try{this.b=n||Ll.app()}catch(t){throw new w("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new w("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ea()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Ll.SDK_VERSION?yr(Ll.SDK_VERSION,o):null,ul.call(this,n,t,e,function(){try{var e=i.b.auth().ja()}catch(t){e=null}return e},o,N(I),r)}function gl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new w("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].K(n[i])&&!o){if(e=e[i],i<0||i>=ml.length)throw new w("internal-error","Argument validator received an unsupported number of arguments.");n=ml[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.J+".";break t}r=null}}if(r)throw new w("argument-error",t+" failed: "+r)}(t=ul.prototype).Ga=function(){var e=this;return this.f?this.f:this.f=dl(this,be().then(function(){if(wr()&&!cr())return sr();throw new w("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return e.m.g(e.w())}).then(function(t){return e.g=t,qa(e.s,Ta,{})}).then(function(t){e.a[ll]=t.recaptchaSiteKey}).o(function(t){throw e.f=null,t}))},t.render=function(){vl(this);var n=this;return dl(this,this.Ga().then(function(){var t,e;return null===n.c&&(e=n.u,n.i||(t=ee(e),e=function(t,e,n){var r,i=arguments,o=document,s=String(i[0]),a=i[1];return!te&&a&&(a.name||a.type)&&(s=["<",s],a.name&&s.push(' name="',Ft(a.name),'"'),a.type&&(s.push(' type="',Ft(a.type),'"'),lt(r={},a),delete r.type,a=r),s.push(">"),s=s.join("")),s=se(o,s),a&&("string"==typeof a?s.className=a:Array.isArray(a)?s.className=a.join(" "):ne(s,a)),2<i.length&&function(e,n,t){function r(t){t&&n.appendChild("string"==typeof t?e.createTextNode(t):t)}for(var i=2;i<t.length;i++){var o=t[i];!d(o)||y(o)&&0<o.nodeType?r(o):U(function(t){if(t&&"number"==typeof t.length){if(y(t))return"function"==typeof t.item||"string"==typeof t.item;if(v(t))return"function"==typeof t.item}}(o)?K(o):o,r)}}(o,s,i),s}("DIV"),t.appendChild(e)),n.c=n.g.render(e,n.a)),n.c}))},t.verify=function(){vl(this);var i=this;return dl(this,this.render().then(function(e){return new fe(function(n){var r,t=i.g.getResponse(e);t?n(t):(r=function(t){var e;t&&(e=r,H(i.l,function(t){return t==e}),n(t))},i.l.push(r),i.i&&i.g.execute(i.c))})}))},t.reset=function(){vl(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){vl(this),this.D=!0,this.m.c();for(var t,e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i)for(e=ee(this.u);t=e.firstChild;)e.removeChild(t)},e(yl,ul);var ml="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function bl(t,e){return{name:t||"",J:"a valid string",optional:!!e,K:function(t){return"string"==typeof t}}}function _l(t,e){return{name:t||"",J:"a boolean",optional:!!e,K:function(t){return"boolean"==typeof t}}}function wl(t,e){return{name:t||"",J:"a valid object",optional:!!e,K:y}}function El(t,e){return{name:t||"",J:"a function",optional:!!e,K:function(t){return"function"==typeof t}}}function Il(t,e){return{name:t||"",J:"null",optional:!!e,K:function(t){return null===t}}}function Tl(n){return{name:n?n+"Credential":"credential",J:n?"a valid "+n+" credential":"a valid credential",optional:!1,K:function(t){if(!t)return!1;var e=!n||t.providerId===n;return!(!t.ia||!e)}}}function Sl(){return{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.ob}}}function Cl(){return{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}}function Nl(t,e){return y(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Fa}function Al(t){return y(t)&&"string"==typeof t.uid}function kl(){return{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}}function Ol(e,n,t,r){return{name:t||"",J:e.J+" or "+n.J,optional:!!r,K:function(t){return e.K(t)||n.K(t)}}}function Rl(t,e){for(var n in e){var r=e[n].name;t[r]=xl(r,t[n],e[n].j)}}function Pl(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:b(function(t){return this[t]},n),set:b(function(t,e,n,r){gl(t,[n],[r],!0),this[e]=r},r,n,e[n].gb),enumerable:!0})}}function Dl(t,e,n,r){t[e]=xl(e,n,r)}function xl(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return gl(s,n,t),e.apply(this,t)}if(!n)return e;var i,o,s=(o=(o=t).split("."))[o.length-1];for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Rl(Fh.prototype,{fb:{name:"applyActionCode",j:[bl("code")]},Pa:{name:"checkActionCode",j:[bl("code")]},jb:{name:"confirmPasswordReset",j:[bl("code"),bl("newPassword")]},cc:{name:"createUserWithEmailAndPassword",j:[bl("email"),bl("password")]},fc:{name:"fetchSignInMethodsForEmail",j:[bl("email")]},pa:{name:"getRedirectResult",j:[]},zc:{name:"isSignInWithEmailLink",j:[bl("emailLink")]},Fc:{name:"onAuthStateChanged",j:[Ol(wl(),El(),"nextOrObserver"),El("opt_error",!0),El("opt_completed",!0)]},Gc:{name:"onIdTokenChanged",j:[Ol(wl(),El(),"nextOrObserver"),El("opt_error",!0),El("opt_completed",!0)]},rb:{name:"sendPasswordResetEmail",j:[bl("email"),Ol(wl("opt_actionCodeSettings",!0),Il(null,!0),"opt_actionCodeSettings",!0)]},sb:{name:"sendSignInLinkToEmail",j:[bl("email"),wl("actionCodeSettings")]},tb:{name:"setPersistence",j:[bl("persistence")]},Qc:{name:"signInAndRetrieveDataWithCredential",j:[Tl()]},vb:{name:"signInAnonymously",j:[]},Ya:{name:"signInWithCredential",j:[Tl()]},Rc:{name:"signInWithCustomToken",j:[bl("token")]},Sc:{name:"signInWithEmailAndPassword",j:[bl("email"),bl("password")]},Tc:{name:"signInWithEmailLink",j:[bl("email"),bl("emailLink",!0)]},Uc:{name:"signInWithPhoneNumber",j:[bl("phoneNumber"),kl()]},Vc:{name:"signInWithPopup",j:[Cl()]},Wc:{name:"signInWithRedirect",j:[Cl()]},bd:{name:"updateCurrentUser",j:[Ol({name:"user",J:"an instance of Firebase User",optional:!1,K:function(t){return!!(t&&t instanceof $c)}},Il(),"user")]},wb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[bl(null,!0)]},dd:{name:"useDeviceLanguage",j:[]},fd:{name:"verifyPasswordResetCode",j:[bl("code")]}}),Pl(Fh.prototype,{lc:{name:"languageCode",gb:Ol(bl(),Il(),"languageCode")},ti:{name:"tenantId",gb:Ol(bl(),Il(),"tenantId")}}),(Fh.Persistence=Lu).LOCAL="local",Fh.Persistence.SESSION="session",Fh.Persistence.NONE="none",Rl($c.prototype,{delete:{name:"delete",j:[]},mc:{name:"getIdTokenResult",j:[_l("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[_l("opt_forceRefresh",!0)]},Ac:{name:"linkAndRetrieveDataWithCredential",j:[Tl()]},mb:{name:"linkWithCredential",j:[Tl()]},Bc:{name:"linkWithPhoneNumber",j:[bl("phoneNumber"),kl()]},Cc:{name:"linkWithPopup",j:[Cl()]},Dc:{name:"linkWithRedirect",j:[Cl()]},Jc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Tl()]},pb:{name:"reauthenticateWithCredential",j:[Tl()]},Kc:{name:"reauthenticateWithPhoneNumber",j:[bl("phoneNumber"),kl()]},Lc:{name:"reauthenticateWithPopup",j:[Cl()]},Mc:{name:"reauthenticateWithRedirect",j:[Cl()]},reload:{name:"reload",j:[]},qb:{name:"sendEmailVerification",j:[Ol(wl("opt_actionCodeSettings",!0),Il(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[bl(null,!0)]},ad:{name:"unlink",j:[bl("provider")]},xb:{name:"updateEmail",j:[bl("email")]},yb:{name:"updatePassword",j:[bl("password")]},cd:{name:"updatePhoneNumber",j:[Tl("phone")]},zb:{name:"updateProfile",j:[wl("profile")]},Ab:{name:"verifyBeforeUpdateEmail",j:[bl("email"),Ol(wl("opt_actionCodeSettings",!0),Il(null,!0),"opt_actionCodeSettings",!0)]}}),Rl(Xh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Rl(Qh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Rl(fe.prototype,{ma:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Pl(Rc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",gb:_l("appVerificationDisabledForTesting")}}),Rl(Pc.prototype,{confirm:{name:"confirm",j:[bl("verificationCode")]}}),Dl(Yi,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[ro,go,Eo,to],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[Ol(bl(),wl(),"json")]),Dl(mo,"credential",function(t,e){return new yo(t,e)},[bl("email"),bl("password")]),Rl(yo.prototype,{v:{name:"toJSON",j:[bl(null,!0)]}}),Rl(ao.prototype,{Aa:{name:"addScope",j:[bl("scope")]},Ia:{name:"setCustomParameters",j:[wl("customOAuthParameters")]}}),Dl(ao,"credential",uo,[Ol(bl(),wl(),"token")]),Dl(mo,"credentialWithLink",bo,[bl("email"),bl("emailLink")]),Rl(co.prototype,{Aa:{name:"addScope",j:[bl("scope")]},Ia:{name:"setCustomParameters",j:[wl("customOAuthParameters")]}}),Dl(co,"credential",ho,[Ol(bl(),wl(),"token")]),Rl(lo.prototype,{Aa:{name:"addScope",j:[bl("scope")]},Ia:{name:"setCustomParameters",j:[wl("customOAuthParameters")]}}),Dl(lo,"credential",fo,[Ol(bl(),Ol(wl(),Il()),"idToken"),Ol(bl(),Il(),"accessToken",!0)]),Rl(po.prototype,{Ia:{name:"setCustomParameters",j:[wl("customOAuthParameters")]}}),Dl(po,"credential",vo,[Ol(bl(),wl(),"token"),bl("secret",!0)]),Rl(so.prototype,{Aa:{name:"addScope",j:[bl("scope")]},credential:{name:"credential",j:[Ol(bl(),Ol(wl(),Il()),"optionsOrIdToken"),Ol(bl(),Il(),"accessToken",!0)]},Ia:{name:"setCustomParameters",j:[wl("customOAuthParameters")]}}),Rl(eo.prototype,{v:{name:"toJSON",j:[bl(null,!0)]}}),Rl($i.prototype,{v:{name:"toJSON",j:[bl(null,!0)]}}),Dl(To,"credential",So,[bl("verificationId"),bl("verificationCode")]),Rl(To.prototype,{cb:{name:"verifyPhoneNumber",j:[Ol(bl(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?Nl(t.session,Qi)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Nl(t.session,Xi)&&Al(t.multiFactorHint):t.session&&t.multiFactorUid?Nl(t.session,Xi)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),kl()]}}),Rl(wo.prototype,{v:{name:"toJSON",j:[bl(null,!0)]}}),Rl(w.prototype,{toJSON:{name:"toJSON",j:[bl(null,!0)]}}),Rl(xo.prototype,{toJSON:{name:"toJSON",j:[bl(null,!0)]}}),Rl(Do.prototype,{toJSON:{name:"toJSON",j:[bl(null,!0)]}}),Rl(Uc.prototype,{toJSON:{name:"toJSON",j:[bl(null,!0)]}}),Rl(Lc.prototype,{Pc:{name:"resolveSignIn",j:[Sl()]}}),Rl(Hc.prototype,{Ob:{name:"getSession",j:[]},dc:{name:"enroll",j:[Sl(),bl("displayName",!0)]},$c:{name:"unenroll",j:[Ol({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:Al},bl(),"multiFactorInfoIdentifier")]}}),Rl(yl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Dl(ci,"parseLink",gi,[bl("link")]),Dl(el,"assertion",function(t){return new Bc(t)},[Tl("phone")]),function(){if(void 0===Ll||!Ll.INTERNAL||!Ll.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Jr,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Yr,VERIFY_AND_CHANGE_EMAIL:$r,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Fh,AuthCredential:Yi,Error:w};Dl(t,"EmailAuthProvider",mo,[]),Dl(t,"FacebookAuthProvider",ao,[]),Dl(t,"GithubAuthProvider",co,[]),Dl(t,"GoogleAuthProvider",lo,[]),Dl(t,"TwitterAuthProvider",po,[]),Dl(t,"OAuthProvider",so,[bl("providerId")]),Dl(t,"SAMLAuthProvider",oo,[bl("providerId")]),Dl(t,"PhoneAuthProvider",To,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(t){return!!(t&&t instanceof Fh)}}]),Dl(t,"RecaptchaVerifier",yl,[Ol(bl(),{name:"",J:"an HTML element",optional:!1,K:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),wl("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(t){return!!(t&&t instanceof Ll.app.App)}}]),Dl(t,"ActionCodeURL",ci,[]),Dl(t,"PhoneMultiFactorGenerator",el,[]),Ll.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new Fh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),Ll.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:m((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:m(t.kc,t),addAuthTokenListener:m(t.bc,t),removeAuthTokenListener:m(t.Nc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Ll.registerVersion("@firebase/auth","0.14.9"),Ll.INTERNAL.extendNamespace({User:$c})}()}.apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var fu=(pu.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),da(e))},pu.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:pa(e)},pu.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},pu.prototype.prefixedName_=function(t){return this.prefix_+t},pu.prototype.toString=function(){return this.domStorage_.toString()},pu);function pu(t){this.domStorage_=t,this.prefix_="firebase:"}var du=(vu.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},vu.prototype.get=function(t){return ya(this.cache_,t)?this.cache_[t]:null},vu.prototype.remove=function(t){delete this.cache_[t]},vu);function vu(){this.cache_={},this.isInMemoryStorage=!0}function yu(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new fu(e)}}catch(t){}return new du}function gu(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i,o=t.charCodeAt(r);55296<=o&&o<=56319&&(i=o-55296,Gs(++r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(i<<10)+(t.charCodeAt(r)-56320)),o<128?e[n++]=o:(o<2048?e[n++]=o>>6|192:(o<65536?e[n++]=o>>12|224:(e[n++]=o>>18|240,e[n++]=o>>12&63|128),e[n++]=o>>6&63|128),e[n++]=63&o|128)}return e}(t),n=new _a;n.update(e);var r=n.digest();return zs.encodeByteArray(r)}function mu(t,e){Gs(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(ku.logLevel=Va.VERBOSE,Pu=ku.log.bind(ku),e&&Au.set("logging_enabled",!0)):"function"==typeof t?Pu=t:(Pu=null,Au.remove("logging_enabled"))}function bu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+Ru.apply(void 0,Vs(t));ku.error(n)}function _u(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+Ru.apply(void 0,Vs(t));throw ku.error(n),new Error(n)}function wu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+Ru.apply(void 0,Vs(t));ku.warn(n)}function Eu(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)}function Iu(t,e){return t===e?0:t<e?-1:1}function Tu(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+da(e))}function Su(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)n<i+e?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r}var Cu,Nu=yu("localStorage"),Au=yu("sessionStorage"),ku=new Qa("@firebase/database"),Ou=(Cu=1,function(){return Cu++}),Ru=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=Ru.apply(null,i):n+="object"==typeof i?da(i):i,n+=" "}return n},Pu=null,Du=!0,xu=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];!0===Du&&(Du=!1,null===Pu&&!0===Au.get("logging_enabled")&&mu(!0)),Pu&&(t=Ru.apply(null,e),Pu(t))},Lu=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];xu.apply(void 0,Vs([n],t))}},Mu="[MIN_NAME]",Fu="[MAX_NAME]",Uu=function(t,e){if(t===e)return 0;if(t===Mu||e===Fu)return-1;if(e===Mu||t===Fu)return 1;var n=Gu(t),r=Gu(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null===r&&t<e?-1:1},ju=function(t){if("object"!=typeof t||null===t)return da(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=da(e[i]),r+=":",r+=ju(t[e[i]]);return r+"}"};function Vu(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}function qu(t){var e,n,r,i;Gs(!Eu(t),"Invalid JSON number"),0===t?e=1/t==-1/(r=n=0)?1:0:(e=t<0,r=(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(t/Math.pow(2,-1074))));for(var o=[],s=52;s;--s)o.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;--s)o.push(n%2?1:0),n=Math.floor(n/2);o.push(e?1:0),o.reverse();for(var a=o.join(""),u="",s=0;s<64;s+=8){var c=parseInt(a.substr(s,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()}function Bu(t){try{t()}catch(t){setTimeout(function(){throw wu("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}}function Wu(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n}var Hu=new RegExp("^-?(0*)\\d{1,10}$"),Gu=function(t){if(Hu.test(t)){var e=Number(t);if(-2147483648<=e&&e<=2147483647)return e}return null},Ku=(Object.defineProperty(zu,"Empty",{get:function(){return new zu("")},enumerable:!1,configurable:!0}),zu.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},zu.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},zu.prototype.popFront=function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new zu(this.pieces_,t)},zu.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},zu.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},zu.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},zu.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},zu.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],e=this.pieceNum_;e<this.pieces_.length-1;e++)t.push(this.pieces_[e]);return new zu(t,0)},zu.prototype.child=function(t){for(var e=[],n=this.pieceNum_;n<this.pieces_.length;n++)e.push(this.pieces_[n]);if(t instanceof zu)for(n=t.pieceNum_;n<t.pieces_.length;n++)e.push(t.pieces_[n]);else for(var r=t.split("/"),n=0;n<r.length;n++)0<r[n].length&&e.push(r[n]);return new zu(e,0)},zu.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},zu.relativePath=function(t,e){var n=t.getFront(),r=e.getFront();if(null===n)return e;if(n===r)return zu.relativePath(t.popFront(),e.popFront());throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")},zu.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=Uu(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},zu.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},zu.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},zu);function zu(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}var Qu=(Object.defineProperty(Xu,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(Xu,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),Xu.prototype.push=function(t){0<this.parts_.length&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=Oa(t),this.checkValid_()},Xu.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=Oa(t),0<this.parts_.length&&--this.byteLength_},Xu.prototype.checkValid_=function(){if(this.byteLength_>Xu.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+Xu.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>Xu.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Xu.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},Xu.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},Xu);function Xu(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Oa(this.parts_[n]);this.checkValid_()}var Yu="firebaseio.com",Ju="websocket",$u="long_polling",Zu=(tc.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},tc.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},tc.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},tc.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},tc.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Nu.set("host:"+this.host,this.internalHost))},tc.prototype.connectionURL=function(t,e){var n;if(Gs("string"==typeof t,"typeof type must == string"),Gs("object"==typeof e,"typeof params must == object"),t===Ju)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==$u)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return Vu(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},tc.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},tc.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},tc);function tc(t,e,n,r,i,o){void 0===i&&(i=""),void 0===o&&(o=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.includeNamespaceInQueryParams=o,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=Nu.get("host:"+t)||this.host}function ec(t){var e,n,r,i,o,s,a,u,c,h,l,f,p,d,v,y=(p=!(f=l=h=c=u=""),d="https",v=443,"string"==typeof(e=t)&&(0<=(o=e.indexOf("//"))&&(d=e.substring(0,o-1),e=e.substring(o+2)),-1===(n=e.indexOf("/"))&&(n=e.length),-1===(r=e.indexOf("?"))&&(r=e.length),u=e.substring(0,Math.min(n,r)),n<r&&(l=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(0<n[r].length){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(e.substring(n,r))),i=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Us(t.split("&")),o=i.next();!o.done;o=i.next()){var s,a=o.value;0!==a.length&&(2===(s=a.split("=")).length?r[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):wu("Invalid query segment '"+a+"' in query '"+t+"'"))}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(e.substring(Math.min(e.length,r))),0<=(o=u.indexOf(":"))?(p="https"===d||"wss"===d,v=parseInt(u.substring(o+1),10)):o=u.length,"localhost"===(s=u.slice(0,o)).toLowerCase()?c="localhost":s.split(".").length<=2?c=s:(a=u.indexOf("."),h=u.substring(0,a).toLowerCase(),c=u.substring(a+1),f=h),"ns"in i&&(f=i.ns)),{host:u,port:v,domain:c,subdomain:h,secure:p,scheme:d,pathString:l,namespace:f}),g=y.namespace;return"firebase.com"===y.domain&&_u(y.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),g&&"undefined"!==g||"localhost"===y.domain||_u("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),y.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&wu("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Zu(y.host,y.secure,g,"ws"===y.scheme||"wss"===y.scheme,"",g!==y.subdomain),path:new Ku(y.pathString)}}function nc(t){return"string"==typeof t&&0!==t.length&&!pc.test(t)}function rc(t){return"string"==typeof t&&0!==t.length&&!dc.test(t)}function ic(t){return null===t||"string"==typeof t||"number"==typeof t&&!Eu(t)||t&&"object"==typeof t&&ya(t,".sv")}function oc(t,e,n,r,i){i&&void 0===n||yc(Na(t,e,i),n,r)}function sc(t,e,n,r,i){if(!i||void 0!==n){var o=Na(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];Vu(n,function(t,e){var n=new Ku(t);if(yc(o,e,r.child(n)),".priority"===n.getBack()&&!ic(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)}),function(t,e){for(var n,r=0;r<e.length;r++)for(var i=(n=e[r]).slice(),o=0;o<i.length;o++)if((".priority"!==i[o]||o!==i.length-1)&&!nc(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+n.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Ku.comparePaths);for(var s=null,r=0;r<e.length;r++){if(n=e[r],null!==s&&s.contains(n))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+n.toString());s=n}}(o,s)}}function ac(t,e,n,r){if(!r||void 0!==n){if(Eu(n))throw new Error(Na(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ic(n))throw new Error(Na(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}function uc(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Na(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function cc(t,e,n,r){if(!(r&&void 0===n||nc(n)))throw new Error(Na(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function hc(t,e,n,r){if(!(r&&void 0===n||rc(n)))throw new Error(Na(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function lc(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")}function fc(t,e,n){var r,i=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!nc(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==i.length&&!rc(r=(r=i)&&r.replace(/^\/*\.info(\/|$)/,"/")))throw new Error(Na(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')}var pc=/[\[\].#$\/\u0000-\u001F\u007F]/,dc=/[\[\].#$\u0000-\u001F\u007F]/,vc=10485760,yc=function(n,t,e){var r=e instanceof Ku?new Qu(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+r.toErrorString());if("function"==typeof t)throw new Error(n+"contains a function "+r.toErrorString()+" with contents = "+t.toString());if(Eu(t))throw new Error(n+"contains "+t.toString()+" "+r.toErrorString());if("string"==typeof t&&t.length>vc/3&&Oa(t)>vc)throw new Error(n+"contains a string greater than "+vc+" utf8 bytes "+r.toErrorString()+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var i=!1,o=!1;if(Vu(t,function(t,e){if(".value"===t)i=!0;else if(".priority"!==t&&".sv"!==t&&(o=!0,!nc(t)))throw new Error(n+" contains an invalid key ("+t+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(t),yc(n,e,r),r.pop()}),i&&o)throw new Error(n+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},gc=(mc.prototype.cancel=function(t){Ca("OnDisconnect.cancel",0,1,arguments.length),Aa("OnDisconnect.cancel",1,t,!0);var e=new Ys;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},mc.prototype.remove=function(t){Ca("OnDisconnect.remove",0,1,arguments.length),lc("OnDisconnect.remove",this.path_),Aa("OnDisconnect.remove",1,t,!0);var e=new Ys;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},mc.prototype.set=function(t,e){Ca("OnDisconnect.set",1,2,arguments.length),lc("OnDisconnect.set",this.path_),oc("OnDisconnect.set",1,t,this.path_,!1),Aa("OnDisconnect.set",2,e,!0);var n=new Ys;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},mc.prototype.setWithPriority=function(t,e,n){Ca("OnDisconnect.setWithPriority",2,3,arguments.length),lc("OnDisconnect.setWithPriority",this.path_),oc("OnDisconnect.setWithPriority",1,t,this.path_,!1),ac("OnDisconnect.setWithPriority",2,e,!1),Aa("OnDisconnect.setWithPriority",3,n,!0);var r=new Ys;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},mc.prototype.update=function(t,e){if(Ca("OnDisconnect.update",1,2,arguments.length),lc("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,wu("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}sc("OnDisconnect.update",1,t,this.path_,!1),Aa("OnDisconnect.update",2,e,!0);var i=new Ys;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},mc);function mc(t,e){this.repo_=t,this.path_=e}var bc=(_c.prototype.toJSON=function(){return Ca("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},_c);function _c(t,e){this.committed=t,this.snapshot=e}var wc,Ec,Ic,Tc=(wc="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Ec=0,Ic=[],function(t){var e=t===Ec;Ec=t;for(var n=new Array(8),r=7;0<=r;r--)n[r]=wc.charAt(t%64),t=Math.floor(t/64);Gs(0===t,"Cannot push at time == 0");var i=n.join("");if(e){for(r=11;0<=r&&63===Ic[r];r--)Ic[r]=0;Ic[r]++}else for(r=0;r<12;r++)Ic[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)i+=wc.charAt(Ic[r]);return Gs(20===i.length,"nextPushId: Length should be 20."),i}),Sc=(Cc.Wrap=function(t,e){return new Cc(t,e)},Cc);function Cc(t,e){this.name=t,this.node=e}var Nc,Ac=(kc.prototype.getCompare=function(){return this.compare.bind(this)},kc.prototype.indexedValueChanged=function(t,e){var n=new Sc(Mu,t),r=new Sc(Mu,e);return 0!==this.compare(n,r)},kc.prototype.minPost=function(){return Sc.MIN},kc);function kc(){}var Oc,Rc=(xs(Pc,Oc=Ac),Object.defineProperty(Pc,"__EMPTY_NODE",{get:function(){return Nc},set:function(t){Nc=t},enumerable:!1,configurable:!0}),Pc.prototype.compare=function(t,e){return Uu(t.name,e.name)},Pc.prototype.isDefinedOn=function(t){throw Ks("KeyIndex.isDefinedOn not expected to be called.")},Pc.prototype.indexedValueChanged=function(t,e){return!1},Pc.prototype.minPost=function(){return Sc.MIN},Pc.prototype.maxPost=function(){return new Sc(Fu,Nc)},Pc.prototype.makePost=function(t,e){return Gs("string"==typeof t,"KeyIndex indexValue must always be a string."),new Sc(t,Nc)},Pc.prototype.toString=function(){return".key"},Pc);function Pc(){return null!==Oc&&Oc.apply(this,arguments)||this}var Dc,xc=new Rc;function Lc(t){return"number"==typeof t?"number:"+qu(t):"string:"+t}var Mc,Fc,Uc,jc,Vc=function(t){var e;t.isLeafNode()?(e=t.val(),Gs("string"==typeof e||"number"==typeof e||"object"==typeof e&&ya(e,".sv"),"Priority must be a string or number.")):Gs(t===Dc||t.isEmpty(),"priority of unexpected type."),Gs(t===Dc||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},qc=(Object.defineProperty(Bc,"__childrenNodeConstructor",{get:function(){return Mc},set:function(t){Mc=t},enumerable:!1,configurable:!0}),Bc.prototype.isLeafNode=function(){return!0},Bc.prototype.getPriority=function(){return this.priorityNode_},Bc.prototype.updatePriority=function(t){return new Bc(this.value_,t)},Bc.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:Bc.__childrenNodeConstructor.EMPTY_NODE},Bc.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:Bc.__childrenNodeConstructor.EMPTY_NODE},Bc.prototype.hasChild=function(){return!1},Bc.prototype.getPredecessorChildName=function(t,e){return null},Bc.prototype.updateImmediateChild=function(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:Bc.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)},Bc.prototype.updateChild=function(t,e){var n=t.getFront();return null===n?e:e.isEmpty()&&".priority"!==n?this:(Gs(".priority"!==n||1===t.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(n,Bc.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),e)))},Bc.prototype.isEmpty=function(){return!1},Bc.prototype.numChildren=function(){return 0},Bc.prototype.forEachChild=function(t,e){return!1},Bc.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},Bc.prototype.hash=function(){var t,e;return null===this.lazyHash_&&(t="",this.priorityNode_.isEmpty()||(t+="priority:"+Lc(this.priorityNode_.val())+":"),t+=(e=typeof this.value_)+":",t+="number"==e?qu(this.value_):this.value_,this.lazyHash_=gu(t)),this.lazyHash_},Bc.prototype.getValue=function(){return this.value_},Bc.prototype.compareTo=function(t){return t===Bc.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Bc.__childrenNodeConstructor?-1:(Gs(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},Bc.prototype.compareToLeafNode_=function(t){var e=typeof t.value_,n=typeof this.value_,r=Bc.VALUE_TYPE_ORDER.indexOf(e),i=Bc.VALUE_TYPE_ORDER.indexOf(n);return Gs(0<=r,"Unknown leaf type: "+e),Gs(0<=i,"Unknown leaf type: "+n),r===i?"object"==n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-r},Bc.prototype.withIndex=function(){return this},Bc.prototype.isIndexed=function(){return!0},Bc.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},Bc.VALUE_TYPE_ORDER=["object","boolean","number","string"],Bc);function Bc(t,e){void 0===e&&(e=Bc.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=e,this.lazyHash_=null,Gs(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Vc(this.priorityNode_)}function Wc(){return null!==jc&&jc.apply(this,arguments)||this}var Hc=(xs(Wc,jc=Ac),Wc.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?Uu(t.name,e.name):i},Wc.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},Wc.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},Wc.prototype.minPost=function(){return Sc.MIN},Wc.prototype.maxPost=function(){return new Sc(Fu,new qc("[PRIORITY-POST]",Uc))},Wc.prototype.makePost=function(t,e){var n=Fc(t);return new Sc(e,new qc("[PRIORITY-POST]",n))},Wc.prototype.toString=function(){return".priority"},new Wc),Gc=(Kc.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_.pop(),e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value};if(this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},Kc.prototype.hasNext=function(){return 0<this.nodeStack_.length},Kc.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},Kc);function Kc(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}var zc=(Qc.prototype.copy=function(t,e,n,r,i){return new Qc(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Qc.prototype.count=function(){return this.left.count()+1+this.right.count()},Qc.prototype.isEmpty=function(){return!1},Qc.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},Qc.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},Qc.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},Qc.prototype.minKey=function(){return this.min_().key},Qc.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},Qc.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},Qc.prototype.removeMin_=function(){if(this.left.isEmpty())return Jc.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},Qc.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed_()||r.left.left.isRed_()||(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),r.right.isEmpty()||r.right.isRed_()||r.right.left.isRed_()||(r=r.moveRedRight_()),0===e(t,r.key)){if(r.right.isEmpty())return Jc.EMPTY_NODE;n=r.right.min_(),r=r.copy(n.key,n.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp_()},Qc.prototype.isRed_=function(){return this.color},Qc.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},Qc.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},Qc.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},Qc.prototype.rotateLeft_=function(){var t=this.copy(null,null,Qc.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},Qc.prototype.rotateRight_=function(){var t=this.copy(null,null,Qc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},Qc.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},Qc.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},Qc.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},Qc.RED=!0,Qc.BLACK=!1,Qc);function Qc(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Qc.RED,this.left=null!=r?r:Jc.EMPTY_NODE,this.right=null!=i?i:Jc.EMPTY_NODE}var Xc=(Yc.prototype.copy=function(t,e,n,r,i){return this},Yc.prototype.insert=function(t,e,n){return new zc(t,e,null)},Yc.prototype.remove=function(t,e){return this},Yc.prototype.count=function(){return 0},Yc.prototype.isEmpty=function(){return!0},Yc.prototype.inorderTraversal=function(t){return!1},Yc.prototype.reverseTraversal=function(t){return!1},Yc.prototype.minKey=function(){return null},Yc.prototype.maxKey=function(){return null},Yc.prototype.check_=function(){return 0},Yc.prototype.isRed_=function(){return!1},Yc);function Yc(){}var Jc=($c.prototype.insert=function(t,e){return new $c(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,zc.BLACK,null,null))},$c.prototype.remove=function(t){return new $c(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,zc.BLACK,null,null))},$c.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:0<e&&(n=n.right)}return null},$c.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:0<e&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},$c.prototype.isEmpty=function(){return this.root_.isEmpty()},$c.prototype.count=function(){return this.root_.count()},$c.prototype.minKey=function(){return this.root_.minKey()},$c.prototype.maxKey=function(){return this.root_.maxKey()},$c.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},$c.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},$c.prototype.getIterator=function(t){return new Gc(this.root_,null,this.comparator_,!1,t)},$c.prototype.getIteratorFrom=function(t,e){return new Gc(this.root_,t,this.comparator_,!1,e)},$c.prototype.getReverseIteratorFrom=function(t,e){return new Gc(this.root_,t,this.comparator_,!0,e)},$c.prototype.getReverseIterator=function(t){return new Gc(this.root_,null,this.comparator_,!0,t)},$c.EMPTY_NODE=new Xc,$c);function $c(t,e){void 0===e&&(e=$c.EMPTY_NODE),this.comparator_=t,this.root_=e}var Zc=Math.log(2),th=(eh.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},eh);function eh(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/Zc,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}var nh,rh,ih=function(c,t,h,e){c.sort(t);var l=function(t,e){var n=e-t;if(0==n)return null;if(1==n)return s=c[t],a=h?h(s):s,new zc(a,s.node,zc.BLACK,null,null);var r=parseInt(n/2,10)+t,i=l(t,r),o=l(r+1,e),s=c[r],a=h?h(s):s;return new zc(a,s.node,zc.BLACK,i,o)},n=function(t){for(var e=null,n=null,a=c.length,r=function(t,e){var n=a-t,r=a;a-=t;var i=l(1+n,r),o=c[n],s=h?h(o):o;u(new zc(s,o.node,e,null,i))},u=function(t){e=e?e.left=t:n=t},i=0;i<t.count;++i){var o=t.nextBitIsOne(),s=Math.pow(2,t.count-(i+1));o?r(s,zc.BLACK):(r(s,zc.BLACK),r(s,zc.RED))}return n}(new th(c.length));return new Jc(e||t,n)},oh={},sh=(Object.defineProperty(ah,"Default",{get:function(){return Gs(Hc,"ChildrenNode.ts has not been loaded"),nh=nh||new ah({".priority":oh},{".priority":Hc})},enumerable:!1,configurable:!0}),ah.prototype.get=function(t){var e=ga(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Jc?e:null},ah.prototype.hasIndex=function(t){return ya(this.indexSet_,t.toString())},ah.prototype.addIndex=function(t,e){Gs(t!==xc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n,r=[],i=!1,o=e.getIterator(Sc.Wrap),s=o.getNext();s;)i=i||t.isDefinedOn(s.node),r.push(s),s=o.getNext();n=i?ih(r,t.getCompare()):oh;var a=t.toString(),u=Ls({},this.indexSet_);u[a]=t;var c=Ls({},this.indexes_);return c[a]=n,new ah(c,u)},ah.prototype.addToIndexes=function(u,c){var h=this;return new ah(ba(this.indexes_,function(t,e){var n=ga(h.indexSet_,e);if(Gs(n,"Missing index implementation for "+e),t===oh){if(n.isDefinedOn(u.node)){for(var r=[],i=c.getIterator(Sc.Wrap),o=i.getNext();o;)o.name!==u.name&&r.push(o),o=i.getNext();return r.push(u),ih(r,n.getCompare())}return oh}var s=c.get(u.name),a=t;return s&&(a=a.remove(new Sc(u.name,s))),a.insert(u,u.node)}),this.indexSet_)},ah.prototype.removeFromIndexes=function(n,r){return new ah(ba(this.indexes_,function(t){if(t===oh)return t;var e=r.get(n.name);return e?t.remove(new Sc(n.name,e)):t}),this.indexSet_)},ah);function ah(t,e){this.indexes_=t,this.indexSet_=e}function uh(t,e){return Uu(t.name,e.name)}function ch(t,e){return Uu(t,e)}var hh,lh=(Object.defineProperty(fh,"EMPTY_NODE",{get:function(){return rh=rh||new fh(new Jc(ch),null,sh.Default)},enumerable:!1,configurable:!0}),fh.prototype.isLeafNode=function(){return!1},fh.prototype.getPriority=function(){return this.priorityNode_||rh},fh.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new fh(this.children_,t,this.indexMap_)},fh.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?rh:e},fh.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},fh.prototype.hasChild=function(t){return null!==this.children_.get(t)},fh.prototype.updateImmediateChild=function(t,e){if(Gs(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);var n=new Sc(t,e),r=void 0,i=e.isEmpty()?(r=this.children_.remove(t),this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(t,e),this.indexMap_.addToIndexes(n,this.children_)),o=r.isEmpty()?rh:this.priorityNode_;return new fh(r,o,i)},fh.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;Gs(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},fh.prototype.isEmpty=function(){return this.children_.isEmpty()},fh.prototype.numChildren=function(){return this.children_.count()},fh.prototype.val=function(n){if(this.isEmpty())return null;var r={},i=0,o=0,s=!0;if(this.forEachChild(Hc,function(t,e){r[t]=e.val(n),i++,s&&fh.INTEGER_REGEXP_.test(t)?o=Math.max(o,Number(t)):s=!1}),!n&&s&&o<2*i){var t=[];for(var e in r)t[e]=r[e];return t}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r},fh.prototype.hash=function(){var r;return null===this.lazyHash_&&(r="",this.getPriority().isEmpty()||(r+="priority:"+Lc(this.getPriority().val())+":"),this.forEachChild(Hc,function(t,e){var n=e.hash();""!==n&&(r+=":"+t+":"+n)}),this.lazyHash_=""===r?"":gu(r)),this.lazyHash_},fh.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Sc(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},fh.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},fh.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Sc(e,this.children_.get(e)):null},fh.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},fh.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Sc(e,this.children_.get(e)):null},fh.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},fh.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},fh.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Sc.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},fh.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},fh.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Sc.Wrap),i=r.peek();null!=i&&0<e.compare(i,t);)r.getNext(),i=r.peek();return r},fh.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===dh?-1:0},fh.prototype.withIndex=function(t){if(t===xc||this.indexMap_.hasIndex(t))return this;var e=this.indexMap_.addIndex(t,this.children_);return new fh(this.children_,this.priorityNode_,e)},fh.prototype.isIndexed=function(t){return t===xc||this.indexMap_.hasIndex(t)},fh.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()!==e.children_.count())return!1;for(var n=this.getIterator(Hc),r=e.getIterator(Hc),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1},fh.prototype.resolveIndex_=function(t){return t===xc?null:this.indexMap_.get(t.toString())},fh.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,fh);function fh(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Vc(this.priorityNode_),this.children_.isEmpty()&&Gs(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}function ph(){return hh.call(this,new Jc(ch),lh.EMPTY_NODE,sh.Default)||this}var dh=(xs(ph,hh=lh),ph.prototype.compareTo=function(t){return t===this?0:1},ph.prototype.equals=function(t){return t===this},ph.prototype.getPriority=function(){return this},ph.prototype.getImmediateChild=function(t){return lh.EMPTY_NODE},ph.prototype.isEmpty=function(){return!1},new ph);Object.defineProperties(Sc,{MIN:{value:new Sc(Mu,lh.EMPTY_NODE)},MAX:{value:new Sc(Fu,dh)}}),Rc.__EMPTY_NODE=lh.EMPTY_NODE,qc.__childrenNodeConstructor=lh,Uc=Dc=dh;var vh,yh=!0;function gh(r,t){if(void 0===t&&(t=null),null===r)return lh.EMPTY_NODE;if("object"==typeof r&&".priority"in r&&(t=r[".priority"]),Gs(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof r&&".value"in r&&null!==r[".value"]&&(r=r[".value"]),"object"!=typeof r||".sv"in r)return new qc(r,gh(t));if(r instanceof Array||!yh){var i=lh.EMPTY_NODE;return Vu(r,function(t,e){var n;ya(r,t)&&"."!==t.substring(0,1)&&(!(n=gh(e)).isLeafNode()&&n.isEmpty()||(i=i.updateImmediateChild(t,n)))}),i.updatePriority(gh(t))}var o=[],s=!1;if(Vu(r,function(t,e){var n;"."!==t.substring(0,1)&&((n=gh(e)).isEmpty()||(s=s||!n.getPriority().isEmpty(),o.push(new Sc(t,n))))}),0===o.length)return lh.EMPTY_NODE;var e=ih(o,uh,function(t){return t.name},ch);if(s){var n=ih(o,Hc.getCompare());return new lh(e,gh(t),new sh({".priority":n},{".priority":Hc}))}return new lh(e,gh(t),sh.Default)}function mh(){return null!==vh&&vh.apply(this,arguments)||this}Fc=gh;var bh,_h=(xs(mh,vh=Ac),mh.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?Uu(t.name,e.name):n},mh.prototype.isDefinedOn=function(t){return!0},mh.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},mh.prototype.minPost=function(){return Sc.MIN},mh.prototype.maxPost=function(){return Sc.MAX},mh.prototype.makePost=function(t,e){var n=gh(t);return new Sc(e,n)},mh.prototype.toString=function(){return".value"},new mh),wh=(xs(Eh,bh=Ac),Eh.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},Eh.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},Eh.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?Uu(t.name,e.name):i},Eh.prototype.makePost=function(t,e){var n=gh(t),r=lh.EMPTY_NODE.updateChild(this.indexPath_,n);return new Sc(e,r)},Eh.prototype.maxPost=function(){var t=lh.EMPTY_NODE.updateChild(this.indexPath_,dh);return new Sc(Fu,t)},Eh.prototype.toString=function(){return this.indexPath_.slice().join("/")},Eh);function Eh(t){var e=bh.call(this)||this;return e.indexPath_=t,Gs(!t.isEmpty()&&".priority"!==t.getFront(),"Can't create PathIndex with empty path or .priority key"),e}var Ih=(Th.prototype.val=function(){return Ca("DataSnapshot.val",0,0,arguments.length),this.node_.val()},Th.prototype.exportVal=function(){return Ca("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},Th.prototype.toJSON=function(){return Ca("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},Th.prototype.exists=function(){return Ca("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},Th.prototype.child=function(t){Ca("DataSnapshot.child",0,1,arguments.length),hc("DataSnapshot.child",1,t=String(t),!1);var e=new Ku(t),n=this.ref_.child(e);return new Th(this.node_.getChild(e),n,Hc)},Th.prototype.hasChild=function(t){Ca("DataSnapshot.hasChild",1,1,arguments.length),hc("DataSnapshot.hasChild",1,t,!1);var e=new Ku(t);return!this.node_.getChild(e).isEmpty()},Th.prototype.getPriority=function(){return Ca("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},Th.prototype.forEach=function(n){var r=this;return Ca("DataSnapshot.forEach",1,1,arguments.length),Aa("DataSnapshot.forEach",1,n,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(t,e){return n(new Th(e,r.ref_.child(t),Hc))})},Th.prototype.hasChildren=function(){return Ca("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(Th.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),Th.prototype.numChildren=function(){return Ca("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},Th.prototype.getRef=function(){return Ca("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(Th.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),Th);function Th(t,e,n){this.node_=t,this.ref_=e,this.index_=n}var Sh=(Ch.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},Ch.prototype.getEventType=function(){return this.eventType},Ch.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},Ch.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+da(this.snapshot.exportVal())},Ch);function Ch(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}var Nh=(Ah.prototype.getPath=function(){return this.path},Ah.prototype.getEventType=function(){return"cancel"},Ah.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},Ah.prototype.toString=function(){return this.path.toString()+":cancel"},Ah);function Ah(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}var kh=(Oh.prototype.respondsTo=function(t){return"value"===t},Oh.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Sh("value",this,new Ih(t.snapshotNode,e.getRef(),n))},Oh.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Gs(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},Oh.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Nh(this,t,e):null},Oh.prototype.matches=function(t){return t instanceof Oh&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},Oh.prototype.hasAnyCallback=function(){return null!==this.callback_},Oh);function Oh(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}var Rh,Ph=(Dh.prototype.respondsTo=function(t){var e="children_removed"===(e="children_added"===t?"child_added":t)?"child_removed":e;return ya(this.callbacks_,e)},Dh.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Nh(this,t,e):null},Dh.prototype.createEvent=function(t,e){Gs(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Sh(t.type,this,new Ih(t.snapshotNode,n,r),t.prevName)},Dh.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Gs(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},Dh.prototype.matches=function(e){var n=this;if(e instanceof Dh){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var t=Object.keys(e.callbacks_),r=Object.keys(this.callbacks_),i=t.length;if(i===r.length){if(1!==i)return r.every(function(t){return e.callbacks_[t]===n.callbacks_[t]});var o=t[0],s=r[0];return!(s!==o||e.callbacks_[o]&&this.callbacks_[s]&&e.callbacks_[o]!==this.callbacks_[s])}}}return!1},Dh.prototype.hasAnyCallback=function(){return null!==this.callbacks_},Dh);function Dh(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}var xh=(Object.defineProperty(Lh,"__referenceConstructor",{get:function(){return Gs(Rh,"Reference.ts has not been loaded"),Rh},set:function(t){Rh=t},enumerable:!1,configurable:!0}),Lh.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===xc){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Mu)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==Fu)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Hc){if(null!=e&&!ic(e)||null!=n&&!ic(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Gs(t.getIndex()instanceof wh||t.getIndex()===_h,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},Lh.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},Lh.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},Lh.prototype.getQueryParams=function(){return this.queryParams_},Lh.prototype.getRef=function(){return Ca("Query.ref",0,0,arguments.length),new Lh.__referenceConstructor(this.repo,this.path)},Lh.prototype.on=function(t,e,n,r){Ca("Query.on",2,4,arguments.length),uc("Query.on",1,t,!1),Aa("Query.on",2,e,!1);var i,o=Lh.getCancelAndContextArgs_("Query.on",n,r);return"value"===t?this.onValueEvent(e,o.cancel,o.context):((i={})[t]=e,this.onChildEvent(i,o.cancel,o.context)),e},Lh.prototype.onValueEvent=function(t,e,n){var r=new kh(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},Lh.prototype.onChildEvent=function(t,e,n){var r=new Ph(t,e,n);this.repo.addEventCallbackForQuery(this,r)},Lh.prototype.off=function(t,e,n){Ca("Query.off",0,3,arguments.length),uc("Query.off",1,t,!0),Aa("Query.off",2,e,!0),ka("Query.off",3,n,!0);var r=null,i=null;"value"===t?r=new kh(e||null,null,n||null):t&&(e&&((i={})[t]=e),r=new Ph(i,null,n||null)),this.repo.removeEventCallbackForQuery(this,r)},Lh.prototype.once=function(e,n,t,r){var i=this;Ca("Query.once",1,4,arguments.length),uc("Query.once",1,e,!1),Aa("Query.once",2,n,!0);var o=Lh.getCancelAndContextArgs_("Query.once",t,r),s=!0,a=new Ys;a.promise.catch(function(){});var u=function(t){s&&(s=!1,i.off(e,u),n&&n.bind(o.context)(t),a.resolve(t))};return this.on(e,u,function(t){i.off(e,u),o.cancel&&o.cancel.bind(o.context)(t),a.reject(t)}),a.promise},Lh.prototype.limitToFirst=function(t){if(Ca("Query.limitToFirst",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Lh(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},Lh.prototype.limitToLast=function(t){if(Ca("Query.limitToLast",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Lh(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},Lh.prototype.orderByChild=function(t){if(Ca("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');hc("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var e=new Ku(t);if(e.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var n=new wh(e),r=this.queryParams_.orderBy(n);return Lh.validateQueryEndpoints_(r),new Lh(this.repo,this.path,r,!0)},Lh.prototype.orderByKey=function(){Ca("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=this.queryParams_.orderBy(xc);return Lh.validateQueryEndpoints_(t),new Lh(this.repo,this.path,t,!0)},Lh.prototype.orderByPriority=function(){Ca("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=this.queryParams_.orderBy(Hc);return Lh.validateQueryEndpoints_(t),new Lh(this.repo,this.path,t,!0)},Lh.prototype.orderByValue=function(){Ca("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=this.queryParams_.orderBy(_h);return Lh.validateQueryEndpoints_(t),new Lh(this.repo,this.path,t,!0)},Lh.prototype.startAt=function(t,e){void 0===t&&(t=null),Ca("Query.startAt",0,2,arguments.length),oc("Query.startAt",1,t,this.path,!0),cc("Query.startAt",2,e,!0);var n=this.queryParams_.startAt(t,e);if(Lh.validateLimit_(n),Lh.validateQueryEndpoints_(n),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(e=t=null),new Lh(this.repo,this.path,n,this.orderByCalled_)},Lh.prototype.endAt=function(t,e){void 0===t&&(t=null),Ca("Query.endAt",0,2,arguments.length),oc("Query.endAt",1,t,this.path,!0),cc("Query.endAt",2,e,!0);var n=this.queryParams_.endAt(t,e);if(Lh.validateLimit_(n),Lh.validateQueryEndpoints_(n),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new Lh(this.repo,this.path,n,this.orderByCalled_)},Lh.prototype.equalTo=function(t,e){if(Ca("Query.equalTo",1,2,arguments.length),oc("Query.equalTo",1,t,this.path,!1),cc("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},Lh.prototype.toString=function(){return Ca("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},Lh.prototype.toJSON=function(){return Ca("Query.toJSON",0,1,arguments.length),this.toString()},Lh.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},Lh.prototype.queryIdentifier=function(){var t=this.queryObject(),e=ju(t);return"{}"===e?"default":e},Lh.prototype.isEqual=function(t){if(Ca("Query.isEqual",1,1,arguments.length),!(t instanceof Lh))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");var e=this.repo===t.repo,n=this.path.equals(t.path),r=this.queryIdentifier()===t.queryIdentifier();return e&&n&&r},Lh.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Aa(t,3,r.cancel,!0),r.context=n,ka(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Na(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(Lh.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),Lh);function Lh(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}var Mh=(Fh.prototype.getImmediateChild=function(t){return new Fh(this.node_.getImmediateChild(t))},Fh.prototype.node=function(){return this.node_},Fh);function Fh(t){this.node_=t}var Uh=(jh.prototype.getImmediateChild=function(t){var e=this.path_.child(t);return new jh(this.syncTree_,e)},jh.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},jh);function jh(t,e){this.syncTree_=t,this.path_=e}function Vh(t,e,n,r){return Gh(e,new Uh(n,t),r)}function qh(t,e,n){return Gh(t,new Mh(e),n)}var Bh=function(t,e,n){return t&&"object"==typeof t?(Gs(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?Wh(t[".sv"],e,n):"object"==typeof t[".sv"]?Hh(t[".sv"],e):void Gs(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Wh=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Gs(!1,"Unexpected server value: "+t)}},Hh=function(t,e,n){t.hasOwnProperty("increment")||Gs(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Gs(!1,"Unexpected increment value: "+r);var i=e.node();if(Gs(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!=typeof o?r:o+r};function Gh(t,r,i){var e=t.getPriority().val(),n=Bh(e,r.getImmediateChild(".priority"),i);if(t.isLeafNode()){var o=t,s=Bh(o.getValue(),r,i);return s!==o.getValue()||n!==o.getPriority().val()?new qc(s,gh(n)):t}var a=t,u=a;return n!==a.getPriority().val()&&(u=u.updatePriority(new qc(n))),a.forEachChild(Hc,function(t,e){var n=Gh(e,r.getImmediateChild(t),i);n!==e&&(u=u.updateImmediateChild(t,n))}),u}var Kh,zh,Qh=(Xh.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&0<this.children.size){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},Xh.prototype.remember=function(t,e){var n,r;t.isEmpty()?(this.value=e,this.children.clear()):null!==this.value?this.value=this.value.updateChild(t,e):(n=t.getFront(),this.children.has(n)||this.children.set(n,new Xh),r=this.children.get(n),t=t.popFront(),r.remember(t,e))},Xh.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Hc,function(t,e){n.remember(new Ku(t),e)}),this.forget(t)}if(0<this.children.size){var r=t.getFront();return t=t.popFront(),this.children.has(r)&&this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},Xh.prototype.forEachTree=function(r,i){null!==this.value?i(r,this.value):this.forEachChild(function(t,e){var n=new Ku(r.toString()+"/"+t);e.forEachTree(n,i)})},Xh.prototype.forEachChild=function(n){this.children.forEach(function(t,e){n(e,t)})},Xh);function Xh(){this.value=null,this.children=new Map}(zh=Kh=Kh||{})[zh.OVERWRITE=0]="OVERWRITE",zh[zh.MERGE=1]="MERGE",zh[zh.ACK_USER_WRITE=2]="ACK_USER_WRITE",zh[zh.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var Yh=(Jh.User=new Jh(!0,!1,null,!1),Jh.Server=new Jh(!1,!0,null,!1),Jh.forServerTaggedQuery=function(t){return new Jh(!1,!0,t,!0)},Jh);function Jh(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,Gs(!r||e,"Tagged queries must be from server.")}var $h,Zh=(tl.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return Gs(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var e=this.affectedTree.subtree(new Ku(t));return new tl(Ku.Empty,e,this.revert)}return Gs(this.path.getFront()===t,"operationForChild called for unrelated child."),new tl(this.path.popFront(),this.affectedTree,this.revert)},tl);function tl(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Kh.ACK_USER_WRITE,this.source=Yh.User}var el=(nl.fromObject=function(t){var n=nl.Empty;return Vu(t,function(t,e){n=n.set(new Ku(t),e)}),n},nl.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},nl.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:Ku.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null===r)return null;var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null==i?null:{path:new Ku(n).child(i.path),value:i.value}},nl.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},nl.prototype.subtree=function(t){if(t.isEmpty())return this;var e=t.getFront(),n=this.children.get(e);return null!==n?n.subtree(t.popFront()):nl.Empty},nl.prototype.set=function(t,e){if(t.isEmpty())return new nl(e,this.children);var n=t.getFront(),r=(this.children.get(n)||nl.Empty).set(t.popFront(),e),i=this.children.insert(n,r);return new nl(this.value,i)},nl.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?nl.Empty:new nl(null,this.children);var e=t.getFront(),n=this.children.get(e);if(n){var r=n.remove(t.popFront()),i=void 0,i=r.isEmpty()?this.children.remove(e):this.children.insert(e,r);return null===this.value&&i.isEmpty()?nl.Empty:new nl(this.value,i)}return this},nl.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},nl.prototype.setTree=function(t,e){if(t.isEmpty())return e;var n=t.getFront(),r=(this.children.get(n)||nl.Empty).setTree(t.popFront(),e),i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r);return new nl(this.value,i)},nl.prototype.fold=function(t){return this.fold_(Ku.Empty,t)},nl.prototype.fold_=function(n,r){var i={};return this.children.inorderTraversal(function(t,e){i[t]=e.fold_(n.child(t),r)}),r(n,this.value,i)},nl.prototype.findOnPath=function(t,e){return this.findOnPath_(t,Ku.Empty,e)},nl.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},nl.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,Ku.Empty,e)},nl.prototype.foreachOnPath_=function(t,e,n){if(t.isEmpty())return this;this.value&&n(e,this.value);var r=t.getFront(),i=this.children.get(r);return i?i.foreachOnPath_(t.popFront(),e.child(r),n):nl.Empty},nl.prototype.foreach=function(t){this.foreach_(Ku.Empty,t)},nl.prototype.foreach_=function(n,r){this.children.inorderTraversal(function(t,e){e.foreach_(n.child(t),r)}),this.value&&r(n,this.value)},nl.prototype.foreachChild=function(n){this.children.inorderTraversal(function(t,e){e.value&&n(t,e.value)})},nl.Empty=new nl(null),nl);function nl(t,e){void 0===e&&(e=$h=$h||new Jc(Iu)),this.value=t,this.children=e}var rl=(il.prototype.operationForChild=function(t){return this.path.isEmpty()?new il(this.source,Ku.Empty):new il(this.source,this.path.popFront())},il);function il(t,e){this.source=t,this.path=e,this.type=Kh.LISTEN_COMPLETE}var ol=(sl.prototype.operationForChild=function(t){return this.path.isEmpty()?new sl(this.source,Ku.Empty,this.snap.getImmediateChild(t)):new sl(this.source,this.path.popFront(),this.snap)},sl);function sl(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Kh.OVERWRITE}var al=(ul.prototype.operationForChild=function(t){if(this.path.isEmpty()){var e=this.children.subtree(new Ku(t));return e.isEmpty()?null:e.value?new ol(this.source,Ku.Empty,e.value):new ul(this.source,Ku.Empty,e)}return Gs(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new ul(this.source,this.path.popFront(),this.children)},ul.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},ul);function ul(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Kh.MERGE}var cl=(hl.prototype.isFullyInitialized=function(){return this.fullyInitialized_},hl.prototype.isFiltered=function(){return this.filtered_},hl.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},hl.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},hl.prototype.getNode=function(){return this.node_},hl);function hl(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}var ll=(fl.prototype.updateEventSnap=function(t,e,n){return new fl(new cl(t,e,n),this.serverCache_)},fl.prototype.updateServerSnap=function(t,e,n){return new fl(this.eventCache_,new cl(t,e,n))},fl.prototype.getEventCache=function(){return this.eventCache_},fl.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},fl.prototype.getServerCache=function(){return this.serverCache_},fl.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},fl.Empty=new fl(new cl(lh.EMPTY_NODE,!1,!1),new cl(lh.EMPTY_NODE,!1,!1)),fl);function fl(t,e){this.eventCache_=t,this.serverCache_=e}var pl=(dl.valueChange=function(t){return new dl(dl.VALUE,t)},dl.childAddedChange=function(t,e){return new dl(dl.CHILD_ADDED,e,t)},dl.childRemovedChange=function(t,e){return new dl(dl.CHILD_REMOVED,e,t)},dl.childChangedChange=function(t,e,n){return new dl(dl.CHILD_CHANGED,e,t,n)},dl.childMovedChange=function(t,e){return new dl(dl.CHILD_MOVED,e,t)},dl.CHILD_ADDED="child_added",dl.CHILD_REMOVED="child_removed",dl.CHILD_CHANGED="child_changed",dl.CHILD_MOVED="child_moved",dl.VALUE="value",dl);function dl(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}var vl=(yl.prototype.updateChild=function(t,e,n,r,i,o){Gs(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(pl.childRemovedChange(e,s)):Gs(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(pl.childAddedChange(e,n)):o.trackChildChange(pl.childChangedChange(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},yl.prototype.updateFullNode=function(r,n,i){return null!=i&&(r.isLeafNode()||r.forEachChild(Hc,function(t,e){n.hasChild(t)||i.trackChildChange(pl.childRemovedChange(t,e))}),n.isLeafNode()||n.forEachChild(Hc,function(t,e){var n;r.hasChild(t)?(n=r.getImmediateChild(t)).equals(e)||i.trackChildChange(pl.childChangedChange(t,e,n)):i.trackChildChange(pl.childAddedChange(t,e))})),n.withIndex(this.index_)},yl.prototype.updatePriority=function(t,e){return t.isEmpty()?lh.EMPTY_NODE:t.updatePriority(e)},yl.prototype.filtersNodes=function(){return!1},yl.prototype.getIndexedFilter=function(){return this},yl.prototype.getIndex=function(){return this.index_},yl);function yl(t){this.index_=t}var gl=(ml.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Gs(e===pl.CHILD_ADDED||e===pl.CHILD_CHANGED||e===pl.CHILD_REMOVED,"Only child changes supported for tracking"),Gs(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===pl.CHILD_ADDED&&i===pl.CHILD_REMOVED)this.changeMap.set(n,pl.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===pl.CHILD_REMOVED&&i===pl.CHILD_ADDED)this.changeMap.delete(n);else if(e===pl.CHILD_REMOVED&&i===pl.CHILD_CHANGED)this.changeMap.set(n,pl.childRemovedChange(n,r.oldSnap));else if(e===pl.CHILD_CHANGED&&i===pl.CHILD_ADDED)this.changeMap.set(n,pl.childAddedChange(n,t.snapshotNode));else{if(e!==pl.CHILD_CHANGED||i!==pl.CHILD_CHANGED)throw Ks("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,pl.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},ml.prototype.getChanges=function(){return Array.from(this.changeMap.values())},ml);function ml(){this.changeMap=new Map}function bl(){}var _l=(bl.prototype.getCompleteChild=function(t){return null},bl.prototype.getChildAfterChild=function(t,e,n){return null},new bl),wl=(El.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new cl(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},El.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},El);function El(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}function Il(t,e){this.viewCache=t,this.changes=e}var Tl=(Sl.prototype.assertIndexed=function(t){Gs(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Gs(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},Sl.prototype.applyOperation=function(t,e,n,r){var i,o=new gl;if(e.type===Kh.OVERWRITE)var s=e,a=s.source.fromUser?this.applyUserOverwrite_(t,s.path,s.snap,n,r,o):(Gs(s.source.fromServer,"Unknown source."),i=s.source.tagged||t.getServerCache().isFiltered()&&!s.path.isEmpty(),this.applyServerOverwrite_(t,s.path,s.snap,n,r,i,o));else if(e.type===Kh.MERGE)var u=e,a=u.source.fromUser?this.applyUserMerge_(t,u.path,u.children,n,r,o):(Gs(u.source.fromServer,"Unknown source."),i=u.source.tagged||t.getServerCache().isFiltered(),this.applyServerMerge_(t,u.path,u.children,n,r,i,o));else if(e.type===Kh.ACK_USER_WRITE){var c=e;a=c.revert?this.revertUserWrite_(t,c.path,n,r,o):this.ackUserWrite_(t,c.path,c.affectedTree,n,r,o)}else{if(e.type!==Kh.LISTEN_COMPLETE)throw Ks("Unknown operation type: "+e.type);a=this.listenComplete_(t,e.path,n,o)}var h=o.getChanges();return Sl.maybeAddValueEvent_(t,a,h),new Il(a,h)},Sl.maybeAddValueEvent_=function(t,e,n){var r,i,o=e.getEventCache();o.isFullyInitialized()&&(r=o.getNode().isLeafNode()||o.getNode().isEmpty(),i=t.getCompleteEventSnap(),(0<n.length||!t.getEventCache().isFullyInitialized()||r&&!o.getNode().equals(i)||!o.getNode().getPriority().equals(i.getPriority()))&&n.push(pl.valueChange(e.getCompleteEventSnap())))},Sl.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var s,a,u,c,h,l,f,p,d,v,y=void 0,g=e.isEmpty()?(Gs(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()?(a=(s=t.getCompleteServerSnap())instanceof lh?s:lh.EMPTY_NODE,u=n.calcCompleteEventChildren(a),this.filter_.updateFullNode(t.getEventCache().getNode(),u,i)):(c=n.calcCompleteEventCache(t.getCompleteServerSnap()),this.filter_.updateFullNode(t.getEventCache().getNode(),c,i))):".priority"===(h=e.getFront())?(Gs(1===e.getLength(),"Can't have a priority with additional path components"),l=o.getNode(),y=t.getServerCache().getNode(),null!=(f=n.calcEventCacheAfterServerOverwrite(e,l,y))?this.filter_.updatePriority(l,f):o.getNode()):(p=e.popFront(),null!=(v=o.isCompleteForChild(h)?(y=t.getServerCache().getNode(),null!=(d=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),y))?o.getNode().getImmediateChild(h).updateChild(p,d):o.getNode().getImmediateChild(h)):n.calcCompleteChild(h,t.getServerCache()))?this.filter_.updateChild(o.getNode(),h,v,p,r,i):o.getNode());return t.updateEventSnap(g,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},Sl.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a=t.getServerCache(),u=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())h=u.updateFullNode(a.getNode(),n,null);else if(u.filtersNodes()&&!a.isFiltered())var c=a.getNode().updateChild(e,n),h=u.updateFullNode(a.getNode(),c,null);else{var l=e.getFront();if(!a.isCompleteForPath(e)&&1<e.getLength())return t;var f=e.popFront(),p=a.getNode().getImmediateChild(l).updateChild(f,n),h=".priority"===l?u.updatePriority(a.getNode(),p):u.updateChild(a.getNode(),l,p,f,_l,null)}var d=t.updateServerSnap(h,a.isFullyInitialized()||e.isEmpty(),u.filtersNodes()),v=new wl(r,d,i);return this.generateEventCacheAfterServerEvent_(d,e,r,v,s)},Sl.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u,c,h,l,f,p=t.getEventCache(),d=new wl(r,t,i);return e.isEmpty()?(s=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),t.updateEventSnap(s,!0,this.filter_.filtersNodes())):".priority"===(a=e.getFront())?(s=this.filter_.updatePriority(t.getEventCache().getNode(),n),t.updateEventSnap(s,p.isFullyInitialized(),p.isFiltered())):(u=e.popFront(),c=p.getNode().getImmediateChild(a),l=u.isEmpty()?n:null!=(h=d.getCompleteChild(a))?".priority"===u.getBack()&&h.getChild(u.parent()).isEmpty()?h:h.updateChild(u,n):lh.EMPTY_NODE,c.equals(l)?t:(f=this.filter_.updateChild(p.getNode(),a,l,u,d,o),t.updateEventSnap(f,p.isFullyInitialized(),this.filter_.filtersNodes())))},Sl.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},Sl.prototype.applyUserMerge_=function(r,i,t,o,s,a){var u=this,c=r;return t.foreach(function(t,e){var n=i.child(t);Sl.cacheHasChild_(r,n.getFront())&&(c=u.applyUserOverwrite_(c,n,e,o,s,a))}),t.foreach(function(t,e){var n=i.child(t);Sl.cacheHasChild_(r,n.getFront())||(c=u.applyUserOverwrite_(c,n,e,o,s,a))}),c},Sl.prototype.applyMerge_=function(n,t){return t.foreach(function(t,e){n=n.updateChild(t,e)}),n},Sl.prototype.applyServerMerge_=function(o,t,e,s,a,u,c){var h=this;if(o.getServerCache().getNode().isEmpty()&&!o.getServerCache().isFullyInitialized())return o;var l=o,n=t.isEmpty()?e:el.Empty.setTree(t,e),f=o.getServerCache().getNode();return n.children.inorderTraversal(function(t,e){var n,r;f.hasChild(t)&&(n=o.getServerCache().getNode().getImmediateChild(t),r=h.applyMerge_(n,e),l=h.applyServerOverwrite_(l,new Ku(t),r,s,a,u,c))}),n.children.inorderTraversal(function(t,e){var n,r,i=!o.getServerCache().isCompleteForChild(t)&&null==e.value;f.hasChild(t)||i||(n=o.getServerCache().getNode().getImmediateChild(t),r=h.applyMerge_(n,e),l=h.applyServerOverwrite_(l,new Ku(t),r,s,a,u,c))}),l},Sl.prototype.ackUserWrite_=function(t,r,e,n,i,o){if(null!=n.shadowingWrite(r))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=e.value){if(r.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(r))return this.applyServerOverwrite_(t,r,a.getNode().getChild(r),n,i,s,o);if(r.isEmpty()){var u=el.Empty;return a.getNode().forEachChild(xc,function(t,e){u=u.set(new Ku(t),e)}),this.applyServerMerge_(t,r,u,n,i,s,o)}return t}var c=el.Empty;return e.foreach(function(t,e){var n=r.child(t);a.isCompleteForPath(n)&&(c=c.set(t,a.getNode().getChild(n)))}),this.applyServerMerge_(t,r,c,n,i,s,o)},Sl.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,_l,r)},Sl.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var s,a,u,c,h=new wl(n,t,r),l=t.getEventCache().getNode(),f=void 0;return e.isEmpty()||".priority"===e.getFront()?(a=t.getServerCache().isFullyInitialized()?n.calcCompleteEventCache(t.getCompleteServerSnap()):(s=t.getServerCache().getNode(),Gs(s instanceof lh,"serverChildren would be complete if leaf node"),n.calcCompleteEventChildren(s)),f=this.filter_.updateFullNode(l,a,i)):(u=e.getFront(),null==(c=n.calcCompleteChild(u,t.getServerCache()))&&t.getServerCache().isCompleteForChild(u)&&(c=l.getImmediateChild(u)),(f=null!=c?this.filter_.updateChild(l,u,c,e.popFront(),h,i):t.getEventCache().getNode().hasChild(u)?this.filter_.updateChild(l,u,lh.EMPTY_NODE,e.popFront(),h,i):l).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(f=this.filter_.updateFullNode(f,o,i))),o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(Ku.Empty),t.updateEventSnap(f,o,this.filter_.filtersNodes())},Sl);function Sl(t){this.filter_=t}var Cl=(Nl.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach(function(t){t.type===pl.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(pl.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(i,pl.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,pl.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,pl.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,pl.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,pl.VALUE,t,n,e),i},Nl.prototype.generateEventsForType_=function(r,e,t,i,o){var s=this,n=t.filter(function(t){return t.type===e});n.sort(this.compareChanges_.bind(this)),n.forEach(function(e){var n=s.materializeSingleChange_(e,o);i.forEach(function(t){t.respondsTo(e.type)&&r.push(t.createEvent(n,s.query_))})})},Nl.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},Nl.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw Ks("Should only compare child_ events.");var n=new Sc(t.childName,t.snapshotNode),r=new Sc(e.childName,e.snapshotNode);return this.index_.compare(n,r)},Nl);function Nl(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}var Al,kl=(Ol.prototype.getQuery=function(){return this.query_},Ol.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},Ol.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},Ol.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},Ol.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},Ol.prototype.removeEventRegistration=function(t,n){var r,i=[];if(n&&(Gs(null==t,"A cancel should cancel all event registrations."),r=this.query_.path,this.eventRegistrations_.forEach(function(t){var e=t.createCancelEvent(n,r);e&&i.push(e)})),t){for(var e=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){e=e.concat(this.eventRegistrations_.slice(o+1));break}}else e.push(s)}this.eventRegistrations_=e}else this.eventRegistrations_=[];return i},Ol.prototype.applyOperation=function(t,e,n){t.type===Kh.MERGE&&null!==t.source.queryId&&(Gs(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Gs(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),Gs(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},Ol.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Hc,function(t,e){n.push(pl.childAddedChange(t,e))}),e.isFullyInitialized()&&n.push(pl.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},Ol.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,r)},Ol);function Ol(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new vl(n.getIndex()),i=n.getNodeFilter();this.processor_=new Tl(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode(lh.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(lh.EMPTY_NODE,s.getNode(),null),c=new cl(a,o.isFullyInitialized(),r.filtersNodes()),h=new cl(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new ll(h,c),this.eventGenerator_=new Cl(this.query_)}var Rl=(Object.defineProperty(Pl,"__referenceConstructor",{get:function(){return Gs(Al,"Reference.ts has not been loaded"),Al},set:function(t){Gs(!Al,"__referenceConstructor has already been defined"),Al=t},enumerable:!1,configurable:!0}),Pl.prototype.isEmpty=function(){return 0===this.views.size},Pl.prototype.applyOperation=function(t,e,n){var r,i,o=t.source.queryId;if(null!==o){var s=this.views.get(o);return Gs(null!=s,"SyncTree gave us an op for an invalid query."),s.applyOperation(t,e,n)}var a=[];try{for(var u=Us(this.views.values()),c=u.next();!c.done;c=u.next())s=c.value,a=a.concat(s.applyOperation(t,e,n))}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return a},Pl.prototype.addEventRegistration=function(t,e,n,r,i){var o,s,a,u=t.queryIdentifier(),c=this.views.get(u);return c||(s=!!(o=n.calcCompleteEventCache(i?r:null))||(o=r instanceof lh?n.calcCompleteEventChildren(r):lh.EMPTY_NODE,!1),a=new ll(new cl(o,s,!1),new cl(r,i,!1)),c=new kl(t,a),this.views.set(u,c)),c.addEventRegistration(e),c.getInitialEvents(e)},Pl.prototype.removeEventRegistration=function(t,e,n){var r,i,o=t.queryIdentifier(),s=[],a=[],u=this.hasCompleteView();if("default"===o)try{for(var c=Us(this.views.entries()),h=c.next();!h.done;h=c.next()){var l=js(h.value,2),f=l[0],p=l[1],a=a.concat(p.removeEventRegistration(e,n));p.isEmpty()&&(this.views.delete(f),p.getQuery().getQueryParams().loadsAllData()||s.push(p.getQuery()))}}catch(t){r={error:t}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}else(p=this.views.get(o))&&(a=a.concat(p.removeEventRegistration(e,n)),p.isEmpty()&&(this.views.delete(o),p.getQuery().getQueryParams().loadsAllData()||s.push(p.getQuery())));return u&&!this.hasCompleteView()&&s.push(new Pl.__referenceConstructor(t.repo,t.path)),{removed:s,events:a}},Pl.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=Us(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},Pl.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=Us(this.views.values()),o=i.next();!o.done;o=i.next())var s=o.value,r=r||s.getCompleteServerCache(t)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},Pl.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},Pl.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},Pl.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},Pl.prototype.getCompleteView=function(){var t,e;try{for(var n=Us(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},Pl);function Pl(){this.views=new Map}var Dl=(xl.prototype.addWrite=function(t,e){if(t.isEmpty())return new xl(new el(e));var n=this.writeTree_.findRootMostValueAndPath(t);if(null!=n){var r=n.path,i=n.value,o=Ku.relativePath(r,t),i=i.updateChild(o,e);return new xl(this.writeTree_.set(r,i))}var s=new el(e);return new xl(this.writeTree_.setTree(t,s))},xl.prototype.addWrites=function(n,t){var r=this;return Vu(t,function(t,e){r=r.addWrite(n.child(t),e)}),r},xl.prototype.removeWrite=function(t){return t.isEmpty()?xl.Empty:new xl(this.writeTree_.setTree(t,el.Empty))},xl.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},xl.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(Ku.relativePath(e.path,t)):null},xl.prototype.getCompleteChildren=function(){var n=[],t=this.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Hc,function(t,e){n.push(new Sc(t,e))}):this.writeTree_.children.inorderTraversal(function(t,e){null!=e.value&&n.push(new Sc(t,e.value))}),n},xl.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var e=this.getCompleteNode(t);return new xl(null!=e?new el(e):this.writeTree_.subtree(t))},xl.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},xl.prototype.apply=function(t){return function n(r,t,i){if(null!=t.value)return i.updateChild(r,t.value);var o=null;return t.children.inorderTraversal(function(t,e){".priority"===t?(Gs(null!==e.value,"Priority writes must always be leaf nodes"),o=e.value):i=n(r.child(t),e,i)}),i.getChild(r).isEmpty()||null===o||(i=i.updateChild(r.child(".priority"),o)),i}(Ku.Empty,this.writeTree_,t)},xl.Empty=new xl(new el(null)),xl);function xl(t){this.writeTree_=t}var Ml=(Fl.prototype.childWrites=function(t){return new Ul(t,this)},Fl.prototype.addOverwrite=function(t,e,n,r){Gs(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},Fl.prototype.addMerge=function(t,e,n){Gs(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},Fl.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},Fl.prototype.removeWrite=function(e){var n=this,t=this.allWrites_.findIndex(function(t){return t.writeId===e});Gs(0<=t,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[t];this.allWrites_.splice(t,1);for(var i=r.visible,o=!1,s=this.allWrites_.length-1;i&&0<=s;){var a=this.allWrites_[s];a.visible&&(t<=s&&this.recordContainsPath_(a,r.path)?i=!1:r.path.contains(a.path)&&(o=!0)),s--}return!!i&&(o?this.resetTree_():r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):Vu(r.children,function(t){n.visibleWrites_=n.visibleWrites_.removeWrite(r.path.child(t))}),!0)},Fl.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},Fl.prototype.calcCompleteEventCache=function(e,t,n,r){if(n||r){var i=this.visibleWrites_.childCompoundWrite(e);if(!r&&i.isEmpty())return t;if(r||null!=t||i.hasCompleteWrite(Ku.Empty)){var o=Fl.layerTree_(this.allWrites_,function(t){return(t.visible||r)&&(!n||!~n.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e),s=t||lh.EMPTY_NODE;return o.apply(s)}return null}var a=this.visibleWrites_.getCompleteNode(e);if(null!=a)return a;var u=this.visibleWrites_.childCompoundWrite(e);if(u.isEmpty())return t;if(null!=t||u.hasCompleteWrite(Ku.Empty)){s=t||lh.EMPTY_NODE;return u.apply(s)}return null},Fl.prototype.calcCompleteEventChildren=function(t,e){var r=lh.EMPTY_NODE,n=this.visibleWrites_.getCompleteNode(t);if(n)return n.isLeafNode()||n.forEachChild(Hc,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(Hc,function(t,e){var n=i.childCompoundWrite(new Ku(t)).apply(e);r=r.updateImmediateChild(t,n)}),i.getCompleteChildren().forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r},Fl.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){Gs(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},Fl.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},Fl.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},Fl.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),u=a.getCompleteNode(Ku.Empty);if(null!=u)s=u;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],h=o.getCompare(),l=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=l.getNext();f&&c.length<r;)0!==h(f,n)&&c.push(f),f=l.getNext();return c},Fl.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},Fl.prototype.resetTree_=function(){this.visibleWrites_=Fl.layerTree_(this.allWrites_,Fl.DefaultFilter_,Ku.Empty),0<this.allWrites_.length?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},Fl.DefaultFilter_=function(t){return t.visible},Fl.layerTree_=function(t,e,n){for(var r=Dl.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var s,a,u=o.path,c=void 0;if(o.snap)n.contains(u)?(c=Ku.relativePath(n,u),r=r.addWrite(c,o.snap)):u.contains(n)&&(c=Ku.relativePath(u,n),r=r.addWrite(Ku.Empty,o.snap.getChild(c)));else{if(!o.children)throw Ks("WriteRecord should have .snap or .children");n.contains(u)?(c=Ku.relativePath(n,u),r=r.addWrites(c,o.children)):u.contains(n)&&((c=Ku.relativePath(u,n)).isEmpty()?r=r.addWrites(Ku.Empty,o.children):(s=ga(o.children,c.getFront()))&&(a=s.getChild(c.popFront()),r=r.addWrite(Ku.Empty,a)))}}}return r},Fl);function Fl(){this.visibleWrites_=Dl.Empty,this.allWrites_=[],this.lastWriteId_=-1}var Ul=(jl.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},jl.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},jl.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},jl.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},jl.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},jl.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},jl.prototype.child=function(t){return new jl(this.treePath_.child(t),this.writeTree_)},jl);function jl(t,e){this.treePath_=t,this.writeTree_=e}var Vl=(ql.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new ol(Yh.User,t,e)):[]},ql.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=el.fromObject(e);return this.applyOperationToSyncPoints_(new al(Yh.User,t,r))},ql.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=el.Empty;return null!=n.snap?r=r.set(Ku.Empty,!0):Vu(n.children,function(t,e){r=r.set(new Ku(t),e)}),this.applyOperationToSyncPoints_(new Zh(n.path,r,e))}return[]},ql.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new ol(Yh.Server,t,e))},ql.prototype.applyServerMerge=function(t,e){var n=el.fromObject(e);return this.applyOperationToSyncPoints_(new al(Yh.Server,t,n))},ql.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new rl(Yh.Server,t))},ql.prototype.applyTaggedQueryOverwrite=function(t,e,n){var r=this.queryKeyForTag_(n);if(null==r)return[];var i=ql.parseQueryKey_(r),o=i.path,s=i.queryId,a=Ku.relativePath(o,t),u=new ol(Yh.forServerTaggedQuery(s),a,e);return this.applyTaggedOperation_(o,u)},ql.prototype.applyTaggedQueryMerge=function(t,e,n){var r=this.queryKeyForTag_(n);if(r){var i=ql.parseQueryKey_(r),o=i.path,s=i.queryId,a=Ku.relativePath(o,t),u=el.fromObject(e),c=new al(Yh.forServerTaggedQuery(s),a,u);return this.applyTaggedOperation_(o,c)}return[]},ql.prototype.applyTaggedListenComplete=function(t,e){var n=this.queryKeyForTag_(e);if(n){var r=ql.parseQueryKey_(n),i=r.path,o=r.queryId,s=Ku.relativePath(i,t),a=new rl(Yh.forServerTaggedQuery(o),s);return this.applyTaggedOperation_(i,a)}return[]},ql.prototype.addEventRegistration=function(t,e){var r=t.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,function(t,e){var n=Ku.relativePath(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()});var n,s=this.syncPointTree_.get(r);s?(o=o||s.hasCompleteView(),i=i||s.getCompleteServerCache(Ku.Empty)):(s=new Rl,this.syncPointTree_=this.syncPointTree_.set(r,s)),null!=i?n=!0:(n=!1,i=lh.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=e.getCompleteServerCache(Ku.Empty);n&&(i=i.updateImmediateChild(t,n))}));var a,u,c=s.viewExistsForQuery(t);c||t.getQueryParams().loadsAllData()||(a=ql.makeQueryKey_(t),Gs(!this.queryToTagMap.has(a),"View does not exist, but we have a tag"),u=ql.getNextQueryTag_(),this.queryToTagMap.set(a,u),this.tagToQueryMap.set(u,a));var h,l=this.pendingWriteTree_.childWrites(r),f=s.addEventRegistration(t,e,l,i,n);return c||o||(h=s.viewForQuery(t),f=f.concat(this.setupListener_(t,h))),f},ql.prototype.removeEventRegistration=function(t,e,n){var r=this,i=t.path,o=this.syncPointTree_.get(i),s=[];if(o&&("default"===t.queryIdentifier()||o.viewExistsForQuery(t))){var a=o.removeEventRegistration(t,e,n);o.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(i));var u=a.removed,s=a.events,c=-1!==u.findIndex(function(t){return t.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(i,function(t,e){return e.hasCompleteView()});if(c&&!h){var l=this.syncPointTree_.subtree(i);if(!l.isEmpty())for(var f=this.collectDistinctViewsForSubTree_(l),p=0;p<f.length;++p){var d=f[p],v=d.getQuery(),y=this.createListenerForView_(d);this.listenProvider_.startListening(ql.queryForListening_(v),this.tagForQuery_(v),y.hashFn,y.onComplete)}}!h&&0<u.length&&!n&&(c?this.listenProvider_.stopListening(ql.queryForListening_(t),null):u.forEach(function(t){var e=r.queryToTagMap.get(ql.makeQueryKey_(t));r.listenProvider_.stopListening(ql.queryForListening_(t),e)})),this.removeTags_(u)}return s},ql.prototype.calcCompleteEventCache=function(i,t){var e=this.pendingWriteTree_,n=this.syncPointTree_.findOnPath(i,function(t,e){var n=Ku.relativePath(t,i),r=e.getCompleteServerCache(n);if(r)return r});return e.calcCompleteEventCache(i,n,t,!0)},ql.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),Vu(n,function(t,e){r=r.concat(e)}),r})},ql.prototype.removeTags_=function(t){for(var e=0;e<t.length;++e){var n,r,i=t[e];i.getQueryParams().loadsAllData()||(n=ql.makeQueryKey_(i),r=this.queryToTagMap.get(n),this.queryToTagMap.delete(n),this.tagToQueryMap.delete(r))}},ql.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},ql.prototype.setupListener_=function(t,e){var n=t.path,r=this.tagForQuery_(t),i=this.createListenerForView_(e),o=this.listenProvider_.startListening(ql.queryForListening_(t),r,i.hashFn,i.onComplete),s=this.syncPointTree_.subtree(n);if(r)Gs(!s.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var a=s.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),Vu(n,function(t,e){r=r.concat(e)}),r}),u=0;u<a.length;++u){var c=a[u];this.listenProvider_.stopListening(ql.queryForListening_(c),this.tagForQuery_(c))}return o},ql.prototype.createListenerForView_=function(t){var n=this,r=t.getQuery(),i=this.tagForQuery_(r);return{hashFn:function(){return(t.getServerCache()||lh.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return i?n.applyTaggedListenComplete(r.path,i):n.applyListenComplete(r.path);var e=function(t){var e="Unknown Error";"too_big"===t?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?e="Client doesn't have permission to access the desired data.":"unavailable"===t&&(e="The service is unavailable");var n=new Error(t+" at "+r.path.toString()+": "+e);return n.code=t.toUpperCase(),n}(t);return n.removeEventRegistration(r,null,e)}}},ql.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},ql.parseQueryKey_=function(t){var e=t.indexOf("$");return Gs(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ku(t.substr(0,e))}},ql.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},ql.prototype.tagForQuery_=function(t){var e=ql.makeQueryKey_(t);return this.queryToTagMap.get(e)},ql.getNextQueryTag_=function(){return ql.nextQueryTag_++},ql.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);Gs(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},ql.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(Ku.Empty))},ql.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(Ku.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(Ku.Empty));var o,s,a=[],u=t.path.getFront(),c=t.operationForChild(u),h=e.children.get(u);return h&&c&&(o=n?n.getImmediateChild(u):null,s=r.child(u),a=a.concat(this.applyOperationHelper_(c,h,o,s))),i&&(a=a.concat(i.applyOperation(t,r,n))),a},ql.prototype.applyOperationDescendantsHelper_=function(o,t,s,a){var u=this,e=t.get(Ku.Empty);null==s&&null!=e&&(s=e.getCompleteServerCache(Ku.Empty));var c=[];return t.children.inorderTraversal(function(t,e){var n=s?s.getImmediateChild(t):null,r=a.child(t),i=o.operationForChild(t);i&&(c=c.concat(u.applyOperationDescendantsHelper_(i,e,n,r)))}),e&&(c=c.concat(e.applyOperation(o,a,s))),c},ql.nextQueryTag_=1,ql);function ql(t){this.listenProvider_=t,this.syncPointTree_=el.Empty,this.pendingWriteTree_=new Ml,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}var Bl=(Wl.prototype.getNode=function(t){return this.rootNode_.getChild(t)},Wl.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},Wl);function Wl(){this.rootNode_=lh.EMPTY_NODE}var Hl=(Gl.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),ya(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},Gl.prototype.get=function(){return Qs(this.counters_)},Gl);function Gl(){this.counters_={}}var Kl=(zl.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Hl),this.collections_[e]},zl.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},zl.collections_={},zl.reporters_={},zl);function zl(){}var Ql=(Xl.prototype.get=function(){var t=this.collection_.get(),n=Ls({},t);return this.last_&&Vu(this.last_,function(t,e){n[t]=n[t]-e}),this.last_=t,n},Xl);function Xl(t){this.collection_=t,this.last_=null}var Yl=(Jl.prototype.includeStat=function(t){this.statsToReport_[t]=!0},Jl.prototype.reportStats_=function(){var n=this,t=this.statsListener_.get(),r={},i=!1;Vu(t,function(t,e){0<e&&ya(n.statsToReport_,t)&&(r[t]=e,i=!0)}),i&&this.server_.reportStats(r),Wu(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},Jl);function Jl(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Ql(t);var n=1e4+2e4*Math.random();Wu(this.reportStats_.bind(this),Math.floor(n))}var $l=(Zl.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new tf(i)),e.add(r)}e&&this.eventLists_.push(e)},Zl.prototype.raiseEventsAtPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.equals(e)})},Zl.prototype.raiseEventsForChangedPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.contains(e)||e.contains(t)})},Zl.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},Zl);function Zl(){this.eventLists_=[],this.recursionDepth_=0}var tf=(ef.prototype.add=function(t){this.events_.push(t)},ef.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e,n=this.events_[t];null!==n&&(this.events_[t]=null,e=n.getEventRunner(),Pu&&xu("event: "+n.toString()),Bu(e))}},ef.prototype.getPath=function(){return this.path_},ef);function ef(t){this.path_=t,this.events_=[]}var nf=(rf.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Vs(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},rf.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},rf.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},rf.prototype.validateEventType_=function(e){Gs(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)},rf);function rf(t){this.allowedEvents_=t,this.listeners_={},Gs(Array.isArray(t)&&0<t.length,"Requires a non-empty array")}var of,sf=(xs(af,of=nf),af.getInstance=function(){return new af},af.prototype.getInitialEvent=function(t){return Gs("visible"===t,"Unknown event type: "+t),[this.visible_]},af);function af(){var e,t,n=of.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),n.visible_=!0,t&&document.addEventListener(t,function(){var t=!document[e];t!==n.visible_&&(n.visible_=t,n.trigger("visible",t))},!1),n}var uf,cf=(xs(hf,uf=nf),hf.getInstance=function(){return new hf},hf.prototype.getInitialEvent=function(t){return Gs("online"===t,"Unknown event type: "+t),[this.online_]},hf.prototype.currentlyOnline=function(){return this.online_},hf);function hf(){var t=uf.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Zs()||(window.addEventListener("online",function(){t.online_||(t.online_=!0,t.trigger("online",!0))},!1),window.addEventListener("offline",function(){t.online_&&(t.online_=!1,t.trigger("online",!1))},!1)),t}var lf=(ff.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},ff.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=this;this.pendingResponses[this.currentResponseNum]&&"break"!==function(){var e=r.pendingResponses[r.currentResponseNum];delete r.pendingResponses[r.currentResponseNum];for(var t=0;t<e.length;++t)!function(t){e[t]&&Bu(function(){n.onMessage_(e[t])})}(t);if(r.currentResponseNum===r.closeAfterResponse)return r.onClose&&(r.onClose(),r.onClose=null),"break";r.currentResponseNum++}(););},ff);function ff(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}var pf="pLPCommand",df="pRTLPCB",vf=(yf.prototype.open=function(t,e){var n,r,i,s=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new lf(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){s.log_("Timed out trying to connect."),s.onClosed_(),s.connectTimeoutTimer_=null},Math.floor(3e4)),n=function(){var t,e;s.isClosed_||(s.scriptTagHolder=new gf(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=js(t,5),r=n[0],i=n[1],o=n[2];if(n[3],n[4],s.incrementIncomingBytes_(t),s.scriptTagHolder)if(s.connectTimeoutTimer_&&(clearTimeout(s.connectTimeoutTimer_),s.connectTimeoutTimer_=null),s.everConnected_=!0,"start"===r)s.id=i,s.password=o;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);i?(s.scriptTagHolder.sendNewPolls=!1,s.myPacketOrderer.closeAfter(i,function(){s.onClosed_()})):s.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=js(t,2),r=n[0],i=n[1];s.incrementIncomingBytes_(t),s.myPacketOrderer.handleResponse(r,i)},function(){s.onClosed_()},s.urlFn),(t={start:"t"}).ser=Math.floor(1e8*Math.random()),s.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=s.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",s.transportSessionId&&(t.s=s.transportSessionId),s.lastSessionId&&(t.ls=s.lastSessionId),s.applicationId&&(t.p=s.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(Yu)&&(t.r="f"),e=s.urlFn(t),s.log_("Connecting via long-poll to "+e),s.scriptTagHolder.addTag(e,function(){}))},"complete"===document.readyState?n():(r=!1,i=function(){document.body?r||(r=!0,n()):setTimeout(i,Math.floor(10))},document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&i()}),window.attachEvent("onload",i)))},yf.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},yf.forceAllow=function(){yf.forceAllow_=!0},yf.forceDisallow=function(){yf.forceDisallow_=!0},yf.isAvailable=function(){return!!yf.forceAllow_||!(yf.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},yf.prototype.markConnectionHealthy=function(){},yf.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},yf.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},yf.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},yf.prototype.send=function(t){var e=da(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n,r=Su((n=Bs(e),zs.encodeByteArray(n,!0)),1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},yf.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},yf.prototype.incrementIncomingBytes_=function(t){var e=da(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},yf);function yf(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Lu(t),this.stats_=Kl.getCollection(e),this.urlFn=function(t){return e.connectionURL($u,t)}}var gf=(mf.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||xu("No IE domain setting required")}catch(t){var n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},mf.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},mf.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},mf.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(0<this.pendingSegs.length?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;0<this.pendingSegs.length&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift(),n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d;r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},mf.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},mf.prototype.addLongPollTag_=function(t,e){var n=this;function r(){n.outstandingRequests.delete(e),n.newRequest_()}this.outstandingRequests.add(e);var i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},mf.prototype.addTag=function(t,n){var r=this;setTimeout(function(){try{if(!r.sendNewPolls)return;var e=r.myIFrame.doc.createElement("script");e.type="text/javascript",e.async=!0,e.src=t,e.onload=e.onreadystatechange=function(){var t=e.readyState;t&&"loaded"!==t&&"complete"!==t||(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),n())},e.onerror=function(){xu("Long-poll script failed to load: "+t),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(e)}catch(t){}},Math.floor(1))},mf);function mf(t,e,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=Ou(),window[pf+this.uniqueCallbackIdentifier]=t,window[df+this.uniqueCallbackIdentifier]=e,this.myIFrame=mf.createIFrame_();var i="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(i='<script>document.domain="'+document.domain+'";<\/script>');var o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(t){xu("frame writing exception"),t.stack&&xu(t.stack),xu(t)}}var bf="",_f=null;"undefined"!=typeof MozWebSocket?_f=MozWebSocket:"undefined"!=typeof WebSocket&&(_f=WebSocket);var wf=(Ef.connectionURL_=function(t,e,n){var r={v:"5"};return"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(Yu)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(Ju,r)},Ef.prototype.open=function(t,e){var n,r,i,o,s=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Nu.set("previous_websocket_failure",!0);try{na()?(n=Hs.NODE_ADMIN?"AdminNode":"Node",o={headers:{"User-Agent":"Firebase/5/"+bf+"/"+process.platform+"/"+n,"X-Firebase-GMPID":this.applicationId||""}},r=process.env,(i=0===this.connURL.indexOf("wss://")?r.HTTPS_PROXY||r.https_proxy:r.HTTP_PROXY||r.http_proxy)&&(o.proxy={origin:i})):o={headers:{"X-Firebase-GMPID":this.applicationId||""}},this.mySock=new _f(this.connURL,[],o)}catch(t){this.log_("Error instantiating WebSocket.");var a=t.message||t.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){s.log_("Websocket connected."),s.everConnected_=!0},this.mySock.onclose=function(){s.log_("Websocket connection was disconnected."),s.mySock=null,s.onClosed_()},this.mySock.onmessage=function(t){s.handleIncomingFrame(t)},this.mySock.onerror=function(t){s.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&s.log_(e),s.onClosed_()}},Ef.prototype.start=function(){},Ef.forceDisallow=function(){Ef.forceDisallow_=!0},Ef.isAvailable=function(){var t,e=!1;return"undefined"!=typeof navigator&&navigator.userAgent&&(t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/))&&1<t.length&&parseFloat(t[1])<4.4&&(e=!0),!e&&null!==_f&&!Ef.forceDisallow_},Ef.previouslyFailed=function(){return Nu.isInMemoryStorage||!0===Nu.get("previous_websocket_failure")},Ef.prototype.markConnectionHealthy=function(){Nu.remove("previous_websocket_failure")},Ef.prototype.appendFrame_=function(t){var e,n;this.frames.push(t),this.frames.length===this.totalFrames&&(e=this.frames.join(""),this.frames=null,n=pa(e),this.onMessage(n))},Ef.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},Ef.prototype.extractFrameCount_=function(t){if(Gs(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},Ef.prototype.handleIncomingFrame=function(t){var e,n;null!==this.mySock&&(e=t.data,this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames?this.appendFrame_(e):null!==(n=this.extractFrameCount_(e))&&this.appendFrame_(n))},Ef.prototype.send=function(t){this.resetKeepAlive();var e=da(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=Su(e,16384);1<n.length&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},Ef.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},Ef.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},Ef.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},Ef.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},Ef.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},Ef.responsesRequiredToBeHealthy=2,Ef.healthyTimeout=3e4,Ef);function Ef(t,e,n,r,i){this.connId=t,this.applicationId=n,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Lu(this.connId),this.stats_=Kl.getCollection(e),this.connURL=Ef.connectionURL_(e,r,i)}var If=(Object.defineProperty(Tf,"ALL_TRANSPORTS",{get:function(){return[vf,wf]},enumerable:!1,configurable:!0}),Tf.prototype.initTransports_=function(t){var e,n,r=wf&&wf.isAvailable(),i=r&&!wf.previouslyFailed();if(t.webSocketOnly&&(r||wu("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[wf];else{var o=this.transports_=[];try{for(var s=Us(Tf.ALL_TRANSPORTS),a=s.next();!a.done;a=s.next()){var u=a.value;u&&u.isAvailable()&&o.push(u)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}}},Tf.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},Tf.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},Tf);function Tf(t){this.initTransports_(t)}var Sf=(Cf.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;0<i&&(this.healthyTimeout_=Wu(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&102400<t.conn_.bytesReceived?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&10240<t.conn_.bytesSent?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},Cf.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},Cf.prototype.disconnReceiver_=function(e){var n=this;return function(t){e===n.conn_?n.onConnectionLost_(t):e===n.secondaryConn_?(n.log_("Secondary connection lost."),n.onSecondaryConnectionLost_()):n.log_("closing an old connection")}},Cf.prototype.connReceiver_=function(e){var n=this;return function(t){2!==n.state_&&(e===n.rx_?n.onPrimaryMessageReceived_(t):e===n.secondaryConn_?n.onSecondaryMessageReceived_(t):n.log_("message on old connection"))}},Cf.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},Cf.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},Cf.prototype.onSecondaryControl_=function(t){var e;"t"in t&&("a"===(e=t.t)?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_()))},Cf.prototype.onSecondaryMessageReceived_=function(t){var e=Tu("t",t),n=Tu("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},Cf.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},Cf.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},Cf.prototype.onPrimaryMessageReceived_=function(t){var e=Tu("t",t),n=Tu("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},Cf.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},Cf.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},Cf.prototype.onControl_=function(t){var e=Tu("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?bu("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):bu("Unknown control packet command: "+e)}},Cf.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&wu("Protocol version mismatch detected"),this.tryStartUpgrade_())},Cf.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},Cf.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Wu(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},Cf.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},Cf.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Wu(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},Cf.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},Cf.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},Cf.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Nu.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},Cf.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},Cf.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},Cf.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},Cf.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},Cf);function Cf(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Lu("c:"+this.id+":"),this.transportManager_=new If(e),this.log_("Connection created"),this.start_()}var Nf=(Af.prototype.put=function(t,e,n,r){},Af.prototype.merge=function(t,e,n,r){},Af.prototype.refreshAuthToken=function(t){},Af.prototype.onDisconnectPut=function(t,e,n){},Af.prototype.onDisconnectMerge=function(t,e,n){},Af.prototype.onDisconnectCancel=function(t,e){},Af.prototype.reportStats=function(t){},Af);function Af(){}var kf,Of=1e3,Rf=3e5,Pf=(xs(Df,kf=Nf),Df.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(da(i)),Gs(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},Df.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Gs(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Gs(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)},Df.prototype.sendListen_=function(r){var i=this,o=r.query,s=o.path.toString(),a=o.queryIdentifier();this.log_("Listen on "+s+" for "+a);var t={p:s};r.tag&&(t.q=o.queryObject(),t.t=r.tag),t.h=r.hashFn(),this.sendRequest("q",t,function(t){var e=t.d,n=t.s;Df.warnOnListenWarnings_(e,o),(i.listens.get(s)&&i.listens.get(s).get(a))===r&&(i.log_("listen response",t),"ok"!==n&&i.removeListen_(s,a),r.onComplete&&r.onComplete(n,e))})},Df.warnOnListenWarnings_=function(t,e){var n;t&&"object"==typeof t&&ya(t,"w")&&(n=ga(t,"w"),Array.isArray(n)&&~n.indexOf("no_index")&&wu("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+('".indexOn": "'+e.getQueryParams().getIndex().toString()+'"')+" at "+e.path.toString()+" to your security rules for better performance."))},Df.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},Df.prototype.reduceReconnectDelayIfAdminCredential_=function(t){var e;(t&&40===t.length||"object"==typeof(e=va(t).claims)&&!0===e.admin)&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},Df.prototype.tryAuth=function(){var r,t,e,n,i=this;this.connected_&&this.authToken_&&(t=(n=va(r=this.authToken_).claims)&&"object"==typeof n&&n.hasOwnProperty("iat")?"auth":"gauth",e={cred:r},null===this.authOverride_?e.noauth=!0:"object"==typeof this.authOverride_&&(e.authvar=this.authOverride_),this.sendRequest(t,e,function(t){var e=t.s,n=t.d||"error";i.authToken_===r&&("ok"===e?i.invalidAuthTokenCount_=0:i.onAuthRevoked_(e,n))}))},Df.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Gs(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},Df.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},Df.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},Df.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},Df.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},Df.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},Df.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},Df.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},Df.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+e)},Df.prototype.sendPut_=function(e){var n=this,r=this.outstandingPuts_[e].action,t=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,t,function(t){n.log_(r+" response",t),delete n.outstandingPuts_[e],n.outstandingPutCount_--,0===n.outstandingPutCount_&&(n.outstandingPuts_=[]),i&&i(t.s,t.d)})},Df.prototype.reportStats=function(t){var e,n=this;this.connected_&&(e={c:t},this.log_("reportStats",e),this.sendRequest("s",e,function(t){var e;"ok"!==t.s&&(e=t.d,n.log_("reportStats","Error sending stats: "+e))}))},Df.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+da(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},Df.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):bu("Unrecognized action received from server: "+da(t)+"\nAre you using the latest client?")},Df.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},Df.prototype.scheduleConnect_=function(t){var e=this;Gs(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},Df.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Of,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},Df.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Of,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},Df.prototype.onRealtimeDisconnect_=function(){var t,e;this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()&&(this.visible_?this.lastConnectionEstablishedTime_&&(3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=Of),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime()),t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t),e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)),this.onConnectStatus_(!1)},Df.prototype.establishConnection_=function(){var e,n,r,i,o,s,a,u,c,t;this.shouldReconnect_()&&(this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Df.nextConnectionId_++,s=(o=this).lastSessionId,a=!1,u=null,c=function(){u?u.close():(a=!0,r())},this.realtime_={close:c,sendRequest:function(t){Gs(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)}},t=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(t).then(function(t){a?xu("getToken() completed but was canceled"):(xu("getToken() completed. Creating connection."),o.authToken_=t&&t.accessToken,u=new Sf(i,o.repoInfo_,o.applicationId_,e,n,r,function(t){wu(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},s))}).then(null,function(t){o.log_("Failed to get token: "+t),a||c()}))},Df.prototype.interrupt=function(t){xu("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},Df.prototype.resume=function(t){xu("Resuming connection for reason: "+t),delete this.interruptReasons_[t],ma(this.interruptReasons_)&&(this.reconnectDelay_=Of,this.realtime_||this.scheduleConnect_(0))},Df.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},Df.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},Df.prototype.onListenRevoked_=function(t,e){var n=e?e.map(function(t){return ju(t)}).join("$"):"default",r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},Df.prototype.removeListen_=function(t,e){var n,r,i=new Ku(t).toString();return this.listens.has(i)?(r=(n=this.listens.get(i)).get(e),n.delete(e),0===n.size&&this.listens.delete(i)):r=void 0,r},Df.prototype.onAuthRevoked_=function(t,e){xu("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},Df.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},Df.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=Us(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,Us(s.values())),u=a.next();!u.done;u=a.next()){var c=u.value;this.sendListen_(c)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}},Df.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+bf.replace(/\./g,"-")]=1,Zs()?t["framework.cordova"]=1:ea()&&(t["framework.reactnative"]=1),this.reportStats(t)},Df.prototype.shouldReconnect_=function(){var t=cf.getInstance().currentlyOnline();return ma(this.interruptReasons_)&&t},Df.nextPersistentConnectionId_=0,Df.nextConnectionId_=0,Df);function Df(t,e,n,r,i,o,s){var a=kf.call(this)||this;if(a.repoInfo_=t,a.applicationId_=e,a.onDataUpdate_=n,a.onConnectStatus_=r,a.onServerInfoUpdate_=i,a.authTokenProvider_=o,a.authOverride_=s,a.id=Df.nextPersistentConnectionId_++,a.log_=Lu("p:"+a.id+":"),a.interruptReasons_={},a.listens=new Map,a.outstandingPuts_=[],a.outstandingPutCount_=0,a.onDisconnectRequestQueue_=[],a.connected_=!1,a.reconnectDelay_=Of,a.maxReconnectDelay_=Rf,a.securityDebugCallback_=null,a.lastSessionId=null,a.establishConnectionTimer_=null,a.visible_=!1,a.requestCBHash_={},a.requestNumber_=0,a.realtime_=null,a.authToken_=null,a.forceTokenRefresh_=!1,a.invalidAuthTokenCount_=0,a.firstConnection_=!0,a.lastConnectionAttemptTime_=null,a.lastConnectionEstablishedTime_=null,s&&!na())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return a.scheduleConnect_(0),sf.getInstance().on("visible",a.onVisible_,a),-1===t.host.indexOf("fblocal")&&cf.getInstance().on("online",a.onOnline_,a),a}var xf,Lf=(xs(Mf,xf=Nf),Mf.prototype.reportStats=function(t){throw new Error("Method not implemented.")},Mf.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Gs(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},Mf.prototype.listen=function(t,e,r,i){var o=this,s=t.path.toString();this.log_("Listen called for "+s+" "+t.queryIdentifier());var a=Mf.getListenId_(t,r),u={};this.listens_[a]=u;var n=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(s+".json",n,function(t,e){var n=e;404===t&&(t=n=null),null===t&&o.onDataUpdate_(s,n,!1,r),ga(o.listens_,a)===u&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},Mf.prototype.unlisten=function(t,e){var n=Mf.getListenId_(t,e);delete this.listens_[n]},Mf.prototype.refreshAuthToken=function(t){},Mf.prototype.restRequest_=function(i,o,s){var a=this;void 0===o&&(o={}),o.format="export",this.authTokenProvider_.getToken(!1).then(function(t){var e=t&&t.accessToken;e&&(o.auth=e);var n=(a.repoInfo_.secure?"https://":"http://")+a.repoInfo_.host+i+"?ns="+a.repoInfo_.namespace+function(){for(var n=[],t=0,e=Object.entries(o);t<e.length;t++){var r=e[t];!function(e,t){Array.isArray(t)?t.forEach(function(t){n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}):n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}(r[0],r[1])}return n.length?"&"+n.join("&"):""}();a.log_("Sending REST request for "+n);var r=new XMLHttpRequest;r.onreadystatechange=function(){if(s&&4===r.readyState){a.log_("REST Response for "+n+" received. status:",r.status,"response:",r.responseText);var t=null;if(200<=r.status&&r.status<300){try{t=pa(r.responseText)}catch(t){wu("Failed to parse JSON response for "+n+": "+r.responseText)}s(null,t)}else 401!==r.status&&404!==r.status&&wu("Got unsuccessful REST response for "+n+" Status: "+r.status),s(r.status);s=null}},r.open("GET",n,!0),r.send()})},Mf);function Mf(t,e,n){var r=xf.call(this)||this;return r.repoInfo_=t,r.onDataUpdate_=e,r.authTokenProvider_=n,r.log_=Lu("p:rest:"),r.listens_={},r}var Ff="repo_interrupt",Uf=(jf.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},jf.prototype.name=function(){return this.repoInfo_.namespace},jf.prototype.serverTime=function(){var t=this.infoData_.getNode(new Ku(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},jf.prototype.generateServerValues=function(){return(t={timestamp:this.serverTime()}).timestamp=t.timestamp||(new Date).getTime(),t;var t},jf.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new Ku(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o,s,a,u,c,h=i;0<(c=r?n?(o=ba(e,function(t){return gh(t)}),this.serverSyncTree_.applyTaggedQueryMerge(i,o,r)):(s=gh(e),this.serverSyncTree_.applyTaggedQueryOverwrite(i,s,r)):n?(a=ba(e,function(t){return gh(t)}),this.serverSyncTree_.applyServerMerge(i,a)):(u=gh(e),this.serverSyncTree_.applyServerOverwrite(i,u))).length&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,c)},jf.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},jf.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},jf.prototype.onServerInfoUpdate_=function(t){var n=this;Vu(t,function(t,e){n.updateInfo_(t,e)})},jf.prototype.updateInfo_=function(t,e){var n=new Ku("/.info/"+t),r=gh(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},jf.prototype.getNextWriteId_=function(){return this.nextWriteId_++},jf.prototype.setWithPriority=function(i,t,e,o){var s=this;this.log_("set",{path:i.toString(),value:t,priority:e});var n=this.generateServerValues(),r=gh(t,e),a=qh(r,this.serverSyncTree_.calcCompleteEventCache(i),n),u=this.getNextWriteId_(),c=this.serverSyncTree_.applyUserOverwrite(i,a,u,!0);this.eventQueue_.queueEvents(c),this.server_.put(i.toString(),r.val(!0),function(t,e){var n="ok"===t;n||wu("set at "+i+" failed: "+t);var r=s.serverSyncTree_.ackUserWrite(u,!n);s.eventQueue_.raiseEventsForChangedPath(i,r),s.callOnCompleteCallback(o,t,e)});var h=this.abortTransactions_(i);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},jf.prototype.update=function(o,t,s){var a=this;this.log_("update",{path:o.toString(),value:t});var u,e,n=!0,r=this.generateServerValues(),i={};Vu(t,function(t,e){n=!1,i[t]=Vh(o.child(t),gh(e),a.serverSyncTree_,r)}),n?(xu("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(s,"ok")):(u=this.getNextWriteId_(),e=this.serverSyncTree_.applyUserMerge(o,i,u),this.eventQueue_.queueEvents(e),this.server_.merge(o.toString(),t,function(t,e){var n="ok"===t;n||wu("update at "+o+" failed: "+t);var r=a.serverSyncTree_.ackUserWrite(u,!n),i=0<r.length?a.rerunTransactions_(o):o;a.eventQueue_.raiseEventsForChangedPath(i,r),a.callOnCompleteCallback(s,t,e)}),Vu(t,function(t){var e=a.abortTransactions_(o.child(t));a.rerunTransactions_(e)}),this.eventQueue_.raiseEventsForChangedPath(o,[]))},jf.prototype.runOnDisconnectEvents_=function(){var r=this;this.log_("onDisconnectEvents");var i=this.generateServerValues(),o=new Qh;this.onDisconnect_.forEachTree(Ku.Empty,function(t,e){var n=Vh(t,e,r.serverSyncTree_,i);o.remember(t,n)});var s=[];o.forEachTree(Ku.Empty,function(t,e){s=s.concat(r.serverSyncTree_.applyServerOverwrite(t,e));var n=r.abortTransactions_(t);r.rerunTransactions_(n)}),this.onDisconnect_=new Qh,this.eventQueue_.raiseEventsForChangedPath(Ku.Empty,s)},jf.prototype.onDisconnectCancel=function(n,r){var i=this;this.server_.onDisconnectCancel(n.toString(),function(t,e){"ok"===t&&i.onDisconnect_.forget(n),i.callOnCompleteCallback(r,t,e)})},jf.prototype.onDisconnectSet=function(n,t,r){var i=this,o=gh(t);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},jf.prototype.onDisconnectSetWithPriority=function(n,t,e,r){var i=this,o=gh(t,e);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},jf.prototype.onDisconnectUpdate=function(r,n,i){var o=this;if(ma(n))return xu("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(i,"ok");this.server_.onDisconnectMerge(r.toString(),n,function(t,e){"ok"===t&&Vu(n,function(t,e){var n=gh(e);o.onDisconnect_.remember(r.child(t),n)}),o.callOnCompleteCallback(i,t,e)})},jf.prototype.addEventCallbackForQuery=function(t,e){var n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e);this.eventQueue_.raiseEventsAtPath(t.path,n)},jf.prototype.removeEventCallbackForQuery=function(t,e){var n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e);this.eventQueue_.raiseEventsAtPath(t.path,n)},jf.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(Ff)},jf.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(Ff)},jf.prototype.stats=function(t){var e,i;void 0===t&&(t=!1),"undefined"!=typeof console&&(e=t?(this.statsListener_||(this.statsListener_=new Ql(this.stats_)),this.statsListener_.get()):this.stats_.get(),i=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0),Vu(e,function(t,e){for(var n=t,r=t.length;r<i+2;r++)n+=" ";console.log(n+e)}))},jf.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},jf.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),xu.apply(void 0,Vs([n],t))},jf.prototype.callOnCompleteCallback=function(r,i,o){r&&Bu(function(){var t,e,n;"ok"===i?r(null):(e=t=(i||"error").toUpperCase(),o&&(e+=": "+o),(n=new Error(e)).code=t,r(n))})},Object.defineProperty(jf.prototype,"database",{get:function(){return this.__database||(this.__database=new sp(this))},enumerable:!1,configurable:!0}),jf);function jf(t,e,n,r){var s=this;if(this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new $l,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new Qh,this.persistentConnection_=null,this.stats_=Kl.getCollection(t),e||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))this.server_=new Lf(this.repoInfo_,this.onDataUpdate_.bind(this),r),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var i=n.options.databaseAuthVariableOverride;if(null!=i){if("object"!=typeof i)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{da(i)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new Pf(this.repoInfo_,n.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),r,i),this.server_=this.persistentConnection_}r.addTokenChangeListener(function(t){s.server_.refreshAuthToken(t)}),this.statsReporter_=Kl.getOrCreateReporter(t,function(){return new Yl(s.stats_,s.server_)}),this.transactionsInit_(),this.infoData_=new Bl,this.infoSyncTree_=new Vl({startListening:function(t,e,n,r){var i=[],o=s.infoData_.getNode(t.path);return o.isEmpty()||(i=s.infoSyncTree_.applyServerOverwrite(t.path,o),setTimeout(function(){r("ok")},0)),i},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Vl({startListening:function(r,t,e,i){return s.server_.listen(r,e,t,function(t,e){var n=i(t,e);s.eventQueue_.raiseEventsForChangedPath(r.path,n)}),[]},stopListening:function(t,e){s.server_.unlisten(t,e)}})}var Vf=(qf.prototype.getStartPost=function(){return this.startPost_},qf.prototype.getEndPost=function(){return this.endPost_},qf.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},qf.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Sc(e,n))||(n=lh.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},qf.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=lh.EMPTY_NODE);var r=(r=e.withIndex(this.index_)).updatePriority(lh.EMPTY_NODE),i=this;return e.forEachChild(Hc,function(t,e){i.matches(new Sc(t,e))||(r=r.updateImmediateChild(t,lh.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},qf.prototype.updatePriority=function(t,e){return t},qf.prototype.filtersNodes=function(){return!0},qf.prototype.getIndexedFilter=function(){return this.indexedFilter_},qf.prototype.getIndex=function(){return this.index_},qf.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},qf.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},qf);function qf(t){this.indexedFilter_=new vl(t.getIndex()),this.index_=t.getIndex(),this.startPost_=qf.getStartPost_(t),this.endPost_=qf.getEndPost_(t)}var Bf=(Wf.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Sc(e,n))||(n=lh.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},Wf.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=lh.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=lh.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(lh.EMPTY_NODE);for(var a,u=void 0,c=void 0,h=void 0,i=void 0,h=this.reverse_?(i=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost(),a=this.index_.getCompare(),function(t,e){return a(e,t)}):(i=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),this.index_.getCompare()),o=0,l=!1;i.hasNext();)s=i.getNext(),!l&&h(u,s)<=0&&(l=!0),l&&o<this.limit_&&h(s,c)<=0?o++:r=r.updateImmediateChild(s.name,lh.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},Wf.prototype.updatePriority=function(t,e){return t},Wf.prototype.filtersNodes=function(){return!0},Wf.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},Wf.prototype.getIndex=function(){return this.index_},Wf.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o,s=this.reverse_?(o=this.index_.getCompare(),function(t,e){return o(e,t)}):this.index_.getCompare(),a=t;Gs(a.numChildren()===this.limit_,"");var u=new Sc(e,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(a.hasChild(e)){for(var l=a.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,u);if(h&&!n.isEmpty()&&0<=p)return null!=i&&i.trackChildChange(pl.childChangedChange(e,n,l)),a.updateImmediateChild(e,n);null!=i&&i.trackChildChange(pl.childRemovedChange(e,l));var d=a.updateImmediateChild(e,lh.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(pl.childAddedChange(f.name,f.node)),d.updateImmediateChild(f.name,f.node)):d}return!n.isEmpty()&&h&&0<=s(c,u)?(null!=i&&(i.trackChildChange(pl.childRemovedChange(c.name,c.node)),i.trackChildChange(pl.childAddedChange(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(c.name,lh.EMPTY_NODE)):t},Wf);function Wf(t){this.rangedFilter_=new Vf(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}var Hf=(Gf.prototype.hasStart=function(){return this.startSet_},Gf.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===Gf.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},Gf.prototype.getIndexStartValue=function(){return Gs(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},Gf.prototype.getIndexStartName=function(){return Gs(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Mu},Gf.prototype.hasEnd=function(){return this.endSet_},Gf.prototype.getIndexEndValue=function(){return Gs(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},Gf.prototype.getIndexEndName=function(){return Gs(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Fu},Gf.prototype.hasLimit=function(){return this.limitSet_},Gf.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},Gf.prototype.getLimit=function(){return Gs(this.limitSet_,"Only valid if limit has been set"),this.limit_},Gf.prototype.getIndex=function(){return this.index_},Gf.prototype.copy_=function(){var t=new Gf;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},Gf.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},Gf.prototype.limitToFirst=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=Gf.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,e},Gf.prototype.limitToLast=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=Gf.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,e},Gf.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},Gf.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},Gf.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},Gf.prototype.getQueryObject=function(){var t,e=Gf.WIRE_PROTOCOL_CONSTANTS_,n={};return this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_&&(n[e.LIMIT]=this.limit_,""===(t=this.viewFrom_)&&(t=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=t),this.index_!==Hc&&(n[e.INDEX]=this.index_.toString()),n},Gf.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},Gf.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Hc},Gf.prototype.getNodeFilter=function(){return this.loadsAllData()?new vl(this.getIndex()):new(this.hasLimit()?Bf:Vf)(this)},Gf.prototype.toRestQueryStringParameters=function(){var t,e=Gf.REST_QUERY_CONSTANTS_,n={};return this.isDefault()||(t=this.index_===Hc?e.PRIORITY_INDEX:this.index_===_h?e.VALUE_INDEX:this.index_===xc?e.KEY_INDEX:(Gs(this.index_ instanceof wh,"Unrecognized index type!"),this.index_.toString()),n[e.ORDER_BY]=da(t),this.startSet_&&(n[e.START_AT]=da(this.indexStartValue_),this.startNameSet_&&(n[e.START_AT]+=","+da(this.indexStartName_))),this.endSet_&&(n[e.END_AT]=da(this.indexEndValue_),this.endNameSet_&&(n[e.END_AT]+=","+da(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[e.LIMIT_TO_FIRST]=this.limit_:n[e.LIMIT_TO_LAST]=this.limit_)),n},Gf.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},Gf.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},Gf.DEFAULT=new Gf,Gf);function Gf(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Hc}var Kf,zf=(xs(Qf,Kf=xh),Qf.prototype.getKey=function(){return Ca("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},Qf.prototype.child=function(t){var e,n;return Ca("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof Ku||(null===this.path.getFront()?(n=!1,hc("Reference.child",1,e=(e=t)&&e.replace(/^\/*\.info(\/|$)/,"/"),n)):hc("Reference.child",1,t,!1)),new Qf(this.repo,this.path.child(t))},Qf.prototype.getParent=function(){Ca("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new Qf(this.repo,t)},Qf.prototype.getRoot=function(){Ca("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},Qf.prototype.databaseProp=function(){return this.repo.database},Qf.prototype.set=function(t,e){Ca("Reference.set",1,2,arguments.length),lc("Reference.set",this.path),oc("Reference.set",1,t,this.path,!1),Aa("Reference.set",2,e,!0);var n=new Ys;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},Qf.prototype.update=function(t,e){if(Ca("Reference.update",1,2,arguments.length),lc("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,wu("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}sc("Reference.update",1,t,this.path,!1),Aa("Reference.update",2,e,!0);var i=new Ys;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},Qf.prototype.setWithPriority=function(t,e,n){if(Ca("Reference.setWithPriority",2,3,arguments.length),lc("Reference.setWithPriority",this.path),oc("Reference.setWithPriority",1,t,this.path,!1),ac("Reference.setWithPriority",2,e,!1),Aa("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new Ys;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},Qf.prototype.remove=function(t){return Ca("Reference.remove",0,1,arguments.length),lc("Reference.remove",this.path),Aa("Reference.remove",1,t,!0),this.set(null,t)},Qf.prototype.transaction=function(t,r,e){if(Ca("Reference.transaction",1,3,arguments.length),lc("Reference.transaction",this.path),Aa("Reference.transaction",1,t,!1),Aa("Reference.transaction",2,r,!0),function(){if(void 0!==e&&"boolean"!=typeof e)throw new Error(Na("Reference.transaction",3,!0)+"must be a boolean.")}(),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===e&&(e=!0);var i=new Ys;return"function"==typeof r&&i.promise.catch(function(){}),this.repo.startTransaction(this.path,t,function(t,e,n){t?i.reject(t):i.resolve(new bc(e,n)),"function"==typeof r&&r(t,e,n)},e),i.promise},Qf.prototype.setPriority=function(t,e){Ca("Reference.setPriority",1,2,arguments.length),lc("Reference.setPriority",this.path),ac("Reference.setPriority",1,t,!1),Aa("Reference.setPriority",2,e,!0);var n=new Ys;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},Qf.prototype.push=function(t,e){Ca("Reference.push",0,2,arguments.length),lc("Reference.push",this.path),oc("Reference.push",1,t,this.path,!0),Aa("Reference.push",2,e,!0);var n=this.repo.serverTime(),r=Tc(n),i=this.child(r),o=this.child(r),s=null!=t?i.set(t,e).then(function(){return o}):Promise.resolve(o);return i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),"function"==typeof e&&s.catch(function(){}),i},Qf.prototype.onDisconnect=function(){return lc("Reference.onDisconnect",this.path),new gc(this.repo,this.path)},Object.defineProperty(Qf.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(Qf.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(Qf.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(Qf.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),Qf);function Qf(t,e){if(!(t instanceof Uf))throw new Error("new Reference() no longer supported - use app.database().");return Kf.call(this,t,e,Hf.DEFAULT,!1)||this}xh.__referenceConstructor=zf,Rl.__referenceConstructor=zf;function Xf(){this.children={},this.childCount=0,this.value=null}var Yf,Jf,$f=(Zf.prototype.subTree=function(t){for(var e=t instanceof Ku?t:new Ku(t),n=this,r=e.getFront();null!==r;)n=new Zf(r,n,ga(n.node_.children,r)||new Xf),r=(e=e.popFront()).getFront();return n},Zf.prototype.getValue=function(){return this.node_.value},Zf.prototype.setValue=function(t){Gs(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},Zf.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},Zf.prototype.hasChildren=function(){return 0<this.node_.childCount},Zf.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},Zf.prototype.forEachChild=function(n){var r=this;Vu(this.node_.children,function(t,e){n(new Zf(t,r,e))})},Zf.prototype.forEachDescendant=function(e,t,n){t&&!n&&e(this),this.forEachChild(function(t){t.forEachDescendant(e,!0,n)}),t&&n&&e(this)},Zf.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},Zf.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild(function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)})},Zf.prototype.path=function(){return new Ku(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},Zf.prototype.name=function(){return this.name_},Zf.prototype.parent=function(){return this.parent_},Zf.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},Zf.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=ya(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},Zf);function Zf(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new Xf),this.name_=t,this.parent_=e,this.node_=n}(Jf=Yf=Yf||{})[Jf.RUN=0]="RUN",Jf[Jf.SENT=1]="SENT",Jf[Jf.COMPLETED=2]="COMPLETED",Jf[Jf.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",Jf[Jf.NEEDS_ABORT=4]="NEEDS_ABORT",Uf.MAX_TRANSACTION_RETRIES_=25,Uf.prototype.transactionsInit_=function(){this.transactionQueueTree_=new $f},Uf.prototype.startTransaction=function(t,e,n,r){function i(){}this.log_("transaction on "+t);var o=new zf(this,t);o.on("value",i);var s={path:t,update:e,onComplete:n,status:null,order:Ou(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=this.getLatestState_(t);s.currentInputSnapshot=a;var u,c,h,l,f,p,d,v,y=s.update(a.val());void 0===y?(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&(u=new Ih(s.currentInputSnapshot,new zf(this,s.path),Hc),s.onComplete(null,!1,u))):(yc("transaction failed: Data returned ",y,s.path),s.status=Yf.RUN,(h=(c=this.transactionQueueTree_.subTree(t)).getValue()||[]).push(s),c.setValue(h),l=void 0,"object"==typeof y&&null!==y&&ya(y,".priority")?(l=ga(y,".priority"),Gs(ic(l),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):l=(this.serverSyncTree_.calcCompleteEventCache(t)||lh.EMPTY_NODE).getPriority().val(),f=this.generateServerValues(),d=qh(p=gh(y,l),a,f),s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=d,s.currentWriteId=this.getNextWriteId_(),v=this.serverSyncTree_.applyUserOverwrite(t,d,s.currentWriteId,s.applyLocally),this.eventQueue_.raiseEventsForChangedPath(t,v),this.sendReadyTransactions_())},Uf.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||lh.EMPTY_NODE},Uf.prototype.sendReadyTransactions_=function(t){var e,n=this;void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()?(e=this.buildTransactionQueue_(t),Gs(0<e.length,"Sending zero length transaction queue"),e.every(function(t){return t.status===Yf.RUN})&&this.sendTransactionQueue_(t.path(),e)):t.hasChildren()&&t.forEachChild(function(t){n.sendReadyTransactions_(t)})},Uf.prototype.sendTransactionQueue_=function(a,u){for(var c=this,t=u.map(function(t){return t.currentWriteId}),e=this.getLatestState_(a,t),n=e,r=e.hash(),i=0;i<u.length;i++){var o=u[i];Gs(o.status===Yf.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),o.status=Yf.SENT,o.retryCount++;var s=Ku.relativePath(a,o.path),n=n.updateChild(s,o.currentOutputSnapshotRaw)}var h=n.val(!0),l=a;this.server_.put(l.toString(),h,function(t){c.log_("transaction put response",{path:l.toString(),status:t});var e=[];if("ok"===t){for(var n,r,i,o=[],s=0;s<u.length;s++)u[s].status=Yf.COMPLETED,e=e.concat(c.serverSyncTree_.ackUserWrite(u[s].currentWriteId)),u[s].onComplete&&(n=u[s].currentOutputSnapshotResolved,r=new zf(c,u[s].path),i=new Ih(n,r,Hc),o.push(u[s].onComplete.bind(null,null,!0,i))),u[s].unwatcher();for(c.pruneCompletedTransactionsBelowNode_(c.transactionQueueTree_.subTree(a)),c.sendReadyTransactions_(),c.eventQueue_.raiseEventsForChangedPath(a,e),s=0;s<o.length;s++)Bu(o[s])}else{if("datastale"===t)for(s=0;s<u.length;s++)u[s].status===Yf.SENT_NEEDS_ABORT?u[s].status=Yf.NEEDS_ABORT:u[s].status=Yf.RUN;else for(wu("transaction at "+l.toString()+" failed: "+t),s=0;s<u.length;s++)u[s].status=Yf.NEEDS_ABORT,u[s].abortReason=t;c.rerunTransactions_(a)}},r)},Uf.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},Uf.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n,r=[],i=[],o=t.filter(function(t){return t.status===Yf.RUN}).map(function(t){return t.currentWriteId}),s=0;s<t.length;s++){var a,u,c,h,l,f,p,d,v=t[s],y=Ku.relativePath(e,v.path),g=!1,m=void 0;Gs(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),v.status===Yf.NEEDS_ABORT?(g=!0,m=v.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(v.currentWriteId,!0))):v.status===Yf.RUN&&(i=v.retryCount>=Uf.MAX_TRANSACTION_RETRIES_?(g=!0,m="maxretry",i.concat(this.serverSyncTree_.ackUserWrite(v.currentWriteId,!0))):(a=this.getLatestState_(v.path,o),v.currentInputSnapshot=a,void 0!==(u=t[s].update(a.val()))?(yc("transaction failed: Data returned ",u,v.path),c=gh(u),"object"==typeof u&&null!=u&&ya(u,".priority")||(c=c.updatePriority(a.getPriority())),h=v.currentWriteId,l=qh(c,a,this.generateServerValues()),v.currentOutputSnapshotRaw=c,v.currentOutputSnapshotResolved=l,v.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(h),1),(i=i.concat(this.serverSyncTree_.applyUserOverwrite(v.path,l,v.currentWriteId,v.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(h,!0))):(g=!0,m="nodata",i.concat(this.serverSyncTree_.ackUserWrite(v.currentWriteId,!0))))),this.eventQueue_.raiseEventsForChangedPath(e,i),i=[],g&&(t[s].status=Yf.COMPLETED,n=t[s].unwatcher,setTimeout(n,Math.floor(0)),t[s].onComplete&&("nodata"===m?(f=new zf(this,t[s].path),p=t[s].currentInputSnapshot,d=new Ih(p,f,Hc),r.push(t[s].onComplete.bind(null,null,!1,d))):r.push(t[s].onComplete.bind(null,new Error(m),!1,null))))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),s=0;s<r.length;s++)Bu(r[s]);this.sendReadyTransactions_()}},Uf.prototype.getAncestorTransactionNode_=function(t){for(var e=this.transactionQueueTree_,n=t.getFront();null!==n&&null===e.getValue();)e=e.subTree(n),n=(t=t.popFront()).getFront();return e},Uf.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},Uf.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},Uf.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==Yf.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(0<n.length?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},Uf.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},Uf.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)e[o].status===Yf.SENT_NEEDS_ABORT||(e[o].status===Yf.SENT?(Gs(i===o-1,"All SENT items should be at beginning of queue."),e[i=o].status=Yf.SENT_NEEDS_ABORT,e[o].abortReason="set"):(Gs(e[o].status===Yf.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete&&n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r),o=0;o<n.length;o++)Bu(n[o])}};var tp=(ep.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(xu("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},ep.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):(setTimeout(function(){return e(null)},0),this.authProvider_.get().then(function(t){return t.addAuthTokenListener(e)}))},ep.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then(function(t){return t.removeAuthTokenListener(e)})},ep.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',wu(t)},ep);function ep(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}var np,rp="databaseURL",ip=(op.getInstance=function(){return np=np||new op},op.prototype.interrupt=function(){var t,e,n,r;try{for(var i=Us(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,Us(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].interrupt()}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},op.prototype.resume=function(){var t,e,n,r;try{for(var i=Us(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,Us(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].resume()}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},op.prototype.databaseFromApp=function(t,e,n){var r=n||t.options[rp];void 0===r&&_u("Can't determine Firebase Database URL.  Be sure to include "+rp+" option when calling firebase.initializeApp().");var i=ec(r),o=i.repoInfo,s=void 0;"undefined"!=typeof process&&(s=process.env.FIREBASE_DATABASE_EMULATOR_HOST),s?o=(i=ec(r="http://"+s+"?ns="+o.namespace)).repoInfo:i.repoInfo.secure;var a=new tp(t,e);return fc("Invalid Firebase Database URL",1,i),i.path.isEmpty()||_u("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(o,t,a).database},op.prototype.deleteRepo=function(t){var e=ga(this.repos_,t.app.name);e&&ga(e,t.repoInfo_.toURLString())===t||_u("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},op.prototype.createRepo=function(t,e,n){var r=ga(this.repos_,e.name);r||(r={},this.repos_[e.name]=r);var i=ga(r,t.toURLString());return i&&_u("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Uf(t,this.useRestClient_,e,n),r[t.toURLString()]=i},op.prototype.forceRestClient=function(t){this.useRestClient_=t},op);function op(){this.repos_={},this.useRestClient_=!1}var sp=(Object.defineProperty(ap.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),ap.prototype.ref=function(t){return this.checkDeleted_("ref"),Ca("database.ref",0,1,arguments.length),t instanceof zf?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},ap.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Ca(e,1,1,arguments.length);var n=ec(t);fc(e,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&_u(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},ap.prototype.checkDeleted_=function(t){null===this.repo_&&_u("Cannot call "+t+" on a deleted database.")},ap.prototype.goOffline=function(){Ca("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},ap.prototype.goOnline=function(){Ca("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},ap.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},ap);function ap(t){(this.repo_=t)instanceof Uf||_u("Don't call new Database() directly - please use firebase.database()."),this.root_=new zf(t,Ku.Empty),this.INTERNAL=new up(this)}var up=(cp.prototype.delete=function(){return Ms(this,void 0,void 0,function(){return Fs(this,function(t){return this.database.checkDeleted_("delete"),ip.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})})},cp);function cp(t){this.database=t}var hp=Object.freeze({__proto__:null,forceLongPolling:function(){wf.forceDisallow(),vf.forceAllow()},forceWebSockets:function(){vf.forceDisallow()},isWebSocketsAvailable:function(){return wf.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)}}),lp=Pf;Pf.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Pf.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var fp,pp=Object.freeze({__proto__:null,DataConnection:lp,RealTimeConnection:Sf,hijackHash:function(i){var o=Pf.prototype.put;return Pf.prototype.put=function(t,e,n,r){void 0!==r&&(r=i()),o.call(this,t,e,n,r)},function(){Pf.prototype.put=o}},ConnectionTarget:Zu,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){ip.getInstance().forceRestClient(t)}}),dp=sp.ServerValue,bf=(fp=Ll).SDK_VERSION;fp.INTERNAL.registerComponent(new Ra("database",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return ip.getInstance().databaseFromApp(n,r,e)},"PUBLIC").setServiceProps({Reference:zf,Query:xh,Database:sp,DataSnapshot:Ih,enableLogging:mu,INTERNAL:hp,ServerValue:dp,TEST_ACCESS:pp}).setMultipleInstances(!0)),fp.registerVersion("@firebase/database","0.6.11-202071122108");var vp=function(t,e){return(vp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function yp(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var gp,mp="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},bp=mp||self;function _p(){}function wp(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function Ep(t){var e=wp(t);return"array"==e||"object"==e&&"number"==typeof t.length}function Ip(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Tp="closure_uid_"+(1e9*Math.random()>>>0),Sp=0;function Cp(t,e,n){return t.call.apply(t.bind,arguments)}function Np(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function Ap(t,e,n){return(Ap=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Cp:Np).apply(null,arguments)}function kp(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var Op=Date.now;function Rp(t,e){function n(){}n.prototype=e.prototype,t.S=e.prototype,t.prototype=new n,t.prototype.constructor=t}function Pp(){this.j=this.j,this.i=this.i}Pp.prototype.j=!1,Pp.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&(Object.prototype.hasOwnProperty.call(this,Tp)&&this[Tp]||(this[Tp]=++Sp))},Pp.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Dp=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},xp=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Lp(){return Array.prototype.concat.apply([],arguments)}function Mp(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Fp(t){return/^[\s\xa0]*$/.test(t)}var Up,jp=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Vp(t,e){return-1!=t.indexOf(e)}function qp(t,e){return t<e?-1:e<t?1:0}t:{var Bp=bp.navigator;if(Bp){var Wp=Bp.userAgent;if(Wp){Up=Wp;break t}}Up=""}function Hp(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Gp(t){var e={};for(var n in t)e[n]=t[n];return e}var Kp="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function zp(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<Kp.length;i++)e=Kp[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function Qp(t){return Qp[" "](t),t}Qp[" "]=_p;var Xp,Yp,Jp=Vp(Up,"Opera"),$p=Vp(Up,"Trident")||Vp(Up,"MSIE"),Zp=Vp(Up,"Edge"),td=Zp||$p,ed=Vp(Up,"Gecko")&&!(Vp(Up.toLowerCase(),"webkit")&&!Vp(Up,"Edge"))&&!(Vp(Up,"Trident")||Vp(Up,"MSIE"))&&!Vp(Up,"Edge"),nd=Vp(Up.toLowerCase(),"webkit")&&!Vp(Up,"Edge");function rd(){var t=bp.document;return t?t.documentMode:void 0}t:{var id="",od=(Yp=Up,ed?/rv:([^\);]+)(\)|;)/.exec(Yp):Zp?/Edge\/([\d\.]+)/.exec(Yp):$p?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Yp):nd?/WebKit\/(\S+)/.exec(Yp):Jp?/(?:Version)[ \/]?(\S+)/.exec(Yp):void 0);if(od&&(id=od?od[1]:""),$p){var sd=rd();if(null!=sd&&sd>parseFloat(id)){Xp=String(sd);break t}}Xp=id}var ad={};function ud(a){return t=a,e=function(){for(var t=0,e=jp(String(Xp)).split("."),n=jp(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=qp(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||qp(0==o[2].length,0==s[2].length)||qp(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t},n=ad,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e();var t,e,n}var cd=bp.document&&$p&&(rd()||parseInt(Xp,10))||void 0,hd=!$p||9<=Number(cd),ld=$p&&!ud("9"),fd=function(){if(!bp.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{bp.addEventListener("test",_p,e),bp.removeEventListener("test",_p,e)}catch(t){}return t}();function pd(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function dd(t,e){if(pd.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(ed){t:{try{Qp(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:vd[t.pointerType]||"",(this.c=t).defaultPrevented&&this.b()}}pd.prototype.b=function(){this.defaultPrevented=!0},Rp(dd,pd);var vd={2:"touch",3:"pen",4:"mouse"};dd.prototype.b=function(){dd.S.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ld)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var yd="closure_listenable_"+(1e6*Math.random()|0),gd=0;function md(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++gd,this.Y=this.Z=!1}function bd(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function _d(t){this.src=t,this.a={},this.b=0}function wd(t,e){var n,r,i,o=e.type;o in t.a&&(n=t.a[o],(i=0<=(r=Dp(n,e)))&&Array.prototype.splice.call(n,r,1),i&&(bd(e),0==t.a[o].length&&(delete t.a[o],t.b--)))}function Ed(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}_d.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Ed(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new md(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Id="closure_lm_"+(1e6*Math.random()|0),Td={};function Sd(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=Dd(r),e&&e[yd]?e.wa(n,r,Ip(i)?!!i.capture:!!i,o):Cd(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Sd(t,e[o],n,r,i);return null}return n=Dd(n),t&&t[yd]?t.va(e,n,Ip(r)?!!r.capture:!!r,i):Cd(t,e,n,!1,r,i)}function Cd(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Ip(i)?!!i.capture:!!i;if(s&&!hd)return null;var a,u,c=Rd(t);if(c||(t[Id]=c=new _d(t)),(n=c.add(e,n,r,s,o)).proxy)return n;if(a=Od,r=u=hd?function(t){return a.call(u.src,u.listener,t)}:function(t){if(!(t=a.call(u.src,u.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)fd||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Ad(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Nd(t){var e,n,r;"number"!=typeof t&&t&&!t.Y&&((e=t.src)&&e[yd]?wd(e.c,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Ad(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Rd(e))?(wd(n,t),0==n.b&&(n.src=null,e[Id]=null)):bd(t)))}function Ad(t){return t in Td?Td[t]:Td[t]="on"+t}function kd(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Nd(t),n.call(r,e)}function Od(t,e){if(t.Y)return!0;if(hd)return kd(t,new dd(e,this));if(!e)t:{e=["window","event"];for(var n=bp,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return kd(t,e=new dd(e,this))}function Rd(t){return(t=t[Id])instanceof _d?t:null}var Pd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dd(e){return"function"==wp(e)?e:(e[Pd]||(e[Pd]=function(t){return e.handleEvent(t)}),e[Pd])}function xd(){Pp.call(this),this.c=new _d(this),(this.J=this).C=null}function Ld(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,a,u=e[o];u&&!u.Y&&u.capture==n&&(s=u.listener,a=u.ca||u.src,u.Z&&wd(t.c,u),i=!1!==s.call(a,r)&&i)}return i&&!r.defaultPrevented}Rp(xd,Pp),xd.prototype[yd]=!0,(gp=xd.prototype).addEventListener=function(t,e,n,r){Sd(this,t,e,n,r)},gp.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=Ip(i)?!!i.capture:!!i,r=Dd(r),e&&e[yd]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=Ed(s=e.a[n],r,i,o))&&(bd(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):(e=e&&Rd(e))&&(n=e.a[n.toString()],e=-1,n&&(e=Ed(n,r,i,o)),(r=-1<e?n[e]:null)&&Nd(r))}(this,t,e,n,r)},gp.dispatchEvent=function(t){var e,n=this.C;if(n)for(e=[];n;n=n.C)e.push(n);n=this.J;var r=t.type||t;if("string"==typeof t?t=new pd(t,n):t instanceof pd?t.target=t.target||n:(s=t,zp(t=new pd(r,n),s)),s=!0,e)for(var i=e.length-1;0<=i;i--)var o=t.a=e[i],s=Ld(o,r,!0,t)&&s;if(s=Ld(o=t.a=n,r,!0,t)&&s,s=Ld(o,r,!1,t)&&s,e)for(i=0;i<e.length;i++)s=Ld(o=t.a=e[i],r,!1,t)&&s;return s},gp.G=function(){if(xd.S.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)bd(n[r]);delete e.a[t],e.b--}}this.C=null},gp.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},gp.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Md=bp.JSON.stringify;function Fd(){this.b=this.a=null}var Ud,jd=(Vd.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},new Vd(function(){return new qd},function(t){t.reset()},100));function Vd(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}function qd(){this.next=this.b=this.a=null}function Bd(t,e){var n;Ud||(n=bp.Promise.resolve(void 0),Ud=function(){n.then(Gd)}),Wd||(Ud(),Wd=!0),Hd.add(t,e)}Fd.prototype.add=function(t,e){var n=jd.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},qd.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var Wd=!(qd.prototype.reset=function(){this.next=this.b=this.a=null}),Hd=new Fd;function Gd(){for(var t,e,n;n=e=void 0,n=null,(e=Hd).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){!function(t){bp.setTimeout(function(){throw t},0)}(t)}var r=jd;r.g(t),r.b<r.f&&(r.b++,t.next=r.a,r.a=t)}Wd=!1}function Kd(t,e){xd.call(this),this.b=t||1,this.a=e||bp,this.f=Ap(this.Ya,this),this.g=Op()}function zd(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Qd(t,e,n){if("function"==wp(t))n&&(t=Ap(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Ap(t.handleEvent,t)}return 2147483647<Number(e)?-1:bp.setTimeout(t,e||0)}Rp(Kd,xd),(gp=Kd.prototype).aa=!1,gp.M=null,gp.Ya=function(){var t;this.aa&&(0<(t=Op()-this.g)&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),this.dispatchEvent("tick"),this.aa&&(zd(this),this.start())))},gp.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Op())},gp.G=function(){Kd.S.G.call(this),zd(this),delete this.a};var Xd,Yd,Jd,$d=(vp(Yd=tv,Jd=Xd=Pp),Yd.prototype=null===Jd?Object.create(Jd):(Zd.prototype=Jd.prototype,new Zd),tv.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:function t(e){e.a=Qd(function(){e.a=null,e.c&&(e.c=!1,t(e))},e.h);var n=e.b;e.b=null,e.g.apply(null,n)}(this)},tv.prototype.G=function(){Xd.prototype.G.call(this),this.a&&(bp.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},tv);function Zd(){this.constructor=Yd}function tv(t,e,n){var r=Xd.call(this)||this;return r.g=null!=n?t.bind(n):t,r.h=e,r.b=null,r.c=!1,r.a=null,r}function ev(t){Pp.call(this),this.b=t,this.a={}}Rp(ev,Pp);var nv=[];function rv(t,e,n,r){Array.isArray(n)||(n&&(nv[0]=n.toString()),n=nv);for(var i=0;i<n.length;i++){var o=Sd(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function iv(t){Hp(t.a,function(t,e){this.a.hasOwnProperty(e)&&Nd(t)},t),t.a={}}function ov(){this.a=!0}function sv(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(r.length<2)){var i=r[1];if(Array.isArray(i)&&!(i.length<1)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Md(n)}catch(t){return e}}(t,n)+(r?" "+r:"")})}ev.prototype.G=function(){ev.S.G.call(this),iv(this)},ev.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ov.prototype.info=function(){};var av=null;function uv(){return av=av||new xd}function cv(t){pd.call(this,"serverreachability",t)}function hv(){var t=uv();t.dispatchEvent(new cv(t))}function lv(t){pd.call(this,"statevent",t)}function fv(){var t=uv();t.dispatchEvent(new lv(t))}function pv(t){pd.call(this,"timingevent",t)}function dv(t,e){if("function"!=wp(t))throw Error("Fn must not be null and must be a function");return bp.setTimeout(function(){t()},e)}Rp(cv,pd),Rp(lv,pd),Rp(pv,pd);var vv={NO_ERROR:0,Za:1,gb:2,fb:3,bb:4,eb:5,hb:6,Da:7,TIMEOUT:8,kb:9},yv={ab:"complete",ob:"success",Ea:"error",Da:"abort",mb:"ready",nb:"readystatechange",TIMEOUT:"timeout",ib:"incrementaldata",lb:"progress",cb:"downloadprogress",pb:"uploadprogress"};function gv(){}function mv(t){var e;return(e=t.a)||(e=t.a={}),e}function bv(){}gv.prototype.a=null;var _v,wv={OPEN:"a",$a:"b",Ea:"c",jb:"d"};function Ev(){pd.call(this,"d")}function Iv(){pd.call(this,"c")}function Tv(){}function Sv(t,e,n,r){this.g=t,this.c=e,this.f=n,this.T=r||1,this.J=new ev(this),this.P=Cv,t=td?125:void 0,this.R=new Kd(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.U=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.W=this.C=this.V=this.I=!1}Rp(Ev,pd),Rp(Iv,pd),Rp(Tv,gv),_v=new Tv;var Cv=45e3,Nv={},Av={};function kv(t,e,n){t.H=1,t.i=Yv(Hv(e)),t.j=n,t.I=!0,Ov(t,null)}function Ov(t,e){t.u=Op(),Pv(t),t.l=Hv(t.i);var s,a,u,c,h,l,n=t.l,r=t.T;Array.isArray(r)||(r=[String(r)]),cy(n.b,"t",r),t.D=0,t.a=ng(t.g,t.g.C?e:null),0<t.O&&(t.F=new $d(Ap(t.Ca,t,t.a),t.O)),rv(t.J,t.a,"readystatechange",t.Wa),e=t.B?Gp(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),hv(),s=t.c,a=t.m,u=t.l,c=t.f,h=t.T,l=t.j,s.info(function(){if(s.a)if(l)for(var t="",e=l.split("&"),n=0;n<e.length;n++){var r,i,o=e[n].split("=");1<o.length&&(r=o[0],o=o[1],t=2<=(i=r.split("_")).length&&"type"==i[1]?t+(r+"=")+o+"&":t+(r+"=redacted&"))}else t=null;else t=l;return"XMLHTTP REQ ("+c+") [attempt "+h+"]: "+a+"\n"+u+"\n"+t})}function Rv(t,e,n){for(var r,i,o,s,a=!0;!t.A&&t.D<n.length;){var u=(i=n,s=o=void 0,o=(r=t).D,-1==(s=i.indexOf("\n",o))?Av:(o=Number(i.substring(o,s)),isNaN(o)?Nv:(s+=1)+o>i.length?Av:(i=i.substr(s,o),r.D=s+o,i)));if(u==Av){4==e&&(t.h=4,fv(),a=!1),sv(t.c,t.f,null,"[Incomplete Response]");break}if(u==Nv){t.h=4,fv(),sv(t.c,t.f,n,"[Invalid Chunk]"),a=!1;break}sv(t.c,t.f,u,null),Fv(t,u)}4==e&&0==n.length&&(t.h=1,fv(),a=!1),t.b=t.b&&a,a?0<n.length&&!t.W&&(t.W=!0,(e=t.g).a==t&&e.V&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Qy(e),e.F=!0)):(sv(t.c,t.f,n,"[Invalid Chunked Response]"),Mv(t),Lv(t))}function Pv(t){t.U=Op()+t.P,Dv(t,t.P)}function Dv(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=dv(Ap(t.Ua,t),e)}function xv(t){t.o&&(bp.clearTimeout(t.o),t.o=null)}function Lv(t){0==t.g.v||t.A||Jy(t.g,t)}function Mv(t){xv(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,zd(t.R),iv(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Fv(t,e){try{var n,r,i,o,s,a,u,c,h,l,f,p=t.g;if(0!=p.v&&(p.a==t||yy(p.b,t)))if(p.I=t.N,!t.C&&yy(p.b,t)&&3==p.v){try{var d=p.ka.a.parse(e)}catch(t){d=null}if(Array.isArray(d)&&3==d.length){var v=d;if(0==v[0]){t:if(!p.j){if(p.a){if(!(p.a.u+3e3<t.u))break t;Yy(p),jy(p)}zy(p),fv()}}else p.oa=v[1],0<p.oa-p.P&&v[2]<37500&&p.H&&0==p.o&&!p.m&&(p.m=dv(Ap(p.Ra,p),6e3));if(vy(p.b)<=1&&p.ea){try{p.ea()}catch(t){}p.ea=void 0}}else Zy(p,11)}else if(!t.C&&p.a!=t||Yy(p),!Fp(e))for(e=d=p.ka.a.parse(e),d=0;d<e.length;d++)v=e[d],p.P=v[0],v=v[1],2==p.v?"c"==v[0]?(p.J=v[1],p.ga=v[2],null!=(n=v[3])&&(p.ha=n,p.c.info("VER="+p.ha)),null!=(r=v[4])&&(p.pa=r,p.c.info("SVER="+p.pa)),null!=(i=v[5])&&"number"==typeof i&&0<i&&(o=1.5*i,p.D=o,p.c.info("backChannelRequestTimeoutMs_="+o)),o=p,(s=t.a)&&(!(a=s.a?s.a.getResponseHeader("X-Client-Wire-Protocol"):null)||!(u=o.b).a&&(Vp(a,"spdy")||Vp(a,"quic")||Vp(a,"h2"))&&(u.f=u.g,u.a=new Set,u.b&&(gy(u,u.b),u.b=null)),!o.A||(c=s.a?s.a.getResponseHeader("X-HTTP-Session-Id"):null)&&(o.na=c,Xv(o.B,o.A,c))),p.v=3,p.f&&p.f.ta(),p.V&&(p.N=Op()-t.u,p.c.info("Handshake RTT: "+p.N+"ms")),h=t,(o=p).la=eg(o,o.C?o.ga:null,o.fa),h.C?(my(o.b,h),l=h,(f=o.D)&&l.setTimeout(f),l.o&&(xv(l),Pv(l)),o.a=h):Ky(o),0<p.g.length&&By(p)):"stop"!=v[0]&&"close"!=v[0]||Zy(p,7):3==p.v&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?Zy(p,7):Uy(p):"noop"!=v[0]&&p.f&&p.f.sa(v),p.o=0);hv()}catch(t){}}function Uv(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Ep(t)||"string"==typeof t)xp(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Ep(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Ep(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function jv(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof jv)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Vv(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];qv(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)qv(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function qv(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(gp=Sv.prototype).setTimeout=function(t){this.P=t},gp.Wa=function(t){t=t.target;var e=this.F;e&&3==xy(t)?e.f():this.Ca(t)},gp.Ca=function(t){try{if(t==this.a)t:{var e=xy(this.a),n=this.a.ua();this.a.X();if(!(e<3||3==e&&!td&&!this.a.$())){this.A||4!=e||7==n||hv(),xv(this);var r=this.a.X();this.N=r;var i=this.a.$();if(this.b=200==r,u=this.c,c=this.m,h=this.l,l=this.f,f=this.T,p=e,d=r,u.info(function(){return"XMLHTTP RESP ("+l+") [ attempt "+f+"]: "+c+"\n"+h+"\n"+p+" "+d}),this.b){if(this.V&&!this.C){e:{if(this.a){var o,s=this.a;if((o=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Fp(o)){var a=o;break e}}a=null}if(!a){this.b=!1,this.h=3,fv(),Mv(this),Lv(this);break t}sv(this.c,this.f,a,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Fv(this,a)}this.I?(Rv(this,e,i),td&&this.b&&3==e&&(rv(this.J,this.R,"tick",this.Va),this.R.start())):(sv(this.c,this.f,i,null),Fv(this,i)),4==e&&Mv(this),this.b&&!this.A&&(4==e?Jy(this.g,this):(this.b=!1,Pv(this)))}else 400==r&&0<i.indexOf("Unknown SID")?this.h=3:this.h=0,fv(),Mv(this),Lv(this)}}}catch(t){}var u,c,h,l,f,p,d},gp.Va=function(){var t,e;this.a&&(t=xy(this.a),e=this.a.$(),this.D<e.length&&(xv(this),Rv(this,t,e),this.b&&4!=t&&Pv(this)))},gp.cancel=function(){this.A=!0,Mv(this)},gp.Ua=function(){this.o=null;var t,e,n=Op();0<=n-this.U?(t=this.c,e=this.l,t.info(function(){return"TIMEOUT: "+e}),2!=this.H&&(hv(),fv()),Mv(this),this.h=2,Lv(this)):Dv(this,this.U-n)},(gp=jv.prototype).K=function(){Vv(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},gp.L=function(){return Vv(this),this.a.concat()},gp.get=function(t,e){return qv(this.b,t)?this.b[t]:e},gp.set=function(t,e){qv(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},gp.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Bv=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Wv(t,e){var n;this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Wv?(this.a=void 0!==e?e:t.a,Gv(this,t.f),this.j=t.j,Kv(this,t.c),zv(this,t.h),this.g=t.g,e=t.b,(n=new oy).c=e.c,e.a&&(n.a=new jv(e.a),n.b=e.b),Qv(this,n),this.i=t.i):t&&(n=String(t).match(Bv))?(this.a=!!e,Gv(this,n[1]||"",!0),this.j=Jv(n[2]||""),Kv(this,n[3]||"",!0),zv(this,n[4]),this.g=Jv(n[5]||"",!0),Qv(this,n[6]||"",!0),this.i=Jv(n[7]||"")):(this.a=!!e,this.b=new oy(null,this.a))}function Hv(t){return new Wv(t)}function Gv(t,e,n){t.f=n?Jv(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Kv(t,e,n){t.c=n?Jv(e,!0):e}function zv(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Qv(t,e,n){var r,i;e instanceof oy?(t.b=e,r=t.b,(i=t.a)&&!r.f&&(sy(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(ay(this,e),cy(this,n,t))},r)),r.f=i):(n||(e=$v(e,ry)),t.b=new oy(e,t.a))}function Xv(t,e,n){t.b.set(e,n)}function Yv(t){return Xv(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Op()).toString(36)),t}function Jv(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function $v(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Zv),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Zv(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Wv.prototype.toString=function(){var t=[],e=this.f;e&&t.push($v(e,ty,!0),":");var n=this.c;return!n&&"file"!=e||(t.push("//"),(e=this.j)&&t.push($v(e,ty,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push($v(n,"/"==n.charAt(0)?ny:ey,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",$v(n,iy)),t.join("")};var ty=/[#\/\?@]/g,ey=/[#\?:]/g,ny=/[#\?]/g,ry=/[#\?@]/g,iy=/#/g;function oy(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function sy(a){a.a||(a.a=new jv,a.b=0,a.c&&function(t){if(t){t=t.split("&");for(var e=0;e<t.length;e++){var n,r=t[e].indexOf("="),i=null;0<=r?(n=t[e].substring(0,r),i=t[e].substring(r+1)):n=t[e],o=n,s=i?decodeURIComponent(i.replace(/\+/g," ")):"",a.add(decodeURIComponent(o.replace(/\+/g," ")),s)}}var o,s}(a.c))}function ay(t,e){sy(t),e=hy(t,e),qv(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,qv((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Vv(t)))}function uy(t,e){return sy(t),e=hy(t,e),qv(t.a.b,e)}function cy(t,e,n){ay(t,e),0<n.length&&(t.c=null,t.a.set(hy(t,e),Mp(n)),t.b+=n.length)}function hy(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function ly(t,e){this.b=t,this.a=e}function fy(t){this.g=t||py,t=bp.PerformanceNavigationTiming?0<(t=bp.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(bp.ia&&bp.ia.ya&&bp.ia.ya()&&bp.ia.ya().qb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(gp=oy.prototype).add=function(t,e){sy(this),this.c=null,t=hy(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},gp.forEach=function(n,r){sy(this),this.a.forEach(function(t,e){xp(t,function(t){n.call(r,t,e,this)},this)},this)},gp.L=function(){sy(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},gp.K=function(t){sy(this);var e=[];if("string"==typeof t)uy(this,t)&&(e=Lp(e,this.a.get(hy(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Lp(e,t[n])}return e},gp.set=function(t,e){return sy(this),this.c=null,uy(this,t=hy(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},gp.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},gp.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.K(r),o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.c=t.join("&")};var py=10;function dy(t){return t.b||t.a&&t.a.size>=t.f}function vy(t){return t.b?1:t.a?t.a.size:0}function yy(t,e){return t.b?t.b==e:t.a&&t.a.has(e)}function gy(t,e){t.a?t.a.add(e):t.b=e}function my(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function by(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null==t.a||0===t.a.size)return Mp(t.c);var r=t.c;try{for(var i=yp(t.a.values()),o=i.next();!o.done;o=i.next())var s=o.value,r=r.concat(s.s)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function _y(){}function wy(){this.a=new _y}function Ey(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}fy.prototype.cancel=function(){var t,e;if(this.c=by(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=yp(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},_y.prototype.stringify=function(t){return bp.JSON.stringify(t,void 0)},_y.prototype.parse=function(t){return bp.JSON.parse(t,void 0)};var Iy=bp.JSON.parse;function Ty(t){xd.call(this),this.headers=new jv,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Sy,this.D=this.F=!1}Rp(Ty,xd);var Sy="",Cy=/^https?$/i,Ny=["POST","PUT"];function Ay(t){return"content-type"==t.toLowerCase()}function ky(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Oy(t),Py(t)}function Oy(t){t.u||(t.u=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Ry(t){if(t.b&&(!t.s[1]||4!=xy(t)||2!=t.X()))if(t.l&&4==xy(t))Qd(t.za,0,t);else if(t.dispatchEvent("readystatechange"),4==xy(t)){t.b=!1;try{var e,n,r,i,o=t.X();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}if((e=s)||((n=0===o)&&(!(i=String(t.B).match(Bv)[1]||null)&&bp.self&&bp.self.location&&(i=(r=bp.self.location.protocol).substr(0,r.length-1)),n=!Cy.test(i?i.toLowerCase():"")),e=n),e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var a=2<xy(t)?t.a.statusText:""}catch(t){a=""}t.f=a+" ["+t.X()+"]",Oy(t)}}finally{Py(t)}}}function Py(t,e){if(t.a){Dy(t);var n=t.a,r=t.s[0]?_p:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function Dy(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(bp.clearTimeout(t.m),t.m=null)}function xy(t){return t.a?t.a.readyState:0}function Ly(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}var i;r||(i="",Hp(n,function(t,e){i+=e,i+=":",i+=t,i+="\r\n"}),n=i,"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Xv(t,e,n))}function My(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Fy(t){this.pa=0,this.g=[],this.c=new ov,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.W=this.i=this.O=this.l=null,this.La=this.R=0,this.Ia=My("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.T=!0,this.I=this.oa=this.P=-1,this.U=this.o=this.u=0,this.Fa=My("baseRetryDelayMs",5e3,t),this.Ma=My("retryDelaySeedMs",1e4,t),this.Ja=My("forwardChannelMaxRetries",2,t),this.ma=My("forwardChannelRequestTimeoutMs",2e4,t),this.Ka=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new fy(t&&t.concurrentRequestLimit),this.ka=new wy,this.da=t&&t.fastHandshake||!1,this.Ga=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.T=!1),this.V=!this.da&&this.T&&t&&t.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null}function Uy(t){var e,n;Vy(t),3==t.v&&(e=t.R++,Xv(n=Hv(t.B),"SID",t.J),Xv(n,"RID",e),Xv(n,"TYPE","terminate"),Hy(t,n),(e=new Sv(t,t.c,e,void 0)).H=2,e.i=Yv(Hv(n)),n=!1,bp.navigator&&bp.navigator.sendBeacon&&(n=bp.navigator.sendBeacon(e.i.toString(),"")),!n&&bp.Image&&((new Image).src=e.i,n=!0),n||(e.a=ng(e.g,null),e.a.ba(e.i)),e.u=Op(),Pv(e)),tg(t)}function jy(t){t.a&&(Qy(t),t.a.cancel(),t.a=null)}function Vy(t){jy(t),t.j&&(bp.clearTimeout(t.j),t.j=null),Yy(t),t.b.cancel(),t.h&&("number"==typeof t.h&&bp.clearTimeout(t.h),t.h=null)}function qy(t,e){t.g.push(new ly(t.La++,e)),3==t.v&&By(t)}function By(t){dy(t.b)||t.h||(t.h=!0,Bd(t.Ba,t),t.u=0)}function Wy(t,e){var n=e?e.f:t.R++,r=Hv(t.B);Xv(r,"SID",t.J),Xv(r,"RID",n),Xv(r,"AID",t.P),Hy(t,r),t.i&&t.l&&Ly(r,t.i,t.l),n=new Sv(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Gy(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),gy(t.b,n),kv(n,r,e)}function Hy(t,n){t.f&&Uv({},function(t,e){Xv(n,e,t)})}function Gy(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Ap(t.f.Ha,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),a=!1;else try{!function(t,r){var i="req"+c+"_"||"";try{Uv(t,function(t,e){var n=t;Ip(t)&&(n=Md(t)),r.push(i+e+"="+encodeURIComponent(n))})}catch(t){throw r.push(i+"type="+encodeURIComponent("_badmap")),t}}(h,s)}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Ky(t){t.a||t.j||(t.U=1,Bd(t.Aa,t),t.o=0)}function zy(t){return!(t.a||t.j||3<=t.o)&&(t.U++,t.j=dv(Ap(t.Aa,t),$y(t,t.o)),t.o++,1)}function Qy(t){null!=t.s&&(bp.clearTimeout(t.s),t.s=null)}function Xy(t){t.a=new Sv(t,t.c,"rpc",t.U),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Hv(t.la);Xv(e,"RID","rpc"),Xv(e,"SID",t.J),Xv(e,"CI",t.H?"0":"1"),Xv(e,"AID",t.P),Hy(t,e),Xv(e,"TYPE","xmlhttp"),t.i&&t.l&&Ly(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Yv(Hv(e)),n.j=null,n.I=!0,Ov(n,t)}function Yy(t){null!=t.m&&(bp.clearTimeout(t.m),t.m=null)}function Jy(t,e){var n,r=null;if(t.a==e){Yy(t),Qy(t),t.a=null;var i=2}else{if(!yy(t.b,e))return;r=e.s,my(t.b,e),i=1}if(t.I=e.N,0!=t.v)if(e.b)1==i?(r=e.j?e.j.length:0,e=Op()-e.u,n=t.u,(i=uv()).dispatchEvent(new pv(i)),By(t)):Ky(t);else if(3==(n=e.h)||0==n&&0<t.I||!(1==i&&function(t,e){if(!(vy(t.b)>=t.b.f-(t.h?1:0))){if(t.h)return t.g=e.s.concat(t.g),1;if(!(1==t.v||2==t.v||t.u>=(t.Ia?0:t.Ja)))return t.h=dv(Ap(t.Ba,t,e),$y(t,t.u)),t.u++,1}}(t,e)||2==i&&zy(t)))switch(r&&0<r.length&&(e=t.b,e.c=e.c.concat(r)),n){case 1:Zy(t,5);break;case 4:Zy(t,10);break;case 3:Zy(t,6);break;default:Zy(t,2)}}function $y(t,e){var n=t.Fa+Math.floor(Math.random()*t.Ma);return t.f||(n*=2),n*e}function Zy(t,e){var n,r,i,o,s,a;t.c.info("Error code "+e),2==e?(n=null,t.f&&(n=null),r=Ap(t.Xa,t),n||(n=new Wv("//www.google.com/images/cleardot.gif"),bp.location&&"http"==bp.location.protocol||Gv(n,"https"),Yv(n)),i=n.toString(),o=r,a=new ov,bp.Image?((s=new Image).onload=kp(Ey,a,s,"TestLoadImage: loaded",!0,o),s.onerror=kp(Ey,a,s,"TestLoadImage: error",!1,o),s.onabort=kp(Ey,a,s,"TestLoadImage: abort",!1,o),s.ontimeout=kp(Ey,a,s,"TestLoadImage: timeout",!1,o),bp.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i):o(!1)):fv(),t.v=0,t.f&&t.f.ra(e),tg(t),Vy(t)}function tg(t){t.v=0,t.I=-1,t.f&&(0==by(t.b).length&&0==t.g.length||(t.b.c.length=0,Mp(t.g),t.g.length=0),t.f.qa())}function eg(t,e,n){var r,i,o,s,a,u,c,h=(r=n)instanceof Wv?Hv(r):new Wv(r,void 0);return""!=h.c?(e&&Kv(h,e+"."+h.c),zv(h,h.h)):(o=(i=bp.location).protocol,s=e?e+"."+i.hostname:i.hostname,a=+i.port,u=n,c=new Wv(null,void 0),o&&Gv(c,o),s&&Kv(c,s),a&&zv(c,a),u&&(c.g=u),h=c),t.W&&Hp(t.W,function(t,e){Xv(h,e,t)}),e=t.A,n=t.na,e&&n&&Xv(h,e,n),Xv(h,"VER",t.ha),Hy(t,h),h}function ng(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ty(t.Ka)).F=t.C,e}function rg(){}function ig(){if($p&&!(10<=Number(cd)))throw Error("Environmental error: no available transport.")}function og(t,e){xd.call(this),this.a=new Fy(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Fp(t)&&(this.a.i=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Fp(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new ug(this)}function sg(t){Ev.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function ag(){Iv.call(this),this.status=1}function ug(t){this.a=t}(gp=Ty.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?mv(this.H):mv(_v),this.a.onreadystatechange=Ap(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void ky(this,t)}t=n||"";var i,o=new jv(this.headers);r&&Uv(r,function(t,e){o.set(e,t)}),r=function(t){t:{for(var e=Ay,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(o.L()),n=bp.FormData&&t instanceof bp.FormData,0<=Dp(Ny,e)&&!r&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Dy(this),0<this.o&&((this.D=(i=this.a,$p&&ud(9)&&"number"==typeof i.timeout&&void 0!==i.ontimeout))?(this.a.timeout=this.o,this.a.ontimeout=Ap(this.xa,this)):this.m=Qd(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){ky(this,t)}},gp.xa=function(){this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},gp.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Py(this))},gp.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Py(this,!0)),Ty.S.G.call(this)},gp.za=function(){this.j||(this.A||this.l||this.g?Ry(this):this.Ta())},gp.Ta=function(){Ry(this)},gp.X=function(){try{return 2<xy(this)?this.a.status:-1}catch(t){return-1}},gp.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},gp.Na=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Iy(e)}},gp.ua=function(){return this.h},gp.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(gp=Fy.prototype).ha=8,gp.v=1,gp.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Sv(this,this.c,t,void 0),r=this.l;if(this.O&&(r?zp(r=Gp(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Gy(this,n,e),Xv(i=Hv(this.B),"RID",t),Xv(i,"CVER",22),this.A&&Xv(i,"X-HTTP-Session-Id",this.A),Hy(this,i),this.i&&r&&Ly(i,this.i,r),gy(this.b,n),this.Ga&&Xv(i,"TYPE","init"),this.da?(Xv(i,"$req",e),Xv(i,"SID","null"),n.V=!0,kv(n,i,null)):kv(n,i,e),this.v=2}}else 3==this.v&&(t?Wy(this,t):0==this.g.length||dy(this.b)||Wy(this))},gp.Aa=function(){var t;this.j=null,Xy(this),this.V&&!(this.F||null==this.a||this.N<=0)&&(t=2*this.N,this.c.info("BP detection timer enabled: "+t),this.s=dv(Ap(this.Sa,this),t))},gp.Sa=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,jy(this),Xy(this))},gp.Ra=function(){null!=this.m&&(this.m=null,jy(this),zy(this),fv())},gp.Xa=function(t){t?this.c.info("Successfully pinged google.com"):this.c.info("Failed to ping google.com"),fv()},(gp=rg.prototype).ta=function(){},gp.sa=function(){},gp.ra=function(){},gp.qa=function(){},gp.Ha=function(){},ig.prototype.a=function(t,e){return new og(t,e)},Rp(og,xd),(gp=og.prototype).addEventListener=function(t,e,n,r){og.S.addEventListener.call(this,t,e,n,r)},gp.removeEventListener=function(t,e,n,r){og.S.removeEventListener.call(this,t,e,n,r)},gp.Oa=function(){this.a.f=this.f,this.h&&(this.a.C=!0);var t=this.a,e=this.l,n=this.b||void 0;fv(),t.fa=e,t.W=n||{},t.H=t.T,t.B=eg(t,null,t.fa),By(t)},gp.close=function(){Uy(this.a)},gp.Pa=function(t){var e;"string"==typeof t?((e={}).__data__=t,qy(this.a,e)):this.g?((e={}).__data__=Md(t),qy(this.a,e)):qy(this.a,t)},gp.G=function(){this.a.f=null,delete this.f,Uy(this.a),delete this.a,og.S.G.call(this)},Rp(sg,Ev),Rp(ag,Iv),Rp(ug,rg),ug.prototype.ta=function(){this.a.dispatchEvent("a")},ug.prototype.sa=function(t){this.a.dispatchEvent(new sg(t))},ug.prototype.ra=function(t){this.a.dispatchEvent(new ag)},ug.prototype.qa=function(){this.a.dispatchEvent("b")},ig.prototype.createWebChannel=ig.prototype.a,og.prototype.send=og.prototype.Pa,og.prototype.open=og.prototype.Oa,vv.NO_ERROR=0,vv.TIMEOUT=8,vv.HTTP_ERROR=6,yv.COMPLETE="complete",(bv.EventType=wv).OPEN="a",wv.CLOSE="b",wv.ERROR="c",wv.MESSAGE="d",xd.prototype.listen=xd.prototype.va,Ty.prototype.listenOnce=Ty.prototype.wa,Ty.prototype.getLastError=Ty.prototype.Qa,Ty.prototype.getLastErrorCode=Ty.prototype.ua,Ty.prototype.getStatus=Ty.prototype.X,Ty.prototype.getResponseJson=Ty.prototype.Na,Ty.prototype.getResponseText=Ty.prototype.$,Ty.prototype.send=Ty.prototype.ba;var cg={createWebChannelTransport:function(){return new ig},ErrorCode:vv,EventType:yv,WebChannel:bv,XhrIo:Ty},hg=cg.createWebChannelTransport,lg=cg.ErrorCode,fg=cg.EventType,pg=cg.WebChannel,dg=cg.XhrIo,vg="7.18.0-202071122108",yg=new Qa("@firebase/firestore");function gg(){return yg.logLevel}function mg(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];yg.logLevel<=Va.DEBUG&&(e=n.map(wg),yg.debug.apply(yg,qs(["Firestore ("+vg+"): "+t],e)))}function bg(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];yg.logLevel<=Va.ERROR&&(e=n.map(wg),yg.error.apply(yg,qs(["Firestore ("+vg+"): "+t],e)))}function _g(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];yg.logLevel<=Va.WARN&&(e=n.map(wg),yg.warn.apply(yg,qs(["Firestore ("+vg+"): "+t],e)))}function wg(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function Eg(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE ("+vg+") INTERNAL ASSERTION FAILED: "+t;throw bg(e),new Error(e)}function Ig(t){t||Eg()}var Tg=(Sg.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=function(){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),e=new Uint8Array(40);if(t)t.getRandomValues(e);else for(var n=0;n<40;n++)e[n]=Math.floor(256*Math.random());return e}(),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},Sg);function Sg(){}function Cg(t,e){return t<e?-1:e<t?1:0}function Ng(t,n,r){return t.length===n.length&&t.every(function(t,e){return r(t,n[e])})}function Ag(t){return t+"\0"}function kg(t,e,n,r,i){this.s=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i}var Og=(Object.defineProperty(Rg.prototype,"i",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),Rg.prototype.isEqual=function(t){return t instanceof Rg&&t.projectId===this.projectId&&t.database===this.database},Rg.prototype.o=function(t){return Cg(this.projectId,t.projectId)||Cg(this.database,t.database)},Rg);function Rg(t,e){this.projectId=t,this.database=e||"(default)"}function Pg(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Dg(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function xg(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Lg,Mg,Fg,Ug=(em.prototype.get=function(t){var e=this.h(t),n=this.l[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.u(s,t))return a}},em.prototype.has=function(t){return void 0!==this.get(t)},em.prototype.set=function(t,e){var n=this.h(t),r=this.l[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.u(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.l[n]=[[t,e]]},em.prototype.delete=function(t){var e=this.h(t),n=this.l[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.u(n[r][0],t))return 1===n.length?delete this.l[e]:n.splice(r,1),!0;return!1},em.prototype.forEach=function(a){Dg(this.l,function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],s=i[1];a(o,s)}})},em.prototype._=function(){return xg(this.l)},em),jg={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Vg=(xs(tm,Fg=Error),tm),qg=(Zg.now=function(){return Zg.fromMillis(Date.now())},Zg.fromDate=function(t){return Zg.fromMillis(t.getTime())},Zg.fromMillis=function(t){var e=Math.floor(t/1e3);return new Zg(e,1e6*(t-1e3*e))},Zg.prototype.toDate=function(){return new Date(this.toMillis())},Zg.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},Zg.prototype.T=function(t){return this.seconds===t.seconds?Cg(this.nanoseconds,t.nanoseconds):Cg(this.seconds,t.seconds)},Zg.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},Zg.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},Zg.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},Zg),Bg=($g.I=function(t){return new $g(t)},$g.min=function(){return new $g(new qg(0,0))},$g.prototype.o=function(t){return this.timestamp.T(t.timestamp)},$g.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},$g.prototype.m=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},$g.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},$g.prototype.A=function(){return this.timestamp},$g),Wg=(Object.defineProperty(Jg.prototype,"length",{get:function(){return this.R},enumerable:!1,configurable:!0}),Jg.prototype.isEqual=function(t){return 0===Jg.P(this,t)},Jg.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof Jg?t.forEach(function(t){e.push(t)}):e.push(t),this.V(e)},Jg.prototype.limit=function(){return this.offset+this.length},Jg.prototype.g=function(t){return t=void 0===t?1:t,this.V(this.segments,this.offset+t,this.length-t)},Jg.prototype.p=function(){return this.V(this.segments,this.offset,this.length-1)},Jg.prototype.v=function(){return this.segments[this.offset]},Jg.prototype.S=function(){return this.get(this.length-1)},Jg.prototype.get=function(t){return this.segments[this.offset+t]},Jg.prototype._=function(){return 0===this.length},Jg.prototype.D=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Jg.prototype.C=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Jg.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},Jg.prototype.N=function(){return this.segments.slice(this.offset,this.limit())},Jg.P=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0},Jg),Hg=(xs(Yg,Mg=Wg),Yg.prototype.V=function(t,e,n){return new Yg(t,e,n)},Yg.prototype.F=function(){return this.N().join("/")},Yg.prototype.toString=function(){return this.F()},Yg.k=function(t){if(0<=t.indexOf("//"))throw new Vg(jg.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new Yg(t.split("/").filter(function(t){return 0<t.length}))},Yg.$=function(){return new Yg([])},Yg),Gg=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Kg=(xs(Xg,Lg=Wg),Xg.prototype.V=function(t,e,n){return new Xg(t,e,n)},Xg.M=function(t){return Gg.test(t)},Xg.prototype.F=function(){return this.N().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),Xg.M(t)||(t="`"+t+"`"),t}).join(".")},Xg.prototype.toString=function(){return this.F()},Xg.prototype.O=function(){return 1===this.length&&"__name__"===this.get(0)},Xg.L=function(){return new Xg(["__name__"])},Xg.q=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new Vg(jg.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var s=t[r];if("\\"===s){if(r+1===t.length)throw new Vg(jg.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[r+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new Vg(jg.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=a,r+=2}else"`"===s?o=!o:"."!==s||o?n+=s:i(),r++}if(i(),o)throw new Vg(jg.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Xg(e)},Xg.$=function(){return new Xg([])},Xg),zg=(Qg.B=function(t){return new Qg(Hg.k(t).g(5))},Qg.prototype.U=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},Qg.prototype.isEqual=function(t){return null!==t&&0===Hg.P(this.path,t.path)},Qg.prototype.toString=function(){return this.path.toString()},Qg.P=function(t,e){return Hg.P(t.path,e.path)},Qg.W=function(t){return t.length%2==0},Qg.j=function(t){return new Qg(new Hg(t.slice()))},Qg);function Qg(t){this.path=t}function Xg(){return null!==Lg&&Lg.apply(this,arguments)||this}function Yg(){return null!==Mg&&Mg.apply(this,arguments)||this}function Jg(t,e,n){void 0===e?e=0:e>t.length&&Eg(),void 0===n?n=t.length-e:n>t.length-e&&Eg(),this.segments=t,this.offset=e,this.R=n}function $g(t){this.timestamp=t}function Zg(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new Vg(jg.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new Vg(jg.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Vg(jg.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new Vg(jg.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}function tm(t,e){var n=this;return(n=Fg.call(this,e)||this).code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function em(t,e){this.h=t,this.u=e,this.l={}}function nm(t){return null==t}function rm(t){return-0===t&&1/t==-1/0}function im(t){return"number"==typeof t&&Number.isInteger(t)&&!rm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var om=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.K=null};function sm(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new om(t,e,n,r,i,o,s)}function am(t){var e,n=t;return null===n.K&&(e=n.path.F(),null!==n.collectionGroup&&(e+="|cg:"+n.collectionGroup),e+="|f:",e+=n.filters.map(function(t){return(e=t).field.F()+e.op.toString()+cb(e.value);var e}).join(","),e+="|ob:",e+=n.orderBy.map(function(t){return(e=t).field.F()+e.dir;var e}).join(","),nm(n.limit)||(e+="|l:",e+=n.limit),n.startAt&&(e+="|lb:",e+=Vw(n.startAt)),n.endAt&&(e+="|ub:",e+=Vw(n.endAt)),n.K=e),n.K}function um(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n,r,i=0;i<t.orderBy.length;i++)if(n=t.orderBy[i],r=e.orderBy[i],n.dir!==r.dir||!n.field.isEqual(r.field))return!1;if(t.filters.length!==e.filters.length)return!1;for(var o,s,a=0;a<t.filters.length;a++)if(o=t.filters[a],s=e.filters[a],o.op!==s.op||!o.field.isEqual(s.field)||!ob(o.value,s.value))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Bw(t.startAt,e.startAt)&&Bw(t.endAt,e.endAt)}function cm(t){return zg.W(t.path)&&null===t.collectionGroup&&0===t.filters.length}var hm=(lm.fromBase64String=function(t){return new lm(atob(t))},lm.fromUint8Array=function(t){return new lm(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t))},lm.prototype.toBase64=function(){return t=this.G,btoa(t);var t},lm.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.G)},lm.prototype.H=function(){return 2*this.G.length},lm.prototype.o=function(t){return Cg(this.G,t.G)},lm.prototype.isEqual=function(t){return this.G===t.G},lm);function lm(t){this.G=t}function fm(t){this.count=t}hm.Y=new hm("");var pm,dm,vm=(ym.prototype.Z=function(t){return new ym(this.target,this.targetId,this.J,t,this.X,this.lastLimboFreeSnapshotVersion,this.resumeToken)},ym.prototype.tt=function(t,e){return new ym(this.target,this.targetId,this.J,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},ym.prototype.et=function(t){return new ym(this.target,this.targetId,this.J,this.sequenceNumber,this.X,t,this.resumeToken)},ym);function ym(t,e,n,r,i,o,s){void 0===i&&(i=Bg.min()),void 0===o&&(o=Bg.min()),void 0===s&&(s=hm.Y),this.target=t,this.targetId=e,this.J=n,this.sequenceNumber=r,this.X=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}function gm(t){switch(t){case jg.OK:return Eg(),0;case jg.CANCELLED:case jg.UNKNOWN:case jg.DEADLINE_EXCEEDED:case jg.RESOURCE_EXHAUSTED:case jg.INTERNAL:case jg.UNAVAILABLE:case jg.UNAUTHENTICATED:return;case jg.INVALID_ARGUMENT:case jg.NOT_FOUND:case jg.ALREADY_EXISTS:case jg.PERMISSION_DENIED:case jg.FAILED_PRECONDITION:case jg.ABORTED:case jg.OUT_OF_RANGE:case jg.UNIMPLEMENTED:case jg.DATA_LOSS:return 1;default:return Eg(),0}}function mm(t){if(void 0===t)return bg("GRPC error has no .code"),jg.UNKNOWN;switch(t){case pm.OK:return jg.OK;case pm.CANCELLED:return jg.CANCELLED;case pm.UNKNOWN:return jg.UNKNOWN;case pm.DEADLINE_EXCEEDED:return jg.DEADLINE_EXCEEDED;case pm.RESOURCE_EXHAUSTED:return jg.RESOURCE_EXHAUSTED;case pm.INTERNAL:return jg.INTERNAL;case pm.UNAVAILABLE:return jg.UNAVAILABLE;case pm.UNAUTHENTICATED:return jg.UNAUTHENTICATED;case pm.INVALID_ARGUMENT:return jg.INVALID_ARGUMENT;case pm.NOT_FOUND:return jg.NOT_FOUND;case pm.ALREADY_EXISTS:return jg.ALREADY_EXISTS;case pm.PERMISSION_DENIED:return jg.PERMISSION_DENIED;case pm.FAILED_PRECONDITION:return jg.FAILED_PRECONDITION;case pm.ABORTED:return jg.ABORTED;case pm.OUT_OF_RANGE:return jg.OUT_OF_RANGE;case pm.UNIMPLEMENTED:return jg.UNIMPLEMENTED;case pm.DATA_LOSS:return jg.DATA_LOSS;default:return Eg()}}(dm=pm=pm||{})[dm.OK=0]="OK",dm[dm.CANCELLED=1]="CANCELLED",dm[dm.UNKNOWN=2]="UNKNOWN",dm[dm.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dm[dm.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dm[dm.NOT_FOUND=5]="NOT_FOUND",dm[dm.ALREADY_EXISTS=6]="ALREADY_EXISTS",dm[dm.PERMISSION_DENIED=7]="PERMISSION_DENIED",dm[dm.UNAUTHENTICATED=16]="UNAUTHENTICATED",dm[dm.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dm[dm.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dm[dm.ABORTED=10]="ABORTED",dm[dm.OUT_OF_RANGE=11]="OUT_OF_RANGE",dm[dm.UNIMPLEMENTED=12]="UNIMPLEMENTED",dm[dm.INTERNAL=13]="INTERNAL",dm[dm.UNAVAILABLE=14]="UNAVAILABLE",dm[dm.DATA_LOSS=15]="DATA_LOSS";var bm=(Tm.prototype.nt=function(t,e){return new Tm(this.P,this.root.nt(t,e,this.P).copy(null,null,wm.st,null,null))},Tm.prototype.remove=function(t){return new Tm(this.P,this.root.remove(t,this.P).copy(null,null,wm.st,null,null))},Tm.prototype.get=function(t){for(var e=this.root;!e._();){var n=this.P(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},Tm.prototype.indexOf=function(t){for(var e=0,n=this.root;!n._();){var r=this.P(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},Tm.prototype._=function(){return this.root._()},Object.defineProperty(Tm.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),Tm.prototype.it=function(){return this.root.it()},Tm.prototype.rt=function(){return this.root.rt()},Tm.prototype.ot=function(t){return this.root.ot(t)},Tm.prototype.forEach=function(n){this.ot(function(t,e){return n(t,e),!1})},Tm.prototype.toString=function(){var n=[];return this.ot(function(t,e){return n.push(t+":"+e),!1}),"{"+n.join(", ")+"}"},Tm.prototype.ht=function(t){return this.root.ht(t)},Tm.prototype.at=function(){return new _m(this.root,null,this.P,!1)},Tm.prototype.ut=function(t){return new _m(this.root,t,this.P,!1)},Tm.prototype.ct=function(){return new _m(this.root,null,this.P,!0)},Tm.prototype.lt=function(t){return new _m(this.root,t,this.P,!0)},Tm),_m=(Im.prototype.dt=function(){var t=this.ft.pop(),e={key:t.key,value:t.value};if(this._t)for(t=t.left;!t._();)this.ft.push(t),t=t.right;else for(t=t.right;!t._();)this.ft.push(t),t=t.left;return e},Im.prototype.wt=function(){return 0<this.ft.length},Im.prototype.Tt=function(){if(0===this.ft.length)return null;var t=this.ft[this.ft.length-1];return{key:t.key,value:t.value}},Im),wm=(Em.prototype.copy=function(t,e,n,r,i){return new Em(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Em.prototype._=function(){return!1},Em.prototype.ot=function(t){return this.left.ot(t)||t(this.key,this.value)||this.right.ot(t)},Em.prototype.ht=function(t){return this.right.ht(t)||t(this.key,this.value)||this.left.ht(t)},Em.prototype.min=function(){return this.left._()?this:this.left.min()},Em.prototype.it=function(){return this.min().key},Em.prototype.rt=function(){return this.right._()?this.key:this.right.rt()},Em.prototype.nt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.nt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.nt(t,e,n))).Et()},Em.prototype.It=function(){if(this.left._())return Em.EMPTY;var t=this;return t.left.At()||t.left.left.At()||(t=t.Rt()),(t=t.copy(null,null,null,t.left.It(),null)).Et()},Em.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left._()||r.left.At()||r.left.left.At()||(r=r.Rt()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.At()&&(r=r.Pt()),r.right._()||r.right.At()||r.right.left.At()||(r=r.Vt()),0===e(t,r.key)){if(r.right._())return Em.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.It())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.Et()},Em.prototype.At=function(){return this.color},Em.prototype.Et=function(){var t=this;return t.right.At()&&!t.left.At()&&(t=t.gt()),t.left.At()&&t.left.left.At()&&(t=t.Pt()),t.left.At()&&t.right.At()&&(t=t.yt()),t},Em.prototype.Rt=function(){var t=this.yt();return t.right.left.At()&&(t=(t=(t=t.copy(null,null,null,null,t.right.Pt())).gt()).yt()),t},Em.prototype.Vt=function(){var t=this.yt();return t.left.left.At()&&(t=(t=t.Pt()).yt()),t},Em.prototype.gt=function(){var t=this.copy(null,null,Em.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},Em.prototype.Pt=function(){var t=this.copy(null,null,Em.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},Em.prototype.yt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},Em.prototype.pt=function(){var t=this.bt();return Math.pow(2,t)<=this.size+1},Em.prototype.bt=function(){if(this.At()&&this.left.At())throw Eg();if(this.right.At())throw Eg();var t=this.left.bt();if(t!==this.right.bt())throw Eg();return t+(this.At()?0:1)},Em);function Em(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Em.RED,this.left=null!=r?r:Em.EMPTY,this.right=null!=i?i:Em.EMPTY,this.size=this.left.size+1+this.right.size}function Im(t,e,n,r){this._t=r,this.ft=[];for(var i=1;!t._();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this._t?t.left:t.right;else{if(0===i){this.ft.push(t);break}this.ft.push(t),t=this._t?t.right:t.left}}function Tm(t,e){this.P=t,this.root=e||wm.EMPTY}function Sm(){this.size=0}wm.EMPTY=null,wm.RED=!0,wm.st=!1,wm.EMPTY=(Object.defineProperty(Sm.prototype,"key",{get:function(){throw Eg()},enumerable:!1,configurable:!0}),Object.defineProperty(Sm.prototype,"value",{get:function(){throw Eg()},enumerable:!1,configurable:!0}),Object.defineProperty(Sm.prototype,"color",{get:function(){throw Eg()},enumerable:!1,configurable:!0}),Object.defineProperty(Sm.prototype,"left",{get:function(){throw Eg()},enumerable:!1,configurable:!0}),Object.defineProperty(Sm.prototype,"right",{get:function(){throw Eg()},enumerable:!1,configurable:!0}),Sm.prototype.copy=function(t,e,n,r,i){return this},Sm.prototype.nt=function(t,e,n){return new wm(t,e)},Sm.prototype.remove=function(t,e){return this},Sm.prototype._=function(){return!0},Sm.prototype.ot=function(t){return!1},Sm.prototype.ht=function(t){return!1},Sm.prototype.it=function(){return null},Sm.prototype.rt=function(){return null},Sm.prototype.At=function(){return!1},Sm.prototype.pt=function(){return!0},Sm.prototype.bt=function(){return 0},new Sm);var Cm=(Om.prototype.has=function(t){return null!==this.data.get(t)},Om.prototype.first=function(){return this.data.it()},Om.prototype.last=function(){return this.data.rt()},Object.defineProperty(Om.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),Om.prototype.indexOf=function(t){return this.data.indexOf(t)},Om.prototype.forEach=function(n){this.data.ot(function(t,e){return n(t),!1})},Om.prototype.vt=function(t,e){for(var n=this.data.ut(t[0]);n.wt();){var r=n.dt();if(0<=this.P(r.key,t[1]))return;e(r.key)}},Om.prototype.St=function(t,e){for(var n=void 0!==e?this.data.ut(e):this.data.at();n.wt();)if(!t(n.dt().key))return},Om.prototype.Dt=function(t){var e=this.data.ut(t);return e.wt()?e.dt().key:null},Om.prototype.at=function(){return new Nm(this.data.at())},Om.prototype.ut=function(t){return new Nm(this.data.ut(t))},Om.prototype.add=function(t){return this.copy(this.data.remove(t).nt(t,!0))},Om.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},Om.prototype._=function(){return this.data._()},Om.prototype.Ct=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},Om.prototype.isEqual=function(t){if(!(t instanceof Om))return!1;if(this.size!==t.size)return!1;for(var e=this.data.at(),n=t.data.at();e.wt();){var r=e.dt().key,i=n.dt().key;if(0!==this.P(r,i))return!1}return!0},Om.prototype.N=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},Om.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},Om.prototype.copy=function(t){var e=new Om(this.P);return e.data=t,e},Om),Nm=(km.prototype.dt=function(){return this.Nt.dt().key},km.prototype.wt=function(){return this.Nt.wt()},km),Am=new bm(zg.P);function km(t){this.Nt=t}function Om(t){this.P=t,this.data=new bm(this.P)}var Rm=new bm(zg.P),Pm=new bm(zg.P),Dm=new Cm(zg.P);function xm(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Dm,r=0,i=t;r<i.length;r++)var o=i[r],n=n.add(o);return n}var Lm=new Cm(Cg);function Mm(t,e,n,r){this.Zt=t,this.removedTargetIds=e,this.key=n,this.te=r}function Fm(t,e){this.targetId=t,this.ee=e}function Um(t,e,n,r){void 0===n&&(n=hm.Y),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}var jm=($m.$t=function(t){return new $m(t.P)},$m.prototype.has=function(t){return null!=this.Ft.get(t)},$m.prototype.get=function(t){return this.Ft.get(t)},$m.prototype.first=function(){return this.kt.it()},$m.prototype.last=function(){return this.kt.rt()},$m.prototype._=function(){return this.kt._()},$m.prototype.indexOf=function(t){var e=this.Ft.get(t);return e?this.kt.indexOf(e):-1},Object.defineProperty($m.prototype,"size",{get:function(){return this.kt.size},enumerable:!1,configurable:!0}),$m.prototype.forEach=function(n){this.kt.ot(function(t,e){return n(t),!1})},$m.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Ft.nt(t.key,t),e.kt.nt(t,null))},$m.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Ft.remove(t),this.kt.remove(e)):this},$m.prototype.isEqual=function(t){if(!(t instanceof $m))return!1;if(this.size!==t.size)return!1;for(var e=this.kt.at(),n=t.kt.at();e.wt();){var r=e.dt().key,i=n.dt().key;if(!r.isEqual(i))return!1}return!0},$m.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},$m.prototype.copy=function(t,e){var n=new $m;return n.P=this.P,n.Ft=t,n.kt=e,n},$m),Vm=(Jm.prototype.track=function(t){var e=t.doc.key,n=this.xt.get(e);!n||0!==t.type&&3===n.type?this.xt=this.xt.nt(e,t):3===t.type&&1!==n.type?this.xt=this.xt.nt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.xt=this.xt.nt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.xt=this.xt.nt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.xt=this.xt.remove(e):1===t.type&&2===n.type?this.xt=this.xt.nt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.xt=this.xt.nt(e,{type:2,doc:t.doc}):Eg()},Jm.prototype.Mt=function(){var n=[];return this.xt.ot(function(t,e){n.push(e)}),n},Jm),qm=(Ym.Ut=function(t,e,n,r){var i=[];return e.forEach(function(t){i.push({type:0,doc:t})}),new Ym(t,e,jm.$t(e),i,n,r,!0,!1)},Object.defineProperty(Ym.prototype,"hasPendingWrites",{get:function(){return!this.Lt._()},enumerable:!1,configurable:!0}),Ym.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.qt===t.qt&&this.Lt.isEqual(t.Lt)&&cw(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Ot.isEqual(t.Ot)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},Ym),Bm=(Xm.Gt=function(t,e){var n=new Map;return n.set(t,Wm.zt(t,e)),new Xm(Bg.min(),n,Lm,Am,xm())},Xm),Wm=(Qm.zt=function(t,e){return new Qm(hm.Y,e,xm(),xm(),xm())},Qm),Hm=(Object.defineProperty(zm.prototype,"Ht",{get:function(){return this.re},enumerable:!1,configurable:!0}),Object.defineProperty(zm.prototype,"resumeToken",{get:function(){return this.ie},enumerable:!1,configurable:!0}),Object.defineProperty(zm.prototype,"he",{get:function(){return 0!==this.ne},enumerable:!1,configurable:!0}),Object.defineProperty(zm.prototype,"ae",{get:function(){return this.oe},enumerable:!1,configurable:!0}),zm.prototype.ue=function(t){0<t.H()&&(this.oe=!0,this.ie=t)},zm.prototype.ce=function(){var n=xm(),r=xm(),i=xm();return this.se.forEach(function(t,e){switch(e){case 0:n=n.add(t);break;case 2:r=r.add(t);break;case 1:i=i.add(t);break;default:Eg()}}),new Wm(this.ie,this.re,n,r,i)},zm.prototype.le=function(){this.oe=!1,this.se=tb()},zm.prototype._e=function(t,e){this.oe=!0,this.se=this.se.nt(t,e)},zm.prototype.fe=function(t){this.oe=!0,this.se=this.se.remove(t)},zm.prototype.de=function(){this.ne+=1},zm.prototype.we=function(){--this.ne},zm.prototype.Te=function(){this.oe=!0,this.re=!0},zm),Gm=(Km.prototype.Pe=function(t){for(var e=0,n=t.Zt;e<n.length;e++){var r=n[e];t.te instanceof K_?this.Ve(r,t.te):t.te instanceof z_&&this.ge(r,t.key,t.te)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s=o[i];this.ge(s,t.key,t.te)}},Km.prototype.ye=function(n){var r=this;this.pe(n,function(t){var e=r.be(t);switch(n.state){case 0:r.ve(t)&&e.ue(n.resumeToken);break;case 1:e.we(),e.he||e.le(),e.ue(n.resumeToken);break;case 2:e.we(),e.he||r.removeTarget(t);break;case 3:r.ve(t)&&(e.Te(),e.ue(n.resumeToken));break;case 4:r.ve(t)&&(r.Se(t),e.ue(n.resumeToken));break;default:Eg()}})},Km.prototype.pe=function(t,n){var r=this;0<t.targetIds.length?t.targetIds.forEach(n):this.Ie.forEach(function(t,e){r.ve(e)&&n(e)})},Km.prototype.De=function(t){var e,n,r=t.targetId,i=t.ee.count,o=this.Ce(r);o&&(cm(e=o.target)?0===i?(n=new zg(e.path),this.ge(r,n,new z_(n,Bg.min()))):Ig(1===i):this.Ne(r)!==i&&(this.Se(r),this.Re=this.Re.add(r)))},Km.prototype.Fe=function(i){var o=this,s=new Map;this.Ie.forEach(function(t,e){var n,r=o.Ce(e);r&&(t.Ht&&cm(r.target)&&(n=new zg(r.target.path),null!==o.me.get(n)||o.ke(e,n)||o.ge(e,n,new z_(n,i))),t.ae&&(s.set(e,t.ce()),t.le()))});var r=xm();this.Ae.forEach(function(t,e){var n=!0;e.St(function(t){var e=o.Ce(t);return!e||2===e.J||(n=!1)}),n&&(r=r.add(t))});var t=new Bm(i,s,this.Re,this.me,r);return this.me=Am,this.Ae=Zm(),this.Re=new Cm(Cg),t},Km.prototype.Ve=function(t,e){var n;this.ve(t)&&(n=this.ke(t,e.key)?2:0,this.be(t)._e(e.key,n),this.me=this.me.nt(e.key,e),this.Ae=this.Ae.nt(e.key,this.$e(e.key).add(t)))},Km.prototype.ge=function(t,e,n){var r;this.ve(t)&&(r=this.be(t),this.ke(t,e)?r._e(e,1):r.fe(e),this.Ae=this.Ae.nt(e,this.$e(e).delete(t)),n&&(this.me=this.me.nt(e,n)))},Km.prototype.removeTarget=function(t){this.Ie.delete(t)},Km.prototype.Ne=function(t){var e=this.be(t).ce();return this.Ee.xe(t).size+e.Yt.size-e.Xt.size},Km.prototype.de=function(t){this.be(t).de()},Km.prototype.be=function(t){var e=this.Ie.get(t);return e||(e=new Hm,this.Ie.set(t,e)),e},Km.prototype.$e=function(t){var e=this.Ae.get(t);return e||(e=new Cm(Cg),this.Ae=this.Ae.nt(t,e)),e},Km.prototype.ve=function(t){var e=null!==this.Ce(t);return e||mg("WatchChangeAggregator","Detected inactive target",t),e},Km.prototype.Ce=function(t){var e=this.Ie.get(t);return e&&e.he?null:this.Ee.Me(t)},Km.prototype.Se=function(e){var n=this;this.Ie.set(e,new Hm),this.Ee.xe(e).forEach(function(t){n.ge(e,t,null)})},Km.prototype.ke=function(t,e){return this.Ee.xe(t).has(e)},Km);function Km(t){this.Ee=t,this.Ie=new Map,this.me=Am,this.Ae=Zm(),this.Re=new Cm(Cg)}function zm(){this.ne=0,this.se=tb(),this.ie=hm.Y,this.re=!1,this.oe=!0}function Qm(t,e,n,r,i){this.resumeToken=t,this.Ht=e,this.Yt=n,this.Jt=r,this.Xt=i}function Xm(t,e,n,r,i){this.X=t,this.Qt=e,this.Wt=n,this.jt=r,this.Kt=i}function Ym(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Ot=n,this.docChanges=r,this.Lt=i,this.fromCache=o,this.qt=s,this.Bt=a}function Jm(){this.xt=new bm(zg.P)}function $m(n){this.P=n?function(t,e){return n(t,e)||zg.P(t.key,e.key)}:function(t,e){return zg.P(t.key,e.key)},this.Ft=Rm,this.kt=new bm(this.P)}function Zm(){return new bm(zg.P)}function tb(){return new bm(zg.P)}function eb(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function nb(t){var e=hb(t.mapValue.fields.__local_write_time__.timestampValue);return new qg(e.seconds,e.nanos)}var rb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ib(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?eb(t)?4:10:Eg()}function ob(r,i){var t,e,n,o=ib(r);if(o!==ib(i))return!1;switch(o){case 0:return!0;case 1:return r.booleanValue===i.booleanValue;case 4:return nb(r).isEqual(nb(i));case 3:return function(t){if("string"==typeof r.timestampValue&&"string"==typeof t.timestampValue&&r.timestampValue.length===t.timestampValue.length)return r.timestampValue===t.timestampValue;var e=hb(r.timestampValue),n=hb(t.timestampValue);return e.seconds===n.seconds&&e.nanos===n.nanos}(i);case 5:return r.stringValue===i.stringValue;case 6:return n=i,fb(r.bytesValue).isEqual(fb(n.bytesValue));case 7:return r.referenceValue===i.referenceValue;case 8:return e=i,lb((t=r).geoPointValue.latitude)===lb(e.geoPointValue.latitude)&&lb(t.geoPointValue.longitude)===lb(e.geoPointValue.longitude);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return lb(t.integerValue)===lb(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=lb(t.doubleValue),r=lb(e.doubleValue);return n===r?rm(n)===rm(r):isNaN(n)&&isNaN(r)}return!1}(r,i);case 9:return Ng(r.arrayValue.values||[],i.arrayValue.values||[],ob);case 10:return function(){var t=r.mapValue.fields||{},e=i.mapValue.fields||{};if(Pg(t)!==Pg(e))return!1;for(var n in t)if(t.hasOwnProperty(n)&&(void 0===e[n]||!ob(t[n],e[n])))return!1;return!0}();default:return Eg()}}function sb(t,e){return void 0!==(t.values||[]).find(function(t){return ob(t,e)})}function ab(t,e){var n,r,i,o,s,a,u,c,h,l,f=ib(t),p=ib(e);if(f!==p)return Cg(f,p);switch(f){case 0:return 0;case 1:return Cg(t.booleanValue,e.booleanValue);case 2:return c=e,(h=lb(t.integerValue||t.doubleValue))<(l=lb(c.integerValue||c.doubleValue))?-1:l<h?1:h===l?0:isNaN(h)?isNaN(l)?0:-1:1;case 3:return ub(t.timestampValue,e.timestampValue);case 4:return ub(nb(t),nb(e));case 5:return Cg(t.stringValue,e.stringValue);case 6:return o=t.bytesValue,s=e.bytesValue,a=fb(o),u=fb(s),a.o(u);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Cg(n[i],r[i]);if(0!==o)return o}return Cg(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return n=t.geoPointValue,r=e.geoPointValue,0!==(i=Cg(lb(n.latitude),lb(r.latitude)))?i:Cg(lb(n.longitude),lb(r.longitude));case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=ab(n[i],r[i]);if(o)return o}return Cg(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Cg(r[s],o[s]);if(0!==a)return a;var u=ab(n[r[s]],i[o[s]]);if(0!==u)return u}return Cg(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Eg()}}function ub(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Cg(t,e);var n=hb(t),r=hb(e),i=Cg(n.seconds,r.seconds);return 0!==i?i:Cg(n.nanos,r.nanos)}function cb(t){return function s(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?"time("+(t=hb(i.timestampValue)).seconds+","+t.nanos+")":"stringValue"in i?i.stringValue:"bytesValue"in i?fb(i.bytesValue).toBase64():"referenceValue"in i?(n=i.referenceValue,zg.B(n).toString()):"geoPointValue"in i?"geo("+(e=i.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in i?function(){for(var t="[",e=!0,n=0,r=i.arrayValue.values||[];n<r.length;n++)e?e=!1:t+=",",t+=s(r[n]);return t+"]"}():"mapValue"in i?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+s(t.fields[o])}return e+"}"}(i.mapValue):Eg();var t,e,n}(t)}function hb(t){if(Ig(!!t),"string"!=typeof t)return{seconds:lb(t.seconds),nanos:lb(t.nanos)};var e,n=0,r=rb.exec(t);Ig(!!r),r[1]&&(e=((e=r[1])+"000000000").substr(0,9),n=Number(e));var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:n}}function lb(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function fb(t){return"string"==typeof t?hm.fromBase64String(t):hm.fromUint8Array(t)}function pb(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.F()}}function db(t){return t&&"integerValue"in t}function vb(t){return!!t&&"arrayValue"in t}function yb(t){return t&&"nullValue"in t}function gb(t){return t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function mb(t){return t&&"mapValue"in t}var bb={asc:"ASCENDING",desc:"DESCENDING"},_b={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wb=function(t,e){this.s=t,this.Oe=e};function Eb(t){return{integerValue:""+t}}function Ib(t,e){if(t.Oe){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rm(e)?"-0":e}}function Tb(t,e){return im(e)?Eb(e):Ib(t,e)}function Sb(t,e){return t.Oe?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Cb(t,e){return t.Oe?e.toBase64():e.toUint8Array()}function Nb(t){return Ig(!!t),Bg.I((e=hb(t),new qg(e.seconds,e.nanos)));var e}function Ab(t,e){return new Hg(["projects",t.projectId,"databases",t.database]).child("documents").child(e).F()}function kb(t){var e=Hg.k(t);return Ig(Gb(e)),e}function Ob(t,e){return Ab(t.s,e.path)}function Rb(t,e){var n=kb(e);return Ig(n.get(1)===t.s.projectId),Ig(!n.get(3)&&!t.s.database||n.get(3)===t.s.database),new zg(Lb(n))}function Pb(t,e){return Ab(t.s,e)}function Db(t){var e=kb(t);return 4===e.length?Hg.$():Lb(e)}function xb(t){return new Hg(["projects",t.s.projectId,"databases",t.s.database]).F()}function Lb(t){return Ig(4<t.length&&"documents"===t.get(4)),t.g(5)}function Mb(t,e,n){return{name:Ob(t,e),fields:n.proto.mapValue.fields}}function Fb(t,e){var n,r,i,o;if(e instanceof I_)n={update:Mb(t,e.key,e.value)};else if(e instanceof x_)n={delete:Ob(t,e.key)};else if(e instanceof T_)n={update:Mb(t,e.key,e.data),updateMask:(r=e.Le,i=[],r.fields.forEach(function(t){return i.push(t.F())}),{fieldPaths:i})};else if(e instanceof k_)n={transform:{document:Ob(t,e.key),fieldTransforms:e.fieldTransforms.map(function(t){var e=t.transform;if(e instanceof Yb)return{fieldPath:t.field.F(),setToServerValue:"REQUEST_TIME"};if(e instanceof Jb)return{fieldPath:t.field.F(),appendMissingElements:{values:e.elements}};if(e instanceof n_)return{fieldPath:t.field.F(),removeAllFromArray:{values:e.elements}};if(e instanceof s_)return{fieldPath:t.field.F(),increment:e.qe};throw Eg()})}};else{if(!(e instanceof L_))return Eg();n={verify:Ob(t,e.key)}}return e.Ue.Be||(n.currentDocument=void 0!==(o=e.Ue).updateTime?{updateTime:Sb(t,o.updateTime.A())}:void 0!==o.exists?{exists:o.exists}:Eg()),n}function Ub(e,t){var n,r,i=t.currentDocument?void 0!==(n=t.currentDocument).updateTime?d_.updateTime(Nb(n.updateTime)):void 0!==n.exists?d_.exists(n.exists):d_.Qe():d_.Qe();if(t.update){t.update.name;var o=Rb(e,t.update.name),s=new M_({mapValue:{fields:t.update.fields}});if(t.updateMask){var a=(r=t.updateMask.fieldPaths||[],new h_(r.map(function(t){return Kg.q(t)})));return new T_(o,s,a,i)}return new I_(o,s,i)}if(t.delete){var u=Rb(e,t.delete);return new x_(u,i)}if(t.transform){var c=Rb(e,t.transform.document),h=t.transform.fieldTransforms.map(function(t){return function(t,e){var n,r,i=null;"setToServerValue"in e?(Ig("REQUEST_TIME"===e.setToServerValue),i=new Yb):"appendMissingElements"in e?(n=e.appendMissingElements.values||[],i=new Jb(n)):"removeAllFromArray"in e?(r=e.removeAllFromArray.values||[],i=new n_(r)):"increment"in e?i=new s_(t,e.increment):Eg();var o=Kg.q(e.fieldPath);return new l_(o,i)}(e,t)});return Ig(!0===i.exists),new k_(c,h)}if(t.verify){var l=Rb(e,t.verify);return new L_(l,i)}return Eg()}function jb(t,e){return{documents:[Pb(t,e.path)]}}function Vb(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Pb(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Pb(t,r.p()),n.structuredQuery.from=[{collectionId:r.S()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){if("=="===t.op){if(gb(t.value))return{unaryFilter:{field:Wb(t.field),op:"IS_NAN"}};if(yb(t.value))return{unaryFilter:{field:Wb(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(gb(t.value))return{unaryFilter:{field:Wb(t.field),op:"IS_NOT_NAN"}};if(yb(t.value))return{unaryFilter:{field:Wb(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wb(t.field),op:(e=t.op,_b[e]),value:t.value}};var e});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return{field:Wb((e=t).field),direction:(n=e.dir,bb[n])};var e,n})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s,a=(s=e.limit,t.Oe||nm(s)?s:{value:s});return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=qb(e.startAt)),e.endAt&&(n.structuredQuery.endAt=qb(e.endAt)),n}function qb(t){return{before:t.before,values:t.position}}function Bb(t){var e=!!t.before,n=t.values||[];return new Lw(n,e)}function Wb(t){return{fieldPath:t.F()}}function Hb(t){return Kg.q(t.fieldPath)}function Gb(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)}function Kb(){this.We=void 0}function zb(t,e){return t instanceof s_?db(n=e)||n&&"doubleValue"in n?e:{integerValue:0}:null;var n}var Qb,Xb,Yb=(xs(Zb,Xb=Kb),Zb),Jb=(xs($b,Qb=Kb),$b);function $b(t){var e=this;return(e=Qb.call(this)||this).elements=t,e}function Zb(){return null!==Xb&&Xb.apply(this,arguments)||this}function t_(t,e){for(var n=c_(e),r=0,i=t.elements;r<i.length;r++)!function(e){n.some(function(t){return ob(t,e)})||n.push(e)}(i[r]);return{arrayValue:{values:n}}}var e_,n_=(xs(r_,e_=Kb),r_);function r_(t){var e=this;return(e=e_.call(this)||this).elements=t,e}function i_(t,e){for(var n=c_(e),r=0,i=t.elements;r<i.length;r++)!function(e){n=n.filter(function(t){return!ob(t,e)})}(i[r]);return{arrayValue:{values:n}}}var o_,s_=(xs(a_,o_=Kb),a_);function a_(t,e){var n=this;return(n=o_.call(this)||this).serializer=t,n.qe=e,n}function u_(t){return lb(t.integerValue||t.doubleValue)}function c_(t){return vb(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var h_=(f_.prototype.je=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].D(t))return!0;return!1},f_.prototype.isEqual=function(t){return Ng(this.fields,t.fields,function(t,e){return t.isEqual(e)})},f_),l_=function(t,e){this.field=t,this.transform=e};function f_(t){(this.fields=t).sort(Kg.P)}function p_(t,e){this.version=t,this.transformResults=e}var d_=(v_.Qe=function(){return new v_},v_.exists=function(t){return new v_(void 0,t)},v_.updateTime=function(t){return new v_(t)},Object.defineProperty(v_.prototype,"Be",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),v_.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},v_);function v_(t,e){this.updateTime=t,this.exists=e}function y_(t,e){return void 0!==t.updateTime?e instanceof K_&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof K_}function g_(){}function m_(t,e,n,r){return t instanceof I_?function(t,e){if(!y_(t.Ue,e))return e;var n=__(e);return new K_(t.key,n,t.value,{Ke:!0})}(t,e):t instanceof T_?function(t,e){if(!y_(t.Ue,e))return e;var n=__(e),r=N_(t,e);return new K_(t.key,n,r,{Ke:!0})}(t,e):t instanceof k_?function(t,e,n,r){if(!y_(t.Ue,e))return e;var i=e,o=function(t,e,n,r){for(var i,o,s,a,u,c,h=[],l=0,f=t;l<f.length;l++){var p=f[l],d=p.transform,v=null;n instanceof K_&&(v=n.field(p.field)),null===v&&r instanceof K_&&(v=r.field(p.field)),h.push((o=v,c=u=a=s=void 0,(i=d)instanceof Yb?(c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}},o&&(c.fields.__previous_value__=o),{mapValue:c}):i instanceof Jb?t_(i,o):i instanceof n_?i_(i,o):(u=u_(a=zb(s=i,o))+u_(s.qe),db(a)&&db(s.qe)?Eb(u):Ib(s.serializer,u))))}return h}(t.fieldTransforms,n,e,r),s=R_(t,i.data(),o);return new K_(t.key,i.version,s,{Ke:!0})}(t,e,r,n):(o=e,y_((i=t).Ue,o)?new z_(i.key,Bg.min()):o);var i,o}function b_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Ue.isEqual(e.Ue)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.Le.isEqual(e.Le):2!==t.type||Ng(t.fieldTransforms,t.fieldTransforms,function(t,e){return r=e,(n=t).field.isEqual(r.field)&&(i=n.transform,o=r.transform,i instanceof Jb&&o instanceof Jb||i instanceof n_&&o instanceof n_?Ng(i.elements,o.elements,ob):i instanceof s_&&o instanceof s_?ob(i.qe,o.qe):i instanceof Yb&&o instanceof Yb);var n,r,i,o}))}function __(t){return t instanceof K_?t.version:Bg.min()}var w_,E_,I_=(xs(C_,E_=g_),C_),T_=(xs(S_,w_=g_),S_);function S_(t,e,n,r){var i=this;return(i=w_.call(this)||this).key=t,i.data=e,i.Le=n,i.Ue=r,i.type=1,i}function C_(t,e,n){var r=this;return(r=E_.call(this)||this).key=t,r.value=e,r.Ue=n,r.type=0,r}function N_(t,e){return n=t,r=e instanceof K_?e.data():M_.empty(),i=new F_(r),n.Le.fields.forEach(function(t){var e;t._()||(null!==(e=n.data.field(t))?i.set(t,e):i.delete(t))}),i.Ge();var n,r,i}var A_,k_=(xs(O_,A_=g_),O_);function O_(t,e){var n=this;return(n=A_.call(this)||this).key=t,n.fieldTransforms=e,n.type=2,n.Ue=d_.exists(!0),n}function R_(t,e,n){for(var r=new F_(e),i=0;i<t.fieldTransforms.length;i++){var o=t.fieldTransforms[i];r.set(o.field,n[i])}return r.Ge()}var P_,D_,x_=(xs(q_,D_=g_),q_),L_=(xs(V_,P_=g_),V_),M_=(j_.empty=function(){return new j_({mapValue:{}})},j_.prototype.field=function(t){if(t._())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!mb(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.S()])||null},j_.prototype.isEqual=function(t){return ob(this.proto,t.proto)},j_),F_=(U_.prototype.set=function(t,e){return this.Ye(t,e),this},U_.prototype.delete=function(t){return this.Ye(t,null),this},U_.prototype.Ye=function(t,e){for(var n=this.He,r=0;r<t.length-1;++r)var i=t.get(r),o=n.get(i),n=(o instanceof Map||(o=o&&10===ib(o)?new Map(Object.entries(o.mapValue.fields||{})):new Map,n.set(i,o)),o);n.set(t.S(),e)},U_.prototype.Ge=function(){var t=this.Je(Kg.$(),this.He);return null!=t?new M_(t):this.ze},U_.prototype.Je=function(r,t){var i=this,o=!1,e=this.ze.field(r),s=mb(e)?Object.assign({},e.mapValue.fields):{};return t.forEach(function(t,e){var n;t instanceof Map?null!=(n=i.Je(r.child(e),t))&&(s[e]=n,o=!0):null!==t?(s[e]=t,o=!0):s.hasOwnProperty(e)&&(delete s[e],o=!0)}),o?{mapValue:{fields:s}}:null},U_);function U_(t){void 0===t&&(t=M_.empty()),this.ze=t,this.He=new Map}function j_(t){this.proto=t}function V_(t,e){var n=this;return(n=P_.call(this)||this).key=t,n.Ue=e,n.type=4,n}function q_(t,e){var n=this;return(n=D_.call(this)||this).key=t,n.Ue=e,n.type=3,n}function B_(t,e){this.key=t,this.version=e}var W_,H_,G_,K_=(xs(J_,G_=B_),J_.prototype.field=function(t){return this.Xe.field(t)},J_.prototype.data=function(){return this.Xe},J_.prototype.Ze=function(){return this.Xe.proto},J_.prototype.isEqual=function(t){return t instanceof J_&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Ke===t.Ke&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Xe.isEqual(t.Xe)},J_.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Xe.toString()+", {hasLocalMutations: "+this.Ke+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(J_.prototype,"hasPendingWrites",{get:function(){return this.Ke||this.hasCommittedMutations},enumerable:!1,configurable:!0}),J_),z_=(xs(Y_,H_=B_),Y_.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(Y_.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),Y_.prototype.isEqual=function(t){return t instanceof Y_&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},Y_),Q_=(xs(X_,W_=B_),X_.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(X_.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),X_.prototype.isEqual=function(t){return t instanceof X_&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},X_);function X_(){return null!==W_&&W_.apply(this,arguments)||this}function Y_(t,e,n){var r=this;return(r=H_.call(this,t,e)||this).hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}function J_(t,e,n,r){var i=this;return(i=G_.call(this,t,e)||this).Xe=n,i.Ke=!!r.Ke,i.hasCommittedMutations=!!r.hasCommittedMutations,i}function $_(t,e){if(!(t instanceof e))throw e.name===t.constructor.name?new Vg(jg.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass '"+e.name+"' from a different Firestore SDK?"):new Vg(jg.INVALID_ARGUMENT,"Expected type '"+e.name+"', but was '"+t.constructor.name+"'");return t}var Z_=(tw.prototype.rn=function(t){return new tw(t,null,this.tn.slice(),this.filters.slice(),this.limit,this.en,this.startAt,this.endAt)},tw.prototype.on=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.tn.length||1===this.tn.length&&this.tn[0].field.O())},tw.prototype.hn=function(){return!nm(this.limit)&&"F"===this.en},tw.prototype.an=function(){return!nm(this.limit)&&"L"===this.en},tw.prototype.un=function(){return 0<this.tn.length?this.tn[0].field:null},tw.prototype.cn=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n.ln())return n.field}return null},tw.prototype._n=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(0<=t.indexOf(r.op))return r.op}return null},tw);function tw(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.tn=n,this.filters=r,this.limit=i,this.en=o,this.startAt=s,this.endAt=a,this.nn=null,this.sn=null,this.startAt,this.endAt}function ew(t,e,n,r,i,o,s,a){return new Z_(t,e,n,r,i,o,s,a)}function nw(t){return new Z_(t)}function rw(t){return null!==t.collectionGroup}function iw(t){var e=$_(t,Z_);if(null===e.nn){e.nn=[];var n=e.cn(),r=e.un();if(null!==n&&null===r)n.O()||e.nn.push(new Ww(n)),e.nn.push(new Ww(Kg.L(),"asc"));else{for(var i,o=!1,s=0,a=e.tn;s<a.length;s++){var u=a[s];e.nn.push(u),u.field.O()&&(o=!0)}o||(i=0<e.tn.length?e.tn[e.tn.length-1].dir:"asc",e.nn.push(new Ww(Kg.L(),i)))}}return e.nn}function ow(t){var e=$_(t,Z_);if(!e.sn)if("F"===e.en)e.sn=sm(e.path,e.collectionGroup,iw(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=iw(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Ww(o.field,s))}var a=e.endAt?new Lw(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Lw(e.startAt.position,!e.startAt.before):null;e.sn=sm(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.sn}function sw(t,e,n){return new Z_(t.path,t.collectionGroup,t.tn.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function aw(t,e){return new Z_(t.path,t.collectionGroup,t.tn.slice(),t.filters.slice(),t.limit,t.en,e,t.endAt)}function uw(t,e){return new Z_(t.path,t.collectionGroup,t.tn.slice(),t.filters.slice(),t.limit,t.en,t.startAt,e)}function cw(t,e){return um(ow(t),ow(e))&&t.en===e.en}function hw(t){return am(ow(t))+"|lt:"+t.en}function lw(t){return"Query(target="+(n=(e=ow(t)).path.F(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),0<e.filters.length&&(n+=", filters: ["+e.filters.map(function(t){return(e=t).field.F()+" "+e.op+" "+cb(e.value);var e}).join(", ")+"]"),nm(e.limit)||(n+=", limit: "+e.limit),0<e.orderBy.length&&(n+=", orderBy: ["+e.orderBy.map(function(t){return(e=t).field.F()+" ("+e.dir+")";var e}).join(", ")+"]"),e.startAt&&(n+=", startAt: "+Vw(e.startAt)),e.endAt&&(n+=", endAt: "+Vw(e.endAt)),"Target("+n+")")+"; limitType="+t.en+")";var e,n}function fw(i,t){return r=i,o=t.key.path,(null!==r.collectionGroup?t.key.U(r.collectionGroup)&&r.path.D(o):zg.W(r.path)?r.path.isEqual(o):r.path.C(o))&&function(t){for(var e=0,n=i.tn;e<n.length;e++){var r=n[e];if(!r.field.O()&&null===t.field(r.field))return}return 1}(t)&&function(t){for(var e=0,n=i.filters;e<n.length;e++)if(!n[e].matches(t))return;return 1}(t)&&(n=t,(!(e=i).startAt||qw(e.startAt,iw(e),n))&&(!e.endAt||!qw(e.endAt,iw(e),n)));var e,n,r,o}function pw(a){return function(t,e){for(var n=!1,r=0,i=iw(a);r<i.length;r++){var o=i[r],s=function(t,e,n){var r,i,o,s,a=t.field.O()?zg.P(e.key,n.key):(r=t.field,i=n,o=e.field(r),s=i.field(r),null!==o&&null!==s?ab(o,s):Eg());switch(t.dir){case"asc":return a;case"desc":return-1*a;default:return Eg()}}(o,t,e);if(0!==s)return s;n=n||o.field.O()}return 0}}var dw,vw=(xs(yw,dw=function(){}),yw.create=function(t,e,n){if(t.O())return"in"===e||"not-in"===e?this.fn(t,e,n):new _w(t,e,n);if(yb(n)){if("=="!==e&&"!="!==e)throw new Vg(jg.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new yw(t,e,n)}if(gb(n)){if("=="!==e&&"!="!==e)throw new Vg(jg.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new yw(t,e,n)}return"array-contains"===e?new Rw(t,n):"in"===e?new Pw(t,n):"not-in"===e?new Dw(t,n):"array-contains-any"===e?new xw(t,n):new yw(t,e,n)},yw.fn=function(t,e,n){return new("in"===e?ww:Ew)(t,n)},yw.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.dn(ab(e,this.value)):null!==e&&ib(this.value)===ib(e)&&this.dn(ab(e,this.value))},yw.prototype.dn=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return 0<t;case">=":return 0<=t;default:return Eg()}},yw.prototype.ln=function(){return 0<=["<","<=",">",">=","!="].indexOf(this.op)},yw);function yw(t,e,n){var r=this;return(r=dw.call(this)||this).field=t,r.op=e,r.value=n,r}var gw,mw,bw,_w=(xs(Sw,bw=vw),Sw.prototype.matches=function(t){var e=zg.P(t.key,this.key);return this.dn(e)},Sw),ww=(xs(Tw,mw=vw),Tw.prototype.matches=function(e){return this.keys.some(function(t){return t.isEqual(e.key)})},Tw),Ew=(xs(Iw,gw=vw),Iw.prototype.matches=function(e){return!this.keys.some(function(t){return t.isEqual(e.key)})},Iw);function Iw(t,e){var n=this;return(n=gw.call(this,t,"not-in",e)||this).keys=Cw(0,e),n}function Tw(t,e){var n=this;return(n=mw.call(this,t,"in",e)||this).keys=Cw(0,e),n}function Sw(t,e,n){var r=this;return(r=bw.call(this,t,e,n)||this).key=zg.B(n.referenceValue),r}function Cw(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return zg.B(t.referenceValue)})}var Nw,Aw,kw,Ow,Rw=(xs(jw,Ow=vw),jw.prototype.matches=function(t){var e=t.field(this.field);return vb(e)&&sb(e.arrayValue,this.value)},jw),Pw=(xs(Uw,kw=vw),Uw.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&sb(this.value.arrayValue,e)},Uw),Dw=(xs(Fw,Aw=vw),Fw.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&!sb(this.value.arrayValue,e)},Fw),xw=(xs(Mw,Nw=vw),Mw.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!vb(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return sb(e.value.arrayValue,t)})},Mw),Lw=function(t,e){this.position=t,this.before=e};function Mw(t,e){return Nw.call(this,t,"array-contains-any",e)||this}function Fw(t,e){return Aw.call(this,t,"not-in",e)||this}function Uw(t,e){return kw.call(this,t,"in",e)||this}function jw(t,e){return Ow.call(this,t,"array-contains",e)||this}function Vw(t){return(t.before?"b":"a")+":"+t.position.map(cb).join(",")}function qw(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i],r=o.field.O()?zg.P(zg.B(s.referenceValue),n.key):ab(s,n.field(o.field));if("desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Bw(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!ob(t.position[n],e.position[n]))return!1;return!0}var Ww=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e},Hw=(sE.prototype.Tn=function(t,e,n){for(var r,i,o,s=n.En,a=0;a<this.mutations.length;a++){var u=this.mutations[a];u.key.isEqual(t)&&(r=u,i=e,o=s[a],e=r instanceof I_?new K_(r.key,o.version,r.value,{hasCommittedMutations:!0}):r instanceof T_?function(t,e,n){if(!y_(t.Ue,e))return new Q_(t.key,n.version);var r=N_(t,e);return new K_(t.key,n.version,r,{hasCommittedMutations:!0})}(r,i,o):r instanceof k_?function(t,e,n){if(Ig(null!=n.transformResults),!y_(t.Ue,e))return new Q_(t.key,n.version);var r=e,i=function(t,e,n){var r=[];Ig(t.length===n.length);for(var i,o,s,a=0;a<n.length;a++){var u=t[a],c=u.transform,h=null;e instanceof K_&&(h=e.field(u.field)),r.push((i=c,o=h,s=n[a],i instanceof Jb?t_(i,o):i instanceof n_?i_(i,o):s))}return r}(t.fieldTransforms,e,n.transformResults),o=n.version,s=R_(t,r.data(),i);return new K_(t.key,o,s,{hasCommittedMutations:!0})}(r,i,o):new z_(r.key,o.version,{hasCommittedMutations:!0}))}return e},sE.prototype.In=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=m_(i,e,e,this.wn))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=m_(u,e,o,this.wn))}return e},sE.prototype.mn=function(n){var r=this,i=n;return this.mutations.forEach(function(t){var e=r.In(t.key,n.get(t.key));e&&(i=i.nt(t.key,e))}),i},sE.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},xm())},sE.prototype.isEqual=function(t){return this.batchId===t.batchId&&Ng(this.mutations,t.mutations,b_)&&Ng(this.baseMutations,t.baseMutations,b_)},sE),Gw=(oE.from=function(t,e,n){Ig(t.mutations.length===n.length);for(var r=Pm,i=t.mutations,o=0;o<i.length;o++)r=r.nt(i[o].key,n[o].version);return new oE(t,e,n,r)},oE),Kw=(iE.prototype.catch=function(t){return this.next(void 0,t)},iE.prototype.next=function(r,i){var o=this;return this.yn&&Eg(),this.yn=!0,this.gn?this.error?this.pn(i,this.error):this.bn(r,this.result):new iE(function(e,n){o.Pn=function(t){o.bn(r,t).next(e,n)},o.Vn=function(t){o.pn(i,t).next(e,n)}})},iE.prototype.vn=function(){var n=this;return new Promise(function(t,e){n.next(t,e)})},iE.prototype.Sn=function(t){try{var e=t();return e instanceof iE?e:iE.resolve(e)}catch(t){return iE.reject(t)}},iE.prototype.bn=function(t,e){return t?this.Sn(function(){return t(e)}):iE.resolve(e)},iE.prototype.pn=function(t,e){return t?this.Sn(function(){return t(e)}):iE.reject(e)},iE.resolve=function(n){return new iE(function(t,e){t(n)})},iE.reject=function(n){return new iE(function(t,e){e(n)})},iE.Dn=function(t){return new iE(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(t){return n(t)})}),o=!0,i===r&&e()})},iE.Cn=function(t){for(var n=iE.resolve(!1),e=0,r=t;e<r.length;e++)!function(e){n=n.next(function(t){return t?iE.resolve(t):e()})}(r[e]);return n},iE.forEach=function(t,n){var r=this,i=[];return t.forEach(function(t,e){i.push(n.call(r,t,e))}),this.Dn(i)},iE),zw=(Object.defineProperty(rE.prototype,"readTime",{get:function(){return this.kn},set:function(t){this.kn=t},enumerable:!1,configurable:!0}),rE.prototype.$n=function(t,e){this.xn(),this.readTime=e,this.Nn.set(t.key,t)},rE.prototype.Mn=function(t,e){this.xn(),e&&(this.readTime=e),this.Nn.set(t,null)},rE.prototype.On=function(t,e){this.xn();var n=this.Nn.get(e);return void 0!==n?Kw.resolve(n):this.Ln(t,e)},rE.prototype.getEntries=function(t,e){return this.qn(t,e)},rE.prototype.apply=function(t){return this.xn(),this.Fn=!0,this.Bn(t)},rE.prototype.xn=function(){},rE),Qw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Xw=(nE.prototype.Qn=function(t){this.Un.push(t)},nE.prototype.Wn=function(){this.Un.forEach(function(t){return t()})},nE),Yw=(eE.prototype.zn=function(e,n){var r=this;return this.Kn.Hn(e,n).next(function(t){return r.Yn(e,n,t)})},eE.prototype.Yn=function(t,r,i){return this.jn.On(t,r).next(function(t){for(var e=0,n=i;e<n.length;e++)t=n[e].In(r,t);return t})},eE.prototype.Jn=function(t,e,i){var o=Am;return e.forEach(function(t,e){for(var n=0,r=i;n<r.length;n++)e=r[n].In(t,e);o=o.nt(t,e)}),o},eE.prototype.Xn=function(e,t){var n=this;return this.jn.getEntries(e,t).next(function(t){return n.Zn(e,t)})},eE.prototype.Zn=function(r,i){var o=this;return this.Kn.ts(r,i).next(function(t){var e=o.Jn(r,i,t),n=Am;return e.forEach(function(t,e){e=e||new z_(t,Bg.min()),n=n.nt(t,e)}),n})},eE.prototype.es=function(t,e,n){return r=e,zg.W(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.ns(t,e.path):rw(e)?this.ss(t,e,n):this.rs(t,e,n);var r},eE.prototype.ns=function(t,e){return this.zn(t,new zg(e)).next(function(t){var e=Rm;return t instanceof K_&&(e=e.nt(t.key,t)),e})},eE.prototype.ss=function(n,r,i){var o=this,s=r.collectionGroup,a=Rm;return this.Gn.os(n,s).next(function(t){return Kw.forEach(t,function(t){var e=r.rn(t.child(s));return o.rs(n,e,i).next(function(t){t.forEach(function(t,e){a=a.nt(t,e)})})}).next(function(){return a})})},eE.prototype.rs=function(e,n,t){var h,l,r=this;return this.jn.es(e,n,t).next(function(t){return h=t,r.Kn.hs(e,n)}).next(function(t){return l=t,r.as(e,l,h).next(function(t){h=t;for(var e=0,n=l;e<n.length;e++)for(var r=n[e],i=0,o=r.mutations;i<o.length;i++){var s=o[i],a=s.key,u=h.get(a),c=m_(s,u,u,r.wn);h=c instanceof K_?h.nt(a,c):h.remove(a)}})}).next(function(){return h.forEach(function(t,e){fw(n,e)||(h=h.remove(t))}),h})},eE.prototype.as=function(t,e,n){for(var r=xm(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof T_&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.jn.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof K_&&(c=c.nt(t,e))}),c})},eE),Jw=(tE.ls=function(t,e){for(var n=xm(),r=xm(),i=0,o=e.docChanges;i<o.length;i++){var s=o[i];switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}}return new tE(t,e.fromCache,n,r)},tE),$w=(Zw.prototype.fs=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},Zw.prototype.next=function(){var t=++this.previousValue;return this.ds&&this.ds(t),t},Zw);function Zw(t,e){var n=this;this.previousValue=t,e&&(e._s=function(t){return n.fs(t)},this.ds=function(t){return e.ws(t)})}function tE(t,e,n,r){this.targetId=t,this.fromCache=e,this.us=n,this.cs=r}function eE(t,e,n){this.jn=t,this.Kn=e,this.Gn=n}function nE(){this.Un=[]}function rE(){this.Nn=new Ug(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.Fn=!1}function iE(t){var e=this;this.Pn=null,this.Vn=null,this.result=void 0,this.error=void 0,this.gn=!1,this.yn=!1,t(function(t){e.gn=!0,e.result=t,e.Pn&&e.Pn(t)},function(t){e.gn=!0,e.error=t,e.Vn&&e.Vn(t)})}function oE(t,e,n,r){this.batch=t,this.An=e,this.En=n,this.Rn=r}function sE(t,e,n,r){this.batchId=t,this.wn=e,this.baseMutations=n,this.mutations=r}function aE(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}$w.Ts=-1;var uE,cE=(yE.prototype.reset=function(){this.Ps=0},yE.prototype.ys=function(){this.Ps=this.Rs},yE.prototype.ps=function(t){var e=this;this.cancel();var n=Math.floor(this.Ps+this.bs()),r=Math.max(0,Date.now()-this.gs),i=Math.max(0,n-r);0<i&&mg("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Ps+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Vs=this.Es.vs(this.Is,i,function(){return e.gs=Date.now(),t()}),this.Ps*=this.As,this.Ps<this.ms&&(this.Ps=this.ms),this.Ps>this.Rs&&(this.Ps=this.Rs)},yE.prototype.Ss=function(){null!==this.Vs&&(this.Vs.Ds(),this.Vs=null)},yE.prototype.cancel=function(){null!==this.Vs&&(this.Vs.cancel(),this.Vs=null)},yE.prototype.bs=function(){return(Math.random()-.5)*this.Ps},yE),hE=(vE.delete=function(t){return mg("SimpleDb","Removing database:",t),EE(window.indexedDB.deleteDatabase(t)).vn()},vE.Fs=function(){if("undefined"==typeof indexedDB)return!1;if(vE.ks())return!0;var t=$s(),e=vE.Ns(t),n=0<e&&e<10,r=vE.$s(t),i=0<r&&r<4.5;return!(0<t.indexOf("MSIE ")||0<t.indexOf("Trident/")||0<t.indexOf("Edge/")||n||i)},vE.ks=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.xs)},vE.Ms=function(t,e){return t.store(e)},vE.Ns=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},vE.$s=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},vE.prototype.Os=function(){return Ms(this,void 0,void 0,function(){var e,o=this;return Fs(this,function(t){switch(t.label){case 0:return this.db?[3,2]:(mg("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(n,r){var i=indexedDB.open(o.name,o.version);i.onsuccess=function(t){var e=t.target.result;n(e)},i.onblocked=function(){r(new fE("Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(t){var e=t.target.error;"VersionError"===e.name?r(new Vg(jg.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new fE(e))},i.onupgradeneeded=function(t){mg("SimpleDb",'Database "'+o.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;o.Cs.createOrUpgrade(e,i.transaction,t.oldVersion,o.version).next(function(){mg("SimpleDb","Database upgrade to version "+o.version+" complete")})}})]);case 1:e.db=t.sent(),t.label=2;case 2:return[2,(this.Ls&&(this.db.onversionchange=function(t){return o.Ls(t)}),this.db)]}})})},vE.prototype.qs=function(e){this.Ls=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},vE.prototype.runTransaction=function(r,c,h){return Ms(this,void 0,void 0,function(){var s,a,e,u,n;return Fs(this,function(t){switch(t.label){case 0:s="readonly"===r,a=0,e=function(){var e,n,r,i,o;return Fs(this,function(t){switch(t.label){case 0:++a,t.label=1;case 1:return t.trys.push([1,4,,5]),[4,u.Os()];case 2:return u.db=t.sent(),e=mE.open(u.db,s?"readonly":"readwrite",c),n=h(e).catch(function(t){return e.abort(t),Kw.reject(t)}).vn(),r={},n.catch(function(){}),[4,e.Bs];case 3:return[2,(r.value=(t.sent(),n),r)];case 4:return i=t.sent(),o="FirebaseError"!==i.name&&a<3,mg("SimpleDb","Transaction failed with error: %s. Retrying: %s.",i.message,o),u.close(),o?[3,5]:[2,{value:Promise.reject(i)}];case 5:return[2]}})},u=this,t.label=1;case 1:return[5,e()];case 2:if("object"==typeof(n=t.sent()))return[2,n.value];t.label=3;case 3:return[3,1];case 4:return[2]}})})},vE.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},vE),lE=(Object.defineProperty(dE.prototype,"gn",{get:function(){return this.Qs},enumerable:!1,configurable:!0}),Object.defineProperty(dE.prototype,"js",{get:function(){return this.Ws},enumerable:!1,configurable:!0}),Object.defineProperty(dE.prototype,"cursor",{set:function(t){this.Us=t},enumerable:!1,configurable:!0}),dE.prototype.done=function(){this.Qs=!0},dE.prototype.Ks=function(t){this.Ws=t},dE.prototype.delete=function(){return EE(this.Us.delete())},dE),fE=(xs(pE,uE=Vg),pE);function pE(t){var e=this;return(e=uE.call(this,jg.UNAVAILABLE,"IndexedDB transaction failed: "+t)||this).name="IndexedDbTransactionError",e}function dE(t){this.Us=t,this.Qs=!1,this.Ws=null}function vE(t,e,n){this.name=t,this.version=e,this.Cs=n,12.2===vE.Ns($s())&&bg("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}function yE(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Es=t,this.Is=e,this.ms=n,this.As=r,this.Rs=i,this.Ps=0,this.Vs=null,this.gs=Date.now(),this.reset()}function gE(t){return"IndexedDbTransactionError"===t.name}var mE=(wE.open=function(t,e,n){try{return new wE(t.transaction(n,e))}catch(t){throw new fE(t)}},Object.defineProperty(wE.prototype,"Bs",{get:function(){return this.Gs.promise},enumerable:!1,configurable:!0}),wE.prototype.abort=function(t){t&&this.Gs.reject(t),this.aborted||(mg("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},wE.prototype.store=function(t){var e=this.transaction.objectStore(t);return new bE(e)},wE),bE=(_E.prototype.put=function(t,e){return EE(void 0!==e?(mg("SimpleDb","PUT",this.store.name,t,e),this.store.put(e,t)):(mg("SimpleDb","PUT",this.store.name,"<auto-key>",t),this.store.put(t)))},_E.prototype.add=function(t){return mg("SimpleDb","ADD",this.store.name,t,t),EE(this.store.add(t))},_E.prototype.get=function(e){var n=this;return EE(this.store.get(e)).next(function(t){return void 0===t&&(t=null),mg("SimpleDb","GET",n.store.name,e,t),t})},_E.prototype.delete=function(t){return mg("SimpleDb","DELETE",this.store.name,t),EE(this.store.delete(t))},_E.prototype.count=function(){return mg("SimpleDb","COUNT",this.store.name),EE(this.store.count())},_E.prototype.zs=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Hs(n,function(t,e){r.push(e)}).next(function(){return r})},_E.prototype.Ys=function(t,e){mg("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Js=!1;var r=this.cursor(n);return this.Hs(r,function(t,e,n){return n.delete()})},_E.prototype.Xs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Hs(r,e)},_E.prototype.Zs=function(i){var t=this.cursor({});return new Kw(function(n,r){t.onerror=function(t){var e=TE(t.target.error);r(e)},t.onsuccess=function(t){var e=t.target.result;e?i(e.primaryKey,e.value).next(function(t){t?e.continue():n()}):n()}})},_E.prototype.Hs=function(t,s){var a=[];return new Kw(function(o,e){t.onerror=function(t){e(t.target.error)},t.onsuccess=function(t){var e,n,r,i=t.target.result;i?(e=new lE(i),(n=s(i.primaryKey,i.value,e))instanceof Kw&&(r=n.catch(function(t){return e.done(),Kw.reject(t)}),a.push(r)),e.gn?o():null===e.js?i.continue():i.continue(e.js)):o()}}).next(function(){return Kw.Dn(a)})},_E.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},_E.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Js?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},_E);function _E(t){this.store=t}function wE(t){var n=this;this.transaction=t,this.aborted=!1,this.Gs=new aE,this.transaction.oncomplete=function(){n.Gs.resolve()},this.transaction.onabort=function(){t.error?n.Gs.reject(new fE(t.error)):n.Gs.resolve()},this.transaction.onerror=function(t){var e=TE(t.target.error);n.Gs.reject(new fE(e))}}function EE(t){return new Kw(function(n,r){t.onsuccess=function(t){var e=t.target.result;n(e)},t.onerror=function(t){var e=TE(t.target.error);r(e)}})}var IE=!1;function TE(t){var e=hE.Ns($s());if(12.2<=e&&e<13){var n="An internal error was encountered in the Indexed Database server";if(0<=t.message.indexOf(n)){var r=new Vg("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return IE||(IE=!0,setTimeout(function(){throw r},0)),r}}return t}function SE(){return"undefined"!=typeof window?window:null}function CE(){return"undefined"!=typeof document?document:null}var NE=(OE.ii=function(t,e,n,r,i){var o=new OE(t,e,Date.now()+n,r,i);return o.start(n),o},OE.prototype.start=function(t){var e=this;this.ri=setTimeout(function(){return e.oi()},t)},OE.prototype.Ds=function(){return this.oi()},OE.prototype.cancel=function(t){null!==this.ri&&(this.clearTimeout(),this.si.reject(new Vg(jg.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},OE.prototype.oi=function(){var e=this;this.ti.hi(function(){return null!==e.ri?(e.clearTimeout(),e.op().then(function(t){return e.si.resolve(t)})):Promise.resolve()})},OE.prototype.clearTimeout=function(){null!==this.ri&&(this.ni(this),clearTimeout(this.ri),this.ri=null)},OE),AE=(Object.defineProperty(kE.prototype,"Ei",{get:function(){return this.ci},enumerable:!1,configurable:!0}),kE.prototype.hi=function(t){this.enqueue(t)},kE.prototype.Ii=function(t){this.mi(),this.Ai(t)},kE.prototype.Ri=function(t){return this.mi(),this.Ai(t)},kE.prototype.Pi=function(n){return Ms(this,void 0,void 0,function(){var e;return Fs(this,function(t){switch(t.label){case 0:return this.mi(),this.ci?[3,2]:(this.ci=!0,(e=CE())&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ti),[4,this.Ri(n)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},kE.prototype.enqueue=function(t){return this.mi(),this.ci?new Promise(function(t){}):this.Ai(t)},kE.prototype.Vi=function(t){var e=this;this.ui.push(t),this.hi(function(){return e.gi()})},kE.prototype.gi=function(){return Ms(this,void 0,void 0,function(){var e,n=this;return Fs(this,function(t){switch(t.label){case 0:if(0===this.ui.length)return[3,5];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.ui[0]()];case 2:return t.sent(),this.ui.shift(),this.wi.reset(),[3,4];case 3:if(!gE(e=t.sent()))throw e;return mg("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:0<this.ui.length&&this.wi.ps(function(){return n.gi()}),t.label=5;case 5:return[2]}})})},kE.prototype.Ai=function(t){var r=this,e=this.ai.then(function(){return r.fi=!0,t().catch(function(t){throw r._i=t,r.fi=!1,bg("INTERNAL UNHANDLED ERROR: ",(n=(e=t).message||"",e.stack&&(n=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),n)),t;var e,n}).then(function(t){return r.fi=!1,t})});return this.ai=e},kE.prototype.vs=function(t,e,n){var r=this;this.mi(),-1<this.di.indexOf(t)&&(e=0);var i=NE.ii(this,t,e,n,function(t){return r.yi(t)});return this.li.push(i),i},kE.prototype.mi=function(){this._i&&Eg()},kE.prototype.pi=function(){},kE.prototype.bi=function(){return Ms(this,void 0,void 0,function(){var e;return Fs(this,function(t){switch(t.label){case 0:return[4,e=this.ai];case 1:t.sent(),t.label=2;case 2:if(e!==this.ai)return[3,0];t.label=3;case 3:return[2]}})})},kE.prototype.vi=function(t){for(var e=0,n=this.li;e<n.length;e++)if(n[e].Is===t)return!0;return!1},kE.prototype.Si=function(r){var i=this;return this.bi().then(function(){i.li.sort(function(t,e){return t.ei-e.ei});for(var t=0,e=i.li;t<e.length;t++){var n=e[t];if(n.Ds(),"all"!==r&&n.Is===r)break}return i.bi()})},kE.prototype.Di=function(t){this.di.push(t)},kE.prototype.yi=function(t){var e=this.li.indexOf(t);this.li.splice(e,1)},kE);function kE(){var e=this;this.ai=Promise.resolve(),this.ui=[],this.ci=!1,this.li=[],this._i=null,this.fi=!1,this.di=[],this.wi=new cE(this,"async_queue_retry"),this.Ti=function(){var t=CE();t&&mg("AsyncQueue","Visibility state changed to  ",t.visibilityState),e.wi.Ss()};var t=CE();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Ti)}function OE(t,e,n,r,i){this.ti=t,this.Is=e,this.ei=n,this.op=r,this.ni=i,this.si=new aE,this.then=this.si.promise.then.bind(this.si.promise),this.si.promise.catch(function(t){})}function RE(t,e){if(bg("AsyncQueue",e+": "+t),gE(t))return new Vg(jg.UNAVAILABLE,e+": "+t);throw t}function PE(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=Cg(n,i);return 0===s?Cg(r,o):s}var DE=(FE.prototype.Fi=function(){return++this.Ni},FE.prototype.ki=function(t){var e,n=[t,this.Fi()];this.buffer.size<this.Ci?this.buffer=this.buffer.add(n):PE(n,e=this.buffer.last())<0&&(this.buffer=this.buffer.delete(e).add(n))},Object.defineProperty(FE.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),FE),xE={$i:!1,xi:0,Mi:0,Oi:0},LE=(ME.Ui=function(t){return new ME(t,ME.Qi,ME.Wi)},ME);function ME(t,e,n){this.Li=t,this.qi=e,this.Bi=n}function FE(t){this.Ci=t,this.buffer=new Cm(PE),this.Ni=0}LE.ji=-1,LE.Ki=1048576,LE.Gi=41943040,LE.Qi=10,LE.Wi=1e3,LE.zi=new LE(LE.Gi,LE.Qi,LE.Wi),LE.Hi=new LE(LE.ji,0,0);var UE=(qE.prototype.start=function(t){this.Yi.params.Li!==LE.ji&&this.Zi(t)},qE.prototype.stop=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},Object.defineProperty(qE.prototype,"tr",{get:function(){return null!==this.Xi},enumerable:!1,configurable:!0}),qE.prototype.Zi=function(n){var t=this,e=this.Ji?3e5:6e4;mg("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.Xi=this.ti.vs("lru_garbage_collection",e,function(){return Ms(t,void 0,void 0,function(){var e;return Fs(this,function(t){switch(t.label){case 0:this.Xi=null,this.Ji=!0,t.label=1;case 1:return t.trys.push([1,3,,7]),[4,n.er(this.Yi)];case 2:return t.sent(),[3,7];case 3:return gE(e=t.sent())?(mg("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,hT(e)];case 5:t.sent(),t.label=6;case 6:return[3,7];case 7:return[4,this.Zi(n)];case 8:return t.sent(),[2]}})})})},qE),jE=(VE.prototype.sr=function(t,e){return this.nr.ir(t).next(function(t){return Math.floor(e/100*t)})},VE.prototype.rr=function(t,e){var n=this;if(0===e)return Kw.resolve($w.Ts);var r=new DE(e);return this.nr.pe(t,function(t){return r.ki(t.sequenceNumber)}).next(function(){return n.nr.or(t,function(t){return r.ki(t)})}).next(function(){return r.maxValue})},VE.prototype.hr=function(t,e,n){return this.nr.hr(t,e,n)},VE.prototype.ar=function(t,e){return this.nr.ar(t,e)},VE.prototype.ur=function(e,n){var r=this;return this.params.Li===LE.ji?(mg("LruGarbageCollector","Garbage collection skipped; disabled"),Kw.resolve(xE)):this.cr(e).next(function(t){return t<r.params.Li?(mg("LruGarbageCollector","Garbage collection skipped; Cache size "+t+" is lower than threshold "+r.params.Li),xE):r.lr(e,n)})},VE.prototype.cr=function(t){return this.nr.cr(t)},VE.prototype.lr=function(e,n){var r,i,o,s,a,u,c,h=this,l=Date.now();return this.sr(e,this.params.qi).next(function(t){return i=t>h.params.Bi?(mg("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.Bi+" from "+t),h.params.Bi):t,s=Date.now(),h.rr(e,i)}).next(function(t){return r=t,a=Date.now(),h.hr(e,r,n)}).next(function(t){return o=t,u=Date.now(),h.ar(e,r)}).next(function(t){return c=Date.now(),gg()<=Va.DEBUG&&mg("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-l)+"ms\n\tDetermined least recently used "+i+" in "+(a-s)+"ms\n\tRemoved "+o+" targets in "+(u-a)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-l)+"ms"),Kw.resolve({$i:!0,xi:i,Mi:o,Oi:t})})},VE);function VE(t,e){this.nr=t,this.params=e}function qE(t,e){this.Yi=t,this.ti=e,this.Ji=!1,this.Xi=null}function BE(t){for(var o="",e=0;e<t.length;e++)0<o.length&&(o=WE(o)),o=function(t){for(var e=o,n=t.length,r=0;r<n;r++){var i=t.charAt(r);switch(i){case"\0":e+="";break;case"":e+="";break;default:e+=i}}return e}(t.get(e));return WE(o)}function WE(t){return t+""}function HE(t){var e=t.length;if(Ig(2<=e),2===e)return Ig(""===t.charAt(0)&&""===t.charAt(1)),Hg.$();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||n<s)&&Eg(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:Eg()}o=s+2}return new Hg(r)}var GE=function(t){this._r=t};function KE(t,e){if(e.document)return n=t._r,r=e.document,i=!!e.hasCommittedMutations,o=Rb(n,r.name),s=Nb(r.updateTime),a=new M_({mapValue:{fields:r.fields}}),new K_(o,s,a,{hasCommittedMutations:!!i});var n,r,i,o,s,a;if(e.noDocument){var u=zg.j(e.noDocument.path),c=JE(e.noDocument.readTime);return new z_(u,c,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var h=zg.j(e.unknownDocument.path),l=JE(e.unknownDocument.version);return new Q_(h,l)}return Eg()}function zE(t,e,n){var r,i,o=QE(n),s=e.key.path.p().N();if(e instanceof K_){var a={name:Ob(r=t._r,(i=e).key),fields:i.Ze().mapValue.fields,updateTime:Sb(r,i.version.A())},u=e.hasCommittedMutations;return new OI(null,null,a,u,o,s)}if(e instanceof z_){var c=e.key.path.N(),h=YE(e.version),l=e.hasCommittedMutations;return new OI(null,new AI(c,h),null,l,o,s)}if(e instanceof Q_){var f=e.key.path.N(),p=YE(e.version);return new OI(new kI(f,p),null,null,!0,o,s)}return Eg()}function QE(t){var e=t.A();return[e.seconds,e.nanoseconds]}function XE(t){var e=new qg(t[0],t[1]);return Bg.I(e)}function YE(t){var e=t.A();return new bI(e.seconds,e.nanoseconds)}function JE(t){var e=new qg(t.seconds,t.nanoseconds);return Bg.I(e)}function $E(e,t){var n=(t.baseMutations||[]).map(function(t){return Ub(e._r,t)}),r=t.mutations.map(function(t){return Ub(e._r,t)}),i=qg.fromMillis(t.localWriteTimeMs);return new Hw(t.batchId,i,n,r)}function ZE(t){var e,n=JE(t.readTime),r=void 0!==t.lastLimboFreeSnapshotVersion?JE(t.lastLimboFreeSnapshotVersion):Bg.min(),i=void 0!==t.query.documents?(Ig(1===(e=t.query).documents.length),ow(nw(Db(e.documents[0])))):function(t){var e,n=Db(t.parent),r=t.structuredQuery,i=r.from?r.from.length:0,o=null;0<i&&(Ig(1===i),(e=r.from[0]).allDescendants?o=e.collectionId:n=n.child(e.collectionId));var s=[];r.where&&(s=function t(e){return e?void 0!==e.unaryFilter?[function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Hb(t.unaryFilter.field);return vw.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Hb(t.unaryFilter.field);return vw.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Hb(t.unaryFilter.field);return vw.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Hb(t.unaryFilter.field);return vw.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Eg()}}(e)]:void 0!==e.fieldFilter?[(n=e,vw.create(Hb(n.fieldFilter.field),function(){switch(n.fieldFilter.op){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Eg()}}(),n.fieldFilter.value))]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(t).reduce(function(t,e){return t.concat(e)}):Eg():[];var n}(r.where));var a=[];r.orderBy&&(a=r.orderBy.map(function(t){return new Ww(Hb((e=t).field),function(){switch(e.direction){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}());var e}));var u,c,h=null;r.limit&&(h=nm(c="object"==typeof(u=r.limit)?u.value:u)?null:c);var l=null;r.startAt&&(l=Bb(r.startAt));var f=null;return r.endAt&&(f=Bb(r.endAt)),ow(ew(n,o,a,s,h,"F",l,f))}(t.query);return new vm(i,t.targetId,0,t.lastListenSequenceNumber,n,r,hm.fromBase64String(t.resumeToken))}function tI(t,e){var n=YE(e.X),r=YE(e.lastLimboFreeSnapshotVersion),i=(cm(e.target)?jb:Vb)(t._r,e.target),o=e.resumeToken.toBase64();return new PI(e.targetId,am(e.target),n,o,e.sequenceNumber,r,i)}var eI=(nI.Tr=function(t,e,n,r){return Ig(""!==t.uid),new nI(t.Er()?t.uid:"",e,n,r)},nI.prototype.Ir=function(t){var r=!0,e=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return oI(t).Xs({index:SI.userMutationsIndex,range:e},function(t,e,n){r=!1,n.done()}).next(function(){return r})},nI.prototype.mr=function(d,v,y,g){var m=this,b=sI(d),_=oI(d);return _.add({}).next(function(t){Ig("number"==typeof t);for(var e,n,r,i,o,s=new Hw(t,v,y,g),a=(e=m.serializer,n=m.userId,i=(r=s).baseMutations.map(function(t){return Fb(e._r,t)}),o=r.mutations.map(function(t){return Fb(e._r,t)}),new SI(n,r.batchId,r.wn.toMillis(),i,o)),u=[],c=new Cm(function(t,e){return Cg(t.F(),e.F())}),h=0,l=g;h<l.length;h++){var f=l[h],p=CI.key(m.userId,f.key.path,t),c=c.add(f.key.path.p());u.push(_.put(a)),u.push(b.put(p,CI.PLACEHOLDER))}return c.forEach(function(t){u.push(m.Gn.Ar(d,t))}),d.Qn(function(){m.wr[t]=s.keys()}),Kw.Dn(u).next(function(){return s})})},nI.prototype.Rr=function(t,e){var n=this;return oI(t).get(e).next(function(t){return t?(Ig(t.userId===n.userId),$E(n.serializer,t)):null})},nI.prototype.Pr=function(t,n){var r=this;return this.wr[n]?Kw.resolve(this.wr[n]):this.Rr(t,n).next(function(t){if(t){var e=t.keys();return r.wr[n]=e}return null})},nI.prototype.Vr=function(t,e){var r=this,i=e+1,n=IDBKeyRange.lowerBound([this.userId,i]),o=null;return oI(t).Xs({index:SI.userMutationsIndex,range:n},function(t,e,n){e.userId===r.userId&&(Ig(e.batchId>=i),o=$E(r.serializer,e)),n.done()}).next(function(){return o})},nI.prototype.gr=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return oI(t).Xs({index:SI.userMutationsIndex,range:e,reverse:!0},function(t,e,n){r=e.batchId,n.done()}).next(function(){return r})},nI.prototype.yr=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return oI(t).zs(SI.userMutationsIndex,n).next(function(t){return t.map(function(t){return $E(e.serializer,t)})})},nI.prototype.Hn=function(a,u){var c=this,t=CI.prefixForPath(this.userId,u.path),e=IDBKeyRange.lowerBound(t),h=[];return sI(a).Xs({range:e},function(t,e,n){var r=t[0],i=t[1],o=t[2],s=HE(i);if(r===c.userId&&u.path.isEqual(s))return oI(a).get(o).next(function(t){if(!t)throw Eg();Ig(t.userId===c.userId),h.push($E(c.serializer,t))});n.done()}).next(function(){return h})},nI.prototype.ts=function(r,t){var u=this,c=new Cm(Cg),i=[];return t.forEach(function(a){var t=CI.prefixForPath(u.userId,a.path),e=IDBKeyRange.lowerBound(t),n=sI(r).Xs({range:e},function(t,e,n){var r=t[0],i=t[1],o=t[2],s=HE(i);r===u.userId&&a.path.isEqual(s)?c=c.add(o):n.done()});i.push(n)}),Kw.Dn(i).next(function(){return u.pr(r,c)})},nI.prototype.hs=function(t,e){var a=this,u=e.path,c=u.length+1,n=CI.prefixForPath(this.userId,u),r=IDBKeyRange.lowerBound(n),h=new Cm(Cg);return sI(t).Xs({range:r},function(t,e,n){var r=t[0],i=t[1],o=t[2],s=HE(i);r===a.userId&&u.D(s)?s.length===c&&(h=h.add(o)):n.done()}).next(function(){return a.pr(t,h)})},nI.prototype.pr=function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(oI(e).get(t).next(function(t){if(null===t)throw Eg();Ig(t.userId===n.userId),r.push($E(n.serializer,t))}))}),Kw.Dn(i).next(function(){return r})},nI.prototype.br=function(e,n){var r=this;return iI(e.vr,this.userId,n).next(function(t){return e.Qn(function(){r.Sr(n.batchId)}),Kw.forEach(t,function(t){return r.dr.Dr(e,t)})})},nI.prototype.Sr=function(t){delete this.wr[t]},nI.prototype.Cr=function(n){var o=this;return this.Ir(n).next(function(t){if(!t)return Kw.resolve();var e=IDBKeyRange.lowerBound(CI.prefixForUser(o.userId)),i=[];return sI(n).Xs({range:e},function(t,e,n){var r;t[0]===o.userId?(r=HE(t[1]),i.push(r)):n.done()}).next(function(){Ig(0===i.length)})})},nI.prototype.Nr=function(t,e){return rI(t,this.userId,e)},nI.prototype.Fr=function(t){var e=this;return aI(t).get(this.userId).next(function(t){return t||new TI(e.userId,-1,"")})},nI);function nI(t,e,n,r){this.userId=t,this.serializer=e,this.Gn=n,this.dr=r,this.wr={}}function rI(t,o,e){var n=CI.prefixForPath(o,e.path),s=n[1],r=IDBKeyRange.lowerBound(n),a=!1;return sI(t).Xs({range:r,Js:!0},function(t,e,n){var r=t[0],i=t[1];t[2],r===o&&i===s&&(a=!0),n.done()}).next(function(){return a})}function iI(t,e,n){var r=t.store(SI.store),i=t.store(CI.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Xs({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){Ig(1===a)}));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=CI.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return Kw.Dn(o).next(function(){return c})}function oI(t){return $I.Ms(t,SI.store)}function sI(t){return $I.Ms(t,CI.store)}function aI(t){return $I.Ms(t,TI.store)}var uI,cI=(hI.prototype.$n=function(t,e,n){return fI(t).put(pI(e),n)},hI.prototype.Mn=function(t,e){var n=fI(t),r=pI(e);return n.delete(r)},hI.prototype.updateMetadata=function(e,n){var r=this;return this.getMetadata(e).next(function(t){return t.byteSize+=n,r.kr(e,t)})},hI.prototype.On=function(t,e){var n=this;return fI(t).get(pI(e)).next(function(t){return n.$r(t)})},hI.prototype.xr=function(t,e){var n=this;return fI(t).get(pI(e)).next(function(t){var e=n.$r(t);return e?{Mr:e,size:dI(t)}:null})},hI.prototype.getEntries=function(t,e){var r=this,i=Am;return this.Or(t,e,function(t,e){var n=r.$r(e);i=i.nt(t,n)}).next(function(){return i})},hI.prototype.Lr=function(t,e){var r=this,i=Am,o=new bm(zg.P);return this.Or(t,e,function(t,e){var n=r.$r(e);o=n?(i=i.nt(t,n),o.nt(t,dI(e))):(i=i.nt(t,null),o.nt(t,0))}).next(function(){return{qr:i,Br:o}})},hI.prototype.Or=function(t,e,i){if(e._())return Kw.resolve();var n=IDBKeyRange.bound(e.first().path.N(),e.last().path.N()),o=e.at(),s=o.dt();return fI(t).Xs({range:n},function(t,e,n){for(var r=zg.j(t);s&&zg.P(s,r)<0;)i(s,null),s=o.dt();s&&s.isEqual(r)&&(i(s,e),s=o.wt()?o.dt():null),s?n.Ks(s.path.N()):n.done()}).next(function(){for(;s;)i(s,null),s=o.wt()?o.dt():null})},hI.prototype.es=function(t,i,e){var n,r,o,s=this,a=Rm,u=i.path.length+1,c={};return e.isEqual(Bg.min())?(n=i.path.N(),c.range=IDBKeyRange.lowerBound(n)):(r=i.path.N(),o=QE(e),c.range=IDBKeyRange.lowerBound([r,o],!0),c.index=OI.collectionReadTimeIndex),fI(t).Xs(c,function(t,e,n){var r;t.length===u&&(r=KE(s.serializer,e),i.path.D(r.key.path)?r instanceof K_&&fw(i,r)&&(a=a.nt(r.key,r)):n.done())}).next(function(){return a})},hI.prototype.Ur=function(t,e){var r=this,i=Am,o=QE(e),n=fI(t),s=IDBKeyRange.lowerBound(o,!0);return n.Xs({index:OI.readTimeIndex,range:s},function(t,e){var n=KE(r.serializer,e);i=i.nt(n.key,n),o=e.readTime}).next(function(){return{Qr:i,readTime:XE(o)}})},hI.prototype.Wr=function(t){var e=fI(t),r=Bg.min();return e.Xs({index:OI.readTimeIndex,reverse:!0},function(t,e,n){e.readTime&&(r=XE(e.readTime)),n.done()}).next(function(){return r})},hI.prototype.jr=function(t){return new hI.Kr(this,!!t&&t.Gr)},hI.prototype.zr=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},hI.prototype.getMetadata=function(t){return lI(t).get(RI.key).next(function(t){return Ig(!!t),t})},hI.prototype.kr=function(t,e){return lI(t).put(RI.key,e)},hI.prototype.$r=function(t){if(t){var e=KE(this.serializer,t);return e instanceof z_&&e.version.isEqual(Bg.min())?null:e}return null},hI);function hI(t,e){this.serializer=t,this.Gn=e}function lI(t){return $I.Ms(t,RI.store)}function fI(t){return $I.Ms(t,OI.store)}function pI(t){return t.path.N()}function dI(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Eg();e=t.noDocument}return JSON.stringify(e).length}function vI(t,e){var n=this;return(n=uI.call(this)||this).Hr=t,n.Gr=e,n.Yr=new Ug(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),n}cI.Kr=(xs(vI,uI=zw),vI.prototype.Bn=function(s){var a=this,u=[],c=0,h=new Cm(function(t,e){return Cg(t.F(),e.F())});return this.Nn.forEach(function(t,e){var n,r,i,o=a.Yr.get(t);e?(n=zE(a.Hr.serializer,e,a.readTime),h=h.add(t.path.p()),r=dI(n),c+=r-o,u.push(a.Hr.$n(s,t,n))):(c-=o,a.Gr?(i=zE(a.Hr.serializer,new z_(t,Bg.min()),a.readTime),u.push(a.Hr.$n(s,t,i))):u.push(a.Hr.Mn(s,t)))}),h.forEach(function(t){u.push(a.Hr.Gn.Ar(s,t))}),u.push(this.Hr.updateMetadata(s,c)),Kw.Dn(u)},vI.prototype.Ln=function(t,e){var n=this;return this.Hr.xr(t,e).next(function(t){return null===t?(n.Yr.set(e,0),null):(n.Yr.set(e,t.size),t.Mr)})},vI.prototype.qn=function(t,e){var n=this;return this.Hr.Lr(t,e).next(function(t){var e=t.qr;return t.Br.forEach(function(t,e){n.Yr.set(t,e)}),e})},vI);var yI=(II.prototype.Ar=function(t,e){return this.Jr.add(e),Kw.resolve()},II.prototype.os=function(t,e){return Kw.resolve(this.Jr.getEntries(e))},II),gI=(EI.prototype.add=function(t){var e=t.S(),n=t.p(),r=this.index[e]||new Cm(Hg.P),i=!r.has(n);return this.index[e]=r.add(n),i},EI.prototype.has=function(t){var e=t.S(),n=t.p(),r=this.index[e];return r&&r.has(n)},EI.prototype.getEntries=function(t){return(this.index[t]||new Cm(Hg.P)).N()},EI),mI=(wI.prototype.createOrUpgrade=function(n,r,t,e){var i=this;Ig(t<e&&0<=t&&e<=10);var o,s=new mE(r);t<1&&1<=e&&(n.createObjectStore(_I.store),(o=n).createObjectStore(TI.store,{keyPath:TI.keyPath}),o.createObjectStore(SI.store,{keyPath:SI.keyPath,autoIncrement:!0}).createIndex(SI.userMutationsIndex,SI.userMutationsKeyPath,{unique:!0}),o.createObjectStore(CI.store),MI(n),n.createObjectStore(OI.store));var a,u=Kw.resolve();return t<3&&3<=e&&(0!==t&&((a=n).deleteObjectStore(DI.store),a.deleteObjectStore(PI.store),a.deleteObjectStore(xI.store),MI(n)),u=u.next(function(){return t=s.store(xI.store),e=new xI(0,0,Bg.min().A(),0),t.put(xI.key,e);var t,e})),t<4&&4<=e&&(0!==t&&(u=u.next(function(){return r=n,(i=s).store(SI.store).zs().next(function(t){r.deleteObjectStore(SI.store),r.createObjectStore(SI.store,{keyPath:SI.keyPath,autoIncrement:!0}).createIndex(SI.userMutationsIndex,SI.userMutationsKeyPath,{unique:!0});var e=i.store(SI.store),n=t.map(function(t){return e.put(t)});return Kw.Dn(n)});var r,i})),u=u.next(function(){n.createObjectStore(FI.store,{keyPath:FI.keyPath})})),t<5&&5<=e&&(u=u.next(function(){return i.removeAcknowledgedMutations(s)})),t<6&&6<=e&&(u=u.next(function(){return n.createObjectStore(RI.store),i.addDocumentGlobal(s)})),t<7&&7<=e&&(u=u.next(function(){return i.ensureSequenceNumbers(s)})),t<8&&8<=e&&(u=u.next(function(){return i.createCollectionParentIndex(n,s)})),t<9&&9<=e&&(u=u.next(function(){var t,e;(e=n).objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges"),(t=r.objectStore(OI.store)).createIndex(OI.readTimeIndex,OI.readTimeIndexPath,{unique:!1}),t.createIndex(OI.collectionReadTimeIndex,OI.collectionReadTimeIndexPath,{unique:!1})})),t<10&&10<=e&&(u=u.next(function(){return i.rewriteCanonicalIds(s)})),u},wI.prototype.addDocumentGlobal=function(e){var n=0;return e.store(OI.store).Xs(function(t,e){n+=dI(e)}).next(function(){var t=new RI(n);return e.store(RI.store).put(RI.key,t)})},wI.prototype.removeAcknowledgedMutations=function(r){var i=this,t=r.store(TI.store),e=r.store(SI.store);return t.zs().next(function(t){return Kw.forEach(t,function(n){var t=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return e.zs(SI.userMutationsIndex,t).next(function(t){return Kw.forEach(t,function(t){Ig(t.userId===n.userId);var e=$E(i.serializer,t);return iI(r,n.userId,e).next(function(){})})})})})},wI.prototype.ensureSequenceNumbers=function(t){var s=t.store(DI.store),e=t.store(OI.store);return t.store(xI.store).get(xI.key).next(function(i){var o=[];return e.Xs(function(t,e){var n=new Hg(t),r=[0,BE(n)];o.push(s.get(r).next(function(t){return t?Kw.resolve():s.put(new DI(0,BE(n),i.highestListenSequenceNumber))}))}).next(function(){return Kw.Dn(o)})})},wI.prototype.createCollectionParentIndex=function(t,e){function r(t){if(o.add(t)){var e=t.S(),n=t.p();return i.put({collectionId:e,parent:BE(n)})}}t.createObjectStore(LI.store,{keyPath:LI.keyPath});var i=e.store(LI.store),o=new gI;return e.store(OI.store).Xs({Js:!0},function(t,e){return r(new Hg(t).p())}).next(function(){return e.store(CI.store).Xs({Js:!0},function(t,e){t[0];var n=t[1];return r((t[2],HE(n)).p())})})},wI.prototype.rewriteCanonicalIds=function(t){var i=this,o=t.store(PI.store);return o.Xs(function(t,e){var n=ZE(e),r=tI(i.serializer,n);return o.put(r)})},wI),bI=function(t,e){this.seconds=t,this.nanoseconds=e},_I=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};function wI(t){this.serializer=t}function EI(){this.index={}}function II(){this.Jr=new gI}_I.store="owner",_I.key="owner";var TI=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};TI.store="mutationQueues",TI.keyPath="userId";var SI=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};SI.store="mutations",SI.keyPath="batchId",SI.userMutationsIndex="userMutationsIndex",SI.userMutationsKeyPath=["userId","batchId"];var CI=(NI.prefixForUser=function(t){return[t]},NI.prefixForPath=function(t,e){return[t,BE(e)]},NI.key=function(t,e,n){return[t,BE(e),n]},NI);function NI(){}CI.store="documentMutations",CI.PLACEHOLDER=new CI;var AI=function(t,e){this.path=t,this.readTime=e},kI=function(t,e){this.path=t,this.version=e},OI=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};OI.store="remoteDocuments",OI.readTimeIndex="readTimeIndex",OI.readTimeIndexPath="readTime",OI.collectionReadTimeIndex="collectionReadTimeIndex",OI.collectionReadTimeIndexPath=["parentPath","readTime"];var RI=function(t){this.byteSize=t};RI.store="remoteDocumentGlobal",RI.key="remoteDocumentGlobalKey";var PI=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};PI.store="targets",PI.keyPath="targetId",PI.queryTargetsIndexName="queryTargetsIndex",PI.queryTargetsKeyPath=["canonicalId","targetId"];var DI=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};DI.store="targetDocuments",DI.keyPath=["targetId","path"],DI.documentTargetsIndex="documentTargetsIndex",DI.documentTargetsKeyPath=["path","targetId"];var xI=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};xI.key="targetGlobalKey",xI.store="targetGlobal";var LI=function(t,e){this.collectionId=t,this.parent=e};function MI(t){t.createObjectStore(DI.store,{keyPath:DI.keyPath}).createIndex(DI.documentTargetsIndex,DI.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(PI.store,{keyPath:PI.keyPath}).createIndex(PI.queryTargetsIndexName,PI.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(xI.store)}LI.store="collectionParents",LI.keyPath=["collectionId","parent"];var FI=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};FI.store="clientMetadata",FI.keyPath="clientId";var UI=qs(qs(qs([TI.store,SI.store,CI.store,OI.store,PI.store,_I.store,xI.store,DI.store],[FI.store]),[RI.store]),[LI.store]),jI=(VI.prototype.Ar=function(t,e){var n=this;if(this.Xr.has(e))return Kw.resolve();var r=e.S(),i=e.p();t.Qn(function(){n.Xr.add(e)});var o={collectionId:r,parent:BE(i)};return qI(t).put(o)},VI.prototype.os=function(t,i){var o=[],e=IDBKeyRange.bound([i,""],[Ag(i),""],!1,!0);return qI(t).zs(e).next(function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if(r.collectionId!==i)break;o.push(HE(r.parent))}return o})},VI);function VI(){this.Xr=new gI}function qI(t){return $I.Ms(t,LI.store)}var BI=(GI.prototype.next=function(){return this.Zr+=2,this.Zr},GI.to=function(){return new GI(0)},GI.eo=function(){return new GI(-1)},GI),WI=(HI.prototype.no=function(n){var r=this;return this.so(n).next(function(t){var e=new BI(t.highestTargetId);return t.highestTargetId=e.next(),r.io(n,t).next(function(){return t.highestTargetId})})},HI.prototype.ro=function(t){return this.so(t).next(function(t){return Bg.I(new qg(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},HI.prototype.oo=function(t){return this.so(t).next(function(t){return t.highestListenSequenceNumber})},HI.prototype.ho=function(e,n,r){var i=this;return this.so(e).next(function(t){return t.highestListenSequenceNumber=n,r&&(t.lastRemoteSnapshotVersion=r.A()),n>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=n),i.io(e,t)})},HI.prototype.ao=function(e,n){var r=this;return this.uo(e,n).next(function(){return r.so(e).next(function(t){return t.targetCount+=1,r.co(n,t),r.io(e,t)})})},HI.prototype.lo=function(t,e){return this.uo(t,e)},HI.prototype._o=function(e,t){var n=this;return this.fo(e,t.targetId).next(function(){return KI(e).delete(t.targetId)}).next(function(){return n.so(e)}).next(function(t){return Ig(0<t.targetCount),--t.targetCount,n.io(e,t)})},HI.prototype.hr=function(r,i,o){var s=this,a=0,u=[];return KI(r).Xs(function(t,e){var n=ZE(e);n.sequenceNumber<=i&&null===o.get(n.targetId)&&(a++,u.push(s._o(r,n)))}).next(function(){return Kw.Dn(u)}).next(function(){return a})},HI.prototype.pe=function(t,r){return KI(t).Xs(function(t,e){var n=ZE(e);r(n)})},HI.prototype.so=function(t){return zI(t).get(xI.key).next(function(t){return Ig(null!==t),t})},HI.prototype.io=function(t,e){return zI(t).put(xI.key,e)},HI.prototype.uo=function(t,e){return KI(t).put(tI(this.serializer,e))},HI.prototype.co=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},HI.prototype.do=function(t){return this.so(t).next(function(t){return t.targetCount})},HI.prototype.wo=function(t,i){var e=am(i),n=IDBKeyRange.bound([e,Number.NEGATIVE_INFINITY],[e,Number.POSITIVE_INFINITY]),o=null;return KI(t).Xs({range:n,index:PI.queryTargetsIndexName},function(t,e,n){var r=ZE(e);um(i,r.target)&&(o=r,n.done())}).next(function(){return o})},HI.prototype.To=function(n,t,r){var i=this,o=[],s=QI(n);return t.forEach(function(t){var e=BE(t.path);o.push(s.put(new DI(r,e))),o.push(i.dr.Eo(n,r,t))}),Kw.Dn(o)},HI.prototype.Io=function(n,t,r){var i=this,o=QI(n);return Kw.forEach(t,function(t){var e=BE(t.path);return Kw.Dn([o.delete([r,e]),i.dr.mo(n,r,t)])})},HI.prototype.fo=function(t,e){var n=QI(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},HI.prototype.Ao=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=QI(t),o=xm();return r.Xs({range:n,Js:!0},function(t,e,n){var r=HE(t[1]),i=new zg(r);o=o.add(i)}).next(function(){return o})},HI.prototype.Nr=function(t,e){var n=BE(e.path),r=IDBKeyRange.bound([n],[Ag(n)],!1,!0),i=0;return QI(t).Xs({index:DI.documentTargetsIndex,Js:!0,range:r},function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())}).next(function(){return 0<i})},HI.prototype.Me=function(t,e){return KI(t).get(e).next(function(t){return t?ZE(t):null})},HI);function HI(t,e){this.dr=t,this.serializer=e}function GI(t){this.Zr=t}function KI(t){return $I.Ms(t,PI.store)}function zI(t){return $I.Ms(t,xI.store)}function QI(t){return $I.Ms(t,DI.store)}var XI,YI="Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",JI=(xs(tT,XI=Xw),tT),$I=(ZI.Ms=function(t,e){if(t instanceof JI)return hE.Ms(t.vr,e);throw Eg()},ZI.prototype.start=function(){var e=this;return this.xo().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Vg(jg.FAILED_PRECONDITION,YI);return e.Mo(),e.Oo(),e.Lo(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(t){return e.ko.oo(t)})}).then(function(t){e.yo=new $w(t,e.Po)}).then(function(){e.po=!0}).catch(function(t){return e.Fo&&e.Fo.close(),Promise.reject(t)})},ZI.prototype.qo=function(n){var t=this;return this.Co=function(e){return Ms(t,void 0,void 0,function(){return Fs(this,function(t){return this.tr?[2,n(e)]:[2]})})},n(this.isPrimary)},ZI.prototype.Bo=function(n){var t=this;this.Fo.qs(function(e){return Ms(t,void 0,void 0,function(){return Fs(this,function(t){switch(t.label){case 0:return null===e.newVersion?[4,n()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})},ZI.prototype.Uo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Es.hi(function(){return Ms(e,void 0,void 0,function(){return Fs(this,function(t){switch(t.label){case 0:return this.tr?[4,this.xo()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},ZI.prototype.xo=function(){var n=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return nT(e).put(new FI(n.clientId,Date.now(),n.networkEnabled,n.inForeground)).next(function(){if(n.isPrimary)return n.Qo(e).next(function(t){t||(n.isPrimary=!1,n.Es.Vi(function(){return n.Co(!1)}))})}).next(function(){return n.Wo(e)}).next(function(t){return n.isPrimary&&!t?n.jo(e).next(function(){return!1}):!!t&&n.Ko(e).next(function(){return!0})})}).catch(function(t){if(gE(t))return mg("IndexedDbPersistence","Failed to extend owner lease: ",t),n.isPrimary;if(!n.allowTabSynchronization)throw t;return mg("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){n.isPrimary!==t&&n.Es.Vi(function(){return n.Co(t)}),n.isPrimary=t})},ZI.prototype.Qo=function(t){var e=this;return eT(t).get(_I.key).next(function(t){return Kw.resolve(e.Go(t))})},ZI.prototype.zo=function(t){return nT(t).delete(this.clientId)},ZI.prototype.Ho=function(){return Ms(this,void 0,void 0,function(){var e,n,r,i,o=this;return Fs(this,function(t){switch(t.label){case 0:return!this.isPrimary||this.Yo(this.Do,18e5)?[3,2]:(this.Do=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var r=ZI.Ms(t,FI.store);return r.zs().next(function(t){var e=o.Jo(t,18e5),n=t.filter(function(t){return-1===e.indexOf(t)});return Kw.forEach(n,function(t){return r.delete(t.clientId)}).next(function(){return n})})}).catch(function(){return[]})]);case 1:if(e=t.sent(),this.$o)for(n=0,r=e;n<r.length;n++)i=r[n],this.$o.removeItem(this.Xo(i.clientId));t.label=2;case 2:return[2]}})})},ZI.prototype.Lo=function(){var t=this;this.So=this.Es.vs("client_metadata_refresh",4e3,function(){return t.xo().then(function(){return t.Ho()}).then(function(){return t.Lo()})})},ZI.prototype.Go=function(t){return!!t&&t.ownerId===this.clientId},ZI.prototype.Wo=function(e){var i=this;return this.Vo?Kw.resolve(!0):eT(e).get(_I.key).next(function(t){if(null!==t&&i.Yo(t.leaseTimestampMs,5e3)&&!i.Zo(t.ownerId)){if(i.Go(t)&&i.networkEnabled)return!0;if(!i.Go(t)){if(!t.allowTabSynchronization)throw new Vg(jg.FAILED_PRECONDITION,YI);return!1}}return!(!i.networkEnabled||!i.inForeground)||nT(e).zs().next(function(t){return void 0===i.Jo(t,5e3).find(function(t){if(i.clientId!==t.clientId){var e=!i.networkEnabled&&t.networkEnabled,n=!i.inForeground&&t.inForeground,r=i.networkEnabled===t.networkEnabled;if(e||n&&r)return!0}return!1})})}).next(function(t){return i.isPrimary!==t&&mg("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},ZI.prototype.th=function(){return Ms(this,void 0,void 0,function(){var e=this;return Fs(this,function(t){switch(t.label){case 0:return this.po=!1,this.eh(),this.So&&(this.So.cancel(),this.So=null),this.nh(),this.sh(),[4,this.runTransaction("shutdown","readwrite",function(t){return e.jo(t).next(function(){return e.zo(t)})}).catch(function(t){mg("IndexedDbPersistence","Proceeding with shutdown despite failure: ",t)})];case 1:return t.sent(),this.Fo.close(),this.ih(),[2]}})})},ZI.prototype.Jo=function(t,e){var n=this;return t.filter(function(t){return n.Yo(t.updateTimeMs,e)&&!n.Zo(t.clientId)})},ZI.prototype.rh=function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(t){return nT(t).zs().next(function(t){return e.Jo(t,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(ZI.prototype,"tr",{get:function(){return this.po},enumerable:!1,configurable:!0}),ZI.prototype.oh=function(t){return eI.Tr(t,this.serializer,this.Gn,this.dr)},ZI.prototype.hh=function(){return this.ko},ZI.prototype.ah=function(){return this.jn},ZI.prototype.uh=function(){return this.Gn},ZI.prototype.runTransaction=function(e,n,r){var i=this;mg("IndexedDbPersistence","Starting transaction:",e);var o,t="readonly"===n?"readonly":"readwrite";return this.Fo.runTransaction(t,UI,function(t){return o=new JI(t,i.yo?i.yo.next():$w.Ts),"readwrite-primary"===n?i.Qo(o).next(function(t){return!!t||i.Wo(o)}).next(function(t){if(!t)throw bg("Failed to obtain primary lease for action '"+e+"'."),i.isPrimary=!1,i.Es.Vi(function(){return i.Co(!1)}),new Vg(jg.FAILED_PRECONDITION,Qw);return r(o)}).next(function(t){return i.Ko(o).next(function(){return t})}):i.lh(o).next(function(){return r(o)})}).then(function(t){return o.Wn(),t})},ZI.prototype.lh=function(t){var e=this;return eT(t).get(_I.key).next(function(t){if(null!==t&&e.Yo(t.leaseTimestampMs,5e3)&&!e.Zo(t.ownerId)&&!e.Go(t)&&!(e.Vo||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Vg(jg.FAILED_PRECONDITION,YI)})},ZI.prototype.Ko=function(t){var e=new _I(this.clientId,this.allowTabSynchronization,Date.now());return eT(t).put(_I.key,e)},ZI.Fs=function(){return hE.Fs()},ZI.prototype.jo=function(t){var e=this,n=eT(t);return n.get(_I.key).next(function(t){return e.Go(t)?(mg("IndexedDbPersistence","Releasing primary lease."),n.delete(_I.key)):Kw.resolve()})},ZI.prototype.Yo=function(t,e){var n=Date.now();return!(t<n-e||n<t&&(bg("Detected an update time that is in the future: "+t+" > "+n),1))},ZI.prototype.Mo=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.vo=function(){t.Es.hi(function(){return t.inForeground="visible"===t.document.visibilityState,t.xo()})},this.document.addEventListener("visibilitychange",this.vo),this.inForeground="visible"===this.document.visibilityState)},ZI.prototype.nh=function(){this.vo&&(this.document.removeEventListener("visibilitychange",this.vo),this.vo=null)},ZI.prototype.Oo=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.bo=function(){e.eh(),e.Es.hi(function(){return e.th()})},this.window.addEventListener("unload",this.bo))},ZI.prototype.sh=function(){this.bo&&(this.window.removeEventListener("unload",this.bo),this.bo=null)},ZI.prototype.Zo=function(t){var e;try{var n=null!==(null===(e=this.$o)||void 0===e?void 0:e.getItem(this.Xo(t)));return mg("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return bg("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},ZI.prototype.eh=function(){if(this.$o)try{this.$o.setItem(this.Xo(this.clientId),String(Date.now()))}catch(t){bg("Failed to set zombie client id.",t)}},ZI.prototype.ih=function(){if(this.$o)try{this.$o.removeItem(this.Xo(this.clientId))}catch(t){}},ZI.prototype.Xo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},ZI);function ZI(t,e,n,r,i,o,s,a,u,c){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.Es=i,this.window=o,this.document=s,this.Po=u,this.Vo=c,this.yo=null,this.po=!1,this.isPrimary=!1,this.networkEnabled=!0,this.bo=null,this.inForeground=!1,this.vo=null,this.So=null,this.Do=Number.NEGATIVE_INFINITY,this.Co=function(t){return Promise.resolve()},!ZI.Fs())throw new Vg(jg.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.dr=new rT(this,r),this.No=e+"main",this.serializer=new GE(a),this.Fo=new hE(this.No,10,new mI(this.serializer)),this.ko=new WI(this.dr,this.serializer),this.Gn=new jI,this.jn=new cI(this.serializer,this.Gn),this.window&&this.window.localStorage?this.$o=this.window.localStorage:(this.$o=null,!1===c&&bg("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}function tT(t,e){var n=this;return(n=XI.call(this)||this).vr=t,n.Ro=e,n}function eT(t){return $I.Ms(t,_I.store)}function nT(t){return $I.Ms(t,FI.store)}var rT=(iT.prototype.ir=function(t){var n=this._h(t);return this.db.hh().do(t).next(function(e){return n.next(function(t){return e+t})})},iT.prototype._h=function(t){var e=0;return this.or(t,function(t){e++}).next(function(){return e})},iT.prototype.pe=function(t,e){return this.db.hh().pe(t,e)},iT.prototype.or=function(t,n){return this.fh(t,function(t,e){return n(e)})},iT.prototype.Eo=function(t,e,n){return oT(t,n)},iT.prototype.mo=function(t,e,n){return oT(t,n)},iT.prototype.hr=function(t,e,n){return this.db.hh().hr(t,e,n)},iT.prototype.Dr=oT,iT.prototype.dh=function(t,e){return r=e,i=!1,aI(n=t).Zs(function(t){return rI(n,t,r).next(function(t){return t&&(i=!0),Kw.resolve(!t)})}).next(function(){return i});var n,r,i},iT.prototype.ar=function(r,i){var o=this,s=this.db.ah().jr(),a=[],u=0;return this.fh(r,function(e,t){var n;t<=i&&(n=o.dh(r,e).next(function(t){if(!t)return u++,s.On(r,e).next(function(){return s.Mn(e),QI(r).delete([0,BE(e.path)])})}),a.push(n))}).next(function(){return Kw.Dn(a)}).next(function(){return s.apply(r)}).next(function(){return u})},iT.prototype.removeTarget=function(t,e){var n=e.Z(t.Ro);return this.db.hh().lo(t,n)},iT.prototype.wh=oT,iT.prototype.fh=function(t,o){var s,e=QI(t),a=$w.Ts;return e.Xs({index:DI.documentTargetsIndex},function(t,e){var n=t[0],r=(t[1],e.path),i=e.sequenceNumber;0===n?(a!==$w.Ts&&o(new zg(HE(s)),a),a=i,s=r):a=$w.Ts}).next(function(){a!==$w.Ts&&o(new zg(HE(s)),a)})},iT.prototype.cr=function(t){return this.db.ah().zr(t)},iT);function iT(t,e){this.db=t,this.Yi=new jE(this,e)}function oT(t,e){return QI(t).put((n=t.Ro,new DI(0,BE(e.path),n)));var n}function sT(t,e){var n=t.projectId;return t.i||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var aT=(uT.prototype.Vh=function(i){return Ms(this,void 0,void 0,function(){var e,m,n,r=this;return Fs(this,function(t){switch(t.label){case 0:return e=this.Kn,m=this.Rh,[4,this.persistence.runTransaction("Handle user change","readonly",function(y){var g;return r.Kn.yr(y).next(function(t){return g=t,e=r.persistence.oh(i),m=new Yw(r.Ah,e,r.persistence.uh()),e.yr(y)}).next(function(t){for(var e=[],n=[],r=xm(),i=0,o=g;i<o.length;i++){var s=o[i];e.push(s.batchId);for(var a=0,u=s.mutations;a<u.length;a++)var c=u[a],r=r.add(c.key)}for(var h=0,l=t;h<l.length;h++){var f=l[h];n.push(f.batchId);for(var p=0,d=f.mutations;p<d.length;p++){var v=d[p];r=r.add(v.key)}}return m.Xn(y,r).next(function(t){return{gh:t,yh:e,ph:n}})})})];case 1:return n=t.sent(),[2,(this.Kn=e,this.Rh=m,this.Th.Ph(this.Rh),n)]}})})},uT.prototype.bh=function(c){var h,l=this,f=qg.now(),t=c.reduce(function(t,e){return t.add(e.key)},xm());return this.persistence.runTransaction("Locally write mutations","readwrite",function(u){return l.Rh.Xn(u,t).next(function(t){h=t;for(var a,e,n=[],r=0,i=c;r<i.length;r++){var o=i[r],s=(a=o,e=h.get(o.key),a instanceof k_?function(t){for(var e=null,n=0,r=a.fieldTransforms;n<r.length;n++){var i=r[n],o=t instanceof K_?t.field(i.field):void 0,s=zb(i.transform,o||null);null!=s&&(e=null==e?(new F_).set(i.field,s):e.set(i.field,s))}return e?e.Ge():null}(e):null);null!=s&&n.push(new T_(o.key,s,function a(t){var u=[];return Dg(t.fields||{},function(t,e){var n=new Kg([t]);if(mb(e)){var r=a(e.mapValue).fields;if(0===r.length)u.push(n);else for(var i=0,o=r;i<o.length;i++){var s=o[i];u.push(n.child(s))}}else u.push(n)}),new h_(u)}(s.proto.mapValue),d_.exists(!0)))}return l.Kn.mr(u,f,n,c)})}).then(function(t){var e=t.mn(h);return{batchId:t.batchId,Nn:e}})},uT.prototype.vh=function(r){var i=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var e=r.batch.keys(),n=i.Ah.jr({Gr:!0});return i.Sh(t,r,n).next(function(){return n.apply(t)}).next(function(){return i.Kn.Cr(t)}).next(function(){return i.Rh.Xn(t,e)})})},uT.prototype.Dh=function(t){var r=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",function(e){var n;return r.Kn.Rr(e,t).next(function(t){return Ig(null!==t),n=t.keys(),r.Kn.br(e,t)}).next(function(){return r.Kn.Cr(e)}).next(function(){return r.Rh.Xn(e,n)})})},uT.prototype.gr=function(){var e=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.Kn.gr(t)})},uT.prototype.ro=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.ko.ro(t)})},uT.prototype.Ch=function(u){var c=this,h=u.X,l=this.Eh;return this.persistence.runTransaction("Apply remote event","readwrite-primary",function(o){var i=c.Ah.jr({Gr:!0});l=c.Eh;var s=[];u.Qt.forEach(function(t,e){var n,r,i=l.get(e);i&&(s.push(c.ko.Io(o,t.Xt,e).next(function(){return c.ko.To(o,t.Yt,e)})),0<(n=t.resumeToken).H()&&(r=i.tt(n,h).Z(o.Ro),l=l.nt(e,r),uT.Nh(i,r,t)&&s.push(c.ko.lo(o,r))))});var t,a=Am,n=xm();return u.jt.forEach(function(t,e){n=n.add(t)}),s.push(i.getEntries(o,n).next(function(r){u.jt.forEach(function(t,e){var n=r.get(t);e instanceof z_&&e.version.isEqual(Bg.min())?(i.Mn(t,h),a=a.nt(t,e)):null==n||0<e.version.o(n.version)||0===e.version.o(n.version)&&n.hasPendingWrites?(i.$n(e,h),a=a.nt(t,e)):mg("LocalStore","Ignoring outdated watch update for ",t,". Current version:",n.version," Watch version:",e.version),u.Kt.has(t)&&s.push(c.persistence.dr.wh(o,t))})})),h.isEqual(Bg.min())||(t=c.ko.ro(o).next(function(t){return c.ko.ho(o,o.Ro,h)}),s.push(t)),Kw.Dn(s).next(function(){return i.apply(o)}).next(function(){return c.Rh.Zn(o,a)})}).then(function(t){return c.Eh=l,t})},uT.Nh=function(t,e,n){return Ig(0<e.resumeToken.H()),0===t.resumeToken.H()||e.X.m()-t.X.m()>=this.Fh||0<n.Yt.size+n.Jt.size+n.Xt.size},uT.prototype.kh=function(h){return Ms(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c=this;return Fs(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return Kw.forEach(h,function(e){return Kw.forEach(e.us,function(t){return c.persistence.dr.Eo(n,e.targetId,t)}).next(function(){return Kw.forEach(e.cs,function(t){return c.persistence.dr.mo(n,e.targetId,t)})})})})];case 1:return t.sent(),[3,3];case 2:if(!gE(e=t.sent()))throw e;return mg("LocalStore","Failed to update sequence numbers: "+e),[3,3];case 3:for(n=0,r=h;n<r.length;n++)i=r[n],o=i.targetId,i.fromCache||(s=this.Eh.get(o),a=s.X,u=s.et(a),this.Eh=this.Eh.nt(o,u));return[2]}})})},uT.prototype.$h=function(e){var n=this;return this.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.Kn.Vr(t,e)})},uT.prototype.xh=function(e){var n=this;return this.persistence.runTransaction("read document","readonly",function(t){return n.Rh.zn(t,e)})},uT.prototype.Mh=function(r){var i=this;return this.persistence.runTransaction("Allocate target","readwrite",function(e){var n;return i.ko.wo(e,r).next(function(t){return t?(n=t,Kw.resolve(n)):i.ko.no(e).next(function(t){return n=new vm(r,t,0,e.Ro),i.ko.ao(e,n).next(function(){return n})})})}).then(function(t){var e=i.Eh.get(t.targetId);return(null===e||0<t.X.o(e.X))&&(i.Eh=i.Eh.nt(t.targetId,t),i.Ih.set(r,t.targetId)),t})},uT.prototype.wo=function(t,e){var n=this.Ih.get(e);return void 0!==n?Kw.resolve(this.Eh.get(n)):this.ko.wo(t,e)},uT.prototype.Oh=function(o,s){return Ms(this,void 0,void 0,function(){var e,n,r,i=this;return Fs(this,function(t){switch(t.label){case 0:e=this.Eh.get(o),n=s?"readwrite":"readwrite-primary",t.label=1;case 1:return t.trys.push([1,4,,5]),s?[3,3]:[4,this.persistence.runTransaction("Release target",n,function(t){return i.persistence.dr.removeTarget(t,e)})];case 2:t.sent(),t.label=3;case 3:return[3,5];case 4:if(!gE(r=t.sent()))throw r;return mg("LocalStore","Failed to update sequence numbers for target "+o+": "+r),[3,5];case 5:return this.Eh=this.Eh.remove(o),this.Ih.delete(e.target),[2]}})})},uT.prototype.Lh=function(t,n){var r=this,i=Bg.min(),o=xm();return this.persistence.runTransaction("Execute query","readonly",function(e){return r.wo(e,ow(t)).next(function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.ko.Ao(e,t.targetId).next(function(t){o=t})}).next(function(){return r.Th.es(e,t,n?i:Bg.min(),n?o:xm())}).next(function(t){return{documents:t,qh:o}})})},uT.prototype.Sh=function(t,i,o){var e=this,s=i.batch,n=s.keys(),a=Kw.resolve();return n.forEach(function(r){a=a.next(function(){return o.On(t,r)}).next(function(t){var e=t,n=i.Rn.get(r);Ig(null!==n),(!e||e.version.o(n)<0)&&(e=s.Tn(r,e,i))&&o.$n(e,i.An)})}),a.next(function(){return e.Kn.br(t,s)})},uT.prototype.er=function(e){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(t){return e.ur(t,n.Eh)})},uT);function uT(t,e,n){this.persistence=t,this.Th=e,this.Eh=new bm(Cg),this.Ih=new Ug(am,um),this.mh=Bg.min(),this.Kn=t.oh(n),this.Ah=t.ah(),this.ko=t.hh(),this.Rh=new Yw(this.Ah,this.Kn,this.persistence.uh()),this.Th.Ph(this.Rh)}function cT(t,e){var n=t,r=n.ko,i=n.Eh.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.Me(t,e).next(function(t){return t?t.target:null})})}function hT(e){return Ms(this,void 0,void 0,function(){return Fs(this,function(t){if(e.code!==jg.FAILED_PRECONDITION||e.message!==Qw)throw e;return mg("LocalStore","Unexpectedly lost primary lease"),[2]})})}aT.Fh=3e8;var lT=(yT.prototype._=function(){return this.Bh._()},yT.prototype.Eo=function(t,e){var n=new fT(t,e);this.Bh=this.Bh.add(n),this.Qh=this.Qh.add(n)},yT.prototype.jh=function(t,e){var n=this;t.forEach(function(t){return n.Eo(t,e)})},yT.prototype.mo=function(t,e){this.Kh(new fT(t,e))},yT.prototype.Gh=function(t,e){var n=this;t.forEach(function(t){return n.mo(t,e)})},yT.prototype.zh=function(t){var e=this,n=new zg(new Hg([])),r=new fT(n,t),i=new fT(n,t+1),o=[];return this.Qh.vt([r,i],function(t){e.Kh(t),o.push(t.key)}),o},yT.prototype.Hh=function(){var e=this;this.Bh.forEach(function(t){return e.Kh(t)})},yT.prototype.Kh=function(t){this.Bh=this.Bh.delete(t),this.Qh=this.Qh.delete(t)},yT.prototype.Yh=function(t){var e=new zg(new Hg([])),n=new fT(e,t),r=new fT(e,t+1),i=xm();return this.Qh.vt([n,r],function(t){i=i.add(t.key)}),i},yT.prototype.Nr=function(t){var e=new fT(t,0),n=this.Bh.Dt(e);return null!==n&&t.isEqual(n.key)},yT),fT=(vT.Uh=function(t,e){return zg.P(t.key,e.key)||Cg(t.Jh,e.Jh)},vT.Wh=function(t,e){return Cg(t.Jh,e.Jh)||zg.P(t.key,e.key)},vT),pT=(dT.prototype.Er=function(){return null!=this.uid},dT.prototype.Xh=function(){return this.Er()?"uid:"+this.uid:"anonymous-user"},dT.prototype.isEqual=function(t){return t.uid===this.uid},dT);function dT(t){this.uid=t}function vT(t,e){this.key=t,this.Jh=e}function yT(){this.Bh=new Cm(fT.Uh),this.Qh=new Cm(fT.Wh)}function gT(t,e){this.user=e,this.type="OAuth",this.ea={},this.ea.Authorization="Bearer "+t}pT.UNAUTHENTICATED=new pT(null),pT.Zh=new pT("google-credentials-uid"),pT.ta=new pT("first-party-uid");var mT,bT,_T,wT=(VT.prototype.getToken=function(){return Promise.resolve(null)},VT.prototype.sa=function(){},VT.prototype.ia=function(t){(this.na=t)(pT.UNAUTHENTICATED)},VT.prototype.ra=function(){this.na=null},VT),ET=(jT.prototype.getToken=function(){var e=this,n=this.aa,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(function(t){return e.aa!==n?(mg("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):t?(Ig("string"==typeof t.accessToken),new gT(t.accessToken,e.currentUser)):null}):Promise.resolve(null)},jT.prototype.sa=function(){this.forceRefresh=!0},jT.prototype.ia=function(t){this.na=t,this.ha&&t(this.currentUser)},jT.prototype.ra=function(){this.auth&&this.auth.removeAuthTokenListener(this.oa),this.oa=null,this.na=null},jT.prototype.ua=function(){var t=this.auth&&this.auth.getUid();return Ig(null===t||"string"==typeof t),new pT(t)},jT),IT=(Object.defineProperty(UT.prototype,"ea",{get:function(){var t={"X-Goog-AuthUser":this.la},e=this.ca.auth._a([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),UT),TT=(FT.prototype.getToken=function(){return Promise.resolve(new IT(this.ca,this.la))},FT.prototype.ia=function(t){t(pT.ta)},FT.prototype.ra=function(){},FT.prototype.sa=function(){},FT),ST=(MT.prototype.Ia=function(){return 1===this.state||2===this.state||4===this.state},MT.prototype.ma=function(){return 2===this.state},MT.prototype.start=function(){3!==this.state?this.auth():this.Aa()},MT.prototype.stop=function(){return Ms(this,void 0,void 0,function(){return Fs(this,function(t){switch(t.label){case 0:return this.Ia()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},MT.prototype.Ra=function(){this.state=0,this.wi.reset()},MT.prototype.Pa=function(){var t=this;this.ma()&&null===this.Ea&&(this.Ea=this.Es.vs(this.fa,6e4,function(){return t.Va()}))},MT.prototype.ga=function(t){this.ya(),this.stream.send(t)},MT.prototype.Va=function(){return Ms(this,void 0,void 0,function(){return Fs(this,function(t){return this.ma()?[2,this.close(0)]:[2]})})},MT.prototype.ya=function(){this.Ea&&(this.Ea.cancel(),this.Ea=null)},MT.prototype.close=function(e,n){return Ms(this,void 0,void 0,function(){return Fs(this,function(t){switch(t.label){case 0:return this.ya(),this.wi.cancel(),this.Ta++,3!==e?this.wi.reset():n&&n.code===jg.RESOURCE_EXHAUSTED?(bg(n.toString()),bg("Using maximum backoff delay to prevent overloading the backend."),this.wi.ys()):n&&n.code===jg.UNAUTHENTICATED&&this.wa.sa(),null!==this.stream&&(this.pa(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.ba(n)];case 1:return t.sent(),[2]}})})},MT.prototype.pa=function(){},MT.prototype.auth=function(){var n=this;this.state=1;var t=this.va(this.Ta),e=this.Ta;this.wa.getToken().then(function(t){n.Ta===e&&n.Sa(t)},function(e){t(function(){var t=new Vg(jg.UNKNOWN,"Fetching auth token failed: "+e.message);return n.Da(t)})})},MT.prototype.Sa=function(t){var e=this,n=this.va(this.Ta);this.stream=this.Ca(t),this.stream.Na(function(){n(function(){return e.state=2,e.listener.Na()})}),this.stream.ba(function(t){n(function(){return e.Da(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},MT.prototype.Aa=function(){var t=this;this.state=4,this.wi.ps(function(){return Ms(t,void 0,void 0,function(){return Fs(this,function(t){return this.state=0,this.start(),[2]})})})},MT.prototype.Da=function(t){return mg("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},MT.prototype.va=function(e){var n=this;return function(t){n.Es.hi(function(){return n.Ta===e?t():(mg("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},MT),CT=(xs(LT,_T=ST),LT.prototype.Ca=function(t){return this.da.Fa("Listen",t)},LT.prototype.onMessage=function(t){this.wi.reset();var e=function(t,e){var n,r,i,o;if("targetChange"in e){e.targetChange;var s="NO_CHANGE"===(o=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===o?1:"REMOVE"===o?2:"CURRENT"===o?3:"RESET"===o?4:Eg(),a=e.targetChange.targetIds||[],u=(i=e.targetChange.resumeToken,t.Oe?(Ig(void 0===i||"string"==typeof i),hm.fromBase64String(i||"")):(Ig(void 0===i||i instanceof Uint8Array),hm.fromUint8Array(i||new Uint8Array))),c=e.targetChange.cause,h=new Um(s,a,u,c&&(r=void 0===(n=c).code?jg.UNKNOWN:mm(n.code),new Vg(r,n.message||""))||null)}else if("documentChange"in e){e.documentChange;var l=e.documentChange;l.document,l.document.name,l.document.updateTime;var f=Rb(t,l.document.name),p=Nb(l.document.updateTime),d=new M_({mapValue:{fields:l.document.fields}}),v=new K_(f,p,d,{}),h=new Mm(l.targetIds||[],l.removedTargetIds||[],v.key,v)}else if("documentDelete"in e){e.documentDelete;var y=e.documentDelete;y.document;var g=Rb(t,y.document),m=y.readTime?Nb(y.readTime):Bg.min(),b=new z_(g,m);h=new Mm([],y.removedTargetIds||[],b.key,b)}else if("documentRemove"in e){e.documentRemove;var _=e.documentRemove;_.document;var w=Rb(t,_.document);h=new Mm([],_.removedTargetIds||[],w,null)}else{if(!("filter"in e))return Eg();e.filter;var E=e.filter;E.targetId;var I=new fm(E.count||0);h=new Fm(E.targetId,I)}return h}(this.serializer,t),n=function(t){if(!("targetChange"in t))return Bg.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length||!e.readTime?Bg.min():Nb(e.readTime)}(t);return this.listener.ka(e,n)},LT.prototype.$a=function(t){var e,n,r,i,o={};o.database=xb(this.serializer),o.addTarget=(e=this.serializer,(r=cm(i=(n=t).target)?{documents:jb(e,i)}:{query:Vb(e,i)}).targetId=n.targetId,0<n.resumeToken.H()&&(r.resumeToken=Cb(e,n.resumeToken)),r);var s,a,u=(this.serializer,s=t,null==(a=function(){switch(s.J){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Eg()}}())?null:{"goog-listen-tags":a});u&&(o.labels=u),this.ga(o)},LT.prototype.xa=function(t){var e={};e.database=xb(this.serializer),e.removeTarget=t,this.ga(e)},LT),NT=(xs(xT,bT=ST),Object.defineProperty(xT.prototype,"Oa",{get:function(){return this.Ma},enumerable:!1,configurable:!0}),xT.prototype.start=function(){this.Ma=!1,this.lastStreamToken=void 0,bT.prototype.start.call(this)},xT.prototype.pa=function(){this.Ma&&this.La([])},xT.prototype.Ca=function(t){return this.da.Fa("Write",t)},xT.prototype.onMessage=function(t){if(Ig(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Ma){this.wi.reset();var e=(r=t.writeResults,i=t.commitTime,r&&0<r.length?(Ig(void 0!==i),r.map(function(t){return function(t,e){var n=t.updateTime?Nb(t.updateTime):Nb(e);n.isEqual(Bg.min())&&(n=Nb(e));var r=null;return t.transformResults&&0<t.transformResults.length&&(r=t.transformResults),new p_(n,r)}(t,i)})):[]),n=Nb(t.commitTime);return this.listener.qa(n,e)}var r,i;return Ig(!t.writeResults||0===t.writeResults.length),this.Ma=!0,this.listener.Ba()},xT.prototype.Ua=function(){var t={};t.database=xb(this.serializer),this.ga(t)},xT.prototype.La=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return Fb(e.serializer,t)})};this.ga(n)},xT),AT=(xs(DT,mT=function(){}),DT.prototype.Wa=function(){if(this.Qa)throw new Vg(jg.FAILED_PRECONDITION,"The client has already been terminated.")},DT.prototype.ja=function(e,n,r){var i=this;return this.Wa(),this.credentials.getToken().then(function(t){return i.da.ja(e,n,r,t)}).catch(function(t){throw t.code===jg.UNAUTHENTICATED&&i.credentials.sa(),t})},DT.prototype.Ka=function(e,n,r){var i=this;return this.Wa(),this.credentials.getToken().then(function(t){return i.da.Ka(e,n,r,t)}).catch(function(t){throw t.code===jg.UNAUTHENTICATED&&i.credentials.sa(),t})},DT.prototype.terminate=function(){this.Qa=!1},DT),kT=(PT.prototype.Ja=function(){var t=this;0===this.za&&(this.Xa("Unknown"),this.Ha=this.ti.vs("online_state_timeout",1e4,function(){return t.Ha=null,t.Za("Backend didn't respond within 10 seconds."),t.Xa("Offline"),Promise.resolve()}))},PT.prototype.tu=function(t){"Online"===this.state?this.Xa("Unknown"):(this.za++,1<=this.za&&(this.eu(),this.Za("Connection failed 1 times. Most recent error: "+t.toString()),this.Xa("Offline")))},PT.prototype.set=function(t){this.eu(),this.za=0,"Online"===t&&(this.Ya=!1),this.Xa(t)},PT.prototype.Xa=function(t){t!==this.state&&(this.state=t,this.Ga(t))},PT.prototype.Za=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Ya?(bg(e),this.Ya=!1):mg("OnlineStateTracker",e)},PT.prototype.eu=function(){null!==this.Ha&&(this.Ha.cancel(),this.Ha=null)},PT),OT=(RT.prototype.start=function(){return this.enableNetwork()},RT.prototype.enableNetwork=function(){return this.hu.delete(0),this.Ru()},RT.prototype.Ru=function(){return Ms(this,void 0,void 0,function(){return Fs(this,function(t){switch(t.label){case 0:return this.cu()?(this.Pu()?this.Vu():this._u.set("Unknown"),[4,this.gu()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},RT.prototype.disableNetwork=function(){return Ms(this,void 0,void 0,function(){return Fs(this,function(t){switch(t.label){case 0:return this.hu.add(0),[4,this.yu()];case 1:return t.sent(),this._u.set("Offline"),[2]}})})},RT.prototype.yu=function(){return Ms(this,void 0,void 0,function(){return Fs(this,function(t){switch(t.label){case 0:return[4,this.Eu.stop()];case 1:return t.sent(),[4,this.fu.stop()];case 2:return t.sent(),0<this.iu.length&&(mg("RemoteStore","Stopping write stream with "+this.iu.length+" pending writes"),this.iu=[]),this.pu(),[2]}})})},RT.prototype.th=function(){return Ms(this,void 0,void 0,function(){return Fs(this,function(t){switch(t.label){case 0:return mg("RemoteStore","RemoteStore shutting down."),this.hu.add(5),[4,this.yu()];case 1:return t.sent(),this.au.th(),this._u.set("Unknown"),[2]}})})},RT.prototype.listen=function(t){this.ru.has(t.targetId)||(this.ru.set(t.targetId,t),this.Pu()?this.Vu():this.fu.ma()&&this.bu(t))},RT.prototype.vu=function(t){this.ru.delete(t),this.fu.ma()&&this.Su(t),0===this.ru.size&&(this.fu.ma()?this.fu.Pa():this.cu()&&this._u.set("Unknown"))},RT.prototype.Me=function(t){return this.ru.get(t)||null},RT.prototype.xe=function(t){return this.Du.xe(t)},RT.prototype.bu=function(t){this.ou.de(t.targetId),this.fu.$a(t)},RT.prototype.Su=function(t){this.ou.de(t),this.fu.xa(t)},RT.prototype.Vu=function(){this.ou=new Gm(this),this.fu.start(),this._u.Ja()},RT.prototype.Pu=function(){return this.cu()&&!this.fu.Ia()&&0<this.ru.size},RT.prototype.cu=function(){return 0===this.hu.size},RT.prototype.pu=function(){this.ou=null},RT.prototype.du=function(){return Ms(this,void 0,void 0,function(){var n=this;return Fs(this,function(t){return this.ru.forEach(function(t,e){n.bu(t)}),[2]})})},RT.prototype.wu=function(e){return Ms(this,void 0,void 0,function(){return Fs(this,function(t){return this.pu(),this.Pu()?(this._u.tu(e),this.Vu()):this._u.set("Unknown"),[2]})})},RT.prototype.Tu=function(i,o){return Ms(this,void 0,void 0,function(){var e,n,r;return Fs(this,function(t){switch(t.label){case 0:if(this._u.set("Online"),!(i instanceof Um&&2===i.state&&i.cause))return[3,6];t.label=1;case 1:return t.trys.push([1,3,,5]),[4,this.Cu(i)];case 2:return t.sent(),[3,5];case 3:return e=t.sent(),mg("RemoteStore","Failed to remove targets %s: %s ",i.targetIds.join(","),e),[4,this.Nu(e)];case 4:return t.sent(),[3,5];case 5:return[3,13];case 6:if(i instanceof Mm?this.ou.Pe(i):i instanceof Fm?this.ou.De(i):this.ou.ye(i),o.isEqual(Bg.min()))return[3,13];t.label=7;case 7:return t.trys.push([7,11,,13]),[4,this.nu.ro()];case 8:return n=t.sent(),0<=o.o(n)?[4,this.Fu(o)]:[3,10];case 9:t.sent(),t.label=10;case 10:return[3,13];case 11:return mg("RemoteStore","Failed to raise snapshot:",r=t.sent()),[4,this.Nu(r)];case 12:return t.sent(),[3,13];case 13:return[2]}})})},RT.prototype.Nu=function(n,r){return Ms(this,void 0,void 0,function(){var e=this;return Fs(this,function(t){switch(t.label){case 0:if(!gE(n))throw n;return this.hu.add(1),[4,this.yu()];case 1:return t.sent(),this._u.set("Offline"),r=r||function(){return e.nu.ro()},this.ti.Vi(function(){return Ms(e,void 0,void 0,function(){return Fs(this,function(t){switch(t.label){case 0:return mg("RemoteStore","Retrying IndexedDB access"),[4,r()];case 1:return t.sent(),this.hu.delete(1),[4,this.Ru()];case 2:return t.sent(),[2]}})})}),[2]}})})},RT.prototype.ku=function(e){var n=this;return e().catch(function(t){return n.Nu(t,e)})},RT.prototype.Fu=function(r){var i=this,t=this.ou.Fe(r);return t.Qt.forEach(function(t,e){var n;0<t.resumeToken.H()&&(n=i.ru.get(e))&&i.ru.set(e,n.tt(t.resumeToken,r))}),t.Wt.forEach(function(t){var e,n=i.ru.get(t);n&&(i.ru.set(t,n.tt(hm.Y,n.X)),i.Su(t),e=new vm(n.target,t,1,n.sequenceNumber),i.bu(e))}),this.Du.Ch(t)},RT.prototype.Cu=function(o){return Ms(this,void 0,void 0,function(){var e,n,r,i;return Fs(this,function(t){switch(t.label){case 0:e=o.cause,n=0,r=o.targetIds,t.label=1;case 1:return n<r.length?(i=r[n],this.ru.has(i)?[4,this.Du.$u(i,e)]:[3,3]):[3,5];case 2:t.sent(),this.ru.delete(i),this.ou.removeTarget(i),t.label=3;case 3:t.label=4;case 4:return n++,[3,1];case 5:return[2]}})})},RT.prototype.gu=function(){return Ms(this,void 0,void 0,function(){var e,n,r;return Fs(this,function(t){switch(t.label){case 0:e=0<this.iu.length?this.iu[this.iu.length-1].batchId:-1,t.label=1;case 1:if(!this.xu())return[3,7];t.label=2;case 2:return t.trys.push([2,4,,6]),[4,this.nu.$h(e)];case 3:return null===(n=t.sent())?(0===this.iu.length&&this.Eu.Pa(),[3,7]):(e=n.batchId,this.Mu(n),[3,6]);case 4:return r=t.sent(),[4,this.Nu(r)];case 5:return t.sent(),[3,6];case 6:return[3,1];case 7:return this.Ou()&&this.Lu(),[2]}})})},RT.prototype.xu=function(){return this.cu()&&this.iu.length<10},RT.prototype.qu=function(){return this.iu.length},RT.prototype.Mu=function(t){this.iu.push(t),this.Eu.ma()&&this.Eu.Oa&&this.Eu.La(t.mutations)},RT.prototype.Ou=function(){return this.cu()&&!this.Eu.Ia()&&0<this.iu.length},RT.prototype.Lu=function(){this.Eu.start()},RT.prototype.Iu=function(){return Ms(this,void 0,void 0,function(){return Fs(this,function(t){return this.Eu.Ua(),[2]})})},RT.prototype.Au=function(){return Ms(this,void 0,void 0,function(){var e,n,r;return Fs(this,function(t){for(e=0,n=this.iu;e<n.length;e++)r=n[e],this.Eu.La(r.mutations);return[2]})})},RT.prototype.qa=function(i,o){return Ms(this,void 0,void 0,function(){var e,n,r=this;return Fs(this,function(t){switch(t.label){case 0:return e=this.iu.shift(),n=Gw.from(e,i,o),[4,this.ku(function(){return r.Du.Bu(n)})];case 1:return t.sent(),[4,this.gu()];case 2:return t.sent(),[2]}})})},RT.prototype.mu=function(e){return Ms(this,void 0,void 0,function(){return Fs(this,function(t){switch(t.label){case 0:return e&&this.Eu.Oa?[4,this.Uu(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.Ou()&&this.Lu(),[2]}})})},RT.prototype.Uu=function(i){return Ms(this,void 0,void 0,function(){var e,n,r=this;return Fs(this,function(t){switch(t.label){case 0:return gm(n=i.code)&&n!==jg.ABORTED?(e=this.iu.shift(),this.Eu.Ra(),[4,this.ku(function(){return r.Du.Qu(e.batchId,i)})]):[3,3];case 1:return t.sent(),[4,this.gu()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},RT.prototype.lu=function(){return Ms(this,void 0,void 0,function(){return Fs(this,function(t){switch(t.label){case 0:return this.hu.add(4),[4,this.yu()];case 1:return t.sent(),this._u.set("Unknown"),this.Eu.Ra(),this.fu.Ra(),this.hu.delete(4),[4,this.Ru()];case 2:return t.sent(),[2]}})})},RT.prototype.Wu=function(e){return Ms(this,void 0,void 0,function(){return Fs(this,function(t){switch(t.label){case 0:return this.ti.pi(),mg("RemoteStore","RemoteStore received new credentials"),this.hu.add(3),[4,this.yu()];case 1:return t.sent(),this._u.set("Unknown"),[4,this.Du.Wu(e)];case 2:return t.sent(),this.hu.delete(3),[4,this.Ru()];case 3:return t.sent(),[2]}})})},RT.prototype.ju=function(e){return Ms(this,void 0,void 0,function(){return Fs(this,function(t){switch(t.label){case 0:return e?(this.hu.delete(2),[4,this.Ru()]):[3,2];case 1:return t.sent(),[3,5];case 2:return e?[3,4]:(this.hu.add(2),[4,this.yu()]);case 3:t.sent(),this._u.set("Unknown"),t.label=4;case 4:t.label=5;case 5:return[2]}})})},RT);function RT(t,e,n,r,i){var o,s,a,u,c,h,l,f,p=this;this.nu=t,this.su=e,this.ti=n,this.iu=[],this.ru=new Map,this.ou=null,this.hu=new Set,this.au=i,this.au.uu(function(t){n.hi(function(){return Ms(p,void 0,void 0,function(){return Fs(this,function(t){switch(t.label){case 0:return this.cu()?(mg("RemoteStore","Restarting streams for network reachability change."),[4,this.lu()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this._u=new kT(n,r),this.fu=(c=this.su,h=n,l={Na:this.du.bind(this),ba:this.wu.bind(this),ka:this.Tu.bind(this)},(f=c).Wa(),new CT(h,f.da,f.credentials,f.serializer,l)),this.Eu=(o=this.su,s=n,a={Na:this.Iu.bind(this),ba:this.mu.bind(this),Ba:this.Au.bind(this),qa:this.qa.bind(this)},(u=o).Wa(),new NT(s,u.da,u.credentials,u.serializer,a))}function PT(t,e){this.ti=t,this.Ga=e,this.state="Unknown",this.za=0,this.Ha=null,this.Ya=!0}function DT(t,e,n){var r=this;return(r=mT.call(this)||this).credentials=t,r.da=e,r.serializer=n,r.Qa=!1,r}function xT(t,e,n,r,i){var o=this;return(o=bT.call(this,t,"write_stream_connection_backoff","write_stream_idle",e,n,i)||this).serializer=r,o.Ma=!1,o}function LT(t,e,n,r,i){var o=this;return(o=_T.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",e,n,i)||this).serializer=r,o}function MT(t,e,n,r,i,o){this.Es=t,this.fa=n,this.da=r,this.wa=i,this.listener=o,this.state=0,this.Ta=0,this.Ea=null,this.stream=null,this.wi=new cE(t,e)}function FT(t,e){this.ca=t,this.la=e}function UT(t,e){this.ca=t,this.la=e,this.type="FirstParty",this.user=pT.ta}function jT(t){var e=this;this.oa=null,this.currentUser=pT.UNAUTHENTICATED,this.ha=!1,this.aa=0,this.na=null,this.forceRefresh=!1,this.oa=function(){e.aa++,e.currentUser=e.ua(),e.ha=!0,e.na&&e.na(e.currentUser)},this.aa=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.oa):(this.oa(null),t.get().then(function(t){e.auth=t,e.oa&&e.auth.addAuthTokenListener(e.oa)},function(){}))}function VT(){this.na=null}function qT(t,e){return"firestore_clients_"+t+"_"+e}function BT(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.Er()&&(r+="_"+e.uid),r}function WT(t,e){return"firestore_targets_"+t+"_"+e}function HT(t){this.key=t}function GT(t){this.key=t}function KT(t,e,n){this.query=t,this.targetId=e,this.view=n}function zT(t){this.key=t,this.el=!1}var QT=(lS.Ku=function(t,e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new Vg(r.error.code,r.error.message)),i?new lS(t,e,r.state,o):(bg("SharedClientState","Failed to parse mutation state for ID '"+e+"': "+n),null)},lS.prototype.Gu=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},lS),XT=(hS.Ku=function(t,e){var n=JSON.parse(e),r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),i=void 0;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new Vg(n.error.code,n.error.message)),r?new hS(t,n.state,i):(bg("SharedClientState","Failed to parse target state for ID '"+t+"': "+e),null)},hS.prototype.Gu=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},hS),YT=(cS.Ku=function(t,e){for(var n=JSON.parse(e),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Lm,o=0;r&&o<n.activeTargetIds.length;++o)r=im(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new cS(t,i):(bg("SharedClientState","Failed to parse client data for instance '"+t+"': "+e),null)},cS),JT=(uS.Ku=function(t){var e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new uS(e.clientId,e.onlineState):(bg("SharedClientState","Failed to parse online state: "+t),null)},uS),$T=(aS.prototype.zu=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},aS.prototype.Hu=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},aS.prototype.Gu=function(){var t={activeTargetIds:this.activeTargetIds.N(),updateTimeMs:Date.now()};return JSON.stringify(t)},aS),ZT=(sS.Fs=function(t){return!(!t||!t.localStorage)},sS.prototype.start=function(){return Ms(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l,f=this;return Fs(this,function(t){switch(t.label){case 0:return[4,this.Du.rh()];case 1:for(e=t.sent(),n=0,r=e;n<r.length;n++)(i=r[n])!==this.Yu&&(o=this.getItem(qT(this.persistenceKey,i)))&&(s=YT.Ku(i,o))&&(this.Zu=this.Zu.nt(s.clientId,s));for(this.hc(),(a=this.storage.getItem(this.oc))&&(u=this.ac(a))&&this.uc(u),c=0,h=this.tc;c<h.length;c++)l=h[c],this.Xu(l);return this.tc=[],this.window.addEventListener("unload",function(){return f.th()}),this.tr=!0,[2]}})})},sS.prototype.ws=function(t){this.setItem(this.nc,JSON.stringify(t))},sS.prototype.cc=function(){return this.lc(this.Zu)},sS.prototype._c=function(n){var r=!1;return this.Zu.forEach(function(t,e){e.activeTargetIds.has(n)&&(r=!0)}),r},sS.prototype.fc=function(t){this.dc(t,"pending")},sS.prototype.wc=function(t,e,n){this.dc(t,e,n),this.Tc(t)},sS.prototype.Ec=function(t){var e,n,r="not-current";return this._c(t)&&(!(e=this.storage.getItem(WT(this.persistenceKey,t)))||(n=XT.Ku(t,e))&&(r=n.state)),this.Ic.zu(t),this.hc(),r},sS.prototype.mc=function(t){this.Ic.Hu(t),this.hc()},sS.prototype.Ac=function(t){return this.Ic.activeTargetIds.has(t)},sS.prototype.Rc=function(t){this.removeItem(WT(this.persistenceKey,t))},sS.prototype.Pc=function(t,e,n){this.Vc(t,e,n)},sS.prototype.Vh=function(t,e,n){var r=this;e.forEach(function(t){r.Tc(t)}),this.currentUser=t,n.forEach(function(t){r.fc(t)})},sS.prototype.gc=function(t){this.yc(t)},sS.prototype.th=function(){this.tr&&(this.window.removeEventListener("storage",this.Ju),this.removeItem(this.ec),this.tr=!1)},sS.prototype.getItem=function(t){var e=this.storage.getItem(t);return mg("SharedClientState","READ",t,e),e},sS.prototype.setItem=function(t,e){mg("SharedClientState","SET",t,e),this.storage.setItem(t,e)},sS.prototype.removeItem=function(t){mg("SharedClientState","REMOVE",t),this.storage.removeItem(t)},sS.prototype.Xu=function(t){var e=this,a=t;if(a.storageArea===this.storage){if(mg("SharedClientState","EVENT",a.key,a.newValue),a.key===this.ec)return void bg("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Es.Vi(function(){return Ms(e,void 0,void 0,function(){var e,n,r,i,o,s;return Fs(this,function(t){if(this.tr){if(null!==a.key)if(this.sc.test(a.key)){if(null==a.newValue)return e=this.pc(a.key),[2,this.bc(e,null)];if(n=this.vc(a.key,a.newValue))return[2,this.bc(n.clientId,n)]}else if(this.ic.test(a.key)){if(null!==a.newValue&&(r=this.Sc(a.key,a.newValue)))return[2,this.Dc(r)]}else if(this.rc.test(a.key)){if(null!==a.newValue&&(i=this.Cc(a.key,a.newValue)))return[2,this.Nc(i)]}else if(a.key===this.oc){if(null!==a.newValue&&(o=this.ac(a.newValue)))return[2,this.uc(o)]}else a.key===this.nc&&(s=function(t){var e=$w.Ts;if(null!=t)try{var n=JSON.parse(t);Ig("number"==typeof n),e=n}catch(t){bg("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(a.newValue))!==$w.Ts&&this._s(s)}else this.tc.push(a);return[2]})})})}},Object.defineProperty(sS.prototype,"Ic",{get:function(){return this.Zu.get(this.Yu)},enumerable:!1,configurable:!0}),sS.prototype.hc=function(){this.setItem(this.ec,this.Ic.Gu())},sS.prototype.dc=function(t,e,n){var r=new QT(this.currentUser,t,e,n),i=BT(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Gu())},sS.prototype.Tc=function(t){var e=BT(this.persistenceKey,this.currentUser,t);this.removeItem(e)},sS.prototype.yc=function(t){var e={clientId:this.Yu,onlineState:t};this.storage.setItem(this.oc,JSON.stringify(e))},sS.prototype.Vc=function(t,e,n){var r=WT(this.persistenceKey,t),i=new XT(t,e,n);this.setItem(r,i.Gu())},sS.prototype.pc=function(t){var e=this.sc.exec(t);return e?e[1]:null},sS.prototype.vc=function(t,e){var n=this.pc(t);return YT.Ku(n,e)},sS.prototype.Sc=function(t,e){var n=this.ic.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return QT.Ku(new pT(i),r,e)},sS.prototype.Cc=function(t,e){var n=this.rc.exec(t),r=Number(n[1]);return XT.Ku(r,e)},sS.prototype.ac=function(t){return JT.Ku(t)},sS.prototype.Dc=function(e){return Ms(this,void 0,void 0,function(){return Fs(this,function(t){return e.user.uid===this.currentUser.uid?[2,this.Du.Fc(e.batchId,e.state,e.error)]:(mg("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])})})},sS.prototype.Nc=function(t){return this.Du.kc(t.targetId,t.state,t.error)},sS.prototype.bc=function(t,e){var n=this,r=e?this.Zu.nt(t,e):this.Zu.remove(t),i=this.lc(this.Zu),o=this.lc(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.Du.$c(s,a).then(function(){n.Zu=r})},sS.prototype.uc=function(t){this.Zu.get(t.clientId)&&this.Ga(t.onlineState)},sS.prototype.lc=function(t){var n=Lm;return t.forEach(function(t,e){n=n.Ct(e.activeTargetIds)}),n},sS),tS=(oS.prototype.fc=function(t){},oS.prototype.wc=function(t,e,n){},oS.prototype.Ec=function(t){return this.xc.zu(t),this.Mc[t]||"not-current"},oS.prototype.Pc=function(t,e,n){this.Mc[t]=e},oS.prototype.mc=function(t){this.xc.Hu(t)},oS.prototype.Ac=function(t){return this.xc.activeTargetIds.has(t)},oS.prototype.Rc=function(t){delete this.Mc[t]},oS.prototype.cc=function(){return this.xc.activeTargetIds},oS.prototype._c=function(t){return this.xc.activeTargetIds.has(t)},oS.prototype.start=function(){return this.xc=new $T,Promise.resolve()},oS.prototype.Vh=function(t,e,n){},oS.prototype.gc=function(t){},oS.prototype.th=function(){},oS.prototype.ws=function(t){},oS),eS=(Object.defineProperty(iS.prototype,"Qc",{get:function(){return this.Oc},enumerable:!1,configurable:!0}),iS.prototype.Wc=function(t,e){var a=this,u=e?e.jc:new Vm,c=e?e.Uc:this.Uc,h=e?e.Lt:this.Lt,l=c,f=!1,p=this.query.hn()&&c.size===this.query.limit?c.last():null,d=this.query.an()&&c.size===this.query.limit?c.first():null;if(t.ot(function(t,e){var n=c.get(t),r=(r=e instanceof K_?e:null)&&(fw(a.query,r)?r:null),i=!!n&&a.Lt.has(n.key),o=!!r&&(r.Ke||a.Lt.has(r.key)&&r.hasCommittedMutations),s=!1;n&&r?n.data().isEqual(r.data())?i!==o&&(u.track({type:3,doc:r}),s=!0):a.Kc(n,r)||(u.track({type:2,doc:r}),s=!0,(p&&0<a.Bc(r,p)||d&&a.Bc(r,d)<0)&&(f=!0)):!n&&r?(u.track({type:0,doc:r}),s=!0):n&&!r&&(u.track({type:1,doc:n}),s=!0,(p||d)&&(f=!0)),s&&(h=r?(l=l.add(r),o?h.add(t):h.delete(t)):(l=l.delete(t),h.delete(t)))}),this.query.hn()||this.query.an())for(;l.size>this.query.limit;){var n=this.query.hn()?l.last():l.first(),l=l.delete(n.key),h=h.delete(n.key);u.track({type:1,doc:n})}return{Uc:l,jc:u,Gc:f,Lt:h}},iS.prototype.Kc=function(t,e){return t.Ke&&e.hasCommittedMutations&&!e.Ke},iS.prototype.Bn=function(t,e,n){var o=this,r=this.Uc;this.Uc=t.Uc,this.Lt=t.Lt;var i=t.jc.Mt();i.sort(function(t,e){return r=t.type,i=e.type,n(r)-n(i)||o.Bc(t.doc,e.doc);function n(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Eg()}}var r,i}),this.zc(n);var s=e?this.Hc():[],a=0===this.qc.size&&this.Ht?1:0,u=a!==this.Lc;return this.Lc=a,0!==i.length||u?{snapshot:new qm(this.query,t.Uc,r,i,t.Lt,0==a,u,!1),Yc:s}:{Yc:s}},iS.prototype.Jc=function(t){return this.Ht&&"Offline"===t?(this.Ht=!1,this.Bn({Uc:this.Uc,jc:new Vm,Lt:this.Lt,Gc:!1},!1)):{Yc:[]}},iS.prototype.Xc=function(t){return!this.Oc.has(t)&&!!this.Uc.has(t)&&!this.Uc.get(t).Ke},iS.prototype.zc=function(t){var e=this;t&&(t.Yt.forEach(function(t){return e.Oc=e.Oc.add(t)}),t.Jt.forEach(function(t){}),t.Xt.forEach(function(t){return e.Oc=e.Oc.delete(t)}),this.Ht=t.Ht)},iS.prototype.Hc=function(){var e=this;if(!this.Ht)return[];var n=this.qc;this.qc=xm(),this.Uc.forEach(function(t){e.Xc(t.key)&&(e.qc=e.qc.add(t.key))});var r=[];return n.forEach(function(t){e.qc.has(t)||r.push(new GT(t))}),this.qc.forEach(function(t){n.has(t)||r.push(new HT(t))}),r},iS.prototype.Zc=function(t){this.Oc=t.qh,this.qc=xm();var e=this.Wc(t.documents);return this.Bn(e,!0)},iS.prototype.tl=function(){return qm.Ut(this.query,this.Uc,this.Lt,0===this.Lc)},iS),nS=(Object.defineProperty(rS.prototype,"Tl",{get:function(){return!0===this.wl},enumerable:!1,configurable:!0}),rS.prototype.subscribe=function(t){this.rl=t},rS.prototype.listen=function(s){return Ms(this,void 0,void 0,function(){var e,n,r,i,o;return Fs(this,function(t){switch(t.label){case 0:return this.El("listen()"),(r=this.ol.get(s))?(e=r.targetId,this.sl.Ec(e),n=r.view.tl(),[3,4]):[3,1];case 1:return[4,this.nu.Mh(ow(s))];case 2:return i=t.sent(),o=this.sl.Ec(i.targetId),e=i.targetId,[4,this.Il(s,e,"current"===o)];case 3:n=t.sent(),this.Tl&&this.nl.listen(i),t.label=4;case 4:return[2,n]}})})},rS.prototype.Il=function(a,u,c){return Ms(this,void 0,void 0,function(){var e,n,r,i,o,s;return Fs(this,function(t){switch(t.label){case 0:return[4,this.nu.Lh(a,!0)];case 1:return e=t.sent(),n=new eS(a,e.qh),r=n.Wc(e.documents),i=Wm.zt(u,c&&"Offline"!==this.onlineState),o=n.Bn(r,this.Tl,i),this.ml(u,o.Yc),s=new KT(a,u,n),[2,(this.ol.set(a,s),this.hl.has(u)?this.hl.get(u).push(a):this.hl.set(u,[a]),o.snapshot)]}})})},rS.prototype.vu=function(i){return Ms(this,void 0,void 0,function(){var e,n,r=this;return Fs(this,function(t){switch(t.label){case 0:return this.El("unlisten()"),e=this.ol.get(i),1<(n=this.hl.get(e.targetId)).length?[2,(this.hl.set(e.targetId,n.filter(function(t){return!cw(t,i)})),void this.ol.delete(i))]:this.Tl?(this.sl.mc(e.targetId),this.sl._c(e.targetId)?[3,2]:[4,this.nu.Oh(e.targetId,!1).then(function(){r.sl.Rc(e.targetId),r.nl.vu(e.targetId),r.Al(e.targetId)}).catch(hT)]):[3,3];case 1:t.sent(),t.label=2;case 2:return[3,5];case 3:return this.Al(e.targetId),[4,this.nu.Oh(e.targetId,!0)];case 4:t.sent(),t.label=5;case 5:return[2]}})})},rS.prototype.write=function(i,o){return Ms(this,void 0,void 0,function(){var e,n,r;return Fs(this,function(t){switch(t.label){case 0:this.El("write()"),t.label=1;case 1:return t.trys.push([1,5,,6]),[4,this.nu.bh(i)];case 2:return e=t.sent(),this.sl.fc(e.batchId),this.Rl(e.batchId,o),[4,this.Pl(e.Nn)];case 3:return t.sent(),[4,this.nl.gu()];case 4:return t.sent(),[3,6];case 5:return n=t.sent(),r=RE(n,"Failed to persist write"),o.reject(r),[3,6];case 6:return[2]}})})},rS.prototype.Ch=function(n){return Ms(this,void 0,void 0,function(){var e,r=this;return Fs(this,function(t){switch(t.label){case 0:this.El("applyRemoteEvent()"),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.nu.Ch(n)];case 2:return e=t.sent(),n.Qt.forEach(function(t,e){var n=r.cl.get(e);n&&(Ig(t.Yt.size+t.Jt.size+t.Xt.size<=1),0<t.Yt.size?n.el=!0:0<t.Jt.size?Ig(n.el):0<t.Xt.size&&(Ig(n.el),n.el=!1))}),[4,this.Pl(e,n)];case 3:return t.sent(),[3,6];case 4:return[4,hT(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},rS.prototype.Jc=function(r,t){var i;(this.Tl&&0===t||!this.Tl&&1===t)&&(this.El("applyOnlineStateChange()"),i=[],this.ol.forEach(function(t,e){var n=e.view.Jc(r);n.snapshot&&i.push(n.snapshot)}),this.rl.Vl(r),this.rl.ka(i),this.onlineState=r,this.Tl&&this.sl.gc(r))},rS.prototype.$u=function(a,u){return Ms(this,void 0,void 0,function(){var e,n,r,i,o,s=this;return Fs(this,function(t){switch(t.label){case 0:return this.El("rejectListens()"),this.sl.Pc(a,"rejected",u),e=this.cl.get(a),(n=e&&e.key)?(r=(r=new bm(zg.P)).nt(n,new z_(n,Bg.min())),i=xm().add(n),o=new Bm(Bg.min(),new Map,new Cm(Cg),r,i),[4,this.Ch(o)]):[3,2];case 1:return t.sent(),this.ul=this.ul.remove(n),this.cl.delete(a),this.gl(),[3,4];case 2:return[4,this.nu.Oh(a,!1).then(function(){return s.Al(a,u)}).catch(hT)];case 3:t.sent(),t.label=4;case 4:return[2]}})})},rS.prototype.Bu=function(r){return Ms(this,void 0,void 0,function(){var e,n;return Fs(this,function(t){switch(t.label){case 0:this.El("applySuccessfulWrite()"),e=r.batch.batchId,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.nu.vh(r)];case 2:return n=t.sent(),this.yl(e,null),this.pl(e),this.sl.wc(e,"acknowledged"),[4,this.Pl(n)];case 3:return t.sent(),[3,6];case 4:return[4,hT(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},rS.prototype.Qu=function(n,r){return Ms(this,void 0,void 0,function(){var e;return Fs(this,function(t){switch(t.label){case 0:this.El("rejectFailedWrite()"),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.nu.Dh(n)];case 2:return e=t.sent(),this.yl(n,r),this.pl(n),this.sl.wc(n,"rejected",r),[4,this.Pl(e)];case 3:return t.sent(),[3,6];case 4:return[4,hT(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},rS.prototype.bl=function(o){return Ms(this,void 0,void 0,function(){var e,n,r,i;return Fs(this,function(t){switch(t.label){case 0:this.nl.cu()||mg("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.nu.gr()];case 2:return-1===(e=t.sent())?[2,void o.resolve()]:((n=this.fl.get(e)||[]).push(o),this.fl.set(e,n),[3,4]);case 3:return r=t.sent(),i=RE(r,"Initialization of waitForPendingWrites() operation failed"),o.reject(i),[3,4];case 4:return[2]}})})},rS.prototype.pl=function(t){(this.fl.get(t)||[]).forEach(function(t){t.resolve()}),this.fl.delete(t)},rS.prototype.vl=function(e){this.fl.forEach(function(t){t.forEach(function(t){t.reject(new Vg(jg.CANCELLED,e))})}),this.fl.clear()},rS.prototype.Rl=function(t,e){var n=(n=(n=this._l[this.currentUser.Xh()])||new bm(Cg)).nt(t,e);this._l[this.currentUser.Xh()]=n},rS.prototype.yl=function(t,e){var n,r=this._l[this.currentUser.Xh()];r&&((n=r.get(t))&&(e?n.reject(e):n.resolve(),r=r.remove(t)),this._l[this.currentUser.Xh()]=r)},rS.prototype.Al=function(t,e){var n=this;void 0===e&&(e=null),this.sl.mc(t);for(var r=0,i=this.hl.get(t);r<i.length;r++){var o=i[r];this.ol.delete(o),e&&this.rl.Sl(o,e)}this.hl.delete(t),this.Tl&&this.ll.zh(t).forEach(function(t){n.ll.Nr(t)||n.Dl(t)})},rS.prototype.Dl=function(t){var e=this.ul.get(t);null!==e&&(this.nl.vu(e),this.ul=this.ul.remove(t),this.cl.delete(e),this.gl())},rS.prototype.ml=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof HT?(this.ll.Eo(i.key,t),this.Cl(i)):i instanceof GT?(mg("SyncEngine","Document no longer in limbo: "+i.key),this.ll.mo(i.key,t),this.ll.Nr(i.key)||this.Dl(i.key)):Eg()}},rS.prototype.Cl=function(t){var e=t.key;this.ul.get(e)||(mg("SyncEngine","New document in limbo: "+e),this.al.push(e),this.gl())},rS.prototype.gl=function(){for(;0<this.al.length&&this.ul.size<this.il;){var t=this.al.shift(),e=this.dl.next();this.cl.set(e,new zT(t)),this.ul=this.ul.nt(t,e),this.nl.listen(new vm(ow(nw(t.path)),e,2,$w.Ts))}},rS.prototype.Nl=function(){return this.ul},rS.prototype.Fl=function(){return this.al},rS.prototype.Pl=function(r,u){return Ms(this,void 0,void 0,function(){var o,s,e,a=this;return Fs(this,function(t){switch(t.label){case 0:return o=[],s=[],e=[],this.ol.forEach(function(t,i){e.push(Promise.resolve().then(function(){var n=i.view.Wc(r);return n.Gc?a.nu.Lh(i.query,!1).then(function(t){var e=t.documents;return i.view.Wc(e,n)}):n}).then(function(t){var e,n=u&&u.Qt.get(i.targetId),r=i.view.Bn(t,a.Tl,n);a.ml(i.targetId,r.Yc),r.snapshot&&(a.Tl&&a.sl.Pc(i.targetId,r.snapshot.fromCache?"not-current":"current"),o.push(r.snapshot),e=Jw.ls(i.targetId,r.snapshot),s.push(e))}))}),[4,Promise.all(e)];case 1:return t.sent(),this.rl.ka(o),[4,this.nu.kh(s)];case 2:return t.sent(),[2]}})})},rS.prototype.El=function(t){},rS.prototype.Wu=function(n){return Ms(this,void 0,void 0,function(){var e;return Fs(this,function(t){switch(t.label){case 0:return this.currentUser.isEqual(n)?[3,3]:(mg("SyncEngine","User change. New user:",n.Xh()),[4,this.nu.Vh(n)]);case 1:return e=t.sent(),this.currentUser=n,this.vl("'waitForPendingWrites' promise is rejected due to a user change."),this.sl.Vh(n,e.yh,e.ph),[4,this.Pl(e.gh)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},rS.prototype.xe=function(t){var e=this.cl.get(t);if(e&&e.el)return xm().add(e.key);var n=xm(),r=this.hl.get(t);if(!r)return n;for(var i=0,o=r;i<o.length;i++)var s=o[i],a=this.ol.get(s),n=n.Ct(a.view.Qc);return n},rS);function rS(t,e,n,r,i,o){this.nu=t,this.nl=e,this.su=n,this.sl=r,this.currentUser=i,this.il=o,this.rl=null,this.ol=new Ug(hw,cw),this.hl=new Map,this.al=[],this.ul=new bm(zg.P),this.cl=new Map,this.ll=new lT,this._l={},this.fl=new Map,this.dl=BI.eo(),this.onlineState="Unknown",this.wl=void 0}function iS(t,e){this.query=t,this.Oc=e,this.Lc=null,this.Ht=!1,this.qc=xm(),this.Lt=xm(),this.Bc=pw(t),this.Uc=new jm(this.Bc)}function oS(){this.xc=new $T,this.Mc={},this.Ga=null,this._s=null}function sS(t,e,n,r,i){this.window=t,this.Es=e,this.persistenceKey=n,this.Yu=r,this.Du=null,this.Ga=null,this._s=null,this.Ju=this.Xu.bind(this),this.Zu=new bm(Cg),this.tr=!1,this.tc=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ec=qT(this.persistenceKey,this.Yu),this.nc="firestore_sequence_number_"+this.persistenceKey,this.Zu=this.Zu.nt(this.Yu,new $T),this.sc=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.ic=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.rc=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.oc="firestore_online_state_"+this.persistenceKey,this.window.addEventListener("storage",this.Ju)}function aS(){this.activeTargetIds=Lm}function uS(t,e){this.clientId=t,this.onlineState=e}function cS(t,e){this.clientId=t,this.activeTargetIds=e}function hS(t,e,n){this.targetId=t,this.state=e,this.error=n}function lS(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}function fS(v,y){return Ms(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l,f,p,d;return Fs(this,function(t){switch(t.label){case 0:e=v,n=[],r=[],i=0,o=y,t.label=1;case 1:return i<o.length?(s=o[i],a=void 0,(u=e.hl.get(s))&&0!==u.length?[4,e.nu.Mh(ow(u[0]))]:[3,7]):[3,13];case 2:a=t.sent(),c=0,h=u,t.label=3;case 3:return c<h.length?(l=h[c],f=e.ol.get(l),[4,function(i,o){return Ms(this,void 0,void 0,function(){var e,n,r;return Fs(this,function(t){switch(t.label){case 0:return[4,(e=i).nu.Lh(o.query,!0)];case 1:return n=t.sent(),r=o.view.Zc(n),[2,(e.Tl&&e.ml(o.targetId,r.Yc),r)]}})})}(e,f)]):[3,6];case 4:(p=t.sent()).snapshot&&r.push(p.snapshot),t.label=5;case 5:return c++,[3,3];case 6:return[3,11];case 7:return[4,cT(e.nu,s)];case 8:return d=t.sent(),[4,e.nu.Mh(d)];case 9:return a=t.sent(),[4,e.Il(pS(d),s,!1)];case 10:t.sent(),t.label=11;case 11:n.push(a),t.label=12;case 12:return i++,[3,1];case 13:return[2,(e.rl.ka(r),n)]}})})}function pS(t){return ew(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function dS(){this.kl=void 0,this.listeners=[]}var vS,yS=(SS.prototype.listen=function(a){return Ms(this,void 0,void 0,function(){var e,n,r,i,o,s;return Fs(this,function(t){switch(t.label){case 0:if(e=a.query,n=!1,(r=this.$l.get(e))||(n=!0,r=new dS),!n)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),i=r,[4,this.Du.listen(e)];case 2:return i.kl=t.sent(),[3,4];case 3:return o=t.sent(),s=RE(o,"Initialization of query '"+lw(a.query)+"' failed"),[2,void a.onError(s)];case 4:return this.$l.set(e,r),r.listeners.push(a),a.Jc(this.onlineState),r.kl&&a.Ml(r.kl)&&this.Ol(),[2]}})})},SS.prototype.vu=function(o){return Ms(this,void 0,void 0,function(){var e,n,r,i;return Fs(this,function(t){return e=o.query,n=!1,(r=this.$l.get(e))&&0<=(i=r.listeners.indexOf(o))&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?[2,(this.$l.delete(e),this.Du.vu(e))]:[2]})})},SS.prototype.ka=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],o=i.query,s=this.$l.get(o);if(s){for(var a=0,u=s.listeners;a<u.length;a++)u[a].Ml(i)&&(e=!0);s.kl=i}}e&&this.Ol()},SS.prototype.Sl=function(t,e){var n=this.$l.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(e);this.$l.delete(t)},SS.prototype.Vl=function(i){this.onlineState=i;var o=!1;this.$l.forEach(function(t,e){for(var n=0,r=e.listeners;n<r.length;n++)r[n].Jc(i)&&(o=!0)}),o&&this.Ol()},SS.prototype.Ll=function(t){this.xl.add(t),t.next()},SS.prototype.ql=function(t){this.xl.delete(t)},SS.prototype.Ol=function(){this.xl.forEach(function(t){t.next()})},SS),gS=(TS.prototype.Ml=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new qm(t.query,t.docs,t.Ot,e,t.Lt,t.fromCache,t.qt,!0)}var o=!1;return this.Ul?this.Wl(t)&&(this.Bl.next(t),o=!0):this.jl(t,this.onlineState)&&(this.Kl(t),o=!0),this.Ql=t,o},TS.prototype.onError=function(t){this.Bl.error(t)},TS.prototype.Jc=function(t){this.onlineState=t;var e=!1;return this.Ql&&!this.Ul&&this.jl(this.Ql,t)&&(this.Kl(this.Ql),e=!0),e},TS.prototype.jl=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.Gl&&n||t.docs._()&&"Offline"!==e)},TS.prototype.Wl=function(t){if(0<t.docChanges.length)return!0;var e=this.Ql&&this.Ql.hasPendingWrites!==t.hasPendingWrites;return!(!t.qt&&!e)&&!0===this.options.includeMetadataChanges},TS.prototype.Kl=function(t){t=qm.Ut(t.query,t.docs,t.Lt,t.fromCache),this.Ul=!0,this.Bl.next(t)},TS),mS=(IS.prototype.Ph=function(t){this.zl=t},IS.prototype.es=function(e,r,i,o){var s=this;return r.on()||i.isEqual(Bg.min())?this.Hl(e,r):this.zl.Xn(e,o).next(function(t){var n=s.Yl(r,t);return(r.hn()||r.an())&&s.Gc(r.en,n,o,i)?s.Hl(e,r):(gg()<=Va.DEBUG&&mg("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),lw(r)),s.zl.es(e,r,i).next(function(e){return n.forEach(function(t){e=e.nt(t.key,t)}),e}))})},IS.prototype.Yl=function(n,t){var r=new Cm(pw(n));return t.forEach(function(t,e){e instanceof K_&&fw(n,e)&&(r=r.add(e))}),r},IS.prototype.Gc=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||0<i.version.o(r))},IS.prototype.Hl=function(t,e){return gg()<=Va.DEBUG&&mg("IndexFreeQueryEngine","Using full collection scan to execute query:",lw(e)),this.zl.es(t,e,Bg.min())},IS),bS=(ES.prototype.Ir=function(t){return Kw.resolve(0===this.Kn.length)},ES.prototype.mr=function(t,e,n,r){var i=this.Jl;this.Jl++,0<this.Kn.length&&this.Kn[this.Kn.length-1];var o=new Hw(i,e,n,r);this.Kn.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.Xl=this.Xl.add(new fT(u.key,i)),this.Gn.Ar(t,u.key.path.p())}return Kw.resolve(o)},ES.prototype.Rr=function(t,e){return Kw.resolve(this.Zl(e))},ES.prototype.Vr=function(t,e){var n=e+1,r=this.t_(n),i=r<0?0:r;return Kw.resolve(this.Kn.length>i?this.Kn[i]:null)},ES.prototype.gr=function(){return Kw.resolve(0===this.Kn.length?-1:this.Jl-1)},ES.prototype.yr=function(t){return Kw.resolve(this.Kn.slice())},ES.prototype.Hn=function(t,e){var n=this,r=new fT(e,0),i=new fT(e,Number.POSITIVE_INFINITY),o=[];return this.Xl.vt([r,i],function(t){var e=n.Zl(t.Jh);o.push(e)}),Kw.resolve(o)},ES.prototype.ts=function(t,e){var r=this,i=new Cm(Cg);return e.forEach(function(t){var e=new fT(t,0),n=new fT(t,Number.POSITIVE_INFINITY);r.Xl.vt([e,n],function(t){i=i.add(t.Jh)})}),Kw.resolve(this.e_(i))},ES.prototype.hs=function(t,e){var n=e.path,r=n.length+1,i=n;zg.W(i)||(i=i.child(""));var o=new fT(new zg(i),0),s=new Cm(Cg);return this.Xl.St(function(t){var e=t.key.path;return!!n.D(e)&&(e.length===r&&(s=s.add(t.Jh)),!0)},o),Kw.resolve(this.e_(s))},ES.prototype.e_=function(t){var n=this,r=[];return t.forEach(function(t){var e=n.Zl(t);null!==e&&r.push(e)}),r},ES.prototype.br=function(n,r){var i=this;Ig(0===this.n_(r.batchId,"removed")),this.Kn.shift();var o=this.Xl;return Kw.forEach(r.mutations,function(t){var e=new fT(t.key,r.batchId);return o=o.delete(e),i.dr.Dr(n,t.key)}).next(function(){i.Xl=o})},ES.prototype.Sr=function(t){},ES.prototype.Nr=function(t,e){var n=new fT(e,0),r=this.Xl.Dt(n);return Kw.resolve(e.isEqual(r&&r.key))},ES.prototype.Cr=function(t){return this.Kn.length,Kw.resolve()},ES.prototype.n_=function(t,e){return this.t_(t)},ES.prototype.t_=function(t){return 0===this.Kn.length?0:t-this.Kn[0].batchId},ES.prototype.Zl=function(t){var e=this.t_(t);return e<0||e>=this.Kn.length?null:this.Kn[e]},ES),_S=(wS.prototype.$n=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.s_(e);return this.docs=this.docs.nt(r,{Mr:e,size:s,readTime:n}),this.size+=s-o,this.Gn.Ar(t,r.path.p())},wS.prototype.Mn=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},wS.prototype.On=function(t,e){var n=this.docs.get(e);return Kw.resolve(n?n.Mr:null)},wS.prototype.getEntries=function(t,e){var n=this,r=Am;return e.forEach(function(t){var e=n.docs.get(t);r=r.nt(t,e?e.Mr:null)}),Kw.resolve(r)},wS.prototype.es=function(t,e,n){for(var r=Rm,i=new zg(e.path.child("")),o=this.docs.ut(i);o.wt();){var s=o.dt(),a=s.key,u=s.value,c=u.Mr,h=u.readTime;if(!e.path.D(a.path))break;h.o(n)<=0||c instanceof K_&&fw(e,c)&&(r=r.nt(c.key,c))}return Kw.resolve(r)},wS.prototype.i_=function(t,e){return Kw.forEach(this.docs,function(t){return e(t)})},wS.prototype.jr=function(t){return new wS.Kr(this)},wS.prototype.zr=function(t){return Kw.resolve(this.size)},wS);function wS(t,e){this.Gn=t,this.s_=e,this.docs=new bm(zg.P),this.size=0}function ES(t,e){this.Gn=t,this.dr=e,this.Kn=[],this.Jl=1,this.Xl=new Cm(fT.Uh)}function IS(){}function TS(t,e,n){this.query=t,this.Bl=e,this.Ul=!1,this.Ql=null,this.onlineState="Unknown",this.options=n||{}}function SS(t){this.Du=t,this.$l=new Ug(hw,cw),this.onlineState="Unknown",this.xl=new Set,this.Du.subscribe(this)}function CS(t){var e=this;return(e=vS.call(this)||this).Hr=t,e}_S.Kr=(xs(CS,vS=zw),CS.prototype.Bn=function(n){var r=this,i=[];return this.Nn.forEach(function(t,e){e?i.push(r.Hr.$n(n,e,r.readTime)):r.Hr.Mn(t)}),Kw.Dn(i)},CS.prototype.Ln=function(t,e){return this.Hr.On(t,e)},CS.prototype.qn=function(t,e){return this.Hr.getEntries(t,e)},CS);var NS,AS,kS=(KS.prototype.pe=function(t,n){return this.r_.forEach(function(t,e){return n(e)}),Kw.resolve()},KS.prototype.ro=function(t){return Kw.resolve(this.lastRemoteSnapshotVersion)},KS.prototype.oo=function(t){return Kw.resolve(this.o_)},KS.prototype.no=function(t){return this.highestTargetId=this.a_.next(),Kw.resolve(this.highestTargetId)},KS.prototype.ho=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.o_&&(this.o_=e),Kw.resolve()},KS.prototype.uo=function(t){this.r_.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.a_=new BI(e),this.highestTargetId=e),t.sequenceNumber>this.o_&&(this.o_=t.sequenceNumber)},KS.prototype.ao=function(t,e){return this.uo(e),this.targetCount+=1,Kw.resolve()},KS.prototype.lo=function(t,e){return this.uo(e),Kw.resolve()},KS.prototype._o=function(t,e){return this.r_.delete(e.target),this.h_.zh(e.targetId),--this.targetCount,Kw.resolve()},KS.prototype.hr=function(n,r,i){var o=this,s=0,a=[];return this.r_.forEach(function(t,e){e.sequenceNumber<=r&&null===i.get(e.targetId)&&(o.r_.delete(t),a.push(o.fo(n,e.targetId)),s++)}),Kw.Dn(a).next(function(){return s})},KS.prototype.do=function(t){return Kw.resolve(this.targetCount)},KS.prototype.wo=function(t,e){var n=this.r_.get(e)||null;return Kw.resolve(n)},KS.prototype.To=function(t,e,n){return this.h_.jh(e,n),Kw.resolve()},KS.prototype.Io=function(e,t,n){this.h_.Gh(t,n);var r=this.persistence.dr,i=[];return r&&t.forEach(function(t){i.push(r.Dr(e,t))}),Kw.Dn(i)},KS.prototype.fo=function(t,e){return this.h_.zh(e),Kw.resolve()},KS.prototype.Ao=function(t,e){var n=this.h_.Yh(e);return Kw.resolve(n)},KS.prototype.Nr=function(t,e){return Kw.resolve(this.h_.Nr(e))},KS),OS=(GS.prototype.start=function(){return Promise.resolve()},GS.prototype.th=function(){return this.po=!1,Promise.resolve()},Object.defineProperty(GS.prototype,"tr",{get:function(){return this.po},enumerable:!1,configurable:!0}),GS.prototype.Bo=function(){},GS.prototype.Uo=function(){},GS.prototype.uh=function(){return this.Gn},GS.prototype.oh=function(t){var e=this.u_[t.Xh()];return e||(e=new bS(this.Gn,this.dr),this.u_[t.Xh()]=e),e},GS.prototype.hh=function(){return this.ko},GS.prototype.ah=function(){return this.jn},GS.prototype.runTransaction=function(t,e,n){var r=this;mg("MemoryPersistence","Starting transaction:",t);var i=new RS(this.yo.next());return this.dr.l_(),n(i).next(function(t){return r.dr.__(i).next(function(){return t})}).vn().then(function(t){return i.Wn(),t})},GS.prototype.f_=function(e,n){return Kw.Cn(Object.values(this.u_).map(function(t){return function(){return t.Nr(e,n)}}))},GS),RS=(xs(HS,AS=Xw),HS),PS=(WS.T_=function(t){return new WS(t)},Object.defineProperty(WS.prototype,"E_",{get:function(){if(this.w_)return this.w_;throw Eg()},enumerable:!1,configurable:!0}),WS.prototype.Eo=function(t,e,n){return this.d_.Eo(n,e),this.E_.delete(n),Kw.resolve()},WS.prototype.mo=function(t,e,n){return this.d_.mo(n,e),this.E_.add(n),Kw.resolve()},WS.prototype.Dr=function(t,e){return this.E_.add(e),Kw.resolve()},WS.prototype.removeTarget=function(t,e){var n=this;this.d_.zh(e.targetId).forEach(function(t){return n.E_.add(t)});var r=this.persistence.hh();return r.Ao(t,e.targetId).next(function(t){t.forEach(function(t){return n.E_.add(t)})}).next(function(){return r._o(t,e)})},WS.prototype.l_=function(){this.w_=new Set},WS.prototype.__=function(t){var n=this,r=this.persistence.ah().jr();return Kw.forEach(this.E_,function(e){return n.I_(t,e).next(function(t){t||r.Mn(e)})}).next(function(){return n.w_=null,r.apply(t)})},WS.prototype.wh=function(t,e){var n=this;return this.I_(t,e).next(function(t){t?n.E_.delete(e):n.E_.add(e)})},WS.prototype.c_=function(t){return 0},WS.prototype.I_=function(t,e){var n=this;return Kw.Cn([function(){return Kw.resolve(n.d_.Nr(e))},function(){return n.persistence.hh().Nr(t,e)},function(){return n.persistence.f_(t,e)}])},WS),DS=(BS.prototype.Na=function(t){this.R_=t},BS.prototype.ba=function(t){this.P_=t},BS.prototype.onMessage=function(t){this.V_=t},BS.prototype.close=function(){this.A_()},BS.prototype.send=function(t){this.m_(t)},BS.prototype.g_=function(){this.R_()},BS.prototype.y_=function(t){this.P_(t)},BS.prototype.p_=function(t){this.V_(t)},BS),xS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},LS=(qS.prototype.ja=function(e,t,n,r){var i=this.D_(e,t);mg("RestConnection","Sending: ",i,n);var o={};return this.C_(o,r),this.N_(e,i,o,n).then(function(t){return mg("RestConnection","Received: ",t),t},function(t){throw _g("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t})},qS.prototype.Ka=function(t,e,n,r){return this.ja(t,e,n,r)},qS.prototype.C_=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/7.18.0-202071122108",t["Content-Type"]="text/plain",e)for(var n in e.ea)e.ea.hasOwnProperty(n)&&(t[n]=e.ea[n])},qS.prototype.D_=function(t,e){var n=xS[t];return this.v_+"/v1/"+e+":"+n},xs(VS,NS=qS),VS.prototype.N_=function(u,e,n,r){return new Promise(function(o,s){var a=new dg;a.listenOnce(fg.COMPLETE,function(){try{switch(a.getLastErrorCode()){case lg.NO_ERROR:var t=a.getResponseJson();mg("Connection","XHR received:",JSON.stringify(t)),o(t);break;case lg.TIMEOUT:mg("Connection",'RPC "'+u+'" timed out'),s(new Vg(jg.DEADLINE_EXCEEDED,"Request time out"));break;case lg.HTTP_ERROR:var e,n,r=a.getStatus();mg("Connection",'RPC "'+u+'" failed with status:',r,"response text:",a.getResponseText()),0<r?(e=a.getResponseJson().error)&&e.status&&e.message?(i=e.status.toLowerCase().replace("_","-"),n=0<=Object.values(jg).indexOf(i)?i:jg.UNKNOWN,s(new Vg(n,e.message))):s(new Vg(jg.UNKNOWN,"Server responded with status "+a.getStatus())):s(new Vg(jg.UNAVAILABLE,"Connection failed."));break;default:Eg()}}finally{mg("Connection",'RPC "'+u+'" completed.')}var i});var t=JSON.stringify(r);a.send(e,"POST",t,n,15)})},VS.prototype.Fa=function(t,e){var n,r=[this.v_,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=hg(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.s.projectId+"/databases/"+this.s.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.C_(o.initMessageHeaders,e),Zs()||ea()||0<=$s().indexOf("Electron/")||0<=(n=$s()).indexOf("MSIE ")||0<=n.indexOf("Trident/")||0<=$s().indexOf("MSAppHost/")||ta()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");function a(t,e){u.listen(t,function(t){try{e(t)}catch(t){setTimeout(function(){throw t},0)}})}mg("Connection","Creating WebChannel: "+s,o);var u=i.createWebChannel(s,o),c=!1,h=!1,l=new DS({m_:function(t){h?mg("Connection","Not sending because WebChannel is closed:",t):(c||(mg("Connection","Opening WebChannel transport."),u.open(),c=!0),mg("Connection","WebChannel sending:",t),u.send(t))},A_:function(){return u.close()}});return a(pg.EventType.OPEN,function(){h||mg("Connection","WebChannel transport opened.")}),a(pg.EventType.CLOSE,function(){h||(h=!0,mg("Connection","WebChannel transport closed"),l.y_())}),a(pg.EventType.ERROR,function(t){h||(h=!0,_g("Connection","WebChannel transport errored:",t),l.y_(new Vg(jg.UNAVAILABLE,"The operation could not be completed")))}),a(pg.EventType.MESSAGE,function(t){var e,n,r,i,o,s;h||(Ig(!!(n=t.data[0])),(r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error))?(mg("Connection","WebChannel received error:",r),i=r.status,o=function(){var t=pm[i];if(void 0!==t)return mm(t)}(),s=r.message,void 0===o&&(o=jg.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),h=!0,l.y_(new Vg(o,s)),u.close()):(mg("Connection","WebChannel received:",n),l.p_(n)))}),setTimeout(function(){l.g_()},0),l},VS),MS=(jS.prototype.uu=function(t){this.O_.push(t)},jS.prototype.th=function(){window.removeEventListener("online",this.F_),window.removeEventListener("offline",this.x_)},jS.prototype.L_=function(){window.addEventListener("online",this.F_),window.addEventListener("offline",this.x_)},jS.prototype.k_=function(){mg("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.O_;t<e.length;t++)(0,e[t])(0)},jS.prototype.M_=function(){mg("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.O_;t<e.length;t++)(0,e[t])(1)},jS.Fs=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},jS),FS=(US.prototype.uu=function(t){},US.prototype.th=function(){},US);function US(){}function jS(){var t=this;this.F_=function(){return t.k_()},this.x_=function(){return t.M_()},this.O_=[],this.L_()}function VS(t){var e=this;return(e=NS.call(this,t)||this).forceLongPolling=t.forceLongPolling,e}function qS(t){this.b_=t,this.s=t.s;var e=t.ssl?"https":"http";this.v_=e+"://"+t.host,this.S_="projects/"+this.s.projectId+"/databases/"+this.s.database+"/documents"}function BS(t){this.m_=t.m_,this.A_=t.A_}function WS(t){this.persistence=t,this.d_=new lT,this.w_=null}function HS(t){var e=this;return(e=AS.call(this)||this).Ro=t,e}function GS(t){var e=this;this.u_={},this.yo=new $w(0),this.po=!1,this.po=!0,this.dr=t(this),this.ko=new kS(this),this.Gn=new yI,this.jn=new _S(this.Gn,function(t){return e.dr.c_(t)})}function KS(t){this.persistence=t,this.r_=new Ug(am,um),this.lastRemoteSnapshotVersion=Bg.min(),this.highestTargetId=0,this.o_=0,this.h_=new lT,this.targetCount=0,this.a_=BI.to()}function zS(t){return new wb(t,!0)}var QS,XS,YS="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",JS=(rC.prototype.initialize=function(e){return Ms(this,void 0,void 0,function(){return Fs(this,function(t){switch(t.label){case 0:return this.sl=this.q_(e),this.persistence=this.B_(e),[4,this.persistence.start()];case 1:return t.sent(),this.U_=this.Q_(e),this.nu=this.W_(e),[2]}})})},rC.prototype.Q_=function(t){return null},rC.prototype.W_=function(t){return e=this.persistence,n=new mS,r=t.j_,new aT(e,n,r);var e,n,r},rC.prototype.B_=function(t){if(t.G_.K_)throw new Vg(jg.FAILED_PRECONDITION,YS);return new OS(PS.T_)},rC.prototype.q_=function(t){return new tS},rC.prototype.terminate=function(){return Ms(this,void 0,void 0,function(){return Fs(this,function(t){switch(t.label){case 0:return this.U_&&this.U_.stop(),[4,this.sl.th()];case 1:return t.sent(),[4,this.persistence.th()];case 2:return t.sent(),[2]}})})},rC.prototype.clearPersistence=function(t,e){throw new Vg(jg.FAILED_PRECONDITION,YS)},rC),$S=(xs(nC,XS=JS),nC.prototype.initialize=function(e){return Ms(this,void 0,void 0,function(){return Fs(this,function(t){switch(t.label){case 0:return[4,XS.prototype.initialize.call(this,e)];case 1:return t.sent(),[4,function(r){return Ms(this,void 0,void 0,function(){var e,n;return Fs(this,function(t){return n=(e=r).Ah,[2,e.persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return n.Wr(t)}).then(function(t){e.mh=t})]})})}(this.nu)];case 2:return t.sent(),[2]}})})},nC.prototype.Q_=function(t){var e=this.persistence.dr.Yi;return new UE(e,t.ti)},nC.prototype.B_=function(t){var e=sT(t.b_.s,t.b_.persistenceKey),n=zS(t.b_.s);return new $I(t.G_.synchronizeTabs,e,t.clientId,LE.Ui(t.G_.cacheSizeBytes),t.ti,SE(),CE(),n,this.sl,t.G_.Vo)},nC.prototype.q_=function(t){return new tS},nC.prototype.clearPersistence=function(t,e){return function(n){return Ms(this,void 0,void 0,function(){var e;return Fs(this,function(t){switch(t.label){case 0:return hE.Fs()?(e=n+"main",[4,hE.delete(e)]):[2,Promise.resolve()];case 1:return t.sent(),[2]}})})}(sT(t,e))},xs(eC,QS=nC),eC.prototype.initialize=function(r){return Ms(this,void 0,void 0,function(){var e,n=this;return Fs(this,function(t){switch(t.label){case 0:return[4,QS.prototype.initialize.call(this,r)];case 1:return t.sent(),[4,this.z_.initialize(this,r)];case 2:return t.sent(),e=this.z_.Du,this.sl instanceof ZT?(this.sl.Du={Fc:function(a,u,c,h){return Ms(this,void 0,void 0,function(){var o,s;return Fs(this,function(t){switch(t.label){case 0:return(o=a).El("applyBatchState()"),[4,(e=o.nu,n=u,i=(r=e).Kn,r.persistence.runTransaction("Lookup mutation documents","readonly",function(e){return i.Pr(e,n).next(function(t){return t?r.Rh.Xn(e,t):Kw.resolve(null)})}))];case 1:return null===(s=t.sent())?[3,6]:"pending"!==c?[3,3]:[4,o.nl.gu()];case 2:return t.sent(),[3,4];case 3:"acknowledged"===c||"rejected"===c?(o.yl(u,h||null),o.nu.Kn.Sr(u)):Eg(),t.label=4;case 4:return[4,o.Pl(s)];case 5:return t.sent(),[3,7];case 6:mg("SyncEngine","Cannot apply mutation batch with id: "+u),t.label=7;case 7:return[2]}var e,n,r,i})})}.bind(null,e),kc:function(s,a,u,c){return Ms(this,void 0,void 0,function(){var n,i,o;return Fs(this,function(t){switch(t.label){case 0:return(n=s).wl?(mg("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!n.hl.has(a))return[3,8];switch(u){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,(r=n.nu,e=r.Ah,r.persistence.runTransaction("Get new document changes","readonly",function(t){return e.Ur(t,r.mh)}).then(function(t){var e=t.Qr,n=t.readTime;return r.mh=n,e}))];case 3:return i=t.sent(),o=Bm.Gt(a,"current"===u),[4,n.Pl(i,o)];case 4:return t.sent(),[3,8];case 5:return[4,n.nu.Oh(a,!0)];case 6:return t.sent(),n.Al(a,c),[3,8];case 7:Eg(),t.label=8;case 8:return[2]}var r,e})})}.bind(null,e),$c:function(l,f,p){return Ms(this,void 0,void 0,function(){var n,e,r,i,o,s,a,u,c,h;return Fs(this,function(t){switch(t.label){case 0:if(!(n=l).wl)return[3,10];e=0,r=f,t.label=1;case 1:return e<r.length?(i=r[e],n.hl.has(i)?(mg("SyncEngine","Adding an already active target "+i),[3,5]):[4,cT(n.nu,i)]):[3,6];case 2:return o=t.sent(),[4,n.nu.Mh(o)];case 3:return s=t.sent(),[4,n.Il(pS(o),s.targetId,!1)];case 4:t.sent(),n.nl.listen(s),t.label=5;case 5:return e++,[3,1];case 6:a=function(e){return Fs(this,function(t){switch(t.label){case 0:return n.hl.has(e)?[4,n.nu.Oh(e,!1).then(function(){n.nl.vu(e),n.Al(e)}).catch(hT)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})},u=0,c=p,t.label=7;case 7:return u<c.length?(h=c[u],[5,a(h)]):[3,10];case 8:t.sent(),t.label=9;case 9:return u++,[3,7];case 10:return[2]}})})}.bind(null,e),rh:function(t){return t.nu.persistence.rh()}.bind(null,e)},[4,this.sl.start()]):[3,4];case 3:t.sent(),t.label=4;case 4:return[4,this.persistence.qo(function(e){return Ms(n,void 0,void 0,function(){return Fs(this,function(t){switch(t.label){case 0:return[4,function(h,l){return Ms(this,void 0,void 0,function(){var r,e,i,o,s,a,u,c;return Fs(this,function(t){switch(t.label){case 0:return r=h,!0!==l||!0===r.wl?[3,3]:(e=r.sl.cc(),[4,fS(r,e.N())]);case 1:return i=t.sent(),r.wl=!0,[4,r.nl.ju(!0)];case 2:for(t.sent(),o=0,s=i;o<s.length;o++)a=s[o],r.nl.listen(a);return[3,7];case 3:return!1!==l||!1===r.wl?[3,7]:(u=[],c=Promise.resolve(),r.hl.forEach(function(t,e){r.sl.Ac(e)?u.push(e):c=c.then(function(){return r.Al(e),r.nu.Oh(e,!0)}),r.nl.vu(e)}),[4,c]);case 4:return t.sent(),[4,fS(r,u)];case 5:return t.sent(),(n=r).cl.forEach(function(t,e){n.nl.vu(e)}),n.ll.Hh(),n.cl=new Map,n.ul=new bm(zg.P),r.wl=!1,[4,r.nl.ju(!1)];case 6:t.sent(),t.label=7;case 7:return[2]}var n})})}(this.z_.Du,e)];case 1:return t.sent(),this.U_&&(e&&!this.U_.tr?this.U_.start(this.nu):e||this.U_.stop()),[2]}})})})];case 5:return t.sent(),[2]}})})},eC.prototype.q_=function(t){if(t.G_.K_&&t.G_.synchronizeTabs){var e=SE();if(!ZT.Fs(e))throw new Vg(jg.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=sT(t.b_.s,t.b_.persistenceKey);return new ZT(e,t.ti,n,t.clientId,t.j_)}return new tS},eC),ZS=(tC.prototype.initialize=function(n,r){return Ms(this,void 0,void 0,function(){var e=this;return Fs(this,function(t){switch(t.label){case 0:return this.nu?[3,3]:(this.nu=n.nu,this.sl=n.sl,this.su=this.H_(r),this.nl=this.Y_(r),this.Du=this.J_(r),this.X_=this.Z_(r),this.sl.Ga=function(t){return e.Du.Jc(t,1)},this.nl.Du=this.Du,[4,this.nl.start()]);case 1:return t.sent(),[4,this.nl.ju(this.Du.Tl)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},tC.prototype.Z_=function(t){return new yS(this.Du)},tC.prototype.H_=function(t){var e,n=zS(t.b_.s),r=(e=t.b_,new LS(e)),i=t.credentials;return new AT(i,r,n)},tC.prototype.Y_=function(t){var e=this;return new OT(this.nu,this.su,t.ti,function(t){return e.Du.Jc(t,0)},new(MS.Fs()?MS:FS))},tC.prototype.J_=function(t){return e=this.nu,n=this.nl,r=this.su,i=this.sl,o=t.j_,s=t.il,a=!t.G_.K_||!t.G_.synchronizeTabs,u=new nS(e,n,r,i,o,s),a&&(u.wl=!0),u;var e,n,r,i,o,s,a,u},tC.prototype.terminate=function(){return this.nl.th()},tC);function tC(){}function eC(t){var e=this;return(e=QS.call(this)||this).z_=t,e}function nC(){return null!==XS&&XS.apply(this,arguments)||this}function rC(){}function iC(i){return function(){if("object"==typeof i&&null!==i)for(var t=i,e=0,n=["next","error","complete"];e<n.length;e++){var r=n[e];if(r in t&&"function"==typeof t[r])return 1}}()}var oC=(sC.prototype.next=function(t){this.observer.next&&this.tf(this.observer.next,t)},sC.prototype.error=function(t){this.observer.error?this.tf(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},sC.prototype.ef=function(){this.muted=!0},sC.prototype.tf=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},sC);function sC(t){this.observer=t,this.muted=!1}function aC(t,e){if(0!==e.length)throw new Vg(jg.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+SC(e.length,"argument")+".")}function uC(t,e,n){if(e.length!==n)throw new Vg(jg.INVALID_ARGUMENT,"Function "+t+"() requires "+SC(n,"argument")+", but was called with "+SC(e.length,"argument")+".")}function cC(t,e,n){if(e.length<n)throw new Vg(jg.INVALID_ARGUMENT,"Function "+t+"() requires at least "+SC(n,"argument")+", but was called with "+SC(e.length,"argument")+".")}function hC(t,e,n,r){if(e.length<n||e.length>r)throw new Vg(jg.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+SC(e.length,"argument")+".")}function lC(t,e,n,r){gC(t,e,TC(n)+" argument",r)}function fC(t,e,n,r){void 0!==r&&lC(t,e,n,r)}function pC(t,e,n,r){gC(t,e,n+" option",r)}function dC(t,e,n,r){void 0!==r&&pC(t,e,n,r)}function vC(t,e,n,r,u){void 0!==r&&function(t,e,n){for(var r=[],i=0,o=u;i<o.length;i++){var s=o[i];if(s===n)return;r.push(bC(s))}var a=bC(n);throw new Vg(jg.INVALID_ARGUMENT,"Invalid value "+a+" provided to function "+t+'() for option "'+e+'". Acceptable values: '+r.join(", "))}(t,n,r)}function yC(t,e,n,r){if(!e.some(function(t){return t===r}))throw new Vg(jg.INVALID_ARGUMENT,"Invalid value "+bC(r)+" provided to function "+t+"() for its "+TC(n)+" argument. Acceptable values: "+e.join(", "));return r}function gC(t,e,n,r){if(!("object"===e?mC(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=bC(r);throw new Vg(jg.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function mC(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function bC(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":Eg();if(e instanceof Array)return"an array";var t=function(){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}();return t?"a custom "+t+" object":"an object"}function _C(t,e,n){if(void 0===n)throw new Vg(jg.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+TC(e)+" argument, but it was undefined.")}function wC(n,t,r){Dg(t,function(t,e){if(r.indexOf(t)<0)throw new Vg(jg.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+n+"(). Available options: "+r.join(", "))})}function EC(t,e,n,r){var i=bC(r);return new Vg(jg.INVALID_ARGUMENT,"Function "+t+"() requires its "+TC(n)+" argument to be a "+e+", but it was: "+i)}function IC(t,e,n){if(n<=0)throw new Vg(jg.INVALID_ARGUMENT,"Function "+t+"() requires its "+TC(e)+" argument to be a positive number, but it was: "+n+".")}function TC(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function SC(t,e){return t+" "+e+(1===t?"":"s")}function CC(){if("undefined"==typeof Uint8Array)throw new Vg(jg.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function NC(){if("undefined"==typeof atob)throw new Vg(jg.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var AC,kC,OC=(UC.fromBase64String=function(t){uC("Blob.fromBase64String",arguments,1),lC("Blob.fromBase64String","string",1,t),NC();try{return new UC(hm.fromBase64String(t))}catch(t){throw new Vg(jg.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},UC.fromUint8Array=function(t){if(uC("Blob.fromUint8Array",arguments,1),CC(),!(t instanceof Uint8Array))throw EC("Blob.fromUint8Array","Uint8Array",1,t);return new UC(hm.fromUint8Array(t))},UC.prototype.toBase64=function(){return uC("Blob.toBase64",arguments,0),NC(),this.nf.toBase64()},UC.prototype.toUint8Array=function(){return uC("Blob.toUint8Array",arguments,0),CC(),this.nf.toUint8Array()},UC.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},UC.prototype.isEqual=function(t){return this.nf.isEqual(t.nf)},UC),RC=function(t){!function(){if(!(t instanceof Array)||t.length<1)throw new Vg(jg.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least 1 element.")}();for(var e=0;e<t.length;++e)if(lC("FieldPath","string",e,t[e]),0===t[e].length)throw new Vg(jg.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.sf=new Kg(t)},PC=(xs(FC,kC=RC),FC.documentId=function(){return new FC(Kg.L().F())},FC.prototype.isEqual=function(t){if(!(t instanceof FC))throw EC("isEqual","FieldPath",1,t);return this.sf.isEqual(t.sf)},FC),DC=new RegExp("[~\\*/\\[\\]]"),xC=function(){this.if=this},LC=(xs(MC,AC=xC),MC.prototype.hf=function(t){if(2!==t.af)throw 1===t.af?t.uf(this.rf+"() can only appear at the top level of your update data"):t.uf(this.rf+"() cannot be used with set() unless you pass {merge:true}");return t.Le.push(t.path),null},MC.prototype.isEqual=function(t){return t instanceof MC},MC);function MC(t){var e=this;return(e=AC.call(this)||this).rf=t,e}function FC(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return kC.call(this,t)||this}function UC(t){NC(),this.nf=t}function jC(t,e,n){return new pN({af:3,cf:e.settings.cf,methodName:t.rf,lf:n},e.s,e.serializer,e.ignoreUndefinedProperties)}var VC,qC,BC,WC,HC,GC,KC=(xs(lN,GC=xC),lN.prototype.hf=function(t){return new l_(t.path,new Yb)},lN.prototype.isEqual=function(t){return t instanceof lN},lN),zC=(xs(hN,HC=xC),hN.prototype.hf=function(t){var e=jC(this,t,!0),n=this._f.map(function(t){return wN(t,e)}),r=new Jb(n);return new l_(t.path,r)},hN.prototype.isEqual=function(t){return this===t},hN),QC=(xs(cN,WC=xC),cN.prototype.hf=function(t){var e=jC(this,t,!0),n=this._f.map(function(t){return wN(t,e)}),r=new n_(n);return new l_(t.path,r)},cN.prototype.isEqual=function(t){return this===t},cN),XC=(xs(uN,BC=xC),uN.prototype.hf=function(t){var e=new s_(t.serializer,Tb(t.serializer,this.ff));return new l_(t.path,e)},uN.prototype.isEqual=function(t){return this===t},uN),YC=(xs(aN,qC=xC),aN.delete=function(){return aC("FieldValue.delete",arguments),new JC(new LC("FieldValue.delete"))},aN.serverTimestamp=function(){return aC("FieldValue.serverTimestamp",arguments),new JC(new KC("FieldValue.serverTimestamp"))},aN.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return cC("FieldValue.arrayUnion",arguments,1),new JC(new zC("FieldValue.arrayUnion",t))},aN.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return cC("FieldValue.arrayRemove",arguments,1),new JC(new QC("FieldValue.arrayRemove",t))},aN.increment=function(t){return lC("FieldValue.increment","number",1,t),uC("FieldValue.increment",arguments,1),new JC(new XC("FieldValue.increment",t))},aN),JC=(xs(sN,VC=YC),sN.prototype.hf=function(t){return this.if.hf(t)},sN.prototype.isEqual=function(t){return t instanceof sN&&this.if.isEqual(t.if)},sN),$C=(Object.defineProperty(oN.prototype,"latitude",{get:function(){return this.df},enumerable:!1,configurable:!0}),Object.defineProperty(oN.prototype,"longitude",{get:function(){return this.wf},enumerable:!1,configurable:!0}),oN.prototype.isEqual=function(t){return this.df===t.df&&this.wf===t.wf},oN.prototype.T=function(t){return Cg(this.df,t.df)||Cg(this.wf,t.wf)},oN),ZC=/^__.*__$/,tN=function(t,e,n){this.Tf=t,this.Ef=e,this.If=n},eN=(iN.prototype.mf=function(t,e){var n=[];return null!==this.Le?n.push(new T_(t,this.data,this.Le,e)):n.push(new I_(t,this.data,e)),0<this.fieldTransforms.length&&n.push(new k_(t,this.fieldTransforms)),n},iN),nN=(rN.prototype.mf=function(t,e){var n=[new T_(t,this.data,this.Le,e)];return 0<this.fieldTransforms.length&&n.push(new k_(t,this.fieldTransforms)),n},rN);function rN(t,e,n){this.data=t,this.Le=e,this.fieldTransforms=n}function iN(t,e,n){this.data=t,this.Le=e,this.fieldTransforms=n}function oN(t,e){if(uC("GeoPoint",arguments,2),lC("GeoPoint","number",1,t),lC("GeoPoint","number",2,e),!isFinite(t)||t<-90||90<t)throw new Vg(jg.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new Vg(jg.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.df=t,this.wf=e}function sN(t){var e=this;return(e=VC.call(this)||this).if=t,e.rf=t.rf,e}function aN(){return qC.call(this)||this}function uN(t,e){var n=this;return(n=BC.call(this)||this).rf=t,n.ff=e,n}function cN(t,e){var n=this;return(n=WC.call(this)||this).rf=t,n._f=e,n}function hN(t,e){var n=this;return(n=HC.call(this)||this).rf=t,n._f=e,n}function lN(t){var e=this;return(e=GC.call(this)||this).rf=t,e}function fN(t){switch(t){case 0:case 2:case 1:return 1;case 3:case 4:return;default:throw Eg()}}var pN=(Object.defineProperty(yN.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(yN.prototype,"af",{get:function(){return this.settings.af},enumerable:!1,configurable:!0}),yN.prototype.Rf=function(t){return new yN(Object.assign(Object.assign({},this.settings),t),this.s,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.Le)},yN.prototype.Pf=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Rf({path:n,lf:!1});return r.Vf(t),r},yN.prototype.gf=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Rf({path:n,lf:!1});return r.Af(),r},yN.prototype.yf=function(t){return this.Rf({path:void 0,lf:!0})},yN.prototype.uf=function(t){return NN(t,this.settings.methodName,this.settings.pf||!1,this.path,this.settings.cf)},yN.prototype.contains=function(e){return void 0!==this.Le.find(function(t){return e.D(t)})||void 0!==this.fieldTransforms.find(function(t){return e.D(t.field)})},yN.prototype.Af=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Vf(this.path.get(t))},yN.prototype.Vf=function(t){if(0===t.length)throw this.uf("Document fields must not be empty");if(fN(this.af)&&ZC.test(t))throw this.uf('Document fields cannot begin and end with "__"')},yN),dN=(vN.prototype.bf=function(t,e,n,r){return void 0===r&&(r=!1),new pN({af:t,methodName:e,cf:n,path:Kg.$(),lf:!1,pf:r},this.s,this.serializer,this.ignoreUndefinedProperties)},vN);function vN(t,e,n){this.s=t,this.ignoreUndefinedProperties=e,this.serializer=n||zS(t)}function yN(t,e,n,r,i,o){this.settings=t,this.s=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Af(),this.fieldTransforms=i||[],this.Le=o||[]}function gN(t,e,n,r,i,o){void 0===o&&(o={});var s=t.bf(o.merge||o.mergeFields?2:0,e,n,i);TN("Data must be an object, but it was:",s,r);var a,u,c=EN(r,s);if(o.merge)a=new h_(s.Le),u=s.fieldTransforms;else if(o.mergeFields){for(var h=[],l=0,f=o.mergeFields;l<f.length;l++){var p=f[l],d=void 0;if(p instanceof RC)d=p.sf;else{if("string"!=typeof p)throw Eg();d=CN(e,p,n)}if(!s.contains(d))throw new Vg(jg.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");AN(h,d)||h.push(d)}a=new h_(h),u=s.fieldTransforms.filter(function(t){return a.je(t.field)})}else a=null,u=s.fieldTransforms;return new eN(new M_(c),a,u)}function mN(t,o,s,e){var a=t.bf(1,o,s);TN("Data must be an object, but it was:",a,e);var u=[],c=new F_;Dg(e,function(t,e){var n,r=CN(o,t,s),i=a.gf(r);e instanceof xC&&e.if instanceof LC?u.push(r):null!=(n=wN(e,i))&&(u.push(r),c.set(r,n))});var n=new h_(u);return new nN(c.Ge(),n,a.fieldTransforms)}function bN(t,e,n,r,i,o){var s=t.bf(1,e,n),a=[SN(e,r,n)],u=[i];if(o.length%2!=0)throw new Vg(jg.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(SN(e,o[c])),u.push(o[c+1]);for(var h,l,f,p,d=[],v=new F_,y=a.length-1;0<=y;--y)AN(d,a[y])||(h=a[y],l=u[y],f=s.gf(h),l instanceof xC&&l.if instanceof LC?d.push(h):null!=(p=wN(l,f))&&(d.push(h),v.set(h,p)));var g=new h_(d);return new nN(v.Ge(),g,s.fieldTransforms)}function _N(t,e,n,r){return void 0===r&&(r=!1),wN(n,t.bf(r?4:3,e))}function wN(s,t){if(IN(s))return TN("Unsupported field value:",t,s),EN(s,t);if(s instanceof xC)return function(t,e){if(!fN(e.af))throw e.uf(t.rf+"() can only be used with update() and set()");if(!e.path)throw e.uf(t.rf+"() is not currently supported inside arrays");var n=t.hf(e);n&&e.fieldTransforms.push(n)}(s,t),null;if(t.path&&t.Le.push(t.path),s instanceof Array){if(t.settings.lf&&4!==t.af)throw t.uf("Nested arrays are not supported");return function(t){for(var e=[],n=0,r=0,i=s;r<i.length;r++){var o=wN(i[r],t.yf(n));null==o&&(o={nullValue:"NULL_VALUE"}),e.push(o),n++}return{arrayValue:{values:e}}}(t)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Tb(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=qg.fromDate(t);return{timestampValue:Sb(e.serializer,n)}}if(t instanceof qg){var r=new qg(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Sb(e.serializer,r)}}if(t instanceof $C)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof OC)return{bytesValue:Cb(e.serializer,t)};if(t instanceof tN){var i=e.s,o=t.Tf;if(!o.isEqual(i))throw e.uf("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:Ab(t.Tf||e.s,t.Ef.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.uf("Unsupported field value: "+bC(t))}(s,t)}function EN(t,r){var i={};return xg(t)?r.path&&0<r.path.length&&r.Le.push(r.path):Dg(t,function(t,e){var n=wN(e,r.Pf(t));null!=n&&(i[t]=n)}),{mapValue:{fields:i}}}function IN(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof qg||t instanceof $C||t instanceof OC||t instanceof tN||t instanceof xC)}function TN(t,e,n){if(!IN(n)||!mC(n)){var r=bC(n);throw"an object"===r?e.uf(t+" a custom object"):e.uf(t+" "+r)}}function SN(t,e,n){if(e instanceof RC)return e.sf;if("string"==typeof e)return CN(t,e);throw NN("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}function CN(t,e,n){try{return function(e){if(0<=e.search(DC))throw new Vg(jg.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(PC.bind.apply(PC,qs([void 0],e.split("."))))}catch(t){throw new Vg(jg.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).sf}catch(e){throw NN(e instanceof Error?e.message:e.toString(),t,!1,void 0,n)}}function NN(t,e,n,r,i){var o=r&&!r._(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Vg(jg.INVALID_ARGUMENT,(a+=". ")+t+u)}function AN(t,e){return t.some(function(t){return t.isEqual(e)})}var kN=(xN.prototype.Nf=function(r){return Ms(this,void 0,void 0,function(){var e,n=this;return Fs(this,function(t){switch(t.label){case 0:if(this.Ff(),0<this.mutations.length)throw new Vg(jg.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(a,u){return Ms(this,void 0,void 0,function(){var i,e,n,r,o,s;return Fs(this,function(t){switch(t.label){case 0:return e=xb((i=a).serializer)+"/documents",n={documents:u.map(function(t){return Ob(i.serializer,t)})},[4,i.Ka("BatchGetDocuments",e,n)];case 1:return r=t.sent(),o=new Map,r.forEach(function(t){var e,n,r=(e=i.serializer,"found"in(n=t)?function(t,e){Ig(!!e.found),e.found.name,e.found.updateTime;var n=Rb(t,e.found.name),r=Nb(e.found.updateTime),i=new M_({mapValue:{fields:e.found.fields}});return new K_(n,r,i,{})}(e,n):"missing"in n?function(t,e){Ig(!!e.missing),Ig(!!e.readTime);var n=Rb(t,e.missing),r=Nb(e.readTime);return new z_(n,r)}(e,n):Eg());o.set(r.key.toString(),r)}),s=[],[2,(u.forEach(function(t){var e=o.get(t.toString());Ig(!!e),s.push(e)}),s)]}})})}(this.su,r)];case 1:return[2,((e=t.sent()).forEach(function(t){t instanceof z_||t instanceof K_?n.kf(t):Eg()}),e)]}})})},xN.prototype.set=function(t,e){this.write(e.mf(t,this.Ue(t))),this.Cf.add(t)},xN.prototype.update=function(t,e){try{this.write(e.mf(t,this.$f(t)))}catch(t){this.Df=t}this.Cf.add(t)},xN.prototype.delete=function(t){this.write([new x_(t,this.Ue(t))]),this.Cf.add(t)},xN.prototype.commit=function(){return Ms(this,void 0,void 0,function(){var e,r=this;return Fs(this,function(t){switch(t.label){case 0:if(this.Ff(),this.Df)throw this.Df;return e=this.vf,this.mutations.forEach(function(t){e.delete(t.key.toString())}),e.forEach(function(t,e){var n=new zg(Hg.k(e));r.mutations.push(new L_(n,r.Ue(n)))}),[4,function(i,o){return Ms(this,void 0,void 0,function(){var e,n,r;return Fs(this,function(t){switch(t.label){case 0:return n=xb((e=i).serializer)+"/documents",r={writes:o.map(function(t){return Fb(e.serializer,t)})},[4,e.ja("Commit",n,r)];case 1:return t.sent(),[2]}})})}(this.su,this.mutations)];case 1:return t.sent(),this.Sf=!0,[2]}})})},xN.prototype.kf=function(t){var e;if(t instanceof K_)e=t.version;else{if(!(t instanceof z_))throw Eg();e=Bg.min()}var n=this.vf.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Vg(jg.ABORTED,"Document version changed between two reads.")}else this.vf.set(t.key.toString(),e)},xN.prototype.Ue=function(t){var e=this.vf.get(t.toString());return!this.Cf.has(t)&&e?d_.updateTime(e):d_.Qe()},xN.prototype.$f=function(t){var e=this.vf.get(t.toString());if(this.Cf.has(t)||!e)return d_.exists(!0);if(e.isEqual(Bg.min()))throw new Vg(jg.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return d_.updateTime(e)},xN.prototype.write=function(t){this.Ff(),this.mutations=this.mutations.concat(t)},xN.prototype.Ff=function(){},xN),ON=(DN.prototype.run=function(){this.Mf()},DN.prototype.Mf=function(){var t=this;this.wi.ps(function(){return Ms(t,void 0,void 0,function(){var e,n,r=this;return Fs(this,function(t){return e=new kN(this.su),(n=this.Of(e))&&n.then(function(t){r.ti.hi(function(){return e.commit().then(function(){r.si.resolve(t)}).catch(function(t){r.Lf(t)})})}).catch(function(t){r.Lf(t)}),[2]})})})},DN.prototype.Of=function(t){try{var e=this.updateFunction(t);return!nm(e)&&e.catch&&e.then?e:(this.si.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.si.reject(t),null}},DN.prototype.Lf=function(t){var e=this;0<this.xf&&this.qf(t)?(--this.xf,this.ti.hi(function(){return e.Mf(),Promise.resolve()})):this.si.reject(t)},DN.prototype.qf=function(t){if("FirebaseError"!==t.name)return!1;var e=t.code;return"aborted"===e||"failed-precondition"===e||!gm(e)},DN),RN=(PN.prototype.start=function(t,e,n,r){var i=this;this.Uf(),this.b_=t;var o=new aE,s=!1;return this.credentials.ia(function(t){return s?void i.ti.Vi(function(){return i.nl.Wu(t)}):(s=!0,mg("FirestoreClient","Initializing. user=",t.uid),i.Qf(e,n,r,t,o).then(i.Bf.resolve,i.Bf.reject))}),this.ti.hi(function(){return i.Bf.promise}),o.promise},PN.prototype.enableNetwork=function(){var t=this;return this.Uf(),this.ti.enqueue(function(){return t.persistence.Uo(!0),t.nl.enableNetwork()})},PN.prototype.Qf=function(i,o,s,a,u){return Ms(this,void 0,void 0,function(){var e,n,r=this;return Fs(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),e={ti:this.ti,b_:this.b_,clientId:this.clientId,credentials:this.credentials,j_:a,il:100,G_:s},[4,i.initialize(e)];case 1:return t.sent(),[4,o.initialize(i,e)];case 2:return t.sent(),this.persistence=i.persistence,this.sl=i.sl,this.nu=i.nu,this.U_=i.U_,this.su=o.su,this.nl=o.nl,this.Du=o.Du,this.Wf=o.X_,this.persistence.Bo(function(){return Ms(r,void 0,void 0,function(){return Fs(this,function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}})})}),u.resolve(),[3,4];case 3:if(n=t.sent(),u.reject(n),!this.jf(n))throw n;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+n),this.Qf(new JS,new ZS,{K_:!1},a,u))];case 4:return[2]}})})},PN.prototype.jf=function(t){return"FirebaseError"===t.name?t.code===jg.FAILED_PRECONDITION||t.code===jg.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},PN.prototype.Uf=function(){if(this.ti.Ei)throw new Vg(jg.FAILED_PRECONDITION,"The client has already been terminated.")},PN.prototype.disableNetwork=function(){var t=this;return this.Uf(),this.ti.enqueue(function(){return t.persistence.Uo(!1),t.nl.disableNetwork()})},PN.prototype.terminate=function(){var t=this;return this.ti.Pi(function(){return Ms(t,void 0,void 0,function(){return Fs(this,function(t){switch(t.label){case 0:return this.U_&&this.U_.stop(),[4,this.nl.th()];case 1:return t.sent(),[4,this.sl.th()];case 2:return t.sent(),[4,this.persistence.th()];case 3:return t.sent(),this.credentials.ra(),[2]}})})})},PN.prototype.waitForPendingWrites=function(){var t=this;this.Uf();var e=new aE;return this.ti.hi(function(){return t.Du.bl(e)}),e.promise},PN.prototype.listen=function(t,e,n){var r=this;this.Uf();var i=new oC(n),o=new gS(t,i,e);return this.ti.hi(function(){return r.Wf.listen(o)}),function(){i.ef(),r.ti.hi(function(){return r.Wf.vu(o)})}},PN.prototype.Kf=function(e){return Ms(this,void 0,void 0,function(){return Fs(this,function(t){switch(t.label){case 0:return this.Uf(),[4,this.Bf.promise];case 1:return[2,(t.sent(),function(n,o,s){return Ms(this,void 0,void 0,function(){var i,e=this;return Fs(this,function(t){switch(t.label){case 0:return i=new aE,[4,n.enqueue(function(){return Ms(e,void 0,void 0,function(){var e,n,r;return Fs(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,o.xh(s)];case 1:return(e=t.sent())instanceof K_?i.resolve(e):e instanceof z_?i.resolve(null):i.reject(new Vg(jg.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return n=t.sent(),r=RE(n,"Failed to get document '"+s+" from cache"),i.reject(r),[3,3];case 3:return[2]}})})})];case 1:return[2,(t.sent(),i.promise)]}})})}(this.ti,this.nu,e))]}})})},PN.prototype.Gf=function(a,u){return Ms(this,void 0,void 0,function(){return Fs(this,function(t){switch(t.label){case 0:return this.Uf(),[4,this.Bf.promise];case 1:return[2,(t.sent(),e=this.ti,n=this.Wf,r=a,i=u,o=new aE,s=LN(e,n,nw(r.path),{includeMetadataChanges:!0,Gl:!0},{next:function(t){s();var e=t.docs.has(r);!e&&t.fromCache?o.reject(new Vg(jg.UNAVAILABLE,"Failed to get document because the client is offline.")):e&&t.fromCache&&i&&"server"===i.source?o.reject(new Vg(jg.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):o.resolve(t)},error:function(t){return o.reject(t)}}),o.promise)]}var e,n,r,i,o,s})})},PN.prototype.zf=function(e){return Ms(this,void 0,void 0,function(){return Fs(this,function(t){switch(t.label){case 0:return this.Uf(),[4,this.Bf.promise];case 1:return[2,(t.sent(),function(n,u,c){return Ms(this,void 0,void 0,function(){var a,e=this;return Fs(this,function(t){switch(t.label){case 0:return a=new aE,[4,n.enqueue(function(){return Ms(e,void 0,void 0,function(){var e,n,r,i,o,s;return Fs(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,u.Lh(c,!0)];case 1:return e=t.sent(),n=new eS(c,e.qh),r=n.Wc(e.documents),i=n.Bn(r,!1),a.resolve(i.snapshot),[3,3];case 2:return o=t.sent(),s=RE(o,"Failed to execute query '"+c+" against cache"),a.reject(s),[3,3];case 3:return[2]}})})})];case 1:return[2,(t.sent(),a.promise)]}})})}(this.ti,this.nu,e))]}})})},PN.prototype.Hf=function(a,u){return Ms(this,void 0,void 0,function(){return Fs(this,function(t){switch(t.label){case 0:return this.Uf(),[4,this.Bf.promise];case 1:return[2,(t.sent(),e=this.ti,n=this.Wf,r=a,i=u,o=new aE,s=LN(e,n,r,{includeMetadataChanges:!0,Gl:!0},{next:function(t){s(),t.fromCache&&i&&"server"===i.source?o.reject(new Vg(jg.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):o.resolve(t)},error:function(t){return o.reject(t)}}),o.promise)]}var e,n,r,i,o,s})})},PN.prototype.write=function(t){var e=this;this.Uf();var n=new aE;return this.ti.hi(function(){return e.Du.write(t,n)}),n.promise},PN.prototype.s=function(){return this.b_.s},PN.prototype.Ll=function(t){var e=this;this.Uf();var n=new oC(t);return this.ti.hi(function(){return Ms(e,void 0,void 0,function(){return Fs(this,function(t){return[2,this.Wf.Ll(n)]})})}),function(){n.ef(),e.ti.hi(function(){return Ms(e,void 0,void 0,function(){return Fs(this,function(t){return[2,this.Wf.ql(n)]})})})}},Object.defineProperty(PN.prototype,"Yf",{get:function(){return this.ti.Ei},enumerable:!1,configurable:!0}),PN.prototype.transaction=function(t){var e=this;this.Uf();var n=new aE;return this.ti.hi(function(){return new ON(e.ti,e.su,t,n).run(),Promise.resolve()}),n.promise},PN);function PN(t,e){this.credentials=t,this.ti=e,this.clientId=Tg.t(),this.Bf=new aE}function DN(t,e,n,r){this.ti=t,this.su=e,this.updateFunction=n,this.si=r,this.xf=5,this.wi=new cE(this.ti,"transaction_retry")}function xN(t){this.su=t,this.vf=new Map,this.mutations=[],this.Sf=!1,this.Df=null,this.Cf=new Set}function LN(t,e,n,r,i){var o=new oC(i),s=new gS(n,o,r);return t.hi(function(){return e.listen(s)}),function(){o.ef(),t.hi(function(){return e.vu(s)})}}var MN,FN,UN=(nA.prototype.Zf=function(t){switch(ib(t)){case 0:return null;case 1:return t.booleanValue;case 2:return lb(t.integerValue||t.doubleValue);case 3:return this.td(t.timestampValue);case 4:return this.ed(t);case 5:return t.stringValue;case 6:return new OC(fb(t.bytesValue));case 7:return this.nd(t.referenceValue);case 8:return this.sd(t.geoPointValue);case 9:return this.rd(t.arrayValue);case 10:return this.od(t.mapValue);default:throw Eg()}},nA.prototype.od=function(t){var n=this,r={};return Dg(t.fields||{},function(t,e){r[t]=n.Zf(e)}),r},nA.prototype.sd=function(t){return new $C(lb(t.latitude),lb(t.longitude))},nA.prototype.rd=function(t){var e=this;return(t.values||[]).map(function(t){return e.Zf(t)})},nA.prototype.ed=function(t){switch(this.Jf){case"previous":var e=function t(e){var n=e.mapValue.fields.__previous_value__;return eb(n)?t(n):n}(t);return null==e?null:this.Zf(e);case"estimate":return this.td(nb(t));default:return null}},nA.prototype.td=function(t){var e=hb(t),n=new qg(e.seconds,e.nanos);return this.timestampsInSnapshots?n:n.toDate()},nA.prototype.nd=function(t){var e=Hg.k(t);Ig(Gb(e));var n=new Og(e.get(1),e.get(3)),r=new zg(e.g(5));return n.isEqual(this.s)||bg("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this.s.projectId+"/"+this.s.database+") instead."),this.Xf(r)},nA),jN=LE.ji,VN=(eA.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},eA),qN=(Object.defineProperty(tA.prototype,"Id",{get:function(){return this.md||(this.md=new dN(this.Tf,this.Ed.ignoreUndefinedProperties)),this.md},enumerable:!1,configurable:!0}),tA.prototype.settings=function(t){uC("Firestore.settings",arguments,1),lC("Firestore.settings","object",1,t);var e=new VN(t);if(this.fd&&!this.Ed.isEqual(e))throw new Vg(jg.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");void 0!==(this.Ed=e).credentials&&(this.Td=function(t){if(!t)return new wT;switch(t.type){case"gapi":var e=t.Ad;return Ig(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new TT(e,t.la||"0");case"provider":return t.Ad;default:throw new Vg(jg.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},tA.prototype.enableNetwork=function(){return this._d(),this.fd.enableNetwork()},tA.prototype.disableNetwork=function(){return this._d(),this.fd.disableNetwork()},tA.prototype.enablePersistence=function(t){var e,n;if(this.fd)throw new Vg(jg.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var r=!1,i=!1;if(t&&(void 0!==t.experimentalTabSynchronization&&bg("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),r=null!==(n=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==n&&n,i=!!t.experimentalForceOwningTab&&t.experimentalForceOwningTab,r&&i))throw new Vg(jg.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.Rd(this.hd,this.ad,{K_:!0,cacheSizeBytes:this.Ed.cacheSizeBytes,synchronizeTabs:r,Vo:i})},tA.prototype.clearPersistence=function(){return Ms(this,void 0,void 0,function(){var n,e=this;return Fs(this,function(t){if(void 0!==this.fd&&!this.fd.Yf)throw new Vg(jg.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");return n=new aE,[2,(this.ld.Ii(function(){return Ms(e,void 0,void 0,function(){var e;return Fs(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.hd.clearPersistence(this.Tf,this.wd)];case 1:return t.sent(),n.resolve(),[3,3];case 2:return e=t.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise)]})})},tA.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(tA.prototype,"Pd",{get:function(){return this._d(),this.fd.Yf},enumerable:!1,configurable:!0}),tA.prototype.waitForPendingWrites=function(){return this._d(),this.fd.waitForPendingWrites()},tA.prototype.onSnapshotsInSync=function(t){if(this._d(),iC(t))return this.fd.Ll(t);lC("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return this.fd.Ll(e)},tA.prototype._d=function(){return this.fd||this.Rd(new JS,new ZS,{K_:!1}),this.fd},tA.prototype.Vd=function(){return new kg(this.Tf,this.wd,this.Ed.host,this.Ed.ssl,this.Ed.forceLongPolling)},tA.prototype.Rd=function(t,e,n){var r=this.Vd();return this.fd=new RN(this.Td,this.ld),this.fd.start(r,t,e,n)},tA.dd=function(t){if(e=t.options,!Object.prototype.hasOwnProperty.call(e,"projectId"))throw new Vg(jg.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e,n=t.options.projectId;if(!n||"string"!=typeof n)throw new Vg(jg.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new Og(n)},Object.defineProperty(tA.prototype,"app",{get:function(){if(!this.ud)throw new Vg(jg.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.ud},enumerable:!1,configurable:!0}),tA.prototype.collection=function(t){return uC("Firestore.collection",arguments,1),lC("Firestore.collection","non-empty string",1,t),this._d(),new hA(Hg.k(t),this,null)},tA.prototype.doc=function(t){return uC("Firestore.doc",arguments,1),lC("Firestore.doc","non-empty string",1,t),this._d(),HN.gd(Hg.k(t),this,null)},tA.prototype.collectionGroup=function(t){if(uC("Firestore.collectionGroup",arguments,1),lC("Firestore.collectionGroup","non-empty string",1,t),0<=t.indexOf("/"))throw new Vg(jg.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this._d(),new uA((e=t,new Z_(Hg.$(),e)),this,null);var e},tA.prototype.runTransaction=function(e){var n=this;return uC("Firestore.runTransaction",arguments,1),lC("Firestore.runTransaction","function",1,e),this._d().transaction(function(t){return e(new BN(n,t))})},tA.prototype.batch=function(){return this._d(),new WN(this)},Object.defineProperty(tA,"logLevel",{get:function(){switch(gg()){case Va.DEBUG:return"debug";case Va.ERROR:return"error";case Va.SILENT:return"silent";case Va.WARN:return"warn";case Va.INFO:return"info";case Va.VERBOSE:return"verbose";default:return"error"}},enumerable:!1,configurable:!0}),tA.setLogLevel=function(t){uC("Firestore.setLogLevel",arguments,1),yC("setLogLevel",["debug","error","silent","warn","info","verbose"],1,t),yg.setLogLevel(t)},tA.prototype.yd=function(){return this.Ed.timestampsInSnapshots},tA),BN=(ZN.prototype.get=function(t){var n=this;uC("Transaction.get",arguments,1);var r=gA("Transaction.get",t,this.pd);return this.bd.Nf([r.Ef]).then(function(t){if(!t||1!==t.length)return Eg();var e=t[0];if(e instanceof z_)return new KN(n.pd,r.Ef,null,!1,!1,r.If);if(e instanceof K_)return new KN(n.pd,r.Ef,e,!1,!1,r.If);throw Eg()})},ZN.prototype.set=function(t,e,n){hC("Transaction.set",arguments,2,3);var r=gA("Transaction.set",t,this.pd);n=dA("Transaction.set",n);var i=mA(r.If,e,n),o=gN(this.pd.Id,"Transaction.set",r.Ef,i,null!==r.If,n);return this.bd.set(r.Ef,o),this},ZN.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return i="string"==typeof e||e instanceof PC?(cC("Transaction.update",arguments,3),r=gA("Transaction.update",t,this.pd),bN(this.pd.Id,"Transaction.update",r.Ef,e,n,o)):(uC("Transaction.update",arguments,2),r=gA("Transaction.update",t,this.pd),mN(this.pd.Id,"Transaction.update",r.Ef,e)),this.bd.update(r.Ef,i),this},ZN.prototype.delete=function(t){uC("Transaction.delete",arguments,1);var e=gA("Transaction.delete",t,this.pd);return this.bd.delete(e.Ef),this},ZN),WN=($N.prototype.set=function(t,e,n){hC("WriteBatch.set",arguments,2,3),this.Dd();var r=gA("WriteBatch.set",t,this.pd);n=dA("WriteBatch.set",n);var i=mA(r.If,e,n),o=gN(this.pd.Id,"WriteBatch.set",r.Ef,i,null!==r.If,n);return this.vd=this.vd.concat(o.mf(r.Ef,d_.Qe())),this},$N.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.Dd(),i="string"==typeof e||e instanceof PC?(cC("WriteBatch.update",arguments,3),r=gA("WriteBatch.update",t,this.pd),bN(this.pd.Id,"WriteBatch.update",r.Ef,e,n,o)):(uC("WriteBatch.update",arguments,2),r=gA("WriteBatch.update",t,this.pd),mN(this.pd.Id,"WriteBatch.update",r.Ef,e)),this.vd=this.vd.concat(i.mf(r.Ef,d_.exists(!0))),this},$N.prototype.delete=function(t){uC("WriteBatch.delete",arguments,1),this.Dd();var e=gA("WriteBatch.delete",t,this.pd);return this.vd=this.vd.concat(new x_(e.Ef,d_.Qe())),this},$N.prototype.commit=function(){return this.Dd(),this.Sd=!0,0<this.vd.length?this.pd._d().write(this.vd):Promise.resolve()},$N.prototype.Dd=function(){if(this.Sd)throw new Vg(jg.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},$N),HN=(xs(JN,FN=tN),JN.gd=function(t,e,n){if(t.length%2!=0)throw new Vg(jg.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.F()+" has "+t.length);return new JN(new zg(t),e,n)},Object.defineProperty(JN.prototype,"id",{get:function(){return this.Ef.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(JN.prototype,"parent",{get:function(){return new hA(this.Ef.path.p(),this.firestore,this.If)},enumerable:!1,configurable:!0}),Object.defineProperty(JN.prototype,"path",{get:function(){return this.Ef.path.F()},enumerable:!1,configurable:!0}),JN.prototype.collection=function(t){if(uC("DocumentReference.collection",arguments,1),lC("DocumentReference.collection","non-empty string",1,t),!t)throw new Vg(jg.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=Hg.k(t);return new hA(this.Ef.path.child(e),this.firestore,null)},JN.prototype.isEqual=function(t){if(!(t instanceof JN))throw EC("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this.Ef.isEqual(t.Ef)&&this.If===t.If},JN.prototype.set=function(t,e){hC("DocumentReference.set",arguments,1,2),e=dA("DocumentReference.set",e);var n=mA(this.If,t,e),r=gN(this.firestore.Id,"DocumentReference.set",this.Ef,n,null!==this.If,e);return this.fd.write(r.mf(this.Ef,d_.Qe()))},JN.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n="string"==typeof t||t instanceof PC?(cC("DocumentReference.update",arguments,2),bN(this.firestore.Id,"DocumentReference.update",this.Ef,t,e,r)):(uC("DocumentReference.update",arguments,1),mN(this.firestore.Id,"DocumentReference.update",this.Ef,t)),this.fd.write(n.mf(this.Ef,d_.exists(!0)))},JN.prototype.delete=function(){return uC("DocumentReference.delete",arguments,0),this.fd.write([new x_(this.Ef,d_.Qe())])},JN.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];hC("DocumentReference.onSnapshot",arguments,1,4);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||iC(i[a])||(wC("DocumentReference.onSnapshot",s=i[a],["includeMetadataChanges"]),dC("DocumentReference.onSnapshot","boolean","includeMetadataChanges",s.includeMetadataChanges),a++);var u,c={includeMetadataChanges:s.includeMetadataChanges};iC(i[a])?(u=i[a],i[a]=null===(t=u.next)||void 0===t?void 0:t.bind(u),i[a+1]=null===(e=u.error)||void 0===e?void 0:e.bind(u),i[a+2]=null===(n=u.complete)||void 0===n?void 0:n.bind(u)):(lC("DocumentReference.onSnapshot","function",a,i[a]),fC("DocumentReference.onSnapshot","function",a+1,i[a+1]),fC("DocumentReference.onSnapshot","function",a+2,i[a+2]));var h={next:function(t){i[a]&&i[a](r.Cd(t))},error:i[a+1],complete:i[a+2]};return this.fd.listen(nw(this.Ef.path),c,h)},JN.prototype.get=function(t){var e=this;hC("DocumentReference.get",arguments,0,1),yA("DocumentReference.get",t);var n=this.firestore._d();return t&&"cache"===t.source?n.Kf(this.Ef).then(function(t){return new KN(e.firestore,e.Ef,t,!0,t instanceof K_&&t.Ke,e.If)}):n.Gf(this.Ef,t).then(function(t){return e.Cd(t)})},JN.prototype.withConverter=function(t){return new JN(this.Ef,this.firestore,t)},JN.prototype.Cd=function(t){var e=t.docs.get(this.Ef);return new KN(this.firestore,this.Ef,e,t.fromCache,t.hasPendingWrites,this.If)},JN),GN=(YN.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},YN),KN=(XN.prototype.data=function(t){var e=this;if(hC("DocumentSnapshot.data",arguments,0,1),t=vA("DocumentSnapshot.data",t),this.Nd){if(this.If){var n=new zN(this.pd,this.Ef,this.Nd,this.Fd,this.kd,null);return this.If.fromFirestore(n,t)}return new UN(this.pd.Tf,this.pd.yd(),t.serverTimestamps||"none",function(t){return new HN(t,e.pd,null)}).Zf(this.Nd.Ze())}},XN.prototype.get=function(t,e){var n=this;if(hC("DocumentSnapshot.get",arguments,1,2),e=vA("DocumentSnapshot.get",e),this.Nd){var r=this.Nd.data().field(SN("DocumentSnapshot.get",t,this.Ef));if(null!==r)return new UN(this.pd.Tf,this.pd.yd(),e.serverTimestamps||"none",function(t){return new HN(t,n.pd,n.If)}).Zf(r)}},Object.defineProperty(XN.prototype,"id",{get:function(){return this.Ef.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(XN.prototype,"ref",{get:function(){return new HN(this.Ef,this.pd,this.If)},enumerable:!1,configurable:!0}),Object.defineProperty(XN.prototype,"exists",{get:function(){return null!==this.Nd},enumerable:!1,configurable:!0}),Object.defineProperty(XN.prototype,"metadata",{get:function(){return new GN(this.kd,this.Fd)},enumerable:!1,configurable:!0}),XN.prototype.isEqual=function(t){if(!(t instanceof XN))throw EC("isEqual","DocumentSnapshot",1,t);return this.pd===t.pd&&this.Fd===t.Fd&&this.Ef.isEqual(t.Ef)&&(null===this.Nd?null===t.Nd:this.Nd.isEqual(t.Nd))&&this.If===t.If},XN),zN=(xs(QN,MN=KN),QN.prototype.data=function(t){return MN.prototype.data.call(this,t)},QN);function QN(){return null!==MN&&MN.apply(this,arguments)||this}function XN(t,e,n,r,i,o){this.pd=t,this.Ef=e,this.Nd=n,this.Fd=r,this.kd=i,this.If=o}function YN(t,e){this.hasPendingWrites=t,this.fromCache=e}function JN(t,e,n){var r=this;return(r=FN.call(this,e.Tf,t,n)||this).Ef=t,r.firestore=e,r.If=n,r.fd=r.firestore._d(),r}function $N(t){this.pd=t,this.vd=[],this.Sd=!1}function ZN(t,e){this.pd=t,this.bd=e}function tA(t,e,n,r){var i=this;if(void 0===n&&(n=new JS),void 0===r&&(r=new ZS),this.hd=n,this.ad=r,this.ud=null,this.ld=new AE,this.INTERNAL={delete:function(){return Ms(i,void 0,void 0,function(){return Fs(this,function(t){switch(t.label){case 0:return this._d(),[4,this.fd.terminate()];case 1:return t.sent(),[2]}})})}},"object"==typeof t.options){var o=t;this.ud=o,this.Tf=tA.dd(o),this.wd=o.name,this.Td=new ET(e)}else{var s=t;if(!s.projectId)throw new Vg(jg.INVALID_ARGUMENT,"Must provide projectId");this.Tf=new Og(s.projectId,s.database),this.wd="[DEFAULT]",this.Td=new wT}this.Ed=new VN({})}function eA(t){var e,n,r,i;if(void 0===t.host){if(void 0!==t.ssl)throw new Vg(jg.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else pC("settings","non-empty string","host",t.host),this.host=t.host,dC("settings","boolean","ssl",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if(wC("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling","ignoreUndefinedProperties"]),dC("settings","object","credentials",t.credentials),this.credentials=t.credentials,dC("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),dC("settings","boolean","ignoreUndefinedProperties",t.ignoreUndefinedProperties),!0===t.timestampsInSnapshots?bg("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===t.timestampsInSnapshots&&bg("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(n=t.timestampsInSnapshots)||void 0===n||n,this.ignoreUndefinedProperties=null!==(r=t.ignoreUndefinedProperties)&&void 0!==r&&r,dC("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=LE.Gi;else{if(t.cacheSizeBytes!==jN&&t.cacheSizeBytes<LE.Ki)throw new Vg(jg.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+LE.Ki);this.cacheSizeBytes=t.cacheSizeBytes}dC("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=null!==(i=t.experimentalForceLongPolling)&&void 0!==i&&i}function nA(t,e,n,r){this.s=t,this.timestampsInSnapshots=e,this.Jf=n,this.Xf=r}function rA(t,e,n){if("string"==typeof n){if(""===n)throw new Vg(jg.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!rw(e)&&-1!==n.indexOf("/"))throw new Vg(jg.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Hg.k(n));if(!zg.W(r))throw new Vg(jg.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return pb(t,new zg(r))}if(n instanceof tN)return pb(t,n.Ef);throw new Vg(jg.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+bC(n)+".")}function iA(t,e){if(!Array.isArray(t)||0===t.length)throw new Vg(jg.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new Vg(jg.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if("in"===e||"array-contains-any"===e){if(0<=t.indexOf(null))throw new Vg(jg.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(0<t.filter(function(t){return Number.isNaN(t)}).length)throw new Vg(jg.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")}}function oA(t,e,n){if(!n.isEqual(e))throw new Vg(jg.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function sA(t){if(t.an()&&0===t.tn.length)throw new Vg(jg.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var aA,uA=(pA.prototype.where=function(t,e,n){var r;uC("Query.where",arguments,3),_C("Query.where",3,n),r="not-in"===e||"!="===e?e:yC("Query.where",["<","<=","==",">=",">","array-contains","in","array-contains-any"],2,e);var i,o,s=SN("Query.where",t),a=function(t,e,n,r,i,o){var s;if(r.O()){if("array-contains"===i||"array-contains-any"===i)throw new Vg(jg.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+i+"' queries on FieldPath.documentId().");if("in"===i||"not-in"===i){iA(o,i);for(var a=[],u=0,c=o;u<c.length;u++){var h=c[u];a.push(rA(n,t,h))}s={arrayValue:{values:a}}}else s=rA(n,t,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||iA(o,i),s=_N(e,"Query.where",o,"in"===i||"not-in"===i);var l=vw.create(r,i,s);return function(t,e){if(e.ln()){var n=t.cn();if(null!==n&&!n.isEqual(e.field))throw new Vg(jg.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=t.un();null!==r&&oA(0,e.field,r)}var i=t._n(function(){switch(e.op){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}());if(null!==i)throw i===e.op?new Vg(jg.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Vg(jg.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,l),l}(this.$d,this.firestore.Id,this.firestore.Tf,s,r,n);return new pA((o=(i=this.$d).filters.concat([a]),new Z_(i.path,i.collectionGroup,i.tn.slice(),o,i.limit,i.en,i.startAt,i.endAt)),this.firestore,this.If)},pA.prototype.orderBy=function(t,e){var n;if(hC("Query.orderBy",arguments,1,2),fC("Query.orderBy","non-empty string",2,e),void 0===e||"asc"===e)n="asc";else{if("desc"!==e)throw new Vg(jg.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+e+"', expected 'asc' or 'desc'.");n="desc"}var r,i,o=SN("Query.orderBy",t),s=function(t,e,n){if(null!==t.startAt)throw new Vg(jg.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Vg(jg.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r,i,o=new Ww(e,n),s=o;return null!==(r=t).un()||null!==(i=r.cn())&&oA(0,i,s.field),o}(this.$d,o,n);return new pA((i=(r=this.$d).tn.concat([s]),new Z_(r.path,r.collectionGroup,i,r.filters.slice(),r.limit,r.en,r.startAt,r.endAt)),this.firestore,this.If)},pA.prototype.limit=function(t){return uC("Query.limit",arguments,1),lC("Query.limit","number",1,t),IC("Query.limit",1,t),new pA(sw(this.$d,t,"F"),this.firestore,this.If)},pA.prototype.limitToLast=function(t){return uC("Query.limitToLast",arguments,1),lC("Query.limitToLast","number",1,t),IC("Query.limitToLast",1,t),new pA(sw(this.$d,t,"L"),this.firestore,this.If)},pA.prototype.startAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];cC("Query.startAt",arguments,1);var r=this.xd("Query.startAt",t,e,!0);return new pA(aw(this.$d,r),this.firestore,this.If)},pA.prototype.startAfter=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];cC("Query.startAfter",arguments,1);var r=this.xd("Query.startAfter",t,e,!1);return new pA(aw(this.$d,r),this.firestore,this.If)},pA.prototype.endBefore=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];cC("Query.endBefore",arguments,1);var r=this.xd("Query.endBefore",t,e,!0);return new pA(uw(this.$d,r),this.firestore,this.If)},pA.prototype.endAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];cC("Query.endAt",arguments,1);var r=this.xd("Query.endAt",t,e,!1);return new pA(uw(this.$d,r),this.firestore,this.If)},pA.prototype.isEqual=function(t){if(!(t instanceof pA))throw EC("isEqual","Query",1,t);return this.firestore===t.firestore&&cw(this.$d,t.$d)&&this.If===t.If},pA.prototype.withConverter=function(t){return new pA(this.$d,this.firestore,t)},pA.prototype.xd=function(h,t,e,n){if(_C(h,1,t),t instanceof KN)return uC(h,qs([t],e),1),function(t,e,n,r){if(!n)throw new Vg(jg.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+h+"().");for(var i=[],o=0,s=iw(t);o<s.length;o++){var a=s[o];if(a.field.O())i.push(pb(e,n.key));else{var u=n.field(a.field);if(eb(u))throw new Vg(jg.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===u){var c=a.field.F();throw new Vg(jg.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+c+"' (used as the orderBy) does not exist.")}i.push(u)}}return new Lw(i,r)}(this.$d,this.firestore.Tf,t.Nd,n);var r=[t].concat(e);return function(t,e,n,r,i,o){var s=t.tn;if(i.length>s.length)throw new Vg(jg.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.O()){if("string"!=typeof c)throw new Vg(jg.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!rw(t)&&-1!==c.indexOf("/"))throw new Vg(jg.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(Hg.k(c));if(!zg.W(h))throw new Vg(jg.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var l=new zg(h);a.push(pb(e,l))}else{var f=_N(n,r,c);a.push(f)}}return new Lw(a,o)}(this.$d,this.firestore.Tf,this.firestore.Id,h,r,n)},pA.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];hC("Query.onSnapshot",arguments,1,4);var s,a={},u=0;"object"!=typeof i[u]||iC(i[u])||(wC("Query.onSnapshot",a=i[u],["includeMetadataChanges"]),dC("Query.onSnapshot","boolean","includeMetadataChanges",a.includeMetadataChanges),u++),iC(i[u])?(s=i[u],i[u]=null===(t=s.next)||void 0===t?void 0:t.bind(s),i[u+1]=null===(e=s.error)||void 0===e?void 0:e.bind(s),i[u+2]=null===(n=s.complete)||void 0===n?void 0:n.bind(s)):(lC("Query.onSnapshot","function",u,i[u]),fC("Query.onSnapshot","function",u+1,i[u+1]),fC("Query.onSnapshot","function",u+2,i[u+2]));var c={next:function(t){i[u]&&i[u](new cA(r.firestore,r.$d,t,r.If))},error:i[u+1],complete:i[u+2]};return sA(this.$d),this.firestore._d().listen(this.$d,a,c)},pA.prototype.get=function(t){var e=this;hC("Query.get",arguments,0,1),yA("Query.get",t),sA(this.$d);var n=this.firestore._d();return(t&&"cache"===t.source?n.zf(this.$d):n.Hf(this.$d,t)).then(function(t){return new cA(e.firestore,e.$d,t,e.If)})},pA),cA=(Object.defineProperty(fA.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!1,configurable:!0}),Object.defineProperty(fA.prototype,"empty",{get:function(){return this.Od.docs._()},enumerable:!1,configurable:!0}),Object.defineProperty(fA.prototype,"size",{get:function(){return this.Od.docs.size},enumerable:!1,configurable:!0}),fA.prototype.forEach=function(e,n){var r=this;hC("QuerySnapshot.forEach",arguments,1,2),lC("QuerySnapshot.forEach","function",1,e),this.Od.docs.forEach(function(t){e.call(n,r.Bd(t,r.metadata.fromCache,r.Od.Lt.has(t.key)))})},Object.defineProperty(fA.prototype,"query",{get:function(){return new uA(this.Md,this.pd,this.If)},enumerable:!1,configurable:!0}),fA.prototype.docChanges=function(t){t&&(wC("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),dC("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.Od.Bt)throw new Vg(jg.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.Ld&&this.qd===e||(this.Ld=function(i,e,o){if(i.Ot._()){var n=0;return i.docChanges.map(function(t){var e=o(t.doc,i.fromCache,i.Lt.has(t.doc.key));return t.doc,{type:"added",doc:e,oldIndex:-1,newIndex:n++}})}var s=i.Ot;return i.docChanges.filter(function(t){return e||3!==t.type}).map(function(t){var e=o(t.doc,i.fromCache,i.Lt.has(t.doc.key)),n=-1,r=-1;return 0!==t.type&&(n=s.indexOf(t.doc.key),s=s.delete(t.doc.key)),1!==t.type&&(r=(s=s.add(t.doc)).indexOf(t.doc.key)),{type:function(){switch(t.type){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Eg()}}(),doc:e,oldIndex:n,newIndex:r}})}(this.Od,e,this.Bd.bind(this)),this.qd=e),this.Ld},fA.prototype.isEqual=function(t){if(!(t instanceof fA))throw EC("isEqual","QuerySnapshot",1,t);return this.pd===t.pd&&cw(this.Md,t.Md)&&this.Od.isEqual(t.Od)&&this.If===t.If},fA.prototype.Bd=function(t,e,n){return new zN(this.pd,t.key,t,e,n,this.If)},fA),hA=(xs(lA,aA=uA),Object.defineProperty(lA.prototype,"id",{get:function(){return this.$d.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(lA.prototype,"parent",{get:function(){var t=this.$d.path.p();return t._()?null:new HN(new zg(t),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(lA.prototype,"path",{get:function(){return this.$d.path.F()},enumerable:!1,configurable:!0}),lA.prototype.doc=function(t){hC("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=Tg.t()),lC("CollectionReference.doc","non-empty string",1,t);var e=Hg.k(t);return HN.gd(this.$d.path.child(e),this.firestore,this.If)},lA.prototype.add=function(t){uC("CollectionReference.add",arguments,1),lC("CollectionReference.add","object",1,this.If?this.If.toFirestore(t):t);var e=this.doc();return e.set(t).then(function(){return e})},lA.prototype.withConverter=function(t){return new lA(this.Ud,this.firestore,t)},lA);function lA(t,e,n){var r=this;if(((r=aA.call(this,nw(t),e,n)||this).Ud=t).length%2!=1)throw new Vg(jg.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.F()+" has "+t.length);return r}function fA(t,e,n,r){this.pd=t,this.Md=e,this.Od=n,this.If=r,this.Ld=null,this.qd=null,this.metadata=new GN(n.hasPendingWrites,n.fromCache)}function pA(t,e,n){this.$d=t,this.firestore=e,this.If=n}function dA(t,e){if(void 0===e)return{merge:!1};if(wC(t,e,["merge","mergeFields"]),dC(t,"boolean","merge",e.merge),void 0!==(n=e.mergeFields)&&function(t,e,n){if(!(n instanceof Array))throw new Vg(jg.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+bC(n));for(var r,i=0;i<n.length;++i)if(!("string"==typeof(r=n[i])||r instanceof PC))throw new Vg(jg.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+i+" was: "+bC(n[i]))}(t,"mergeFields",n),void 0!==e.mergeFields&&void 0!==e.merge)throw new Vg(jg.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');var n;return e}function vA(t,e){return void 0===e?{}:(wC(t,e,["serverTimestamps"]),vC(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function yA(t,e){fC(t,"object",1,e),e&&(wC(t,e,["source"]),vC(t,0,"source",e.source,["default","server","cache"]))}function gA(t,e,n){if(e instanceof tN){if(e.firestore!==n)throw new Vg(jg.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw EC(t,"DocumentReference",1,e)}function mA(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var bA,_A={Firestore:qN,GeoPoint:$C,Timestamp:qg,Blob:OC,Transaction:BN,WriteBatch:WN,DocumentReference:HN,DocumentSnapshot:KN,Query:uA,QueryDocumentSnapshot:zN,QuerySnapshot:cA,CollectionReference:hA,FieldPath:PC,FieldValue:YC,setLogLevel:qN.setLogLevel,CACHE_SIZE_UNLIMITED:jN};(bA=Ll).INTERNAL.registerComponent(new Ra("firestore",function(t){return e=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),r=new ZS,i=new $S(r),new qN(e,n,i,r);var e,n,r,i},"PUBLIC").setServiceProps(Object.assign({},_A))),bA.registerVersion("@firebase/firestore","1.16.4-202071122108");var wA,EA={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},IA=(xs(TA,wA=Error),TA);function TA(t,e,n){var r=wA.call(this,e)||this;return Object.setPrototypeOf(r,TA.prototype),r.code=t,r.details=n,r}var SA=(CA.prototype.getAuthToken=function(){return Ms(this,void 0,void 0,function(){var e;return Fs(this,function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(e=t.sent())?[2,e.accessToken]:[2,void 0];case 3:return t.sent(),[2,void 0];case 4:return[2]}})})},CA.prototype.getInstanceIdToken=function(){return Ms(this,void 0,void 0,function(){return Fs(this,function(t){if(!(this.messaging&&"Notification"in self&&"granted"===Notification.permission))return[2,void 0];try{return[2,this.messaging.getToken()]}catch(t){return[2,void 0]}return[2]})})},CA.prototype.getContext=function(){return Ms(this,void 0,void 0,function(){var e,n;return Fs(this,function(t){switch(t.label){case 0:return[4,this.getAuthToken()];case 1:return e=t.sent(),[4,this.getInstanceIdToken()];case 2:return n=t.sent(),[2,{authToken:e,instanceIdToken:n}]}})})},CA);function CA(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then(function(t){return n.auth=t},function(){}),this.messaging||e.get().then(function(t){return n.messaging=t},function(){})}function NA(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var AA=(kA.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map(function(t){return e.encode(t)});if("function"==typeof t||"object"==typeof t)return NA(t,function(t){return e.encode(t)});throw new Error("Data cannot be encoded in JSON: "+t)},kA.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(t){return e.decode(t)}):"function"==typeof t||"object"==typeof t?NA(t,function(t){return e.decode(t)}):t},kA);function kA(){}var OA,RA=(Object.defineProperty(PA.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),PA.prototype._url=function(t){var e=this.app_.options.projectId,n=this.region_;return null===this.emulatorOrigin?"https://"+n+"-"+e+".cloudfunctions.net/"+t:this.emulatorOrigin+"/"+e+"/"+n+"/"+t},PA.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},PA.prototype.httpsCallable=function(e,n){var r=this;return function(t){return r.call(e,t,n||{})}},PA.prototype.postJSON=function(r,i,o){return Ms(this,void 0,void 0,function(){var e,n;return Fs(this,function(t){switch(t.label){case 0:o.append("Content-Type","application/json"),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,fetch(r,{method:"POST",body:JSON.stringify(i),headers:o})];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),[2,{status:0,json:null}];case 4:n=null,t.label=5;case 5:return t.trys.push([5,7,,8]),[4,e.json()];case 6:return n=t.sent(),[3,8];case 7:return t.sent(),[3,8];case 8:return[2,{status:e.status,json:n}]}})})},PA.prototype.call=function(v,y,g){return Ms(this,void 0,void 0,function(){var i,o,s,a,u,c,h,l,f,p,d;return Fs(this,function(t){switch(t.label){case 0:return i=this._url(v),y=this.serializer.encode(y),o={data:y},s=new Headers,[4,this.contextProvider.getContext()];case 1:return(a=t.sent()).authToken&&s.append("Authorization","Bearer "+a.authToken),a.instanceIdToken&&s.append("Firebase-Instance-ID-Token",a.instanceIdToken),u=g.timeout||7e4,n=u,e=new Promise(function(t,e){r=setTimeout(function(){e(new IA("deadline-exceeded","deadline-exceeded"))},n)}),h=(c={timer:r,promise:e}).timer,l=c.promise,[4,Promise.race([DA(h,this.postJSON(i,o,s)),l,DA(h,this.cancelAllRequests)])];case 2:if(!(f=t.sent()))throw new IA("cancelled","Firebase Functions instance was deleted.");if(p=function(t,e,n){var r=function(){if(200<=t&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!EA[a])return new IA("internal","internal");r=EA[a],i=a}var u=s.message;"string"==typeof u&&(i=u),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(t){}return"ok"===r?null:new IA(r,i,o)}(f.status,f.json,this.serializer))throw p;if(!f.json)throw new IA("internal","Response is not valid JSON object.");if(void 0===(d=f.json.data)&&(d=f.json.result),void 0===d)throw new IA("internal","Response is missing data field.");return[2,{data:this.serializer.decode(d)}]}var n,r,e})})},PA);function PA(t,e,n,r){var i=this;void 0===r&&(r="us-central1"),this.app_=t,this.region_=r,this.serializer=new AA,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return i.deleteService()}},this.contextProvider=new SA(e,n),this.cancelAllRequests=new Promise(function(t){i.deleteService=function(){return t()}})}function DA(n,r){return Ms(this,void 0,void 0,function(){var e;return Fs(this,function(t){switch(t.label){case 0:return[4,r];case 1:return e=t.sent(),clearTimeout(n),[2,e]}})})}function xA(n){return new Promise(function(t,e){n.onsuccess=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function LA(n,r,i){var o,t=new Promise(function(t,e){xA(o=n[r].apply(n,i)).then(t,e)});return t.request=o,t}function MA(t,n,e){e.forEach(function(e){Object.defineProperty(t.prototype,e,{get:function(){return this[n][e]},set:function(t){this[n][e]=t}})})}function FA(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return LA(this[n],t,arguments)})})}function UA(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return this[n][t].apply(this[n],arguments)})})}function jA(t,r,e,n){n.forEach(function(n){n in e.prototype&&(t.prototype[n]=function(){return t=this[r],(e=LA(t,n,arguments)).then(function(t){if(t)return new qA(t,e.request)});var t,e})})}function VA(t){this._index=t}function qA(t,e){this._cursor=t,this._request=e}function BA(t){this._store=t}function WA(n){this._tx=n,this.complete=new Promise(function(t,e){n.oncomplete=function(){t()},n.onerror=function(){e(n.error)},n.onabort=function(){e(n.error)}})}function HA(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new WA(n)}function GA(t){this._db=t}function KA(t,e,n){var r=LA(indexedDB,"open",[t,e]),i=r.request;return i&&(i.onupgradeneeded=function(t){n&&n(new HA(i.result,t.oldVersion,i.transaction))}),r.then(function(t){return new GA(t)})}function zA(t){return LA(indexedDB,"deleteDatabase",[t])}OA={Functions:RA},Ll.INTERNAL.registerComponent(new Ra("functions",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("messaging");return new RA(n,r,i,e)},"PUBLIC").setServiceProps(OA).setMultipleInstances(!0)),Ll.registerVersion("@firebase/functions","0.4.50-202071122108"),MA(VA,"_index",["name","keyPath","multiEntry","unique"]),FA(VA,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),jA(VA,"_index",IDBIndex,["openCursor","openKeyCursor"]),MA(qA,"_cursor",["direction","key","primaryKey","value"]),FA(qA,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(n){n in IDBCursor.prototype&&(qA.prototype[n]=function(){var e=this,t=arguments;return Promise.resolve().then(function(){return e._cursor[n].apply(e._cursor,t),xA(e._request).then(function(t){if(t)return new qA(t,e._request)})})})}),BA.prototype.createIndex=function(){return new VA(this._store.createIndex.apply(this._store,arguments))},BA.prototype.index=function(){return new VA(this._store.index.apply(this._store,arguments))},MA(BA,"_store",["name","keyPath","indexNames","autoIncrement"]),FA(BA,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),jA(BA,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),UA(BA,"_store",IDBObjectStore,["deleteIndex"]),WA.prototype.objectStore=function(){return new BA(this._tx.objectStore.apply(this._tx,arguments))},MA(WA,"_tx",["objectStoreNames","mode"]),UA(WA,"_tx",IDBTransaction,["abort"]),HA.prototype.createObjectStore=function(){return new BA(this._db.createObjectStore.apply(this._db,arguments))},MA(HA,"_db",["name","version","objectStoreNames"]),UA(HA,"_db",IDBDatabase,["deleteObjectStore","close"]),GA.prototype.transaction=function(){return new WA(this._db.transaction.apply(this._db,arguments))},MA(GA,"_db",["name","version","objectStoreNames"]),UA(GA,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(o){[BA,VA].forEach(function(t){o in t.prototype&&(t.prototype[o.replace("open","iterate")]=function(){var t,e=(t=arguments,Array.prototype.slice.call(t)),n=e[e.length-1],r=this._store||this._index,i=r[o].apply(r,e.slice(0,-1));i.onsuccess=function(){n(i.result)}})})}),[VA,BA].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,n){var r=this,i=[];return new Promise(function(e){r.iterateCursor(t,function(t){t?(i.push(t.value),void 0===n||i.length!=n?t.continue():e(i)):e(i)})})})});var QA,XA="0.4.16-202071122108",YA=1e4,JA="w:"+XA,$A="FIS_v2",ZA="https://firebaseinstallations.googleapis.com/v1",tk=36e5,ek=((QA={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',QA["not-registered"]="Firebase Installation is not registered.",QA["installation-not-found"]="Firebase Installation not found.",QA["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',QA["app-offline"]="Could not process request. Application offline.",QA["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",QA),nk=new ha("installations","Installations",ek);function rk(t){return t instanceof ua&&t.code.includes("request-failed")}function ik(t){var e=t.projectId;return ZA+"/projects/"+e+"/installations"}function ok(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function sk(r,i){return Ms(this,void 0,void 0,function(){var e,n;return Fs(this,function(t){switch(t.label){case 0:return[4,i.json()];case 1:return e=t.sent(),n=e.error,[2,nk.create("request-failed",{requestName:r,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})]}})})}function ak(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function uk(t,e){var n=e.refreshToken,r=ak(t);return r.append("Authorization",$A+" "+n),r}function ck(n){return Ms(this,void 0,void 0,function(){var e;return Fs(this,function(t){switch(t.label){case 0:return[4,n()];case 1:return 500<=(e=t.sent()).status&&e.status<600?[2,n()]:[2,e]}})})}function hk(e){return new Promise(function(t){setTimeout(t,e)})}var lk=/^[cdef][\w-]{21}$/,fk="";function pk(t){return t.appName+"!"+t.appId}var dk=new Map;function vk(t,e){var n,r,i,o=pk(t);yk(o,e),n=o,r=e,(i=mk())&&i.postMessage({key:n,fid:r}),bk()}function yk(t,e){var n,r,i=dk.get(t);if(i)try{for(var o=Us(i),s=o.next();!s.done;s=o.next())(0,s.value)(e)}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var gk=null;function mk(){return!gk&&"BroadcastChannel"in self&&((gk=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){yk(t.data.key,t.data.fid)}),gk}function bk(){0===dk.size&&gk&&(gk.close(),gk=null)}var _k,wk,Ek="firebase-installations-database",Ik=1,Tk="firebase-installations-store",Sk=null;function Ck(){return Sk=Sk||KA(Ek,Ik,function(t){switch(t.oldVersion){case 0:t.createObjectStore(Tk)}})}function Nk(s,a){return Ms(this,void 0,void 0,function(){var e,n,r,i,o;return Fs(this,function(t){switch(t.label){case 0:return e=pk(s),[4,Ck()];case 1:return n=t.sent(),r=n.transaction(Tk,"readwrite"),[4,(i=r.objectStore(Tk)).get(e)];case 2:return o=t.sent(),[4,i.put(a,e)];case 3:return t.sent(),[4,r.complete];case 4:return t.sent(),o&&o.fid===a.fid||vk(s,a.fid),[2,a]}})})}function Ak(i){return Ms(this,void 0,void 0,function(){var e,n,r;return Fs(this,function(t){switch(t.label){case 0:return e=pk(i),[4,Ck()];case 1:return n=t.sent(),[4,(r=n.transaction(Tk,"readwrite")).objectStore(Tk).delete(e)];case 2:return t.sent(),[4,r.complete];case 3:return t.sent(),[2]}})})}function kk(a,u){return Ms(this,void 0,void 0,function(){var e,n,r,i,o,s;return Fs(this,function(t){switch(t.label){case 0:return e=pk(a),[4,Ck()];case 1:return n=t.sent(),r=n.transaction(Tk,"readwrite"),[4,(i=r.objectStore(Tk)).get(e)];case 2:return o=t.sent(),void 0!==(s=u(o))?[3,4]:[4,i.delete(e)];case 3:return t.sent(),[3,6];case 4:return[4,i.put(s,e)];case 5:t.sent(),t.label=6;case 6:return[4,r.complete];case 7:return t.sent(),!s||o&&o.fid===s.fid||vk(a,s.fid),[2,s]}})})}function Ok(i){return Ms(this,void 0,void 0,function(){var r,e,n;return Fs(this,function(t){switch(t.label){case 0:return[4,kk(i,function(t){var e=Pk(t||{fid:function(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=btoa(String.fromCharCode.apply(String,Vs(t))).replace(/\+/g,"-").replace(/\//g,"_").substr(0,22);return lk.test(e)?e:fk}catch(t){return fk}}(),registrationStatus:0}),n=function(t,e){if(0!==e.registrationStatus)return 1===e.registrationStatus?{installationEntry:e,registrationPromise:function(o){return Ms(this,void 0,void 0,function(){var e,n,r,i;return Fs(this,function(t){switch(t.label){case 0:return[4,Rk(o)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,hk(100)];case 3:return t.sent(),[4,Rk(o)];case 4:return e=t.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,Ok(o)];case 6:return n=t.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}})})}(t)}:{installationEntry:e};if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(nk.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(r,i){return Ms(this,void 0,void 0,function(){var e,n;return Fs(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,7]),[4,function(a){var u=i.fid;return Ms(this,void 0,void 0,function(){var e,n,r,i,o,s;return Fs(this,function(t){switch(t.label){case 0:return e=ik(a),n=ak(a),r={fid:u,authVersion:$A,appId:a.appId,sdkVersion:JA},i={method:"POST",headers:n,body:JSON.stringify(r)},[4,ck(function(){return fetch(e,i)})];case 1:return(o=t.sent()).ok?[4,o.json()]:[3,3];case 2:return[2,{fid:(s=t.sent()).fid||u,registrationStatus:2,refreshToken:s.refreshToken,authToken:ok(s.authToken)}];case 3:return[4,sk("Create Installation",o)];case 4:throw t.sent()}})})}(r)];case 1:return e=t.sent(),[2,Nk(r,e)];case 2:return rk(n=t.sent())&&409===n.serverCode?[4,Ak(r)]:[3,4];case 3:return t.sent(),[3,6];case 4:return[4,Nk(r,{fid:i.fid,registrationStatus:0})];case 5:t.sent(),t.label=6;case 6:throw n;case 7:return[2]}})})}(t,n)}}(i,e);return r=n.registrationPromise,n.installationEntry})];case 1:return(e=t.sent()).fid!==fk?[3,3]:(n={},[4,r]);case 2:return[2,(n.installationEntry=t.sent(),n)];case 3:return[2,{installationEntry:e,registrationPromise:r}]}})})}function Rk(t){return kk(t,function(t){if(!t)throw nk.create("installation-not-found");return Pk(t)})}function Pk(t){return 1===t.registrationStatus&&t.registrationTime+YA<Date.now()?{fid:t.fid,registrationStatus:0}:t}function Dk(u,c){return void 0===c&&(c=!1),Ms(this,void 0,void 0,function(){var a,e,n;return Fs(this,function(t){switch(t.label){case 0:return[4,kk(u.appConfig,function(t){if(!Lk(t))throw nk.create("not-registered");var e,n,r,i,o=t.authToken;if(c||2!==o.requestStatus||(r=o,(i=Date.now())<r.creationTime||r.creationTime+r.expiresIn<i+tk)){if(1===o.requestStatus)return a=function(r,i){return Ms(this,void 0,void 0,function(){var e,n;return Fs(this,function(t){switch(t.label){case 0:return[4,xk(r.appConfig)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.authToken.requestStatus?[3,5]:[4,hk(100)];case 3:return t.sent(),[4,xk(r.appConfig)];case 4:return e=t.sent(),[3,2];case 5:return 0===(n=e.authToken).requestStatus?[2,Dk(r,i)]:[2,n]}})})}(u,c),t;if(!navigator.onLine)throw nk.create("app-offline");var s=(e=t,n={requestStatus:1,requestTime:Date.now()},Ls(Ls({},e),{authToken:n}));return a=function(i,o){return Ms(this,void 0,void 0,function(){var e,n,r;return Fs(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,8]),[4,function(t,u){var c=t.appConfig,h=t.platformLoggerProvider;return Ms(this,void 0,void 0,function(){var n,r,i,o,s,a;return Fs(this,function(t){switch(t.label){case 0:return e=u.fid,n=ik(c)+"/"+e+"/authTokens:generate",r=uk(c,u),(i=h.getImmediate({optional:!0}))&&r.append("x-firebase-client",i.getPlatformInfoString()),o={installation:{sdkVersion:JA}},s={method:"POST",headers:r,body:JSON.stringify(o)},[4,ck(function(){return fetch(n,s)})];case 1:return(a=t.sent()).ok?[4,a.json()]:[3,3];case 2:return[2,ok(t.sent())];case 3:return[4,sk("Generate Auth Token",a)];case 4:throw t.sent()}var e})})}(i,o)];case 1:return e=t.sent(),r=Ls(Ls({},o),{authToken:e}),[4,Nk(i.appConfig,r)];case 2:return t.sent(),[2,e];case 3:return!rk(n=t.sent())||401!==n.serverCode&&404!==n.serverCode?[3,5]:[4,Ak(i.appConfig)];case 4:return t.sent(),[3,7];case 5:return r=Ls(Ls({},o),{authToken:{requestStatus:0}}),[4,Nk(i.appConfig,r)];case 6:t.sent(),t.label=7;case 7:throw n;case 8:return[2]}})})}(u,s),s}return t})];case 1:return e=t.sent(),a?[4,a]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=e.authToken,t.label=4;case 4:return[2,n]}})})}function xk(t){return kk(t,function(t){if(!Lk(t))throw nk.create("not-registered");var e=t.authToken;return 1===e.requestStatus&&e.requestTime+YA<Date.now()?Ls(Ls({},t),{authToken:{requestStatus:0}}):t})}function Lk(t){return void 0!==t&&2===t.registrationStatus}function Mk(t){return nk.create("missing-app-config-values",{valueName:t})}(_k=Ll).INTERNAL.registerComponent(new Ra("installations",function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw Mk("App Configuration");if(!t.name)throw Mk("App Name");try{for(var r=Us(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw Mk(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(i){return Ms(this,void 0,void 0,function(){var e,n,r;return Fs(this,function(t){switch(t.label){case 0:return[4,Ok(i.appConfig)];case 1:return e=t.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):Dk(i).catch(console.error),[2,n.fid]}})})}(n)},getToken:function(t){return function(e,n){return void 0===n&&(n=!1),Ms(this,void 0,void 0,function(){return Fs(this,function(t){switch(t.label){case 0:return[4,function(n){return Ms(this,void 0,void 0,function(){var e;return Fs(this,function(t){switch(t.label){case 0:return[4,Ok(n)];case 1:return(e=t.sent().registrationPromise)?[4,e]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e.appConfig)];case 1:return t.sent(),[4,Dk(e,n)];case 2:return[2,t.sent().token]}})})}(n,t)},delete:function(){return function(r){return Ms(this,void 0,void 0,function(){var e,n;return Fs(this,function(t){switch(t.label){case 0:return[4,kk(e=r.appConfig,function(t){if(!t||0!==t.registrationStatus)return t})];case 1:if(!(n=t.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw nk.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw nk.create("app-offline");case 3:return[4,function(s,a){return Ms(this,void 0,void 0,function(){var n,r,i,o;return Fs(this,function(t){switch(t.label){case 0:return e=a.fid,n=ik(s)+"/"+e,r=uk(s,a),i={method:"DELETE",headers:r},[4,ck(function(){return fetch(n,i)})];case 1:return(o=t.sent()).ok?[3,3]:[4,sk("Delete Installation",o)];case 2:throw t.sent();case 3:return[2]}var e})})}(e,n)];case 4:return t.sent(),[4,Ak(e)];case 5:t.sent(),t.label=6;case 6:return[2]}})})}(n)},onIdChange:function(t){return function(t,e){mk();var n=pk(t),r=dk.get(n);r||(r=new Set,dk.set(n,r)),r.add(e)}(i=n.appConfig,r=t),function(){var t,e=r,n=pk(i);(t=dk.get(n))&&(t.delete(e),0===t.size&&dk.delete(n),bk())};var r,i}}},"PUBLIC")),_k.registerVersion("@firebase/installations",XA);var Fk,Uk,jk=((wk={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',wk["only-available-in-window"]="This method is available in a Window context.",wk["only-available-in-sw"]="This method is available in a service worker context.",wk["permission-default"]="The notification permission was not granted and dismissed instead.",wk["permission-blocked"]="The notification permission was not granted and blocked instead.",wk["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",wk["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",wk["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$errorInfo}",wk["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",wk["token-unsubscribe-failed"]="A problem occured while unsubscribing the user from FCM: {$errorInfo}",wk["token-update-failed"]="A problem occured while updating the user from FCM: {$errorInfo}",wk["token-update-no-token"]="FCM returned no token when updating the user to push.",wk["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",wk["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",wk["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",wk["invalid-vapid-key"]="The public VAPID key must be a string.",wk["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",wk),Vk=new ha("messaging","Messaging",jk),qk="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Bk="https://fcmregistrations.googleapis.com/v1",Wk="FCM_MSG",Hk="google.c.a.c_id";function Gk(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,Vs(e))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(Uk=Fk=Fk||{}).PUSH_RECEIVED="push-received",Uk.NOTIFICATION_CLICKED="notification-clicked";var Kk="fcm_token_details_db",zk=5,Qk="fcm_token_object_Store";var Xk="firebase-messaging-database",Yk=1,Jk="firebase-messaging-store",$k=null;function Zk(){return $k=$k||KA(Xk,Yk,function(t){switch(t.oldVersion){case 0:t.createObjectStore(Jk)}})}function tO(i){return Ms(this,void 0,void 0,function(){var e,n,r;return Fs(this,function(t){switch(t.label){case 0:return e=nO(i),[4,Zk()];case 1:return[4,t.sent().transaction(Jk).objectStore(Jk).get(e)];case 2:return(n=t.sent())?[2,n]:[3,3];case 3:return[4,function(a){return Ms(this,void 0,void 0,function(){var s,e=this;return Fs(this,function(t){switch(t.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(!t.sent().map(function(t){return t.name}).includes(Kk))return[2,null];t.label=2;case 2:return s=null,[4,KA(Kk,zk,function(o){return Ms(e,void 0,void 0,function(){var e,n,r,i;return Fs(this,function(t){switch(t.label){case 0:return!(o.oldVersion<2)&&o.objectStoreNames.contains(Qk)?[4,(e=o.transaction.objectStore(Qk)).index("fcmSenderId").get(a)]:[2];case 1:return n=t.sent(),[4,e.clear()];case 2:if(t.sent(),!n)return[2];if(2===o.oldVersion){if(!(r=n).auth||!r.p256dh||!r.endpoint)return[2];s={token:r.fcmToken,createTime:null!==(i=r.createTime)&&void 0!==i?i:Date.now(),subscriptionOptions:{auth:r.auth,p256dh:r.p256dh,endpoint:r.endpoint,swScope:r.swScope,vapidKey:"string"==typeof r.vapidKey?r.vapidKey:Gk(r.vapidKey)}}}else 3!==o.oldVersion&&4!==o.oldVersion||(s={token:(r=n).fcmToken,createTime:r.createTime,subscriptionOptions:{auth:Gk(r.auth),p256dh:Gk(r.p256dh),endpoint:r.endpoint,swScope:r.swScope,vapidKey:Gk(r.vapidKey)}});return[2]}})})})];case 3:return t.sent().close(),[4,zA(Kk)];case 4:return t.sent(),[4,zA("fcm_vapid_details_db")];case 5:return t.sent(),[4,zA("undefined")];case 6:return t.sent(),[2,function(){if(s&&s.subscriptionOptions){var t=s.subscriptionOptions;return"number"==typeof s.createTime&&0<s.createTime&&"string"==typeof s.token&&0<s.token.length&&"string"==typeof t.auth&&0<t.auth.length&&"string"==typeof t.p256dh&&0<t.p256dh.length&&"string"==typeof t.endpoint&&0<t.endpoint.length&&"string"==typeof t.swScope&&0<t.swScope.length&&"string"==typeof t.vapidKey&&0<t.vapidKey.length}}()?s:null]}})})}(i.appConfig.senderId)];case 4:return(r=t.sent())?[4,eO(i,r)]:[3,6];case 5:return t.sent(),[2,r];case 6:return[2]}})})}function eO(i,o){return Ms(this,void 0,void 0,function(){var e,n,r;return Fs(this,function(t){switch(t.label){case 0:return e=nO(i),[4,Zk()];case 1:return n=t.sent(),[4,(r=n.transaction(Jk,"readwrite")).objectStore(Jk).put(o,e)];case 2:return t.sent(),[4,r.complete];case 3:return t.sent(),[2,o]}})})}function nO(t){return t.appConfig.appId}function rO(s,a){return Ms(this,void 0,void 0,function(){var e,n,r,i,o;return Fs(this,function(t){switch(t.label){case 0:return[4,oO(s)];case 1:e=t.sent(),n={method:"DELETE",headers:e},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(iO(s.appConfig)+"/"+a,n)];case 3:return[4,t.sent().json()];case 4:if((r=t.sent()).error)throw i=r.error.message,Vk.create("token-unsubscribe-failed",{errorInfo:i});return[3,6];case 5:throw o=t.sent(),Vk.create("token-unsubscribe-failed",{errorInfo:o});case 6:return[2]}})})}function iO(t){var e=t.projectId;return Bk+"/projects/"+e+"/registrations"}function oO(t){var n=t.appConfig,r=t.installations;return Ms(this,void 0,void 0,function(){var e;return Fs(this,function(t){switch(t.label){case 0:return[4,r.getToken()];case 1:return e=t.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}})})}function sO(t){var e=t.p256dh,n=t.auth,r=t.endpoint,i=t.vapidKey,o={web:{endpoint:r,auth:n,p256dh:e}};return i!==qk&&(o.web.applicationPubKey=i),o}function aO(h,l,f){return Ms(this,void 0,void 0,function(){var s,a,u,c;return Fs(this,function(t){switch(t.label){case 0:if("granted"!==Notification.permission)throw Vk.create("permission-blocked");return[4,function(n,i){return Ms(this,void 0,void 0,function(){var e;return Fs(this,function(t){switch(t.label){case 0:return[4,n.pushManager.getSubscription()];case 1:return(e=t.sent())?[2,e]:[2,n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(){for(var t=(i+"=".repeat((4-i.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),e=atob(t),n=new Uint8Array(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}()})]}})})}(l,f)];case 1:return s=t.sent(),[4,tO(h)];case 2:return a=t.sent(),u={vapidKey:f,swScope:l.scope,endpoint:s.endpoint,auth:Gk(s.getKey("auth")),p256dh:Gk(s.getKey("p256dh"))},a?[3,3]:[2,cO(h,u)];case 3:if(e=a.subscriptionOptions,n=u.vapidKey===e.vapidKey,r=u.endpoint===e.endpoint,i=u.auth===e.auth,o=u.p256dh===e.p256dh,n&&r&&i&&o)return[3,8];t.label=4;case 4:return t.trys.push([4,6,,7]),[4,rO(h,a.token)];case 5:return t.sent(),[3,7];case 6:return c=t.sent(),console.warn(c),[3,7];case 7:return[2,cO(h,u)];case 8:return Date.now()>=a.createTime+6048e5?[2,function(i,o,s){return Ms(this,void 0,void 0,function(){var e,n,r;return Fs(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,5]),[4,function(a,u){return Ms(this,void 0,void 0,function(){var e,n,r,i,o,s;return Fs(this,function(t){switch(t.label){case 0:return[4,oO(a)];case 1:e=t.sent(),n=sO(u.subscriptionOptions),r={method:"PATCH",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(iO(a.appConfig)+"/"+u.token,r)];case 3:return[4,t.sent().json()];case 4:return i=t.sent(),[3,6];case 5:throw o=t.sent(),Vk.create("token-update-failed",{errorInfo:o});case 6:if(i.error)throw s=i.error.message,Vk.create("token-update-failed",{errorInfo:s});if(!i.token)throw Vk.create("token-update-no-token");return[2,i.token]}})})}(o,i)];case 1:return e=t.sent(),n=Ls(Ls({},i),{token:e,createTime:Date.now()}),[4,eO(o,n)];case 2:return t.sent(),[2,e];case 3:return r=t.sent(),[4,uO(o,s)];case 4:throw t.sent(),r;case 5:return[2]}})})}({token:a.token,createTime:Date.now(),subscriptionOptions:u},h,l)]:[2,a.token];case 9:return[2]}var e,n,r,i,o})})}function uO(r,i){return Ms(this,void 0,void 0,function(){var e,n;return Fs(this,function(t){switch(t.label){case 0:return[4,tO(r)];case 1:return(e=t.sent())?[4,rO(r,e.token)]:[3,4];case 2:return t.sent(),[4,function(i){return Ms(this,void 0,void 0,function(){var e,n,r;return Fs(this,function(t){switch(t.label){case 0:return e=nO(i),[4,Zk()];case 1:return n=t.sent(),[4,(r=n.transaction(Jk,"readwrite")).objectStore(Jk).delete(e)];case 2:return t.sent(),[4,r.complete];case 3:return t.sent(),[2]}})})}(r)];case 3:t.sent(),t.label=4;case 4:return[4,i.pushManager.getSubscription()];case 5:return(n=t.sent())?[2,n.unsubscribe()]:[2,!0]}})})}function cO(r,i){return Ms(this,void 0,void 0,function(){var e,n;return Fs(this,function(t){switch(t.label){case 0:return[4,function(a,u){return Ms(this,void 0,void 0,function(){var e,n,r,i,o,s;return Fs(this,function(t){switch(t.label){case 0:return[4,oO(a)];case 1:e=t.sent(),n=sO(u),r={method:"POST",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(iO(a.appConfig),r)];case 3:return[4,t.sent().json()];case 4:return i=t.sent(),[3,6];case 5:throw o=t.sent(),Vk.create("token-subscribe-failed",{errorInfo:o});case 6:if(i.error)throw s=i.error.message,Vk.create("token-subscribe-failed",{errorInfo:s});if(!i.token)throw Vk.create("token-subscribe-no-token");return[2,i.token]}})})}(r,i)];case 1:return e=t.sent(),n={token:e,createTime:Date.now(),subscriptionOptions:i},[4,eO(r,n)];case 2:return t.sent(),[2,n.token]}})})}function hO(t){return"object"==typeof t&&t&&Hk in t}var lO=(Object.defineProperty(fO.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),fO.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw Vk.create("invalid-bg-handler");this.bgMessageHandler=t},fO.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},fO.prototype.getToken=function(){var n,r;return Ms(this,void 0,void 0,function(){var e;return Fs(this,function(t){switch(t.label){case 0:return this.vapidKey?[3,2]:[4,tO(this.firebaseDependencies)];case 1:e=t.sent(),this.vapidKey=null!==(r=null===(n=null==e?void 0:e.subscriptionOptions)||void 0===n?void 0:n.vapidKey)&&void 0!==r?r:qk,t.label=2;case 2:return[2,aO(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},fO.prototype.deleteToken=function(){return uO(this.firebaseDependencies,self.registration)},fO.prototype.requestPermission=function(){throw Vk.create("only-available-in-window")},fO.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw Vk.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw Vk.create("invalid-vapid-key");this.vapidKey=t},fO.prototype.useServiceWorker=function(){throw Vk.create("only-available-in-window")},fO.prototype.onMessage=function(){throw Vk.create("only-available-in-window")},fO.prototype.onTokenRefresh=function(){throw Vk.create("only-available-in-window")},fO.prototype.onPush=function(I){return Ms(this,void 0,void 0,function(){var b,_,w,E;return Fs(this,function(t){switch(t.label){case 0:return(b=function(){var t=I.data;if(!t)return null;try{return t.json()}catch(t){return null}}())?[4,pO()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return(_=t.sent()).some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")})?[2,function(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=Fk.PUSH_RECEIVED;try{for(var i=Us(t),o=i.next();!o.done;o=i.next())o.value.postMessage(e)}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}(_,b)]:(w=!1,b.notification?[4,((m=Ls({},(y=b).notification)).data=((g={})[Wk]=y,g),d=(f=m).actions,v=Notification.maxActions,d&&v&&d.length>v&&console.warn("This browser only supports "+v+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(p=f.title)&&void 0!==p?p:"",f))]:[3,3]);case 2:t.sent(),w=!0,t.label=3;case 3:return!0===w&&!1===this.isOnBackgroundMessageUsed||this.bgMessageHandler&&(l={from:(e=b).from,collapseKey:e.collapse_key},s=l,(a=e).notification&&(s.notification={},(u=a.notification.title)&&(s.notification.title=u),(c=a.notification.body)&&(s.notification.body=c),(h=a.notification.image)&&(s.notification.image=h)),e.data&&(l.data=e.data),n=l,(r=e).fcmOptions&&(n.fcmOptions={},(i=r.fcmOptions.link)&&(n.fcmOptions.link=i),(o=r.fcmOptions.analytics_label)&&(n.fcmOptions.analyticsLabel=o)),E=l,"function"==typeof this.bgMessageHandler?this.bgMessageHandler(E):this.bgMessageHandler.next(E)),[2]}var e,n,r,i,o,s,a,u,c,h,l,f,p,d,v,y,g,m})})},fO.prototype.onSubChange=function(n){var r,i;return Ms(this,void 0,void 0,function(){var e;return Fs(this,function(t){switch(t.label){case 0:return n.newSubscription?[3,2]:[4,uO(this.firebaseDependencies,self.registration)];case 1:return t.sent(),[2];case 2:return[4,tO(this.firebaseDependencies)];case 3:return e=t.sent(),[4,uO(this.firebaseDependencies,self.registration)];case 4:return t.sent(),[4,aO(this.firebaseDependencies,self.registration,null!==(i=null===(r=null==e?void 0:e.subscriptionOptions)||void 0===r?void 0:r.vapidKey)&&void 0!==i?i:qk)];case 5:return t.sent(),[2]}})})},fO.prototype.onNotificationClick=function(a){var u,c;return Ms(this,void 0,void 0,function(){var i,o,s;return Fs(this,function(t){switch(t.label){case 0:return!(i=null===(c=null===(u=a.notification)||void 0===u?void 0:u.data)||void 0===c?void 0:c[Wk])||a.action?[2]:(a.stopImmediatePropagation(),a.notification.close(),(o=(null!==(n=null===(e=i.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=i.notification)||void 0===r?void 0:r.click_action)||(hO(i.data)?self.location.origin:null))?[4,function(u){return Ms(this,void 0,void 0,function(){var e,n,r,i,o,s,a;return Fs(this,function(t){switch(t.label){case 0:return e=new URL(u,self.location.href),[4,pO()];case 1:n=t.sent();try{for(r=Us(n),i=r.next();!i.done;i=r.next())if(o=i.value,new URL(o.url,self.location.href).host===e.host)return[2,o]}catch(t){s={error:t}}finally{try{i&&!i.done&&(a=r.return)&&a.call(r)}finally{if(s)throw s.error}}return[2,null]}})})}(o)]:[2]);case 1:return(s=t.sent())?[3,4]:[4,self.clients.openWindow(o)];case 2:return s=t.sent(),[4,new Promise(function(t){setTimeout(t,3e3)})];case 3:return t.sent(),[3,6];case 4:return[4,s.focus()];case 5:s=t.sent(),t.label=6;case 6:return s?(i.messageType=Fk.NOTIFICATION_CLICKED,i.isFirebaseMessaging=!0,[2,s.postMessage(i)]):[2]}var e,n,r})})},fO);function fO(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(t){t.waitUntil(e.onPush(t))}),self.addEventListener("pushsubscriptionchange",function(t){t.waitUntil(e.onSubChange(t))}),self.addEventListener("notificationclick",function(t){t.waitUntil(e.onNotificationClick(t))})}function pO(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}var dO=(Object.defineProperty(vO.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),vO.prototype.messageEventListener=function(i){return Ms(this,void 0,void 0,function(){var n,r;return Fs(this,function(t){switch(t.label){case 0:return(n=i.data).isFirebaseMessaging?(this.onMessageCallback&&n.messageType===Fk.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback((delete(e=Object.assign({},n)).messageType,delete e.isFirebaseMessaging,e)):this.onMessageCallback.next(Object.assign({},n))),hO(r=n.data)&&"1"===r["google.c.a.e"]?[4,this.logEvent(n.messageType,r)]:[3,2]):[2];case 1:t.sent(),t.label=2;case 2:return[2]}var e})})},vO.prototype.getVapidKey=function(){return this.vapidKey},vO.prototype.getSwReg=function(){return this.swRegistration},vO.prototype.getToken=function(e){return Ms(this,void 0,void 0,function(){return Fs(this,function(t){switch(t.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:t.sent(),t.label=2;case 2:if("granted"!==Notification.permission)throw Vk.create("permission-blocked");return[4,this.updateVapidKey(null==e?void 0:e.vapidKey)];case 3:return t.sent(),[4,this.updateSwReg(null==e?void 0:e.serviceWorkerRegistration)];case 4:return t.sent(),[2,aO(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},vO.prototype.updateVapidKey=function(e){return Ms(this,void 0,void 0,function(){return Fs(this,function(t){return e?this.vapidKey=e:this.vapidKey||(this.vapidKey=qk),[2]})})},vO.prototype.updateSwReg=function(e){return Ms(this,void 0,void 0,function(){return Fs(this,function(t){switch(t.label){case 0:return e||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:if(!e&&this.swRegistration)return[2];if(!(e instanceof ServiceWorkerRegistration))throw Vk.create("invalid-sw-registration");return this.swRegistration=e,[2]}})})},vO.prototype.registerDefaultSw=function(){return Ms(this,void 0,void 0,function(){var e,n;return Fs(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),e=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return e.swRegistration=t.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw n=t.sent(),Vk.create("failed-service-worker-registration",{browserErrorMessage:n.message});case 3:return[2]}})})},vO.prototype.deleteToken=function(){return Ms(this,void 0,void 0,function(){return Fs(this,function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,uO(this.firebaseDependencies,this.swRegistration)]}})})},vO.prototype.requestPermission=function(){return Ms(this,void 0,void 0,function(){var e;return Fs(this,function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?Vk.create("permission-blocked"):Vk.create("permission-default")}})})},vO.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw Vk.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw Vk.create("invalid-vapid-key");this.vapidKey=t},vO.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw Vk.create("invalid-sw-registration");if(this.swRegistration)throw Vk.create("use-sw-after-get-token");this.swRegistration=t},vO.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},vO.prototype.setBackgroundMessageHandler=function(){throw Vk.create("only-available-in-sw")},vO.prototype.onBackgroundMessage=function(){throw Vk.create("only-available-in-sw")},vO.prototype.onTokenRefresh=function(){return function(){}},vO.prototype.logEvent=function(n,r){return Ms(this,void 0,void 0,function(){var e;return Fs(this,function(t){switch(t.label){case 0:return e=function(){switch(n){case Fk.NOTIFICATION_CLICKED:return"notification_open";case Fk.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return t.sent().logEvent(e,{message_id:r[Hk],message_name:r["google.c.a.c_l"],message_time:r["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},vO);function vO(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(t){return e.messageEventListener(t)})}function yO(t){return Vk.create("missing-app-config-values",{valueName:t})}var gO={isSupported:mO};function mO(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}Ll.INTERNAL.registerComponent(new Ra("messaging",function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw yO("App Configuration Object");if(!t.name)throw yO("App Name");var r=t.options;try{for(var i=Us(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw yO(s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!mO())throw Vk.create("unsupported-browser");return new(self&&"ServiceWorkerGlobalScope"in self?lO:dO)(n)},"PUBLIC").setServiceProps(gO));var bO="firebasestorage.googleapis.com",_O=12e4,wO=6e5,EO=(IO.prototype.codeProp=function(){return this.code},IO.prototype.codeEquals=function(t){return SO(t)===this.codeProp()},IO.prototype.serverResponseProp=function(){return this.serverResponse_},IO.prototype.setServerResponseProp=function(t){this.serverResponse_=t},Object.defineProperty(IO.prototype,"name",{get:function(){return this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(IO.prototype,"code",{get:function(){return this.code_},enumerable:!1,configurable:!0}),Object.defineProperty(IO.prototype,"message",{get:function(){return this.serverResponse_?this.message_+"\n"+this.serverResponse_:this.message_},enumerable:!1,configurable:!0}),Object.defineProperty(IO.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!1,configurable:!0}),IO);function IO(t,e){this.code_=SO(t),this.message_="Firebase Storage: "+e,this.serverResponse_=null,this.name_="FirebaseError"}var TO={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"};function SO(t){return"storage/"+t}function CO(){return new EO(TO.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function NO(){return new EO(TO.CANCELED,"User canceled the upload/download.")}function AO(){return new EO(TO.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function kO(t,e,n){return new EO(TO.INVALID_ARGUMENT,"Invalid argument in `"+e+"` at index "+t+": "+n)}function OO(){return new EO(TO.APP_DELETED,"The Firebase app was deleted.")}function RO(t,e){return new EO(TO.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function PO(t){throw new EO(TO.INTERNAL_ERROR,"Internal error: "+t)}var DO={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function xO(t){switch(t){case DO.RAW:case DO.BASE64:case DO.BASE64URL:case DO.DATA_URL:return;default:throw"Expected one of the event types: ["+DO.RAW+", "+DO.BASE64+", "+DO.BASE64URL+", "+DO.DATA_URL+"]."}}function LO(t,e){this.data=t,this.contentType=e||null}function MO(t,e){switch(t){case DO.RAW:return new LO(FO(e));case DO.BASE64:case DO.BASE64URL:return new LO(UO(t,e));case DO.DATA_URL:return new LO((n=new jO(e)).base64?UO(DO.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw RO(DO.DATA_URL,"Malformed data URL.")}return FO(e)}(n.rest),new jO(e).contentType)}var n;throw CO()}function FO(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function UO(t,e){switch(t){case DO.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw RO(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case DO.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw RO(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(e){throw RO(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}function jO(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw RO(DO.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r=e[1]||null;null!=r&&(this.base64=(n=";base64",r.length>=n.length&&r.substring(r.length-n.length)===n),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}var VO,qO,BO={STATE_CHANGED:"state_changed"},WO="running",HO="pausing",GO="paused",KO="success",zO="canceling",QO="canceled",XO="error",YO={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function JO(t){switch(t){case WO:case HO:case zO:return YO.RUNNING;case GO:return YO.PAUSED;case KO:return YO.SUCCESS;case QO:return YO.CANCELED;case XO:default:return YO.ERROR}}function $O(t){return null!=t}function ZO(t){return void 0!==t}function tR(t){return"function"==typeof t}function eR(t){return"object"==typeof t}function nR(t){return"string"==typeof t||t instanceof String}function rR(t){return"number"==typeof t||t instanceof Number}function iR(t){return oR()&&t instanceof Blob}function oR(){return"undefined"!=typeof Blob}(qO=VO=VO||{})[qO.NO_ERROR=0]="NO_ERROR",qO[qO.NETWORK_ERROR=1]="NETWORK_ERROR",qO[qO.ABORT=2]="ABORT";var sR=(aR.prototype.send=function(t,e,n,r){if(this.sent_)throw PO("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),$O(r))for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return $O(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},aR.prototype.getErrorCode=function(){if(!this.sent_)throw PO("cannot .getErrorCode() before sending");return this.errorCode_},aR.prototype.getStatus=function(){if(!this.sent_)throw PO("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},aR.prototype.getResponseText=function(){if(!this.sent_)throw PO("cannot .getResponseText() before sending");return this.xhr_.responseText},aR.prototype.abort=function(){this.xhr_.abort()},aR.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},aR.prototype.addUploadProgressListener=function(t){$O(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},aR.prototype.removeUploadProgressListener=function(t){$O(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},aR);function aR(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=VO.NO_ERROR,this.sendPromise_=new Promise(function(t){e.xhr_.addEventListener("abort",function(){e.errorCode_=VO.ABORT,t(e)}),e.xhr_.addEventListener("error",function(){e.errorCode_=VO.NETWORK_ERROR,t(e)}),e.xhr_.addEventListener("load",function(){t(e)})})}var uR=(cR.prototype.createXhrIo=function(){return new sR},cR);function cR(){}var hR=(lR.prototype.size=function(){return this.size_},lR.prototype.type=function(){return this.type_},lR.prototype.slice=function(t,e){if(iR(this.data_)){var n=(i=t,o=e,(r=this.data_).webkitSlice?r.webkitSlice(i,o):r.mozSlice?r.mozSlice(i,o):r.slice?r.slice(i,o):null);return null===n?null:new lR(n)}var r,i,o;return new lR(new Uint8Array(this.data_.buffer,t,e-t),!0)},lR.getBlob=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(oR()){var n=t.map(function(t){return t instanceof lR?t.data_:t});return new lR(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(oR())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}.apply(null,n))}var r=t.map(function(t){return nR(t)?MO(DO.RAW,t).data:t.data_}),i=0;r.forEach(function(t){i+=t.byteLength});var o=new Uint8Array(i),s=0;return r.forEach(function(t){for(var e=0;e<t.length;e++)o[s++]=t[e]}),new lR(o,!0)},lR.prototype.uploadData=function(){return this.data_},lR);function lR(t,e){var n=0,r="";iR(t)?(n=(this.data_=t).size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}var fR=(Object.defineProperty(pR.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(pR.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),pR.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},pR.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},pR.makeFromBucketSpec=function(t){var e;try{e=pR.makeFromUrl(t)}catch(e){return new pR(t,"")}if(""===e.path)return e;throw new EO(TO.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")},pR.makeFromUrl=function(t){var e=null,n="([A-Za-z0-9.\\-_]+)",r=new RegExp("^gs://"+n+"(/(.*))?$","i");function i(t){t.path_=decodeURIComponent(t.path)}for(var o=bO.replace(/[.]/g,"\\."),s=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+o+"/v[A-Za-z0-9_]+/b/"+n+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+n+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:i}],a=0;a<s.length;a++){var u=s[a],c=u.regex.exec(t);if(c){e=new pR(c[u.indices.bucket],c[u.indices.path]||""),u.postModify(e);break}}if(null==e)throw new EO(TO.INVALID_URL,"Invalid URL '"+t+"'.");return e},pR);function pR(t,e){this.bucket=t,this.path_=e}function dR(t){var e,n;try{e=JSON.parse(t)}catch(t){return null}return eR(n=e)&&!Array.isArray(n)?e:null}function vR(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function yR(t){return"https://"+bO+"/v0"+t}function gR(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"="+e(t[r]))+"&");return n.slice(0,-1)}function mR(t,e){return e}function bR(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||mR}var _R=null;function wR(t,e,n){var r=dR(e);return null===r?null:function(t,e,n){for(var r,i,o={type:"file"},s=n.length,a=0;a<s;a++){var u=n[a];o[u.local]=u.xform(o,e[u.server])}return r=o,i=t,Object.defineProperty(r,"ref",{get:function(){var t=r.bucket,e=r.fullPath,n=new fR(t,e);return i.makeStorageReference(n)}}),o}(t,r,n)}function ER(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function IR(t){if(!eR(t)||!t)throw"Expected Metadata object.";for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];if("customMetadata"===e){if(!eR(n))throw"Expected object for 'customMetadata' mapping."}else if(eR(r=n)&&null!==r)throw"Mapping for '"+e+"' cannot be an object."}var r}var TR="maxResults",SR="pageToken",CR="prefixes",NR="items";function AR(t){if(!eR(t)||!t)throw"Expected ListOptions object.";for(var e in t)if(e===TR){if(!rR(n=t[TR])||!Number.isInteger(n)||t[TR]<=0)throw"Expected maxResults to be a positive number.";if(1e3<t[TR])throw"Expected maxResults to be less than or equal to 1000."}else{if(e!==SR)throw"Unknown option: "+e;if(t[SR]&&!nR(t[SR]))throw"Expected pageToken to be string."}var n}function kR(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}function OR(t){if(!t)throw CO()}function RR(r,i){return function(t,e){var n=wR(r,e,i);return OR(null!==n),n}}function PR(s,a){return function(t,e){var n,r,i,o=(n=s,r=a,null===(i=dR(e))?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[CR])for(var i=0,o=n[CR];i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t.makeStorageReference(new fR(e,s));r.prefixes.push(a)}if(n[NR])for(var u=0,c=n[NR];u<c.length;u++){var h=c[u],a=t.makeStorageReference(new fR(e,h.name));r.items.push(a)}return r}(n,r,i));return OR(null!==o),o}}function DR(o){return function(t,e){var n,r,i=401===t.getStatus()?new EO(TO.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(r=o.bucket,new EO(TO.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(n=o.path,new EO(TO.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")):e;return i.setServerResponseProp(e.serverResponseProp()),i}}function xR(i){var o=DR(i);return function(t,e){var n,r=o(t,e);return 404===t.getStatus()&&(n=i.path,r=new EO(TO.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")),r.setServerResponseProp(e.serverResponseProp()),r}}function LR(t,e,n){var r=yR(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new kR(r,"GET",RR(t,n),i);return o.errorHandler=xR(e),o}function MR(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=e&&e.type()||"application/octet-stream"),r}function FR(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}function UR(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){OR(!1)}return OR(!!n&&-1!==(e||["active"]).indexOf(n)),n}function jR(t,e,n){var r;tR(t)||$O(e)||$O(n)?(this.next=t,this.error=e||null,this.complete=n||null):(r=t,this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null)}function VR(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o}function qR(t,e,n){for(var r,i,o,s=e.length,a=e.length,u=0;u<e.length;u++)if(e[u].optional){s=u;break}if(!(s<=n.length&&n.length<=a))throw r=n.length,o=s===a?1===(i=s)?"argument":"arguments":(i="between "+s+" and "+a,"arguments"),new EO(TO.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+t+"`: Expected "+i+" "+o+", received "+r+".");for(u=0;u<n.length;u++)try{e[u].validator(n[u])}catch(e){throw e instanceof Error?kO(u,t,e.message):kO(u,t,e)}}function BR(e,t){var n=this;this.validator=function(t){n.optional&&!ZO(t)||e(t)},this.optional=!!t}function WR(t,e){function n(t){if(!nR(t))throw"Expected string."}var r,i,o=t?(r=n,i=t,function(t){r(t),i(t)}):n;return new BR(o,e)}function HR(t){return new BR(IR,t)}function GR(){return new BR(function(t){if(!(rR(t)&&0<=t))throw"Expected a number 0 or greater."})}function KR(e,t){return new BR(function(t){if(!(null===t||$O(t)&&t instanceof Object))throw"Expected an Object.";null!=e&&e(t)},t)}function zR(t){return new BR(function(t){if(null!==t&&!tR(t))throw"Expected a Function."},t)}function QR(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Promise.resolve().then(function(){return n.apply(void 0,t)})}}var XR=(YR.prototype.makeProgressCallback_=function(){var e=this,n=this.transferred_;return function(t){return e.updateProgress_(n+t)}},YR.prototype.shouldDoResumable_=function(t){return 262144<t.size()},YR.prototype.start_=function(){this.state_===WO&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},YR.prototype.resolveToken_=function(e){var n=this;this.service_.getAuthToken().then(function(t){switch(n.state_){case WO:e(t);break;case zO:n.transition_(QO);break;case HO:n.transition_(GO)}})},YR.prototype.createResumable_=function(){var y=this;this.resolveToken_(function(t){var e,n,r,i,o,s,a,u,c,h,l,f,p,d=(e=y.service_,n=y.location_,r=y.mappings_,i=y.blob_,o=y.metadata_,s=n.bucketOnlyServerUrl(),a=MR(n,i,o),u={name:a.fullPath},c=yR(s),h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":i.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},l=ER(a,r),f=e.maxUploadRetryTime,(p=new kR(c,"POST",function(t){var e;UR(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){OR(!1)}return OR(nR(e)),e},f)).urlParams=u,p.headers=h,p.body=l,p.errorHandler=DR(n),p),v=y.service_.makeRequest(d,t);(y.request_=v).getPromise().then(function(t){y.request_=null,y.uploadUrl_=t,y.needToFetchStatus_=!1,y.completeTransitions_()},y.errorHandler_)})},YR.prototype.fetchStatus_=function(){var c=this,h=this.uploadUrl_;this.resolveToken_(function(t){var e,n,r,i,o,s,a=(e=c.service_,n=c.location_,r=h,i=c.blob_,o=e.maxUploadRetryTime,(s=new kR(r,"POST",function(t){var e=UR(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){OR(!1)}n||OR(!1);var r=Number(n);return OR(!isNaN(r)),new FR(r,i.size(),"final"===e)},o)).headers={"X-Goog-Upload-Command":"query"},s.errorHandler=DR(n),s),u=c.service_.makeRequest(a,t);(c.request_=u).getPromise().then(function(t){c.request_=null,c.updateProgress_(t.current),c.needToFetchStatus_=!1,t.finalized&&(c.needToFetchMetadata_=!0),c.completeTransitions_()},c.errorHandler_)})},YR.prototype.continueUpload_=function(){var r=this,i=262144*this.chunkMultiplier_,o=new FR(this.transferred_,this.blob_.size()),s=this.uploadUrl_;this.resolveToken_(function(t){var e;try{e=function(t,s,e,a,n,u,r,i){var c=new FR(0,0);if(r?(c.current=r.current,c.total=r.total):(c.current=0,c.total=a.size()),a.size()!==c.total)throw new EO(TO.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var o=c.total-c.current,h=o;0<n&&(h=Math.min(h,n));var l=c.current,f=l+h,p={"X-Goog-Upload-Command":h===o?"upload, finalize":"upload","X-Goog-Upload-Offset":c.current},d=a.slice(l,f);if(null===d)throw AO();var v=s.maxUploadRetryTime,y=new kR(e,"POST",function(t,e){var n=UR(t,["active","final"]),r=c.current+h,i=a.size(),o="final"===n?RR(s,u)(t,e):null;return new FR(r,i,"final"===n,o)},v);return y.headers=p,y.body=d.uploadData(),y.progressCallback=i||null,y.errorHandler=DR(t),y}(r.location_,r.service_,s,r.blob_,i,r.mappings_,o,r.makeProgressCallback_())}catch(t){return r.error_=t,void r.transition_(XO)}var n=r.service_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.increaseMultiplier_(),r.request_=null,r.updateProgress_(t.current),t.finalized?(r.metadata_=t.metadata,r.transition_(KO)):r.completeTransitions_()},r.errorHandler_)})},YR.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},YR.prototype.fetchMetadata_=function(){var r=this;this.resolveToken_(function(t){var e=LR(r.service_,r.location_,r.mappings_),n=r.service_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.request_=null,r.metadata_=t,r.transition_(KO)},r.metadataErrorHandler_)})},YR.prototype.oneShotUpload_=function(){var r=this;this.resolveToken_(function(t){var e=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=MR(e,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+ER(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",h="\r\n--"+a+"--",l=hR.getBlob(c,r,h);if(null===l)throw AO();var f={name:u.fullPath},p=yR(o),d=t.maxUploadRetryTime,v=new kR(p,"POST",RR(t,n),d);return v.urlParams=f,v.headers=s,v.body=l.uploadData(),v.errorHandler=DR(e),v}(r.service_,r.location_,r.mappings_,r.blob_,r.metadata_),n=r.service_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.request_=null,r.metadata_=t,r.updateProgress_(r.blob_.size()),r.transition_(KO)},r.errorHandler_)})},YR.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},YR.prototype.transition_=function(t){if(this.state_!==t)switch(t){case zO:case HO:this.state_=t,null!==this.request_&&this.request_.cancel();break;case WO:var e=this.state_===GO;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case GO:this.state_=t,this.notifyObservers_();break;case QO:this.error_=NO(),this.state_=t,this.notifyObservers_();break;case XO:case KO:this.state_=t,this.notifyObservers_()}},YR.prototype.completeTransitions_=function(){switch(this.state_){case HO:this.transition_(GO);break;case zO:this.transition_(QO);break;case WO:this.start_()}},Object.defineProperty(YR.prototype,"snapshot",{get:function(){var t=JO(this.state_);return new VR(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!1,configurable:!0}),YR.prototype.on=function(t,e,n,o){var r="Expected a function or an Object with one of `next`, `error`, `complete` properties.",i=zR(!0).validator,s=KR(null,!0).validator;function a(t){try{return void i(t)}catch(t){}try{if(s(t),!(ZO(t.next)||ZO(t.error)||ZO(t.complete)))throw"";return}catch(t){throw r}}qR("on",[WR(function(){if(t!==BO.STATE_CHANGED)throw"Expected one of the event types: ["+BO.STATE_CHANGED+"]."}),KR(a,!0),zR(!0),zR(!0)],arguments);var u=this;function c(i){return function(t,e,n){null!==i&&qR("on",i,arguments);var r=new jR(t,e,o);return u.addObserver_(r),function(){u.removeObserver_(r)}}}var h=[KR(function(t){if(null===t)throw r;a(t)}),zR(!0),zR(!0)];return ZO(e)||ZO(n)||ZO(o)?c(null)(e,n,o):c(h)},YR.prototype.then=function(t,e){return this.promise_.then(t,e)},YR.prototype.catch=function(t){return this.then(null,t)},YR.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},YR.prototype.removeObserver_=function(t){var e=this.observers_.indexOf(t);-1!==e&&this.observers_.splice(e,1)},YR.prototype.notifyObservers_=function(){var e=this;this.finishPromise_(),this.observers_.slice().forEach(function(t){e.notifyObserver_(t)})},YR.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(JO(this.state_)){case YO.SUCCESS:QR(this.resolve_.bind(null,this.snapshot))();break;case YO.CANCELED:case YO.ERROR:QR(this.reject_.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},YR.prototype.notifyObserver_=function(t){switch(JO(this.state_)){case YO.RUNNING:case YO.PAUSED:t.next&&QR(t.next.bind(t,this.snapshot))();break;case YO.SUCCESS:t.complete&&QR(t.complete.bind(t))();break;case YO.CANCELED:case YO.ERROR:t.error&&QR(t.error.bind(t,this.error_))();break;default:t.error&&QR(t.error.bind(t,this.error_))()}},YR.prototype.resume=function(){qR("resume",[],arguments);var t=this.state_===GO||this.state_===HO;return t&&this.transition_(WO),t},YR.prototype.pause=function(){qR("pause",[],arguments);var t=this.state_===WO;return t&&this.transition_(HO),t},YR.prototype.cancel=function(){qR("cancel",[],arguments);var t=this.state_===WO||this.state_===HO;return t&&this.transition_(zO),t},YR);function YR(t,e,n,r,i,o){var s=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.service_=e,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=WO,this.errorHandler_=function(t){s.request_=null,s.chunkMultiplier_=1,t.codeEquals(TO.CANCELED)?(s.needToFetchStatus_=!0,s.completeTransitions_()):(s.error_=t,s.transition_(XO))},this.metadataErrorHandler_=function(t){s.request_=null,t.codeEquals(TO.CANCELED)?s.completeTransitions_():(s.error_=t,s.transition_(XO))},this.promise_=new Promise(function(t,e){s.resolve_=t,s.reject_=e,s.start_()}),this.promise_.then(null,function(){})}var JR=($R.prototype.toString=function(){return qR("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},$R.prototype.newRef=function(t,e){return new $R(t,e)},$R.prototype.mappings=function(){if(_R)return _R;var t=[];t.push(new bR("bucket")),t.push(new bR("generation")),t.push(new bR("metageneration")),t.push(new bR("name","fullPath",!0));var e=new bR("name");e.xform=function(t,e){return!nR(n=e)||n.length<2?n:vR(n);var n},t.push(e);var n=new bR("size");return n.xform=function(t,e){return $O(e)?Number(e):e},t.push(n),t.push(new bR("timeCreated")),t.push(new bR("updated")),t.push(new bR("md5Hash",null,!0)),t.push(new bR("cacheControl",null,!0)),t.push(new bR("contentDisposition",null,!0)),t.push(new bR("contentEncoding",null,!0)),t.push(new bR("contentLanguage",null,!0)),t.push(new bR("contentType",null,!0)),t.push(new bR("metadata","customMetadata",!0)),_R=t},$R.prototype.child=function(t){qR("child",[WR()],arguments);var e,n,r=(e=this.location.path,n=t.split("/").filter(function(t){return 0<t.length}).join("/"),0===e.length?n:e+"/"+n),i=new fR(this.location.bucket,r);return this.newRef(this.service,i)},Object.defineProperty($R.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this.location.path);if(null===t)return null;var e=new fR(this.location.bucket,t);return this.newRef(this.service,e)},enumerable:!1,configurable:!0}),Object.defineProperty($R.prototype,"root",{get:function(){var t=new fR(this.location.bucket,"");return this.newRef(this.service,t)},enumerable:!1,configurable:!0}),Object.defineProperty($R.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty($R.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!1,configurable:!0}),Object.defineProperty($R.prototype,"name",{get:function(){return vR(this.location.path)},enumerable:!1,configurable:!0}),Object.defineProperty($R.prototype,"storage",{get:function(){return this.service},enumerable:!1,configurable:!0}),$R.prototype.put=function(t,e){return void 0===e&&(e=null),qR("put",[new BR(function(t){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||oR()&&t instanceof Blob))throw"Expected Blob or File."}),HR(!0)],arguments),this.throwIfRoot_("put"),new XR(this,this.service,this.location,this.mappings(),new hR(t),e)},$R.prototype.putString=function(t,e,n){void 0===e&&(e=DO.RAW),qR("putString",[WR(),WR(xO,!0),HR(!0)],arguments),this.throwIfRoot_("putString");var r=MO(e,t),i=Object.assign({},n);return!$O(i.contentType)&&$O(r.contentType)&&(i.contentType=r.contentType),new XR(this,this.service,this.location,this.mappings(),new hR(r.data,!0),i)},$R.prototype.delete=function(){var a=this;return qR("delete",[],arguments),this.throwIfRoot_("delete"),this.service.getAuthToken().then(function(t){var e,n,r,i,o,s=(e=a.service,r=yR((n=a.location).fullServerUrl()),i=e.maxOperationRetryTime,(o=new kR(r,"DELETE",function(t,e){},i)).successCodes=[200,204],o.errorHandler=xR(n),o);return a.service.makeRequest(s,t).getPromise()})},$R.prototype.listAll=function(){qR("listAll",[],arguments);var t={prefixes:[],items:[]};return this.listAllHelper(t).then(function(){return t})},$R.prototype.listAllHelper=function(o,s){return Ms(this,void 0,void 0,function(){var e,n,r,i;return Fs(this,function(t){switch(t.label){case 0:return e={pageToken:s},[4,this.list(e)];case 1:return n=t.sent(),(r=o.prefixes).push.apply(r,n.prefixes),(i=o.items).push.apply(i,n.items),null==n.nextPageToken?[3,3]:[4,this.listAllHelper(o,n.nextPageToken)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},$R.prototype.list=function(r){qR("list",[new BR(AR,!0)],arguments);var i=this;return this.service.getAuthToken().then(function(t){var e=r||{},n=function(t,e,n,r){var i={};e.isRoot?i.prefix="":i.prefix=e.path+"/",0<"/".length&&(i.delimiter="/"),n&&(i.pageToken=n),r&&(i.maxResults=r);var o=yR(e.bucketOnlyServerUrl()),s=t.maxOperationRetryTime,a=new kR(o,"GET",PR(t,e.bucket),s);return a.urlParams=i,a.errorHandler=DR(e),a}(i.service,i.location,e.pageToken,e.maxResults);return i.service.makeRequest(n,t).getPromise()})},$R.prototype.getMetadata=function(){var n=this;return qR("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.service.getAuthToken().then(function(t){var e=LR(n.service,n.location,n.mappings());return n.service.makeRequest(e,t).getPromise()})},$R.prototype.updateMetadata=function(h){var l=this;return qR("updateMetadata",[HR()],arguments),this.throwIfRoot_("updateMetadata"),this.service.getAuthToken().then(function(t){var e,n,r,i,o,s,a,u,c=(e=l.service,n=l.location,r=h,i=l.mappings(),o=yR(n.fullServerUrl()),s=ER(r,i),a=e.maxOperationRetryTime,(u=new kR(o,"PATCH",RR(e,i),a)).headers={"Content-Type":"application/json; charset=utf-8"},u.body=s,u.errorHandler=xR(n),u);return l.service.makeRequest(c,t).getPromise()})},$R.prototype.getDownloadURL=function(){var h=this;return qR("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.service.getAuthToken().then(function(t){var e,n,r,i,o,s,a,u,c=(e=h.service,n=h.location,r=h.mappings(),i=yR(n.fullServerUrl()),o=e.maxOperationRetryTime,(s=new kR(i,"GET",(a=e,u=r,function(t,n){var e=wR(a,n,u);return OR(null!==e),function(r){var t=dR(n);if(null===t)return null;if(!nR(t.downloadTokens))return null;var e=t.downloadTokens;if(0===e.length)return null;var i=encodeURIComponent;return e.split(",").map(function(t){var e=r.bucket,n=r.fullPath;return yR("/b/"+i(e)+"/o/"+i(n))+gR({alt:"media",token:t})})[0]}(e)}),o)).errorHandler=xR(n),s);return h.service.makeRequest(c,t).getPromise().then(function(t){if(null===t)throw new EO(TO.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return t})})},$R.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw new EO(TO.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")},$R);function $R(t,e){this.service=t,this.location=e instanceof fR?e:fR.makeFromUrl(e)}var ZR=(tP.prototype.getPromise=function(){return this.promise_},tP.prototype.cancel=function(t){},tP);function tP(t){this.promise_=Promise.reject(t)}var eP=(nP.prototype.start_=function(){var e,n,t,r,i,o,s,a,u,c=this;function h(t,e){var n,r=c.resolve_,i=c.reject_,o=e.xhr;if(e.wasSuccessCode)try{var s=c.callback_(o,o.getResponseText());ZO(s)?r(s):r()}catch(t){i(t)}else null!==o?((n=CO()).setServerResponseProp(o.getResponseText()),c.errorCallback_?i(c.errorCallback_(o,n)):i(n)):e.canceled?i(n=(c.appDelete_?OO:NO)()):i(n=new EO(TO.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))}function l(){return 2===s}function f(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a||(a=!0,n.apply(null,t))}function p(t){i=setTimeout(function(){i=null,e(d,l())},t)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];a||(t||l()||o?f.call.apply(f,qs([null,t],e)):(r<64&&(r*=2),p(1===s?(s=2,0):1e3*(r+Math.random()))))}function v(t){u||(u=!0,a||(null!==i?(t||(s=2),clearTimeout(i),p(0)):t||(s=1)))}this.canceled_?h(0,new rP(!1,null,!0)):this.backoffId_=(e=function(o,t){var e;function s(t){var e=t.loaded,n=t.lengthComputable?t.total:-1;null!==c.progressCallback_&&c.progressCallback_(e,n)}t?o(!1,new rP(!1,null,!0)):(e=c.pool_.createXhrIo(),c.pendingXhr_=e,null!==c.progressCallback_&&e.addUploadProgressListener(s),e.send(c.url_,c.method_,c.body_,c.headers_).then(function(t){null!==c.progressCallback_&&t.removeUploadProgressListener(s),c.pendingXhr_=null;var e,n,r=t.getErrorCode()===VO.NO_ERROR,i=t.getStatus();r&&!c.isRetryStatusCode_(i)?(e=-1!==c.successCodes_.indexOf(i),o(!0,new rP(e,t))):(n=t.getErrorCode()===VO.ABORT,o(!1,new rP(!1,null,n)))}))},n=h,t=this.timeout_,i=null,u=a=o=!(r=1),p(s=0),setTimeout(function(){v(o=!0)},t),v)},nP.prototype.getPromise=function(){return this.promise_},nP.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},nP.prototype.isRetryStatusCode_=function(t){var e=500<=t&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},nP);function nP(t,e,n,r,i,o,s,a,u,c,h){var l=this;this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise(function(t,e){l.resolve_=t,l.reject_=e,l.start_()})}var rP=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};var iP=(oP.extractBucket_=function(t){var e=null==t?void 0:t.storageBucket;return null==e?null:fR.makeFromBucketSpec(e)},oP.prototype.getAuthToken=function(){return Ms(this,void 0,void 0,function(){var e,n;return Fs(this,function(t){switch(t.label){case 0:return(e=this.authProvider_.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:if(null!==(n=t.sent()))return[2,n.accessToken];t.label=2;case 2:return[2,null]}})})},oP.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requests_.forEach(function(t){return t.cancel()}),this.requests_.clear()},oP.prototype.makeStorageReference=function(t){return new JR(this,t)},oP.prototype.makeRequest=function(t,e){var n=this;if(this.deleted_)return new ZR(OO());var r,i,o,s,a,u,c,h,l=(r=t,i=this.appId_,o=e,s=this.pool_,u=gR(r.urlParams),c=r.url+u,h=Object.assign({},r.headers),i&&(h["X-Firebase-GMPID"]=i),null!==o&&0<o.length&&(h.Authorization="Firebase "+o),a=void 0!==Ll?Ll.SDK_VERSION:"AppManager",h["X-Firebase-Storage-Version"]="webjs/"+a,new eP(c,r.method,h,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,s));return this.requests_.add(l),l.getPromise().then(function(){return n.requests_.delete(l)},function(){return n.requests_.delete(l)}),l},oP.prototype.ref=function(t){if(qR("ref",[WR(function(t){if("string"!=typeof t)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(t))throw"Expected child path but got a URL, use refFromURL instead."},!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var e=new JR(this,this.bucket_);return null!=t?e.child(t):e},oP.prototype.refFromURL=function(t){return qR("refFromURL",[WR(function(t){if("string"!=typeof t)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(t))throw"Expected full URL but got a child path, use ref instead.";try{fR.makeFromUrl(t)}catch(t){throw"Expected valid full URL but got an invalid one."}},!1)],arguments),new JR(this,t)},Object.defineProperty(oP.prototype,"maxUploadRetryTime",{get:function(){return this.maxUploadRetryTime_},enumerable:!1,configurable:!0}),oP.prototype.setMaxUploadRetryTime=function(t){qR("setMaxUploadRetryTime",[GR()],arguments),this.maxUploadRetryTime_=t},Object.defineProperty(oP.prototype,"maxOperationRetryTime",{get:function(){return this.maxOperationRetryTime_},enumerable:!1,configurable:!0}),oP.prototype.setMaxOperationRetryTime=function(t){qR("setMaxOperationRetryTime",[GR()],arguments),this.maxOperationRetryTime_=t},Object.defineProperty(oP.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),Object.defineProperty(oP.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!1,configurable:!0}),oP);function oP(t,e,n,r){var i;this.bucket_=null,this.appId_=null,this.deleted_=!1,this.app_=t,this.authProvider_=e,this.maxOperationRetryTime_=_O,this.maxUploadRetryTime_=wO,this.requests_=new Set,this.pool_=n,this.bucket_=null!=r?fR.makeFromBucketSpec(r):oP.extractBucket_(null===(i=this.app_)||void 0===i?void 0:i.options),this.internals_=new uP(this)}var sP,aP,uP=(cP.prototype.delete=function(){return this.service_.deleteApp(),Promise.resolve()},cP);function cP(t){this.service_=t}aP={TaskState:YO,TaskEvent:BO,StringFormat:DO,Storage:iP,Reference:JR},(sP=Ll).INTERNAL.registerComponent(new Ra("storage",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new iP(n,r,new uR,e)},"PUBLIC").setServiceProps(aP).setMultipleInstances(!0)),sP.registerVersion("@firebase/storage","0.3.42-202071122108");var hP,lP,fP,pP,dP="0.3.11-202071122108",vP=dP,yP="FB-PERF-TRACE-MEASURE",gP="@firebase/performance/config",mP="@firebase/performance/configexpire",bP="Performance",_P=((hP={})["trace started"]="Trace {$traceName} was started before.",hP["trace stopped"]="Trace {$traceName} is not running.",hP["no window"]="Window is not available.",hP["no app id"]="App id is not available.",hP["no project id"]="Project id is not available.",hP["no api key"]="Api key is not available.",hP["invalid cc log"]="Attempted to queue invalid cc event",hP["FB not default"]="Performance can only start when Firebase app instance is the default one.",hP["RC response not ok"]="RC response is not ok",hP["invalid attribute name"]="Attribute name {$attributeName} is invalid.",hP["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",hP["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",hP["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",hP),wP=new ha("performance",bP,_P),EP=(IP.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},IP.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},IP.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},IP.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},IP.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},IP.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},IP.prototype.requiredApisAvailable=function(){return!!(fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled)},IP.prototype.setupObserver=function(t,i){this.PerformanceObserver&&new this.PerformanceObserver(function(t){for(var e=0,n=t.getEntries();e<n.length;e++){var r=n[e];i(r)}}).observe({entryTypes:[t]})},IP.getInstance=function(){return void 0===lP&&(lP=new IP(fP)),lP},IP);function IP(t){if(!(this.window=t))throw wP.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}function TP(t,e){var n=t.length-e.length;if(n<0||1<n)throw wP.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var SP,CP,NP,AP=(kP.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw wP.create("no app id");return t},kP.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw wP.create("no project id");return t},kP.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw wP.create("no api key");return t},kP.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},kP.getInstance=function(){return void 0===pP&&(pP=new kP),pP},kP);function kP(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=TP("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=TP("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}(NP=CP=CP||{})[NP.UNKNOWN=0]="UNKNOWN",NP[NP.VISIBLE=1]="VISIBLE",NP[NP.HIDDEN=2]="HIDDEN";var OP=["firebase_","google_","ga_"],RP=new RegExp("^[a-zA-Z]\\w*$");function PP(){switch(EP.getInstance().document.visibilityState){case"visible":return CP.VISIBLE;case"hidden":return CP.HIDDEN;default:return CP.UNKNOWN}}var DP=new Qa(bP);DP.logLevel=Va.INFO;var xP="0.0.1",LP={loggingEnabled:!0},MP="FIREBASE_INSTALLATIONS_AUTH";function FP(t){var r,e,n=function(){var t=EP.getInstance().localStorage;if(t){var e=t.getItem(mP);if(e&&Number(e)>Date.now()){var n=t.getItem(gP);if(n)try{return JSON.parse(n)}catch(t){return}}}}();return n?(jP(n),Promise.resolve()):(r=t,(e=AP.getInstance().installationsService.getToken()).then(function(t){}),e.then(function(t){var e="https://firebaseremoteconfig.googleapis.com/v1/projects/"+AP.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+AP.getInstance().getApiKey(),n=new Request(e,{method:"POST",headers:{Authorization:MP+" "+t},body:JSON.stringify({app_instance_id:r,app_instance_id_token:t,app_id:AP.getInstance().getAppId(),app_version:vP,sdk_version:xP})});return fetch(n).then(function(t){if(t.ok)return t.json();throw wP.create("RC response not ok")})}).catch(function(){DP.info(UP)}).then(jP).then(function(t){var e=EP.getInstance().localStorage;t&&e&&(e.setItem(gP,JSON.stringify(t)),e.setItem(mP,String(Date.now()+60*AP.getInstance().configTimeToLive*60*1e3)))},function(){}))}var UP="Could not fetch config, will use default configs";function jP(t){if(!t)return t;var e=AP.getInstance(),n=t.entries||{};return e.loggingEnabled=void 0!==n.fpr_enabled?"true"===String(n.fpr_enabled):LP.loggingEnabled,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=VP(e.tracesSamplingRate),e.logNetworkAfterSampling=VP(e.networkRequestsSamplingRate),t}function VP(t){return Math.random()<=t}var qP,BP=1;function WP(){return BP=2,qP=qP||(n=EP.getInstance().document,new Promise(function(t){var e;n&&"complete"!==n.readyState?(e=function(){"complete"===n.readyState&&(n.removeEventListener("readystatechange",e),t())},n.addEventListener("readystatechange",e)):t()}).then(function(){return(t=AP.getInstance().installationsService.getId()).then(function(t){SP=t}),t;var t}).then(FP).then(HP,HP));var n}function HP(){BP=3}var GP,KP=1e4,zP=3,QP=zP,XP=[],YP=!1;function JP(t){setTimeout(function(){if(0!==QP)return XP.length?void function(){var t=qs(XP);XP=[];var e,i,n,r,o=t.map(function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}});e={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:AP.getInstance().logSource,log_event:o},i=t,n=e,r=AP.getInstance().getFlTransportFullUrl(),fetch(r,{method:"POST",body:JSON.stringify(n)}).then(function(t){return t.ok||DP.info("Call to Firebase backend failed."),t.json()}).then(function(t){var e=Number(t.nextRequestWaitMillis),n=KP;isNaN(e)||(n=Math.max(e,n));var r=t.logResponseDetails;Array.isArray(r)&&0<r.length&&"RETRY_REQUEST_LATER"===r[0].responseAction&&(XP=qs(i,XP),DP.info("Retry transport request later.")),QP=zP,JP(n)}).catch(function(){XP=qs(t,XP),QP--,DP.info("Tries left: "+QP+"."),JP(KP)})}():JP(KP)},t)}function $P(t,e){var n;(GP=GP||(n=eD,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(t){if(!t.eventTime||!t.message)throw wP.create("invalid cc log");XP=qs(XP,[t])}({message:n.apply(void 0,t),eventTime:Date.now()})}))(t,e)}function ZP(t){var e=AP.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&EP.getInstance().requiredApisAvailable()&&(t.isAuto&&PP()!==CP.VISIBLE||e.loggingEnabled&&e.logTraceAfterSampling&&(3===BP?tD(t):WP().then(function(){return tD(t)},function(){return tD(t)})))}function tD(t){SP&&setTimeout(function(){return $P(t,1)},0)}function eD(t,e){return 0===e?(n={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},r={application_info:nD(),network_request_metric:n},JSON.stringify(r)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:nD(),trace_metric:e};return JSON.stringify(r)}(t);var n,r}function nD(){return{google_app_id:AP.getInstance().getAppId(),app_instance_id:SP,web_app_info:{sdk_version:vP,page_url:EP.getInstance().getUrl(),service_worker_status:"serviceWorker"in(t=EP.getInstance().navigator)?t.serviceWorker.controller?2:3:1,visibility_state:PP(),effective_connection_type:function(){var t=EP.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0};var t}var rD=["_fp","_fcp","_fid"],iD=(oD.prototype.start=function(){if(1!==this.state)throw wP.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},oD.prototype.stop=function(){if(2!==this.state)throw wP.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),ZP(this)},oD.prototype.record=function(t,e,n){if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=Ls({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}ZP(this)},oD.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},oD.prototype.putMetric=function(t,e){if(i=t,o=this.name,0===i.length||100<i.length||!(o&&o.startsWith("_wt_")&&-1<rD.indexOf(i))&&i.startsWith("_"))throw wP.create("invalid custom metric name",{customMetricName:t});var n,r,i,o;this.counters[t]=(n=e,(r=Math.floor(n))<n&&DP.info("Metric value should be an Integer, setting the value as : "+r+"."),r)},oD.prototype.getMetric=function(t){return this.counters[t]||0},oD.prototype.putAttribute=function(t,e){var n,r=!(0===(n=t).length||40<n.length||OP.some(function(t){return n.startsWith(t)})||!n.match(RP)),i=0!==e.length&&e.length<=100;if(r&&i)this.customAttributes[t]=e;else{if(!r)throw wP.create("invalid attribute name",{attributeName:t});if(!i)throw wP.create("invalid attribute value",{attributeValue:e})}},oD.prototype.getAttribute=function(t){return this.customAttributes[t]},oD.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},oD.prototype.getAttributes=function(){return Ls({},this.customAttributes)},oD.prototype.setStartTime=function(t){this.startTimeUs=t},oD.prototype.setDuration=function(t){this.durationUs=t},oD.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},oD.createOobTrace=function(t,e,n){var r,i,o,s,a=EP.getInstance().getUrl();a&&(r=new oD("_wt_"+a,!0),i=Math.floor(1e3*EP.getInstance().getTimeOrigin()),r.setStartTime(i),t&&t[0]&&(r.setDuration(Math.floor(1e3*t[0].duration)),r.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),r.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),r.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),e&&((o=e.find(function(t){return"first-paint"===t.name}))&&o.startTime&&r.putMetric("_fp",Math.floor(1e3*o.startTime)),(s=e.find(function(t){return"first-contentful-paint"===t.name}))&&s.startTime&&r.putMetric("_fcp",Math.floor(1e3*s.startTime)),n&&r.putMetric("_fid",Math.floor(1e3*n))),ZP(r))},oD.createUserTimingTrace=function(t){ZP(new oD(t,!1,t))},oD);function oD(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=EP.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||yP+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}function sD(t){var e,n,r,i,o,s,a,u,c,h,l=t;l&&void 0!==l.responseStart&&(e=EP.getInstance().getTimeOrigin(),n=Math.floor(1e3*(l.startTime+e)),r=l.responseStart?Math.floor(1e3*(l.responseStart-l.startTime)):void 0,i=Math.floor(1e3*(l.responseEnd-l.startTime)),o={url:l.name&&l.name.split("?")[0],responsePayloadBytes:l.transferSize,startTimeUs:n,timeToResponseInitiatedUs:r,timeToResponseCompletedUs:i},s=o,(h=AP.getInstance()).instrumentationEnabled&&(a=s.url,u=h.logEndPointUrl.split("?")[0],c=h.flTransportEndpointUrl.split("?")[0],a!==u&&a!==c&&h.loggingEnabled&&h.logNetworkAfterSampling&&setTimeout(function(){return $P(s,0)},0)))}var aD=5e3;function uD(){SP&&(setTimeout(function(){var e,t=EP.getInstance(),n=t.getEntriesByType("navigation"),r=t.getEntriesByType("paint");t.onFirstInputDelay?(e=setTimeout(function(){iD.createOobTrace(n,r),e=void 0},aD),t.onFirstInputDelay(function(t){e&&(clearTimeout(e),iD.createOobTrace(n,r,t))})):iD.createOobTrace(n,r)},0),setTimeout(function(){for(var t=EP.getInstance(),e=0,n=t.getEntriesByType("resource");e<n.length;e++)sD(n[e]);t.setupObserver("resource",sD)},0),setTimeout(function(){for(var t=EP.getInstance(),e=0,n=t.getEntriesByType("measure");e<n.length;e++)cD(n[e]);t.setupObserver("measure",cD)},0))}function cD(t){var e=t.name;e.substring(0,yP.length)!==yP&&iD.createUserTimingTrace(e)}var hD,lD=(fD.prototype.trace=function(t){return new iD(t)},Object.defineProperty(fD.prototype,"instrumentationEnabled",{get:function(){return AP.getInstance().instrumentationEnabled},set:function(t){AP.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(fD.prototype,"dataCollectionEnabled",{get:function(){return AP.getInstance().dataCollectionEnabled},set:function(t){AP.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),fD);function fD(t){this.app=t,EP.getInstance().requiredApisAvailable()?(YP||(JP(5500),YP=!0),WP().then(uD,uD)):DP.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled.")}(hD=Ll).INTERNAL.registerComponent(new Ra("performance",function(t){return function(t,e){if("[DEFAULT]"!==t.name)throw wP.create("FB not default");if("undefined"==typeof window)throw wP.create("no window");return fP=window,AP.getInstance().firebaseAppInstance=t,AP.getInstance().installationsService=e,new lD(t)}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC")),hD.registerVersion("@firebase/performance",dP);var pD,dD,vD,yD,gD="measurementId",mD="https://www.googletagmanager.com/gtag/js";(dD=pD=pD||{}).EVENT="event",dD.SET="set",dD.CONFIG="config",(yD=vD=vD||{}).ADD_SHIPPING_INFO="add_shipping_info",yD.ADD_PAYMENT_INFO="add_payment_info",yD.ADD_TO_CART="add_to_cart",yD.ADD_TO_WISHLIST="add_to_wishlist",yD.BEGIN_CHECKOUT="begin_checkout",yD.CHECKOUT_PROGRESS="checkout_progress",yD.EXCEPTION="exception",yD.GENERATE_LEAD="generate_lead",yD.LOGIN="login",yD.PAGE_VIEW="page_view",yD.PURCHASE="purchase",yD.REFUND="refund",yD.REMOVE_FROM_CART="remove_from_cart",yD.SCREEN_VIEW="screen_view",yD.SEARCH="search",yD.SELECT_CONTENT="select_content",yD.SELECT_ITEM="select_item",yD.SELECT_PROMOTION="select_promotion",yD.SET_CHECKOUT_OPTION="set_checkout_option",yD.SHARE="share",yD.SIGN_UP="sign_up",yD.TIMING_COMPLETE="timing_complete",yD.VIEW_CART="view_cart",yD.VIEW_ITEM="view_item",yD.VIEW_ITEM_LIST="view_item_list",yD.VIEW_PROMOTION="view_promotion",yD.VIEW_SEARCH_RESULTS="view_search_results";var bD,_D=new Qa("@firebase/analytics");var wD,ED,ID=((bD={})["no-ga-id"]='"'+gD+'" field is empty in Firebase config. Firebase Analytics requires this field to contain a valid measurement ID.',bD["already-exists"]="A Firebase Analytics instance with the measurement ID ${id}  already exists. Only one Firebase Analytics instance can be created for each measurement ID.",bD["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",bD["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate",bD["indexedDB-unsupported"]="IndexedDB is not supported by current browswer",bD["invalid-indexedDB-context"]="Environment doesn't support IndexedDB: {$errorInfo}. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments",bD["cookies-not-enabled"]="Cookies are not enabled in this browser environment. Analytics requires cookies to be enabled.",bD["invalid-analytics-context"]="Firebase Analytics is not supported in browser extensions.",bD),TD=new ha("analytics","Analytics",ID),SD={},CD="dataLayer",ND="gtag",AD=!1;function kD(t,e){if(ta())throw TD.create("invalid-analytics-context");if(!oa())throw TD.create("cookies-not-enabled");if(!ra())throw TD.create("indexedDB-unsupported");ia().catch(function(t){throw TD.create("invalid-indexedDB-context",{errorInfo:t})});var n,r,i,o,s,a,u,c,h,f,p,l,d=t.options[gD];if(!d)throw TD.create("no-ga-id");if(null!=SD[d])throw TD.create("already-exists",{id:d});return AD||(function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(mD))return r}}()||(s=CD,(a=document.createElement("script")).src=mD+"?l="+s,a.async=!0,document.head.appendChild(a)),i=CD,o=[],Array.isArray(window[i])?o=window[i]:window[i]=o,u=SD,c=CD,h=ND,l=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[c].push(arguments)},window[h]&&"function"==typeof window[h]&&(l=window[h]),window[h]=(f=l,p=u,function(t,e,n){if(t===pD.EVENT){var r=[];if(n&&n.send_to){var i=n.send_to;Array.isArray(i)||(i=[i]);for(var o=0,s=i;o<s.length;o++){var a=s[o],u=p[a];if(!u){r=[];break}r.push(u)}}if(0===r.length)for(var c=0,h=Object.values(p);c<h.length;c++){var l=h[c];r.push(l)}Promise.all(r).then(function(){return f(pD.EVENT,e,n||{})}).catch(function(t){return _D.error(t)})}else t===pD.CONFIG?(p[e]||Promise.resolve()).then(function(){f(pD.CONFIG,e,n)}).catch(function(t){return _D.error(t)}):f(pD.SET,e)}),r=(n={gtagCore:l,wrappedGtag:window[h]}).wrappedGtag,ED=r,wD=n.gtagCore,AD=!0),SD[d]=function(r,i,o){return Ms(this,void 0,void 0,function(){var e,n;return Fs(this,function(t){switch(t.label){case 0:return[4,i.getId()];case 1:return e=t.sent(),o("js",new Date),o(pD.CONFIG,r.options[gD],((n={}).firebase_id=e,n.origin="firebase",n.update=!0,n)),[2]}})})}(t,e,wD),{app:t,logEvent:function(t,e,n){return r=ED,i=d,o=t,s=e||{},n&&n.global||(s=Ls(Ls({},e),{send_to:i})),void r(pD.EVENT,o,s||{});var r,i,o,s},setCurrentScreen:function(t,e){return n=ED,r=d,i=t,void(e&&e.global?n(pD.SET,{screen_name:i}):n(pD.CONFIG,r,{update:!0,screen_name:i}));var n,r,i},setUserId:function(t,e){return n=ED,r=d,i=t,void(e&&e.global?n(pD.SET,{user_id:i}):n(pD.CONFIG,r,{update:!0,user_id:i}));var n,r,i},setUserProperties:function(t,a){return function(t,e,n){if(a&&a.global){for(var r={},i=0,o=Object.keys(n);i<o.length;i++){var s=o[i];r["user_properties."+s]=n[s]}t(pD.SET,r)}else t(pD.CONFIG,e,{update:!0,user_properties:n})}(ED,d,t)},setAnalyticsCollectionEnabled:function(t){window["ga-disable-"+d]=!t}}}var OD,RD="analytics";(OD=Ll).INTERNAL.registerComponent(new Ra(RD,function(t){return kD(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:function(t){if(AD)throw TD.create("already-initialized");t.dataLayerName&&(CD=t.dataLayerName),t.gtagName&&(ND=t.gtagName)},EventName:vD,isSupported:function(){return Ms(this,void 0,void 0,function(){return Fs(this,function(t){switch(t.label){case 0:if(ta())return[2,!1];if(!oa())return[2,!1];if(!ra())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,ia()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}})})}})),OD.INTERNAL.registerComponent(new Ra("analytics-internal",function(t){try{return{logEvent:t.getProvider(RD).getImmediate().logEvent}}catch(t){throw TD.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),OD.registerVersion("@firebase/analytics","0.4.2-202071122108");var PD,DD=(xD.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},xD.prototype.fetch=function(s){return Ms(this,void 0,void 0,function(){var e,n,r,i,o;return Fs(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=t.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(s.cacheMaxAgeMillis,n)?[2,r]:(s.eTag=r&&r.eTag,[4,this.client.fetch(s)]);case 2:return i=t.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return t.sent(),[2,i]}})})},xD);function xD(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}var LD=((PD={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",PD["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",PD["registration-api-key"]="Undefined API key. Check Firebase app initialization.",PD["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",PD["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",PD["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",PD["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",PD["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",PD["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",PD["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',PD["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',PD["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",PD["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",PD),MD=new ha("remoteconfig","Remote Config",LD),FD=(UD.prototype.fetch=function(w){return Ms(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,h,l,f,p,d,v,y,g,m,b,_;return Fs(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:n=t.sent(),r=n[0],i=n[1],o=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",s=o+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":w.eTag||"*"},u={sdk_version:this.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:this.appId,language_code:(void 0===e&&(e=navigator),e.languages&&e.languages[0]||e.language)},c={method:"POST",headers:a,body:JSON.stringify(u)},h=fetch(s,c),l=new Promise(function(t,e){w.signal.addEventListener(function(){var t=new Error("The operation was aborted.");t.name="AbortError",e(t)})}),t.label=2;case 2:return t.trys.push([2,5,,6]),[4,Promise.race([h,l])];case 3:return t.sent(),[4,h];case 4:return f=t.sent(),[3,6];case 5:throw p=t.sent(),d="fetch-client-network","AbortError"===p.name&&(d="fetch-timeout"),MD.create(d,{originalErrorMessage:p.message});case 6:if(v=f.status,y=f.headers.get("ETag")||void 0,200!==f.status)return[3,11];b=void 0,t.label=7;case 7:return t.trys.push([7,9,,10]),[4,f.json()];case 8:return b=t.sent(),[3,10];case 9:throw _=t.sent(),MD.create("fetch-client-parse",{originalErrorMessage:_.message});case 10:g=b.entries,m=b.state,t.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===m?v=500:"NO_CHANGE"===m?v=304:"NO_TEMPLATE"!==m&&"EMPTY_CONFIG"!==m||(g={}),304!==v&&200!==v)throw MD.create("fetch-status",{httpStatus:v});return[2,{status:v,eTag:y,config:g}]}var e})})},UD);function UD(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}var jD=(VD.prototype.addEventListener=function(t){this.listeners.push(t)},VD.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},VD);function VD(){this.listeners=[]}var qD=["1","true","t","yes","y","on"],BD=(WD.prototype.asString=function(){return this._value},WD.prototype.asBoolean=function(){return"static"!==this._source&&0<=qD.indexOf(this._value.toLowerCase())},WD.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},WD.prototype.getSource=function(){return this._source},WD);function WD(t,e){void 0===e&&(e=""),this._source=t,this._value=e}var HD=(GD.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=Va.DEBUG;break;case"silent":this._logger.logLevel=Va.SILENT;break;default:this._logger.logLevel=Va.ERROR}},Object.defineProperty(GD.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(GD.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),GD.prototype.activate=function(){return Ms(this,void 0,void 0,function(){var e,n,r;return Fs(this,function(t){switch(t.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return e=t.sent(),n=e[0],r=e[1],n&&n.config&&n.eTag&&n.eTag!==r?[4,Promise.all([this._storageCache.setActiveConfig(n.config),this._storage.setActiveConfigEtag(n.eTag)])]:[2,!1];case 2:return t.sent(),[2,!0]}})})},GD.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},GD.prototype.fetch=function(){return Ms(this,void 0,void 0,function(){var e,n,r,i=this;return Fs(this,function(t){switch(t.label){case 0:e=new jD,setTimeout(function(){return Ms(i,void 0,void 0,function(){return Fs(this,function(t){return e.abort(),[2]})})},this.settings.fetchTimeoutMillis),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:e})];case 2:return t.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return t.sent(),[3,6];case 4:return n=t.sent(),r=n instanceof ua&&-1!==n.code.indexOf("fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(r)];case 5:throw t.sent(),n;case 6:return[2]}})})},GD.prototype.fetchAndActivate=function(){return Ms(this,void 0,void 0,function(){return Fs(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},GD.prototype.getAll=function(){var t,e,n=this;return t=this._storageCache.getActiveConfig(),e=this.defaultConfig,void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(Ls(Ls({},t),e)).reduce(function(t,e){return t[e]=n.getValue(e),t},{})},GD.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},GD.prototype.getNumber=function(t){return this.getValue(t).asNumber()},GD.prototype.getString=function(t){return this.getValue(t).asString()},GD.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new BD("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new BD("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new BD("static"))},GD);function GD(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}function KD(t,e){var n=t.target.error||void 0;return MD.create(e,{originalErrorMessage:n&&n.message})}var zD="app_namespace_store",QD=(XD.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},XD.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},XD.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},XD.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},XD.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},XD.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},XD.prototype.getActiveConfig=function(){return this.get("active_config")},XD.prototype.setActiveConfig=function(t){return this.set("active_config",t)},XD.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},XD.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},XD.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},XD.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},XD.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},XD.prototype.get=function(a){return Ms(this,void 0,void 0,function(){var o,s=this;return Fs(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(n,e){var t=o.transaction([zD],"readonly").objectStore(zD),r=s.createCompositeKey(a);try{var i=t.get(r);i.onerror=function(t){e(KD(t,"storage-get"))},i.onsuccess=function(t){var e=t.target.result;n(e?e.value:void 0)}}catch(t){e(MD.create("storage-get",{originalErrorMessage:t&&t.message}))}})]}})})},XD.prototype.set=function(a,u){return Ms(this,void 0,void 0,function(){var o,s=this;return Fs(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([zD],"readwrite").objectStore(zD),r=s.createCompositeKey(a);try{var i=n.put({compositeKey:r,value:u});i.onerror=function(t){e(KD(t,"storage-set"))},i.onsuccess=function(){t()}}catch(t){e(MD.create("storage-set",{originalErrorMessage:t&&t.message}))}})]}})})},XD.prototype.delete=function(a){return Ms(this,void 0,void 0,function(){var o,s=this;return Fs(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([zD],"readwrite").objectStore(zD),r=s.createCompositeKey(a);try{var i=n.delete(r);i.onerror=function(t){e(KD(t,"storage-delete"))},i.onsuccess=function(){t()}}catch(t){e(MD.create("storage-delete",{originalErrorMessage:t&&t.message}))}})]}})})},XD.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},XD);function XD(t,e,n,r){void 0===r&&(r=new Promise(function(e,n){var t=indexedDB.open("firebase_remote_config",1);t.onerror=function(t){n(KD(t,"storage-open"))},t.onsuccess=function(t){e(t.target.result)},t.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(zD,{keyPath:"compositeKey"})}}})),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}var YD=(JD.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},JD.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},JD.prototype.getActiveConfig=function(){return this.activeConfig},JD.prototype.loadFromStorage=function(){return Ms(this,void 0,void 0,function(){var e,n,r,i,o,s;return Fs(this,function(t){switch(t.label){case 0:return e=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),[4,e];case 1:return(i=t.sent())&&(this.lastFetchStatus=i),[4,n];case 2:return(o=t.sent())&&(this.lastSuccessfulFetchTimestampMillis=o),[4,r];case 3:return(s=t.sent())&&(this.activeConfig=s),[2]}})})},JD.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},JD.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},JD.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},JD);function JD(t){this.storage=t}var $D=(ZD.prototype.fetch=function(n){return Ms(this,void 0,void 0,function(){var e;return Fs(this,function(t){switch(t.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=t.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(n,e)]}})})},ZD.prototype.attemptFetch=function(u,t){var c=t.throttleEndTimeMillis,h=t.backoffCount;return Ms(this,void 0,void 0,function(){var r,s,a;return Fs(this,function(t){switch(t.label){case 0:return[4,(i=u.signal,o=c,new Promise(function(t,e){var n=Math.max(o-Date.now(),0),r=setTimeout(t,n);i.addEventListener(function(){clearTimeout(r),e(MD.create("fetch-throttle",{throttleEndTimeMillis:o}))})}))];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,5,,7]),[4,this.client.fetch(u)];case 3:return r=t.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return t.sent(),[2,r];case 5:if(!function(t){if(t instanceof ua){var e=Number(t.httpStatus);return 429===e||500===e||503===e||504===e}}(s=t.sent()))throw s;return a={throttleEndTimeMillis:Date.now()+(e=1e3*Math.pow(2,h),n=Math.round(.5*e*(Math.random()-.5)*2),Math.min(144e5,e+n)),backoffCount:h+1},[4,this.storage.setThrottleMetadata(a)];case 6:return t.sent(),[2,this.attemptFetch(u,a)];case 7:return[2]}var e,n,i,o})})},ZD);function ZD(t,e){this.client=t,this.storage=e}var tx,ex="@firebase/remote-config";return(tx=Ll).INTERNAL.registerComponent(new Ra("remoteConfig",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw MD.create("registration-window");var i=n.options,o=i.projectId,s=i.apiKey,a=i.appId;if(!o)throw MD.create("registration-project-id");if(!s)throw MD.create("registration-api-key");if(!a)throw MD.create("registration-app-id");e=e||"firebase";var u=new QD(a,n.name,e),c=new YD(u),h=new Qa(ex);h.logLevel=Va.ERROR;var l=new FD(r,tx.SDK_VERSION,e,o,s,a),f=new $D(l,u),p=new DD(f,u,c,h),d=new HD(n,p,c,u,h);return d.ensureInitialized(),d},"PUBLIC").setMultipleInstances(!0)),tx.registerVersion(ex,"0.1.27-202071122108"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the CDN builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nhttps://www.gstatic.com/firebasejs/5.0.0/firebase-<PACKAGE>.js\n"),Ll.registerVersion("firebase","7.18.0-202071122108","cdn"),Ll});