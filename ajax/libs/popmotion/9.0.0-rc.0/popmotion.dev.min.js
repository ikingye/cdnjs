!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t="undefined"!=typeof globalThis?globalThis:t||self).Motion={})}(this,function(t){"use strict";var n=(r.prototype.update=function(t){var n=this.resolveSpring(t),r=this.options,e=r.velocity,o=r.restSpeed,a=r.restDelta,i=r.to,u=Math.abs(e)<=o,s=Math.abs(i-n)<=a;return this.isComplete=u&&s,this.isComplete?i:n},r.prototype.updateOptions=function(t){var n=t.from,r=void 0===n?0:n,e=t.to,o=void 0===e?0:e,a=t.velocity,i=void 0===a?0:a,u=t.stiffness,s=void 0===u?100:u,f=t.damping,c=void 0===f?10:f,p=t.mass,l=void 0===p?1:p,h=t.restSpeed,d=void 0===h?.005:h,v=t.restDelta,m=void 0===v?.5:v;this.options={from:r,to:o,velocity:i,stiffness:s,damping:c,mass:l,restSpeed:d,restDelta:m}},r.needsInterpolation=!0,r.uniqueOptionKeys=new Set(["stiffness","damping","mass","restSpeed","restDelta"]),r);function r(t){this.isComplete=!1,this.updateOptions(t);var r,n=this.options,e=n.velocity,o=n.from,a=n.to,i=n.damping,u=n.stiffness,s=n.mass,f=e?-e/1e3:0,c=a-o,p=i/(2*Math.sqrt(u*s)),l=Math.sqrt(u/s)/1e3;p<1?this.resolveSpring=function(t){var n=Math.exp(-p*l*t),r=l*Math.sqrt(1-p*p);return a-n*((f+p*l*c)/r*Math.sin(r*t)+c*Math.cos(r*t))}:1==p?this.resolveSpring=function(t){var n=Math.exp(-l*t);return a-n*(1+l*t)}:(r=l*Math.sqrt(p*p-1),this.resolveSpring=function(t){var n=Math.exp(-p*l*t);return a-n*((f+p*l*c)*Math.sinh(r*t)+r*c*Math.cosh(r*t))/r})}function s(t,n,r){return-r*t+r*n+t}function e(n,r){return function(t){return Math.max(Math.min(t,r),n)}}function p(t){return t%1?Number(t.toFixed(5)):t}function o(t){return void 0!==t.red}function a(t){return void 0!==t.hue}var i,M=function(t,n,r){var e=n-t;return 0==e?1:(r-t)/e},u=function(){return(u=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)},f=/(-)?(\d[\d\.]*)/g,c=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))/gi,l=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))$/i,h={test:function(t){return"number"==typeof t},parse:parseFloat,transform:function(t){return t}},d=u(u({},h),{transform:e(0,1)}),v=(u(u({},h),{default:1}),i="%",{test:function(t){return"string"==typeof t&&t.endsWith(i)&&1===t.split(" ").length},parse:parseFloat,transform:function(t){return""+t+i}}),m=(u(u({},v),{parse:function(t){return v.parse(t)/100},transform:function(t){return v.transform(100*t)}}),e(0,255));function y(a){return function(t){if("string"!=typeof t)return t;for(var n,r={},e=(n=t).substring(n.indexOf("(")+1,n.lastIndexOf(")")).replace(/(,|\/)/g," ").split(/ \s*/),o=0;o<4;o++)r[a[o]]=void 0!==e[o]?parseFloat(e[o]):1;return r}}var g=u(u({},h),{transform:function(t){return Math.round(m(t))}});function b(t,n){return t.startsWith(n)&&l.test(t)}function O(t){return"number"==typeof t?0:t}function x(t,n,r){var e=t*t,o=n*n;return Math.sqrt(Math.max(0,r*(o-e)+e))}function w(n){return E.find(function(t){return t.test(n)})}function S(t){return"'"+t+"' is not an animatable color. Use the equivalent color code instead."}function A(t){return"number"==typeof t}function I(n,r){return function(t){return r(n(t))}}var P={test:function(t){return"string"==typeof t?b(t,"rgb"):o(t)},parse:y(["red","green","blue","alpha"]),transform:function(t){var n,r,e,o,a,i=t.red,u=t.green,s=t.blue,f=t.alpha,c=void 0===f?1:f;return n={red:g.transform(i),green:g.transform(u),blue:g.transform(s),alpha:p(d.transform(c))},r=n.red,e=n.green,o=n.blue,a=n.alpha,"rgba("+r+", "+e+", "+o+", "+(void 0===a?1:a)+")"}},C={test:function(t){return"string"==typeof t?b(t,"hsl"):a(t)},parse:y(["hue","saturation","lightness","alpha"]),transform:function(t){var n,r,e,o,a,i=t.hue,u=t.saturation,s=t.lightness,f=t.alpha,c=void 0===f?1:f;return n={hue:Math.round(i),saturation:v.transform(p(u)),lightness:v.transform(p(s)),alpha:p(d.transform(c))},r=n.hue,e=n.saturation,o=n.lightness,a=n.alpha,"hsla("+r+", "+e+", "+o+", "+(void 0===a?1:a)+")"}},j=u(u({},P),{test:function(t){return"string"==typeof t&&b(t,"#")},parse:function(t){var n="",r="",e="";return 4<t.length?(n=t.substr(1,2),r=t.substr(3,2),e=t.substr(5,2)):(n=t.substr(1,1),r=t.substr(2,1),e=t.substr(3,1),n+=n,r+=r,e+=e),{red:parseInt(n,16),green:parseInt(r,16),blue:parseInt(e,16),alpha:1}}}),R={test:function(t){return"string"==typeof t&&l.test(t)||o(t)||a(t)},parse:function(t){return P.test(t)?P.parse(t):C.test(t)?C.parse(t):j.test(t)?j.parse(t):t},transform:function(t){return o(t)?P.transform(t):a(t)?C.transform(t):t}},q="${c}",D="${n}",T={test:function(t){if("string"!=typeof t||!isNaN(t))return!1;var n=0,r=t.match(f),e=t.match(c);return r&&(n+=r.length),e&&(n+=e.length),0<n},parse:function(t){var n=t,r=[],e=n.match(c);e&&(n=n.replace(c,q),r.push.apply(r,e.map(R.parse)));var o=n.match(f);return o&&r.push.apply(r,o.map(h.parse)),r},createTransformer:function(t){var e=t,o=0,n=t.match(c),a=n?n.length:0;if(n)for(var r=0;r<a;r++)e=e.replace(n[r],q),o++;var i=e.match(f),u=i?i.length:0;if(i)for(r=0;r<u;r++)e=e.replace(i[r],D),o++;return function(t){for(var n=e,r=0;r<o;r++)n=n.replace(r<a?q:D,r<a?R.transform(t[r]):p(t[r]));return n}},getAnimatableNone:function(t){var n=T.parse(t);return T.createTransformer(t)(n.map(O))}},F=function(){},F=function(t,n){if(!t)throw new Error(n)},B=function(){return(B=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)},E=[j,P,C],k=function(t,n){var r=w(t),e=w(n);F(!!r,S(t)),F(!!e,S(n)),F(r.transform===e.transform,"Both colors must be hex/RGBA, OR both must be HSLA.");var o=r.parse(t),a=e.parse(n),i=B({},o),u=r===C?s:x;return function(t){for(var n in i)"alpha"!==n&&(i[n]=u(o[n],a[n],t));return i.alpha=s(o.alpha,a.alpha,t),r.transform(i)}},N={x:0,y:0,z:0},U=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.reduce(I)},z=function(){return(z=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)},K=function(){for(var t=0,n=0,r=arguments.length;n<r;n++)t+=arguments[n].length;for(var e=Array(t),o=0,n=0;n<r;n++)for(var a=arguments[n],i=0,u=a.length;i<u;i++,o++)e[o]=a[i];return e};function L(n,r){return A(n)?function(t){return s(n,r,t)}:(R.test(n)?k:$)(n,r)}var G=function(t,r){var e=K(t),o=e.length,a=t.map(function(t,n){return L(t,r[n])});return function(t){for(var n=0;n<o;n++)e[n]=a[n](t);return e}},H=function(t,n){var r=z(z({},t),n),e={};for(var o in r)void 0!==t[o]&&void 0!==n[o]&&(e[o]=L(t[o],n[o]));return function(t){for(var n in e)r[n]=e[n](t);return r}};function W(t){for(var n=T.parse(t),r=n.length,e=0,o=0,a=0,i=0;i<r;i++)e||"number"==typeof n[i]?e++:void 0!==n[i].hue?a++:o++;return{parsed:n,numNumbers:e,numRGB:o,numHSL:a}}var $=function(t,n){var r=T.createTransformer(n),e=W(t),o=W(n);return F(e.numHSL===o.numHSL&&e.numRGB===o.numRGB&&e.numNumbers>=o.numNumbers,"Complex values '"+t+"' and '"+n+"' too different to mix. Ensure all colors are of the same type."),U(G(e.parsed,o.parsed),r)},_=function(t,n,r){return Math.min(Math.max(r,t),n)},V=function(n,r){return function(t){return s(n,r,t)}};function J(t,n,r){for(var e,o=[],a=r||("number"==typeof(e=t[0])?V:"string"==typeof e?R.test(e)?k:$:Array.isArray(e)?G:"object"==typeof e?H:void 0),i=t.length-1,u=0;u<i;u++){var s,f=a(t[u],t[u+1]);n&&(s=Array.isArray(n)?n[u]:n,f=U(s,f)),o.push(f)}return o}function Q(n,t,r){var e=void 0===r?{}:r,o=e.clamp,a=void 0===o||o,i=e.ease,u=e.mixer,s=n.length;F(s===t.length,"Both input and output ranges must be the same length"),F(!i||!Array.isArray(i)||i.length===s-1,"Array of easing functions must be of length `input.length - 1`, as it applies to the transitions **between** the defined values."),n[0]>n[s-1]&&(n=[].concat(n),t=[].concat(t),n.reverse(),t.reverse());var f,c,p,l,h,d,v,m,y,g=J(t,i,u),b=2===s?(d=g,v=(h=n)[0],m=h[1],y=d[0],function(t){return y(M(v,m,t))}):(c=g,p=(f=n).length,l=p-1,function(t){var n=0,r=!1;if(t<=f[0]?r=!0:t>=f[l]&&(n=l-1,r=!0),!r){for(var e=1;e<p&&!(f[e]>t||e===l);e++);n=e-1}var o=M(f[n],f[n+1],t);return c[n](o)});return a?function(t){return b(_(n[0],n[s-1],t))}:b}function X(n){return function(t){return 1-n(1-t)}}function Y(n){return function(t){return t<=.5?n(2*t)/2:(2-n(2*(1-t)))/2}}function Z(n){return function(t){return Math.pow(t,n)}}function tt(n){return function(t){return t*t*((n+1)*t-n)}}function nt(t){var n=tt(t);return function(t){return(t*=2)<1?.5*n(t):.5*(2-Math.pow(2,-10*(t-1)))}}function rt(t){return t}function et(t){return 1-Math.sin(Math.acos(t))}function ot(t){var n=t*t;return t<4/11?7.5625*n:t<8/11?9.075*n-9.9*t+3.4:t<.9?4356/361*n-35442/1805*t+16061/1805:10.8*t*t-20.52*t+10.72}var at=Z(2),it=X(at),ut=Y(at),st=X(et),ft=Y(st),ct=tt(1.525),pt=X(ct),lt=Y(ct),ht=nt(1.525);var dt=(vt.prototype.update=function(t){var n=this.options.duration;return this.isComplete=n<=t,this.interpolator(t)},vt.prototype.updateOptions=function(t){var n=t.from,r=void 0===n?0:n,e=t.to,o=void 0===e?1:e,a=t.ease,i=t.offset,u=t.duration,s=void 0===u?300:u;this.options={from:r,to:o,ease:a,offset:i,duration:s}},vt.needsInterpolation=!1,vt.uniqueOptionKeys=new Set(["duration","ease"]),vt);function vt(t){this.isComplete=!1,this.updateOptions(t);var n,r,e,o,a,i=this.options,u=i.from,s=i.to,f=i.duration,c=this.options,p=c.ease,l=c.offset,h=Array.isArray(s)?s:[u,s],p=Array.isArray(p)?p:(n=h).map(function(){return r||ut}).splice(0,n.length-1),l=l||(o=(e=h).length,e.map(function(t,n){return 0!==n?n/(o-1):0})),d=(a=f,l.map(function(t){return t*a}));this.interpolator=Q(d,h,{ease:p})}var mt=(yt.prototype.update=function(t){var n=this.options,r=n.timeConstant,e=n.restDelta,o=-this.amplitude*Math.exp(-t/r);return this.isComplete=!(e<o||o<-e),this.isComplete?this.target:this.target+o},yt.prototype.updateOptions=function(t){var n=void 0===t?{}:t,r=n.velocity,e=void 0===r?0:r,o=n.from,a=void 0===o?0:o,i=n.power,u=void 0===i?.8:i,s=n.timeConstant,f=void 0===s?350:s,c=n.restDelta,p=void 0===c?.5:c,l=n.modifyTarget;this.options={velocity:e,from:a,power:u,timeConstant:f,restDelta:p,modifyTarget:l}},yt.needsInterpolation=!0,yt.uniqueOptionKeys=new Set(["power","timeConstant","modifyTarget"]),yt);function yt(t){this.isComplete=!1,this.updateOptions(t);var n=this.options,r=n.power,e=n.velocity,o=n.modifyTarget,a=n.from,i=r*e,u=a+i,s=void 0===o?u:o(u);s!==u&&(i=s-a),this.target=s,this.amplitude=i}var gt=[dt,n,mt],bt=gt.length;var Mt,Ot,xt=0,wt="undefined"!=typeof window&&void 0!==window.requestAnimationFrame?function(t){return window.requestAnimationFrame(t)}:function(t){var n=Date.now(),r=Math.max(0,16.7-(n-xt));xt=n+r,setTimeout(function(){return t(xt)},r)};(Ot=Mt=Mt||{}).Read="read",Ot.Update="update",Ot.Render="render",Ot.PostRender="postRender",Ot.FixedUpdate="fixedUpdate";function St(t){return jt=t}function At(t){return Ft[t].process(qt)}function It(r){function t(t){var n=t.delta;return r(n)}return Bt.update(t,!0,!0),function(){return Et.update(t)}}var Pt=1/60*1e3,Ct=!0,jt=!1,Rt=!1,qt={delta:0,timestamp:0},Dt=[Mt.Read,Mt.Update,Mt.Render,Mt.PostRender],Tt=Dt.reduce(function(t,n){var e,a,i,u,s,o,f,c,p,l=(e=St,a=[],s=!(i=[]),o=u=0,f=new WeakSet,c=new WeakSet,p={cancel:function(t){var n=i.indexOf(t);f.add(t),-1!==n&&i.splice(n,1)},process:function(t){var n,r;if(s=!0,a=(n=[i,a])[0],(i=n[1]).length=0,u=a.length)for(o=0;o<u;o++)(r=a[o])(t),!0!==c.has(r)||f.has(r)||(p.schedule(r),e(!0));s=!1},schedule:function(t,n,r){void 0===n&&(n=!1),void 0===r&&(r=!1),F("function"==typeof t,"Argument must be a function");var e=r&&s,o=e?a:i;f.delete(t),n&&c.add(t),-1===o.indexOf(t)&&(o.push(t),e&&(u=a.length))}});return t.sync[n]=function(t,n,r){return void 0===n&&(n=!1),void 0===r&&(r=!1),jt||Nt(),l.schedule(t,n,r),t},t.cancelSync[n]=function(t){return l.cancel(t)},t.steps[n]=l,t},{steps:{},sync:{},cancelSync:{}}),Ft=Tt.steps,Bt=Tt.sync,Et=Tt.cancelSync,kt=function(t){jt=!1,qt.delta=Ct?Pt:Math.max(Math.min(t-qt.timestamp,40),1),Ct||(Pt=qt.delta),qt.timestamp=t,Rt=!0,Dt.forEach(At),Rt=!1,jt&&(Ct=!1,wt(kt))},Nt=function(){Ct=jt=!0,Rt||wt(kt)},Ut=function(){return(Ut=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)},zt=function(t,n){var r={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.indexOf(e)<0&&(r[e]=t[e]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,e=Object.getOwnPropertySymbols(t);o<e.length;o++)n.indexOf(e[o])<0&&Object.prototype.propertyIsEnumerable.call(t,e[o])&&(r[e[o]]=t[e[o]]);return r};function Kt(t){return 180*t/Math.PI}function Lt(t){return t}function Gt(a){return void 0===a&&(a=Lt),function(t,n,r){var e=n-r,o=-(0-t+1)*(0-a(Math.abs(e)));return e<=0?n+o:n-o}}function Ht(t){return t*Math.PI/180}function Wt(t){return t.hasOwnProperty("x")&&t.hasOwnProperty("y")}function $t(t){return Wt(t)&&t.hasOwnProperty("z")}function _t(t,n){return Math.abs(t-n)}function Vt(t,n){return void 0===n&&(n=2),n=Math.pow(10,n),Math.round(t*n)/n}function Jt(t,n,r,e){return void 0===e&&(e=0),Vt(t+r*(n-t)/Math.max(e,r))}function Qt(t,n){return 1-3*n+3*t}function Xt(t,n){return 3*n-6*t}var Yt=Gt(),Zt=Gt(Math.sqrt),tn=function(t,n,r){return((Qt(n,r)*t+Xt(n,r))*t+3*n)*t},nn=function(t,n,r){return 3*Qt(n,r)*t*t+2*Xt(n,r)*t+3*n},rn=1e-7,en=10;var on=8;t.DecayAnimator=mt,t.KeyframesAnimator=dt,t.SpringAnimator=n,t.angle=function(t,n){return void 0===n&&(n=N),Kt(Math.atan2(n.y-t.y,n.x-t.x))},t.animate=function(t){var r,e,n=t.from,o=t.to,a=t.autoplay,i=void 0===a||a,u=t.driver,s=void 0===u?It:u,f=t.elapsed,c=void 0===f?0:f,p=t.repeat,l=void 0===p?0:p,h=t.repeatType,d=void 0===h?"loop":h,v=(t.repeatDelay,t.onPlay),m=t.onComplete,y=t.onRepeat,g=t.onUpdate,b=zt(t,["from","to","autoplay","driver","elapsed","repeat","repeatType","repeatDelay","onPlay","onComplete","onRepeat","onUpdate"]),M=0,O=b.duration,x=!0,w=function(t){for(var n in t)for(var r=0;r<bt;r++){var e=gt[r];if(e.uniqueOptionKeys.has(n))return e}}(b);w.needsInterpolation&&(e=Q([0,100],[n,o],{clamp:!1}),n=0,o=100);var S=new w(Ut(Ut({},b),{from:n,to:o}));function A(t){x||(t=-t),c+=t;var n=S.update(c);e&&(n=e(n)),g(n),(x?S.isComplete:c<=0)&&(M<l?function(){0===M&&void 0===O&&(O=c),M++;var t=c-O;"loop"===d?c=t:(c=O-t,x=M%2==0),y&&y()}():(r(),m&&m()))}function I(){v&&v(),r=s(A)}return i&&I(),{play:I,pause:function(){},resume:function(){},reverse:function(){},seek:function(){},stop:r}},t.anticipate=ht,t.applyOffset=function(n,r){var e=!0;return void 0===r&&(r=n,e=!1),function(t){return e?t-n+r:(n=t,e=!0,r)}},t.attract=Gt,t.attractExpo=Zt,t.attractLinear=Yt,t.backIn=ct,t.backInOut=lt,t.backOut=pt,t.bounceIn=function(t){return 1-ot(1-t)},t.bounceInOut=function(t){return t<.5?.5*(1-ot(1-2*t)):.5*ot(2*t-1)+.5},t.bounceOut=ot,t.circIn=et,t.circInOut=ft,t.circOut=st,t.clamp=_,t.createAnticipate=nt,t.createBackIn=tt,t.createExpoIn=Z,t.cubicBezier=function(a,n,i,r){if(a===n&&i===r)return rt;for(var u=new Float32Array(11),t=0;t<11;++t)u[t]=tn(.1*t,a,i);function e(t){for(var n=0,r=1;10!==r&&u[r]<=t;++r)n+=.1;var e=n+.1*((t-u[--r])/(u[r+1]-u[r])),o=nn(e,a,i);return.001<=o?function(t,n,r,e){for(var o=0;o<on;++o){var a=nn(n,r,e);if(0===a)return n;n-=(tn(n,r,e)-t)/a}return n}(t,e,a,i):0===o?e:function(t,n,r,e,o){for(var a,i,u=0;0<(a=tn(i=n+(r-n)/2,e,o)-t)?r=i:n=i,Math.abs(a)>rn&&++u<en;);return i}(t,n,n+.1,a,i)}return function(t){return 0===t||1===t?t:tn(e(t),n,r)}},t.degreesToRadians=Ht,t.distance=function(t,n){if(void 0===n&&(n=N),A(t)&&A(n))return _t(t,n);if(Wt(t)&&Wt(n)){var r=_t(t.x,n.x),e=_t(t.y,n.y),o=$t(t)&&$t(n)?_t(t.z,n.z):0;return Math.sqrt(Math.pow(r,2)+Math.pow(e,2)+Math.pow(o,2))}return 0},t.easeIn=at,t.easeInOut=ut,t.easeOut=it,t.interpolate=Q,t.isPoint=Wt,t.isPoint3D=$t,t.linear=rt,t.mirrorEasing=Y,t.mix=s,t.mixColor=k,t.mixComplex=$,t.pipe=U,t.pointFromVector=function(t,n,r){return n=Ht(n),{x:r*Math.cos(n)+t.x,y:r*Math.sin(n)+t.y}},t.progress=M,t.radiansToDegrees=Kt,t.reverseEasing=X,t.smooth=function(o){void 0===o&&(o=50);var a=0,i=0;return function(t){var n=qt.timestamp,r=n!==i?n-i:0,e=r?Jt(a,t,r,o):a;return i=n,a=e}},t.smoothFrame=Jt,t.snap=function(o){if("number"==typeof o)return function(t){return Math.round(t/o)*o};var a=0,i=o.length;return function(t){var n=Math.abs(o[0]-t);for(a=1;a<i;a++){var r=o[a],e=Math.abs(r-t);if(0===e)return r;if(n<e)return o[a-1];if(a===i-1)return r;n=e}}},t.steps=function(e,o){return void 0===o&&(o="end"),function(t){var n=(t="end"===o?Math.min(t,.999):Math.max(t,.001))*e,r="end"===o?Math.floor(n):Math.ceil(n);return _(0,1,r/e)}},t.toDecimal=Vt,t.velocityPerFrame=function(t,n){return A(t)?t/(1e3/n):0},t.velocityPerSecond=function(t,n){return n?t*(1e3/n):0},t.wrap=function(t,n,r){var e=n-t;return((r-t)%e+e)%e+t},Object.defineProperty(t,"__esModule",{value:!0})});