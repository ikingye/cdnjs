"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Emitters=void 0;const EmitterInstance_1=require("./EmitterInstance"),Utils_1=require("../../Utils"),Emitter_1=require("./Options/Classes/Emitter"),Enums_1=require("./Enums");class Emitters{constructor(t){this.container=t,this.array=[],this.emitters=[],this.interactivityEmitters=[]}init(t){var i,e;if(!t)return;t.emitters&&(t.emitters instanceof Array?this.emitters=t.emitters.map(t=>{const i=new Emitter_1.Emitter;return i.load(t),i}):(this.emitters instanceof Array&&(this.emitters=new Emitter_1.Emitter),this.emitters.load(t.emitters)));const r=null===(e=null===(i=t.interactivity)||void 0===i?void 0:i.modes)||void 0===e?void 0:e.emitters;if(r&&(r instanceof Array?this.interactivityEmitters=r.map(t=>{const i=new Emitter_1.Emitter;return i.load(t),i}):(this.interactivityEmitters instanceof Array&&(this.interactivityEmitters=new Emitter_1.Emitter),this.interactivityEmitters.load(r))),this.emitters instanceof Array)for(const t of this.emitters){const i=new EmitterInstance_1.EmitterInstance(this,this.container,t);this.addEmitter(i)}else{const t=this.emitters,i=new EmitterInstance_1.EmitterInstance(this,this.container,t);this.addEmitter(i)}}play(){for(const t of this.array)t.play()}pause(){for(const t of this.array)t.pause()}stop(){this.array=[]}handleClickMode(t){const i=this.container,e=this.emitters,r=this.interactivityEmitters;if(t===Enums_1.EmitterClickMode.emitter){let t;r instanceof Array?r.length>0&&(t=Utils_1.Utils.itemFromArray(r)):t=r;const s=null!=t?t:e instanceof Array?Utils_1.Utils.itemFromArray(e):e,n=i.interactivity.mouse.clickPosition,a=new EmitterInstance_1.EmitterInstance(this,this.container,Utils_1.Utils.deepExtend({},s),n);this.addEmitter(a)}}resize(){for(const t of this.array)t.resize()}addEmitter(t){this.array.push(t)}removeEmitter(t){const i=this.array.indexOf(t);i>=0&&this.array.splice(i,1)}}exports.Emitters=Emitters;