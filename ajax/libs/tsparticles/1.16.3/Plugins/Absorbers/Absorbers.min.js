"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Absorbers=void 0;const AbsorberInstance_1=require("./AbsorberInstance"),Utils_1=require("../../Utils"),Absorber_1=require("./Options/Classes/Absorber"),Enums_1=require("./Enums");class Absorbers{constructor(r){this.container=r,this.array=[],this.absorbers=[],this.interactivityAbsorbers=[]}init(r){var s,e;if(!r)return;r.absorbers&&(r.absorbers instanceof Array?this.absorbers=r.absorbers.map(r=>{const s=new Absorber_1.Absorber;return s.load(r),s}):(this.absorbers instanceof Array&&(this.absorbers=new Absorber_1.Absorber),this.absorbers.load(r.absorbers)));const t=null===(e=null===(s=r.interactivity)||void 0===s?void 0:s.modes)||void 0===e?void 0:e.absorbers;if(t&&(t instanceof Array?this.interactivityAbsorbers=t.map(r=>{const s=new Absorber_1.Absorber;return s.load(r),s}):(this.interactivityAbsorbers instanceof Array&&(this.interactivityAbsorbers=new Absorber_1.Absorber),this.interactivityAbsorbers.load(t))),this.absorbers instanceof Array)for(const r of this.absorbers){const s=new AbsorberInstance_1.AbsorberInstance(this,this.container,r);this.addAbsorber(s)}else{const r=this.absorbers,s=new AbsorberInstance_1.AbsorberInstance(this,this.container,r);this.addAbsorber(s)}}particleUpdate(r){for(const s of this.array)if(s.attract(r),r.destroyed)break}draw(r){for(const s of this.array)r.save(),s.draw(r),r.restore()}stop(){this.array=[]}resize(){for(const r of this.array)r.resize()}handleClickMode(r){const s=this.container,e=this.absorbers,t=this.interactivityAbsorbers;if(r===Enums_1.AbsorberClickMode.absorber){let r;t instanceof Array?t.length>0&&(r=Utils_1.Utils.itemFromArray(t)):r=t;const o=null!=r?r:e instanceof Array?Utils_1.Utils.itemFromArray(e):e,i=s.interactivity.mouse.clickPosition,b=new AbsorberInstance_1.AbsorberInstance(this,this.container,o,i);this.addAbsorber(b)}}addAbsorber(r){this.array.push(r)}removeAbsorber(r){const s=this.array.indexOf(r);s>=0&&this.array.splice(s,1)}}exports.Absorbers=Absorbers;