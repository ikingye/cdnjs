"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ColorUtils=void 0;const Utils_1=require("./Utils"),Constants_1=require("./Constants");class ColorUtils{static colorToRgb(t){var s,r;if(void 0===t)return;const o="string"==typeof t?{value:t}:t;let l;if("string"==typeof o.value)l=o.value===Constants_1.Constants.randomColorValue?this.getRandomRgbColor():ColorUtils.stringToRgb(o.value);else if(o.value instanceof Array){const t=Utils_1.Utils.itemFromArray(o.value);l=ColorUtils.colorToRgb({value:t})}else{const t=o.value,i=null!==(s=t.rgb)&&void 0!==s?s:o.value;if(void 0!==i.r)l=i;else{const s=null!==(r=t.hsl)&&void 0!==r?r:o.value;void 0!==s.h&&(l=ColorUtils.hslToRgb(s))}}return l}static colorToHsl(t){const s=this.colorToRgb(t);return void 0!==s?this.rgbToHsl(s):s}static rgbToHsl(t){const s=t.r/255,r=t.g/255,o=t.b/255,l=Math.max(s,r,o),i=Math.min(s,r,o),a={h:0,l:(l+i)/2,s:0};return l!=i&&(a.s=a.l<.5?(l-i)/(l+i):(l-i)/(2-l-i),a.h=s===l?(r-o)/(l-i):a.h=r===l?2+(o-s)/(l-i):4+(s-r)/(l-i)),a.l*=100,a.s*=100,a.h*=60,a.h<0&&(a.h+=360),a}static stringToAlpha(t){var s;return null===(s=ColorUtils.stringToRgba(t))||void 0===s?void 0:s.a}static stringToRgb(t){return ColorUtils.stringToRgba(t)}static hslToRgb(t){const s={b:0,g:0,r:0},r={h:t.h/360,l:t.l/100,s:t.s/100};if(0===r.s)s.b=r.l,s.g=r.l,s.r=r.l;else{const t=r.l<.5?r.l*(1+r.s):r.l+r.s-r.l*r.s,o=2*r.l-t;s.r=ColorUtils.hue2rgb(o,t,r.h+1/3),s.g=ColorUtils.hue2rgb(o,t,r.h),s.b=ColorUtils.hue2rgb(o,t,r.h-1/3)}return s.r=Math.floor(255*s.r),s.g=Math.floor(255*s.g),s.b=Math.floor(255*s.b),s}static hslaToRgba(t){const s=ColorUtils.hslToRgb(t);return{a:t.a,b:s.b,g:s.g,r:s.r}}static getRandomRgbColor(t){var s;const r=t||0,o=r+r*Math.pow(16,2)+r*Math.pow(16,4),l=16777215^o,i=Math.floor(Math.random()*l|o).toString(16);return null!==(s=this.stringToRgb(`#${i}`))&&void 0!==s?s:{b:0,g:0,r:0}}static getStyleFromRgb(t,s){return`rgba(${t.r}, ${t.g}, ${t.b}, ${null!=s?s:1})`}static getStyleFromHsl(t,s){return`hsla(${t.h}, ${t.s}%, ${t.l}%, ${null!=s?s:1})`}static mix(t,s,r,o){let l=t,i=s;return void 0===l.r&&(l=this.hslToRgb(t)),void 0===i.r&&(i=this.hslToRgb(s)),{b:Utils_1.Utils.mix(l.b,i.b,r,o),g:Utils_1.Utils.mix(l.g,i.g,r,o),r:Utils_1.Utils.mix(l.r,i.r,r,o)}}static hue2rgb(t,s,r){let o=r;return o<0&&(o+=1),o>1&&(o-=1),o<1/6?t+6*(s-t)*o:o<.5?s:o<2/3?t+(s-t)*(2/3-o)*6:t}static stringToRgba(t){if(t.startsWith("rgb")){const s=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([\d.]+)\s*)?\)/i.exec(t);return s?{a:s.length>4?parseFloat(s[5]):1,b:parseInt(s[3],10),g:parseInt(s[2],10),r:parseInt(s[1],10)}:void 0}if(t.startsWith("hsl")){const s=/hsla?\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([\d.]+)\s*)?\)/i.exec(t);return s?ColorUtils.hslaToRgba({a:s.length>4?parseFloat(s[5]):1,h:parseInt(s[1],10),l:parseInt(s[3],10),s:parseInt(s[2],10)}):void 0}{const s=/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,r=t.replace(s,(t,s,r,o,l)=>s+s+r+r+o+o+(void 0!==l?l+l:"")),o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(r);return o?{a:void 0!==o[4]?parseInt(o[4],16)/255:1,b:parseInt(o[3],16),g:parseInt(o[2],16),r:parseInt(o[1],16)}:void 0}}}exports.ColorUtils=ColorUtils;