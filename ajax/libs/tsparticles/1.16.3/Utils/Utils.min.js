"use strict";var __awaiter=this&&this.__awaiter||function(t,e,i,r){return new(i||(i=Promise))(function(n,o){function s(t){try{c(r.next(t))}catch(t){o(t)}}function a(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(s,a)}c((r=r.apply(t,e||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Utils=void 0;const Enums_1=require("../Enums"),ColorUtils_1=require("./ColorUtils");class Utils{static isSsr(){return"undefined"==typeof window||!window}static get animate(){return this.isSsr()?t=>setTimeout(t):t=>(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||window.setTimeout)(t)}static get cancelAnimation(){return this.isSsr()?t=>clearTimeout(t):t=>(window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||window.clearTimeout)(t)}static replaceColorSvg(t,e,i){if(!t.svgData)return"";return t.svgData.replace(/#([0-9A-F]{3,6})/gi,()=>ColorUtils_1.ColorUtils.getStyleFromHsl(e,i))}static clamp(t,e,i){return Math.min(Math.max(t,e),i)}static isInArray(t,e){return t===e||e instanceof Array&&e.indexOf(t)>-1}static mix(t,e,i,r){return Math.floor((t*i+e*r)/(i+r))}static getParticleBaseVelocity(t){let e;switch(t.direction){case Enums_1.MoveDirection.top:e={x:0,y:-1};break;case Enums_1.MoveDirection.topRight:e={x:.5,y:-.5};break;case Enums_1.MoveDirection.right:e={x:1,y:-0};break;case Enums_1.MoveDirection.bottomRight:e={x:.5,y:.5};break;case Enums_1.MoveDirection.bottom:e={x:0,y:1};break;case Enums_1.MoveDirection.bottomLeft:e={x:-.5,y:1};break;case Enums_1.MoveDirection.left:e={x:-1,y:0};break;case Enums_1.MoveDirection.topLeft:e={x:-.5,y:-.5};break;default:e={x:0,y:0}}return e}static getDistances(t,e){const i=t.x-e.x,r=t.y-e.y;return{dx:i,dy:r,distance:Math.sqrt(i*i+r*r)}}static getDistance(t,e){return this.getDistances(t,e).distance}static loadFont(t){return __awaiter(this,void 0,void 0,function*(){try{yield document.fonts.load(`${t.weight} 36px '${t.font}'`)}catch(t){}})}static arrayRandomIndex(t){return Math.floor(Math.random()*t.length)}static itemFromArray(t,e){return t[void 0!==e?e:this.arrayRandomIndex(t)]}static randomInRange(t,e){const i=Math.max(t,e),r=Math.min(t,e);return Math.random()*(i-r)+r}static isPointInside(t,e,i){return this.areBoundsInside(this.calculateBounds(t,null!=i?i:0),e)}static areBoundsInside(t,e){return t.left<e.width&&t.right>0&&t.top<e.height&&t.bottom>0}static calculateBounds(t,e){return{bottom:t.y+e,left:t.x-e,right:t.x+e,top:t.y-e}}static loadImage(t){return new Promise((e,i)=>{const r={source:t,type:t.substr(t.length-3)};if(t){const n=new Image;n.addEventListener("load",()=>{r.element=n,e(r)}),n.addEventListener("error",()=>{i(`Error tsParticles - loading image: ${t}`)}),n.src=t}else i("Error tsParticles - No image.src")})}static downloadSvgImage(t){return __awaiter(this,void 0,void 0,function*(){if(t){const e={source:t,type:t.substr(t.length-3)};if("svg"!==e.type)return this.loadImage(t);const i=yield fetch(e.source);if(i.ok)return e.svgData=yield i.text(),e;throw new Error("Error tsParticles - Image not found")}throw new Error("Error tsParticles - No image.src")})}static deepExtend(t,...e){for(const i of e){if(null==i)continue;if("object"!=typeof i){t=i;continue}const e=Array.isArray(i);!e||"object"==typeof t&&t&&Array.isArray(t)?e||"object"==typeof t&&t&&!Array.isArray(t)||(t={}):t=[];for(const e in i){if("__proto__"===e)continue;const r=i[e],n="object"==typeof r;t[e]=n&&Array.isArray(r)?r.map(i=>this.deepExtend(t[e],i)):this.deepExtend(t[e],r)}}return t}static isDivModeEnabled(t,e){return e instanceof Array?e.filter(e=>e.enable&&Utils.isInArray(t,e.mode)).length>0:Utils.isInArray(t,e.mode)}static divModeExecute(t,e,i){if(e instanceof Array)for(const r of e){const e=r.mode;r.enable&&Utils.isInArray(t,e)&&this.singleDivModeExecute(r,i)}else{const r=e.mode;e.enable&&Utils.isInArray(t,r)&&this.singleDivModeExecute(e,i)}}static singleDivModeExecute(t,e){const i=t.ids;if(i instanceof Array)for(const r of i)e(r,t);else e(i,t)}static divMode(t,e){if(e&&t)return t instanceof Array?t.find(t=>Utils.isInArray(e,t.ids)):Utils.isInArray(e,t.ids)?t:void 0}}exports.Utils=Utils;