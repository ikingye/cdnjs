!function(n,w){"use strict";provide(["/demand/weakmap","/demand/pledge","/demand/validator/isObject","/demand/function/iterate","../url","../function/merge"],function(e,p,h,f,m,r){var T="XDomainRequest"in n&&n.XDomainRequest||w,g=new e;function t(e){var t,n,r,a=g.get(this),s=a.settings,i=a.url,o=function n(e,r,a){var t,s=0;if(r=r||"",a=a||{},Array.isArray(e))for(s=0;void 0!==(t=e[s]);s++)n(t,r+"["+s+"]",a);else h(e)?f(e,function(e,t){n(t,r?r+"["+e+"]":e,a)}):r&&void 0!==e&&(a[r]=e);return a}(a.data),u=new(i.local?w:T),c=p.defer(),l=function(){this.readyState<4&&this.abort()}.bind(u),d=s.timeout;return o&&"GET"===e&&(f(o,i.parameter.set,i),o=null),s.cache||i.parameter.set("nucleus",+new Date),o&&(n=o,r=new m("/"),f(n,r.parameter.set,r),o=r.search.substr(1)),h(s.xhrOptions)&&f(s.xhrOptions,function(e,t){u[e]=t}),u.ontimeout=u.onerror=u.onabort=function(){c.reject(u)},u.onprogress=u.onreadystatechange=function(){clearTimeout(t),t=setTimeout(l,d)},u.onload=function(){t=clearTimeout(t),"status"in u&&200!==u.status?c.reject(u):c.resolve(u.responseText,u)},u.open(e,i.href,!0),u.setRequestHeader&&(u.setRequestHeader("Accept",s.accept),o&&"GET"!==e&&u.setRequestHeader("Content-Type",s.contentType),h(s.header)&&f(s.header,function(e,t){u.setRequestHeader(e,t)})),u.send(o),t=setTimeout(l,d),c.pledge}function a(e,t,n){return g.set(this,{settings:r({},a.settings,n),url:new m(e),data:t}),this}return a.prototype={get:function(){return t.call(this,"GET")},post:function(){return t.call(this,"POST")},put:function(){return t.call(this,"PUT")},patch:function(){return t.call(this,"PATCH")},delete:function(){return t.call(this,"DELETE")},head:function(){return t.call(this,"HEAD")}},a.settings={accept:"*/*",timeout:8e3,async:!0,cache:!1,username:null,password:null,contentType:"application/x-www-form-urlencoded; charset=UTF-8",header:{},xhrOptions:{}},a})}(this,XMLHttpRequest);