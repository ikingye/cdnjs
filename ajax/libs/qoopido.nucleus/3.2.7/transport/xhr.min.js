!function(n,y){"use strict";provide(["/demand/weakmap","/demand/pledge","/demand/validator/isObject","/demand/function/iterate","../url","../function/merge"],function(e,h,f,m,T,r){var g="XDomainRequest"in n&&n.XDomainRequest||y,w=new e;function t(e){var t,n,r,a=w.get(this),s="string"==typeof a.data,o=a.settings,i=a.url,u=s?a.data:function n(e,r,a){var t,s=0;if(r=r||"",a=a||{},Array.isArray(e))for(s=0;void 0!==(t=e[s]);s++)n(t,r+"["+s+"]",a);else f(e)?m(e,function(e,t){n(t,r?r+"["+e+"]":e,a)}):r&&void 0!==e&&(a[r]=e);return a}(a.data),c=new(i.local?y:g),d=h.defer(),l=function(){this.readyState<4&&this.abort()}.bind(c),p=o.timeout;return u&&"GET"===e&&(s?i.parameter=u:m(u,i.parameter.set,i),u=null),o.cache||i.parameter.set("nucleus",+new Date),u&&!s&&(n=u,r=new T("/"),m(n,r.parameter.set,r),u=r.search.substr(1)),f(o.xhrOptions)&&m(o.xhrOptions,function(e,t){c[e]=t}),c.ontimeout=c.onerror=c.onabort=function(){d.reject(c)},c.onprogress=c.onreadystatechange=function(){clearTimeout(t),t=setTimeout(l,p)},c.onload=function(){t=clearTimeout(t),"status"in c&&200!==c.status?d.reject(c):d.resolve(c.responseText,c)},c.open(e,i.href,!0),c.setRequestHeader&&(c.setRequestHeader("Accept",o.accept),u&&"GET"!==e&&c.setRequestHeader("Content-Type",o.contentType),f(o.header)&&m(o.header,function(e,t){c.setRequestHeader(e,t)})),console.log(u),c.send(u),t=setTimeout(l,p),d.pledge}function a(e,t,n){return w.set(this,{settings:r({},a.settings,n),url:new T(e),data:t}),this}return a.prototype={get:function(){return t.call(this,"GET")},post:function(){return t.call(this,"POST")},put:function(){return t.call(this,"PUT")},patch:function(){return t.call(this,"PATCH")},delete:function(){return t.call(this,"DELETE")},head:function(){return t.call(this,"HEAD")}},a.settings={accept:"*/*",timeout:8e3,async:!0,cache:!1,username:null,password:null,contentType:"application/x-www-form-urlencoded; charset=UTF-8",header:{"x-requested-with":"XMLHttpRequest"},xhrOptions:{}},a})}(this,XMLHttpRequest);