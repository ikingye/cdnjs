!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).BoardgameIO={})}(this,(function(e){"use strict";function t(){}const n=e=>e;function r(e,t){for(const n in t)e[n]=t[n];return e}function o(e){return e()}function a(){return Object.create(null)}function i(e){e.forEach(o)}function s(e){return"function"==typeof e}function l(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function c(e,t,n){e.$$.on_destroy.push(function(e,t){const n=e.subscribe(t);return n.unsubscribe?()=>n.unsubscribe():n}(t,n))}function u(e,t,n){return e[1]?r({},r(t.$$scope.ctx,e[1](n?n(t):{}))):t.$$scope.ctx}function d(e){const t={};for(const n in e)"$"!==n[0]&&(t[n]=e[n]);return t}const p="undefined"!=typeof window;let f=p?()=>window.performance.now():()=>Date.now(),v=p?e=>requestAnimationFrame(e):t;const h=new Set;let m,g=!1;function y(){h.forEach(e=>{e[0](f())||(h.delete(e),e[1]())}),g=h.size>0,g&&v(y)}function b(e,t){e.appendChild(t)}function x(e,t,n){e.insertBefore(t,n||null)}function $(e){e.parentNode.removeChild(e)}function w(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function P(e){return document.createElement(e)}function O(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function k(e){return document.createTextNode(e)}function I(){return k(" ")}function _(){return k("")}function E(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function D(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function j(e,t){t=""+t,e.data!==t&&(e.data=t)}function S(e,t){(null!=t||e.value)&&(e.value=t)}function A(e,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t)return void(r.selected=!0)}}function C(e,t,n){e.classList[n?"add":"remove"](t)}function M(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}let z,N=0,B={};function G(e,t,n,r,o,a,i,s=0){const l=16.666/r;let c="{\n";for(let e=0;e<=1;e+=l){const r=t+(n-t)*a(e);c+=100*e+`%{${i(r,1-r)}}\n`}const u=c+`100% {${i(n,1-n)}}\n}`,d=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${s}`;if(!B[d]){if(!m){const e=P("style");document.head.appendChild(e),m=e.sheet}B[d]=!0,m.insertRule(`@keyframes ${d} ${u}`,m.cssRules.length)}const p=e.style.animation||"";return e.style.animation=`${p?`${p}, `:""}${d} ${r}ms linear ${o}ms 1 both`,N+=1,d}function q(e,t){e.style.animation=(e.style.animation||"").split(", ").filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")).join(", "),t&&!--N&&v(()=>{if(N)return;let e=m.cssRules.length;for(;e--;)m.deleteRule(e);B={}})}function L(e){z=e}function T(){if(!z)throw new Error("Function called outside component initialization");return z}function R(e){T().$$.on_destroy.push(e)}function U(){const e=z;return(t,n)=>{const r=e.$$.callbacks[t];if(r){const o=M(t,n);r.slice().forEach(t=>{t.call(e,o)})}}}function K(e,t){T().$$.context.set(e,t)}function F(e){return T().$$.context.get(e)}const V=[],J=[],H=[],W=[],Y=Promise.resolve();let Q,X=!1;function Z(e){H.push(e)}function ee(){const e=new Set;do{for(;V.length;){const e=V.shift();L(e),te(e.$$)}for(;J.length;)J.pop()();for(let t=0;t<H.length;t+=1){const n=H[t];e.has(n)||(n(),e.add(n))}H.length=0}while(V.length);for(;W.length;)W.pop()();X=!1}function te(e){e.fragment&&(e.update(e.dirty),i(e.before_update),e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_update.forEach(Z))}function ne(e,t,n){e.dispatchEvent(M(`${t?"intro":"outro"}${n}`))}const re=new Set;let oe;function ae(){oe={r:0,c:[],p:oe}}function ie(){oe.r||i(oe.c),oe=oe.p}function se(e,t){e&&e.i&&(re.delete(e),e.i(t))}function le(e,t,n,r){if(e&&e.o){if(re.has(e))return;re.add(e),oe.c.push(()=>{re.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}}const ce={duration:0};function ue(e,r,o,a){let l=r(e,o),c=a?0:1,u=null,d=null,p=null;function m(){p&&q(e,p)}function b(e,t){const n=e.b-c;return t*=Math.abs(n),{a:c,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function x(r){const{delay:o=0,duration:a=300,easing:s=n,tick:x=t,css:$}=l||ce,w={start:f()+o,b:r};r||(w.group=oe,oe.r+=1),u?d=w:($&&(m(),p=G(e,c,r,a,o,s,$)),r&&x(0,1),u=b(w,a),Z(()=>ne(e,r,"start")),function(e){let t;g||(g=!0,v(y)),new Promise(n=>{h.add(t=[e,n])})}(t=>{if(d&&t>d.start&&(u=b(d,a),d=null,ne(e,u.b,"start"),$&&(m(),p=G(e,c,u.b,u.duration,0,s,l.css))),u)if(t>=u.end)x(c=u.b,1-c),ne(e,u.b,"end"),d||(u.b?m():--u.group.r||i(u.group.c)),u=null;else if(t>=u.start){const e=t-u.start;c=u.a+u.d*s(e/u.duration),x(c,1-c)}return!(!u&&!d)}))}return{run(e){s(l)?(Q||(Q=Promise.resolve(),Q.then(()=>{Q=null})),Q).then(()=>{l=l(),x(e)}):x(e)},end(){m(),u=d=null}}}const de="undefined"!=typeof window?window:global;function pe(e,t,n){const{fragment:r,on_mount:a,on_destroy:l,after_update:c}=e.$$;r.m(t,n),Z(()=>{const t=a.map(o).filter(s);l?l.push(...t):i(t),e.$$.on_mount=[]}),c.forEach(Z)}function fe(e,t){e.$$.fragment&&(i(e.$$.on_destroy),e.$$.fragment.d(t),e.$$.on_destroy=e.$$.fragment=null,e.$$.ctx={})}function ve(e,t){e.$$.dirty||(V.push(e),X||(X=!0,Y.then(ee)),e.$$.dirty=a()),e.$$.dirty[t]=!0}function he(e,n,r,o,s,l){const c=z;L(e);const u=n.props||{},d=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:s,bound:a(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:a(),dirty:null};let p=!1;d.ctx=r?r(e,u,(t,n,r=n)=>(d.ctx&&s(d.ctx[t],d.ctx[t]=r)&&(d.bound[t]&&d.bound[t](r),p&&ve(e,t)),n)):u,d.update(),p=!0,i(d.before_update),d.fragment=o(d.ctx),n.target&&(n.hydrate?d.fragment.l(function(e){return Array.from(e.childNodes)}(n.target)):d.fragment.c(),n.intro&&se(e.$$.fragment),pe(e,n.target,n.anchor),ee()),L(c)}class me{$destroy(){fe(this,1),this.$destroy=t}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}var ge=function(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")()),ye=function(){return Math.random().toString(36).substring(7).split("").join(".")},be={INIT:"@@redux/INIT"+ye(),REPLACE:"@@redux/REPLACE"+ye(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+ye()}};function xe(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function $e(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n($e)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var o=e,a=t,i=[],s=i,l=!1;function c(){s===i&&(s=i.slice())}function u(){if(l)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return a}function d(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(l)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var t=!0;return c(),s.push(e),function(){if(t){if(l)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");t=!1,c();var n=s.indexOf(e);s.splice(n,1)}}}function p(e){if(!xe(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(l)throw new Error("Reducers may not dispatch actions.");try{l=!0,a=o(a,e)}finally{l=!1}for(var t=i=s,n=0;n<t.length;n++){(0,t[n])()}return e}function f(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");o=e,p({type:be.REPLACE})}function v(){var e,t=d;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(u())}return n(),{unsubscribe:t(n)}}})[ge]=function(){return this},e}return p({type:be.INIT}),(r={dispatch:p,subscribe:d,getState:u,replaceReducer:f})[ge]=v,r}function we(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pe(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function Oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(n,!0).forEach((function(t){we(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ke(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function Ie(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},o={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(o)}));return Oe({},n,{dispatch:r=ke.apply(void 0,a)(n.dispatch)})}}}const _e=(e,t,n,r)=>({type:"MAKE_MOVE",payload:{type:e,args:t,playerID:n,credentials:r}}),Ee=(e,t,n,r)=>({type:"GAME_EVENT",payload:{type:e,args:t,playerID:n,credentials:r}}),De=(e,t,n,r)=>({type:"GAME_EVENT",payload:{type:e,args:t,playerID:n,credentials:r},automatic:!0}),je=e=>({type:"SYNC",state:e.state,log:e.log,initialState:e.initialState,clientOnly:!0}),Se=e=>({type:"RESET",state:e,clientOnly:!0}),Ae=(e,t)=>({type:"UNDO",payload:{type:null,args:null,playerID:e,credentials:t}}),Ce=(e,t)=>({type:"REDO",payload:{type:null,args:null,playerID:e,credentials:t}});var Me,ze,Ne,Be=Object.freeze({makeMove:_e,gameEvent:Ee,automaticGameEvent:De,sync:je,update:(e,t)=>({type:"UPDATE",state:e,deltalog:t,clientOnly:!0}),reset:Se,undo:Ae,redo:Ce,plugin:(e,t,n,r)=>({type:"PLUGIN",payload:{type:e,args:t,playerID:n,credentials:r}})}),Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qe=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Le="undefined"!=typeof Symbol?Symbol("immer-nothing"):(Ne=!0,(ze="immer-nothing")in(Me={})?Object.defineProperty(Me,ze,{value:Ne,enumerable:!0,configurable:!0,writable:!0}):Me[ze]=Ne,Me),Te="undefined"!=typeof Symbol?Symbol("immer-draftable"):"__$immer_draftable",Re="undefined"!=typeof Symbol?Symbol("immer-state"):"__$immer_state";function Ue(e){return!!e&&!!e[Re]}function Ke(e){if(!e||"object"!==(void 0===e?"undefined":Ge(e)))return!1;if(Array.isArray(e))return!0;var t=Object.getPrototypeOf(e);return!t||t===Object.prototype||(!!e[Te]||!!e.constructor[Te])}var Fe=Object.assign||function(e,t){for(var n in t)Ye(t,n)&&(e[n]=t[n]);return e},Ve="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function Je(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Array.isArray(e))return e.slice();var n=Object.create(Object.getPrototypeOf(e));return Ve(e).forEach((function(r){if(r!==Re){var o=Object.getOwnPropertyDescriptor(e,r);if(o.get){if(!t)throw new Error("Immer drafts cannot have computed properties");o.value=o.get.call(e)}o.enumerable?n[r]=o.value:Object.defineProperty(n,r,{value:o.value,writable:!0,configurable:!0})}})),n}function He(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)t(n,e[n],e);else Ve(e).forEach((function(n){return t(n,e[n],e)}))}function We(e,t){return Object.getOwnPropertyDescriptor(e,t).enumerable}function Ye(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Qe(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}var Xe={},Ze=[],et=function(){return Ze[Ze.length-1]};function tt(e,t){var n=Array.isArray(e),r=it(e);He(r,(function(t){!function(e,t,n){var r=Xe[t];r?r.enumerable=n:Xe[t]=r={configurable:!0,enumerable:n,get:function(){return function(e,t){st(e);var n=rt(e)[t];if(!e.finalizing&&n===e.base[t]&&Ke(n))return at(e),e.copy[t]=tt(n,e);return n}(this[Re],t)},set:function(e){!function(e,t,n){if(st(e),e.assigned[t]=!0,!e.modified){if(Qe(rt(e)[t],n))return;ot(e),at(e)}e.copy[t]=n}(this[Re],t,e)}};Object.defineProperty(e,t,r)}(r,t,n||We(e,t))}));var o={scope:t?t.scope:et(),modified:!1,finalizing:!1,finalized:!1,assigned:{},parent:t,base:e,draft:r,copy:null,revoke:nt,revoked:!1};return function(e,t,n){Object.defineProperty(e,t,{value:n,enumerable:!1,writable:!0})}(r,Re,o),o.scope.push(o),r}function nt(){this.revoked=!0}function rt(e){return e.copy||e.base}function ot(e){e.modified||(e.modified=!0,e.parent&&ot(e.parent))}function at(e){e.copy||(e.copy=it(e.base))}function it(e){var t=e&&e[Re];if(t){t.finalizing=!0;var n=Je(t.draft,!0);return t.finalizing=!1,n}return Je(e)}function st(e){if(!0===e.revoked)throw new Error("Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+JSON.stringify(rt(e)))}function lt(e){for(var t=e.base,n=e.draft,r=Object.keys(n),o=r.length-1;o>=0;o--)if(void 0===t[r[o]]&&!Ye(t,r[o]))return!0;return r.length!==Object.keys(t).length}function ct(e){var t=e.draft;if(t.length!==e.base.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);return!(!n||n.get)}var ut=Object.freeze({scopes:Ze,currentScope:et,willFinalize:function(e,t,n){var r=et();r.forEach((function(e){return e.finalizing=!0})),void 0!==e&&e!==t||(n&&function e(t){if(!t||"object"!==(void 0===t?"undefined":Ge(t)))return;var n=t[Re];if(!n)return;var r=n.base,o=n.draft,a=n.assigned;if(Array.isArray(t)){if(ct(n)){if(ot(n),a.length=!0,o.length<r.length)for(var i=o.length;i<r.length;i++)a[i]=!1;else for(var s=r.length;s<o.length;s++)a[s]=!0;for(var l=0;l<o.length;l++)void 0===a[l]&&e(o[l])}}else Object.keys(o).forEach((function(t){void 0!==r[t]||Ye(r,t)?a[t]||e(o[t]):(a[t]=!0,ot(n))})),Object.keys(r).forEach((function(e){void 0!==o[e]||Ye(o,e)||(a[e]=!1,ot(n))}))}(t),function(e){for(var t=e.length-1;t>=0;t--){var n=e[t];!1===n.modified&&(Array.isArray(n.base)?ct(n)&&ot(n):lt(n)&&ot(n))}}(r))},createDraft:tt}),dt=[],pt=function(){return dt[dt.length-1]};function ft(e,t){var n={scope:t?t.scope:pt(),modified:!1,finalized:!1,assigned:{},parent:t,base:e,draft:null,drafts:{},copy:null,revoke:null},r=Array.isArray(e)?Proxy.revocable([n],ht):Proxy.revocable(n,vt),o=r.revoke,a=r.proxy;return n.draft=a,n.revoke=o,n.scope.push(n),a}var vt={get:function(e,t){if(t===Re)return e;var n=e.drafts;if(!e.modified&&Ye(n,t))return n[t];var r=mt(e)[t];if(e.finalized||!Ke(r))return r;if(e.modified){if(r!==e.base[t])return r;n=e.copy}return n[t]=ft(r,e)},has:function(e,t){return t in mt(e)},ownKeys:function(e){return Reflect.ownKeys(mt(e))},set:function(e,t,n){if(!e.modified){if(n?Qe(e.base[t],n)||n===e.drafts[t]:Qe(e.base[t],n)&&t in e.base)return!0;gt(e)}return e.assigned[t]=!0,e.copy[t]=n,!0},deleteProperty:function(e,t){(void 0!==e.base[t]||t in e.base)&&(e.assigned[t]=!1,gt(e));e.copy&&delete e.copy[t];return!0},getOwnPropertyDescriptor:function(e,t){var n=mt(e),r=Reflect.getOwnPropertyDescriptor(n,t);r&&(r.writable=!0,r.configurable=!Array.isArray(n)||"length"!==t);return r},defineProperty:function(){throw new Error("Object.defineProperty() cannot be used on an Immer draft")},getPrototypeOf:function(e){return Object.getPrototypeOf(e.base)},setPrototypeOf:function(){throw new Error("Object.setPrototypeOf() cannot be used on an Immer draft")}},ht={};function mt(e){return e.copy||e.base}function gt(e){e.modified||(e.modified=!0,e.copy=Fe(Je(e.base),e.drafts),e.drafts=null,e.parent&&gt(e.parent))}He(vt,(function(e,t){ht[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),ht.deleteProperty=function(e,t){if(isNaN(parseInt(t)))throw new Error("Immer only supports deleting array indices");return vt.deleteProperty.call(this,e[0],t)},ht.set=function(e,t,n){if("length"!==t&&isNaN(parseInt(t)))throw new Error("Immer only supports setting array indices and the 'length' property");return vt.set.call(this,e[0],t,n)};var yt=Object.freeze({scopes:dt,currentScope:pt,willFinalize:function(){},createDraft:ft});function bt(e,t,n,r){Array.isArray(e.base)?function(e,t,n,r){for(var o=e.base,a=e.copy,i=e.assigned,s=Math.min(o.length,a.length),l=0;l<s;l++)if(i[l]&&o[l]!==a[l]){var c=t.concat(l);n.push({op:"replace",path:c,value:a[l]}),r.push({op:"replace",path:c,value:o[l]})}if(s<a.length){for(var u=s;u<a.length;u++)n.push({op:"add",path:t.concat(u),value:a[u]});r.push({op:"replace",path:t.concat("length"),value:o.length})}else if(s<o.length){n.push({op:"replace",path:t.concat("length"),value:a.length});for(var d=s;d<o.length;d++)r.push({op:"add",path:t.concat(d),value:o[d]})}}(e,t,n,r):function(e,t,n,r){var o=e.base,a=e.copy;He(e.assigned,(function(e,i){var s=o[e],l=a[e],c=i?e in o?"replace":"add":"remove";if(s!==l||"replace"!==c){var u=t.concat(e);n.push("remove"===c?{op:c,path:u}:{op:c,path:u,value:l}),r.push("add"===c?{op:"remove",path:u}:"remove"===c?{op:"add",path:u,value:s}:{op:"replace",path:u,value:s})}}))}(e,t,n,r)}function xt(e,t){for(var n=0;n<t.length;n++){var r=t[n],o=r.path;if(0===o.length&&"replace"===r.op)e=r.value;else{for(var a=e,i=0;i<o.length-1;i++)if(!(a=a[o[i]])||"object"!==(void 0===a?"undefined":Ge(a)))throw new Error("Cannot apply patch, path doesn't resolve: "+o.join("/"));var s=o[o.length-1];switch(r.op){case"replace":case"add":a[s]=r.value;break;case"remove":if(Array.isArray(a)){if(s!==a.length-1)throw new Error("Only the last index of an array can be removed, index: "+s+", length: "+a.length);a.length-=1}else delete a[s];break;default:throw new Error("Unsupported patch operation: "+r.op)}}}return e}var $t={useProxies:"undefined"!=typeof Proxy&&"undefined"!=typeof Reflect,autoFreeze:"undefined"==typeof process&&"verifyMinified"===function(){}.name,onAssign:null,onDelete:null,onCopy:null},wt=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Fe(this,$t,t),this.setUseProxies(this.useProxies),this.produce=this.produce.bind(this)}return qe(e,[{key:"produce",value:function(e,t,n){var r=this;if("function"==typeof e&&"function"!=typeof t){var o=t;return t=e,function(){for(var e=arguments.length,n=Array(e>1?e-1:0),a=1;a<e;a++)n[a-1]=arguments[a];var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return r.produce(i,(function(e){var r;return(r=t).call.apply(r,[e,e].concat(n))}))}}if("function"!=typeof t)throw new Error("if first argument is not a function, the second argument to produce should be a function");if(void 0!==n&&"function"!=typeof n)throw new Error("the third argument of a producer should not be set or a function");var a=void 0;if(Ke(e)){this.scopes.push([]);var i=this.createDraft(e);try{a=t.call(i,i),this.willFinalize(a,i,!!n);var s=n&&[],l=n&&[];if(void 0===a||a===i)a=this.finalize(i,[],s,l);else{if(i[Re].modified)throw new Error("An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.");Ke(a)&&(a=this.finalize(a)),n&&(s.push({op:"replace",path:[],value:a}),l.push({op:"replace",path:[],value:e}))}}finally{this.currentScope().forEach((function(e){return e.revoke()})),this.scopes.pop()}n&&n(s,l)}else if(void 0===(a=t(e)))return e;return a===Le?void 0:a}},{key:"setAutoFreeze",value:function(e){this.autoFreeze=e}},{key:"setUseProxies",value:function(e){this.useProxies=e,Fe(this,e?yt:ut)}},{key:"applyPatches",value:function(e,t){return Ue(e)?xt(e,t):this.produce(e,(function(e){return xt(e,t)}))}},{key:"finalize",value:function(e,t,n,r){var o=this,a=e[Re];if(!a)return Object.isFrozen(e)?e:this.finalizeTree(e);if(a.scope!==this.currentScope())return e;if(!a.modified)return a.base;if(!a.finalized){if(a.finalized=!0,this.finalizeTree(a.draft,t,n,r),this.onDelete)if(this.useProxies){var i=a.assigned;for(var s in i)i[s]||this.onDelete(a,s)}else{var l=a.base,c=a.copy;He(l,(function(e){Ye(c,e)||o.onDelete(a,e)}))}this.onCopy&&this.onCopy(a),this.autoFreeze&&1===this.scopes.length&&Object.freeze(a.copy),n&&bt(a,t,n,r)}return a.copy}},{key:"finalizeTree",value:function(e,t,n,r){var o=this,a=e[Re];a&&(this.useProxies||(a.finalizing=!0,a.copy=Je(a.draft,!0),a.finalizing=!1),e=a.copy);var i=this.onAssign;return He(e,(function s(l,c,u){if(c===u)throw Error("Immer forbids circular references");var d=!!a&&u===e;if(Ue(c)){if(c=n&&d&&!a.assigned[l]?o.finalize(c,t.concat(l),n,r):o.finalize(c),Array.isArray(u)||We(u,l)?u[l]=c:Object.defineProperty(u,l,{value:c}),d&&c===a.base[l])return}else{if(d&&Qe(c,a.base[l]))return;Ke(c)&&!Object.isFrozen(c)&&He(c,s)}d&&i&&i(a,l,c)})),e}}]),e}()),Pt=wt.produce;wt.setAutoFreeze.bind(wt),wt.setUseProxies.bind(wt),wt.applyPatches.bind(wt);const Ot={name:"plugin-immer",fnWrap:e=>(t,n,...r)=>{let o=!1;const a=Pt(t,t=>{const a=e(t,n,...r);if("INVALID_MOVE"!==a)return a;o=!0});return o?"INVALID_MOVE":a}};function kt(e){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function It(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Et(n,!0).forEach((function(t){_t(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Et(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function St(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function At(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function Ct(e,t){var n=new St(e),r=t&&t.state,o=n.next;return o.quick=o,r&&("object"==kt(r)&&At(r,n),o.state=function(){return At(n,{})}),o}var Mt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state=t,this.used=!1}var t,n,r;return t=e,(n=[{key:"isUsed",value:function(){return this.used}},{key:"getState",value:function(){return this.state}},{key:"_random",value:function(){this.used=!0;var e,t=this.state,n=(e=void 0===t.prngstate?new Ct(t.seed,{state:!0}):new Ct("",{state:t.prngstate}))();return this.state=Dt({},t,{prngstate:e.state()}),n}},{key:"api",value:function(){var e=this._random.bind(this),t={D4:4,D6:6,D8:8,D10:10,D12:12,D20:20},n={},r=function(r){var o=t[r];n[r]=function(t){return void 0===t?Math.floor(e()*o)+1:jt(new Array(t).keys()).map((function(){return Math.floor(e()*o)+1}))}};for(var o in t)r(o);return Dt({},n,{Die:function(t,n){return void 0===t&&(t=6),void 0===n?Math.floor(e()*t)+1:jt(new Array(n).keys()).map((function(){return Math.floor(e()*t)+1}))},Number:function(){return e()},Shuffle:function(t){for(var n=t.slice(0),r=t.length,o=0,a=new Array(r);r;){var i=r*e()|0;a[o++]=n[i],n[i]=n[--r]}return a},_obj:this})}}])&&It(t.prototype,n),r&&It(t,r),e}();Mt.seed=function(){return(+new Date).toString(36).slice(-10)};class zt{constructor(e,t){this.flow=e,this.playerID=t,this.dispatch=[]}api(e){const t={_obj:this},{phase:n,turn:r}=e;for(const e of this.flow.eventNames)t[e]=(...t)=>{this.dispatch.push({key:e,args:t,phase:n,turn:r})};return t}isUsed(){return this.dispatch.length>0}update(e){for(let t=0;t<this.dispatch.length;t++){const n=this.dispatch[t];if("endTurn"===n.key&&n.turn!==e.ctx.turn)continue;if(("endPhase"===n.key||"setPhase"===n.key)&&n.phase!==e.ctx.phase)continue;const r=De(n.key,n.args,this.playerID);e={...e,...this.flow.processEvent(e,r)}}return e}}const Nt=[Ot,{name:"random",noClient:({api:e})=>e._obj.isUsed(),flush:({api:e})=>e._obj.getState(),api:({data:e})=>new Mt(e).api(),setup:({game:e})=>{let t=e.seed;return void 0===t&&(t=Mt.seed()),{seed:t}}},{name:"events",noClient:({api:e})=>e._obj.isUsed(),dangerouslyFlushRawState:({state:e,api:t})=>t._obj.update(e),api:({game:e,playerID:t,ctx:n})=>new zt(e.flow,t).api(n)}],Bt=e=>{let t={...e.ctx};const n=e.plugins||{};return Object.entries(n).forEach(([e,{api:n}])=>{t[e]=n}),t},Gt=(e,t)=>[...Nt,...t].filter(e=>void 0!==e.fnWrap).reduce((e,{fnWrap:t})=>t(e),e),qt=(e,t)=>([...Nt,...t.game.plugins].filter(e=>void 0!==e.api).forEach(n=>{const r=n.name,o=e.plugins[r]||{data:{}},a=n.api({G:e.G,ctx:e.ctx,data:o.data,game:t.game,playerID:t.playerID});e={...e,plugins:{...e.plugins,[r]:{...o,api:a}}}}),e),Lt=(e,t)=>([...Nt,...t.game.plugins].reverse().forEach(n=>{const r=n.name,o=e.plugins[r]||{data:{}};if(n.flush){const r=n.flush({G:e.G,ctx:e.ctx,game:t.game,api:o.api,data:o.data});e={...e,plugins:{...e.plugins,[n.name]:{data:r}}}}else if(n.dangerouslyFlushRawState){const a=(e=n.dangerouslyFlushRawState({state:e,game:t.game,api:o.api,data:o.data})).plugins[r].data;e={...e,plugins:{...e.plugins,[n.name]:{data:a}}}}}),e),Tt=console.log,Rt=console.error;function Ut(e){Rt("ERROR:",e)}function Kt(e,t,n){return{...e,ctx:Ft(e.ctx,n)}}function Ft(e,t){let{_prevActivePlayers:n}=e,r={},o=null,a={};if(Array.isArray(t)){let e={};t.forEach(t=>e[t]=Wt.NULL),r=e}else{if(t.next&&(o=t.next),n=t.revert?n.concat({activePlayers:e.activePlayers,_activePlayersMoveLimit:e._activePlayersMoveLimit,_activePlayersNumMoves:e._activePlayersNumMoves}):[],void 0!==t.currentPlayer&&Vt(r,a,e.currentPlayer,t.currentPlayer),void 0!==t.others)for(let n=0;n<e.playOrder.length;n++){const o=e.playOrder[n];o!==e.currentPlayer&&Vt(r,a,o,t.others)}if(void 0!==t.all)for(let n=0;n<e.playOrder.length;n++){Vt(r,a,e.playOrder[n],t.all)}if(t.value)for(const e in t.value)Vt(r,a,e,t.value[e]);if(t.moveLimit)for(const e in r)void 0===a[e]&&(a[e]=t.moveLimit)}0==Object.keys(r).length&&(r=null),0==Object.keys(a).length&&(a=null);let i={};for(const e in r)i[e]=0;return{...e,activePlayers:r,_activePlayersMoveLimit:a,_activePlayersNumMoves:i,_prevActivePlayers:n,_nextActivePlayers:o}}function Vt(e,t,n,r){"object"==typeof r&&r!==Wt.NULL||(r={stage:r}),void 0!==r.stage&&(e[n]=r.stage,r.moveLimit&&(t[n]=r.moveLimit))}function Jt(e,t){return e[t]+""}const Ht={first:(e,t)=>0===t.turn?t.playOrderPos:(t.playOrderPos+1)%t.playOrder.length,next:(e,t)=>(t.playOrderPos+1)%t.playOrder.length},Wt={NULL:null};function Yt({moves:e,phases:t,endIf:n,onEnd:r,turn:o,events:a,plugins:i,disableUndo:s}){void 0===e&&(e={}),void 0===a&&(a={}),void 0===i&&(i=[]),void 0===t&&(t={}),n||(n=()=>{}),r||(r=e=>e),o||(o={});const l={...t};""in l&&Ut("cannot specify phase with empty name"),l[""]={};let c={},u=new Set,d=null;Object.keys(e).forEach(e=>u.add(e));const p=e=>{const t=Gt(e,i);return e=>{const n=Bt(e);return t(e.G,n)}},f=e=>t=>{let n=Bt(t);return e(t.G,n)},v={onEnd:p(r),endIf:f(n)};for(let e in l){const t=l[e];if(!0===t.start&&(d=e),void 0!==t.moves)for(let n of Object.keys(t.moves))c[e+"."+n]=t.moves[n],u.add(n);void 0===t.endIf&&(t.endIf=()=>{}),void 0===t.onBegin&&(t.onBegin=e=>e),void 0===t.onEnd&&(t.onEnd=e=>e),void 0===t.turn&&(t.turn=o),void 0===t.turn.order&&(t.turn.order=Ht),void 0===t.turn.onBegin&&(t.turn.onBegin=e=>e),void 0===t.turn.onEnd&&(t.turn.onEnd=e=>e),void 0===t.turn.endIf&&(t.turn.endIf=()=>!1),void 0===t.turn.onMove&&(t.turn.onMove=e=>e),void 0===t.turn.stages&&(t.turn.stages={});for(const n in t.turn.stages){const r=t.turn.stages[n].moves||{};for(let t of Object.keys(r)){c[e+"."+n+"."+t]=r[t],u.add(t)}}t.wrapped={onBegin:p(t.onBegin),onEnd:p(t.onEnd),endIf:f(t.endIf)},t.turn.wrapped={onMove:p(t.turn.onMove),onBegin:p(t.turn.onBegin),onEnd:p(t.turn.onEnd),endIf:f(t.turn.endIf)}}function h(e){return e.phase?l[e.phase]:l[""]}function m(e){return e}function g(e,t){const n=new Set,r=new Set;for(let o=0;o<t.length;o++){const{fn:a,arg:i,...s}=t[o];if(a===E){r.clear();const t=e.ctx.phase;if(n.has(t)){const t={...e.ctx,phase:null};return{...e,ctx:t}}n.add(t)}let l=[];if(e=a(e,{...s,arg:i,next:l}),a===_)break;const c=O(e);if(c){t.push({fn:_,arg:c,turn:e.ctx.turn,phase:e.ctx.phase,automatic:!0});continue}const u=k(e);if(u)t.push({fn:E,arg:u,turn:e.ctx.turn,phase:e.ctx.phase,automatic:!0});else{if(a===m){const n=I(e);if(n){t.push({fn:D,arg:n,turn:e.ctx.turn,phase:e.ctx.phase,automatic:!0});continue}}t.push(...l)}}return e}function y(e,{next:t}){return t.push({fn:b}),e}function b(e,{next:t}){let{G:n,ctx:r}=e;return n=h(r).wrapped.onBegin(e),t.push({fn:x}),{...e,G:n,ctx:r}}function x(e,{currentPlayer:t}){let{G:n,ctx:r}=e;const o=h(r);t?(r={...r,currentPlayer:t},o.turn.activePlayers&&(r=Ft(r,o.turn.activePlayers))):r=function(e,t){let{G:n,ctx:r}=e;const o=Bt(e),a=t.order;let i=[...new Array(r.numPlayers)].map((e,t)=>t+"");void 0!==a.playOrder&&(i=a.playOrder(n,o));const s=a.first(n,o),l=typeof s;"number"!==l&&Ut(`invalid value returned by turn.order.first — expected number got ${l} “${s}”.`);const c=Jt(i,s);return r={...r,currentPlayer:c,playOrderPos:s,playOrder:i},r=Ft(r,t.activePlayers||{}),r}(e,o.turn);const a=r.turn+1;r={...r,turn:a,numMoves:0,_prevActivePlayers:[]},n=o.turn.wrapped.onBegin({...e,G:n,ctx:r});const i=s?[]:[{G:n,ctx:r}];return{...e,G:n,ctx:r,_undo:i,_redo:[]}}function $(e,{arg:t,next:n,phase:r}){const o=h({phase:r});let{ctx:a}=e;if(t&&t.next){if(!(t.next in l))return Ut("invalid phase: "+t.next),e;a={...a,phase:t.next}}else a=void 0!==o.next?{...a,phase:o.next}:{...a,phase:null};return e={...e,ctx:a},n.push({fn:b}),e}function w(e,{arg:t,currentPlayer:n,next:r}){let{G:o,ctx:a}=e;const i=h(a),{endPhase:s,ctx:l}=function(e,t,n,r){const o=n.order;let{G:a,ctx:i}=e,s=i.playOrderPos,l=!1;if(r&&!0!==r)"object"!=typeof r&&Ut(`invalid argument to endTurn: ${r}`),Object.keys(r).forEach(e=>{switch(e){case"remove":t=Jt(i.playOrder,s);break;case"next":s=i.playOrder.indexOf(r.next),t=r.next;break;default:Ut(`invalid argument to endTurn: ${e}`)}});else{const n=Bt(e),r=o.next(a,n),c=typeof r;void 0!==r&&"number"!==c&&Ut(`invalid value returned by turn.order.next — expected number or undefined got ${c} “${r}”.`),void 0===r?l=!0:(s=r,t=Jt(i.playOrder,s))}return i={...i,playOrderPos:s,currentPlayer:t},{endPhase:l,ctx:i}}(e,n,i.turn,t);return a=l,e={...e,G:o,ctx:a},s?r.push({fn:E,turn:a.turn,phase:a.phase}):r.push({fn:x,currentPlayer:a.currentPlayer}),e}function P(e,{arg:t,playerID:n}){"string"==typeof t&&(t={stage:t});let{ctx:r}=e,{activePlayers:o,_activePlayersMoveLimit:a,_activePlayersNumMoves:i}=r;return t.stage&&(null===o&&(o={}),o[n]=t.stage,i[n]=0,t.moveLimit&&(null===a&&(a={}),a[n]=t.moveLimit)),r={...r,activePlayers:o,_activePlayersMoveLimit:a,_activePlayersNumMoves:i},{...e,ctx:r}}function O(e){return v.endIf(e)}function k(e){return h(e.ctx).wrapped.endIf(e)}function I(e){const t=h(e.ctx),n=e.ctx.numMoves||0;return!!(t.turn.moveLimit&&n>=t.turn.moveLimit)||t.turn.wrapped.endIf(e)}function _(e,{arg:t,phase:n}){e=E(e,{phase:n}),void 0===t&&(t=!0),e={...e,ctx:{...e.ctx,gameover:t}};const r=v.onEnd(e);return{...e,G:r}}function E(e,{arg:t,next:n,turn:r,automatic:o}){let a=(e=D(e,{turn:r,force:!0})).G,i=e.ctx;if(n&&n.push({fn:$,arg:t,phase:i.phase}),null===i.phase)return e;a=h(i).wrapped.onEnd(e),i={...i,phase:null};const s={action:Ee("endPhase",t),_stateID:e._stateID,turn:e.ctx.turn,phase:e.ctx.phase};o&&(s.automatic=!0);const l=[...e.deltalog,s];return{...e,G:a,ctx:i,deltalog:l}}function D(e,{arg:t,next:n,turn:r,force:o,automatic:a,playerID:i}){if(r!==e.ctx.turn)return e;let{G:s,ctx:l}=e;const c=h(l),u=l.numMoves||0;if(!o&&c.turn.moveLimit&&u<c.turn.moveLimit)return d=`cannot end turn before making ${c.turn.moveLimit} moves`,Tt(`INFO: ${d}`),e;var d;if(s=c.turn.wrapped.onEnd(e),n&&n.push({fn:w,arg:t,currentPlayer:l.currentPlayer}),l={...l,activePlayers:null},t&&t.remove){i=i||l.currentPlayer;const t=l.playOrder.filter(e=>e!=i),r=l.playOrderPos>t.length-1?0:l.playOrderPos;if(l={...l,playOrder:t,playOrderPos:r},0===t.length)return n.push({fn:E,turn:l.turn,phase:l.phase}),e}const p={action:Ee("endTurn",t),_stateID:e._stateID,turn:e.ctx.turn,phase:e.ctx.phase};a&&(p.automatic=!0);const f=[...e.deltalog||[],p];return{...e,G:s,ctx:l,deltalog:f,_undo:[],_redo:[]}}function j(e,{arg:t,next:n,automatic:r,playerID:o}){o=o||e.ctx.currentPlayer;let{ctx:a}=e,{activePlayers:i,_activePlayersMoveLimit:s}=a;const l=null!==i&&o in i;if(!t&&l){const e=h(a).turn.stages[i[o]];e&&e.next&&(t=e.next)}if(n&&t&&n.push({fn:P,arg:t,playerID:o}),!l)return e;i=Object.keys(i).filter(e=>e!==o).reduce((e,t)=>(e[t]=i[t],e),{}),s&&(s=Object.keys(s).filter(e=>e!==o).reduce((e,t)=>(e[t]=s[t],e),{})),a=function(e){let{activePlayers:t,_activePlayersMoveLimit:n,_activePlayersNumMoves:r,_prevActivePlayers:o}=e;if(t&&0==Object.keys(t).length)if(e._nextActivePlayers)e=Ft(e,e._nextActivePlayers),({activePlayers:t,_activePlayersMoveLimit:n,_activePlayersNumMoves:r,_prevActivePlayers:o}=e);else if(o.length>0){const e=o.length-1;({activePlayers:t,_activePlayersMoveLimit:n,_activePlayersNumMoves:r}=o[e]),o=o.slice(0,e)}else t=null,n=null;return{...e,activePlayers:t,_activePlayersMoveLimit:n,_activePlayersNumMoves:r,_prevActivePlayers:o}}({...a,activePlayers:i,_activePlayersMoveLimit:s});const c={action:Ee("endStage",t),_stateID:e._stateID,turn:e.ctx.turn,phase:e.ctx.phase};r&&(c.automatic=!0);const u=[...e.deltalog||[],c];return{...e,ctx:a,deltalog:u}}function S(t,n,r){const o=h(t),a=o.turn.stages,{activePlayers:i}=t;if(i&&void 0!==i[r]&&i[r]!==Wt.NULL&&void 0!==a[i[r]]&&void 0!==a[i[r]].moves){const e=a[i[r]].moves;if(n in e)return e[n]}else if(o.moves){if(n in o.moves)return o.moves[n]}else if(n in e)return e[n];return null}const A={endStage:function(e,t){return g(e,[{fn:j,playerID:t}])},setStage:function(e,t,n){return g(e,[{fn:j,arg:n,playerID:t}])},endTurn:function(e,t,n){return g(e,[{fn:D,turn:e.ctx.turn,phase:e.ctx.phase,arg:n}])},pass:function(e,t,n){return g(e,[{fn:D,turn:e.ctx.turn,phase:e.ctx.phase,force:!0,arg:n}])},endPhase:function(e){return g(e,[{fn:E,phase:e.ctx.phase,turn:e.ctx.turn}])},setPhase:function(e,t,n){return g(e,[{fn:E,phase:e.ctx.phase,turn:e.ctx.turn,arg:{next:n}}])},endGame:function(e,t,n){return g(e,[{fn:_,turn:e.ctx.turn,phase:e.ctx.phase,arg:n}])},setActivePlayers:Kt};let C=[];return!1!==a.endTurn&&C.push("endTurn"),!1!==a.pass&&C.push("pass"),!1!==a.endPhase&&C.push("endPhase"),!1!==a.setPhase&&C.push("setPhase"),!1!==a.endGame&&C.push("endGame"),!1!==a.setActivePlayers&&C.push("setActivePlayers"),!1!==a.endStage&&C.push("endStage"),!1!==a.setStage&&C.push("setStage"),{ctx:e=>({numPlayers:e,turn:0,currentPlayer:"0",playOrder:[...new Array(e)].map((e,t)=>t+""),playOrderPos:0,phase:d,activePlayers:null}),init:e=>g(e,[{fn:y}]),isPlayerActive:function(e,t,n){return t.activePlayers?n in t.activePlayers:t.currentPlayer===n},eventHandlers:A,eventNames:Object.keys(A),enabledEventNames:C,moveMap:c,moveNames:[...u.values()],processMove:function(e,t){let n=h(e.ctx);const r=S(e.ctx,t.type,t.playerID),o=!r||"function"==typeof r||!0!==r.noLimit;let{ctx:a}=e,{_activePlayersNumMoves:i}=a;const{playerID:s}=t;let l=e.ctx.numMoves;o&&(s==e.ctx.currentPlayer&&l++,a.activePlayers&&i[s]++),e={...e,ctx:{...a,numMoves:l,_activePlayersNumMoves:i}},a._activePlayersMoveLimit&&i[s]>=a._activePlayersMoveLimit[s]&&(e=j(e,{playerID:s,automatic:!0}));const c=n.turn.wrapped.onMove(e);return g(e={...e,G:c},[{fn:m}])},processEvent:function(e,t){const{type:n,playerID:r,args:o}=t.payload;if(A.hasOwnProperty(n)){const t=[e,r].concat(o);return A[n].apply({},t)}return e},getMove:S}}function Qt(e){if(function(e){return void 0!==e.processMove}(e))return e;if(void 0===e.name&&(e.name="default"),void 0===e.disableUndo&&(e.disableUndo=!1),void 0===e.setup&&(e.setup=()=>({})),void 0===e.moves&&(e.moves={}),void 0===e.playerView&&(e.playerView=e=>e),void 0===e.plugins&&(e.plugins=[]),e.plugins.forEach(e=>{if(void 0===e.name)throw new Error("Plugin missing name attribute");if(e.name.includes(" "))throw new Error(e.name+": Plugin name must not include spaces")}),e.name.includes(" "))throw new Error(e.name+": Game name must not include spaces");const t=Yt(e);return{...e,flow:t,moveNames:t.moveNames,pluginNames:e.plugins.map(e=>e.name),processMove:(n,r)=>{let o=t.getMove(n.ctx,r.type,r.playerID);var a;if((a=o)instanceof Object&&void 0!==a.move&&(o=o.move),o instanceof Function){const t=Gt(o,e.plugins),a={...Bt(n),playerID:r.playerID};let i=[];return void 0!==r.args&&(i=i.concat(r.args)),t(n.G,a,...i)}return Ut(`invalid move object: ${r.type}`),n.G}}}const Xt=[];function Zt(e,n=t){let r;const o=[];function a(t){if(l(e,t)&&(e=t,r)){const t=!Xt.length;for(let t=0;t<o.length;t+=1){const n=o[t];n[1](),Xt.push(n,e)}if(t){for(let e=0;e<Xt.length;e+=2)Xt[e][0](Xt[e+1]);Xt.length=0}}}return{set:a,update:function(t){a(t(e))},subscribe:function(i,s=t){const l=[i,s];return o.push(l),1===o.length&&(r=n(a)||t),i(e),()=>{const e=o.indexOf(l);-1!==e&&o.splice(e,1),0===o.length&&(r(),r=null)}}}}function en(e){const t=e-1;return t*t*t+1}function tn(e,{delay:t=0,duration:n=400,easing:r=en,x:o=0,y:a=0,opacity:i=0}){const s=getComputedStyle(e),l=+s.opacity,c="none"===s.transform?"":s.transform,u=l*(1-i);return{delay:t,duration:n,easing:r,css:(e,t)=>`\n\t\t\ttransform: ${c} translate(${(1-e)*o}px, ${(1-e)*a}px);\n\t\t\topacity: ${l-u*t}`}}function nn(e,t,n){const r=Object.create(e);return r.key=t[n][0],r.label=t[n][1].label,r}function rn(e){var t,n,r,o,a=e.label+"";function i(){return e.click_handler(e)}return{c(){t=P("div"),n=k(a),r=I(),D(t,"class","menu-item svelte-19bfq8g"),C(t,"active",e.pane==e.key),o=E(t,"click",i)},m(e,o){x(e,t,o),b(t,n),b(t,r)},p(r,o){e=o,r.panes&&a!==(a=e.label+"")&&j(n,a),(r.pane||r.panes)&&C(t,"active",e.pane==e.key)},d(e){e&&$(t),o()}}}function on(e){var n;let r=Object.entries(e.panes).reverse(),o=[];for(let t=0;t<r.length;t+=1)o[t]=rn(nn(e,r,t));return{c(){n=P("div");for(let e=0;e<o.length;e+=1)o[e].c();D(n,"class","menu svelte-19bfq8g")},m(e,t){x(e,n,t);for(let e=0;e<o.length;e+=1)o[e].m(n,null)},p(e,t){if(e.pane||e.panes){let a;for(r=Object.entries(t.panes).reverse(),a=0;a<r.length;a+=1){const i=nn(t,r,a);o[a]?o[a].p(e,i):(o[a]=rn(i),o[a].c(),o[a].m(n,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=r.length}},i:t,o:t,d(e){e&&$(n),w(o,e)}}}function an(e,t,n){let{pane:r,panes:o}=t;const a=U();return e.$set=e=>{"pane"in e&&n("pane",r=e.pane),"panes"in e&&n("panes",o=e.panes)},{pane:r,panes:o,dispatch:a,click_handler:({key:e})=>a("change",e)}}class sn extends me{constructor(e){var t;super(),document.getElementById("svelte-19bfq8g-style")||((t=P("style")).id="svelte-19bfq8g-style",t.textContent=".menu.svelte-19bfq8g{display:flex;margin-top:-10px;flex-direction:row;border:1px solid #ccc;border-radius:5px 5px 0 0;height:25px;line-height:25px;margin-right:-500px;transform-origin:bottom right;transform:rotate(-90deg) translate(0, -500px)}.menu-item.svelte-19bfq8g{line-height:25px;cursor:pointer;background:#fefefe;color:#555;padding-left:15px;padding-right:15px;text-align:center}.menu-item.svelte-19bfq8g:last-child{border-radius:0 5px 0 0}.menu-item.svelte-19bfq8g:first-child{border-radius:5px 0 0 0}.menu-item.active.svelte-19bfq8g{cursor:default;font-weight:bold;background:#ddd;color:#555}.menu-item.svelte-19bfq8g:hover{background:#ddd;color:#555}",b(document.head,t)),he(this,e,an,on,l,["pane","panes"])}}function ln(e){var t,n;return{c(){t=P("div"),n=k(e.label),D(t,"class","label svelte-1olzq4i")},m(e,r){x(e,t,r),b(t,n)},p(e,t){e.label&&j(n,t.label)},d(e){e&&$(t)}}}function cn(e){var n,r,o,a,s,l=e.label&&ln(e);return{c(){n=P("div"),r=P("div"),o=k(e.value),a=I(),l&&l.c(),D(r,"class","key-box svelte-1olzq4i"),D(n,"class","key svelte-1olzq4i"),C(n,"active",e.active),s=[E(window,"keydown",e.Keypress),E(r,"click",e.Activate)]},m(e,t){x(e,n,t),b(n,r),b(r,o),b(n,a),l&&l.m(n,null)},p(e,t){e.value&&j(o,t.value),t.label?l?l.p(e,t):((l=ln(t)).c(),l.m(n,null)):l&&(l.d(1),l=null),e.active&&C(n,"active",t.active)},i:t,o:t,d(e){e&&$(n),l&&l.d(),i(s)}}}function un(e,t,n){let r,{value:o,onPress:a=null,label:i=null,disable:s=!1}=t;const{disableHotkeys:l}=F("hotkeys");c(e,l,e=>{r=e,n("$disableHotkeys",r)});let u=!1;function d(){n("active",u=!1)}function p(){n("active",u=!0),setTimeout(d,200),a&&setTimeout(a,1)}return e.$set=e=>{"value"in e&&n("value",o=e.value),"onPress"in e&&n("onPress",a=e.onPress),"label"in e&&n("label",i=e.label),"disable"in e&&n("disable",s=e.disable)},{value:o,onPress:a,label:i,disable:s,disableHotkeys:l,active:u,Activate:p,Keypress:function(e){r||s||e.ctrlKey||e.metaKey||e.key!=o||(e.preventDefault(),p())}}}class dn extends me{constructor(e){var t;super(),document.getElementById("svelte-1olzq4i-style")||((t=P("style")).id="svelte-1olzq4i-style",t.textContent=".key.svelte-1olzq4i{display:flex;flex-direction:row;align-items:center}.key-box.svelte-1olzq4i{cursor:pointer;min-width:10px;padding-left:5px;padding-right:5px;height:20px;line-height:20px;text-align:center;border:1px solid #ccc;box-shadow:1px 1px 1px #888;background:#eee;color:#444}.key-box.svelte-1olzq4i:hover{background:#ddd}.key.active.svelte-1olzq4i .key-box.svelte-1olzq4i{background:#ddd;border:1px solid #999;box-shadow:none}.label.svelte-1olzq4i{margin-left:10px}",b(document.head,t)),he(this,e,un,cn,l,["value","onPress","label","disable"])}}function pn(e){var n,r,o,a,s,l,c,u,d,p;return{c(){var t;n=P("div"),r=P("span"),o=k(e.name),a=I(),(s=P("span")).textContent="(",l=I(),c=P("span"),u=I(),(d=P("span")).textContent=")",D(c,"class","arg-field svelte-1mppqmp"),D(c,"contenteditable",""),D(n,"class","move svelte-1mppqmp"),C(n,"active",e.active),p=[E(c,"blur",e.Deactivate),E(c,"keypress",(t=fn,function(e){return e.stopPropagation(),t.call(this,e)})),E(c,"keydown",e.OnKeyDown),E(n,"click",e.Activate)]},m(t,i){x(t,n,i),b(n,r),b(r,o),b(n,a),b(n,s),b(n,l),b(n,c),e.span2_binding(c),b(n,u),b(n,d)},p(e,t){e.name&&j(o,t.name),e.active&&C(n,"active",t.active)},i:t,o:t,d(t){t&&$(n),e.span2_binding(null),i(p)}}}const fn=()=>{};function vn(e,t,n){let r,{Activate:o,Deactivate:a,name:i,active:s}=t;const l=U();var c;return c=()=>{s?r.focus():r.blur()},T().$$.after_update.push(c),e.$set=e=>{"Activate"in e&&n("Activate",o=e.Activate),"Deactivate"in e&&n("Deactivate",a=e.Deactivate),"name"in e&&n("name",i=e.name),"active"in e&&n("active",s=e.active)},{Activate:o,Deactivate:a,name:i,active:s,span:r,OnKeyDown:function(e){"Enter"==e.key&&(e.preventDefault(),function(){try{const e=r.innerText;let t=new Function(`return [${e}]`)();l("submit",t)}catch(e){l("error",e)}n("span",r.innerText="",r)}()),"Escape"==e.key&&(e.preventDefault(),a())},span2_binding:function(e){J[e?"unshift":"push"](()=>{n("span",r=e)})}}}class hn extends me{constructor(e){var t;super(),document.getElementById("svelte-1mppqmp-style")||((t=P("style")).id="svelte-1mppqmp-style",t.textContent=".move.svelte-1mppqmp{display:flex;flex-direction:row;cursor:pointer;margin-left:10px;color:#666}.move.svelte-1mppqmp:hover{color:#333}.move.active.svelte-1mppqmp{color:#111;font-weight:bold}.arg-field.svelte-1mppqmp{outline:none;font-family:monospace}",b(document.head,t)),he(this,e,vn,pn,l,["Activate","Deactivate","name","active"])}}function mn(e){var t,n;return{c(){t=P("span"),n=k(e.error),D(t,"class","move-error svelte-smqssc")},m(e,r){x(e,t,r),b(t,n)},p(e,t){e.error&&j(n,t.error)},d(e){e&&$(t)}}}function gn(e){var t,n,r,o,a,i=new dn({props:{value:e.shortcut,onPress:e.Activate}}),s=new hn({props:{Activate:e.Activate,Deactivate:e.Deactivate,name:e.name,active:e.active}});s.$on("submit",e.Submit),s.$on("error",e.Error);var l=e.error&&mn(e);return{c(){t=P("div"),n=P("div"),i.$$.fragment.c(),r=I(),s.$$.fragment.c(),o=I(),l&&l.c(),D(n,"class","wrapper svelte-smqssc")},m(e,c){x(e,t,c),b(t,n),pe(i,n,null),b(n,r),pe(s,n,null),b(t,o),l&&l.m(t,null),a=!0},p(e,n){var r={};e.shortcut&&(r.value=n.shortcut),i.$set(r);var o={};e.name&&(o.name=n.name),e.active&&(o.active=n.active),s.$set(o),n.error?l?l.p(e,n):((l=mn(n)).c(),l.m(t,null)):l&&(l.d(1),l=null)},i(e){a||(se(i.$$.fragment,e),se(s.$$.fragment,e),a=!0)},o(e){le(i.$$.fragment,e),le(s.$$.fragment,e),a=!1},d(e){e&&$(t),fe(i),fe(s),l&&l.d()}}}function yn(e,t,n){let{shortcut:r,name:o,fn:a}=t;const{disableHotkeys:i}=F("hotkeys");let s="",l=!1;function c(){i.set(!1),n("error",s=""),n("active",l=!1)}return e.$set=e=>{"shortcut"in e&&n("shortcut",r=e.shortcut),"name"in e&&n("name",o=e.name),"fn"in e&&n("fn",a=e.fn)},{shortcut:r,name:o,fn:a,error:s,active:l,Activate:function(){i.set(!0),n("active",l=!0)},Deactivate:c,Submit:function(e){n("error",s=""),c(),a.apply(this,e.detail)},Error:function(e){n("error",s=e.detail),Ut(e.detail)}}}class bn extends me{constructor(e){var t;super(),document.getElementById("svelte-smqssc-style")||((t=P("style")).id="svelte-smqssc-style",t.textContent=".move-error.svelte-smqssc{color:#a00;font-weight:bold}.wrapper.svelte-smqssc{display:flex;flex-direction:row;align-items:center}",b(document.head,t)),he(this,e,yn,gn,l,["shortcut","name","fn"])}}var xn=function(e,t){return{parse:function(t){var n=JSON.parse(t,o).map(r),a=n[0];return"object"==typeof a&&a?function t(n,r,o){return Object.keys(o).reduce((function(o,a){var i=o[a];if(i instanceof e){var s=n[i];"object"!=typeof s||r.has(s)?o[a]=s:(r.add(s),o[a]=t(n,r,s))}return o}),o)}(n,new Set,a):a},stringify:function(e){for(var t,r=new Map,o=[],a=[],i=+n(r,o,e),s=function(e,a){if(t)return t=!t,a;switch(typeof a){case"object":if(null===a)return a;case"string":return r.get(a)||n(r,o,a)}return a};i<o.length;i++)t=!0,a[i]=JSON.stringify(o[i],s);return"["+a.join(",")+"]"}};function n(t,n,r){var o=e(n.push(r)-1);return t.set(r,o),o}function r(t){return t instanceof e?e(t):t}function o(t,n){return"string"==typeof n?new e(n):n}}(String);const $n=xn.parse,wn=xn.stringify;function Pn(e){var t,n,r,o,a,i,s,l,c,u=new dn({props:{value:"1",onPress:e.client.reset,label:"reset"}}),d=new dn({props:{value:"2",onPress:e.Save,label:"save"}}),p=new dn({props:{value:"3",onPress:e.Restore,label:"restore"}}),f=new dn({props:{value:".",disable:!0,label:"hide"}});return{c(){t=P("section"),n=P("li"),u.$$.fragment.c(),r=I(),o=P("li"),d.$$.fragment.c(),a=I(),i=P("li"),p.$$.fragment.c(),s=I(),l=P("li"),f.$$.fragment.c(),D(n,"class","svelte-1x2w9i0"),D(o,"class","svelte-1x2w9i0"),D(i,"class","svelte-1x2w9i0"),D(l,"class","svelte-1x2w9i0"),D(t,"id","debug-controls"),D(t,"class","controls")},m(e,v){x(e,t,v),b(t,n),pe(u,n,null),b(t,r),b(t,o),pe(d,o,null),b(t,a),b(t,i),pe(p,i,null),b(t,s),b(t,l),pe(f,l,null),c=!0},p(e,t){var n={};e.client&&(n.onPress=t.client.reset),u.$set(n)},i(e){c||(se(u.$$.fragment,e),se(d.$$.fragment,e),se(p.$$.fragment,e),se(f.$$.fragment,e),c=!0)},o(e){le(u.$$.fragment,e),le(d.$$.fragment,e),le(p.$$.fragment,e),le(f.$$.fragment,e),c=!1},d(e){e&&$(t),fe(u),fe(d),fe(p),fe(f)}}}function On(e,t,n){let{client:r}=t;return e.$set=e=>{"client"in e&&n("client",r=e.client)},{client:r,Save:function(){const e=r.getState(),t=wn({...e,_undo:[],_redo:[],deltalog:[]});window.localStorage.setItem("gamestate",t),window.localStorage.setItem("initialState",wn(r.initialState))},Restore:function(){const e=window.localStorage.getItem("gamestate"),t=window.localStorage.getItem("initialState");if(null!==e&&null!==t){const n=$n(e),o=$n(t);r.store.dispatch(je({state:n,initialState:o}))}}}}class kn extends me{constructor(e){var t;super(),document.getElementById("svelte-1x2w9i0-style")||((t=P("style")).id="svelte-1x2w9i0-style",t.textContent="li.svelte-1x2w9i0{list-style:none;margin:none;margin-bottom:5px}",b(document.head,t)),he(this,e,On,Pn,l,["client"])}}function In(e,t,n){const r=Object.create(e);return r.player=t[n],r}function _n(e){var t,n,r,o,a=e.player+"";function i(){return e.click_handler(e)}return{c(){t=P("div"),n=k(a),r=I(),D(t,"class","player svelte-6sf87x"),C(t,"current",e.player==e.ctx.currentPlayer),C(t,"active",e.player==e.playerID),o=E(t,"click",i)},m(e,o){x(e,t,o),b(t,n),b(t,r)},p(r,o){e=o,r.players&&a!==(a=e.player+"")&&j(n,a),(r.players||r.ctx)&&C(t,"current",e.player==e.ctx.currentPlayer),(r.players||r.playerID)&&C(t,"active",e.player==e.playerID)},d(e){e&&$(t),o()}}}function En(e){var n;let r=e.players,o=[];for(let t=0;t<r.length;t+=1)o[t]=_n(In(e,r,t));return{c(){n=P("div");for(let e=0;e<o.length;e+=1)o[e].c();D(n,"class","player-box svelte-6sf87x")},m(e,t){x(e,n,t);for(let e=0;e<o.length;e+=1)o[e].m(n,null)},p(e,t){if(e.players||e.ctx||e.playerID){let a;for(r=t.players,a=0;a<r.length;a+=1){const i=In(t,r,a);o[a]?o[a].p(e,i):(o[a]=_n(i),o[a].c(),o[a].m(n,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=r.length}},i:t,o:t,d(e){e&&$(n),w(o,e)}}}function Dn(e,t,n){let{ctx:r,playerID:o}=t;const a=U();function i(e){a("change",e==o?{playerID:null}:{playerID:e})}let s;return e.$set=e=>{"ctx"in e&&n("ctx",r=e.ctx),"playerID"in e&&n("playerID",o=e.playerID)},e.$$.update=(e={ctx:1})=>{e.ctx&&n("players",s=r?[...Array(r.numPlayers).keys()].map(e=>e.toString()):[])},{ctx:r,playerID:o,OnClick:i,players:s,click_handler:({player:e})=>i(e)}}class jn extends me{constructor(e){var t;super(),document.getElementById("svelte-6sf87x-style")||((t=P("style")).id="svelte-6sf87x-style",t.textContent=".player-box.svelte-6sf87x{display:flex;flex-direction:row}.player.svelte-6sf87x{cursor:pointer;text-align:center;width:30px;height:30px;line-height:30px;background:#eee;border:3px solid #fefefe;box-sizing:content-box}.player.current.svelte-6sf87x{background:#555;color:#eee;font-weight:bold}.player.active.svelte-6sf87x{border:3px solid #ff7f50}",b(document.head,t)),he(this,e,Dn,En,l,["ctx","playerID"])}}function Sn(e,t,n){const r=Object.create(e);return r.name=t[n][0],r.fn=t[n][1],r}function An(e){var t,n,r,o=new bn({props:{shortcut:e.shortcuts[e.name],fn:e.fn,name:e.name}});return{c(){t=P("li"),o.$$.fragment.c(),n=I(),D(t,"class","svelte-1vg2l2b")},m(e,a){x(e,t,a),pe(o,t,null),b(t,n),r=!0},p(e,t){var n={};e.client&&(n.shortcut=t.shortcuts[t.name]),e.client&&(n.fn=t.fn),e.client&&(n.name=t.name),o.$set(n)},i(e){r||(se(o.$$.fragment,e),r=!0)},o(e){le(o.$$.fragment,e),r=!1},d(e){e&&$(t),fe(o)}}}function Cn(e){var t,n;return{c(){(t=P("button")).textContent="End Turn",D(t,"class","svelte-1vg2l2b"),n=E(t,"click",e.click_handler)},m(e,n){x(e,t,n)},d(e){e&&$(t),n()}}}function Mn(e){var t,n;return{c(){(t=P("button")).textContent="End Phase",D(t,"class","svelte-1vg2l2b"),n=E(t,"click",e.click_handler_1)},m(e,n){x(e,t,n)},d(e){e&&$(t),n()}}}function zn(e){var t,n;return{c(){(t=P("button")).textContent="End Stage",D(t,"class","svelte-1vg2l2b"),n=E(t,"click",e.click_handler_2)},m(e,n){x(e,t,n)},d(e){e&&$(t),n()}}}function Nn(e){var t,n,r,o,a,i,s,l,c,u,d,p,f,v,h,m,g,y,O,_,E,S,A,C,M,z,N,B,G,q,L,T=JSON.stringify(e.G,null,2)+"",R=JSON.stringify(Bn(e.ctx),null,2)+"",U=new kn({props:{client:e.client}}),K=new jn({props:{ctx:e.ctx,playerID:e.playerID}});K.$on("change",e.change_handler);let F=Object.entries(e.client.moves),V=[];for(let t=0;t<F.length;t+=1)V[t]=An(Sn(e,F,t));const J=e=>le(V[e],1,1,()=>{V[e]=null});var H=e.client.events.endTurn&&Cn(e),W=e.ctx.phase&&e.client.events.endPhase&&Mn(e),Y=e.ctx.activePlayers&&e.client.events.endStage&&zn(e);return{c(){t=P("section"),(n=P("h3")).textContent="Controls",r=I(),U.$$.fragment.c(),o=I(),a=P("section"),(i=P("h3")).textContent="Players",s=I(),K.$$.fragment.c(),l=I(),c=P("section"),(u=P("h3")).textContent="Moves",d=I();for(let e=0;e<V.length;e+=1)V[e].c();p=I(),f=P("section"),(v=P("h3")).textContent="Events",h=I(),m=P("div"),H&&H.c(),g=I(),W&&W.c(),y=I(),Y&&Y.c(),O=I(),_=P("section"),(E=P("label")).textContent="G",S=I(),A=P("pre"),C=k(T),M=I(),z=P("section"),(N=P("label")).textContent="ctx",B=I(),G=P("pre"),q=k(R),D(n,"class","svelte-1vg2l2b"),D(i,"class","svelte-1vg2l2b"),D(u,"class","svelte-1vg2l2b"),D(v,"class","svelte-1vg2l2b"),D(m,"class","events svelte-1vg2l2b"),D(E,"class","svelte-1vg2l2b"),D(A,"class","json svelte-1vg2l2b"),D(N,"class","svelte-1vg2l2b"),D(G,"class","json svelte-1vg2l2b")},m(e,$){x(e,t,$),b(t,n),b(t,r),pe(U,t,null),x(e,o,$),x(e,a,$),b(a,i),b(a,s),pe(K,a,null),x(e,l,$),x(e,c,$),b(c,u),b(c,d);for(let e=0;e<V.length;e+=1)V[e].m(c,null);x(e,p,$),x(e,f,$),b(f,v),b(f,h),b(f,m),H&&H.m(m,null),b(m,g),W&&W.m(m,null),b(m,y),Y&&Y.m(m,null),x(e,O,$),x(e,_,$),b(_,E),b(_,S),b(_,A),b(A,C),x(e,M,$),x(e,z,$),b(z,N),b(z,B),b(z,G),b(G,q),L=!0},p(e,t){var n={};e.client&&(n.client=t.client),U.$set(n);var r={};if(e.ctx&&(r.ctx=t.ctx),e.playerID&&(r.playerID=t.playerID),K.$set(r),e.shortcuts||e.client){let n;for(F=Object.entries(t.client.moves),n=0;n<F.length;n+=1){const r=Sn(t,F,n);V[n]?(V[n].p(e,r),se(V[n],1)):(V[n]=An(r),V[n].c(),se(V[n],1),V[n].m(c,null))}for(ae(),n=F.length;n<V.length;n+=1)J(n);ie()}t.client.events.endTurn?H||((H=Cn(t)).c(),H.m(m,g)):H&&(H.d(1),H=null),t.ctx.phase&&t.client.events.endPhase?W||((W=Mn(t)).c(),W.m(m,y)):W&&(W.d(1),W=null),t.ctx.activePlayers&&t.client.events.endStage?Y||((Y=zn(t)).c(),Y.m(m,null)):Y&&(Y.d(1),Y=null),L&&!e.G||T===(T=JSON.stringify(t.G,null,2)+"")||j(C,T),L&&!e.ctx||R===(R=JSON.stringify(Bn(t.ctx),null,2)+"")||j(q,R)},i(e){if(!L){se(U.$$.fragment,e),se(K.$$.fragment,e);for(let e=0;e<F.length;e+=1)se(V[e]);L=!0}},o(e){le(U.$$.fragment,e),le(K.$$.fragment,e),V=V.filter(Boolean);for(let e=0;e<V.length;e+=1)le(V[e]);L=!1},d(e){e&&$(t),fe(U),e&&($(o),$(a)),fe(K),e&&($(l),$(c)),w(V,e),e&&($(p),$(f)),H&&H.d(),W&&W.d(),Y&&Y.d(),e&&($(O),$(_),$(M),$(z))}}}function Bn(e){let t={};for(const n in e)n.startsWith("_")||(t[n]=e[n]);return t}function Gn(e,t,n){let{client:r}=t;const o=function(e,t,n){var r={},o={};for(var a in e)o[a]=a;for(var i in t)o[i]=i;for(var s={},l=0;l<n.length;l++){s[n[l]]=!0}var c=s,u=!0;for(var d in o){var p=d[0];if(c[p]){u=!1;break}c[p]=!0,r[d]=p}if(u)return r;c=s;var f=97;for(var v in r={},o){for(var h=String.fromCharCode(f);c[h];)f++,h=String.fromCharCode(f);c[h]=!0,r[v]=h}return r}(r.moves,r.events,"mlia");let a=r.playerID,i={},s={};r.subscribe(e=>{e&&(n("G",s=e.G),n("ctx",i=e.ctx)),n("playerID",a=r.playerID)});return e.$set=e=>{"client"in e&&n("client",r=e.client)},{client:r,shortcuts:o,playerID:a,ctx:i,G:s,change_handler:e=>r.updatePlayerID(e.detail.playerID),click_handler:()=>r.events.endTurn(),click_handler_1:()=>r.events.endPhase(),click_handler_2:()=>r.events.endStage()}}class qn extends me{constructor(e){var t;super(),document.getElementById("svelte-1vg2l2b-style")||((t=P("style")).id="svelte-1vg2l2b-style",t.textContent=".json.svelte-1vg2l2b{font-family:monospace;color:#888}label.svelte-1vg2l2b{font-weight:bold;font-size:1.1em;display:inline}h3.svelte-1vg2l2b{text-transform:uppercase}li.svelte-1vg2l2b{list-style:none;margin:none;margin-bottom:5px}.events.svelte-1vg2l2b{display:flex;flex-direction:column}.events.svelte-1vg2l2b button.svelte-1vg2l2b{width:100px}.events.svelte-1vg2l2b button.svelte-1vg2l2b:not(:last-child){margin-bottom:10px}",b(document.head,t)),he(this,e,Gn,Nn,l,["client"])}}function Ln(e){var n,r,o,a,i,s,l=JSON.stringify(e.value)+"";return{c(){n=P("div"),r=P("strong"),o=k(e.name),a=I(),i=P("div"),s=k(l),D(i,"class","svelte-13qih23"),D(n,"class","item svelte-13qih23")},m(e,t){x(e,n,t),b(n,r),b(r,o),b(n,a),b(n,i),b(i,s)},p(e,t){e.name&&j(o,t.name),e.value&&l!==(l=JSON.stringify(t.value)+"")&&j(s,l)},i:t,o:t,d(e){e&&$(n)}}}function Tn(e,t,n){let{name:r,value:o}=t;return e.$set=e=>{"name"in e&&n("name",r=e.name),"value"in e&&n("value",o=e.value)},{name:r,value:o}}class Rn extends me{constructor(e){var t;super(),document.getElementById("svelte-13qih23-style")||((t=P("style")).id="svelte-13qih23-style",t.textContent=".item.svelte-13qih23{padding:10px}.item.svelte-13qih23:not(:first-child){border-top:1px dashed #aaa}.item.svelte-13qih23 div.svelte-13qih23{float:right;text-align:right}",b(document.head,t)),he(this,e,Tn,Ln,l,["name","value"])}}function Un(e){var t,n,r,o=new Rn({props:{name:"isConnected",value:e.$client.isConnected}}),a=new Rn({props:{name:"isMultiplayer",value:e.$client.isMultiplayer}});return{c(){t=P("span"),o.$$.fragment.c(),n=I(),a.$$.fragment.c()},m(e,i){x(e,t,i),pe(o,t,null),b(t,n),pe(a,t,null),r=!0},p(e,t){var n={};e.$client&&(n.value=t.$client.isConnected),o.$set(n);var r={};e.$client&&(r.value=t.$client.isMultiplayer),a.$set(r)},i(e){r||(se(o.$$.fragment,e),se(a.$$.fragment,e),r=!0)},o(e){le(o.$$.fragment,e),le(a.$$.fragment,e),r=!1},d(e){e&&$(t),fe(o),fe(a)}}}function Kn(e){var t,n,r,o,a,i=new Rn({props:{name:"gameID",value:e.client.gameID}}),s=new Rn({props:{name:"playerID",value:e.client.playerID}}),l=new Rn({props:{name:"isActive",value:e.$client.isActive}}),c=e.$client.isMultiplayer&&Un(e);return{c(){t=P("section"),i.$$.fragment.c(),n=I(),s.$$.fragment.c(),r=I(),l.$$.fragment.c(),o=I(),c&&c.c(),D(t,"class","gameinfo svelte-1yzq5o8")},m(e,u){x(e,t,u),pe(i,t,null),b(t,n),pe(s,t,null),b(t,r),pe(l,t,null),b(t,o),c&&c.m(t,null),a=!0},p(e,n){var r={};e.client&&(r.value=n.client.gameID),i.$set(r);var o={};e.client&&(o.value=n.client.playerID),s.$set(o);var a={};e.$client&&(a.value=n.$client.isActive),l.$set(a),n.$client.isMultiplayer?c?(c.p(e,n),se(c,1)):((c=Un(n)).c(),se(c,1),c.m(t,null)):c&&(ae(),le(c,1,1,()=>{c=null}),ie())},i(e){a||(se(i.$$.fragment,e),se(s.$$.fragment,e),se(l.$$.fragment,e),se(c),a=!0)},o(e){le(i.$$.fragment,e),le(s.$$.fragment,e),le(l.$$.fragment,e),le(c),a=!1},d(e){e&&$(t),fe(i),fe(s),fe(l),c&&c.d()}}}function Fn(e,t,n){let r,{client:o}=t;return c(e,o,e=>{r=e,n("$client",r)}),e.$set=e=>{"client"in e&&n("client",o=e.client)},{client:o,$client:r}}class Vn extends me{constructor(e){var t;super(),document.getElementById("svelte-1yzq5o8-style")||((t=P("style")).id="svelte-1yzq5o8-style",t.textContent=".gameinfo.svelte-1yzq5o8{padding:10px}",b(document.head,t)),he(this,e,Fn,Kn,l,["client"])}}function Jn(e){var n,r;return{c(){n=P("div"),r=k(e.turn),D(n,"class","turn-marker svelte-6eza86"),D(n,"style",e.style)},m(e,t){x(e,n,t),b(n,r)},p(e,t){e.turn&&j(r,t.turn)},i:t,o:t,d(e){e&&$(n)}}}function Hn(e,t,n){let{turn:r,numEvents:o}=t;const a=`grid-row: span ${o}`;return e.$set=e=>{"turn"in e&&n("turn",r=e.turn),"numEvents"in e&&n("numEvents",o=e.numEvents)},{turn:r,numEvents:o,style:a}}class Wn extends me{constructor(e){var t;super(),document.getElementById("svelte-6eza86-style")||((t=P("style")).id="svelte-6eza86-style",t.textContent=".turn-marker.svelte-6eza86{display:flex;justify-content:center;align-items:center;grid-column:1;background:#555;color:#eee;text-align:center;font-weight:bold;border:1px solid #888}",b(document.head,t)),he(this,e,Hn,Jn,l,["turn","numEvents"])}}function Yn(e){var n,r,o=e.phase||"";return{c(){n=P("div"),r=k(o),D(n,"class","phase-marker svelte-1t4xap"),D(n,"style",e.style)},m(e,t){x(e,n,t),b(n,r)},p(e,t){e.phase&&o!==(o=t.phase||"")&&j(r,o)},i:t,o:t,d(e){e&&$(n)}}}function Qn(e,t,n){let{phase:r,numEvents:o}=t;const a=`grid-row: span ${o}`;return e.$set=e=>{"phase"in e&&n("phase",r=e.phase),"numEvents"in e&&n("numEvents",o=e.numEvents)},{phase:r,numEvents:o,style:a}}class Xn extends me{constructor(e){var t;super(),document.getElementById("svelte-1t4xap-style")||((t=P("style")).id="svelte-1t4xap-style",t.textContent=".phase-marker.svelte-1t4xap{grid-column:3;background:#555;border:1px solid #888;color:#eee;text-align:center;font-weight:bold;padding-top:10px;padding-bottom:10px;text-orientation:sideways;writing-mode:vertical-rl;line-height:30px;width:100%}",b(document.head,t)),he(this,e,Qn,Yn,l,["phase","numEvents"])}}function Zn(e){var n,r;return{c(){n=P("div"),r=k(e.custompayload)},m(e,t){x(e,n,t),b(n,r)},p:t,i:t,o:t,d(e){e&&$(n)}}}function er(e,t,n){let{payload:r}=t;const o=void 0!==r?JSON.stringify(r,null,4):"";return e.$set=e=>{"payload"in e&&n("payload",r=e.payload)},{payload:r,custompayload:o}}class tr extends me{constructor(e){super(),he(this,e,er,Zn,l,["payload"])}}function nr(e){var t,n=new tr({props:{payload:e.payload}});return{c(){n.$$.fragment.c()},m(e,r){pe(n,e,r),t=!0},p(e,t){var r={};e.payload&&(r.payload=t.payload),n.$set(r)},i(e){t||(se(n.$$.fragment,e),t=!0)},o(e){le(n.$$.fragment,e),t=!1},d(e){fe(n,e)}}}function rr(e){var t,n,r=e.payloadComponent;function o(e){return{props:{payload:e.payload}}}if(r)var a=new r(o(e));return{c(){a&&a.$$.fragment.c(),t=_()},m(e,r){a&&pe(a,e,r),x(e,t,r),n=!0},p(e,n){var i={};if(e.payload&&(i.payload=n.payload),r!==(r=n.payloadComponent)){if(a){ae();const e=a;le(e.$$.fragment,1,0,()=>{fe(e,1)}),ie()}r?((a=new r(o(n))).$$.fragment.c(),se(a.$$.fragment,1),pe(a,t.parentNode,t)):a=null}else r&&a.$set(i)},i(e){n||(a&&se(a.$$.fragment,e),n=!0)},o(e){a&&le(a.$$.fragment,e),n=!1},d(e){e&&$(t),a&&fe(a,e)}}}function or(e){var t,n,r,o,a,s,l,c,u,d,p,f=e.action.payload.type+"",v=e.args.join(",")+"",h=[rr,nr],m=[];function g(e,t){return t.payloadComponent?0:1}return c=g(0,e),u=m[c]=h[c](e),{c(){t=P("div"),n=P("div"),r=k(f),o=k("("),a=k(v),s=k(")"),l=I(),u.c(),D(t,"class","log-event player"+e.playerID+" svelte-10wdo7v"),C(t,"pinned",e.pinned),p=[E(t,"click",e.click_handler),E(t,"mouseenter",e.mouseenter_handler),E(t,"mouseleave",e.mouseleave_handler)]},m(e,i){x(e,t,i),b(t,n),b(n,r),b(n,o),b(n,a),b(n,s),b(t,l),m[c].m(t,null),d=!0},p(e,n){d&&!e.action||f===(f=n.action.payload.type+"")||j(r,f);var o=c;(c=g(0,n))===o?m[c].p(e,n):(ae(),le(m[o],1,1,()=>{m[o]=null}),ie(),(u=m[c])||(u=m[c]=h[c](n)).c(),se(u,1),u.m(t,null)),e.pinned&&C(t,"pinned",n.pinned)},i(e){d||(se(u),d=!0)},o(e){le(u),d=!1},d(e){e&&$(t),m[c].d(),i(p)}}}function ar(e,t,n){let{logIndex:r,action:o,pinned:a,payload:i,payloadComponent:s}=t;const l=U(),c=o.payload.args||[],u=o.payload.playerID;return e.$set=e=>{"logIndex"in e&&n("logIndex",r=e.logIndex),"action"in e&&n("action",o=e.action),"pinned"in e&&n("pinned",a=e.pinned),"payload"in e&&n("payload",i=e.payload),"payloadComponent"in e&&n("payloadComponent",s=e.payloadComponent)},{logIndex:r,action:o,pinned:a,payload:i,payloadComponent:s,dispatch:l,args:c,playerID:u,click_handler:()=>l("click",{logIndex:r}),mouseenter_handler:()=>l("mouseenter",{logIndex:r}),mouseleave_handler:()=>l("mouseleave")}}class ir extends me{constructor(e){var t;super(),document.getElementById("svelte-10wdo7v-style")||((t=P("style")).id="svelte-10wdo7v-style",t.textContent=".log-event.svelte-10wdo7v{grid-column:2;cursor:pointer;overflow:hidden;display:flex;flex-direction:column;justify-content:center;background:#fff;border:1px dotted #ccc;border-left:5px solid #ccc;padding:5px;text-align:center;color:#888;font-size:14px;min-height:25px;line-height:25px}.log-event.svelte-10wdo7v:hover{border-style:solid;background:#eee}.log-event.pinned.svelte-10wdo7v{border-style:solid;background:#eee;opacity:1}.player0.svelte-10wdo7v{border-left-color:#ff851b}.player1.svelte-10wdo7v{border-left-color:#7fdbff}.player2.svelte-10wdo7v{border-left-color:#0074d9}.player3.svelte-10wdo7v{border-left-color:#39cccc}.player4.svelte-10wdo7v{border-left-color:#3d9970}.player5.svelte-10wdo7v{border-left-color:#2ecc40}.player6.svelte-10wdo7v{border-left-color:#01ff70}.player7.svelte-10wdo7v{border-left-color:#ffdc00}.player8.svelte-10wdo7v{border-left-color:#001f3f}.player9.svelte-10wdo7v{border-left-color:#ff4136}.player10.svelte-10wdo7v{border-left-color:#85144b}.player11.svelte-10wdo7v{border-left-color:#f012be}.player12.svelte-10wdo7v{border-left-color:#b10dc9}.player13.svelte-10wdo7v{border-left-color:#111111}.player14.svelte-10wdo7v{border-left-color:#aaaaaa}.player15.svelte-10wdo7v{border-left-color:#dddddd}",b(document.head,t)),he(this,e,ar,or,l,["logIndex","action","pinned","payload","payloadComponent"])}}function sr(e){var t,n;return{c(){t=O("title"),n=k(e.title)},m(e,r){x(e,t,r),b(t,n)},p(e,t){e.title&&j(n,t.title)},d(e){e&&$(t)}}}function lr(e){var t,n,o,a=e.title&&sr(e);const i=e.$$slots.default,s=function(e,t,n){if(e){const r=u(e,t,n);return e[0](r)}}(i,e,null);return{c(){t=O("svg"),a&&a.c(),n=_(),s&&s.c(),D(t,"xmlns","http://www.w3.org/2000/svg"),D(t,"viewBox",e.viewBox),D(t,"class","svelte-c8tyih")},l(e){s&&s.l(svg_nodes)},m(e,r){x(e,t,r),a&&a.m(t,null),b(t,n),s&&s.m(t,null),o=!0},p(e,l){l.title?a?a.p(e,l):((a=sr(l)).c(),a.m(t,n)):a&&(a.d(1),a=null),s&&s.p&&e.$$scope&&s.p(function(e,t,n,o){return e[1]?r({},r(t.$$scope.changed||{},e[1](o?o(n):{}))):t.$$scope.changed||{}}(i,l,e,null),u(i,l,null)),o&&!e.viewBox||D(t,"viewBox",l.viewBox)},i(e){o||(se(s,e),o=!0)},o(e){le(s,e),o=!1},d(e){e&&$(t),a&&a.d(),s&&s.d(e)}}}function cr(e,t,n){let{title:r=null,viewBox:o}=t,{$$slots:a={},$$scope:i}=t;return e.$set=e=>{"title"in e&&n("title",r=e.title),"viewBox"in e&&n("viewBox",o=e.viewBox),"$$scope"in e&&n("$$scope",i=e.$$scope)},{title:r,viewBox:o,$$slots:a,$$scope:i}}class ur extends me{constructor(e){var t;super(),document.getElementById("svelte-c8tyih-style")||((t=P("style")).id="svelte-c8tyih-style",t.textContent="svg.svelte-c8tyih{stroke:currentColor;fill:currentColor;stroke-width:0;width:100%;height:auto;max-height:100%}",b(document.head,t)),he(this,e,cr,lr,l,["title","viewBox"])}}function dr(e){var t;return{c(){D(t=O("path"),"d","M504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zM212 140v116h-70.9c-10.7 0-16.1 13-8.5 20.5l114.9 114.3c4.7 4.7 12.2 4.7 16.9 0l114.9-114.3c7.6-7.6 2.2-20.5-8.5-20.5H300V140c0-6.6-5.4-12-12-12h-64c-6.6 0-12 5.4-12 12z")},m(e,n){x(e,t,n)},d(e){e&&$(t)}}}function pr(e){var t,n=[{viewBox:"0 0 512 512"},e.$$props];let o={$$slots:{default:[dr]},$$scope:{ctx:e}};for(var a=0;a<n.length;a+=1)o=r(o,n[a]);var i=new ur({props:o});return{c(){i.$$.fragment.c()},m(e,n){pe(i,e,n),t=!0},p(e,t){var r,o=e.$$props?function(e,t){const n={},r={},o={$$scope:1};let a=e.length;for(;a--;){const i=e[a],s=t[a];if(s){for(const e in i)e in s||(r[e]=1);for(const e in s)o[e]||(n[e]=s[e],o[e]=1);e[a]=s}else for(const e in i)o[e]=1}for(const e in r)e in n||(n[e]=void 0);return n}(n,[n[0],(r=t.$$props,"object"==typeof r&&null!==r?r:{})]):{};e.$$scope&&(o.$$scope={changed:e,ctx:t}),i.$set(o)},i(e){t||(se(i.$$.fragment,e),t=!0)},o(e){le(i.$$.fragment,e),t=!1},d(e){fe(i,e)}}}function fr(e,t,n){return e.$set=e=>{n("$$props",t=r(r({},t),e))},{$$props:t,$$props:t=d(t)}}class vr extends me{constructor(e){super(),he(this,e,fr,pr,l,[])}}function hr(e){var n,r;return{c(){n=P("div"),r=k(e.text),D(n,"alt",e.text),D(n,"class","svelte-1a7time")},m(e,t){x(e,n,t),b(n,r)},p(e,t){e.text&&(j(r,t.text),D(n,"alt",t.text))},i:t,o:t,d(e){e&&$(n)}}}function mr(e,t,n){let r,{action:o}=t;return e.$set=e=>{"action"in e&&n("action",o=e.action)},e.$$.update=(e={action:1})=>{if(e.action){const{type:e,args:t}=o.payload,a=(t||[]).join(",");n("text",r=`${e}(${a})`)}},{action:o,text:r}}class gr extends me{constructor(e){var t;super(),document.getElementById("svelte-1a7time-style")||((t=P("style")).id="svelte-1a7time-style",t.textContent="div.svelte-1a7time{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;max-width:500px}",b(document.head,t)),he(this,e,mr,hr,l,["action"])}}function yr(e,t,n){const r=Object.create(e);return r.child=t[n],r.i=n,r}function br(e){var t,n,r,o,a,s,l,c,u,d,p,f=e.child.value+"",v=e.child.visits+"",h=new gr({props:{action:e.child.parentAction}});function m(){return e.click_handler(e)}function g(){return e.mouseout_handler(e)}function y(){return e.mouseover_handler(e)}return{c(){t=P("tr"),n=P("td"),r=k(f),o=I(),a=P("td"),s=k(v),l=I(),c=P("td"),h.$$.fragment.c(),u=I(),D(n,"class","svelte-ztcwsu"),D(a,"class","svelte-ztcwsu"),D(c,"class","svelte-ztcwsu"),D(t,"class","svelte-ztcwsu"),C(t,"clickable",e.children.length>0),C(t,"selected",e.i===e.selectedIndex),p=[E(t,"click",m),E(t,"mouseout",g),E(t,"mouseover",y)]},m(e,i){x(e,t,i),b(t,n),b(n,r),b(t,o),b(t,a),b(a,s),b(t,l),b(t,c),pe(h,c,null),b(t,u),d=!0},p(n,o){e=o,d&&!n.children||f===(f=e.child.value+"")||j(r,f),d&&!n.children||v===(v=e.child.visits+"")||j(s,v);var a={};n.children&&(a.action=e.child.parentAction),h.$set(a),n.children&&C(t,"clickable",e.children.length>0),n.selectedIndex&&C(t,"selected",e.i===e.selectedIndex)},i(e){d||(se(h.$$.fragment,e),d=!0)},o(e){le(h.$$.fragment,e),d=!1},d(e){e&&$(t),fe(h),i(p)}}}function xr(e){var t,n,r,o,a;let i=e.children,s=[];for(let t=0;t<i.length;t+=1)s[t]=br(yr(e,i,t));const l=e=>le(s[e],1,1,()=>{s[e]=null});return{c(){t=P("table"),(n=P("thead")).innerHTML='<th class="svelte-ztcwsu">Value</th> <th class="svelte-ztcwsu">Visits</th> <th class="svelte-ztcwsu">Action</th>',r=I(),o=P("tbody");for(let e=0;e<s.length;e+=1)s[e].c();D(t,"class","svelte-ztcwsu")},m(e,i){x(e,t,i),b(t,n),b(t,r),b(t,o);for(let e=0;e<s.length;e+=1)s[e].m(o,null);a=!0},p(e,t){if(e.children||e.selectedIndex){let n;for(i=t.children,n=0;n<i.length;n+=1){const r=yr(t,i,n);s[n]?(s[n].p(e,r),se(s[n],1)):(s[n]=br(r),s[n].c(),se(s[n],1),s[n].m(o,null))}for(ae(),n=i.length;n<s.length;n+=1)l(n);ie()}},i(e){if(!a){for(let e=0;e<i.length;e+=1)se(s[e]);a=!0}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)le(s[e]);a=!1},d(e){e&&$(t),w(s,e)}}}function $r(e,t,n){let{root:r,selectedIndex:o=null}=t;const a=U();let i=[],s=[];function l(e,t){a("select",{node:e,selectedIndex:t})}function c(e,t){null===o&&a("preview",{node:e})}return e.$set=e=>{"root"in e&&n("root",r=e.root),"selectedIndex"in e&&n("selectedIndex",o=e.selectedIndex)},e.$$.update=(e={root:1,parents:1})=>{if(e.root||e.parents){let e=r;for(n("parents",i=[]);e.parent;){const t=e.parent,{type:n,args:r}=e.parentAction.payload,o=`${n}(${(r||[]).join(",")})`;i.push({parent:t,arrowText:o}),e=t}i.reverse(),n("children",s=[...r.children].sort((e,t)=>e.visits<t.visits?1:-1).slice(0,50))}},{root:r,selectedIndex:o,children:s,Select:l,Preview:c,click_handler:({child:e,i:t})=>l(e,t),mouseout_handler:({i:e})=>c(null),mouseover_handler:({child:e,i:t})=>c(e)}}class wr extends me{constructor(e){var t;super(),document.getElementById("svelte-ztcwsu-style")||((t=P("style")).id="svelte-ztcwsu-style",t.textContent="table.svelte-ztcwsu{font-size:12px;border-collapse:collapse;border:1px solid #ddd;padding:0}tr.svelte-ztcwsu{cursor:pointer}tr.svelte-ztcwsu:hover td.svelte-ztcwsu{background:#eee}tr.selected.svelte-ztcwsu td.svelte-ztcwsu{background:#eee}td.svelte-ztcwsu{padding:10px;height:10px;line-height:10px;font-size:12px;border:none}th.svelte-ztcwsu{background:#888;color:#fff;padding:10px;text-align:center}",b(document.head,t)),he(this,e,$r,xr,l,["root","selectedIndex"])}}function Pr(e,t,n){const r=Object.create(e);return r.node=t[n].node,r.selectedIndex=t[n].selectedIndex,r.i=n,r}function Or(e){var t;var n=new wr({props:{root:e.node,selectedIndex:e.selectedIndex}});return n.$on("select",(function(...t){return e.select_handler_1(e,...t)})),{c(){n.$$.fragment.c()},m(e,r){pe(n,e,r),t=!0},p(t,r){e=r;var o={};t.nodes&&(o.root=e.node),t.nodes&&(o.selectedIndex=e.selectedIndex),n.$set(o)},i(e){t||(se(n.$$.fragment,e),t=!0)},o(e){le(n.$$.fragment,e),t=!1},d(e){fe(n,e)}}}function kr(e){var t;var n=new wr({props:{root:e.node}});return n.$on("select",(function(...t){return e.select_handler(e,...t)})),n.$on("preview",(function(...t){return e.preview_handler(e,...t)})),{c(){n.$$.fragment.c()},m(e,r){pe(n,e,r),t=!0},p(t,r){e=r;var o={};t.nodes&&(o.root=e.node),n.$set(o)},i(e){t||(se(n.$$.fragment,e),t=!0)},o(e){le(n.$$.fragment,e),t=!1},d(e){fe(n,e)}}}function Ir(e){var t,n,r,o,a,i=0!==e.i&&function(e){var t,n,r=new vr({});return{c(){t=P("div"),r.$$.fragment.c(),D(t,"class","icon svelte-1f0amz4")},m(e,o){x(e,t,o),pe(r,t,null),n=!0},i(e){n||(se(r.$$.fragment,e),n=!0)},o(e){le(r.$$.fragment,e),n=!1},d(e){e&&$(t),fe(r)}}}(),s=[kr,Or],l=[];function c(e,t){return t.i===t.nodes.length-1?0:1}return r=c(0,e),o=l[r]=s[r](e),{c(){i&&i.c(),t=I(),n=P("section"),o.c()},m(e,o){i&&i.m(e,o),x(e,t,o),x(e,n,o),l[r].m(n,null),a=!0},p(e,t){var a=r;(r=c(0,t))===a?l[r].p(e,t):(ae(),le(l[a],1,1,()=>{l[a]=null}),ie(),(o=l[r])||(o=l[r]=s[r](t)).c(),se(o,1),o.m(n,null))},i(e){a||(se(i),se(o),a=!0)},o(e){le(i),le(o),a=!1},d(e){i&&i.d(e),e&&($(t),$(n)),l[r].d()}}}function _r(e){var t,n,r,o,a=new vr({}),i=new wr({props:{root:e.preview}});return{c(){t=P("div"),a.$$.fragment.c(),n=I(),r=P("section"),i.$$.fragment.c(),D(t,"class","icon svelte-1f0amz4"),D(r,"class","preview svelte-1f0amz4")},m(e,s){x(e,t,s),pe(a,t,null),x(e,n,s),x(e,r,s),pe(i,r,null),o=!0},p(e,t){var n={};e.preview&&(n.root=t.preview),i.$set(n)},i(e){o||(se(a.$$.fragment,e),se(i.$$.fragment,e),o=!0)},o(e){le(a.$$.fragment,e),le(i.$$.fragment,e),o=!1},d(e){e&&$(t),fe(a),e&&($(n),$(r)),fe(i)}}}function Er(e){var t,n,r;let o=e.nodes,a=[];for(let t=0;t<o.length;t+=1)a[t]=Ir(Pr(e,o,t));const i=e=>le(a[e],1,1,()=>{a[e]=null});var s=e.preview&&_r(e);return{c(){t=P("div");for(let e=0;e<a.length;e+=1)a[e].c();n=I(),s&&s.c(),D(t,"class","visualizer svelte-1f0amz4")},m(e,o){x(e,t,o);for(let e=0;e<a.length;e+=1)a[e].m(t,null);b(t,n),s&&s.m(t,null),r=!0},p(e,r){if(e.nodes){let s;for(o=r.nodes,s=0;s<o.length;s+=1){const i=Pr(r,o,s);a[s]?(a[s].p(e,i),se(a[s],1)):(a[s]=Ir(i),a[s].c(),se(a[s],1),a[s].m(t,n))}for(ae(),s=o.length;s<a.length;s+=1)i(s);ie()}r.preview?s?(s.p(e,r),se(s,1)):((s=_r(r)).c(),se(s,1),s.m(t,null)):s&&(ae(),le(s,1,1,()=>{s=null}),ie())},i(e){if(!r){for(let e=0;e<o.length;e+=1)se(a[e]);se(s),r=!0}},o(e){a=a.filter(Boolean);for(let e=0;e<a.length;e+=1)le(a[e]);le(s),r=!1},d(e){e&&$(t),w(a,e),s&&s.d()}}}function Dr(e,t,n){let{metadata:r}=t,o=[],a=null;function i({node:e,selectedIndex:t},r){n("preview",a=null),n("nodes",o[r].selectedIndex=t,o),n("nodes",o=[...o.slice(0,r+1),{node:e}])}function s({node:e},t){n("preview",a=e)}return e.$set=e=>{"metadata"in e&&n("metadata",r=e.metadata)},e.$$.update=(e={metadata:1})=>{e.metadata&&n("nodes",o=[{node:r}])},{metadata:r,nodes:o,preview:a,SelectNode:i,PreviewNode:s,select_handler:({i:e},t)=>i(t.detail,e),preview_handler:({i:e},t)=>s(t.detail),select_handler_1:({i:e},t)=>i(t.detail,e)}}class jr extends me{constructor(e){var t;super(),document.getElementById("svelte-1f0amz4-style")||((t=P("style")).id="svelte-1f0amz4-style",t.textContent=".visualizer.svelte-1f0amz4{display:flex;flex-direction:column;align-items:center;padding:50px}.preview.svelte-1f0amz4{opacity:0.5}.icon.svelte-1f0amz4{color:#777;width:32px;height:32px;margin-bottom:20px}",b(document.head,t)),he(this,e,Dr,Er,l,["metadata"])}}function Sr(e,t,n){const r=Object.create(e);return r.phase=t[n].phase,r.i=n,r}function Ar(e,t,n){const r=Object.create(e);return r.action=t[n].action,r.payload=t[n].payload,r.i=n,r}function Cr(e,t,n){const r=Object.create(e);return r.turn=t[n].turn,r.i=n,r}function Mr(e){var t,n=new Wn({props:{turn:e.turn,numEvents:e.turnBoundaries[e.i]}});return{c(){n.$$.fragment.c()},m(e,r){pe(n,e,r),t=!0},p(e,t){var r={};e.renderedLogEntries&&(r.turn=t.turn),e.turnBoundaries&&(r.numEvents=t.turnBoundaries[t.i]),n.$set(r)},i(e){t||(se(n.$$.fragment,e),t=!0)},o(e){le(n.$$.fragment,e),t=!1},d(e){fe(n,e)}}}function zr(e){var t,n,r=e.i in e.turnBoundaries&&Mr(e);return{c(){r&&r.c(),t=_()},m(e,o){r&&r.m(e,o),x(e,t,o),n=!0},p(e,n){n.i in n.turnBoundaries?r?(r.p(e,n),se(r,1)):((r=Mr(n)).c(),se(r,1),r.m(t.parentNode,t)):r&&(ae(),le(r,1,1,()=>{r=null}),ie())},i(e){n||(se(r),n=!0)},o(e){le(r),n=!1},d(e){r&&r.d(e),e&&$(t)}}}function Nr(e){var t,n=new ir({props:{pinned:e.i===e.pinned,logIndex:e.i,action:e.action,payload:e.payload}});return n.$on("click",e.OnLogClick),n.$on("mouseenter",e.OnMouseEnter),n.$on("mouseleave",e.OnMouseLeave),{c(){n.$$.fragment.c()},m(e,r){pe(n,e,r),t=!0},p(e,t){var r={};e.pinned&&(r.pinned=t.i===t.pinned),e.renderedLogEntries&&(r.action=t.action),e.renderedLogEntries&&(r.payload=t.payload),n.$set(r)},i(e){t||(se(n.$$.fragment,e),t=!0)},o(e){le(n.$$.fragment,e),t=!1},d(e){fe(n,e)}}}function Br(e){var t,n=new Xn({props:{phase:e.phase,numEvents:e.phaseBoundaries[e.i]}});return{c(){n.$$.fragment.c()},m(e,r){pe(n,e,r),t=!0},p(e,t){var r={};e.renderedLogEntries&&(r.phase=t.phase),e.phaseBoundaries&&(r.numEvents=t.phaseBoundaries[t.i]),n.$set(r)},i(e){t||(se(n.$$.fragment,e),t=!0)},o(e){le(n.$$.fragment,e),t=!1},d(e){fe(n,e)}}}function Gr(e){var t,n,r=e.i in e.phaseBoundaries&&Br(e);return{c(){r&&r.c(),t=_()},m(e,o){r&&r.m(e,o),x(e,t,o),n=!0},p(e,n){n.i in n.phaseBoundaries?r?(r.p(e,n),se(r,1)):((r=Br(n)).c(),se(r,1),r.m(t.parentNode,t)):r&&(ae(),le(r,1,1,()=>{r=null}),ie())},i(e){n||(se(r),n=!0)},o(e){le(r),n=!1},d(e){r&&r.d(e),e&&$(t)}}}function qr(e){var t,n,r,o,a;let i=e.renderedLogEntries,s=[];for(let t=0;t<i.length;t+=1)s[t]=zr(Cr(e,i,t));const l=e=>le(s[e],1,1,()=>{s[e]=null});let c=e.renderedLogEntries,u=[];for(let t=0;t<c.length;t+=1)u[t]=Nr(Ar(e,c,t));const d=e=>le(u[e],1,1,()=>{u[e]=null});let p=e.renderedLogEntries,f=[];for(let t=0;t<p.length;t+=1)f[t]=Gr(Sr(e,p,t));const v=e=>le(f[e],1,1,()=>{f[e]=null});return{c(){t=P("div");for(let e=0;e<s.length;e+=1)s[e].c();n=I();for(let e=0;e<u.length;e+=1)u[e].c();r=I();for(let e=0;e<f.length;e+=1)f[e].c();D(t,"class","gamelog svelte-1pq5e4b"),C(t,"pinned",e.pinned),a=E(window,"keydown",e.OnKeyDown)},m(e,a){x(e,t,a);for(let e=0;e<s.length;e+=1)s[e].m(t,null);b(t,n);for(let e=0;e<u.length;e+=1)u[e].m(t,null);b(t,r);for(let e=0;e<f.length;e+=1)f[e].m(t,null);o=!0},p(e,o){if(e.turnBoundaries||e.renderedLogEntries){let r;for(i=o.renderedLogEntries,r=0;r<i.length;r+=1){const a=Cr(o,i,r);s[r]?(s[r].p(e,a),se(s[r],1)):(s[r]=zr(a),s[r].c(),se(s[r],1),s[r].m(t,n))}for(ae(),r=i.length;r<s.length;r+=1)l(r);ie()}if(e.pinned||e.renderedLogEntries){let n;for(c=o.renderedLogEntries,n=0;n<c.length;n+=1){const a=Ar(o,c,n);u[n]?(u[n].p(e,a),se(u[n],1)):(u[n]=Nr(a),u[n].c(),se(u[n],1),u[n].m(t,r))}for(ae(),n=c.length;n<u.length;n+=1)d(n);ie()}if(e.phaseBoundaries||e.renderedLogEntries){let n;for(p=o.renderedLogEntries,n=0;n<p.length;n+=1){const r=Sr(o,p,n);f[n]?(f[n].p(e,r),se(f[n],1)):(f[n]=Gr(r),f[n].c(),se(f[n],1),f[n].m(t,null))}for(ae(),n=p.length;n<f.length;n+=1)v(n);ie()}e.pinned&&C(t,"pinned",o.pinned)},i(e){if(!o){for(let e=0;e<i.length;e+=1)se(s[e]);for(let e=0;e<c.length;e+=1)se(u[e]);for(let e=0;e<p.length;e+=1)se(f[e]);o=!0}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)le(s[e]);u=u.filter(Boolean);for(let e=0;e<u.length;e+=1)le(u[e]);f=f.filter(Boolean);for(let e=0;e<f.length;e+=1)le(f[e]);o=!1},d(e){e&&$(t),w(s,e),w(u,e),w(f,e),a()}}}function Lr(e,t,n){let r,{client:o}=t;c(e,o,e=>{r=e,n("$client",r)});const{secondaryPane:a}=F("secondaryPane"),i=o.getInitialState();let s,{log:l}=r,u=null;function d(e){let t=i;for(let n=0;n<l.length;n++){const{action:r,automatic:a}=l[n];if(a||(t=o.reducer(t,r)),"MAKE_MOVE"==r.type){if(0==e)break;e--}}return{G:t.G,ctx:t.ctx}}function p(){n("pinned",u=null),o.overrideGameState(null),a.set(null)}R(p);let f={},v={};return e.$set=e=>{"client"in e&&n("client",o=e.client)},e.$$.update=(e={$client:1,log:1,renderedLogEntries:1})=>{if(e.$client||e.log||e.renderedLogEntries){n("log",l=r.log),n("renderedLogEntries",s=l.filter(e=>"MAKE_MOVE"==e.action.type));let e=0,t=0;n("turnBoundaries",f={}),n("phaseBoundaries",v={});for(let r=0;r<s.length;r++){const{action:o,payload:a,turn:i,phase:l}=s[r];t++,e++,r!=s.length-1&&s[r+1].turn==i||(n("turnBoundaries",f[r]=t,f),t=0),r!=s.length-1&&s[r+1].phase==l||(n("phaseBoundaries",v[r]=e,v),e=0)}}},{client:o,pinned:u,OnLogClick:function(e){const{logIndex:t}=e.detail,r=d(t),i=l.filter(e=>"MAKE_MOVE"==e.action.type);if(o.overrideGameState(r),u==t)n("pinned",u=null),a.set(null);else{n("pinned",u=t);const{metadata:e}=i[t].action.payload;e&&a.set({component:jr,metadata:e})}},OnMouseEnter:function(e){const{logIndex:t}=e.detail;if(null===u){const e=d(t);o.overrideGameState(e)}},OnMouseLeave:function(){null===u&&o.overrideGameState(null)},OnKeyDown:function(e){27==e.keyCode&&p()},renderedLogEntries:s,turnBoundaries:f,phaseBoundaries:v}}class Tr extends me{constructor(e){var t;super(),document.getElementById("svelte-1pq5e4b-style")||((t=P("style")).id="svelte-1pq5e4b-style",t.textContent=".gamelog.svelte-1pq5e4b{display:grid;grid-template-columns:30px 1fr 30px;grid-auto-rows:auto;grid-auto-flow:column}",b(document.head,t)),he(this,e,Lr,qr,l,["client"])}}const{Object:Rr}=de;function Ur(e,t,n){const r=Rr.create(e);return r.key=t[n][0],r.value=t[n][1],r}function Kr(e){var t,n,r,o,a,s,l,c=e.values[e.key]+"";function u(){e.input_change_input_handler.call(o,e)}return{c(){t=P("span"),n=k(c),r=I(),o=P("input"),D(t,"class","value svelte-7cel4i"),D(o,"type","range"),D(o,"min",a=e.value.range.min),D(o,"max",s=e.value.range.max),l=[E(o,"change",u),E(o,"input",u),E(o,"change",e.OnChange)]},m(a,i){x(a,t,i),b(t,n),x(a,r,i),x(a,o,i),S(o,e.values[e.key])},p(t,r){e=r,(t.values||t.bot)&&c!==(c=e.values[e.key]+"")&&j(n,c),(t.values||t.Object||t.bot)&&S(o,e.values[e.key]),t.bot&&a!==(a=e.value.range.min)&&D(o,"min",a),t.bot&&s!==(s=e.value.range.max)&&D(o,"max",s)},d(e){e&&($(t),$(r),$(o)),i(l)}}}function Fr(e){var t,n;function r(){e.input_change_handler.call(t,e)}return{c(){D(t=P("input"),"type","checkbox"),D(t,"class","svelte-7cel4i"),n=[E(t,"change",r),E(t,"change",e.OnChange)]},m(n,r){x(n,t,r),t.checked=e.values[e.key]},p(n,r){e=r,(n.values||n.Object||n.bot)&&(t.checked=e.values[e.key])},d(e){e&&$(t),i(n)}}}function Vr(e){var t,n,r,o,a,i,s=e.key+"",l=e.value.range&&Kr(e),c="boolean"==typeof e.value.value&&Fr(e);return{c(){t=P("div"),n=P("label"),r=k(s),o=I(),l&&l.c(),a=I(),c&&c.c(),i=I(),D(n,"class","svelte-7cel4i"),D(t,"class","option svelte-7cel4i")},m(e,s){x(e,t,s),b(t,n),b(n,r),b(t,o),l&&l.m(t,null),b(t,a),c&&c.m(t,null),b(t,i)},p(e,n){e.bot&&s!==(s=n.key+"")&&j(r,s),n.value.range?l?l.p(e,n):((l=Kr(n)).c(),l.m(t,a)):l&&(l.d(1),l=null),"boolean"==typeof n.value.value?c?c.p(e,n):((c=Fr(n)).c(),c.m(t,i)):c&&(c.d(1),c=null)},d(e){e&&$(t),l&&l.d(),c&&c.d()}}}function Jr(e){var n;let r=e.Object.entries(e.bot.opts()),o=[];for(let t=0;t<r.length;t+=1)o[t]=Vr(Ur(e,r,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();n=_()},m(e,t){for(let n=0;n<o.length;n+=1)o[n].m(e,t);x(e,n,t)},p(e,t){if(e.Object||e.bot||e.values){let a;for(r=t.Object.entries(t.bot.opts()),a=0;a<r.length;a+=1){const i=Ur(t,r,a);o[a]?o[a].p(e,i):(o[a]=Vr(i),o[a].c(),o[a].m(n.parentNode,n))}for(;a<o.length;a+=1)o[a].d(1);o.length=r.length}},i:t,o:t,d(e){w(o,e),e&&$(n)}}}function Hr(e,t,n){let{bot:r}=t,o={};for(let[e,t]of Object.entries(r.opts()))n("values",o[e]=t.value,o);return e.$set=e=>{"bot"in e&&n("bot",r=e.bot)},{bot:r,values:o,OnChange:function(){for(let[e,t]of Object.entries(o))r.setOpt(e,t)},Object:Object,input_change_input_handler:function({key:e}){o[e]=function(e){return""===e?void 0:+e}(this.value),n("values",o),n("Object",Object),n("bot",r)},input_change_handler:function({key:e}){o[e]=this.checked,n("values",o),n("Object",Object),n("bot",r)}}}class Wr extends me{constructor(e){var t;super(),document.getElementById("svelte-7cel4i-style")||((t=P("style")).id="svelte-7cel4i-style",t.textContent="label.svelte-7cel4i{font-weight:bold;color:#999}.option.svelte-7cel4i{margin-bottom:20px}.value.svelte-7cel4i{font-weight:bold}input[type='checkbox'].svelte-7cel4i{vertical-align:middle}",b(document.head,t)),he(this,e,Hr,Jr,l,["bot"])}}function Yr({game:e,isClient:t}){return e=Qt(e),(n=null,r)=>{switch(r.type){case"GAME_EVENT":{if(n={...n,deltalog:[]},t)return n;if(void 0!==n.ctx.gameover)return Ut("cannot call event after game end"),n;if(null!==r.payload.playerID&&void 0!==r.payload.playerID&&!e.flow.isPlayerActive(n.G,n.ctx,r.payload.playerID))return Ut(`disallowed event: ${r.payload.type}`),n;n=qt(n,{game:e,isClient:!1,playerID:r.payload.playerID});let o=e.flow.processEvent(n,r);return o=Lt(o,{game:e,isClient:!1}),{...o,_stateID:n._stateID+1}}case"MAKE_MOVE":{n={...n,deltalog:[]};const o=e.flow.getMove(n.ctx,r.payload.type,r.payload.playerID||n.ctx.currentPlayer);if(null===o)return Ut(`disallowed move: ${r.payload.type}`),n;if(t&&!1===o.client)return n;if(void 0!==n.ctx.gameover)return Ut("cannot make move after game end"),n;if(null!==r.payload.playerID&&void 0!==r.payload.playerID&&!e.flow.isPlayerActive(n.G,n.ctx,r.payload.playerID))return Ut(`disallowed move: ${r.payload.type}`),n;n=qt(n,{game:e,isClient:t,playerID:r.payload.playerID});let a=e.processMove(n,r.payload);if("INVALID_MOVE"===a)return Ut(`invalid move: ${r.payload.type} args: ${r.payload.args}`),n;let i={action:r,_stateID:n._stateID,turn:n.ctx.turn,phase:n.ctx.phase};!0===o.redact&&(i.redact=!0);const s={...n,G:a,deltalog:[i],_stateID:n._stateID+1};if(t&&((e,t)=>[...Nt,...t.game.plugins].filter(e=>void 0!==e.noClient).map(n=>{const r=n.name,o=e.plugins[r];return!!o&&n.noClient({G:e.G,ctx:e.ctx,game:t.game,api:o.api,data:o.data})}).some(e=>!0===e))(s,{game:e}))return n;if(n=s,t)return n=Lt(n,{game:e,isClient:!0});const l=n.ctx.turn;return n=e.flow.processMove(n,r.payload),(n=Lt(n,{game:e})).ctx.turn!==l||e.disableUndo||(n._undo=n._undo.concat({G:n.G,ctx:n.ctx,moveType:r.payload.type})),n._redo=[],n}case"RESET":case"UPDATE":case"SYNC":return r.state;case"UNDO":{if(e.disableUndo)return Ut("Undo is not enabled"),n;const{_undo:t,_redo:s}=n;if(t.length<2)return n;const l=t[t.length-1],c=t[t.length-2],u=e.flow.getMove(c.ctx,l.moveType,r.payload.playerID);return o=n.G,a=n.ctx,!function(e){return void 0!==e.undoable}(i=u)||(i.undoable instanceof Function?i.undoable(o,a):i.undoable)?{...n,G:c.G,ctx:c.ctx,_undo:t.slice(0,t.length-1),_redo:[l,...s]}:n}case"REDO":{const{_undo:t,_redo:r}=n;if(e.disableUndo)return Ut("Redo is not enabled"),n;if(0==r.length)return n;const o=r[0];return{...n,G:o.G,ctx:o.ctx,_undo:[...t,o],_redo:r.slice(1)}}case"PLUGIN":return((e,t,n)=>(n.game.plugins.filter(e=>void 0!==e.action).filter(e=>e.name===t.payload.type).forEach(n=>{const r=n.name,o=e.plugins[r]||{data:{}},a=n.action(o.data,t.payload);e={...e,plugins:{...e.plugins,[r]:{...o,data:a}}}}),e))(n,r,{game:e});default:return n}var o,a,i}}class Qr{constructor({enumerate:e,seed:t}){this.enumerateFn=e,this.seed=t,this.iterationCounter=0,this._opts={}}addOpt({key:e,range:t,initial:n}){this._opts[e]={range:t,value:n}}getOpt(e){return this._opts[e].value}setOpt(e,t){e in this._opts&&(this._opts[e].value=t)}opts(){return this._opts}enumerate(e,t,n){return this.enumerateFn(e,t,n).map(e=>"payload"in e?e:"move"in e?_e(e.move,e.args,n):"event"in e?Ee(e.event,e.args,n):void 0)}random(e){let t;if(void 0!==this.seed){let e=null;e=this.prngstate?new Ct("",{state:this.prngstate}):new Ct(this.seed,{state:!0}),t=e(),this.prngstate=e.state()}else t=Math.random();if(e){if(Array.isArray(e)){return e[Math.floor(t*e.length)]}return Math.floor(t*e)}return t}}class Xr extends Qr{constructor({enumerate:e,seed:t,objectives:n,game:r,iterations:o,playoutDepth:a,iterationCallback:i}){super({enumerate:e,seed:t}),void 0===n&&(n=()=>({})),this.objectives=n,this.iterationCallback=i||(()=>{}),this.reducer=Yr({game:r}),this.iterations=o,this.playoutDepth=a,this.addOpt({key:"async",initial:!1}),this.addOpt({key:"iterations",initial:"number"==typeof o?o:1e3,range:{min:1,max:2e3}}),this.addOpt({key:"playoutDepth",initial:"number"==typeof a?a:50,range:{min:1,max:100}})}createNode({state:e,parentAction:t,parent:n,playerID:r}){const{G:o,ctx:a}=e;let i=[],s=[];if(void 0!==r)i=this.enumerate(o,a,r),s=this.objectives(o,a,r);else if(a.activePlayers)for(let e in a.activePlayers)i=i.concat(this.enumerate(o,a,e)),s=s.concat(this.objectives(o,a,e));else i=i.concat(this.enumerate(o,a,a.currentPlayer)),s=s.concat(this.objectives(o,a,a.currentPlayer));return{state:e,parent:n,parentAction:t,actions:i,objectives:s,children:[],visits:0,value:0}}select(e){if(e.actions.length>0)return e;if(0==e.children.length)return e;let t=null,n=0;for(const r of e.children){const o=r.visits+Number.EPSILON,a=r.value/o+Math.sqrt(2*Math.log(e.visits)/o);(null==t||a>n)&&(n=a,t=r)}return this.select(t)}expand(e){const t=e.actions;if(0==t.length||void 0!==e.state.ctx.gameover)return e;const n=this.random(t.length),r=t[n];e.actions.splice(n,1);const o=this.reducer(e.state,r),a=this.createNode({state:o,parentAction:r,parent:e});return e.children.push(a),a}playout({state:e}){let t=this.getOpt("playoutDepth");"function"==typeof this.playoutDepth&&(t=this.playoutDepth(e.G,e.ctx));for(let n=0;n<t&&void 0===e.ctx.gameover;n++){const{G:t,ctx:n}=e;let r=n.currentPlayer;n.activePlayers&&(r=Object.keys(n.activePlayers)[0]);const o=this.enumerate(t,n,r),a=this.objectives(t,n,r),i=Object.keys(a).reduce((e,r)=>{const o=a[r];return o.checker(t,n)?e+o.weight:e},0);if(i>0)return{score:i};if(!o||0==o.length)return;const s=this.random(o.length);e=this.reducer(e,o[s])}return e.ctx.gameover}backpropagate(e,t={}){e.visits++,void 0!==t.score&&(e.value+=t.score),!0===t.draw&&(e.value+=.5),e.parentAction&&t.winner===e.parentAction.payload.playerID&&e.value++,e.parent&&this.backpropagate(e.parent,t)}play(e,t){const n=this.createNode({state:e,playerID:t});let r=this.getOpt("iterations");"function"==typeof this.iterations&&(r=this.iterations(e.G,e.ctx));const o=()=>{let e=null;for(const t of n.children)(null==e||t.visits>e.visits)&&(e=t);return{action:e&&e.parentAction,metadata:n}};return new Promise(e=>{const t=()=>{for(let e=0;e<25&&this.iterationCounter<r;e++){const e=this.select(n),t=this.expand(e),r=this.playout(t);this.backpropagate(t,r),this.iterationCounter++}this.iterationCallback({iterationCounter:this.iterationCounter,numIterations:r,metadata:n})};if(this.iterationCounter=0,this.getOpt("async")){const n=()=>{this.iterationCounter<r?(t(),setTimeout(n,0)):e(o())};n()}else{for(;this.iterationCounter<r;)t();e(o())}})}}class Zr extends Qr{play({G:e,ctx:t},n){const r=this.enumerate(e,t,n);return Promise.resolve({action:this.random(r)})}}async function eo(e,t){const n=e.store.getState();let r=n.ctx.currentPlayer;n.ctx.activePlayers&&(r=Object.keys(n.ctx.activePlayers)[0]);const{action:o,metadata:a}=await t.play(n,r);if(o){const t={...o,payload:{...o.payload,metadata:a}};return e.store.dispatch(t),t}}function to(e,t,n){const r=Object.create(e);return r.bot=t[n],r}function no(e){var n,r,o;return{c(){(n=P("p")).textContent="No bots available.",r=I(),(o=P("p")).innerHTML='\n\t\t\t        Follow the instructions\n\t\t\t        <a href="https://boardgame.io/documentation/#/tutorial?id=bots" target="_blank">\n\t\t\t          here</a>\n\t\t\t        to set up bots.\n\t\t\t      '},m(e,t){x(e,n,t),x(e,r,t),x(e,o,t)},p:t,i:t,o:t,d(e){e&&($(n),$(r),$(o))}}}function ro(e){var n;return{c(){(n=P("p")).textContent="The bot debugger is only available in singleplayer mode."},m(e,t){x(e,n,t)},p:t,i:t,o:t,d(e){e&&$(n)}}}function oo(e){var t,n,r,o,a,s,l,c,u,d,p,f,v,h,m,g,y,O,k=Object.keys(e.bot.opts()).length,j=new dn({props:{value:"1",onPress:e.Reset,label:"reset"}}),S=new dn({props:{value:"2",onPress:e.Step,label:"play"}}),C=new dn({props:{value:"3",onPress:e.Simulate,label:"simulate"}});let M=Object.keys(e.bots),z=[];for(let t=0;t<M.length;t+=1)z[t]=ao(to(e,M,t));var N=k&&io(e),B=(e.botAction||e.iterationCounter)&&so(e);return{c(){t=P("section"),(n=P("h3")).textContent="Controls",r=I(),o=P("li"),j.$$.fragment.c(),a=I(),s=P("li"),S.$$.fragment.c(),l=I(),c=P("li"),C.$$.fragment.c(),u=I(),d=P("section"),(p=P("h3")).textContent="Bot",f=I(),v=P("select");for(let e=0;e<z.length;e+=1)z[e].c();h=I(),N&&N.c(),m=I(),B&&B.c(),g=_(),D(n,"class","svelte-hsd9fq"),D(o,"class","svelte-hsd9fq"),D(s,"class","svelte-hsd9fq"),D(c,"class","svelte-hsd9fq"),D(p,"class","svelte-hsd9fq"),void 0===e.selectedBot&&Z(()=>e.select_change_handler.call(v)),O=[E(v,"change",e.select_change_handler),E(v,"change",e.ChangeBot)]},m(i,$){x(i,t,$),b(t,n),b(t,r),b(t,o),pe(j,o,null),b(t,a),b(t,s),pe(S,s,null),b(t,l),b(t,c),pe(C,c,null),x(i,u,$),x(i,d,$),b(d,p),b(d,f),b(d,v);for(let e=0;e<z.length;e+=1)z[e].m(v,null);A(v,e.selectedBot),x(i,h,$),N&&N.m(i,$),x(i,m,$),B&&B.m(i,$),x(i,g,$),y=!0},p(e,t){if(e.bots){let n;for(M=Object.keys(t.bots),n=0;n<M.length;n+=1){const r=to(t,M,n);z[n]?z[n].p(e,r):(z[n]=ao(r),z[n].c(),z[n].m(v,null))}for(;n<z.length;n+=1)z[n].d(1);z.length=M.length}e.selectedBot&&A(v,t.selectedBot),e.bot&&(k=Object.keys(t.bot.opts()).length),k?N?(N.p(e,t),se(N,1)):((N=io(t)).c(),se(N,1),N.m(m.parentNode,m)):N&&(ae(),le(N,1,1,()=>{N=null}),ie()),t.botAction||t.iterationCounter?B?B.p(e,t):((B=so(t)).c(),B.m(g.parentNode,g)):B&&(B.d(1),B=null)},i(e){y||(se(j.$$.fragment,e),se(S.$$.fragment,e),se(C.$$.fragment,e),se(N),y=!0)},o(e){le(j.$$.fragment,e),le(S.$$.fragment,e),le(C.$$.fragment,e),le(N),y=!1},d(e){e&&$(t),fe(j),fe(S),fe(C),e&&($(u),$(d)),w(z,e),e&&$(h),N&&N.d(e),e&&$(m),B&&B.d(e),e&&$(g),i(O)}}}function ao(e){var n,r,o=e.bot+"";return{c(){n=P("option"),r=k(o),n.__value=e.bot,n.value=n.__value},m(e,t){x(e,n,t),b(n,r)},p:t,d(e){e&&$(n)}}}function io(e){var t,n,r,o,a,s,l,c,u,d=new Wr({props:{bot:e.bot}});return{c(){t=P("section"),(n=P("h3")).textContent="Options",r=I(),(o=P("label")).textContent="debug",a=I(),s=P("input"),l=I(),d.$$.fragment.c(),D(n,"class","svelte-hsd9fq"),D(o,"class","svelte-hsd9fq"),D(s,"type","checkbox"),D(s,"class","svelte-hsd9fq"),u=[E(s,"change",e.input_change_handler),E(s,"change",e.OnDebug)]},m(i,u){x(i,t,u),b(t,n),b(t,r),b(t,o),b(t,a),b(t,s),s.checked=e.debug,b(t,l),pe(d,t,null),c=!0},p(e,t){e.debug&&(s.checked=t.debug);var n={};e.bot&&(n.bot=t.bot),d.$set(n)},i(e){c||(se(d.$$.fragment,e),c=!0)},o(e){le(d.$$.fragment,e),c=!1},d(e){e&&$(t),fe(d),i(u)}}}function so(e){var t,n,r,o,a=e.progress&&e.progress<1&&lo(e),i=e.botAction&&co(e);return{c(){t=P("section"),(n=P("h3")).textContent="Result",r=I(),a&&a.c(),o=I(),i&&i.c(),D(n,"class","svelte-hsd9fq")},m(e,s){x(e,t,s),b(t,n),b(t,r),a&&a.m(t,null),b(t,o),i&&i.m(t,null)},p(e,n){n.progress&&n.progress<1?a?a.p(e,n):((a=lo(n)).c(),a.m(t,o)):a&&(a.d(1),a=null),n.botAction?i?i.p(e,n):((i=co(n)).c(),i.m(t,null)):i&&(i.d(1),i=null)},d(e){e&&$(t),a&&a.d(),i&&i.d()}}}function lo(e){var t;return{c(){(t=P("progress")).value=e.progress},m(e,n){x(e,t,n)},p(e,n){e.progress&&(t.value=n.progress)},d(e){e&&$(t)}}}function co(e){var t,n,r,o,a,i,s,l=JSON.stringify(e.botActionArgs)+"";return{c(){t=P("li"),n=k("Action: "),r=k(e.botAction),o=I(),a=P("li"),i=k("Args: "),s=k(l),D(t,"class","svelte-hsd9fq"),D(a,"class","svelte-hsd9fq")},m(e,l){x(e,t,l),b(t,n),b(t,r),x(e,o,l),x(e,a,l),b(a,i),b(a,s)},p(e,t){e.botAction&&j(r,t.botAction),e.botActionArgs&&l!==(l=JSON.stringify(t.botActionArgs)+"")&&j(s,l)},d(e){e&&($(t),$(o),$(a))}}}function uo(e){var t,n,r,o,a,i=[oo,ro,no],s=[];function l(e,t){return t.client.game.ai&&!t.client.multiplayer?0:t.client.multiplayer?1:2}return n=l(0,e),r=s[n]=i[n](e),{c(){t=P("section"),r.c(),a=E(window,"keydown",e.OnKeyDown)},m(e,r){x(e,t,r),s[n].m(t,null),o=!0},p(e,o){var a=n;(n=l(0,o))===a?s[n].p(e,o):(ae(),le(s[a],1,1,()=>{s[a]=null}),ie(),(r=s[n])||(r=s[n]=i[n](o)).c(),se(r,1),r.m(t,null))},i(e){o||(se(r),o=!0)},o(e){le(r),o=!1},d(e){e&&$(t),s[n].d(),a()}}}function po(e,t,n){let{client:r}=t;const{secondaryPane:o}=F("secondaryPane"),a={MCTS:Xr,Random:Zr};let i=!1,s=null,l=0,c=null;const u=({iterationCounter:e,numIterations:t,metadata:r})=>{n("iterationCounter",l=e),n("progress",s=e/t),c=r,i&&c&&o.set({component:jr,metadata:c})};let d,p,f,v;function h(){r.overrideGameState(null),o.set(null),n("debug",i=!1)}return r.game.ai&&(n("bot",d=new Xr({game:r.game,enumerate:r.game.ai.enumerate,iterationCallback:u})),d.setOpt("async",!0)),R(h),e.$set=e=>{"client"in e&&n("client",r=e.client)},{client:r,bots:a,debug:i,progress:s,iterationCounter:l,OnDebug:function(){i&&c?o.set({component:jr,metadata:c}):o.set(null)},bot:d,selectedBot:p,botAction:f,botActionArgs:v,ChangeBot:function(){n("bot",d=new(0,a[p])({game:r.game,enumerate:r.game.ai.enumerate,iterationCallback:u})),d.setOpt("async",!0),n("botAction",f=null),c=null,o.set(null),n("iterationCounter",l=0)},Step:async function(){n("botAction",f=null),c=null,n("iterationCounter",l=0);const e=await eo(r,d);e&&(n("botAction",f=e.payload.type),n("botActionArgs",v=e.payload.args))},Simulate:function(e=1e4,t=100){return n("botAction",f=null),c=null,n("iterationCounter",l=0),(async()=>{for(let n=0;n<e;n++){if(!await eo(r,d))break;await new Promise(e=>setTimeout(e,t))}})()},Reset:function(){r.reset(),n("botAction",f=null),c=null,n("iterationCounter",l=0),h()},OnKeyDown:function(e){27==e.keyCode&&h()},select_change_handler:function(){p=function(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}(this),n("selectedBot",p),n("bots",a)},input_change_handler:function(){i=this.checked,n("debug",i)}}}class fo extends me{constructor(e){var t;super(),document.getElementById("svelte-hsd9fq-style")||((t=P("style")).id="svelte-hsd9fq-style",t.textContent="li.svelte-hsd9fq{list-style:none;margin:none;margin-bottom:5px}h3.svelte-hsd9fq{text-transform:uppercase}label.svelte-hsd9fq{font-weight:bold;color:#999}input[type='checkbox'].svelte-hsd9fq{vertical-align:middle}",b(document.head,t)),he(this,e,po,uo,l,["client"])}}function vo(e){var t,n,r,o,a,i,s=new sn({props:{panes:e.panes,pane:e.pane}});s.$on("change",e.MenuChange);var l=e.panes[e.pane].component;function c(e){return{props:{client:e.client}}}if(l)var u=new l(c(e));var d=e.$secondaryPane&&ho(e);return{c(){t=P("div"),s.$$.fragment.c(),n=I(),r=P("div"),u&&u.$$.fragment.c(),o=I(),d&&d.c(),D(r,"class","pane svelte-1h5kecx"),D(t,"class","debug-panel svelte-1h5kecx")},m(e,a){x(e,t,a),pe(s,t,null),b(t,n),b(t,r),u&&pe(u,r,null),b(t,o),d&&d.m(t,null),i=!0},p(e,n){var o={};e.pane&&(o.pane=n.pane),s.$set(o);var a={};if(e.client&&(a.client=n.client),l!==(l=n.panes[n.pane].component)){if(u){ae();const e=u;le(e.$$.fragment,1,0,()=>{fe(e,1)}),ie()}l?((u=new l(c(n))).$$.fragment.c(),se(u.$$.fragment,1),pe(u,r,null)):u=null}else l&&u.$set(a);n.$secondaryPane?d?(d.p(e,n),se(d,1)):((d=ho(n)).c(),se(d,1),d.m(t,null)):d&&(ae(),le(d,1,1,()=>{d=null}),ie())},i(e){i||(se(s.$$.fragment,e),u&&se(u.$$.fragment,e),se(d),Z(()=>{a||(a=ue(t,tn,{x:400},!0)),a.run(1)}),i=!0)},o(e){le(s.$$.fragment,e),u&&le(u.$$.fragment,e),le(d),a||(a=ue(t,tn,{x:400},!1)),a.run(0),i=!1},d(e){e&&$(t),fe(s),u&&fe(u),d&&d.d(),e&&a&&a.end()}}}function ho(e){var t,n,r=e.$secondaryPane.component;function o(e){return{props:{metadata:e.$secondaryPane.metadata}}}if(r)var a=new r(o(e));return{c(){t=P("div"),a&&a.$$.fragment.c(),D(t,"class","secondary-pane svelte-1h5kecx")},m(e,r){x(e,t,r),a&&pe(a,t,null),n=!0},p(e,n){var i={};if(e.$secondaryPane&&(i.metadata=n.$secondaryPane.metadata),r!==(r=n.$secondaryPane.component)){if(a){ae();const e=a;le(e.$$.fragment,1,0,()=>{fe(e,1)}),ie()}r?((a=new r(o(n))).$$.fragment.c(),se(a.$$.fragment,1),pe(a,t,null)):a=null}else r&&a.$set(i)},i(e){n||(a&&se(a.$$.fragment,e),n=!0)},o(e){a&&le(a.$$.fragment,e),n=!1},d(e){e&&$(t),a&&fe(a)}}}function mo(e){var t,n,r,o=e.visible&&vo(e);return{c(){o&&o.c(),t=_(),r=E(window,"keypress",e.Keypress)},m(e,r){o&&o.m(e,r),x(e,t,r),n=!0},p(e,n){n.visible?o?(o.p(e,n),se(o,1)):((o=vo(n)).c(),se(o,1),o.m(t.parentNode,t)):o&&(ae(),le(o,1,1,()=>{o=null}),ie())},i(e){n||(se(o),n=!0)},o(e){le(o),n=!1},d(e){o&&o.d(e),e&&$(t),r()}}}function go(e,t,n){let r,{client:o}=t;const a={main:{label:"Main",shortcut:"m",component:qn},log:{label:"Log",shortcut:"l",component:Tr},info:{label:"Info",shortcut:"i",component:Vn},ai:{label:"AI",shortcut:"a",component:fo}},i=Zt(!1),s=Zt(null);c(e,s,e=>{r=e,n("$secondaryPane",r)}),K("hotkeys",{disableHotkeys:i}),K("secondaryPane",{secondaryPane:s});let l="main";let u=!0;return e.$set=e=>{"client"in e&&n("client",o=e.client)},{client:o,panes:a,secondaryPane:s,pane:l,MenuChange:function(e){n("pane",l=e.detail)},visible:u,Keypress:function(e){"."!=e.key?u&&Object.entries(a).forEach(([t,{shortcut:r}])=>{e.key==r&&n("pane",l=t)}):n("visible",u=!u)},$secondaryPane:r}}class yo extends me{constructor(e){var t;super(),document.getElementById("svelte-1h5kecx-style")||((t=P("style")).id="svelte-1h5kecx-style",t.textContent=".debug-panel.svelte-1h5kecx{position:fixed;color:#555;font-family:monospace;display:flex;flex-direction:row;text-align:left;right:0;top:0;height:100%;font-size:14px;box-sizing:border-box;opacity:0.9}.pane.svelte-1h5kecx{flex-grow:2;overflow-x:hidden;overflow-y:scroll;background:#fefefe;padding:20px;border-left:1px solid #ccc;box-shadow:-1px 0 5px rgba(0, 0, 0, 0.2);box-sizing:border-box;width:280px}.secondary-pane.svelte-1h5kecx{background:#fefefe;overflow-y:scroll}.debug-panel.svelte-1h5kecx button, select{cursor:pointer;outline:none;background:#eee;border:1px solid #bbb;color:#555;padding:3px;border-radius:3px}.debug-panel.svelte-1h5kecx button{padding-left:10px;padding-right:10px}.debug-panel.svelte-1h5kecx button:hover{background:#ddd}.debug-panel.svelte-1h5kecx button:active{background:#888;color:#fff}.debug-panel.svelte-1h5kecx section{margin-bottom:20px}",b(document.head,t)),he(this,e,go,mo,l,["client"])}}function bo({game:e,numPlayers:t,setupData:n}){t||(t=2);let r={G:{},ctx:(e=Qt(e)).flow.ctx(t),plugins:{}};r=((e,t)=>([...Nt,...t.game.plugins].filter(e=>void 0!==e.setup).forEach(n=>{const r=n.name,o=n.setup({G:e.G,ctx:e.ctx,game:t.game});e={...e,plugins:{...e.plugins,[r]:{data:o}}}}),e))(r,{game:e}),r=qt(r,{game:e,playerID:void 0});const o=Bt(r);r.G=e.setup(o,n);let a={...r,_undo:[],_redo:[],_stateID:0};return a=e.flow.init(a),a=Lt(a,{game:e}),a}function xo(e,t,n,r,o,a){return t.reduce((t,i)=>(t[i]=function(...t){let s=r;if(!a&&null==r){s=n.getState().ctx.currentPlayer}n.dispatch(Be[e](i,t,s,o))},t),{})}const $o=xo.bind(null,"makeMove"),wo=xo.bind(null,"gameEvent"),Po=xo.bind(null,"plugin");class Oo{constructor({game:e,debug:t,numPlayers:n,multiplayer:r,gameID:o,playerID:a,credentials:i,enhancer:s}){this.game=Qt(e),this.playerID=a,this.gameID=o,this.credentials=i,this.multiplayer=r,this.debug=t,this.gameStateOverride=null,this.subscribers={},this._running=!1,this.reducer=Yr({game:this.game,isClient:void 0!==r}),this.initialState=null,r||(this.initialState=bo({game:this.game,numPlayers:n})),this.reset=()=>{this.store.dispatch(Se(this.initialState))},this.undo=()=>{this.store.dispatch(Ae(this.playerID,this.credentials))},this.redo=()=>{this.store.dispatch(Ce(this.playerID,this.credentials))},this.store=null,this.log=[];const l=e=>t=>n=>{const r=t(n),o=e.getState();switch(n.type){case"MAKE_MOVE":case"GAME_EVENT":{const e=o.deltalog;this.log=[...this.log,...e];break}case"RESET":this.log=[];break;case"UPDATE":{let e=-1;this.log.length>0&&(e=this.log[this.log.length-1]._stateID);let t=n.deltalog||[];t=t.filter(t=>t._stateID>e),this.log=[...this.log,...t];break}case"SYNC":this.initialState=n.initialState,this.log=n.log||[]}return r},c=e=>t=>n=>{const r=e.getState(),o=t(n);return"clientOnly"in n||this.transport.onAction(r,n),o},u=()=>e=>t=>{const n=e(t);return this.notifySubscribers(),n};s=void 0!==s?ke(Ie(u,c,l),s):Ie(u,c,l),this.store=$e(this.reducer,this.initialState,s),this.transport={isConnected:!0,onAction:()=>{},subscribe:()=>{},subscribeGameMetadata:()=>{},connect:()=>{},disconnect:()=>{},updateGameID:()=>{},updatePlayerID:()=>{}},r&&(this.transport=r({gameKey:e,game:this.game,store:this.store,gameID:o,playerID:a,gameName:this.game.name,numPlayers:n})),this.createDispatchers(),this.transport.subscribeGameMetadata(e=>{this.gameMetadata=e}),this._debugPanel=null}notifySubscribers(){Object.values(this.subscribers).forEach(e=>e(this.getState()))}overrideGameState(e){this.gameStateOverride=e,this.notifySubscribers()}start(){this.transport.connect(),this._running=!0;let e=null;if(e=yo,this.debug&&!0!==this.debug&&this.debug.impl&&(e=this.debug.impl),null!==e&&!1!==this.debug&&null==this._debugPanel&&"undefined"!=typeof document){let t=document.body;this.debug&&!0!==this.debug&&void 0!==this.debug.target&&(t=this.debug.target),t&&(this._debugPanel=new e({target:t,props:{client:this}}))}}stop(){this.transport.disconnect(),this._running=!1,null!=this._debugPanel&&(this._debugPanel.$destroy(),this._debugPanel=null)}subscribe(e){const t=Object.keys(this.subscribers).length;return this.subscribers[t]=e,this.transport.subscribe(()=>this.notifySubscribers()),!this._running&&this.multiplayer||e(this.getState()),()=>{delete this.subscribers[t]}}getInitialState(){return this.initialState}getState(){let e=this.store.getState();if(null!==this.gameStateOverride&&(e=this.gameStateOverride),null===e)return e;let t=!0;const n=this.game.flow.isPlayerActive(e.G,e.ctx,this.playerID);this.multiplayer&&!n&&(t=!1),this.multiplayer||null===this.playerID||void 0===this.playerID||n||(t=!1),void 0!==e.ctx.gameover&&(t=!1);const r=this.game.playerView(e.G,e.ctx,this.playerID);return{...e,G:r,log:this.log,isActive:t,isConnected:this.transport.isConnected}}createDispatchers(){this.moves=$o(this.game.moveNames,this.store,this.playerID,this.credentials,this.multiplayer),this.events=wo(this.game.flow.enabledEventNames,this.store,this.playerID,this.credentials,this.multiplayer),this.plugins=Po(this.game.pluginNames,this.store,this.playerID,this.credentials,this.multiplayer)}updatePlayerID(e){this.playerID=e,this.createDispatchers(),this.transport.updatePlayerID(e),this.notifySubscribers()}updateGameID(e){this.gameID=e,this.createDispatchers(),this.transport.updateGameID(e),this.notifySubscribers()}updateCredentials(e){this.credentials=e,this.createDispatchers(),this.notifySubscribers()}}e.Client=function(e){return new Oo(e)},Object.defineProperty(e,"__esModule",{value:!0})}));
